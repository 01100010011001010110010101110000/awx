/*! ansible-commander - v1.4.5 - 2014-02-12 */"use strict";function AdminsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=h,r=o("organizations")+e.organization_id+"/users/",s=i,t="select",u=s.inject(h,{mode:t}),v=o("organizations")+e.organization_id+"/admins/";p({scope:u,list:q,url:v,returnToCaller:1}),l({scope:u,set:"admins",list:q,url:r}),m({scope:u,list:q,url:r}),u.search(q.iterator),j()}function Authenticate(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o;l=function(){$("#login-username").focus()},n=k(d.sessionExpired)?a.get("sessionExpired"):d.sessionExpired,m=function(){return k(d.lastPath)?a.get("lastPath"):d.lastPath},$AnsibleConfig.debug_mode&&console&&(console.log("User session expired: "+n),console.log("Last URL: "+m())),$(".modal[aria-hidden=false]").each(function(){"login-modal"!==$(this).attr("id")&&$(this).modal("hide")}),i("stop"),$("#login-modal").modal({show:!0,keyboard:!1,backdrop:"static"}),$("#login-modal").on("shown.bs.modal",function(){l()}),o=angular.element(document.getElementById("login-modal")).scope(),o.login_username=null,o.login_password=null,o.loginForm.login_username.$setPristine(),o.loginForm.login_password.$setPristine(),"/logout"===e.path()&&f.logout(),d.userLoggedIn=!1,a.put("userLoggedIn",!1),$("#login-password").bind("keypress",function(a){var b=a.keyCode?a.keyCode:a.which;13===b&&$("#login-button").click()}),o.reset=function(){$("#login-form input").each(function(){$(this).val("")})},o.systemLogin=function(a,b){$(".api-error").empty();var c;k(a)||k(b)?h("Error!","Please provide a username and password before attempting to login.","alert-danger",l):(i("start"),f.retrieveToken(a,b).success(function(a,b){$("#login-modal").modal("hide"),c=a.token,f.setToken(a.token,a.expires),d.sessionTimer=j.init(),f.getUser().success(function(a){f.setUserInfo(a),d.user_is_superuser=a.results[0].is_superuser,f.getLicense().success(function(a){f.setLicense(a.license_info),m()?e.path(m()):e.url("/home?login=true")}).error(function(){i("stop"),h("Error","Failed to access user information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){i("stop"),h("Error","Failed to access license information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){var c,d,e;if(i("stop"),a.non_field_errors&&0===a.non_field_errors.length)for(e in a)o[e+"Error"]=a[e][0];else a.non_field_errors&&a.non_field_errors.length>0?(c="Error",d=a.non_field_errors[0]):(c="Error",d="The login attempt failed with a status of: "+b),o.reset(),h(c,d,"alert-danger",l)}))}}function CredentialsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o("htmlTemplate"),t("start");var v,w=h,x=q("credentials"),y=i,z=c.path().replace(/^\//,"").split("/")[0],A="credentials"===z?"edit":"select",B=y.inject(w,{mode:A});B.selected=[],B.credentialLoading=!0,v=q(z)+("users"===z?e.user_id+"/credentials/":e.team_id+"/credentials/"),r({scope:B,list:w,url:v,returnToCaller:1}),B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b;for(t("stop"),$("#prompt-modal").off(),w.fields.kind.searchOptions=B.credential_kind_options,a=0;a<B.credentials.length;a++)for(b=0;b<B.credential_kind_options.length;b++)if(B.credential_kind_options[b].value===B.credentials[a].kind){B.credentials[a].kind=B.credential_kind_options[b].label;break}}),B.removeChoicesReady&&B.removeChoicesReady(),B.removeChoicesReady=B.$on("choicesReadyCredential",function(){l({scope:B,set:"credentials",list:w,url:x}),m({scope:B,list:w,url:x}),B.search(w.iterator)}),s({scope:B,url:x,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),j(),B.showActivity=function(){u({scope:B})},B.addCredential=function(){c.path(c.path()+"/add")},B.editCredential=function(a){c.path(c.path()+"/"+a)},B.deleteCredential=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){t("start")}),$("#prompt-modal").modal("hide");var b=x+a+"/";f.setUrl(b),f.destroy().success(function(){B.search(w.iterator)}).error(function(a,c){t("stop"),p(B,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function CredentialsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){n("tree-form"),n("htmlTemplate");var A,B=g,C=h,D=C.inject(B,{mode:"add",related:!1}),E=u("credentials");C.reset(),l(),v({scope:D,url:E,field:"kind",variable:"credential_kind_options"}),r({scope:D,form:B,current_item:w(f.user_id)?null:f.user_id,list:s,field:"user"}),r({scope:D,form:B,current_item:w(f.team_id)?null:f.team_id,list:t,field:"team"}),w(f.user_id)?w(f.team_id)?(D.owner="user",y({scope:D})):(D.owner="team",D.team=f.team_id,y({scope:D}),A=u("teams")+f.team_id+"/",i.setUrl(A),i.get().success(function(a){D.team_name=a.name}).error(function(a,b){k(D,a,b,null,{hdr:"Error!",msg:"Failed to retrieve team. GET status: "+b})})):(D.owner="user",D.user=f.user_id,y({scope:D}),A=u("users")+f.user_id+"/",i.setUrl(A),i.get().success(function(a){D.user_username=a.username}).error(function(a,b){k(D,a,b,null,{hdr:"Error!",msg:"Failed to retrieve user. GET status: "+b})})),D.kindChange=function(){x({scope:D,form:B,reset:!0})},D.formSave=function(){C.clearApiErrors(),z({scope:D,mode:"add"})},D.ownerChange=function(){y({scope:D})},D.formReset=function(){C.reset()},D.clearPWConfirm=function(a){D[a]="",D[B.name+"_form"][a].$setValidity("awpassmatch",!1)},D.ask=function(a,b){D[a+"_ask"]?(D[a]="ASK",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0)):(D[a]="",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0))},D.clear=function(a,b){D[a]="",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0),D[B.name+"_form"].$setDirty()}}function CredentialsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){var a,b;for(a in F.fields)"password"===F.fields[a].type&&"ASK"===G[a]?($("#"+a+"-clear-btn").attr("disabled","disabled"),G[a+"_ask"]=!0):(G[a+"_ask"]=!1,$("#"+a+"-clear-btn").removeAttr("disabled")),I[a+"_ask"]=G[a+"_ask"];for(b=0;b<G.credential_kind_options.length;b++)if(G.kind===G.credential_kind_options[b].value){G.kind=G.credential_kind_options[b];break}}p("htmlTemplate");var D=r("credentials"),E=h,F=g,G=E.inject(F,{mode:"edit",related:!0}),H=d.path().replace(/^\//,"").split("/")[0],I={},J=f.credential_id;E.reset(),G.id=J,G.removeCredentialLoaded&&G.removeCredentialLoaded(),G.removeCredentialLoaded=G.$on("credentialLoaded",function(){w({scope:G,form:F,current_item:x(a.user_id)?null:G.user_id,list:u,field:"user"}),w({scope:G,form:F,current_item:x(a.team_id)?null:G.team_id,list:v,field:"team"}),C(),t({scope:G,form:F,reset:!1}),y({scope:G}),B("stop")}),G.removeChoicesReady&&G.removeChoicesReady(),G.removeChoicesReady=G.$on("choicesReadyCredential",function(){i.setUrl(D+":id/"),i.get({params:{id:J}}).success(function(a){var b,c;l({path:"/credentials/"+J,title:a.name});for(c in F.fields)null!==a[c]&&void 0!==a[c]&&(G[c]=a[c],I[c]=G[c]),"lookup"===F.fields[c].type&&a.summary_fields[F.fields[c].sourceModel]&&(G[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]=a.summary_fields[F.fields[c].sourceModel][F.fields[c].sourceField],I[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]=G[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]);for(G.owner=x(G.user)?"team":"user",I.owner=G.owner,b=0;b<G.credential_kind_options.length;b++)if(G.credential_kind_options[b].value===a.kind){G.kind=G.credential_kind_options[b];break}switch(I.kind=G.kind,a.kind){case"aws":G.access_key=a.username,G.secret_key=a.password,I.access_key=G.access_key,I.secret_key=G.secret_key;break;case"ssh":G.ssh_password=a.password,I.ssh_password=G.ssh_password;break;case"rax":G.api_key=a.password,I.api_key=G.api_key}G.$emit("credentialLoaded")}).error(function(a,b){k(G,a,b,F,{hdr:"Error!",msg:"Failed to retrieve Credential: "+f.id+". GET status: "+b})})}),B("start"),s({scope:G,url:D,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),G.showActivity=function(){A({scope:G})},G.formSave=function(){E.clearApiErrors(),z({scope:G,mode:"edit"})},G.ownerChange=function(){y({scope:G})},G.kindChange=function(){t({scope:G,form:F,reset:!0})},G.formReset=function(){E.reset();for(var a in I)G[a]=I[a];C(),t({scope:G,form:F,reset:!1}),y({scope:G})},G.add=function(a){b.flashMessage=null,d.path("/"+H+"/"+f.id+"/"+a+"/add")},G.edit=function(a,c){b.flashMessage=null,d.path("/"+H+"/"+f.id+"/"+a+"/"+c)},G["delete"]=function(a,c,d,e){b.flashMessage=null;var f=function(){var b=D+J+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),G.search(F.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(G,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};q({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+G.name+" "+e+"?",action:f})},G.clearPWConfirm=function(a){G[a]="",G[F.name+"_form"][a].$setValidity("awpassmatch",!1)},G.ask=function(a,b){G[a+"_ask"]?($("#"+a+"-clear-btn").attr("disabled","disabled"),G[a]="ASK",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0)):($("#"+a+"-clear-btn").removeAttr("disabled"),G[a]="",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0))},G.clear=function(a,b){G[a]="",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0),G[F.name+"_form"].$setDirty()}}function Home(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){k("home");var q,r,s,t,u;q={refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},r=p({btn:q.refresh,action:"refresh",toolbar:!0}),r+=p({btn:q.stream,action:"stream",toolbar:!0}),s=angular.element(document.getElementById("home-list-actions")),s.html(r),b(s)(a),t=4,u=0,c.login||f("start"),a.removeWidgetLoaded&&a.removeWidgetLoaded(),a.removeWidgetLoaded=a.$on("WidgetLoaded",function(){u++,u===t&&f("stop")}),a.removeDashboardReady&&a.removeDashboardReady(),a.removeDashboardReady=a.$on("dashboardReady",function(b,c){h({scope:a,target:"container1",dashboard:c}),i({scope:a,target:"container2",dashboard:c}),j({scope:a,target:"container4",dashboard:c}),g({scope:a,target:"container3",dashboard:c})}),a.showActivity=function(){l({scope:a})},a.refresh=function(){f("start"),u=0,m.setUrl(n("dashboard")),m.get().success(function(b){a.$emit("dashboardReady",b)}).error(function(b,c){f("stop"),o(a,b,c,null,{hdr:"Error!",msg:"Failed to get dashboard: "+c})})},a.refresh()}function HomeGroups(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){h("htmlTemplate");var x,y=d,z=c,A=i("groups"),B=y.inject(z,{mode:"edit"});if(B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b,c;for(a=0;a<B.home_groups.length;a++)B.home_groups[a].inventory_name=B.home_groups[a].summary_fields.inventory.name,c=n({status:B.home_groups[a].summary_fields.inventory_source.status}),b=m({active_failures:B.home_groups[a].hosts_with_active_failures,total_hosts:B.home_groups[a].total_hosts,inventory_id:B.home_groups[a].inventory,group_id:B.home_groups[a].id}),B.home_groups[a].status_class=c["class"],B.home_groups[a].status_tooltip=c.tooltip,B.home_groups[a].launch_tooltip=c.launch_tip,B.home_groups[a].launch_class=c.launch_class,B.home_groups[a].hosts_status_tip=b.tooltip,B.home_groups[a].show_failures=b.failures,B.home_groups[a].hosts_status_class=b["class"],B.home_groups[a].status=B.home_groups[a].summary_fields.inventory_source.status,B.home_groups[a].source=B.home_groups[a].summary_fields.inventory_source?B.home_groups[a].summary_fields.inventory_source.source:null}),j({scope:B,set:"home_groups",list:z,url:A}),k({scope:B,list:z,url:A}),b.name&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.name,B[z.iterator+"SearchField"]="name",B[z.iterator+"SearchFieldLabel"]=z.fields.name.label,B[z.iterator+"SearchSelectValue"]=null),b.id&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.id,B[z.iterator+"SearchField"]="id",B[z.iterator+"SearchFieldLabel"]=z.fields.id.label,B[z.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchValue"]=b.has_active_failures,B[z.iterator+"SearchField"]="has_active_failures",B[z.iterator+"SearchFieldLabel"]=z.fields.has_active_failures.label,B[z.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),b.status&&!b.source){B[z.iterator+"SearchField"]="status",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br\>/g," ");for(x in z.fields.status.searchOptions)if(z.fields.status.searchOptions[x].value===b.status){B[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[x];break}}if(b.source){B[z.iterator+"SearchField"]="source",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.source.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.source.label.replace(/<br\>/g," ");for(x in z.fields.source.searchOptions)if(z.fields.source.searchOptions[x].value===b.source){B[z.iterator+"SearchSelectValue"]=z.fields.source.searchOptions[x];break}b.status&&(B[z.iterator+"ExtraParms"]="&inventory_source__status__icontains="+b.status)}b.has_external_source&&(B[z.iterator+"SearchField"]="has_external_source",B[z.iterator+"SearchValue"]=z.fields.has_external_source.searchValue,B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchType"]="in",B[z.iterator+"SearchFieldLabel"]=z.fields.has_external_source.label),B.search(z.iterator),f(),B.showActivity=function(){p({scope:B})},B.editGroup=function(a,b){q({scope:B,group_id:a,inventory_id:b,groups_reload:!1})},B.viewUpdateStatus=function(a){B.groups=B.home_groups,o({scope:B,tree_id:a})},B.updateGroup=function(a){var b=w({list:B.home_groups,key:"id",val:a});b&&(u(b.source)||("updating"===b.status?s("Update in Progress","The inventory update process is currently running for group <em>"+b.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(r("start"),t.setUrl(b.related.inventory_source),t.get().success(function(a){v({scope:B,url:a.related.update,group_name:a.summary_fields.group.name,group_source:a.source,tree_id:b.id,group_id:b.id})}).error(function(a,c){e(B,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+b.related.inventory_source+" POST returned status: "+c})}))))},B.refresh=function(){B.search(z.iterator,null,!1,!0)}}function HomeHosts(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){h("htmlTemplate");var s=d,t=c,u=i("hosts"),v=s.inject(t,{mode:"edit"});v.removePostRefresh&&v.removePostRefresh(),v.removePostRefresh=v.$on("PostRefresh",function(){for(var a=0;a<v.hosts.length;a++)v.hosts[a].inventory_name=v.hosts[a].summary_fields.inventory.name,m({scope:v,host:v.hosts[a]})}),j({scope:v,set:"hosts",list:t,url:u}),k({scope:v,list:t,url:u}),b.name&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.name,v[c.iterator+"SearchField"]="name",v[c.iterator+"SearchFieldLabel"]=t.fields.name.label),b.id&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.id,v[c.iterator+"SearchField"]="id",v[c.iterator+"SearchFieldLabel"]=t.fields.id.label,v[c.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(v[c.iterator+"InputDisable"]=!0,v[c.iterator+"SearchValue"]=b.has_active_failures,v[c.iterator+"SearchField"]="has_active_failures",v[c.iterator+"SearchFieldLabel"]=c.fields.has_active_failures.label,v[c.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),v.search(t.iterator),f(),v.showActivity=function(){p({scope:v})},v.toggle_host_enabled=function(a,b){n({host_id:a,external_source:b,scope:v})},v.editHost=function(a){var b=q({list:v.hosts,key:"id",val:a});b&&o({scope:v,host_id:a,inventory_id:b.inventory,group_id:null,hostsReload:!1})},v.showJobSummary=function(a){r({job_id:a})}}function InventoriesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=q("inventory"),w=i,x=c.path().replace(/^\//,"").split("/"),y="inventories"===x[0]?"edit":"select",z=w.inject(h,{mode:y});b.flashMessage=null,l({scope:z,set:"inventories",list:u,url:v}),m({scope:z,list:u,url:v}),e.name&&(z[h.iterator+"InputDisable"]=!1,z[h.iterator+"SearchValue"]=e.name,z[h.iterator+"SearchField"]="name",z[h.iterator+"SearchFieldLabel"]=h.fields.name.label,z[h.iterator+"SearchSelectValue"]=null),e.has_active_failures&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.has_active_failures,z[h.iterator+"SearchField"]="has_active_failures",z[h.iterator+"SearchFieldLabel"]=h.fields.has_active_failures.label,z[h.iterator+"SearchSelectValue"]="true"===e.has_active_failures?{value:1}:{value:0}),e.has_inventory_sources&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.has_inventory_sources,z[h.iterator+"SearchField"]="has_inventory_sources",z[h.iterator+"SearchFieldLabel"]=h.fields.has_inventory_sources.label,z[h.iterator+"SearchSelectValue"]="true"===e.has_inventory_sources?{value:1}:{value:0}),e.inventory_sources_with_failures&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.inventory_sources_with_failures,z[h.iterator+"SearchField"]="inventory_sources_with_failures",z[h.iterator+"SearchFieldLabel"]=h.fields.inventory_sources_with_failures.label,z[h.iterator+"SearchType"]="gtzero"),z.search(u.iterator),j(),z.removePostRefresh&&z.removePostRefresh(),z.removePostRefresh=z.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off();for(var a=0;a<z.inventories.length;a++)z.inventories[a].hosts_with_active_failures>0?(z.inventories[a].failed_hosts_tip=z.inventories[a].hosts_with_active_failures+(1===z.inventories[a].hosts_with_active_failures?" host":" hosts")+" with job failures. Click to view details.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="true"):0===z.inventories[a].total_hosts?(z.inventories[a].failed_hosts_tip="No hosts defined. Click to add.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="na"):(z.inventories[a].failed_hosts_tip=z.inventories[a].total_hosts+(z.inventories[a].total_hosts>1?" hosts":" host")+" with no job failures. Click to view details.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="false"),z.inventories[a].status=z.inventories[a].inventory_sources_with_failures+" / "+z.inventories[a].total_inventory_sources,z.inventories[a].inventory_sources_with_failures>0?(z.inventories[a].status_tip=z.inventories[a].inventory_sources_with_failures+" cloud "+(1===z.inventories[a].inventory_sources_with_failures?"source":"sources")+" with failures. Click to view details.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="failed"):0===z.inventories[a].total_inventory_sources?(z.inventories[a].status_tip="Not synced with a cloud source. Click to edit.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="na"):(z.inventories[a].status_tip=z.inventories[a].total_inventory_sources+" cloud "+(z.inventories[a].total_inventory_sources>1?"sources":"source")+" with no failures. Click to view details.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="successful")}),z.removeRefreshInventories&&z.removeRefreshInventories(),z.removeRefreshInventories=z.$on("RefreshInventories",function(){z.search(u.iterator)}),z.showActivity=function(){s({scope:z})},z.editInventoryProperties=function(a){t({scope:z,inventory_id:a})},z.addInventory=function(){c.path(c.path()+"/add")},z.editInventory=function(a){c.path(c.path()+"/"+a)},z.deleteInventory=function(a,b){var c=function(){var b=v+a+"/";$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide"),f.setUrl(b),f.destroy().success(function(){z.search(u.iterator)}).error(function(a,c){r("stop"),p(z,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},z.lookupOrganization=function(a){f.setUrl(q("organizations")+a+"/"),f.get().success(function(a){return a.name})},z.viewJobs=function(a){c.url("/jobs/?inventory__int="+a)},z.viewFailedJobs=function(a){c.url("/jobs/?inventory__int="+a+"&status=failed")}}function InventoriesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n("htmlTemplate");var w,x=t("inventory"),y=g,z=h;y.well=!0,y.formLabelSize=null,y.formFieldSize=null,w=z.inject(y,{mode:"add",related:!1}),w.inventoryParseType="yaml",z.reset(),l(),u(w,"inventory_variables","inventoryParseType"),s({scope:w,form:y,current_item:f.organization_id?f.organization_id:null,list:p,field:"organization"}),w.formSave=function(){z.clearApiErrors(),v("start");try{var a,b,c;if(b="json"===w.inventoryParseType?JSON.parse(w.inventory_variables):jsyaml.load(w.inventory_variables),"object"!=typeof b)throw"failed to return an object!";c={};for(a in y.fields)"inventory_variables"!==a&&(y.fields[a].realName?c[y.fields[a].realName]=w[a]:c[a]=w[a]);i.setUrl(x),i.post(c).success(function(a){var c=a.id;w.inventory_variables?(i.setUrl(a.related.variable_data),i.put(b).success(function(){v("stop"),d.path("/inventories/"+c+"/")}).error(function(a,b){v("stop"),k(w,a,b,null,{hdr:"Error!",msg:"Failed to add inventory varaibles. PUT returned status: "+b})})):(v("stop"),d.path("/inventories/"+c+"/"))}).error(function(a,b){v("stop"),k(w,a,b,y,{hdr:"Error!",msg:"Failed to add new inventory. Post returned status: "+b})})}catch(e){v("stop"),j("Error","Error parsing inventory variables. Parser returned: "+e)}},w.formReset=function(){z.reset()}}function InventoriesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){f("htmlTemplate");var Q=e,R=g;a.inventory_id=c.inventory_id,r({path:b.path(),title:"{{ inventory_name }}"}),a.removeGroupTreeLoaded&&a.removeGroupTreeLoaded(),a.removeGroupTreeLoaded=a.$on("GroupTreeLoaded",function(b,c,e){var f,g;f=angular.element(document.getElementById("breadcrumbs")),f.html(q({list:R,mode:"edit"})),d(f)(a),Q.inject(R,{mode:"edit",id:"groups-container",breadCrumbs:!1,searchSize:"col-lg-5 col-md-5 col-sm-5"}),a.groups=e,a.inventory_name=c,a.groups.length>0?(a.selected_tree_id=a.groups[0].id,a.selected_group_id=a.groups[0].group_id,a.groups[0].selected_class="selected",a.groups[0].active_class="active-row",a.selected_group_name=a.groups[0].name):(a.selected_tree_id=null,a.selected_group_id=null),a.show_failures=!1,l({scope:a,inventory_id:a.inventory_id,tree_id:a.selected_tree_id,group_id:a.selected_group_id}),setTimeout(function(){$("#groups_table .name-column").each(function(){var a,b,c,d,e;a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%",$(this).find(".group-name").css({width:e})}),L("#groups_table .group-name a"),L("#hosts_table .host-name a")},2500),M(),g=P("inventoryAutoHelp"),"off"!==g&&a.autoShowGroupHelp&&a.showGroupHelp({autoShow:!0})}),a.removeGroupTreeRefreshed&&a.removeGroupTreeRefreshed(),a.removeGroupTreeRefreshed=a.$on("GroupTreeRefreshed",function(){setTimeout(function(){L("#groups_table .group-name a")},2500),a.showHosts(a.selected_tree_id,a.selected_group_id,!1)}),a.removeGroupDeleteCompleted&&a.removeGroupDeleteCompleted(),a.removeGroupDeleteCompleted=a.$on("GroupDeleteCompleted",function(){a.selected_tree_id=1,a.selected_group_id=null,i({scope:a,inventory_id:a.inventory_id,refresh:!0})}),a.removeCopMoveGroup&&a.removeCopyMoveGroup(),a.removeCopyMoveGroup=a.$on("CopyMoveGroup",function(b,c,d){G({scope:a,target_tree_id:d,inbound_tree_id:c})}),a.removeCopMoveHost&&a.removeCopyMoveHost(),a.removeCopyMoveHost=a.$on("CopyMoveHost",function(b,c,d){H({scope:a,target_tree_id:c,host_id:d})}),a.showHosts=function(b,c,d){if(null!==b){j("start"),a.selected_tree_id=b,a.selected_group_id=c,a.hosts=[],a.show_failures=d;for(var e=0;e<a.groups.length;e++)a.groups[e].id===b?(a.groups[e].selected_class="selected",a.groups[e].active_class="active-row",a.selected_group_name=a.groups[e].name):(a.groups[e].selected_class="",a.groups[e].active_class="");m({scope:a,group_id:c,tree_id:b,inventory_id:a.inventory_id})}else j("stop")},a.createGroup=function(){n({scope:a,inventory_id:a.inventory_id,group_id:a.selected_group_id})},a.editGroup=function(b,c){o({scope:a,inventory_id:a.inventory_id,group_id:b,tree_id:c,groups_reload:!0})},a.updateGroup=function(b){var c=A({list:a.groups,key:"id",val:b});c&&(s(c.source)||("updating"===c.status?w("Update in Progress","The inventory update process is currently running for group <em>"+c.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(j("start"),t.setUrl(c.related.inventory_source),t.get().success(function(b){v({scope:a,url:b.related.update,group_name:b.summary_fields.group.name,group_source:b.source,tree_id:c.id,group_id:c.group_id})}).error(function(b,d){j("stop"),u(a,b,d,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+c.related.inventory_source+" POST returned status: "+d})}))))},a.cancelUpdate=function(b){z({scope:a,tree_id:b})},a.toggle=function(b){x({scope:a,list:R,id:b})},a.refreshGroups=function(b,c){b&&(a.selected_tree_id=b,a.selected_group_id=c),i({scope:a,inventory_id:a.inventory_id,refresh:!0})},a.viewUpdateStatus=function(b,c){y({scope:a,tree_id:b,group_id:c})},a.deleteGroup=function(b,c){p({scope:a,tree_id:b,group_id:c,inventory_id:a.inventory_id})},a.createHost=function(){B({scope:a})},a.editInventoryProperties=function(){C({scope:a,inventory_id:a.inventory_id})},a.editHost=function(b){D({scope:a,host_id:b,inventory_id:a.inventory_id})},a.deleteHost=function(b,c){E({scope:a,host_id:b,host_name:c})},a.toggleHostEnabled=function(b,c){F({scope:a,host_id:b,external_source:c})},a.showGroupActivity=function(){var b,c,d;a.selected_group_id?(d=A({list:a.groups,key:"id",val:a.selected_tree_id}),b=J("activity_stream")+"?group__id="+a.selected_group_id,c="Showing all activities for group "+d.name):(c="Showing all activities for all "+a.inventory_name+" groups",b=J("activity_stream")+"?group__inventory__id="+a.inventory_id),I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showHostActivity=function(){var b,c;c="Showing all activities for all "+a.inventory_name+" hosts",b=J("activity_stream")+"?host__inventory__id="+a.inventory_id,I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showJobSummary=function(a){K({job_id:a})},a.showGroupHelp=function(a){var b={defn:O};a&&(b.autoShow=a.autoShow||!1),N(b)},i({scope:a,inventory_id:a.inventory_id,refresh:!1})}function JobEventsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(a){var b,c,d,e,f,g="",h=!1;if(a.res){if("string"==typeof a.res)c=a.res.match(/\n/g),d=c?c.length:1,d=d>10?10:d,h=!0,g+='<div class="form-group">\n',g+="<label>Traceback:</label>\n",g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res+"</textarea>\n",g+="</div>\n";else for(e in a.res){if(("msg"===e||"stdout"===e||"stderr"===e)&&null!==a.res[e]&&""!==a.res[e]){switch(g+='<div class="form-group">\n',g+="<label>",e){case"msg":case"stdout":g+="Output:";break;case"stderr":g+="Error:"}g+="</label>\n",c=a.res[e].match(/\n/g),d=c?c.length:1,d=d>10?10:d,g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res[e]+"</textarea>\n",g+="</div>\n",h=!0}if("results"===e&&Array.isArray(a.res[e])&&a.res[e].length>0){for(f="",b=0;b<a.res[e].length;b++)f+=a.res[e][b];c=f.match(/\n/g),d=c?c.length:1,d=d>10?10:d,""!==f&&(g+='<div class="form-group">\n',g+="<label>Results:</label>\n",g+='<textarea readonly class="form-control nowrap mono-space" rows="'+d+'">'+f+"</textarea>\n",g+="</div>\n",h=!0)}"rc"===e&&""!==a.res[e]&&(g+='<div class="form-group">\n',g+="<label>Return Code:</label>\n",g+='<input type="text" class="form-control nowrap mono-space" value="'+a.res[e]+'" readonly >\n',g+="</div>\n",h=!0)}g=h?'<form class="event-form">\n'+g+"</form>\n":""}return g=a.hosts?'<span class="event-detail-host visible-sm">'+a.host+"</span>\n"+g:""===g?null:g}p("htmlTemplate");var z,A=i,B=r("jobs")+f.id+"/job_events/",C=j,D=C.inject(A,{mode:"edit"});A.base=d.path(),D.job_id=f.id,c.flashMessage=null,D.selected=[],D.expand=!0,D.parentNode="parent-event",D.childNode="child-event",D.removeSetHostLinks&&D.removeSetHostLinks(),D.removeSetHostLinks=D.$on("SetHostLinks",function(a,b){for(var c=0;c<D.jobevents.length;c++)D.jobevents[c].summary_fields.host&&(D.jobevents[c].hostLink="/#/inventories/"+b+"/hosts/?name="+encodeURI(D.jobevents[c].summary_fields.host.name))}),D.removePostRefresh&&D.removePostRefresh(),D.removePostRefresh=D.$on("PostRefresh",function(){var b,c=D[A.name];for(b=0;b<c.length;b++)c[b].event_display=c[b].event_display.replace(/^\u00a0*/g,""),c[b].event_level<3?(c[b].ngclick="toggleChildren("+c[b].id+', "'+c[b].related.children+'")',c[b].ngicon="fa fa-minus-square-o node-toggle",c[b]["class"]="parentNode"):(c[b].ngicon="fa fa-square-o node-no-toggle",c[b]["class"]="childNode",c[b].event_detail=y(c[b].event_data)),c[b].show=!0,c[b].spaces=24*c[b].event_level,D.jobevents[b].failed?(D.jobevents[b].status="error",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"A failure occurred durring one or more playbook tasks.":c[b].event_level<3?"A failure occurred within the children of this event.":"A failure occurred. Click to view details"):D.jobevents[b].changed?(D.jobevents[b].status="changed",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"A change was completed durring one or more playbook tasks.":c[b].event_level<3?"A change was completed by one or more children of this event.":"A change was completed. Click to view details"):(D.jobevents[b].status="success",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"All playbook tasks completed successfully.":c[b].event_level<3?"All the children of this event completed successfully.":"No errors occurred. Click to view details"),c[b].created=a("date")(c[b].created,"MM/dd HH:mm:ss");g.setUrl(r("jobs")+D.job_id),g.get().success(function(a){D.job_status=a.status,D.job_name=a.summary_fields.job_template.name,k({path:"/jobs/"+D.job_id,title:D.job_id+" - "+a.summary_fields.job_template.name}),D.$emit("SetHostLinks",a.inventory)}).error(function(a,b){q(D,a,b,null,{hdr:"Error!",msg:"Failed to get job status for job: "+D.job_id+". GET status: "+b})})}),m({scope:D,set:"jobevents",list:A,url:B}),z=f.page?parseInt(f.page,10)-1:null,n({scope:D,list:A,url:B,page:z}),f.host&&(D[A.iterator+"SearchField"]="host",D[A.iterator+"SearchValue"]=f.host,D[A.iterator+"SearchFieldLabel"]=A.fields.host.label),D.search(A.iterator,f.page),D.toggleChildren=function(a,b){t({scope:D,list:A,id:a,children:b})},D.viewJobEvent=function(a){v({event_id:a})},D.refresh=function(){D.jobSearchSpin=!0,D.jobLoading=!0,x("start"),w({scope:D,set:"jobevents",iterator:"jobevent",url:D.current_url})}}function JobEventsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){m("htmlTemplate");var r=g,s=h,t=h.inject(r,{mode:"edit",related:!0}),u=n("base")+"job_events/"+f.event_id+"/";s.reset(),q("start"),i.setUrl(u),i.get().success(function(a){var b,c,d,e;t.event_display=a.event_display.replace(/^\u00a0*/g,""),l({path:"/jobs/"+f.job_id+"/job_events/"+f.event_id,title:t.event_display});for(c in r.fields)switch(c){case"status":t.status=a.failed?"error":a.changed?"changed":"success";break;case"created":b=new Date(a.created),t.created=o(b);break;case"host":a.summary_fields&&a.summary_fields.host&&(t.host=a.summary_fields.host.name);break;case"id":case"task":case"play":t[c]=a[c];break;case"start":case"end":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[c]&&(b=new Date(a.event_data.res[c]),t[c]=o(b));break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[c]&&(t[c]=a.event_data.res[c],"textarea"===r.fields[c].type&&(d=a.event_data.res[c].match(/\n/g),e=d?d.length:1,e=e>15?5:e,$('textarea[name="'+c+'"]').attr("rows",e)));break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(t[c]=a.event_data.res.invocation.fld)
}q("stop")}).error(function(a){k(t,a,status,null,{hdr:"Error!",msg:"Failed to retrieve host: "+f.event_id+". GET status: "+status})}),t.navigateBack=function(){var a="/jobs/"+f.job_id+"/job_events";f.page&&(a+="?page="+f.page),d.url(a)},t.rawView=function(){p({event_id:t.id})}}function JobHostSummaryList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=c.path().replace(/^\//,"").split("/")[0],w=q(v)+e.id+"/job_host_summaries/",x=i,y=x.inject(u,{mode:"edit"});u.index="hosts"===v?!1:!0,y.selected=[],"hosts"===v?(y.job_id=null,y.host_id=e.id):(y.job_id=e.id,y.host_id=null),y.RemoveSetHostLink&&y.RemoveSetHostLink(),y.RemoveSetHostLink=y.$on("setHostLink",function(a,b){for(var c=0;c<y.jobhosts.length;c++)y.jobhosts[c].hostLinkTo="/#/inventories/"+b+"/?host_name="+encodeURI(y.jobhosts[c].summary_fields.host.name)}),y.removePostRefresh&&y.removePostRefresh(),y.removePostRefresh=y.$on("PostRefresh",function(){for(var a=0;a<y.jobhosts.length;a++)y.jobhosts[a].host_name=y.jobhosts[a].summary_fields.host.name,y.jobhosts[a].status=y.jobhosts[a].failed?"failed":"success",y.jobhosts[a].statusBadgeToolTip=s(y.jobhosts[a].status)+" Click to view details.",y.jobhosts[a].statusLinkTo="/#/jobs/"+y.jobhosts[a].job+"/job_events/?host="+encodeURI(y.jobhosts[a].summary_fields.host.name);null!==y.job_id&&void 0!==y.job_id&&""!==y.job_id?(f.setUrl(q("jobs")+y.job_id),f.get().success(function(a){j({path:"/jobs/"+a.id,title:a.id+" - "+a.summary_fields.job_template.name}),y.job_status=a.status,"pending"!==a.status&&"waiting"!==a.status&&"running"!==a.status&&b.timer&&clearInterval(b.timer),y.$emit("setHostLink",a.inventory)}).error(function(a,b){p(y,a,b,null,{hdr:"Error!",msg:"Failed to get job status for job: "+y.job_id+". GET status: "+b})})):(j({path:"/hosts/"+y.host_id,title:y.jobhosts.length>0?y.jobhosts[0].summary_fields.host.name:"Host"}),e.inventory&&y.$emit("setHostLink",e.inventory))}),l({scope:y,set:"jobhosts",list:u,url:w}),m({scope:y,list:u,url:w}),e.host_name&&(y[u.iterator+"SearchField"]="host",y[u.iterator+"SearchValue"]=e.host_name,y[u.iterator+"SearchFieldLabel"]=u.fields.host.label),y.search(u.iterator),y.showEvents=function(a,b){f.setUrl(b),f.get().success(function(b){j({path:"/jobs/"+b.id,title:b.name}),c.url("/jobs/"+b.id+"/job_events/?host="+encodeURI(a))}).error(function(a,c){p(y,a,c,null,{hdr:"Error!",msg:"Failed to lookup last job: "+b+". GET status: "+c})})},y.showJob=function(a){c.path("/jobs/"+a)},y.refresh=function(){null===y.host_id&&(y.jobSearchSpin=!0,y.jobLoading=!0,t("start"),r({scope:y,set:"jobhosts",iterator:"jobhost",url:y.current_url}))}}function JobTemplatesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o("htmlTemplate");var y=h,z=q("job_templates"),A=i,B=c.path().replace(/^\//,"").split("/")[0],C="job_templates"===B?"edit":"select",D=A.inject(y,{mode:C});b.flashMessage=null,D.removePostRefresh&&D.removePostRefresh(),D.removePostRefresh=D.$on("PostRefresh",function(){w("stop"),$("#prompt-modal").off()}),l({scope:D,set:"job_templates",list:y,url:z}),m({scope:D,list:y,url:z}),e.name&&(D[y.iterator+"SearchField"]="name",D[y.iterator+"SearchValue"]=e.name,D[y.iterator+"SearchFieldLabel"]=y.fields.name.label),D.search(y.iterator),j(),D.showActivity=function(){x({scope:D})},D.addJobTemplate=function(){c.path(c.path()+"/add")},D.editJobTemplate=function(a){c.path(c.path()+"/"+a)},D.deleteJobTemplate=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var b=z+a+"/";f.setUrl(b),f.destroy().success(function(){D.search(y.iterator)}).error(function(a){w("stop"),p(D,a,status,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+status})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},D.submitJob=function(a){v({scope:D,id:a})}}function JobTemplatesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){n("htmlTemplate");var x,y,z=o("job_templates"),A=g,B=h,C=B.inject(A,{mode:"add",related:!1}),D={},E={};C.parseType="yaml",u(C),C.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],C.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],C.playbook_options=[],C.allow_callbacks="false",B.reset(),l(),t({scope:C,master:D,check_field:"allow_callbacks",default_val:!1}),s({scope:C,form:A,current_item:null,list:p,field:"inventory"}),jQuery.extend(!0,E,q),E.name="cloudcredentials",E.iterator="cloudcredential",s({url:o("credentials")+"?cloud=true",scope:C,form:A,current_item:null,list:E,field:"cloud_credential",hdr:"Select Cloud Credential"}),s({url:o("credentials")+"?kind=ssh",scope:C,form:A,current_item:null,list:q,field:"credential",hdr:"Select Machine Credential"}),x=function(a,b){var c;a!==b&&C.project&&(v("start"),c=o("projects")+C.project+"/playbooks/",i.setUrl(c),i.get().success(function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(a[b]);C.playbook_options=c,v("stop")}).error(function(a,b){k(C,a,b,A,{hdr:"Error!",msg:"Failed to get playbook list for "+c+". GET returned status: "+b})}))},y=function(a,b){a===b||w(C.project)||(i.setUrl(o("projects")+C.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}b&&j("Waning",b,"alert-info")}).error(function(a,b){k(C,a,b,A,{hdr:"Error!",msg:"Failed to get project "+C.project+". GET returned status: "+b})}))},C.selectPlaybookUnregister&&C.selectPlaybookUnregister(),C.selectPlaybookUnregister=C.$watch("project_name",function(a,b){x(a,b),y(a,b)}),s({scope:C,form:A,current_item:null,list:r,field:"project"}),C.formSave=function(){B.clearApiErrors(),v("start");var a,b,c={};try{if(a="json"===C.parseType?JSON.parse(C.variables):jsyaml.load(C.variables),"object"!=typeof a)throw"failed to return an object!";for(b in A.fields)"select"===A.fields[b].type&&"playbook"!==b?c[b]=C[b].value:"variables"!==b&&(c[b]=C[b]);c.extra_vars=JSON.stringify(a,void 0,"	"),w(c.extra_vars)&&(c.extra_vars=""),i.setUrl(z),i.post(c).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&m(),m(1)}).error(function(a,b){v("stop"),k(C,a,b,A,{hdr:"Error!",msg:"Failed to add new job template. POST returned status: "+b})})}catch(e){v("stop"),j("Error","Error parsing extra variables. Parser returned: "+e)}},C.formReset=function(){B.reset();for(var a in D)C[a]=D[a]}}function JobTemplatesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){p("htmlTemplate");var E,F,G=v("job_templates"),H=h,I=g,J=H.inject(I,{mode:"edit",related:!0}),K=0,L=d.path().replace(/^\//,"").split("/")[0],M={},N=f.id,O={};J.parseType="yaml",x(J),J.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],J.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],J.playbook_options=null,J.playbook=null,H.reset(),F=function(a){var b;C(a)||(b=v("projects")+a+"/playbooks/",A("start"),i.setUrl(b),i.get().success(function(a){var b;for(J.playbook_options=[],b=0;b<a.length;b++)J.playbook_options.push(a[b]),a[b]===J.playbook&&J.job_templates_form.playbook.$setValidity("required",!0);J.playbook?J.$emit("jobTemplateLoadFinished"):A("stop")}).error(function(){A("stop"),j("Missing Playbooks","Unable to retrieve the list of playbooks for this project. Choose a different  project or make the playbooks available on the file system.","alert-info")}))},E=function(){C(J.project)||(A("start"),i.setUrl(v("projects")+J.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}A("stop"),b&&j("Waning",b,"alert-info")}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to get project "+J.project+". GET returned status: "+b})}))},J.watchProjectUnregister&&J.watchProjectUnregister(),J.watchProjectUnregister=J.$watch("project_name",function(a,b){a!==b&&""!==b&&null!==b&&void 0!==b&&(J.playbook=null,F(J.project),E())}),J.removeJobTemplateLoadFinished&&J.removeJobTemplateLoadFinished(),J.removeJobTemplateLoadFinished=J.$on("jobTemplateLoadFinished",function(){if(K++,K>=2)for(var a in O)J.search(O[a].iterator)}),J.removeRelatedJobs&&J.removeRelatedJobs(),J.removeRelatedJobs=J.$on("relatedjobs",function(){var a,b;if(J.jobs&&J.jobs.length)for(a=0;a<J.jobs.length;a++)b=new Date(J.jobs[a].created),J.jobs[a].created=z(b),J.jobs[a].statusBadgeToolTip=y(J.jobs[a].status)+" Click to view status details.",J.jobs[a].statusLinkTo="/#/jobs/"+J.jobs[a].id}),J.cloudCredentialReadyRemove&&J.cloudCredentialReadyRemove(),J.cloudCredentialReadyRemove=J.$on("cloudCredentialReady",function(a,b){var c={};J.cloud_credential_name=b,M.cloud_credential_name=b,jQuery.extend(!0,c,r),c.name="cloudcredentials",c.iterator="cloudcredential",t({url:v("credentials")+"?cloud=true",scope:J,form:I,current_item:J.cloud_credential,list:c,field:"cloud_credential",hdr:"Select Cloud Credential"}),J.$emit("jobTemplateLoadFinished")}),J.jobTemplateLoadedRemove&&J.jobTemplateLoadedRemove(),J.jobTemplateLoadedRemove=J.$on("jobTemplateLoaded",function(a,b){var c;F(J.project),c=""===J.host_config_key||null===J.host_config_key?"false":"true",w({scope:J,master:M,check_field:"allow_callbacks",default_val:c}),b?(i.setUrl(b),i.get().success(function(a){J.$emit("cloudCredentialReady",a.name)}).error(function(a,b){k(J,a,b,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+b})})):J.$emit("cloudCredentialReady",null)}),A("start"),i.setUrl(G+":id/"),i.get({params:{id:N}}).success(function(a){var b,c,d,e,f;l({path:"/job_templates/"+N,title:a.name});for(b in I.fields){if("variables"!==b&&null!==a[b]&&void 0!==a[b]){if("select"===I.fields[b].type)if(J[b+"_options"]&&J[b+"_options"].length>0)for(c=0;c<J[b+"_options"].length;c++)a[b]===J[b+"_options"][c].value&&(J[b]=J[b+"_options"][c]);else J[b]=a[b];else J[b]=a[b];M[b]=J[b]}"variables"===b&&($.isEmptyObject(a.extra_vars)||"{}"===a.extra_vars||"null"===a.extra_vars||""===a.extra_vars||null===a.extra_vars?J.variables="---":(d=JSON.parse(a.extra_vars),J.variables=jsyaml.safeDump(d)),M.variables=J.variables),"lookup"===I.fields[b].type&&a.summary_fields[I.fields[b].sourceModel]&&(J[I.fields[b].sourceModel+"_"+I.fields[b].sourceField]=a.summary_fields[I.fields[b].sourceModel][I.fields[b].sourceField],M[I.fields[b].sourceModel+"_"+I.fields[b].sourceField]=J[I.fields[b].sourceModel+"_"+I.fields[b].sourceField])}J.url=a.url,e=a.related;for(f in I.related)e[f]&&(O[f]={url:e[f],iterator:I.related[f].iterator});J.callback_url=a.related.callback,M.callback_url=J.callback_url,t({scope:J,form:I,current_item:a.inventory,list:q,field:"inventory"}),t({url:v("credentials")+"?kind=ssh",scope:J,form:I,current_item:a.credential,list:r,field:"credential",hdr:"Select Machine Credential"}),t({scope:J,form:I,current_item:a.project,list:s,field:"project"}),m({scope:J,form:I,relatedSets:O}),n({scope:J,relatedSets:O}),J.$emit("jobTemplateLoaded",a.related.cloud_credential)}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to retrieve job template: "+f.id+". GET status: "+b})}),J.formSave=function(){H.clearApiErrors(),A("start");var a,b,c={};try{if(a="json"===J.parseType?JSON.parse(J.variables):jsyaml.load(J.variables),"object"!=typeof a)throw"failed to return an object!";for(b in I.fields)"select"===I.fields[b].type&&"playbook"!==b?c[b]=J[b].value:"variables"!==b&&"callback_url"!==b&&(c[b]=J[b]);c.extra_vars=JSON.stringify(a,void 0,"	"),("null"===c.extra_vars||null===c.extra_vars)&&(c.extra_vars=""),i.setUrl(G+N+"/"),i.put(c).success(function(){A("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&o(),o(1)}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to update job template. PUT returned status: "+b})})}catch(e){A("stop"),j("Error","Error parsing extra variables. Parser returned: "+e)}},J.showActivity=function(){B({scope:J})},J.formReset=function(){H.reset();for(var a in M)J[a]=M[a];J.parseType="yaml",$("#forks-slider").slider("option","value",J.forks)},J.add=function(a){b.flashMessage=null,d.path("/"+L+"/"+f.id+"/"+a)},J.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},J["delete"]=function(a,c,d,e){b.flashMessage=null;var f=function(){var b=G+N+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),J.search(I.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(J,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};D({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+J.name+" "+e+"?",action:f})}}function JobsListCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o("htmlTemplate");var y,z=h,A=q("jobs"),B=i,C=B.inject(z,{mode:"edit"});if(b.flashMessage=null,C.selected=[],C.removePostRefresh&&C.removePostRefresh(),C.removePostRefresh=C.$on("PostRefresh",function(){var a,b;if($("tr.success").each(function(){var a=$(this).attr("ng-class");C[a]=""}),C.jobs&&C.jobs.length)for(a=0;a<C.jobs.length;a++)b=new Date(C.jobs[a].created),C.jobs[a].created=t(b),C.jobs[a].statusBadgeToolTip=v(C.jobs[a].status)+" Click to view status details.",C.jobs[a].statusLinkTo="/#/jobs/"+C.jobs[a].id}),e.job_host_summaries__host?A+="?job_host_summaries__host="+e.job_host_summaries__host:e.inventory__int&&e.status&&(A+="?inventory__int="+e.inventory__int+"&status="+e.status),l({scope:C,set:"jobs",list:z,url:A}),m({scope:C,list:z,url:A}),e.inventory__int&&(C[z.iterator+"SearchField"]="inventory",C[z.iterator+"SearchValue"]=e.inventory__int,C[z.iterator+"SearchFieldLabel"]="Inventory ID"),e.id__int&&(C[z.iterator+"SearchField"]="id",C[z.iterator+"SearchValue"]=e.id__int,C[z.iterator+"SearchFieldLabel"]="Job ID"),e.status){C[z.iterator+"SearchField"]="status",C[z.iterator+"SelectShow"]=!0,C[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,C[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br>/g," ");for(y in z.fields.status.searchOptions)if(z.fields.status.searchOptions[y].value===e.status){C[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[y];break}}C.search(z.iterator),j(),C.refresh=function(){x("start"),C.jobLoading=!1,u({scope:C,set:"jobs",iterator:"job",url:C.current_url})},C.refreshJob=C.refresh,C.editJob=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a)},C.viewEvents=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_events")},C.viewSummary=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_host_summaries")},C.deleteJob=function(a){f.setUrl(A+a+"/"),f.get().success(function(b){var c,d,e,g;"pending"===b.status||"running"===b.status||"waiting"===b.status?(d=b.related.cancel,e="cancel",g="Cancel Job"):(d=A+a+"/",e="delete",g="Delete Job"),c=function(){f.setUrl(d),"cancel"===e?f.post().success(function(){$("#prompt-modal").modal("hide"),C.search(z.iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),p(C,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. POST returned status: "+b})}):f.destroy().success(function(){$("#prompt-modal").modal("hide"),C.search(z.iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),p(C,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. DELETE returned status: "+b})})},k({hdr:g,body:"Are you sure you want to "+e+" job "+a+"?",action:c})}).error(function(a,b){p(C,a,b,null,{hdr:"Error!",msg:"Failed to get job details. GET returned status: "+b})})},C.submitJob=function(a,b){s({scope:C,id:a,template:b})}}function JobsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(a){if(null!==a&&""!==a&&void 0!==a){var b=v("projects")+a+"/playbooks/";i.setUrl(b),i.get().success(function(a){F.playbook_options=[];for(var b=0;b<a.length;b++)F.playbook_options.push(a[b]);F.$emit("jobTemplateLoadFinished")}).error(function(){F.$emit("jobTemplateLoadFinished")})}else F.$emit("jobTemplateLoadFinished")}function B(a){var b=a.match(/\n/g),c=b?b.length:1;return c>15?15:c}p("htmlTemplate");var C=v("jobs"),D=h,E=g,F=D.inject(E,{mode:"edit",related:!0}),G={},H=f.id,I={},J=0;D.reset(),F.job_id=H,F.parseType="yaml",F.statusSearchSpin=!1,F.jobLoadedRemove&&F.jobLoadedRemove(),F.jobLoadedRemove=F.$on("jobLoaded",function(a,b){A(F.project),F[E.name+"ReadOnly"]="new"===F.status?!1:!0,$("#forks-slider").slider("option","value",F.forks),$("#forks-slider").slider("disable"),$('input[type="checkbox"]').attr("disabled","disabled"),$('input[type="radio"]').attr("disabled","disabled"),$("#host_config_key-gen-btn").attr("disabled","disabled"),$("textarea").attr("readonly","readonly"),i.setUrl(F.template_url),i.get().success(function(a){var b=a.host_config_key?"true":"false";F.host_config_key=a.host_config_key,w({scope:F,master:G,check_field:"allow_callbacks",default_val:b}),F.callback_url=a.related?a.related.callback:"<< Job template not found >>",F.$emit("jobTemplateLoadFinished")}).error(function(){z("stop"),F.callback_url="<< Job template not found >>"}),b?(i.setUrl(b),i.get().success(function(a){F.cloud_credential_name=a.name,F.$emit("jobTemplateLoadFinished")}).error(function(a,b){k(F,a,b,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+b})})):F.$emit("jobTemplateLoadFinished")}),F.removeJobTemplateLoadFinished&&F.removeJobTemplateLoadFinished(),F.removeJobTemplateLoadFinished=F.$on("jobTemplateLoadFinished",function(){J++,J>=3&&z("stop")}),F.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],F.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],F.playbook_options=null,F.playbook=null,z("start"),i.setUrl(C+":id/"),i.get({params:{id:H}}).success(function(a){var b,c,d,e,f,g;l();for(d in E.fields){if("variables"!==d&&null!==a[d]&&void 0!==a[d]){if("select"===E.fields[d].type)if(F[d+"_options"]&&F[d+"_options"].length>0)for(b=0;b<F[d+"_options"].length;b++)a[d]===F[d+"_options"][b].value&&(F[d]=F[d+"_options"][b]);else F[d]=a[d]}else F[d]=a[d];G[d]=F[d]}F.id=a.id,F.name=a.summary_fields&&a.summary_fields.job_template?a.summary_fields.job_template.name:"","variables"===d&&($.isEmptyObject(a.extra_vars)||"{}"===a.extra_vars||"null"===a.extra_vars||""===a.extra_vars||null===a.extra_vars?F.variables="---":(e=JSON.parse(a.extra_vars),F.variables=jsyaml.safeDump(e)),G.variables=F.variables),"lookup"===E.fields[d].type&&a.summary_fields[E.fields[d].sourceModel]&&(F[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]=a.summary_fields[E.fields[d].sourceModel][E.fields[d].sourceField],G[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]=F[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]);for(d in E.statusFields)null!==a[d]&&void 0!==a[d]&&("created"===d?(c=new Date(a.created),F.created=x(c)):F[d]=a[d]);F.statusToolTip=y(a.status),$('form[name="jobs_form"] input[type="text"], form[name="jobs_form"] jobs_form textarea').attr("readonly","readonly"),$('form[name="jobs_form"] select').prop("disabled","disabled"),$('form[name="jobs_form"] .lookup-btn').prop("disabled","disabled"),$('form[name="jobs_form"] .buttons, form[name="jobs_form"] hr').hide(),F.url=a.url,f=a.related;for(g in E.related)f[g]&&(I[g]={url:f[g],iterator:E.related[g].iterator});F.stdout_rows=B(F.result_stdout),F.traceback_rows=B(F.result_traceback),t({scope:F,form:E,current_item:a.inventory,list:q,field:"inventory"}),t({scope:F,form:E,current_item:a.credential,list:r,field:"credential"}),t({scope:F,form:E,current_item:a.project,list:s,field:"project"}),m({scope:F,form:E,relatedSets:I}),n({scope:F,relatedSets:I}),F.template_url=a.related.job_template,F.$emit("jobLoaded",a.related.cloud_credential)}).error(function(a,b){k(F,a,b,E,{hdr:"Error!",msg:"Failed to retrieve job: "+f.id+". GET status: "+b})}),F.refresh=function(){z("start"),i.setUrl(C+H+"/"),i.get().success(function(a){F.status=a.status,F.result_stdout=a.result_stdout,F.result_traceback=a.result_traceback,F.stdout_rows=B(F.result_stdout),F.traceback_rows=B(F.result_traceback),z("stop")}).error(function(a,b){z("stop"),k(F,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})},F.jobSummary=function(){d.path("/jobs/"+H+"/job_host_summaries")},F.jobEvents=function(){d.path("/jobs/"+H+"/job_events")}}function OrganizationsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n("htmlTemplate");var t,u=k,v=j,w=d.path().replace(/^\//,"").split("/"),x="organizations"===w[0]?"edit":"select",y=v.inject(k,{mode:x}),z=p("organizations");c.flashMessage=null,h(),t=p("projects")+a.project_id+"/organizations/",q({scope:y,list:u,url:t,returnToCaller:1}),y.removePostRefresh&&y.removePostRefresh(),y.removePostRefresh=y.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off()}),l({scope:y,set:u.name,list:u,url:z}),m({scope:y,list:u,url:z}),y.search(u.iterator),y.showActivity=function(){s({scope:y})},y.addOrganization=function(){d.path(d.path()+"/add")},y.editOrganization=function(a){d.path(d.path()+"/"+a)},y.deleteOrganization=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide");var b=z+a+"/";f.setUrl(b),f.destroy().success(function(){y.search(u.iterator)}).error(function(a,c){r("stop"),o(y,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};i({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function OrganizationsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){m("htmlTemplate");var q=h,r=g,s=q.inject(r,{mode:"add",related:!1}),t=d.path().replace(/^\//,"").split("/")[0];q.reset(),l(),s.formSave=function(){q.clearApiErrors(),p("start");var c=n(t);c+="organizations"!==t?f.project_id+"/organizations/":"",i.setUrl(c),i.post({name:a.name,description:a.description}).success(function(a){p("stop"),"organizations"===t?(b.flashMessage="New organization successfully created!",d.path("/organizations/"+a.id)):o(1)}).error(function(a,b){k(s,a,b,r,{hdr:"Error!",msg:"Failed to add new organization. Post returned status: "+b})})},s.formReset=function(){b.flashMessage=null,q.reset()}}function OrganizationsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){p("htmlTemplate");var t=g,u=h,v=h.inject(t,{mode:"edit",related:!0}),w=q("organizations"),x=d.path().replace(/^\//,"").split("/")[0],y={},z=f.organization_id,A={};u.reset(),v.organizationLoadedRemove&&v.organizationLoadedRemove(),v.organizationLoadedRemove=v.$on("organizationLoaded",function(){for(var a in A)v.search(A[a].iterator);r("stop")}),r("start"),i.setUrl(w+z+"/"),i.get().success(function(a){var b,c,d;l({path:"/organizations/"+z,title:a.name});for(b in t.fields)a[b]&&(v[b]=a[b],y[b]=a[b]);c=a.related;for(d in t.related)c[d]&&(A[d]={url:c[d],iterator:t.related[d].iterator});m({scope:v,form:t,relatedSets:A}),n({scope:v,relatedSets:A}),v.$emit("organizationLoaded")}).error(function(a,b){k(v,a,b,t,{hdr:"Error!",msg:"Failed to retrieve organization: "+f.id+". GET status: "+b})}),v.formSave=function(){var a,c={};u.clearApiErrors(),r("start");for(a in t.fields)c[a]=v[a];i.setUrl(w+z+"/"),i.put(c).success(function(){r("stop"),y=c,b.flashMessage="Your changes were successfully saved!"}).error(function(a,b){r("stop"),k(v,a,b,g,{hdr:"Error!",msg:"Failed to update organization: "+z+". PUT status: "+b})})},v.showActivity=function(){s({scope:v})},v.formReset=function(){b.flashMessage=null,u.reset();for(var a in y)v[a]=y[a]},v.add=function(a){b.flashMessage=null,d.path("/"+x+"/"+f.organization_id+"/"+a)},v.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},v["delete"]=function(a,c,d,e){b.flashMessage=null;var g=function(){r("start");var b=w+f.organization_id+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){r("stop"),$("#prompt-modal").modal("hide"),v.search(t.related[a].iterator)}).error(function(a,c){r("stop"),$("#prompt-modal").modal("hide"),k(v,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};o({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+v.name+" "+e+"?",action:g})}}function PermissionsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){o("htmlTemplate");var t=h,u=c.path().replace(/^\//,"").split("/")[0],v=q(u),w=i,x=w.inject(t,{mode:"edit"});v+=void 0!==e.user_id?e.user_id:e.team_id,v+="/permissions/",x.selected=[],r({scope:x}),x.removePostRefresh&&x.removePostRefresh(),x.removePostRefresh=x.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),l({scope:x,set:"permissions",list:t,url:v}),m({scope:x,list:t,url:v}),x.search(t.iterator),j(),x.addPermission=function(){x.PermissionAddAllowed&&c.path(c.path()+"/add")},x.editPermission=function(a){c.path(c.path()+"/"+a)},x.deletePermission=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var b=q("base")+"permissions/"+a+"/";f.setUrl(b),f.destroy().success(function(){x.search(t.iterator)}).error(function(a,c){s("stop"),p(x,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};x.PermissionAddAllowed&&k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function PermissionsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){m("htmlTemplate");var v=g,w=h,x=void 0!==f.user_id?f.user_id:f.team_id,y=d.path().replace(/^\//,"").split("/")[0],z=w.inject(v,{mode:"add",related:!1}),A={};s({scope:z}),w.reset(),l(),z.inventoryrequired=!0,z.projectrequired=!1,z.category="Inventory",A.category="Inventory",A.inventoryrequired=!0,A.projectrequired=!1,r({scope:z,form:v,current_item:null,list:p,field:"inventory"}),r({scope:z,form:v,current_item:null,list:q,field:"project"}),z.formSave=function(){var a,b,c={};if(w.clearApiErrors(),t("start"),z.PermissionAddAllowed){c={};for(a in v.fields)c[a]=z[a];b="teams"===y?n("teams")+x+"/permissions/":n("users")+x+"/permissions/",i.setUrl(b),i.post(c).success(function(){t("stop"),o(1)}).error(function(a,b){t("stop"),k(z,a,b,g,{hdr:"Error!",msg:"Failed to create new permission. Post returned status: "+b})})}else j("Access Denied","You do not have access to create new permission objects. Please contact a system administrator.","alert-danger")},z.formReset=function(){b.flashMessage=null,w.reset();for(var a in A)z[a]=A[a];z.selectCategory()},z.selectCategory=function(){u({scope:z,reset:!0})},z.selectCategory()}function PermissionsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n("htmlTemplate");var w=h,x=g,y=w.inject(x,{mode:"edit",related:!0}),z=void 0!==f.user_id?f.user_id:f.team_id,A=f.permission_id,B=p("base")+"permissions/"+A+"/",C={};w.reset(),t({scope:y}),y.selectCategory=function(a){var b=a===!1?!1:!0;v({scope:y,reset:b})},u("start"),i.setUrl(B),i.get().success(function(a){var b,c,d;l({path:"/users/"+z+"/permissions/"+A,title:a.name});for(b in x.fields)a[b]&&(x.fields[b].sourceModel&&(c=x.fields[b].sourceModel,d=x.fields[b].sourceField,y[c+"_"+d]=a.summary_fields[c][d],C[c+"_"+d]=a.summary_fields[c][d]),y[b]=a[b],C[b]=y[b]);y.category="Deploy","run"!==a.permission_type&&"check"!==a.permission_type&&(y.category="Inventory"),C.category=y.category,y.selectCategory(!1),s({scope:y,form:x,current_item:a.inventory,list:q,field:"inventory"}),s({scope:y,form:x,current_item:a.project,list:r,field:"project"}),y.PermissionAddAllowed||$('form[name="permission_form"]').find("select, input, button").each(function(){($(this).is("input")||$(this).is("select"))&&$(this).attr("readonly","readonly"),($(this).is('input[type="checkbox"]')||$(this).is('input[type="radio"]')||$(this).is("button"))&&$(this).attr("disabled","disabled")}),u("stop")}).error(function(a,b){k(y,a,b,x,{hdr:"Error!",msg:"Failed to retrieve Permission: "+A+". GET status: "+b})}),y.formSave=function(){var a,b={};w.clearApiErrors(),u("start");for(a in x.fields)b[a]=y[a];i.setUrl(B),i.put(b).success(function(){u("stop"),m(1)}).error(function(a,b){u("stop"),k(y,a,b,x,{hdr:"Error!",msg:"Failed to update Permission: "+f.id+". PUT status: "+b})})},y.formReset=function(){w.reset();for(var a in C)y[a]=C[a];y.selectCategory(!1)}}function ProjectsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){o("htmlTemplate"),w("start");var A=h,B=q("projects"),C=i,D=c.path().replace(/^\//,"").split("/")[0],E="projects"===D?"edit":"select",F=C.inject(A,{mode:E}),G="teams"===D?q("teams")+e.team_id+"/projects/":B,H=0;b.flashMessage=null,F.projectLoading=!0,"select"===E&&r({scope:F,list:A,url:G,returnToCaller:1}),F.removePostRefresh&&F.removePostRefresh(),F.removePostRefresh=F.$on("PostRefresh",function(){var a,b;if(w("stop"),$("#prompt-modal").off(),F.projects)for(b=0;b<F.projects.length;b++){switch("ok"===F.projects[b].status&&(F.projects[b].status="n/a"),F.projects[b].status){case"n/a":F.projects[b].badge="none";break;case"updating":case"successful":case"ok":F.projects[b].badge="false";break;case"never updated":case"failed":case"missing":F.projects[b].badge="true"}for(F.projects[b].last_updated=null!==F.projects[b].last_updated?u(new Date(F.projects[b].last_updated)):null,a=0;a<F.project_scm_type_options.length;a++)if(F.project_scm_type_options[a].value===F.projects[b].scm_type){F.projects[b].scm_type=F.project_scm_type_options[a].label,"Manual"===F.projects[b].scm_type?(F.projects[b].scm_update_tooltip="Manaul projects do not require an SCM update",F.projects[b].scm_type_class="btn-disabled"):(F.projects[b].scm_update_tooltip="Start an SCM update",F.projects[b].scm_type_class="");break}}}),F.removeChoicesHere&&F.removeChoicesHere(),F.removeChoicesHere=F.$on("choicesCompleteProject",function(){var a;if(A.fields.scm_type.searchOptions=F.project_scm_type_options,A.fields.status.searchOptions=F.project_status_options,e.scm_type&&e.status&&(B+="?status="+e.status),l({scope:F,set:"projects",list:A,url:B}),m({scope:F,list:A,url:B}),e.scm_type){F[A.iterator+"SearchField"]="scm_type",F[A.iterator+"SelectShow"]=!0,F[A.iterator+"SearchSelectOpts"]=A.fields.scm_type.searchOptions,F[A.iterator+"SearchFieldLabel"]=A.fields.scm_type.label.replace(/<br\>/g," ");for(a in A.fields.scm_type.searchOptions)if(A.fields.scm_type.searchOptions[a].value===e.scm_type){F[A.iterator+"SearchSelectValue"]=A.fields.scm_type.searchOptions[a];break}}else if(e.status){F[A.iterator+"SearchValue"]=e.status,F[A.iterator+"SearchField"]="status",F[A.iterator+"SelectShow"]=!0,F[A.iterator+"SearchFieldLabel"]=A.fields.status.label,F[A.iterator+"SearchSelectOpts"]=A.fields.status.searchOptions;for(a in A.fields.status.searchOptions)if(A.fields.status.searchOptions[a].value===e.status){F[A.iterator+"SearchSelectValue"]=A.fields.status.searchOptions[a];break}}F.search(A.iterator)}),F.removeChoicesReady&&F.removeChoicesReady(),F.removeChoicesReady=F.$on("choicesReadyProject",function(){H++,2===H&&F.$emit("choicesCompleteProject")}),y({scope:F,url:B,field:"status",variable:"project_status_options",callback:"choicesReadyProject"}),y({scope:F,url:B,field:"scm_type",variable:"project_scm_type_options",callback:"choicesReadyProject"}),j(),F.showActivity=function(){x({scope:F})},F.addProject=function(){c.path(c.path()+"/add")},F.editProject=function(a){c.path(c.path()+"/"+a)},F.showSCMStatus=function(a){var b,c=F.$on("PostRefresh",function(){var d;
for(b=0;b<F.projects.length;b++)if(F.projects[b].id===a){d=F.projects[b];break}null!==d.scm_type?d.related.current_update?(w("start"),t({project_id:a,last_update:d.related.current_update})):d.related.last_update?(w("start"),t({project_id:a,last_update:d.related.last_update})):g("No Updates Available","There is no SCM update information available for this project. An update has not yet been  completed.  If you have not already done so, start an update for this project.","alert-info"):g("Missing SCM Configuration","The selected project is not configured for SCM. You must first edit the project, provide SCM settings, and then run an update.","alert-info"),c()});F.search(A.iterator,null,!1,!0)},F.deleteProject=function(a,b){var c=function(){$("#prompt-modal").on("hiden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var b=B+a+"/";f.setUrl(b),f.destroy().success(function(){F.search(A.iterator)}).error(function(a,c){w("stop"),p(F,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},F.removeCancelUpdate&&F.removeCancelUpdate(),F.removeCancelUpdate=F.$on("Cancel_Update",function(a,b){f.setUrl(b),f.post().success(function(){g("SCM Update Cancel","Your request to cancel the update was submitted to the task maanger.","alert-info"),F.refresh()}).error(function(a,c){p(F,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST status: "+c})})}),F.removeCheckCancel&&F.removeCheckCancel(),F.removeCheckCancel=F.$on("Check_Cancel",function(a,b){var c=b.related.cancel;f.setUrl(c),f.get().success(function(a){a.can_cancel?F.$emit("Cancel_Update",c):g("Cancel Not Allowed","Either you do not have access or the SCM update process completed. Click the <em>Refresh</em> button to view the latest status.","alert-info")}).error(function(a,b){p(F,a,b,null,{hdr:"Error!",msg:"Call to "+c+" failed. GET status: "+b})})}),F.cancelUpdate=function(a,b){var c,d,e=!1;for(c=0;c<F.projects.length;c++)if(F.projects[c].id===a){d=F.projects[c],e=!0;break}e&&d.related.current_update?(f.setUrl(d.related.current_update),f.get().success(function(a){F.$emit("Check_Cancel",a)}).error(function(a,b){p(F,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.current_update+" failed. GET status: "+b})})):g("Update Not Found","An SCM update does not appear to be running for project: "+b+". Click the <em>Refresh</em> button to view the latet status.","alert-info")},F.refresh=function(){w("start"),F.projectLoading=!1,v({scope:F,set:"projects",iterator:"project",url:F.current_url})},F.SCMUpdate=function(a){var b;for(b=0;b<F.projects.length;b++)if(F.projects[b].id===a){if("Manual"===F.projects[b].scm_type||z(F.projects[b].scm_type))break;"updating"===F.projects[b].status?g("Update in Progress","The SCM update process is running. Use the Refresh button to monitor the status.","alert-info"):s({scope:F,project_id:a})}}}function ProjectsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){m("tree-form"),m("htmlTemplate");var w=g,x=h,y=d.path().replace(/^\//,"").split("/")[0],z=n("projects"),A=x.inject(w,{mode:"add",related:!1}),B={};x.reset(),l(),p({scope:A,master:B}),A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReady",function(){var a;for(a=0;a<A.scm_type_options.length;a++)if(""===A.scm_type_options[a].value){A.scm_type=A.scm_type_options[a];break}A.scmRequired=!1,B.scm_type=A.scm_type}),t({scope:A,url:z,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),q({scope:A,form:w,list:r,field:"organization"}),q({scope:A,url:n("credentials")+"?kind=scm",form:w,list:s,field:"credential"}),A.formSave=function(){var a,c,d,e={};x.clearApiErrors(),e={};for(c in w.fields)if("checkbox_group"===w.fields[c].type)for(a=0;a<w.fields[c].fields.length;a++)e[w.fields[c].fields[a].name]=A[w.fields[c].fields[a].name];else"alertblock"!==w.fields[c].type&&(e[c]=A[c]);e.scm_type=A.scm_type.value,""!==A.scm_type.value?delete e.local_path:e.local_path=A.local_path.value,d="teams"===y?n("teams")+f.team_id+"/projects/":z,v("start"),i.setUrl(d),i.post(e).success(function(a){var c=a.id,d=n("projects")+c+"/organizations/",e={id:A.organization};i.setUrl(d),i.post(e).success(function(){v("stop"),b.flashMessage="New project successfully created!","projects"===y&&o(),o(1)}).error(function(a,b){v("stop"),k(A,a,b,g,{hdr:"Error!",msg:"Failed to add organization to project. POST returned status: "+b})})}).error(function(a,b){v("stop"),k(A,a,b,g,{hdr:"Error!",msg:"Failed to create new project. POST returned status: "+b})})},A.scmChange=function(){A.scm_type&&(A.pathRequired=""===A.scm_type.value?!0:!1,A.scmRequired=""!==A.scm_type.value?!0:!1,A.scmBranchLabel="svn"===A.scm_type.value?"Revision #":"SCM Branch")},A.formReset=function(){var a;b.flashMessage=null,x.reset();for(a in B)A.fld=B.fld;A.scmChange()}}function ProjectsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){p("htmlTemplate");var B=g,C=h,D=C.inject(B,{mode:"edit",related:!0}),E=q("projects")+f.id+"/",F=d.path().replace(/^\//,"").split("/")[0],G={},H=f.id,I={};C.reset(),D.project_local_paths=[],D.base_dir="",D.projectLoadedRemove&&D.projectLoadedRemove(),D.projectLoadedRemove=D.$on("projectLoaded",function(){var a,b=[];for(a in I)D.search(I[a].iterator);t.getUserInfo("is_superuser")===!0?s({scope:D,master:G}):(b.push({label:D.local_path,value:D.local_path}),D.project_local_paths=b,D.local_path=D.project_local_paths[0],D.base_dir="You do not have access to view this property"),v({url:q("credentials")+"?kind=scm",scope:D,form:B,list:u,field:"credential"}),D.pathRequired=""===D.scm_type.value?!0:!1,D.scmRequired=""!==D.scm_type.value?!0:!1,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch",z("stop")}),D.removeChoicesReady&&D.removeChoicesReady(),D.removeChoicesReady=D.$on("choicesReady",function(){i.setUrl(E),i.get({params:{id:H}}).success(function(a){var b,c,d,e;l({path:"/projects/"+H,title:a.name});for(d in B.fields){if("checkbox_group"===B.fields[d].type)for(e=0;e<B.fields[d].fields.length;e++)D[B.fields[d].fields[e].name]=a[B.fields[d].fields[e].name],G[B.fields[d].fields[e].name]=a[B.fields[d].fields[e].name];else a[d]&&(D[d]=a[d],G[d]=a[d]);"organization"!==d&&B.fields[d].sourceModel&&a.summary_fields&&a.summary_fields[B.fields[d].sourceModel]&&(D[B.fields[d].sourceModel+"_"+B.fields[d].sourceField]=a.summary_fields[B.fields[d].sourceModel][B.fields[d].sourceField],G[B.fields[d].sourceModel+"_"+B.fields[d].sourceField]=a.summary_fields[B.fields[d].sourceModel][B.fields[d].sourceField])}b=a.related;for(c in B.related)b[c]&&(I[c]={url:b[c],iterator:B.related[c].iterator});for(a.scm_type=x(a.scm_type)?"":a.scm_type,e=0;e<D.scm_type_options.length;e++)if(D.scm_type_options[e].value===a.scm_type){D.scm_type=D.scm_type_options[e];break}""!==D.scm_type.value?(D.pathRequired=!1,D.scmRequired=!0):(D.pathRequired=!0,D.scmRequired=!1),G.scm_type=D.scm_type,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch",m({scope:D,form:B,relatedSets:I}),n({scope:D,relatedSets:I}),D.$emit("projectLoaded")}).error(function(a,b){k(D,a,b,B,{hdr:"Error!",msg:"Failed to retrieve project: "+H+". GET status: "+b})})}),z("start"),w({url:q("projects"),scope:D,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),D.formSave=function(){var a,c,d;C.clearApiErrors(),z("start"),b.flashMessage=null,d={};for(a in B.fields)if("checkbox_group"===B.fields[a].type)for(c=0;c<B.fields[a].fields.length;c++)d[B.fields[a].fields[c].name]=D[B.fields[a].fields[c].name];else"alertblock"!==B.fields[a].type&&(d[a]=D[a]);d.scm_type=D.scm_type.value,""!==D.scm_type.value?delete d.local_path:d.local_path=D.local_path.value,i.setUrl(E),i.put(d).success(function(){z("stop"),r()}).error(function(a,b){z("stop"),k(D,a,b,B,{hdr:"Error!",msg:"Failed to update project: "+H+". PUT status: "+b})})},D.showActivity=function(){A({scope:D})},D.add=function(a){b.flashMessage=null,d.path("/"+F+"/"+f.id+"/"+a)},D.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},D["delete"]=function(a,c,d,e){var f=function(){var d=q("projects")+H+"/"+a+"/";b.flashMessage=null,i.setUrl(d),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),D.search(B.related[a].iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),k(D,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. POST returned status: "+b})})};o({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+D.name+" "+e+"?",action:f})},D.scmChange=function(){D.scm_type&&(D.pathRequired=""===D.scm_type.value?!0:!1,D.scmRequired=""!==D.scm_type.value?!0:!1,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch")},D.formReset=function(){b.flashMessage=null,C.reset();for(var a in G)D[a]=G[a];D.scmChange()}}function TeamsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o("htmlTemplate");var v,w=h,x=r("teams"),y=i,z=c.path().replace(/^\//,"").split("/"),A="teams"===z[0]?"edit":"select",B=y.inject(w,{mode:A});B.selected=[],v=r("base")+c.path()+"/",s({scope:B,list:w,url:v,returnToCaller:1}),B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a;if(B.teams)for(a=0;a<B.teams.length;a++)B.teams[a].organization_name=B.teams[a].summary_fields.organization.name}),l({scope:B,set:"teams",list:w,url:x}),m({scope:B,list:w,url:x}),B.search(w.iterator),j(),B.showActivity=function(){u({scope:B})},B.addTeam=function(){c.path(c.path()+"/add")},B.editTeam=function(a){c.path(c.path()+"/"+a)},B.deleteTeam=function(a,b){var c=function(){t("start");var b=x+a+"/";f.setUrl(b),f.destroy().success(function(){t("stop"),$("#prompt-modal").modal("hide"),B.search(w.iterator)}).error(function(a,c){t("stop"),$("#prompt-modal").modal("hide"),p(B,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function TeamsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){n("htmlTemplate");var v=s("teams"),w=g,x=h,y=x.inject(w,{mode:"add",related:!1});b.flashMessage=null,x.reset(),l(),t({scope:y,form:w,current_item:null,list:p,field:"organization"}),y.formSave=function(){var a,c;x.clearApiErrors(),u("start"),i.setUrl(v),c={};for(a in w.fields)c[a]=y[a];i.post(c).success(function(a){u("stop"),b.flashMessage="New team successfully created!",d.path("/teams/"+a.id)}).error(function(a,b){u("stop"),k(y,a,b,w,{hdr:"Error!",msg:"Failed to add new team. Post returned status: "+b})})},y.formReset=function(){x.reset()}}function TeamsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){p("htmlTemplate");var x=s("teams"),y=h,z=g,A=y.inject(z,{mode:"edit",related:!0}),B=d.path().replace(/^\//,"").split("/")[0],C={},D=f.team_id,E={};y.reset(),A.PermissionAddAllowed=!1,A.teamLoadedRemove&&A.teamLoadedRemove(),A.teamLoadedRemove=A.$on("teamLoaded",function(){t({scope:A}),i.setUrl(A.organization_url),i.get().success(function(a){A.organization_name=a.name,C.organization_name=a.name,v("stop")}).error(function(a,b){k(A,a,b,null,{hdr:"Error!",msg:"Failed to retrieve organization: "+A.orgnization_url+". GET status: "+b})});for(var a in E)A.search(E[a].iterator)}),v("start"),i.setUrl(x+":id/"),i.get({params:{id:D}}).success(function(a){var b,c,d;l({path:"/teams/"+D,title:a.name});for(b in z.fields)a[b]&&(A[b]=a[b],C[b]=A[b]);c=a.related;for(d in z.related)c[d]&&(E[d]={url:c[d],iterator:z.related[d].iterator});m({scope:A,form:z,relatedSets:E}),n({scope:A,relatedSets:E}),q({scope:A,form:z,current_item:a.organization,list:u,field:"organization"}),A.organization_url=a.related.organization,A.$emit("teamLoaded")}).error(function(a,b){k(A,a,b,z,{hdr:"Error!",msg:"Failed to retrieve team: "+f.team_id+". GET status: "+b})}),A.showActivity=function(){w({scope:A})},A.formSave=function(){var a,c={};y.clearApiErrors(),v("start"),b.flashMessage=null,i.setUrl(x+f.team_id+"/");for(a in z.fields)c[a]=A[a];i.put(c).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"teams"===a&&o(),o(1)}).error(function(a,b){v("stop"),k(A,a,b,z,{hdr:"Error!",msg:"Failed to update team: "+f.team_id+". PUT status: "+b})})},A.formReset=function(){b.flashMessage=null,y.reset();for(var a in C)A[a]=C[a]},A.add=function(a){b.flashMessage=null,"permissions"===a?A.PermissionAddAllowed?d.path("/"+B+"/"+f.team_id+"/"+a+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+B+"/"+f.team_id+"/"+a)},A.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/"+B+"/"+f.team_id+"/"+a+"/"+c:"/"+a+"/"+c)},A["delete"]=function(a,c,d,e){b.flashMessage=null;var g=function(){var b;"permissions"===a?A.PermissionAddAllowed?(b=s("base")+"permissions/"+c+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),A.search(z.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(A,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=x+f.team_id+"/"+a+"/",i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),A.search(z.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(A,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+A.name+" "+e+"?",action:g})}}function UsersList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=q("users"),w=i,x=c.path().replace(/^\//,"").split("/")[0],y="users"===x?"edit":"select",z=w.inject(h,{mode:y}),A="organizations"===x?q("organizations")+e.organization_id+"/users/":q("teams")+e.team_id+"/users/";z.selected=[],r({scope:z,list:u,url:A,returnToCaller:1}),z.removePostRefresh&&z.removePostRefresh(),z.removePostRefresh=z.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),b.flashMessage=null,l({scope:z,set:"users",list:u,url:v}),m({scope:z,list:u,url:v}),z.search(u.iterator),j(),z.showActivity=function(){t({scope:z})},z.addUser=function(){c.path(c.path()+"/add")},z.editUser=function(a){c.path(c.path()+"/"+a)},z.deleteUser=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var b=v+a+"/";f.setUrl(b),f.destroy().success(function(){z.search(u.iterator)}).error(function(a,c){s("stop"),p(z,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function UsersAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n("htmlTemplate");var t=o("organizations"),u=g,v=h,w=v.inject(u,{mode:"add",related:!1});r(),w.ldap_user=!1,w.not_ldap_user=!w.ldap_user,w.ldap_dn=null,v.reset(),l(),p({scope:w,form:u,current_item:void 0!==f.organization_id?f.organization_id:null,list:q,field:"organization"}),f.organization_id&&(w.organization=f.organization_id,i.setUrl(o("organizations")+f.organization_id+"/"),i.get().success(function(a){w.organization_name=a.name}).error(function(a,b){k(w,a,b,u,{hdr:"Error!",msg:"Failed to lookup Organization: "+a.id+". GET returned status: "+b})})),w.formSave=function(){v.clearApiErrors();var a,c={};if(void 0!==w.organization&&null!==w.organization&&""!==w.organization){i.setUrl(t+w.organization+"/users/");for(a in u.fields)u.fields[a].realName?c[u.fields[a].realName]=w[a]:c[a]=w[a];c.is_superuser=c.is_superuser||!1,s("start"),i.post(c).success(function(a){var c=d.path().replace(/^\//,"").split("/")[0];"users"===c&&(b.flashMessage="New user successfully created!",d.path("/users/"+a.id)),m(1)}).error(function(a,b){s("stop"),k(w,a,b,u,{hdr:"Error!",msg:"Failed to add new user. POST returned status: "+b})})}else w.organization_name_api_error="A value is required"},w.formReset=function(){v.reset(),w.ldap_user=!1},w.clearPWConfirm=function(a){w[a]="",w[u.name+"_form"][a].$setValidity("awpassmatch",!1)}}function UsersEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){p("htmlTemplate");var w=q("users"),x=h,y=g,z=d.path().replace(/^\//,"").split("/")[0],A={},B=f.user_id,C={};a.removeFormReady&&a.removeFormReady(),a.removeFormReady=a.$on("formReady",function(){var a=x.inject(y,{mode:"edit",related:!0});x.reset(),a.removePostRefresh&&a.removePostRefresh(),a.PermissionAddAllowed=!1,a.removeUserLoaded&&a.removeUserLoaded(),a.removeUserLoaded=a.$on("userLoaded",function(){for(var b in C)a.search(C[b].iterator);s({scope:a}),u("stop")}),i.setUrl(w+":id/"),i.get({params:{id:B}}).success(function(b){l({path:"/users/"+B,title:b.username});var c,d,e;for(c in y.fields)b[c]&&(a[c]="is_superuser"===c?"true"===b[c]||b[c]===!0?"true":"false":b[c],A[c]=a[c]);d=b.related;for(e in y.related)d[e]&&(C[e]={url:d[e],iterator:y.related[e].iterator});a.ldap_user=null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?!0:!1,a.not_ldap_user=!a.ldap_user,A.ldap_user=a.ldap_user,m({scope:a,form:y,relatedSets:C}),n({scope:a,relatedSets:C}),a.$emit("userLoaded")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+f.id+". GET status: "+c})}),a.formSave=function(){var c,e={};x.clearApiErrors(),b.flashMessage=null,i.setUrl(w+B+"/");for(c in y.fields)y.fields[c].realName?e[y.fields[c].realName]=a[c]:e[c]=a[c];e.is_superuser=e.is_superuser||!1,u("start"),i.put(e).success(function(){u("stop");var a=d.path().replace(/^\//,"").split("/")[0];"users"===a&&o(),o(1)}).error(function(b,c){u("stop"),k(a,b,c,y,{hdr:"Error!",msg:"Failed to update users: "+f.id+". PUT status: "+c})})},a.showActivity=function(){v({scope:a})},a.formReset=function(){b.flashMessage=null,x.reset();for(var c in A)a[c]=A[c];a.password_confirm=a.password},a.clearPWConfirm=function(c){a[c]="",a[y.name+"_form"][c].$setValidity("awpassmatch",!1),b.flashMessage=null},a.add=function(c){b.flashMessage=null,"permissions"===c?a.PermissionAddAllowed?d.path("/"+z+"/"+f.user_id+"/"+c+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+z+"/"+f.user_id+"/"+c)},a.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/users/"+f.user_id+"/permissions/"+c:"/"+a+"/"+c)},a["delete"]=function(c,d,e,g){b.flashMessage=null;var h=function(){var b;"permissions"===c?a.PermissionAddAllowed?(b=q("base")+"permissions/"+d+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+d})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=w+f.user_id+"/"+c+"/",i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.username+" "+g+"?",action:h})}}),t(),a.removeModifyForm&&a.removeModifyForm(),a.removeModifyForm=a.$on("modifyForm",function(){i.setUrl(q("config")),i.get().success(function(b){var c,d;if(b.user_ldap_fields)for(c=0;c<b.user_ldap_fields.length;c++)d=b.user_ldap_fields[c],y.fields[d]&&(y.fields[d].readonly=!0,y.fields[d].editRequired=!1,y.fields[d].awRequiredWhen&&delete y.fields[d].awRequiredWhen);a.$emit("formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve application config. GET status: "+c})})}),u("start"),i.setUrl(w+B+"/"),i.get().success(function(b){a.$emit(null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?"modifyForm":"formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+B+". GET status: "+c})})}function chkPass(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=2,I=2,J=2,K=2,L=3,M=3,N=3,O=4,P=4,Q=6,R="",S="",T="",U="",V="0",W="0",X="0",Y="0",Z="0",_="0",ab="0",bb="0",cb="0",db="0",eb="0",fb="0",gb="0",hb="0",ib="abcdefghijklmnopqrstuvwxyz",jb="01234567890",kb=")_!@#$%^&*()",lb="Too Short";if(c=document.all?0:1,a){for(nScore=parseInt(a.length*O),n=a.length,d=a.replace(/\s+/g,"").split(/\s*/),e=d.length,b=0;e>b;b++){for(d[b].match(/[A-Z]/g)?(""!==R&&R+1==b&&(y++,C++),R=b,o++):d[b].match(/[a-z]/g)?(""!==S&&S+1==b&&(z++,C++),S=b,p++):d[b].match(/[0-9]/g)?(b>0&&e-1>b&&s++,""!==T&&T+1==b&&(A++,C++),T=b,q++):d[b].match(/[^a-zA-Z0-9_]/g)&&(b>0&&e-1>b&&s++,""!==U&&U+1==b&&(B++,C++),U=b,r++),f=!1,g=0;e>g;g++)d[b]==d[g]&&b!=g&&(f=!0,x+=Math.abs(e/(g-b)));f&&(w++,v=e-w,x=Math.ceil(v?x/v:x))}for(h=0;23>h;h++)i=ib.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(D++,G++);for(h=0;8>h;h++)i=jb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(E++,G++);for(h=0;8>h;h++)i=kb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(F++,G++);o>0&&n>o&&(nScore=parseInt(nScore+2*(n-o)),V="+ "+parseInt(2*(n-o))),p>0&&n>p&&(nScore=parseInt(nScore+2*(n-p)),W="+ "+parseInt(2*(n-p))),q>0&&n>q&&(nScore=parseInt(nScore+q*P),X="+ "+parseInt(q*P)),r>0&&(nScore=parseInt(nScore+r*Q),Y="+ "+parseInt(r*Q)),s>0&&(nScore=parseInt(nScore+s*H),Z="+ "+parseInt(s*H)),(p>0||o>0)&&0===r&&0===q&&(nScore=parseInt(nScore-n),t=n,_="- "+n),0===p&&0===o&&0===r&&q>0&&(nScore=parseInt(nScore-n),u=n,ab="- "+n),w>0&&(nScore=parseInt(nScore-x),bb="- "+x),y>0&&(nScore=parseInt(nScore-y*I),cb="- "+parseInt(y*I)),z>0&&(nScore=parseInt(nScore-z*J),db="- "+parseInt(z*J)),A>0&&(nScore=parseInt(nScore-A*K),eb="- "+parseInt(A*K)),D>0&&(nScore=parseInt(nScore-D*L),fb="- "+parseInt(D*L)),E>0&&(nScore=parseInt(nScore-E*M),gb="- "+parseInt(E*M)),F>0&&(nScore=parseInt(nScore-F*N),hb="- "+parseInt(F*N)),nScore>100?nScore=100:0>nScore&&(nScore=0),k=$("#progbar"),l=$AnsibleConfig.password_strength,m=$AnsibleConfig.password_strength-15<0?0:$AnsibleConfig.password_strength-15,k.css("width",nScore+"%"),nScore>=0&&m>=nScore?(lb="Weak",k.addClass("progress-bar-danger"),k.removeClass("progress-bar-success progress-bar-warning")):nScore>m&&l>=nScore?(lb="Good",k.addClass("progress-bar-warning"),k.removeClass("progress-bar-success progress-bar-danger")):nScore>l&&(lb="Strong",k.addClass("progress-bar-success"),k.removeClass("progress-bar-warning progress-bar-danger"))}else k=$("#progbar"),k.css("width","0%"),k.removeClass("progress-bar-success progress-bar-warning");return nScore}function AdminsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=h,r=o("organizations")+e.organization_id+"/users/",s=i,t="select",u=s.inject(h,{mode:t}),v=o("organizations")+e.organization_id+"/admins/";p({scope:u,list:q,url:v,returnToCaller:1}),l({scope:u,set:"admins",list:q,url:r}),m({scope:u,list:q,url:r}),u.search(q.iterator),j()}function Authenticate(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o;l=function(){$("#login-username").focus()},n=k(d.sessionExpired)?a.get("sessionExpired"):d.sessionExpired,m=function(){return k(d.lastPath)?a.get("lastPath"):d.lastPath},$AnsibleConfig.debug_mode&&console&&(console.log("User session expired: "+n),console.log("Last URL: "+m())),$(".modal[aria-hidden=false]").each(function(){"login-modal"!==$(this).attr("id")&&$(this).modal("hide")}),i("stop"),$("#login-modal").modal({show:!0,keyboard:!1,backdrop:"static"}),$("#login-modal").on("shown.bs.modal",function(){l()}),o=angular.element(document.getElementById("login-modal")).scope(),o.login_username=null,o.login_password=null,o.loginForm.login_username.$setPristine(),o.loginForm.login_password.$setPristine(),"/logout"===e.path()&&f.logout(),d.userLoggedIn=!1,a.put("userLoggedIn",!1),$("#login-password").bind("keypress",function(a){var b=a.keyCode?a.keyCode:a.which;13===b&&$("#login-button").click()}),o.reset=function(){$("#login-form input").each(function(){$(this).val("")})},o.systemLogin=function(a,b){$(".api-error").empty();var c;k(a)||k(b)?h("Error!","Please provide a username and password before attempting to login.","alert-danger",l):(i("start"),f.retrieveToken(a,b).success(function(a,b){$("#login-modal").modal("hide"),c=a.token,f.setToken(a.token,a.expires),d.sessionTimer=j.init(),f.getUser().success(function(a){f.setUserInfo(a),d.user_is_superuser=a.results[0].is_superuser,f.getLicense().success(function(a){f.setLicense(a.license_info),m()?e.path(m()):e.url("/home?login=true")}).error(function(){i("stop"),h("Error","Failed to access user information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){i("stop"),h("Error","Failed to access license information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){var c,d,e;if(i("stop"),a.non_field_errors&&0===a.non_field_errors.length)for(e in a)o[e+"Error"]=a[e][0];else a.non_field_errors&&a.non_field_errors.length>0?(c="Error",d=a.non_field_errors[0]):(c="Error",d="The login attempt failed with a status of: "+b),o.reset(),h(c,d,"alert-danger",l)}))}}function CredentialsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o("htmlTemplate"),t("start");var v,w=h,x=q("credentials"),y=i,z=c.path().replace(/^\//,"").split("/")[0],A="credentials"===z?"edit":"select",B=y.inject(w,{mode:A});B.selected=[],B.credentialLoading=!0,v=q(z)+("users"===z?e.user_id+"/credentials/":e.team_id+"/credentials/"),r({scope:B,list:w,url:v,returnToCaller:1}),B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b;for(t("stop"),$("#prompt-modal").off(),w.fields.kind.searchOptions=B.credential_kind_options,a=0;a<B.credentials.length;a++)for(b=0;b<B.credential_kind_options.length;b++)if(B.credential_kind_options[b].value===B.credentials[a].kind){B.credentials[a].kind=B.credential_kind_options[b].label;break}}),B.removeChoicesReady&&B.removeChoicesReady(),B.removeChoicesReady=B.$on("choicesReadyCredential",function(){l({scope:B,set:"credentials",list:w,url:x}),m({scope:B,list:w,url:x}),B.search(w.iterator)}),s({scope:B,url:x,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),j(),B.showActivity=function(){u({scope:B})},B.addCredential=function(){c.path(c.path()+"/add")},B.editCredential=function(a){c.path(c.path()+"/"+a)},B.deleteCredential=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){t("start")}),$("#prompt-modal").modal("hide");var b=x+a+"/";f.setUrl(b),f.destroy().success(function(){B.search(w.iterator)}).error(function(a,c){t("stop"),p(B,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function CredentialsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){n("tree-form"),n("htmlTemplate");var A,B=g,C=h,D=C.inject(B,{mode:"add",related:!1}),E=u("credentials");C.reset(),l(),v({scope:D,url:E,field:"kind",variable:"credential_kind_options"}),r({scope:D,form:B,current_item:w(f.user_id)?null:f.user_id,list:s,field:"user"}),r({scope:D,form:B,current_item:w(f.team_id)?null:f.team_id,list:t,field:"team"}),w(f.user_id)?w(f.team_id)?(D.owner="user",y({scope:D})):(D.owner="team",D.team=f.team_id,y({scope:D}),A=u("teams")+f.team_id+"/",i.setUrl(A),i.get().success(function(a){D.team_name=a.name}).error(function(a,b){k(D,a,b,null,{hdr:"Error!",msg:"Failed to retrieve team. GET status: "+b})})):(D.owner="user",D.user=f.user_id,y({scope:D}),A=u("users")+f.user_id+"/",i.setUrl(A),i.get().success(function(a){D.user_username=a.username}).error(function(a,b){k(D,a,b,null,{hdr:"Error!",msg:"Failed to retrieve user. GET status: "+b})})),D.kindChange=function(){x({scope:D,form:B,reset:!0})},D.formSave=function(){C.clearApiErrors(),z({scope:D,mode:"add"})},D.ownerChange=function(){y({scope:D})},D.formReset=function(){C.reset()},D.clearPWConfirm=function(a){D[a]="",D[B.name+"_form"][a].$setValidity("awpassmatch",!1)},D.ask=function(a,b){D[a+"_ask"]?(D[a]="ASK",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0)):(D[a]="",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0))},D.clear=function(a,b){D[a]="",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0),D[B.name+"_form"].$setDirty()}}function CredentialsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){var a,b;for(a in F.fields)"password"===F.fields[a].type&&"ASK"===G[a]?($("#"+a+"-clear-btn").attr("disabled","disabled"),G[a+"_ask"]=!0):(G[a+"_ask"]=!1,$("#"+a+"-clear-btn").removeAttr("disabled")),I[a+"_ask"]=G[a+"_ask"];for(b=0;b<G.credential_kind_options.length;b++)if(G.kind===G.credential_kind_options[b].value){G.kind=G.credential_kind_options[b];break}}p("htmlTemplate");var D=r("credentials"),E=h,F=g,G=E.inject(F,{mode:"edit",related:!0}),H=d.path().replace(/^\//,"").split("/")[0],I={},J=f.credential_id;E.reset(),G.id=J,G.removeCredentialLoaded&&G.removeCredentialLoaded(),G.removeCredentialLoaded=G.$on("credentialLoaded",function(){w({scope:G,form:F,current_item:x(a.user_id)?null:G.user_id,list:u,field:"user"}),w({scope:G,form:F,current_item:x(a.team_id)?null:G.team_id,list:v,field:"team"}),C(),t({scope:G,form:F,reset:!1}),y({scope:G}),B("stop")}),G.removeChoicesReady&&G.removeChoicesReady(),G.removeChoicesReady=G.$on("choicesReadyCredential",function(){i.setUrl(D+":id/"),i.get({params:{id:J}}).success(function(a){var b,c;l({path:"/credentials/"+J,title:a.name});for(c in F.fields)null!==a[c]&&void 0!==a[c]&&(G[c]=a[c],I[c]=G[c]),"lookup"===F.fields[c].type&&a.summary_fields[F.fields[c].sourceModel]&&(G[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]=a.summary_fields[F.fields[c].sourceModel][F.fields[c].sourceField],I[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]=G[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]);for(G.owner=x(G.user)?"team":"user",I.owner=G.owner,b=0;b<G.credential_kind_options.length;b++)if(G.credential_kind_options[b].value===a.kind){G.kind=G.credential_kind_options[b];break}switch(I.kind=G.kind,a.kind){case"aws":G.access_key=a.username,G.secret_key=a.password,I.access_key=G.access_key,I.secret_key=G.secret_key;break;case"ssh":G.ssh_password=a.password,I.ssh_password=G.ssh_password;break;case"rax":G.api_key=a.password,I.api_key=G.api_key}G.$emit("credentialLoaded")}).error(function(a,b){k(G,a,b,F,{hdr:"Error!",msg:"Failed to retrieve Credential: "+f.id+". GET status: "+b})})}),B("start"),s({scope:G,url:D,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),G.showActivity=function(){A({scope:G})},G.formSave=function(){E.clearApiErrors(),z({scope:G,mode:"edit"})},G.ownerChange=function(){y({scope:G})},G.kindChange=function(){t({scope:G,form:F,reset:!0})},G.formReset=function(){E.reset();for(var a in I)G[a]=I[a];C(),t({scope:G,form:F,reset:!1}),y({scope:G})},G.add=function(a){b.flashMessage=null,d.path("/"+H+"/"+f.id+"/"+a+"/add")},G.edit=function(a,c){b.flashMessage=null,d.path("/"+H+"/"+f.id+"/"+a+"/"+c)},G["delete"]=function(a,c,d,e){b.flashMessage=null;var f=function(){var b=D+J+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),G.search(F.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(G,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};q({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+G.name+" "+e+"?",action:f})},G.clearPWConfirm=function(a){G[a]="",G[F.name+"_form"][a].$setValidity("awpassmatch",!1)},G.ask=function(a,b){G[a+"_ask"]?($("#"+a+"-clear-btn").attr("disabled","disabled"),G[a]="ASK",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0)):($("#"+a+"-clear-btn").removeAttr("disabled"),G[a]="",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0))},G.clear=function(a,b){G[a]="",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0),G[F.name+"_form"].$setDirty()}}function Home(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){k("home");var q,r,s,t,u;
q={refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},r=p({btn:q.refresh,action:"refresh",toolbar:!0}),r+=p({btn:q.stream,action:"stream",toolbar:!0}),s=angular.element(document.getElementById("home-list-actions")),s.html(r),b(s)(a),t=4,u=0,c.login||f("start"),a.removeWidgetLoaded&&a.removeWidgetLoaded(),a.removeWidgetLoaded=a.$on("WidgetLoaded",function(){u++,u===t&&f("stop")}),a.removeDashboardReady&&a.removeDashboardReady(),a.removeDashboardReady=a.$on("dashboardReady",function(b,c){h({scope:a,target:"container1",dashboard:c}),i({scope:a,target:"container2",dashboard:c}),j({scope:a,target:"container4",dashboard:c}),g({scope:a,target:"container3",dashboard:c})}),a.showActivity=function(){l({scope:a})},a.refresh=function(){f("start"),u=0,m.setUrl(n("dashboard")),m.get().success(function(b){a.$emit("dashboardReady",b)}).error(function(b,c){f("stop"),o(a,b,c,null,{hdr:"Error!",msg:"Failed to get dashboard: "+c})})},a.refresh()}function HomeGroups(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){h("htmlTemplate");var x,y=d,z=c,A=i("groups"),B=y.inject(z,{mode:"edit"});if(B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b,c;for(a=0;a<B.home_groups.length;a++)B.home_groups[a].inventory_name=B.home_groups[a].summary_fields.inventory.name,c=n({status:B.home_groups[a].summary_fields.inventory_source.status}),b=m({active_failures:B.home_groups[a].hosts_with_active_failures,total_hosts:B.home_groups[a].total_hosts,inventory_id:B.home_groups[a].inventory,group_id:B.home_groups[a].id}),B.home_groups[a].status_class=c["class"],B.home_groups[a].status_tooltip=c.tooltip,B.home_groups[a].launch_tooltip=c.launch_tip,B.home_groups[a].launch_class=c.launch_class,B.home_groups[a].hosts_status_tip=b.tooltip,B.home_groups[a].show_failures=b.failures,B.home_groups[a].hosts_status_class=b["class"],B.home_groups[a].status=B.home_groups[a].summary_fields.inventory_source.status,B.home_groups[a].source=B.home_groups[a].summary_fields.inventory_source?B.home_groups[a].summary_fields.inventory_source.source:null}),j({scope:B,set:"home_groups",list:z,url:A}),k({scope:B,list:z,url:A}),b.name&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.name,B[z.iterator+"SearchField"]="name",B[z.iterator+"SearchFieldLabel"]=z.fields.name.label,B[z.iterator+"SearchSelectValue"]=null),b.id&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.id,B[z.iterator+"SearchField"]="id",B[z.iterator+"SearchFieldLabel"]=z.fields.id.label,B[z.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchValue"]=b.has_active_failures,B[z.iterator+"SearchField"]="has_active_failures",B[z.iterator+"SearchFieldLabel"]=z.fields.has_active_failures.label,B[z.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),b.status&&!b.source){B[z.iterator+"SearchField"]="status",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br\>/g," ");for(x in z.fields.status.searchOptions)if(z.fields.status.searchOptions[x].value===b.status){B[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[x];break}}if(b.source){B[z.iterator+"SearchField"]="source",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.source.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.source.label.replace(/<br\>/g," ");for(x in z.fields.source.searchOptions)if(z.fields.source.searchOptions[x].value===b.source){B[z.iterator+"SearchSelectValue"]=z.fields.source.searchOptions[x];break}b.status&&(B[z.iterator+"ExtraParms"]="&inventory_source__status__icontains="+b.status)}b.has_external_source&&(B[z.iterator+"SearchField"]="has_external_source",B[z.iterator+"SearchValue"]=z.fields.has_external_source.searchValue,B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchType"]="in",B[z.iterator+"SearchFieldLabel"]=z.fields.has_external_source.label),B.search(z.iterator),f(),B.showActivity=function(){p({scope:B})},B.editGroup=function(a,b){q({scope:B,group_id:a,inventory_id:b,groups_reload:!1})},B.viewUpdateStatus=function(a){B.groups=B.home_groups,o({scope:B,tree_id:a})},B.updateGroup=function(a){var b=w({list:B.home_groups,key:"id",val:a});b&&(u(b.source)||("updating"===b.status?s("Update in Progress","The inventory update process is currently running for group <em>"+b.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(r("start"),t.setUrl(b.related.inventory_source),t.get().success(function(a){v({scope:B,url:a.related.update,group_name:a.summary_fields.group.name,group_source:a.source,tree_id:b.id,group_id:b.id})}).error(function(a,c){e(B,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+b.related.inventory_source+" POST returned status: "+c})}))))},B.refresh=function(){B.search(z.iterator,null,!1,!0)}}function HomeHosts(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){h("htmlTemplate");var s=d,t=c,u=i("hosts"),v=s.inject(t,{mode:"edit"});v.removePostRefresh&&v.removePostRefresh(),v.removePostRefresh=v.$on("PostRefresh",function(){for(var a=0;a<v.hosts.length;a++)v.hosts[a].inventory_name=v.hosts[a].summary_fields.inventory.name,m({scope:v,host:v.hosts[a]})}),j({scope:v,set:"hosts",list:t,url:u}),k({scope:v,list:t,url:u}),b.name&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.name,v[c.iterator+"SearchField"]="name",v[c.iterator+"SearchFieldLabel"]=t.fields.name.label),b.id&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.id,v[c.iterator+"SearchField"]="id",v[c.iterator+"SearchFieldLabel"]=t.fields.id.label,v[c.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(v[c.iterator+"InputDisable"]=!0,v[c.iterator+"SearchValue"]=b.has_active_failures,v[c.iterator+"SearchField"]="has_active_failures",v[c.iterator+"SearchFieldLabel"]=c.fields.has_active_failures.label,v[c.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),v.search(t.iterator),f(),v.showActivity=function(){p({scope:v})},v.toggle_host_enabled=function(a,b){n({host_id:a,external_source:b,scope:v})},v.editHost=function(a){var b=q({list:v.hosts,key:"id",val:a});b&&o({scope:v,host_id:a,inventory_id:b.inventory,group_id:null,hostsReload:!1})},v.showJobSummary=function(a){r({job_id:a})}}function InventoriesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=q("inventory"),w=i,x=c.path().replace(/^\//,"").split("/"),y="inventories"===x[0]?"edit":"select",z=w.inject(h,{mode:y});b.flashMessage=null,l({scope:z,set:"inventories",list:u,url:v}),m({scope:z,list:u,url:v}),e.name&&(z[h.iterator+"InputDisable"]=!1,z[h.iterator+"SearchValue"]=e.name,z[h.iterator+"SearchField"]="name",z[h.iterator+"SearchFieldLabel"]=h.fields.name.label,z[h.iterator+"SearchSelectValue"]=null),e.has_active_failures&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.has_active_failures,z[h.iterator+"SearchField"]="has_active_failures",z[h.iterator+"SearchFieldLabel"]=h.fields.has_active_failures.label,z[h.iterator+"SearchSelectValue"]="true"===e.has_active_failures?{value:1}:{value:0}),e.has_inventory_sources&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.has_inventory_sources,z[h.iterator+"SearchField"]="has_inventory_sources",z[h.iterator+"SearchFieldLabel"]=h.fields.has_inventory_sources.label,z[h.iterator+"SearchSelectValue"]="true"===e.has_inventory_sources?{value:1}:{value:0}),e.inventory_sources_with_failures&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.inventory_sources_with_failures,z[h.iterator+"SearchField"]="inventory_sources_with_failures",z[h.iterator+"SearchFieldLabel"]=h.fields.inventory_sources_with_failures.label,z[h.iterator+"SearchType"]="gtzero"),z.search(u.iterator),j(),z.removePostRefresh&&z.removePostRefresh(),z.removePostRefresh=z.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off();for(var a=0;a<z.inventories.length;a++)z.inventories[a].hosts_with_active_failures>0?(z.inventories[a].failed_hosts_tip=z.inventories[a].hosts_with_active_failures+(1===z.inventories[a].hosts_with_active_failures?" host":" hosts")+" with job failures. Click to view details.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="true"):0===z.inventories[a].total_hosts?(z.inventories[a].failed_hosts_tip="No hosts defined. Click to add.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="na"):(z.inventories[a].failed_hosts_tip=z.inventories[a].total_hosts+(z.inventories[a].total_hosts>1?" hosts":" host")+" with no job failures. Click to view details.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="false"),z.inventories[a].status=z.inventories[a].inventory_sources_with_failures+" / "+z.inventories[a].total_inventory_sources,z.inventories[a].inventory_sources_with_failures>0?(z.inventories[a].status_tip=z.inventories[a].inventory_sources_with_failures+" cloud "+(1===z.inventories[a].inventory_sources_with_failures?"source":"sources")+" with failures. Click to view details.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="failed"):0===z.inventories[a].total_inventory_sources?(z.inventories[a].status_tip="Not synced with a cloud source. Click to edit.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="na"):(z.inventories[a].status_tip=z.inventories[a].total_inventory_sources+" cloud "+(z.inventories[a].total_inventory_sources>1?"sources":"source")+" with no failures. Click to view details.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="successful")}),z.removeRefreshInventories&&z.removeRefreshInventories(),z.removeRefreshInventories=z.$on("RefreshInventories",function(){z.search(u.iterator)}),z.showActivity=function(){s({scope:z})},z.editInventoryProperties=function(a){t({scope:z,inventory_id:a})},z.addInventory=function(){c.path(c.path()+"/add")},z.editInventory=function(a){c.path(c.path()+"/"+a)},z.deleteInventory=function(a,b){var c=function(){var b=v+a+"/";$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide"),f.setUrl(b),f.destroy().success(function(){z.search(u.iterator)}).error(function(a,c){r("stop"),p(z,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},z.lookupOrganization=function(a){f.setUrl(q("organizations")+a+"/"),f.get().success(function(a){return a.name})},z.viewJobs=function(a){c.url("/jobs/?inventory__int="+a)},z.viewFailedJobs=function(a){c.url("/jobs/?inventory__int="+a+"&status=failed")}}function InventoriesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n("htmlTemplate");var w,x=t("inventory"),y=g,z=h;y.well=!0,y.formLabelSize=null,y.formFieldSize=null,w=z.inject(y,{mode:"add",related:!1}),w.inventoryParseType="yaml",z.reset(),l(),u(w,"inventory_variables","inventoryParseType"),s({scope:w,form:y,current_item:f.organization_id?f.organization_id:null,list:p,field:"organization"}),w.formSave=function(){z.clearApiErrors(),v("start");try{var a,b,c;if(b="json"===w.inventoryParseType?JSON.parse(w.inventory_variables):jsyaml.load(w.inventory_variables),"object"!=typeof b)throw"failed to return an object!";c={};for(a in y.fields)"inventory_variables"!==a&&(y.fields[a].realName?c[y.fields[a].realName]=w[a]:c[a]=w[a]);i.setUrl(x),i.post(c).success(function(a){var c=a.id;w.inventory_variables?(i.setUrl(a.related.variable_data),i.put(b).success(function(){v("stop"),d.path("/inventories/"+c+"/")}).error(function(a,b){v("stop"),k(w,a,b,null,{hdr:"Error!",msg:"Failed to add inventory varaibles. PUT returned status: "+b})})):(v("stop"),d.path("/inventories/"+c+"/"))}).error(function(a,b){v("stop"),k(w,a,b,y,{hdr:"Error!",msg:"Failed to add new inventory. Post returned status: "+b})})}catch(e){v("stop"),j("Error","Error parsing inventory variables. Parser returned: "+e)}},w.formReset=function(){z.reset()}}function InventoriesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){f("htmlTemplate");var Q=e,R=g;a.inventory_id=c.inventory_id,r({path:b.path(),title:"{{ inventory_name }}"}),a.removeGroupTreeLoaded&&a.removeGroupTreeLoaded(),a.removeGroupTreeLoaded=a.$on("GroupTreeLoaded",function(b,c,e){var f,g;f=angular.element(document.getElementById("breadcrumbs")),f.html(q({list:R,mode:"edit"})),d(f)(a),Q.inject(R,{mode:"edit",id:"groups-container",breadCrumbs:!1,searchSize:"col-lg-5 col-md-5 col-sm-5"}),a.groups=e,a.inventory_name=c,a.groups.length>0?(a.selected_tree_id=a.groups[0].id,a.selected_group_id=a.groups[0].group_id,a.groups[0].selected_class="selected",a.groups[0].active_class="active-row",a.selected_group_name=a.groups[0].name):(a.selected_tree_id=null,a.selected_group_id=null),a.show_failures=!1,l({scope:a,inventory_id:a.inventory_id,tree_id:a.selected_tree_id,group_id:a.selected_group_id}),setTimeout(function(){$("#groups_table .name-column").each(function(){var a,b,c,d,e;a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%",$(this).find(".group-name").css({width:e})}),L("#groups_table .group-name a"),L("#hosts_table .host-name a")},2500),M(),g=P("inventoryAutoHelp"),"off"!==g&&a.autoShowGroupHelp&&a.showGroupHelp({autoShow:!0})}),a.removeGroupTreeRefreshed&&a.removeGroupTreeRefreshed(),a.removeGroupTreeRefreshed=a.$on("GroupTreeRefreshed",function(){setTimeout(function(){L("#groups_table .group-name a")},2500),a.showHosts(a.selected_tree_id,a.selected_group_id,!1)}),a.removeGroupDeleteCompleted&&a.removeGroupDeleteCompleted(),a.removeGroupDeleteCompleted=a.$on("GroupDeleteCompleted",function(){a.selected_tree_id=1,a.selected_group_id=null,i({scope:a,inventory_id:a.inventory_id,refresh:!0})}),a.removeCopMoveGroup&&a.removeCopyMoveGroup(),a.removeCopyMoveGroup=a.$on("CopyMoveGroup",function(b,c,d){G({scope:a,target_tree_id:d,inbound_tree_id:c})}),a.removeCopMoveHost&&a.removeCopyMoveHost(),a.removeCopyMoveHost=a.$on("CopyMoveHost",function(b,c,d){H({scope:a,target_tree_id:c,host_id:d})}),a.showHosts=function(b,c,d){if(null!==b){j("start"),a.selected_tree_id=b,a.selected_group_id=c,a.hosts=[],a.show_failures=d;for(var e=0;e<a.groups.length;e++)a.groups[e].id===b?(a.groups[e].selected_class="selected",a.groups[e].active_class="active-row",a.selected_group_name=a.groups[e].name):(a.groups[e].selected_class="",a.groups[e].active_class="");m({scope:a,group_id:c,tree_id:b,inventory_id:a.inventory_id})}else j("stop")},a.createGroup=function(){n({scope:a,inventory_id:a.inventory_id,group_id:a.selected_group_id})},a.editGroup=function(b,c){o({scope:a,inventory_id:a.inventory_id,group_id:b,tree_id:c,groups_reload:!0})},a.updateGroup=function(b){var c=A({list:a.groups,key:"id",val:b});c&&(s(c.source)||("updating"===c.status?w("Update in Progress","The inventory update process is currently running for group <em>"+c.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(j("start"),t.setUrl(c.related.inventory_source),t.get().success(function(b){v({scope:a,url:b.related.update,group_name:b.summary_fields.group.name,group_source:b.source,tree_id:c.id,group_id:c.group_id})}).error(function(b,d){j("stop"),u(a,b,d,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+c.related.inventory_source+" POST returned status: "+d})}))))},a.cancelUpdate=function(b){z({scope:a,tree_id:b})},a.toggle=function(b){x({scope:a,list:R,id:b})},a.refreshGroups=function(b,c){b&&(a.selected_tree_id=b,a.selected_group_id=c),i({scope:a,inventory_id:a.inventory_id,refresh:!0})},a.viewUpdateStatus=function(b,c){y({scope:a,tree_id:b,group_id:c})},a.deleteGroup=function(b,c){p({scope:a,tree_id:b,group_id:c,inventory_id:a.inventory_id})},a.createHost=function(){B({scope:a})},a.editInventoryProperties=function(){C({scope:a,inventory_id:a.inventory_id})},a.editHost=function(b){D({scope:a,host_id:b,inventory_id:a.inventory_id})},a.deleteHost=function(b,c){E({scope:a,host_id:b,host_name:c})},a.toggleHostEnabled=function(b,c){F({scope:a,host_id:b,external_source:c})},a.showGroupActivity=function(){var b,c,d;a.selected_group_id?(d=A({list:a.groups,key:"id",val:a.selected_tree_id}),b=J("activity_stream")+"?group__id="+a.selected_group_id,c="Showing all activities for group "+d.name):(c="Showing all activities for all "+a.inventory_name+" groups",b=J("activity_stream")+"?group__inventory__id="+a.inventory_id),I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showHostActivity=function(){var b,c;c="Showing all activities for all "+a.inventory_name+" hosts",b=J("activity_stream")+"?host__inventory__id="+a.inventory_id,I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showJobSummary=function(a){K({job_id:a})},a.showGroupHelp=function(a){var b={defn:O};a&&(b.autoShow=a.autoShow||!1),N(b)},i({scope:a,inventory_id:a.inventory_id,refresh:!1})}function JobEventsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(a){var b,c,d,e,f,g="",h=!1;if(a.res){if("string"==typeof a.res)c=a.res.match(/\n/g),d=c?c.length:1,d=d>10?10:d,h=!0,g+='<div class="form-group">\n',g+="<label>Traceback:</label>\n",g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res+"</textarea>\n",g+="</div>\n";else for(e in a.res){if(("msg"===e||"stdout"===e||"stderr"===e)&&null!==a.res[e]&&""!==a.res[e]){switch(g+='<div class="form-group">\n',g+="<label>",e){case"msg":case"stdout":g+="Output:";break;case"stderr":g+="Error:"}g+="</label>\n",c=a.res[e].match(/\n/g),d=c?c.length:1,d=d>10?10:d,g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res[e]+"</textarea>\n",g+="</div>\n",h=!0}if("results"===e&&Array.isArray(a.res[e])&&a.res[e].length>0){for(f="",b=0;b<a.res[e].length;b++)f+=a.res[e][b];c=f.match(/\n/g),d=c?c.length:1,d=d>10?10:d,""!==f&&(g+='<div class="form-group">\n',g+="<label>Results:</label>\n",g+='<textarea readonly class="form-control nowrap mono-space" rows="'+d+'">'+f+"</textarea>\n",g+="</div>\n",h=!0)}"rc"===e&&""!==a.res[e]&&(g+='<div class="form-group">\n',g+="<label>Return Code:</label>\n",g+='<input type="text" class="form-control nowrap mono-space" value="'+a.res[e]+'" readonly >\n',g+="</div>\n",h=!0)}g=h?'<form class="event-form">\n'+g+"</form>\n":""}return g=a.hosts?'<span class="event-detail-host visible-sm">'+a.host+"</span>\n"+g:""===g?null:g}p("htmlTemplate");var z,A=i,B=r("jobs")+f.id+"/job_events/",C=j,D=C.inject(A,{mode:"edit"});A.base=d.path(),D.job_id=f.id,c.flashMessage=null,D.selected=[],D.expand=!0,D.parentNode="parent-event",D.childNode="child-event",D.removeSetHostLinks&&D.removeSetHostLinks(),D.removeSetHostLinks=D.$on("SetHostLinks",function(a,b){for(var c=0;c<D.jobevents.length;c++)D.jobevents[c].summary_fields.host&&(D.jobevents[c].hostLink="/#/inventories/"+b+"/hosts/?name="+encodeURI(D.jobevents[c].summary_fields.host.name))}),D.removePostRefresh&&D.removePostRefresh(),D.removePostRefresh=D.$on("PostRefresh",function(){var b,c=D[A.name];for(b=0;b<c.length;b++)c[b].event_display=c[b].event_display.replace(/^\u00a0*/g,""),c[b].event_level<3?(c[b].ngclick="toggleChildren("+c[b].id+', "'+c[b].related.children+'")',c[b].ngicon="fa fa-minus-square-o node-toggle",c[b]["class"]="parentNode"):(c[b].ngicon="fa fa-square-o node-no-toggle",c[b]["class"]="childNode",c[b].event_detail=y(c[b].event_data)),c[b].show=!0,c[b].spaces=24*c[b].event_level,D.jobevents[b].failed?(D.jobevents[b].status="error",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"A failure occurred durring one or more playbook tasks.":c[b].event_level<3?"A failure occurred within the children of this event.":"A failure occurred. Click to view details"):D.jobevents[b].changed?(D.jobevents[b].status="changed",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"A change was completed durring one or more playbook tasks.":c[b].event_level<3?"A change was completed by one or more children of this event.":"A change was completed. Click to view details"):(D.jobevents[b].status="success",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"All playbook tasks completed successfully.":c[b].event_level<3?"All the children of this event completed successfully.":"No errors occurred. Click to view details"),c[b].created=a("date")(c[b].created,"MM/dd HH:mm:ss");g.setUrl(r("jobs")+D.job_id),g.get().success(function(a){D.job_status=a.status,D.job_name=a.summary_fields.job_template.name,k({path:"/jobs/"+D.job_id,title:D.job_id+" - "+a.summary_fields.job_template.name}),D.$emit("SetHostLinks",a.inventory)}).error(function(a,b){q(D,a,b,null,{hdr:"Error!",msg:"Failed to get job status for job: "+D.job_id+". GET status: "+b})})}),m({scope:D,set:"jobevents",list:A,url:B}),z=f.page?parseInt(f.page,10)-1:null,n({scope:D,list:A,url:B,page:z}),f.host&&(D[A.iterator+"SearchField"]="host",D[A.iterator+"SearchValue"]=f.host,D[A.iterator+"SearchFieldLabel"]=A.fields.host.label),D.search(A.iterator,f.page),D.toggleChildren=function(a,b){t({scope:D,list:A,id:a,children:b})},D.viewJobEvent=function(a){v({event_id:a})},D.refresh=function(){D.jobSearchSpin=!0,D.jobLoading=!0,x("start"),w({scope:D,set:"jobevents",iterator:"jobevent",url:D.current_url})}}function JobEventsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){m("htmlTemplate");var r=g,s=h,t=h.inject(r,{mode:"edit",related:!0}),u=n("base")+"job_events/"+f.event_id+"/";s.reset(),q("start"),i.setUrl(u),i.get().success(function(a){var b,c,d,e;t.event_display=a.event_display.replace(/^\u00a0*/g,""),l({path:"/jobs/"+f.job_id+"/job_events/"+f.event_id,title:t.event_display});for(c in r.fields)switch(c){case"status":t.status=a.failed?"error":a.changed?"changed":"success";break;case"created":b=new Date(a.created),t.created=o(b);break;case"host":a.summary_fields&&a.summary_fields.host&&(t.host=a.summary_fields.host.name);break;case"id":case"task":case"play":t[c]=a[c];break;case"start":case"end":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[c]&&(b=new Date(a.event_data.res[c]),t[c]=o(b));break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[c]&&(t[c]=a.event_data.res[c],"textarea"===r.fields[c].type&&(d=a.event_data.res[c].match(/\n/g),e=d?d.length:1,e=e>15?5:e,$('textarea[name="'+c+'"]').attr("rows",e)));break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(t[c]=a.event_data.res.invocation.fld)}q("stop")}).error(function(a){k(t,a,status,null,{hdr:"Error!",msg:"Failed to retrieve host: "+f.event_id+". GET status: "+status})}),t.navigateBack=function(){var a="/jobs/"+f.job_id+"/job_events";f.page&&(a+="?page="+f.page),d.url(a)},t.rawView=function(){p({event_id:t.id})}}function JobHostSummaryList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=c.path().replace(/^\//,"").split("/")[0],w=q(v)+e.id+"/job_host_summaries/",x=i,y=x.inject(u,{mode:"edit"});u.index="hosts"===v?!1:!0,y.selected=[],"hosts"===v?(y.job_id=null,y.host_id=e.id):(y.job_id=e.id,y.host_id=null),y.RemoveSetHostLink&&y.RemoveSetHostLink(),y.RemoveSetHostLink=y.$on("setHostLink",function(a,b){for(var c=0;c<y.jobhosts.length;c++)y.jobhosts[c].hostLinkTo="/#/inventories/"+b+"/?host_name="+encodeURI(y.jobhosts[c].summary_fields.host.name)}),y.removePostRefresh&&y.removePostRefresh(),y.removePostRefresh=y.$on("PostRefresh",function(){for(var a=0;a<y.jobhosts.length;a++)y.jobhosts[a].host_name=y.jobhosts[a].summary_fields.host.name,y.jobhosts[a].status=y.jobhosts[a].failed?"failed":"success",y.jobhosts[a].statusBadgeToolTip=s(y.jobhosts[a].status)+" Click to view details.",y.jobhosts[a].statusLinkTo="/#/jobs/"+y.jobhosts[a].job+"/job_events/?host="+encodeURI(y.jobhosts[a].summary_fields.host.name);null!==y.job_id&&void 0!==y.job_id&&""!==y.job_id?(f.setUrl(q("jobs")+y.job_id),f.get().success(function(a){j({path:"/jobs/"+a.id,title:a.id+" - "+a.summary_fields.job_template.name}),y.job_status=a.status,"pending"!==a.status&&"waiting"!==a.status&&"running"!==a.status&&b.timer&&clearInterval(b.timer),y.$emit("setHostLink",a.inventory)}).error(function(a,b){p(y,a,b,null,{hdr:"Error!",msg:"Failed to get job status for job: "+y.job_id+". GET status: "+b})})):(j({path:"/hosts/"+y.host_id,title:y.jobhosts.length>0?y.jobhosts[0].summary_fields.host.name:"Host"}),e.inventory&&y.$emit("setHostLink",e.inventory))}),l({scope:y,set:"jobhosts",list:u,url:w}),m({scope:y,list:u,url:w}),e.host_name&&(y[u.iterator+"SearchField"]="host",y[u.iterator+"SearchValue"]=e.host_name,y[u.iterator+"SearchFieldLabel"]=u.fields.host.label),y.search(u.iterator),y.showEvents=function(a,b){f.setUrl(b),f.get().success(function(b){j({path:"/jobs/"+b.id,title:b.name}),c.url("/jobs/"+b.id+"/job_events/?host="+encodeURI(a))}).error(function(a,c){p(y,a,c,null,{hdr:"Error!",msg:"Failed to lookup last job: "+b+". GET status: "+c})})},y.showJob=function(a){c.path("/jobs/"+a)},y.refresh=function(){null===y.host_id&&(y.jobSearchSpin=!0,y.jobLoading=!0,t("start"),r({scope:y,set:"jobhosts",iterator:"jobhost",url:y.current_url}))}}function JobTemplatesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o("htmlTemplate");var y=h,z=q("job_templates"),A=i,B=c.path().replace(/^\//,"").split("/")[0],C="job_templates"===B?"edit":"select",D=A.inject(y,{mode:C});b.flashMessage=null,D.removePostRefresh&&D.removePostRefresh(),D.removePostRefresh=D.$on("PostRefresh",function(){w("stop"),$("#prompt-modal").off()}),l({scope:D,set:"job_templates",list:y,url:z}),m({scope:D,list:y,url:z}),e.name&&(D[y.iterator+"SearchField"]="name",D[y.iterator+"SearchValue"]=e.name,D[y.iterator+"SearchFieldLabel"]=y.fields.name.label),D.search(y.iterator),j(),D.showActivity=function(){x({scope:D})},D.addJobTemplate=function(){c.path(c.path()+"/add")},D.editJobTemplate=function(a){c.path(c.path()+"/"+a)},D.deleteJobTemplate=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var b=z+a+"/";f.setUrl(b),f.destroy().success(function(){D.search(y.iterator)}).error(function(a){w("stop"),p(D,a,status,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+status})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},D.submitJob=function(a){v({scope:D,id:a})}}function JobTemplatesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){n("htmlTemplate");var x,y,z=o("job_templates"),A=g,B=h,C=B.inject(A,{mode:"add",related:!1}),D={},E={};C.parseType="yaml",u(C),C.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],C.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],C.playbook_options=[],C.allow_callbacks="false",B.reset(),l(),t({scope:C,master:D,check_field:"allow_callbacks",default_val:!1}),s({scope:C,form:A,current_item:null,list:p,field:"inventory"}),jQuery.extend(!0,E,q),E.name="cloudcredentials",E.iterator="cloudcredential",s({url:o("credentials")+"?cloud=true",scope:C,form:A,current_item:null,list:E,field:"cloud_credential",hdr:"Select Cloud Credential"}),s({url:o("credentials")+"?kind=ssh",scope:C,form:A,current_item:null,list:q,field:"credential",hdr:"Select Machine Credential"}),x=function(a,b){var c;a!==b&&C.project&&(v("start"),c=o("projects")+C.project+"/playbooks/",i.setUrl(c),i.get().success(function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(a[b]);C.playbook_options=c,v("stop")}).error(function(a,b){k(C,a,b,A,{hdr:"Error!",msg:"Failed to get playbook list for "+c+". GET returned status: "+b})}))},y=function(a,b){a===b||w(C.project)||(i.setUrl(o("projects")+C.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}b&&j("Waning",b,"alert-info")}).error(function(a,b){k(C,a,b,A,{hdr:"Error!",msg:"Failed to get project "+C.project+". GET returned status: "+b})}))},C.selectPlaybookUnregister&&C.selectPlaybookUnregister(),C.selectPlaybookUnregister=C.$watch("project_name",function(a,b){x(a,b),y(a,b)}),s({scope:C,form:A,current_item:null,list:r,field:"project"}),C.formSave=function(){B.clearApiErrors(),v("start");var a,b,c={};try{if(a="json"===C.parseType?JSON.parse(C.variables):jsyaml.load(C.variables),"object"!=typeof a)throw"failed to return an object!";for(b in A.fields)"select"===A.fields[b].type&&"playbook"!==b?c[b]=C[b].value:"variables"!==b&&(c[b]=C[b]);c.extra_vars=JSON.stringify(a,void 0,"	"),w(c.extra_vars)&&(c.extra_vars=""),i.setUrl(z),i.post(c).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&m(),m(1)}).error(function(a,b){v("stop"),k(C,a,b,A,{hdr:"Error!",msg:"Failed to add new job template. POST returned status: "+b})})}catch(e){v("stop"),j("Error","Error parsing extra variables. Parser returned: "+e)}},C.formReset=function(){B.reset();for(var a in D)C[a]=D[a]}}function JobTemplatesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){p("htmlTemplate");var E,F,G=v("job_templates"),H=h,I=g,J=H.inject(I,{mode:"edit",related:!0}),K=0,L=d.path().replace(/^\//,"").split("/")[0],M={},N=f.id,O={};J.parseType="yaml",x(J),J.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],J.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],J.playbook_options=null,J.playbook=null,H.reset(),F=function(a){var b;C(a)||(b=v("projects")+a+"/playbooks/",A("start"),i.setUrl(b),i.get().success(function(a){var b;for(J.playbook_options=[],b=0;b<a.length;b++)J.playbook_options.push(a[b]),a[b]===J.playbook&&J.job_templates_form.playbook.$setValidity("required",!0);J.playbook?J.$emit("jobTemplateLoadFinished"):A("stop")}).error(function(){A("stop"),j("Missing Playbooks","Unable to retrieve the list of playbooks for this project. Choose a different  project or make the playbooks available on the file system.","alert-info")}))},E=function(){C(J.project)||(A("start"),i.setUrl(v("projects")+J.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}A("stop"),b&&j("Waning",b,"alert-info")}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to get project "+J.project+". GET returned status: "+b})}))},J.watchProjectUnregister&&J.watchProjectUnregister(),J.watchProjectUnregister=J.$watch("project_name",function(a,b){a!==b&&""!==b&&null!==b&&void 0!==b&&(J.playbook=null,F(J.project),E())}),J.removeJobTemplateLoadFinished&&J.removeJobTemplateLoadFinished(),J.removeJobTemplateLoadFinished=J.$on("jobTemplateLoadFinished",function(){if(K++,K>=2)for(var a in O)J.search(O[a].iterator)}),J.removeRelatedJobs&&J.removeRelatedJobs(),J.removeRelatedJobs=J.$on("relatedjobs",function(){var a,b;
if(J.jobs&&J.jobs.length)for(a=0;a<J.jobs.length;a++)b=new Date(J.jobs[a].created),J.jobs[a].created=z(b),J.jobs[a].statusBadgeToolTip=y(J.jobs[a].status)+" Click to view status details.",J.jobs[a].statusLinkTo="/#/jobs/"+J.jobs[a].id}),J.cloudCredentialReadyRemove&&J.cloudCredentialReadyRemove(),J.cloudCredentialReadyRemove=J.$on("cloudCredentialReady",function(a,b){var c={};J.cloud_credential_name=b,M.cloud_credential_name=b,jQuery.extend(!0,c,r),c.name="cloudcredentials",c.iterator="cloudcredential",t({url:v("credentials")+"?cloud=true",scope:J,form:I,current_item:J.cloud_credential,list:c,field:"cloud_credential",hdr:"Select Cloud Credential"}),J.$emit("jobTemplateLoadFinished")}),J.jobTemplateLoadedRemove&&J.jobTemplateLoadedRemove(),J.jobTemplateLoadedRemove=J.$on("jobTemplateLoaded",function(a,b){var c;F(J.project),c=""===J.host_config_key||null===J.host_config_key?"false":"true",w({scope:J,master:M,check_field:"allow_callbacks",default_val:c}),b?(i.setUrl(b),i.get().success(function(a){J.$emit("cloudCredentialReady",a.name)}).error(function(a,b){k(J,a,b,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+b})})):J.$emit("cloudCredentialReady",null)}),A("start"),i.setUrl(G+":id/"),i.get({params:{id:N}}).success(function(a){var b,c,d,e,f;l({path:"/job_templates/"+N,title:a.name});for(b in I.fields){if("variables"!==b&&null!==a[b]&&void 0!==a[b]){if("select"===I.fields[b].type)if(J[b+"_options"]&&J[b+"_options"].length>0)for(c=0;c<J[b+"_options"].length;c++)a[b]===J[b+"_options"][c].value&&(J[b]=J[b+"_options"][c]);else J[b]=a[b];else J[b]=a[b];M[b]=J[b]}"variables"===b&&($.isEmptyObject(a.extra_vars)||"{}"===a.extra_vars||"null"===a.extra_vars||""===a.extra_vars||null===a.extra_vars?J.variables="---":(d=JSON.parse(a.extra_vars),J.variables=jsyaml.safeDump(d)),M.variables=J.variables),"lookup"===I.fields[b].type&&a.summary_fields[I.fields[b].sourceModel]&&(J[I.fields[b].sourceModel+"_"+I.fields[b].sourceField]=a.summary_fields[I.fields[b].sourceModel][I.fields[b].sourceField],M[I.fields[b].sourceModel+"_"+I.fields[b].sourceField]=J[I.fields[b].sourceModel+"_"+I.fields[b].sourceField])}J.url=a.url,e=a.related;for(f in I.related)e[f]&&(O[f]={url:e[f],iterator:I.related[f].iterator});J.callback_url=a.related.callback,M.callback_url=J.callback_url,t({scope:J,form:I,current_item:a.inventory,list:q,field:"inventory"}),t({url:v("credentials")+"?kind=ssh",scope:J,form:I,current_item:a.credential,list:r,field:"credential",hdr:"Select Machine Credential"}),t({scope:J,form:I,current_item:a.project,list:s,field:"project"}),m({scope:J,form:I,relatedSets:O}),n({scope:J,relatedSets:O}),J.$emit("jobTemplateLoaded",a.related.cloud_credential)}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to retrieve job template: "+f.id+". GET status: "+b})}),J.formSave=function(){H.clearApiErrors(),A("start");var a,b,c={};try{if(a="json"===J.parseType?JSON.parse(J.variables):jsyaml.load(J.variables),"object"!=typeof a)throw"failed to return an object!";for(b in I.fields)"select"===I.fields[b].type&&"playbook"!==b?c[b]=J[b].value:"variables"!==b&&"callback_url"!==b&&(c[b]=J[b]);c.extra_vars=JSON.stringify(a,void 0,"	"),("null"===c.extra_vars||null===c.extra_vars)&&(c.extra_vars=""),i.setUrl(G+N+"/"),i.put(c).success(function(){A("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&o(),o(1)}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to update job template. PUT returned status: "+b})})}catch(e){A("stop"),j("Error","Error parsing extra variables. Parser returned: "+e)}},J.showActivity=function(){B({scope:J})},J.formReset=function(){H.reset();for(var a in M)J[a]=M[a];J.parseType="yaml",$("#forks-slider").slider("option","value",J.forks)},J.add=function(a){b.flashMessage=null,d.path("/"+L+"/"+f.id+"/"+a)},J.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},J["delete"]=function(a,c,d,e){b.flashMessage=null;var f=function(){var b=G+N+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),J.search(I.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(J,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};D({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+J.name+" "+e+"?",action:f})}}function JobsListCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o("htmlTemplate");var y,z=h,A=q("jobs"),B=i,C=B.inject(z,{mode:"edit"});if(b.flashMessage=null,C.selected=[],C.removePostRefresh&&C.removePostRefresh(),C.removePostRefresh=C.$on("PostRefresh",function(){var a,b;if($("tr.success").each(function(){var a=$(this).attr("ng-class");C[a]=""}),C.jobs&&C.jobs.length)for(a=0;a<C.jobs.length;a++)b=new Date(C.jobs[a].created),C.jobs[a].created=t(b),C.jobs[a].statusBadgeToolTip=v(C.jobs[a].status)+" Click to view status details.",C.jobs[a].statusLinkTo="/#/jobs/"+C.jobs[a].id}),e.job_host_summaries__host?A+="?job_host_summaries__host="+e.job_host_summaries__host:e.inventory__int&&e.status&&(A+="?inventory__int="+e.inventory__int+"&status="+e.status),l({scope:C,set:"jobs",list:z,url:A}),m({scope:C,list:z,url:A}),e.inventory__int&&(C[z.iterator+"SearchField"]="inventory",C[z.iterator+"SearchValue"]=e.inventory__int,C[z.iterator+"SearchFieldLabel"]="Inventory ID"),e.id__int&&(C[z.iterator+"SearchField"]="id",C[z.iterator+"SearchValue"]=e.id__int,C[z.iterator+"SearchFieldLabel"]="Job ID"),e.status){C[z.iterator+"SearchField"]="status",C[z.iterator+"SelectShow"]=!0,C[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,C[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br>/g," ");for(y in z.fields.status.searchOptions)if(z.fields.status.searchOptions[y].value===e.status){C[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[y];break}}C.search(z.iterator),j(),C.refresh=function(){x("start"),C.jobLoading=!1,u({scope:C,set:"jobs",iterator:"job",url:C.current_url})},C.refreshJob=C.refresh,C.editJob=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a)},C.viewEvents=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_events")},C.viewSummary=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_host_summaries")},C.deleteJob=function(a){f.setUrl(A+a+"/"),f.get().success(function(b){var c,d,e,g;"pending"===b.status||"running"===b.status||"waiting"===b.status?(d=b.related.cancel,e="cancel",g="Cancel Job"):(d=A+a+"/",e="delete",g="Delete Job"),c=function(){f.setUrl(d),"cancel"===e?f.post().success(function(){$("#prompt-modal").modal("hide"),C.search(z.iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),p(C,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. POST returned status: "+b})}):f.destroy().success(function(){$("#prompt-modal").modal("hide"),C.search(z.iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),p(C,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. DELETE returned status: "+b})})},k({hdr:g,body:"Are you sure you want to "+e+" job "+a+"?",action:c})}).error(function(a,b){p(C,a,b,null,{hdr:"Error!",msg:"Failed to get job details. GET returned status: "+b})})},C.submitJob=function(a,b){s({scope:C,id:a,template:b})}}function JobsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(a){if(null!==a&&""!==a&&void 0!==a){var b=v("projects")+a+"/playbooks/";i.setUrl(b),i.get().success(function(a){F.playbook_options=[];for(var b=0;b<a.length;b++)F.playbook_options.push(a[b]);F.$emit("jobTemplateLoadFinished")}).error(function(){F.$emit("jobTemplateLoadFinished")})}else F.$emit("jobTemplateLoadFinished")}function B(a){var b=a.match(/\n/g),c=b?b.length:1;return c>15?15:c}p("htmlTemplate");var C=v("jobs"),D=h,E=g,F=D.inject(E,{mode:"edit",related:!0}),G={},H=f.id,I={},J=0;D.reset(),F.job_id=H,F.parseType="yaml",F.statusSearchSpin=!1,F.jobLoadedRemove&&F.jobLoadedRemove(),F.jobLoadedRemove=F.$on("jobLoaded",function(a,b){A(F.project),F[E.name+"ReadOnly"]="new"===F.status?!1:!0,$("#forks-slider").slider("option","value",F.forks),$("#forks-slider").slider("disable"),$('input[type="checkbox"]').attr("disabled","disabled"),$('input[type="radio"]').attr("disabled","disabled"),$("#host_config_key-gen-btn").attr("disabled","disabled"),$("textarea").attr("readonly","readonly"),i.setUrl(F.template_url),i.get().success(function(a){var b=a.host_config_key?"true":"false";F.host_config_key=a.host_config_key,w({scope:F,master:G,check_field:"allow_callbacks",default_val:b}),F.callback_url=a.related?a.related.callback:"<< Job template not found >>",F.$emit("jobTemplateLoadFinished")}).error(function(){z("stop"),F.callback_url="<< Job template not found >>"}),b?(i.setUrl(b),i.get().success(function(a){F.cloud_credential_name=a.name,F.$emit("jobTemplateLoadFinished")}).error(function(a,b){k(F,a,b,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+b})})):F.$emit("jobTemplateLoadFinished")}),F.removeJobTemplateLoadFinished&&F.removeJobTemplateLoadFinished(),F.removeJobTemplateLoadFinished=F.$on("jobTemplateLoadFinished",function(){J++,J>=3&&z("stop")}),F.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],F.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],F.playbook_options=null,F.playbook=null,z("start"),i.setUrl(C+":id/"),i.get({params:{id:H}}).success(function(a){var b,c,d,e,f,g;l();for(d in E.fields){if("variables"!==d&&null!==a[d]&&void 0!==a[d]){if("select"===E.fields[d].type)if(F[d+"_options"]&&F[d+"_options"].length>0)for(b=0;b<F[d+"_options"].length;b++)a[d]===F[d+"_options"][b].value&&(F[d]=F[d+"_options"][b]);else F[d]=a[d]}else F[d]=a[d];G[d]=F[d]}F.id=a.id,F.name=a.summary_fields&&a.summary_fields.job_template?a.summary_fields.job_template.name:"","variables"===d&&($.isEmptyObject(a.extra_vars)||"{}"===a.extra_vars||"null"===a.extra_vars||""===a.extra_vars||null===a.extra_vars?F.variables="---":(e=JSON.parse(a.extra_vars),F.variables=jsyaml.safeDump(e)),G.variables=F.variables),"lookup"===E.fields[d].type&&a.summary_fields[E.fields[d].sourceModel]&&(F[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]=a.summary_fields[E.fields[d].sourceModel][E.fields[d].sourceField],G[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]=F[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]);for(d in E.statusFields)null!==a[d]&&void 0!==a[d]&&("created"===d?(c=new Date(a.created),F.created=x(c)):F[d]=a[d]);F.statusToolTip=y(a.status),$('form[name="jobs_form"] input[type="text"], form[name="jobs_form"] jobs_form textarea').attr("readonly","readonly"),$('form[name="jobs_form"] select').prop("disabled","disabled"),$('form[name="jobs_form"] .lookup-btn').prop("disabled","disabled"),$('form[name="jobs_form"] .buttons, form[name="jobs_form"] hr').hide(),F.url=a.url,f=a.related;for(g in E.related)f[g]&&(I[g]={url:f[g],iterator:E.related[g].iterator});F.stdout_rows=B(F.result_stdout),F.traceback_rows=B(F.result_traceback),t({scope:F,form:E,current_item:a.inventory,list:q,field:"inventory"}),t({scope:F,form:E,current_item:a.credential,list:r,field:"credential"}),t({scope:F,form:E,current_item:a.project,list:s,field:"project"}),m({scope:F,form:E,relatedSets:I}),n({scope:F,relatedSets:I}),F.template_url=a.related.job_template,F.$emit("jobLoaded",a.related.cloud_credential)}).error(function(a,b){k(F,a,b,E,{hdr:"Error!",msg:"Failed to retrieve job: "+f.id+". GET status: "+b})}),F.refresh=function(){z("start"),i.setUrl(C+H+"/"),i.get().success(function(a){F.status=a.status,F.result_stdout=a.result_stdout,F.result_traceback=a.result_traceback,F.stdout_rows=B(F.result_stdout),F.traceback_rows=B(F.result_traceback),z("stop")}).error(function(a,b){z("stop"),k(F,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})},F.jobSummary=function(){d.path("/jobs/"+H+"/job_host_summaries")},F.jobEvents=function(){d.path("/jobs/"+H+"/job_events")}}function OrganizationsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n("htmlTemplate");var t,u=k,v=j,w=d.path().replace(/^\//,"").split("/"),x="organizations"===w[0]?"edit":"select",y=v.inject(k,{mode:x}),z=p("organizations");c.flashMessage=null,h(),t=p("projects")+a.project_id+"/organizations/",q({scope:y,list:u,url:t,returnToCaller:1}),y.removePostRefresh&&y.removePostRefresh(),y.removePostRefresh=y.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off()}),l({scope:y,set:u.name,list:u,url:z}),m({scope:y,list:u,url:z}),y.search(u.iterator),y.showActivity=function(){s({scope:y})},y.addOrganization=function(){d.path(d.path()+"/add")},y.editOrganization=function(a){d.path(d.path()+"/"+a)},y.deleteOrganization=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide");var b=z+a+"/";f.setUrl(b),f.destroy().success(function(){y.search(u.iterator)}).error(function(a,c){r("stop"),o(y,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};i({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function OrganizationsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){m("htmlTemplate");var q=h,r=g,s=q.inject(r,{mode:"add",related:!1}),t=d.path().replace(/^\//,"").split("/")[0];q.reset(),l(),s.formSave=function(){q.clearApiErrors(),p("start");var c=n(t);c+="organizations"!==t?f.project_id+"/organizations/":"",i.setUrl(c),i.post({name:a.name,description:a.description}).success(function(a){p("stop"),"organizations"===t?(b.flashMessage="New organization successfully created!",d.path("/organizations/"+a.id)):o(1)}).error(function(a,b){k(s,a,b,r,{hdr:"Error!",msg:"Failed to add new organization. Post returned status: "+b})})},s.formReset=function(){b.flashMessage=null,q.reset()}}function OrganizationsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){p("htmlTemplate");var t=g,u=h,v=h.inject(t,{mode:"edit",related:!0}),w=q("organizations"),x=d.path().replace(/^\//,"").split("/")[0],y={},z=f.organization_id,A={};u.reset(),v.organizationLoadedRemove&&v.organizationLoadedRemove(),v.organizationLoadedRemove=v.$on("organizationLoaded",function(){for(var a in A)v.search(A[a].iterator);r("stop")}),r("start"),i.setUrl(w+z+"/"),i.get().success(function(a){var b,c,d;l({path:"/organizations/"+z,title:a.name});for(b in t.fields)a[b]&&(v[b]=a[b],y[b]=a[b]);c=a.related;for(d in t.related)c[d]&&(A[d]={url:c[d],iterator:t.related[d].iterator});m({scope:v,form:t,relatedSets:A}),n({scope:v,relatedSets:A}),v.$emit("organizationLoaded")}).error(function(a,b){k(v,a,b,t,{hdr:"Error!",msg:"Failed to retrieve organization: "+f.id+". GET status: "+b})}),v.formSave=function(){var a,c={};u.clearApiErrors(),r("start");for(a in t.fields)c[a]=v[a];i.setUrl(w+z+"/"),i.put(c).success(function(){r("stop"),y=c,b.flashMessage="Your changes were successfully saved!"}).error(function(a,b){r("stop"),k(v,a,b,g,{hdr:"Error!",msg:"Failed to update organization: "+z+". PUT status: "+b})})},v.showActivity=function(){s({scope:v})},v.formReset=function(){b.flashMessage=null,u.reset();for(var a in y)v[a]=y[a]},v.add=function(a){b.flashMessage=null,d.path("/"+x+"/"+f.organization_id+"/"+a)},v.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},v["delete"]=function(a,c,d,e){b.flashMessage=null;var g=function(){r("start");var b=w+f.organization_id+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){r("stop"),$("#prompt-modal").modal("hide"),v.search(t.related[a].iterator)}).error(function(a,c){r("stop"),$("#prompt-modal").modal("hide"),k(v,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};o({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+v.name+" "+e+"?",action:g})}}function PermissionsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){o("htmlTemplate");var t=h,u=c.path().replace(/^\//,"").split("/")[0],v=q(u),w=i,x=w.inject(t,{mode:"edit"});v+=void 0!==e.user_id?e.user_id:e.team_id,v+="/permissions/",x.selected=[],r({scope:x}),x.removePostRefresh&&x.removePostRefresh(),x.removePostRefresh=x.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),l({scope:x,set:"permissions",list:t,url:v}),m({scope:x,list:t,url:v}),x.search(t.iterator),j(),x.addPermission=function(){x.PermissionAddAllowed&&c.path(c.path()+"/add")},x.editPermission=function(a){c.path(c.path()+"/"+a)},x.deletePermission=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var b=q("base")+"permissions/"+a+"/";f.setUrl(b),f.destroy().success(function(){x.search(t.iterator)}).error(function(a,c){s("stop"),p(x,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};x.PermissionAddAllowed&&k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function PermissionsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){m("htmlTemplate");var v=g,w=h,x=void 0!==f.user_id?f.user_id:f.team_id,y=d.path().replace(/^\//,"").split("/")[0],z=w.inject(v,{mode:"add",related:!1}),A={};s({scope:z}),w.reset(),l(),z.inventoryrequired=!0,z.projectrequired=!1,z.category="Inventory",A.category="Inventory",A.inventoryrequired=!0,A.projectrequired=!1,r({scope:z,form:v,current_item:null,list:p,field:"inventory"}),r({scope:z,form:v,current_item:null,list:q,field:"project"}),z.formSave=function(){var a,b,c={};if(w.clearApiErrors(),t("start"),z.PermissionAddAllowed){c={};for(a in v.fields)c[a]=z[a];b="teams"===y?n("teams")+x+"/permissions/":n("users")+x+"/permissions/",i.setUrl(b),i.post(c).success(function(){t("stop"),o(1)}).error(function(a,b){t("stop"),k(z,a,b,g,{hdr:"Error!",msg:"Failed to create new permission. Post returned status: "+b})})}else j("Access Denied","You do not have access to create new permission objects. Please contact a system administrator.","alert-danger")},z.formReset=function(){b.flashMessage=null,w.reset();for(var a in A)z[a]=A[a];z.selectCategory()},z.selectCategory=function(){u({scope:z,reset:!0})},z.selectCategory()}function PermissionsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n("htmlTemplate");var w=h,x=g,y=w.inject(x,{mode:"edit",related:!0}),z=void 0!==f.user_id?f.user_id:f.team_id,A=f.permission_id,B=p("base")+"permissions/"+A+"/",C={};w.reset(),t({scope:y}),y.selectCategory=function(a){var b=a===!1?!1:!0;v({scope:y,reset:b})},u("start"),i.setUrl(B),i.get().success(function(a){var b,c,d;l({path:"/users/"+z+"/permissions/"+A,title:a.name});for(b in x.fields)a[b]&&(x.fields[b].sourceModel&&(c=x.fields[b].sourceModel,d=x.fields[b].sourceField,y[c+"_"+d]=a.summary_fields[c][d],C[c+"_"+d]=a.summary_fields[c][d]),y[b]=a[b],C[b]=y[b]);y.category="Deploy","run"!==a.permission_type&&"check"!==a.permission_type&&(y.category="Inventory"),C.category=y.category,y.selectCategory(!1),s({scope:y,form:x,current_item:a.inventory,list:q,field:"inventory"}),s({scope:y,form:x,current_item:a.project,list:r,field:"project"}),y.PermissionAddAllowed||$('form[name="permission_form"]').find("select, input, button").each(function(){($(this).is("input")||$(this).is("select"))&&$(this).attr("readonly","readonly"),($(this).is('input[type="checkbox"]')||$(this).is('input[type="radio"]')||$(this).is("button"))&&$(this).attr("disabled","disabled")}),u("stop")}).error(function(a,b){k(y,a,b,x,{hdr:"Error!",msg:"Failed to retrieve Permission: "+A+". GET status: "+b})}),y.formSave=function(){var a,b={};w.clearApiErrors(),u("start");for(a in x.fields)b[a]=y[a];i.setUrl(B),i.put(b).success(function(){u("stop"),m(1)}).error(function(a,b){u("stop"),k(y,a,b,x,{hdr:"Error!",msg:"Failed to update Permission: "+f.id+". PUT status: "+b})})},y.formReset=function(){w.reset();for(var a in C)y[a]=C[a];y.selectCategory(!1)}}function ProjectsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){o("htmlTemplate"),w("start");var A=h,B=q("projects"),C=i,D=c.path().replace(/^\//,"").split("/")[0],E="projects"===D?"edit":"select",F=C.inject(A,{mode:E}),G="teams"===D?q("teams")+e.team_id+"/projects/":B,H=0;b.flashMessage=null,F.projectLoading=!0,"select"===E&&r({scope:F,list:A,url:G,returnToCaller:1}),F.removePostRefresh&&F.removePostRefresh(),F.removePostRefresh=F.$on("PostRefresh",function(){var a,b;if(w("stop"),$("#prompt-modal").off(),F.projects)for(b=0;b<F.projects.length;b++){switch("ok"===F.projects[b].status&&(F.projects[b].status="n/a"),F.projects[b].status){case"n/a":F.projects[b].badge="none";break;case"updating":case"successful":case"ok":F.projects[b].badge="false";break;case"never updated":case"failed":case"missing":F.projects[b].badge="true"}for(F.projects[b].last_updated=null!==F.projects[b].last_updated?u(new Date(F.projects[b].last_updated)):null,a=0;a<F.project_scm_type_options.length;a++)if(F.project_scm_type_options[a].value===F.projects[b].scm_type){F.projects[b].scm_type=F.project_scm_type_options[a].label,"Manual"===F.projects[b].scm_type?(F.projects[b].scm_update_tooltip="Manaul projects do not require an SCM update",F.projects[b].scm_type_class="btn-disabled"):(F.projects[b].scm_update_tooltip="Start an SCM update",F.projects[b].scm_type_class="");break}}}),F.removeChoicesHere&&F.removeChoicesHere(),F.removeChoicesHere=F.$on("choicesCompleteProject",function(){var a;if(A.fields.scm_type.searchOptions=F.project_scm_type_options,A.fields.status.searchOptions=F.project_status_options,e.scm_type&&e.status&&(B+="?status="+e.status),l({scope:F,set:"projects",list:A,url:B}),m({scope:F,list:A,url:B}),e.scm_type){F[A.iterator+"SearchField"]="scm_type",F[A.iterator+"SelectShow"]=!0,F[A.iterator+"SearchSelectOpts"]=A.fields.scm_type.searchOptions,F[A.iterator+"SearchFieldLabel"]=A.fields.scm_type.label.replace(/<br\>/g," ");for(a in A.fields.scm_type.searchOptions)if(A.fields.scm_type.searchOptions[a].value===e.scm_type){F[A.iterator+"SearchSelectValue"]=A.fields.scm_type.searchOptions[a];break}}else if(e.status){F[A.iterator+"SearchValue"]=e.status,F[A.iterator+"SearchField"]="status",F[A.iterator+"SelectShow"]=!0,F[A.iterator+"SearchFieldLabel"]=A.fields.status.label,F[A.iterator+"SearchSelectOpts"]=A.fields.status.searchOptions;for(a in A.fields.status.searchOptions)if(A.fields.status.searchOptions[a].value===e.status){F[A.iterator+"SearchSelectValue"]=A.fields.status.searchOptions[a];break}}F.search(A.iterator)}),F.removeChoicesReady&&F.removeChoicesReady(),F.removeChoicesReady=F.$on("choicesReadyProject",function(){H++,2===H&&F.$emit("choicesCompleteProject")}),y({scope:F,url:B,field:"status",variable:"project_status_options",callback:"choicesReadyProject"}),y({scope:F,url:B,field:"scm_type",variable:"project_scm_type_options",callback:"choicesReadyProject"}),j(),F.showActivity=function(){x({scope:F})},F.addProject=function(){c.path(c.path()+"/add")},F.editProject=function(a){c.path(c.path()+"/"+a)},F.showSCMStatus=function(a){var b,c=F.$on("PostRefresh",function(){var d;for(b=0;b<F.projects.length;b++)if(F.projects[b].id===a){d=F.projects[b];break}null!==d.scm_type?d.related.current_update?(w("start"),t({project_id:a,last_update:d.related.current_update})):d.related.last_update?(w("start"),t({project_id:a,last_update:d.related.last_update})):g("No Updates Available","There is no SCM update information available for this project. An update has not yet been  completed.  If you have not already done so, start an update for this project.","alert-info"):g("Missing SCM Configuration","The selected project is not configured for SCM. You must first edit the project, provide SCM settings, and then run an update.","alert-info"),c()});F.search(A.iterator,null,!1,!0)},F.deleteProject=function(a,b){var c=function(){$("#prompt-modal").on("hiden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var b=B+a+"/";f.setUrl(b),f.destroy().success(function(){F.search(A.iterator)}).error(function(a,c){w("stop"),p(F,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},F.removeCancelUpdate&&F.removeCancelUpdate(),F.removeCancelUpdate=F.$on("Cancel_Update",function(a,b){f.setUrl(b),f.post().success(function(){g("SCM Update Cancel","Your request to cancel the update was submitted to the task maanger.","alert-info"),F.refresh()}).error(function(a,c){p(F,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST status: "+c})})}),F.removeCheckCancel&&F.removeCheckCancel(),F.removeCheckCancel=F.$on("Check_Cancel",function(a,b){var c=b.related.cancel;f.setUrl(c),f.get().success(function(a){a.can_cancel?F.$emit("Cancel_Update",c):g("Cancel Not Allowed","Either you do not have access or the SCM update process completed. Click the <em>Refresh</em> button to view the latest status.","alert-info")}).error(function(a,b){p(F,a,b,null,{hdr:"Error!",msg:"Call to "+c+" failed. GET status: "+b})})}),F.cancelUpdate=function(a,b){var c,d,e=!1;for(c=0;c<F.projects.length;c++)if(F.projects[c].id===a){d=F.projects[c],e=!0;break}e&&d.related.current_update?(f.setUrl(d.related.current_update),f.get().success(function(a){F.$emit("Check_Cancel",a)}).error(function(a,b){p(F,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.current_update+" failed. GET status: "+b})})):g("Update Not Found","An SCM update does not appear to be running for project: "+b+". Click the <em>Refresh</em> button to view the latet status.","alert-info")},F.refresh=function(){w("start"),F.projectLoading=!1,v({scope:F,set:"projects",iterator:"project",url:F.current_url})},F.SCMUpdate=function(a){var b;for(b=0;b<F.projects.length;b++)if(F.projects[b].id===a){if("Manual"===F.projects[b].scm_type||z(F.projects[b].scm_type))break;"updating"===F.projects[b].status?g("Update in Progress","The SCM update process is running. Use the Refresh button to monitor the status.","alert-info"):s({scope:F,project_id:a})}}}function ProjectsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){m("tree-form"),m("htmlTemplate");var w=g,x=h,y=d.path().replace(/^\//,"").split("/")[0],z=n("projects"),A=x.inject(w,{mode:"add",related:!1}),B={};x.reset(),l(),p({scope:A,master:B}),A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReady",function(){var a;for(a=0;a<A.scm_type_options.length;a++)if(""===A.scm_type_options[a].value){A.scm_type=A.scm_type_options[a];break}A.scmRequired=!1,B.scm_type=A.scm_type}),t({scope:A,url:z,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),q({scope:A,form:w,list:r,field:"organization"}),q({scope:A,url:n("credentials")+"?kind=scm",form:w,list:s,field:"credential"}),A.formSave=function(){var a,c,d,e={};x.clearApiErrors(),e={};for(c in w.fields)if("checkbox_group"===w.fields[c].type)for(a=0;a<w.fields[c].fields.length;a++)e[w.fields[c].fields[a].name]=A[w.fields[c].fields[a].name];else"alertblock"!==w.fields[c].type&&(e[c]=A[c]);e.scm_type=A.scm_type.value,""!==A.scm_type.value?delete e.local_path:e.local_path=A.local_path.value,d="teams"===y?n("teams")+f.team_id+"/projects/":z,v("start"),i.setUrl(d),i.post(e).success(function(a){var c=a.id,d=n("projects")+c+"/organizations/",e={id:A.organization};i.setUrl(d),i.post(e).success(function(){v("stop"),b.flashMessage="New project successfully created!","projects"===y&&o(),o(1)}).error(function(a,b){v("stop"),k(A,a,b,g,{hdr:"Error!",msg:"Failed to add organization to project. POST returned status: "+b})})}).error(function(a,b){v("stop"),k(A,a,b,g,{hdr:"Error!",msg:"Failed to create new project. POST returned status: "+b})})},A.scmChange=function(){A.scm_type&&(A.pathRequired=""===A.scm_type.value?!0:!1,A.scmRequired=""!==A.scm_type.value?!0:!1,A.scmBranchLabel="svn"===A.scm_type.value?"Revision #":"SCM Branch")},A.formReset=function(){var a;b.flashMessage=null,x.reset();for(a in B)A.fld=B.fld;A.scmChange()}}function ProjectsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){p("htmlTemplate");var B=g,C=h,D=C.inject(B,{mode:"edit",related:!0}),E=q("projects")+f.id+"/",F=d.path().replace(/^\//,"").split("/")[0],G={},H=f.id,I={};C.reset(),D.project_local_paths=[],D.base_dir="",D.projectLoadedRemove&&D.projectLoadedRemove(),D.projectLoadedRemove=D.$on("projectLoaded",function(){var a,b=[];for(a in I)D.search(I[a].iterator);t.getUserInfo("is_superuser")===!0?s({scope:D,master:G}):(b.push({label:D.local_path,value:D.local_path}),D.project_local_paths=b,D.local_path=D.project_local_paths[0],D.base_dir="You do not have access to view this property"),v({url:q("credentials")+"?kind=scm",scope:D,form:B,list:u,field:"credential"}),D.pathRequired=""===D.scm_type.value?!0:!1,D.scmRequired=""!==D.scm_type.value?!0:!1,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch",z("stop")}),D.removeChoicesReady&&D.removeChoicesReady(),D.removeChoicesReady=D.$on("choicesReady",function(){i.setUrl(E),i.get({params:{id:H}}).success(function(a){var b,c,d,e;l({path:"/projects/"+H,title:a.name});for(d in B.fields){if("checkbox_group"===B.fields[d].type)for(e=0;e<B.fields[d].fields.length;e++)D[B.fields[d].fields[e].name]=a[B.fields[d].fields[e].name],G[B.fields[d].fields[e].name]=a[B.fields[d].fields[e].name];else a[d]&&(D[d]=a[d],G[d]=a[d]);"organization"!==d&&B.fields[d].sourceModel&&a.summary_fields&&a.summary_fields[B.fields[d].sourceModel]&&(D[B.fields[d].sourceModel+"_"+B.fields[d].sourceField]=a.summary_fields[B.fields[d].sourceModel][B.fields[d].sourceField],G[B.fields[d].sourceModel+"_"+B.fields[d].sourceField]=a.summary_fields[B.fields[d].sourceModel][B.fields[d].sourceField])}b=a.related;for(c in B.related)b[c]&&(I[c]={url:b[c],iterator:B.related[c].iterator});for(a.scm_type=x(a.scm_type)?"":a.scm_type,e=0;e<D.scm_type_options.length;e++)if(D.scm_type_options[e].value===a.scm_type){D.scm_type=D.scm_type_options[e];break}""!==D.scm_type.value?(D.pathRequired=!1,D.scmRequired=!0):(D.pathRequired=!0,D.scmRequired=!1),G.scm_type=D.scm_type,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch",m({scope:D,form:B,relatedSets:I}),n({scope:D,relatedSets:I}),D.$emit("projectLoaded")}).error(function(a,b){k(D,a,b,B,{hdr:"Error!",msg:"Failed to retrieve project: "+H+". GET status: "+b})})}),z("start"),w({url:q("projects"),scope:D,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),D.formSave=function(){var a,c,d;C.clearApiErrors(),z("start"),b.flashMessage=null,d={};for(a in B.fields)if("checkbox_group"===B.fields[a].type)for(c=0;c<B.fields[a].fields.length;c++)d[B.fields[a].fields[c].name]=D[B.fields[a].fields[c].name];else"alertblock"!==B.fields[a].type&&(d[a]=D[a]);d.scm_type=D.scm_type.value,""!==D.scm_type.value?delete d.local_path:d.local_path=D.local_path.value,i.setUrl(E),i.put(d).success(function(){z("stop"),r()}).error(function(a,b){z("stop"),k(D,a,b,B,{hdr:"Error!",msg:"Failed to update project: "+H+". PUT status: "+b})})},D.showActivity=function(){A({scope:D})},D.add=function(a){b.flashMessage=null,d.path("/"+F+"/"+f.id+"/"+a)},D.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},D["delete"]=function(a,c,d,e){var f=function(){var d=q("projects")+H+"/"+a+"/";b.flashMessage=null,i.setUrl(d),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),D.search(B.related[a].iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),k(D,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. POST returned status: "+b})})};o({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+D.name+" "+e+"?",action:f})},D.scmChange=function(){D.scm_type&&(D.pathRequired=""===D.scm_type.value?!0:!1,D.scmRequired=""!==D.scm_type.value?!0:!1,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch")},D.formReset=function(){b.flashMessage=null,C.reset();for(var a in G)D[a]=G[a];D.scmChange()}}function TeamsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o("htmlTemplate");var v,w=h,x=r("teams"),y=i,z=c.path().replace(/^\//,"").split("/"),A="teams"===z[0]?"edit":"select",B=y.inject(w,{mode:A});B.selected=[],v=r("base")+c.path()+"/",s({scope:B,list:w,url:v,returnToCaller:1}),B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a;if(B.teams)for(a=0;a<B.teams.length;a++)B.teams[a].organization_name=B.teams[a].summary_fields.organization.name
}),l({scope:B,set:"teams",list:w,url:x}),m({scope:B,list:w,url:x}),B.search(w.iterator),j(),B.showActivity=function(){u({scope:B})},B.addTeam=function(){c.path(c.path()+"/add")},B.editTeam=function(a){c.path(c.path()+"/"+a)},B.deleteTeam=function(a,b){var c=function(){t("start");var b=x+a+"/";f.setUrl(b),f.destroy().success(function(){t("stop"),$("#prompt-modal").modal("hide"),B.search(w.iterator)}).error(function(a,c){t("stop"),$("#prompt-modal").modal("hide"),p(B,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function TeamsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){n("htmlTemplate");var v=s("teams"),w=g,x=h,y=x.inject(w,{mode:"add",related:!1});b.flashMessage=null,x.reset(),l(),t({scope:y,form:w,current_item:null,list:p,field:"organization"}),y.formSave=function(){var a,c;x.clearApiErrors(),u("start"),i.setUrl(v),c={};for(a in w.fields)c[a]=y[a];i.post(c).success(function(a){u("stop"),b.flashMessage="New team successfully created!",d.path("/teams/"+a.id)}).error(function(a,b){u("stop"),k(y,a,b,w,{hdr:"Error!",msg:"Failed to add new team. Post returned status: "+b})})},y.formReset=function(){x.reset()}}function TeamsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){p("htmlTemplate");var x=s("teams"),y=h,z=g,A=y.inject(z,{mode:"edit",related:!0}),B=d.path().replace(/^\//,"").split("/")[0],C={},D=f.team_id,E={};y.reset(),A.PermissionAddAllowed=!1,A.teamLoadedRemove&&A.teamLoadedRemove(),A.teamLoadedRemove=A.$on("teamLoaded",function(){t({scope:A}),i.setUrl(A.organization_url),i.get().success(function(a){A.organization_name=a.name,C.organization_name=a.name,v("stop")}).error(function(a,b){k(A,a,b,null,{hdr:"Error!",msg:"Failed to retrieve organization: "+A.orgnization_url+". GET status: "+b})});for(var a in E)A.search(E[a].iterator)}),v("start"),i.setUrl(x+":id/"),i.get({params:{id:D}}).success(function(a){var b,c,d;l({path:"/teams/"+D,title:a.name});for(b in z.fields)a[b]&&(A[b]=a[b],C[b]=A[b]);c=a.related;for(d in z.related)c[d]&&(E[d]={url:c[d],iterator:z.related[d].iterator});m({scope:A,form:z,relatedSets:E}),n({scope:A,relatedSets:E}),q({scope:A,form:z,current_item:a.organization,list:u,field:"organization"}),A.organization_url=a.related.organization,A.$emit("teamLoaded")}).error(function(a,b){k(A,a,b,z,{hdr:"Error!",msg:"Failed to retrieve team: "+f.team_id+". GET status: "+b})}),A.showActivity=function(){w({scope:A})},A.formSave=function(){var a,c={};y.clearApiErrors(),v("start"),b.flashMessage=null,i.setUrl(x+f.team_id+"/");for(a in z.fields)c[a]=A[a];i.put(c).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"teams"===a&&o(),o(1)}).error(function(a,b){v("stop"),k(A,a,b,z,{hdr:"Error!",msg:"Failed to update team: "+f.team_id+". PUT status: "+b})})},A.formReset=function(){b.flashMessage=null,y.reset();for(var a in C)A[a]=C[a]},A.add=function(a){b.flashMessage=null,"permissions"===a?A.PermissionAddAllowed?d.path("/"+B+"/"+f.team_id+"/"+a+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+B+"/"+f.team_id+"/"+a)},A.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/"+B+"/"+f.team_id+"/"+a+"/"+c:"/"+a+"/"+c)},A["delete"]=function(a,c,d,e){b.flashMessage=null;var g=function(){var b;"permissions"===a?A.PermissionAddAllowed?(b=s("base")+"permissions/"+c+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),A.search(z.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(A,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=x+f.team_id+"/"+a+"/",i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),A.search(z.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(A,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+A.name+" "+e+"?",action:g})}}function UsersList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=q("users"),w=i,x=c.path().replace(/^\//,"").split("/")[0],y="users"===x?"edit":"select",z=w.inject(h,{mode:y}),A="organizations"===x?q("organizations")+e.organization_id+"/users/":q("teams")+e.team_id+"/users/";z.selected=[],r({scope:z,list:u,url:A,returnToCaller:1}),z.removePostRefresh&&z.removePostRefresh(),z.removePostRefresh=z.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),b.flashMessage=null,l({scope:z,set:"users",list:u,url:v}),m({scope:z,list:u,url:v}),z.search(u.iterator),j(),z.showActivity=function(){t({scope:z})},z.addUser=function(){c.path(c.path()+"/add")},z.editUser=function(a){c.path(c.path()+"/"+a)},z.deleteUser=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var b=v+a+"/";f.setUrl(b),f.destroy().success(function(){z.search(u.iterator)}).error(function(a,c){s("stop"),p(z,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function UsersAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n("htmlTemplate");var t=o("organizations"),u=g,v=h,w=v.inject(u,{mode:"add",related:!1});r(),w.ldap_user=!1,w.not_ldap_user=!w.ldap_user,w.ldap_dn=null,v.reset(),l(),p({scope:w,form:u,current_item:void 0!==f.organization_id?f.organization_id:null,list:q,field:"organization"}),f.organization_id&&(w.organization=f.organization_id,i.setUrl(o("organizations")+f.organization_id+"/"),i.get().success(function(a){w.organization_name=a.name}).error(function(a,b){k(w,a,b,u,{hdr:"Error!",msg:"Failed to lookup Organization: "+a.id+". GET returned status: "+b})})),w.formSave=function(){v.clearApiErrors();var a,c={};if(void 0!==w.organization&&null!==w.organization&&""!==w.organization){i.setUrl(t+w.organization+"/users/");for(a in u.fields)u.fields[a].realName?c[u.fields[a].realName]=w[a]:c[a]=w[a];c.is_superuser=c.is_superuser||!1,s("start"),i.post(c).success(function(a){var c=d.path().replace(/^\//,"").split("/")[0];"users"===c&&(b.flashMessage="New user successfully created!",d.path("/users/"+a.id)),m(1)}).error(function(a,b){s("stop"),k(w,a,b,u,{hdr:"Error!",msg:"Failed to add new user. POST returned status: "+b})})}else w.organization_name_api_error="A value is required"},w.formReset=function(){v.reset(),w.ldap_user=!1},w.clearPWConfirm=function(a){w[a]="",w[u.name+"_form"][a].$setValidity("awpassmatch",!1)}}function UsersEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){p("htmlTemplate");var w=q("users"),x=h,y=g,z=d.path().replace(/^\//,"").split("/")[0],A={},B=f.user_id,C={};a.removeFormReady&&a.removeFormReady(),a.removeFormReady=a.$on("formReady",function(){var a=x.inject(y,{mode:"edit",related:!0});x.reset(),a.removePostRefresh&&a.removePostRefresh(),a.PermissionAddAllowed=!1,a.removeUserLoaded&&a.removeUserLoaded(),a.removeUserLoaded=a.$on("userLoaded",function(){for(var b in C)a.search(C[b].iterator);s({scope:a}),u("stop")}),i.setUrl(w+":id/"),i.get({params:{id:B}}).success(function(b){l({path:"/users/"+B,title:b.username});var c,d,e;for(c in y.fields)b[c]&&(a[c]="is_superuser"===c?"true"===b[c]||b[c]===!0?"true":"false":b[c],A[c]=a[c]);d=b.related;for(e in y.related)d[e]&&(C[e]={url:d[e],iterator:y.related[e].iterator});a.ldap_user=null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?!0:!1,a.not_ldap_user=!a.ldap_user,A.ldap_user=a.ldap_user,m({scope:a,form:y,relatedSets:C}),n({scope:a,relatedSets:C}),a.$emit("userLoaded")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+f.id+". GET status: "+c})}),a.formSave=function(){var c,e={};x.clearApiErrors(),b.flashMessage=null,i.setUrl(w+B+"/");for(c in y.fields)y.fields[c].realName?e[y.fields[c].realName]=a[c]:e[c]=a[c];e.is_superuser=e.is_superuser||!1,u("start"),i.put(e).success(function(){u("stop");var a=d.path().replace(/^\//,"").split("/")[0];"users"===a&&o(),o(1)}).error(function(b,c){u("stop"),k(a,b,c,y,{hdr:"Error!",msg:"Failed to update users: "+f.id+". PUT status: "+c})})},a.showActivity=function(){v({scope:a})},a.formReset=function(){b.flashMessage=null,x.reset();for(var c in A)a[c]=A[c];a.password_confirm=a.password},a.clearPWConfirm=function(c){a[c]="",a[y.name+"_form"][c].$setValidity("awpassmatch",!1),b.flashMessage=null},a.add=function(c){b.flashMessage=null,"permissions"===c?a.PermissionAddAllowed?d.path("/"+z+"/"+f.user_id+"/"+c+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+z+"/"+f.user_id+"/"+c)},a.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/users/"+f.user_id+"/permissions/"+c:"/"+a+"/"+c)},a["delete"]=function(c,d,e,g){b.flashMessage=null;var h=function(){var b;"permissions"===c?a.PermissionAddAllowed?(b=q("base")+"permissions/"+d+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+d})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=w+f.user_id+"/"+c+"/",i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.username+" "+g+"?",action:h})}}),t(),a.removeModifyForm&&a.removeModifyForm(),a.removeModifyForm=a.$on("modifyForm",function(){i.setUrl(q("config")),i.get().success(function(b){var c,d;if(b.user_ldap_fields)for(c=0;c<b.user_ldap_fields.length;c++)d=b.user_ldap_fields[c],y.fields[d]&&(y.fields[d].readonly=!0,y.fields[d].editRequired=!1,y.fields[d].awRequiredWhen&&delete y.fields[d].awRequiredWhen);a.$emit("formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve application config. GET status: "+c})})}),u("start"),i.setUrl(w+B+"/"),i.get().success(function(b){a.$emit(null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?"modifyForm":"formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+B+". GET status: "+c})})}function chkPass(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=2,I=2,J=2,K=2,L=3,M=3,N=3,O=4,P=4,Q=6,R="",S="",T="",U="",V="0",W="0",X="0",Y="0",Z="0",_="0",ab="0",bb="0",cb="0",db="0",eb="0",fb="0",gb="0",hb="0",ib="abcdefghijklmnopqrstuvwxyz",jb="01234567890",kb=")_!@#$%^&*()",lb="Too Short";if(c=document.all?0:1,a){for(nScore=parseInt(a.length*O),n=a.length,d=a.replace(/\s+/g,"").split(/\s*/),e=d.length,b=0;e>b;b++){for(d[b].match(/[A-Z]/g)?(""!==R&&R+1==b&&(y++,C++),R=b,o++):d[b].match(/[a-z]/g)?(""!==S&&S+1==b&&(z++,C++),S=b,p++):d[b].match(/[0-9]/g)?(b>0&&e-1>b&&s++,""!==T&&T+1==b&&(A++,C++),T=b,q++):d[b].match(/[^a-zA-Z0-9_]/g)&&(b>0&&e-1>b&&s++,""!==U&&U+1==b&&(B++,C++),U=b,r++),f=!1,g=0;e>g;g++)d[b]==d[g]&&b!=g&&(f=!0,x+=Math.abs(e/(g-b)));f&&(w++,v=e-w,x=Math.ceil(v?x/v:x))}for(h=0;23>h;h++)i=ib.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(D++,G++);for(h=0;8>h;h++)i=jb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(E++,G++);for(h=0;8>h;h++)i=kb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(F++,G++);o>0&&n>o&&(nScore=parseInt(nScore+2*(n-o)),V="+ "+parseInt(2*(n-o))),p>0&&n>p&&(nScore=parseInt(nScore+2*(n-p)),W="+ "+parseInt(2*(n-p))),q>0&&n>q&&(nScore=parseInt(nScore+q*P),X="+ "+parseInt(q*P)),r>0&&(nScore=parseInt(nScore+r*Q),Y="+ "+parseInt(r*Q)),s>0&&(nScore=parseInt(nScore+s*H),Z="+ "+parseInt(s*H)),(p>0||o>0)&&0===r&&0===q&&(nScore=parseInt(nScore-n),t=n,_="- "+n),0===p&&0===o&&0===r&&q>0&&(nScore=parseInt(nScore-n),u=n,ab="- "+n),w>0&&(nScore=parseInt(nScore-x),bb="- "+x),y>0&&(nScore=parseInt(nScore-y*I),cb="- "+parseInt(y*I)),z>0&&(nScore=parseInt(nScore-z*J),db="- "+parseInt(z*J)),A>0&&(nScore=parseInt(nScore-A*K),eb="- "+parseInt(A*K)),D>0&&(nScore=parseInt(nScore-D*L),fb="- "+parseInt(D*L)),E>0&&(nScore=parseInt(nScore-E*M),gb="- "+parseInt(E*M)),F>0&&(nScore=parseInt(nScore-F*N),hb="- "+parseInt(F*N)),nScore>100?nScore=100:0>nScore&&(nScore=0),k=$("#progbar"),l=$AnsibleConfig.password_strength,m=$AnsibleConfig.password_strength-15<0?0:$AnsibleConfig.password_strength-15,k.css("width",nScore+"%"),nScore>=0&&m>=nScore?(lb="Weak",k.addClass("progress-bar-danger"),k.removeClass("progress-bar-success progress-bar-warning")):nScore>m&&l>=nScore?(lb="Good",k.addClass("progress-bar-warning"),k.removeClass("progress-bar-success progress-bar-danger")):nScore>l&&(lb="Strong",k.addClass("progress-bar-success"),k.removeClass("progress-bar-warning progress-bar-danger"))}else k=$("#progbar"),k.css("width","0%"),k.removeClass("progress-bar-success progress-bar-warning");return nScore}function AdminsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=h,r=o("organizations")+e.organization_id+"/users/",s=i,t="select",u=s.inject(h,{mode:t}),v=o("organizations")+e.organization_id+"/admins/";p({scope:u,list:q,url:v,returnToCaller:1}),l({scope:u,set:"admins",list:q,url:r}),m({scope:u,list:q,url:r}),u.search(q.iterator),j()}function Authenticate(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o;l=function(){$("#login-username").focus()},n=k(d.sessionExpired)?a.get("sessionExpired"):d.sessionExpired,m=function(){return k(d.lastPath)?a.get("lastPath"):d.lastPath},$AnsibleConfig.debug_mode&&console&&(console.log("User session expired: "+n),console.log("Last URL: "+m())),$(".modal[aria-hidden=false]").each(function(){"login-modal"!==$(this).attr("id")&&$(this).modal("hide")}),i("stop"),$("#login-modal").modal({show:!0,keyboard:!1,backdrop:"static"}),$("#login-modal").on("shown.bs.modal",function(){l()}),o=angular.element(document.getElementById("login-modal")).scope(),o.login_username=null,o.login_password=null,o.loginForm.login_username.$setPristine(),o.loginForm.login_password.$setPristine(),"/logout"===e.path()&&f.logout(),d.userLoggedIn=!1,a.put("userLoggedIn",!1),$("#login-password").bind("keypress",function(a){var b=a.keyCode?a.keyCode:a.which;13===b&&$("#login-button").click()}),o.reset=function(){$("#login-form input").each(function(){$(this).val("")})},o.systemLogin=function(a,b){$(".api-error").empty();var c;k(a)||k(b)?h("Error!","Please provide a username and password before attempting to login.","alert-danger",l):(i("start"),f.retrieveToken(a,b).success(function(a,b){$("#login-modal").modal("hide"),c=a.token,f.setToken(a.token,a.expires),d.sessionTimer=j.init(),f.getUser().success(function(a){f.setUserInfo(a),d.user_is_superuser=a.results[0].is_superuser,f.getLicense().success(function(a){f.setLicense(a.license_info),m()?e.path(m()):e.url("/home?login=true")}).error(function(){i("stop"),h("Error","Failed to access user information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){i("stop"),h("Error","Failed to access license information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){var c,d,e;if(i("stop"),a.non_field_errors&&0===a.non_field_errors.length)for(e in a)o[e+"Error"]=a[e][0];else a.non_field_errors&&a.non_field_errors.length>0?(c="Error",d=a.non_field_errors[0]):(c="Error",d="The login attempt failed with a status of: "+b),o.reset(),h(c,d,"alert-danger",l)}))}}function CredentialsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o("htmlTemplate"),t("start");var v,w=h,x=q("credentials"),y=i,z=c.path().replace(/^\//,"").split("/")[0],A="credentials"===z?"edit":"select",B=y.inject(w,{mode:A});B.selected=[],B.credentialLoading=!0,v=q(z)+("users"===z?e.user_id+"/credentials/":e.team_id+"/credentials/"),r({scope:B,list:w,url:v,returnToCaller:1}),B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b;for(t("stop"),$("#prompt-modal").off(),w.fields.kind.searchOptions=B.credential_kind_options,a=0;a<B.credentials.length;a++)for(b=0;b<B.credential_kind_options.length;b++)if(B.credential_kind_options[b].value===B.credentials[a].kind){B.credentials[a].kind=B.credential_kind_options[b].label;break}}),B.removeChoicesReady&&B.removeChoicesReady(),B.removeChoicesReady=B.$on("choicesReadyCredential",function(){l({scope:B,set:"credentials",list:w,url:x}),m({scope:B,list:w,url:x}),B.search(w.iterator)}),s({scope:B,url:x,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),j(),B.showActivity=function(){u({scope:B})},B.addCredential=function(){c.path(c.path()+"/add")},B.editCredential=function(a){c.path(c.path()+"/"+a)},B.deleteCredential=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){t("start")}),$("#prompt-modal").modal("hide");var b=x+a+"/";f.setUrl(b),f.destroy().success(function(){B.search(w.iterator)}).error(function(a,c){t("stop"),p(B,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function CredentialsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){n("tree-form"),n("htmlTemplate");var A,B=g,C=h,D=C.inject(B,{mode:"add",related:!1}),E=u("credentials");C.reset(),l(),v({scope:D,url:E,field:"kind",variable:"credential_kind_options"}),r({scope:D,form:B,current_item:w(f.user_id)?null:f.user_id,list:s,field:"user"}),r({scope:D,form:B,current_item:w(f.team_id)?null:f.team_id,list:t,field:"team"}),w(f.user_id)?w(f.team_id)?(D.owner="user",y({scope:D})):(D.owner="team",D.team=f.team_id,y({scope:D}),A=u("teams")+f.team_id+"/",i.setUrl(A),i.get().success(function(a){D.team_name=a.name}).error(function(a,b){k(D,a,b,null,{hdr:"Error!",msg:"Failed to retrieve team. GET status: "+b})})):(D.owner="user",D.user=f.user_id,y({scope:D}),A=u("users")+f.user_id+"/",i.setUrl(A),i.get().success(function(a){D.user_username=a.username}).error(function(a,b){k(D,a,b,null,{hdr:"Error!",msg:"Failed to retrieve user. GET status: "+b})})),D.kindChange=function(){x({scope:D,form:B,reset:!0})},D.formSave=function(){C.clearApiErrors(),z({scope:D,mode:"add"})},D.ownerChange=function(){y({scope:D})},D.formReset=function(){C.reset()},D.clearPWConfirm=function(a){D[a]="",D[B.name+"_form"][a].$setValidity("awpassmatch",!1)},D.ask=function(a,b){D[a+"_ask"]?(D[a]="ASK",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0)):(D[a]="",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0))},D.clear=function(a,b){D[a]="",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0),D[B.name+"_form"].$setDirty()}}function CredentialsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){var a,b;for(a in F.fields)"password"===F.fields[a].type&&"ASK"===G[a]?($("#"+a+"-clear-btn").attr("disabled","disabled"),G[a+"_ask"]=!0):(G[a+"_ask"]=!1,$("#"+a+"-clear-btn").removeAttr("disabled")),I[a+"_ask"]=G[a+"_ask"];for(b=0;b<G.credential_kind_options.length;b++)if(G.kind===G.credential_kind_options[b].value){G.kind=G.credential_kind_options[b];break}}p("htmlTemplate");var D=r("credentials"),E=h,F=g,G=E.inject(F,{mode:"edit",related:!0}),H=d.path().replace(/^\//,"").split("/")[0],I={},J=f.credential_id;E.reset(),G.id=J,G.removeCredentialLoaded&&G.removeCredentialLoaded(),G.removeCredentialLoaded=G.$on("credentialLoaded",function(){w({scope:G,form:F,current_item:x(a.user_id)?null:G.user_id,list:u,field:"user"}),w({scope:G,form:F,current_item:x(a.team_id)?null:G.team_id,list:v,field:"team"}),C(),t({scope:G,form:F,reset:!1}),y({scope:G}),B("stop")}),G.removeChoicesReady&&G.removeChoicesReady(),G.removeChoicesReady=G.$on("choicesReadyCredential",function(){i.setUrl(D+":id/"),i.get({params:{id:J}}).success(function(a){var b,c;l({path:"/credentials/"+J,title:a.name});for(c in F.fields)null!==a[c]&&void 0!==a[c]&&(G[c]=a[c],I[c]=G[c]),"lookup"===F.fields[c].type&&a.summary_fields[F.fields[c].sourceModel]&&(G[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]=a.summary_fields[F.fields[c].sourceModel][F.fields[c].sourceField],I[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]=G[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]);for(G.owner=x(G.user)?"team":"user",I.owner=G.owner,b=0;b<G.credential_kind_options.length;b++)if(G.credential_kind_options[b].value===a.kind){G.kind=G.credential_kind_options[b];break}switch(I.kind=G.kind,a.kind){case"aws":G.access_key=a.username,G.secret_key=a.password,I.access_key=G.access_key,I.secret_key=G.secret_key;break;case"ssh":G.ssh_password=a.password,I.ssh_password=G.ssh_password;break;case"rax":G.api_key=a.password,I.api_key=G.api_key}G.$emit("credentialLoaded")}).error(function(a,b){k(G,a,b,F,{hdr:"Error!",msg:"Failed to retrieve Credential: "+f.id+". GET status: "+b})})}),B("start"),s({scope:G,url:D,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),G.showActivity=function(){A({scope:G})},G.formSave=function(){E.clearApiErrors(),z({scope:G,mode:"edit"})},G.ownerChange=function(){y({scope:G})},G.kindChange=function(){t({scope:G,form:F,reset:!0})},G.formReset=function(){E.reset();for(var a in I)G[a]=I[a];C(),t({scope:G,form:F,reset:!1}),y({scope:G})},G.add=function(a){b.flashMessage=null,d.path("/"+H+"/"+f.id+"/"+a+"/add")},G.edit=function(a,c){b.flashMessage=null,d.path("/"+H+"/"+f.id+"/"+a+"/"+c)},G["delete"]=function(a,c,d,e){b.flashMessage=null;var f=function(){var b=D+J+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),G.search(F.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(G,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};q({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+G.name+" "+e+"?",action:f})},G.clearPWConfirm=function(a){G[a]="",G[F.name+"_form"][a].$setValidity("awpassmatch",!1)},G.ask=function(a,b){G[a+"_ask"]?($("#"+a+"-clear-btn").attr("disabled","disabled"),G[a]="ASK",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0)):($("#"+a+"-clear-btn").removeAttr("disabled"),G[a]="",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0))},G.clear=function(a,b){G[a]="",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0),G[F.name+"_form"].$setDirty()}}function Home(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){k("home");var q,r,s,t,u;q={refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},r=p({btn:q.refresh,action:"refresh",toolbar:!0}),r+=p({btn:q.stream,action:"stream",toolbar:!0}),s=angular.element(document.getElementById("home-list-actions")),s.html(r),b(s)(a),t=4,u=0,c.login||f("start"),a.removeWidgetLoaded&&a.removeWidgetLoaded(),a.removeWidgetLoaded=a.$on("WidgetLoaded",function(){u++,u===t&&f("stop")}),a.removeDashboardReady&&a.removeDashboardReady(),a.removeDashboardReady=a.$on("dashboardReady",function(b,c){h({scope:a,target:"container1",dashboard:c}),i({scope:a,target:"container2",dashboard:c}),j({scope:a,target:"container4",dashboard:c}),g({scope:a,target:"container3",dashboard:c})}),a.showActivity=function(){l({scope:a})},a.refresh=function(){f("start"),u=0,m.setUrl(n("dashboard")),m.get().success(function(b){a.$emit("dashboardReady",b)}).error(function(b,c){f("stop"),o(a,b,c,null,{hdr:"Error!",msg:"Failed to get dashboard: "+c})})},a.refresh()}function HomeGroups(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){h("htmlTemplate");var x,y=d,z=c,A=i("groups"),B=y.inject(z,{mode:"edit"});if(B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b,c;for(a=0;a<B.home_groups.length;a++)B.home_groups[a].inventory_name=B.home_groups[a].summary_fields.inventory.name,c=n({status:B.home_groups[a].summary_fields.inventory_source.status}),b=m({active_failures:B.home_groups[a].hosts_with_active_failures,total_hosts:B.home_groups[a].total_hosts,inventory_id:B.home_groups[a].inventory,group_id:B.home_groups[a].id}),B.home_groups[a].status_class=c["class"],B.home_groups[a].status_tooltip=c.tooltip,B.home_groups[a].launch_tooltip=c.launch_tip,B.home_groups[a].launch_class=c.launch_class,B.home_groups[a].hosts_status_tip=b.tooltip,B.home_groups[a].show_failures=b.failures,B.home_groups[a].hosts_status_class=b["class"],B.home_groups[a].status=B.home_groups[a].summary_fields.inventory_source.status,B.home_groups[a].source=B.home_groups[a].summary_fields.inventory_source?B.home_groups[a].summary_fields.inventory_source.source:null}),j({scope:B,set:"home_groups",list:z,url:A}),k({scope:B,list:z,url:A}),b.name&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.name,B[z.iterator+"SearchField"]="name",B[z.iterator+"SearchFieldLabel"]=z.fields.name.label,B[z.iterator+"SearchSelectValue"]=null),b.id&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.id,B[z.iterator+"SearchField"]="id",B[z.iterator+"SearchFieldLabel"]=z.fields.id.label,B[z.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchValue"]=b.has_active_failures,B[z.iterator+"SearchField"]="has_active_failures",B[z.iterator+"SearchFieldLabel"]=z.fields.has_active_failures.label,B[z.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),b.status&&!b.source){B[z.iterator+"SearchField"]="status",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br\>/g," ");for(x in z.fields.status.searchOptions)if(z.fields.status.searchOptions[x].value===b.status){B[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[x];break}}if(b.source){B[z.iterator+"SearchField"]="source",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.source.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.source.label.replace(/<br\>/g," ");for(x in z.fields.source.searchOptions)if(z.fields.source.searchOptions[x].value===b.source){B[z.iterator+"SearchSelectValue"]=z.fields.source.searchOptions[x];break}b.status&&(B[z.iterator+"ExtraParms"]="&inventory_source__status__icontains="+b.status)}b.has_external_source&&(B[z.iterator+"SearchField"]="has_external_source",B[z.iterator+"SearchValue"]=z.fields.has_external_source.searchValue,B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchType"]="in",B[z.iterator+"SearchFieldLabel"]=z.fields.has_external_source.label),B.search(z.iterator),f(),B.showActivity=function(){p({scope:B})},B.editGroup=function(a,b){q({scope:B,group_id:a,inventory_id:b,groups_reload:!1})},B.viewUpdateStatus=function(a){B.groups=B.home_groups,o({scope:B,tree_id:a})},B.updateGroup=function(a){var b=w({list:B.home_groups,key:"id",val:a});b&&(u(b.source)||("updating"===b.status?s("Update in Progress","The inventory update process is currently running for group <em>"+b.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(r("start"),t.setUrl(b.related.inventory_source),t.get().success(function(a){v({scope:B,url:a.related.update,group_name:a.summary_fields.group.name,group_source:a.source,tree_id:b.id,group_id:b.id})}).error(function(a,c){e(B,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+b.related.inventory_source+" POST returned status: "+c})}))))},B.refresh=function(){B.search(z.iterator,null,!1,!0)}}function HomeHosts(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){h("htmlTemplate");var s=d,t=c,u=i("hosts"),v=s.inject(t,{mode:"edit"});v.removePostRefresh&&v.removePostRefresh(),v.removePostRefresh=v.$on("PostRefresh",function(){for(var a=0;a<v.hosts.length;a++)v.hosts[a].inventory_name=v.hosts[a].summary_fields.inventory.name,m({scope:v,host:v.hosts[a]})}),j({scope:v,set:"hosts",list:t,url:u}),k({scope:v,list:t,url:u}),b.name&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.name,v[c.iterator+"SearchField"]="name",v[c.iterator+"SearchFieldLabel"]=t.fields.name.label),b.id&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.id,v[c.iterator+"SearchField"]="id",v[c.iterator+"SearchFieldLabel"]=t.fields.id.label,v[c.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(v[c.iterator+"InputDisable"]=!0,v[c.iterator+"SearchValue"]=b.has_active_failures,v[c.iterator+"SearchField"]="has_active_failures",v[c.iterator+"SearchFieldLabel"]=c.fields.has_active_failures.label,v[c.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),v.search(t.iterator),f(),v.showActivity=function(){p({scope:v})},v.toggle_host_enabled=function(a,b){n({host_id:a,external_source:b,scope:v})},v.editHost=function(a){var b=q({list:v.hosts,key:"id",val:a});b&&o({scope:v,host_id:a,inventory_id:b.inventory,group_id:null,hostsReload:!1})},v.showJobSummary=function(a){r({job_id:a})}}function InventoriesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=q("inventory"),w=i,x=c.path().replace(/^\//,"").split("/"),y="inventories"===x[0]?"edit":"select",z=w.inject(h,{mode:y});b.flashMessage=null,l({scope:z,set:"inventories",list:u,url:v}),m({scope:z,list:u,url:v}),e.name&&(z[h.iterator+"InputDisable"]=!1,z[h.iterator+"SearchValue"]=e.name,z[h.iterator+"SearchField"]="name",z[h.iterator+"SearchFieldLabel"]=h.fields.name.label,z[h.iterator+"SearchSelectValue"]=null),e.has_active_failures&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.has_active_failures,z[h.iterator+"SearchField"]="has_active_failures",z[h.iterator+"SearchFieldLabel"]=h.fields.has_active_failures.label,z[h.iterator+"SearchSelectValue"]="true"===e.has_active_failures?{value:1}:{value:0}),e.has_inventory_sources&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.has_inventory_sources,z[h.iterator+"SearchField"]="has_inventory_sources",z[h.iterator+"SearchFieldLabel"]=h.fields.has_inventory_sources.label,z[h.iterator+"SearchSelectValue"]="true"===e.has_inventory_sources?{value:1}:{value:0}),e.inventory_sources_with_failures&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.inventory_sources_with_failures,z[h.iterator+"SearchField"]="inventory_sources_with_failures",z[h.iterator+"SearchFieldLabel"]=h.fields.inventory_sources_with_failures.label,z[h.iterator+"SearchType"]="gtzero"),z.search(u.iterator),j(),z.removePostRefresh&&z.removePostRefresh(),z.removePostRefresh=z.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off();for(var a=0;a<z.inventories.length;a++)z.inventories[a].hosts_with_active_failures>0?(z.inventories[a].failed_hosts_tip=z.inventories[a].hosts_with_active_failures+(1===z.inventories[a].hosts_with_active_failures?" host":" hosts")+" with job failures. Click to view details.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="true"):0===z.inventories[a].total_hosts?(z.inventories[a].failed_hosts_tip="No hosts defined. Click to add.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="na"):(z.inventories[a].failed_hosts_tip=z.inventories[a].total_hosts+(z.inventories[a].total_hosts>1?" hosts":" host")+" with no job failures. Click to view details.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="false"),z.inventories[a].status=z.inventories[a].inventory_sources_with_failures+" / "+z.inventories[a].total_inventory_sources,z.inventories[a].inventory_sources_with_failures>0?(z.inventories[a].status_tip=z.inventories[a].inventory_sources_with_failures+" cloud "+(1===z.inventories[a].inventory_sources_with_failures?"source":"sources")+" with failures. Click to view details.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="failed"):0===z.inventories[a].total_inventory_sources?(z.inventories[a].status_tip="Not synced with a cloud source. Click to edit.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="na"):(z.inventories[a].status_tip=z.inventories[a].total_inventory_sources+" cloud "+(z.inventories[a].total_inventory_sources>1?"sources":"source")+" with no failures. Click to view details.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="successful")
}),z.removeRefreshInventories&&z.removeRefreshInventories(),z.removeRefreshInventories=z.$on("RefreshInventories",function(){z.search(u.iterator)}),z.showActivity=function(){s({scope:z})},z.editInventoryProperties=function(a){t({scope:z,inventory_id:a})},z.addInventory=function(){c.path(c.path()+"/add")},z.editInventory=function(a){c.path(c.path()+"/"+a)},z.deleteInventory=function(a,b){var c=function(){var b=v+a+"/";$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide"),f.setUrl(b),f.destroy().success(function(){z.search(u.iterator)}).error(function(a,c){r("stop"),p(z,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},z.lookupOrganization=function(a){f.setUrl(q("organizations")+a+"/"),f.get().success(function(a){return a.name})},z.viewJobs=function(a){c.url("/jobs/?inventory__int="+a)},z.viewFailedJobs=function(a){c.url("/jobs/?inventory__int="+a+"&status=failed")}}function InventoriesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n("htmlTemplate");var w,x=t("inventory"),y=g,z=h;y.well=!0,y.formLabelSize=null,y.formFieldSize=null,w=z.inject(y,{mode:"add",related:!1}),w.inventoryParseType="yaml",z.reset(),l(),u(w,"inventory_variables","inventoryParseType"),s({scope:w,form:y,current_item:f.organization_id?f.organization_id:null,list:p,field:"organization"}),w.formSave=function(){z.clearApiErrors(),v("start");try{var a,b,c;if(b="json"===w.inventoryParseType?JSON.parse(w.inventory_variables):jsyaml.load(w.inventory_variables),"object"!=typeof b)throw"failed to return an object!";c={};for(a in y.fields)"inventory_variables"!==a&&(y.fields[a].realName?c[y.fields[a].realName]=w[a]:c[a]=w[a]);i.setUrl(x),i.post(c).success(function(a){var c=a.id;w.inventory_variables?(i.setUrl(a.related.variable_data),i.put(b).success(function(){v("stop"),d.path("/inventories/"+c+"/")}).error(function(a,b){v("stop"),k(w,a,b,null,{hdr:"Error!",msg:"Failed to add inventory varaibles. PUT returned status: "+b})})):(v("stop"),d.path("/inventories/"+c+"/"))}).error(function(a,b){v("stop"),k(w,a,b,y,{hdr:"Error!",msg:"Failed to add new inventory. Post returned status: "+b})})}catch(e){v("stop"),j("Error","Error parsing inventory variables. Parser returned: "+e)}},w.formReset=function(){z.reset()}}function InventoriesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){f("htmlTemplate");var Q=e,R=g;a.inventory_id=c.inventory_id,r({path:b.path(),title:"{{ inventory_name }}"}),a.removeGroupTreeLoaded&&a.removeGroupTreeLoaded(),a.removeGroupTreeLoaded=a.$on("GroupTreeLoaded",function(b,c,e){var f,g;f=angular.element(document.getElementById("breadcrumbs")),f.html(q({list:R,mode:"edit"})),d(f)(a),Q.inject(R,{mode:"edit",id:"groups-container",breadCrumbs:!1,searchSize:"col-lg-5 col-md-5 col-sm-5"}),a.groups=e,a.inventory_name=c,a.groups.length>0?(a.selected_tree_id=a.groups[0].id,a.selected_group_id=a.groups[0].group_id,a.groups[0].selected_class="selected",a.groups[0].active_class="active-row",a.selected_group_name=a.groups[0].name):(a.selected_tree_id=null,a.selected_group_id=null),a.show_failures=!1,l({scope:a,inventory_id:a.inventory_id,tree_id:a.selected_tree_id,group_id:a.selected_group_id}),setTimeout(function(){$("#groups_table .name-column").each(function(){var a,b,c,d,e;a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%",$(this).find(".group-name").css({width:e})}),L("#groups_table .group-name a"),L("#hosts_table .host-name a")},2500),M(),g=P("inventoryAutoHelp"),"off"!==g&&a.autoShowGroupHelp&&a.showGroupHelp({autoShow:!0})}),a.removeGroupTreeRefreshed&&a.removeGroupTreeRefreshed(),a.removeGroupTreeRefreshed=a.$on("GroupTreeRefreshed",function(){setTimeout(function(){L("#groups_table .group-name a")},2500),a.showHosts(a.selected_tree_id,a.selected_group_id,!1)}),a.removeGroupDeleteCompleted&&a.removeGroupDeleteCompleted(),a.removeGroupDeleteCompleted=a.$on("GroupDeleteCompleted",function(){a.selected_tree_id=1,a.selected_group_id=null,i({scope:a,inventory_id:a.inventory_id,refresh:!0})}),a.removeCopMoveGroup&&a.removeCopyMoveGroup(),a.removeCopyMoveGroup=a.$on("CopyMoveGroup",function(b,c,d){G({scope:a,target_tree_id:d,inbound_tree_id:c})}),a.removeCopMoveHost&&a.removeCopyMoveHost(),a.removeCopyMoveHost=a.$on("CopyMoveHost",function(b,c,d){H({scope:a,target_tree_id:c,host_id:d})}),a.showHosts=function(b,c,d){if(null!==b){j("start"),a.selected_tree_id=b,a.selected_group_id=c,a.hosts=[],a.show_failures=d;for(var e=0;e<a.groups.length;e++)a.groups[e].id===b?(a.groups[e].selected_class="selected",a.groups[e].active_class="active-row",a.selected_group_name=a.groups[e].name):(a.groups[e].selected_class="",a.groups[e].active_class="");m({scope:a,group_id:c,tree_id:b,inventory_id:a.inventory_id})}else j("stop")},a.createGroup=function(){n({scope:a,inventory_id:a.inventory_id,group_id:a.selected_group_id})},a.editGroup=function(b,c){o({scope:a,inventory_id:a.inventory_id,group_id:b,tree_id:c,groups_reload:!0})},a.updateGroup=function(b){var c=A({list:a.groups,key:"id",val:b});c&&(s(c.source)||("updating"===c.status?w("Update in Progress","The inventory update process is currently running for group <em>"+c.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(j("start"),t.setUrl(c.related.inventory_source),t.get().success(function(b){v({scope:a,url:b.related.update,group_name:b.summary_fields.group.name,group_source:b.source,tree_id:c.id,group_id:c.group_id})}).error(function(b,d){j("stop"),u(a,b,d,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+c.related.inventory_source+" POST returned status: "+d})}))))},a.cancelUpdate=function(b){z({scope:a,tree_id:b})},a.toggle=function(b){x({scope:a,list:R,id:b})},a.refreshGroups=function(b,c){b&&(a.selected_tree_id=b,a.selected_group_id=c),i({scope:a,inventory_id:a.inventory_id,refresh:!0})},a.viewUpdateStatus=function(b,c){y({scope:a,tree_id:b,group_id:c})},a.deleteGroup=function(b,c){p({scope:a,tree_id:b,group_id:c,inventory_id:a.inventory_id})},a.createHost=function(){B({scope:a})},a.editInventoryProperties=function(){C({scope:a,inventory_id:a.inventory_id})},a.editHost=function(b){D({scope:a,host_id:b,inventory_id:a.inventory_id})},a.deleteHost=function(b,c){E({scope:a,host_id:b,host_name:c})},a.toggleHostEnabled=function(b,c){F({scope:a,host_id:b,external_source:c})},a.showGroupActivity=function(){var b,c,d;a.selected_group_id?(d=A({list:a.groups,key:"id",val:a.selected_tree_id}),b=J("activity_stream")+"?group__id="+a.selected_group_id,c="Showing all activities for group "+d.name):(c="Showing all activities for all "+a.inventory_name+" groups",b=J("activity_stream")+"?group__inventory__id="+a.inventory_id),I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showHostActivity=function(){var b,c;c="Showing all activities for all "+a.inventory_name+" hosts",b=J("activity_stream")+"?host__inventory__id="+a.inventory_id,I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showJobSummary=function(a){K({job_id:a})},a.showGroupHelp=function(a){var b={defn:O};a&&(b.autoShow=a.autoShow||!1),N(b)},i({scope:a,inventory_id:a.inventory_id,refresh:!1})}function JobEventsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(a){var b,c,d,e,f,g="",h=!1;if(a.res){if("string"==typeof a.res)c=a.res.match(/\n/g),d=c?c.length:1,d=d>10?10:d,h=!0,g+='<div class="form-group">\n',g+="<label>Traceback:</label>\n",g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res+"</textarea>\n",g+="</div>\n";else for(e in a.res){if(("msg"===e||"stdout"===e||"stderr"===e)&&null!==a.res[e]&&""!==a.res[e]){switch(g+='<div class="form-group">\n',g+="<label>",e){case"msg":case"stdout":g+="Output:";break;case"stderr":g+="Error:"}g+="</label>\n",c=a.res[e].match(/\n/g),d=c?c.length:1,d=d>10?10:d,g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res[e]+"</textarea>\n",g+="</div>\n",h=!0}if("results"===e&&Array.isArray(a.res[e])&&a.res[e].length>0){for(f="",b=0;b<a.res[e].length;b++)f+=a.res[e][b];c=f.match(/\n/g),d=c?c.length:1,d=d>10?10:d,""!==f&&(g+='<div class="form-group">\n',g+="<label>Results:</label>\n",g+='<textarea readonly class="form-control nowrap mono-space" rows="'+d+'">'+f+"</textarea>\n",g+="</div>\n",h=!0)}"rc"===e&&""!==a.res[e]&&(g+='<div class="form-group">\n',g+="<label>Return Code:</label>\n",g+='<input type="text" class="form-control nowrap mono-space" value="'+a.res[e]+'" readonly >\n',g+="</div>\n",h=!0)}g=h?'<form class="event-form">\n'+g+"</form>\n":""}return g=a.hosts?'<span class="event-detail-host visible-sm">'+a.host+"</span>\n"+g:""===g?null:g}p("htmlTemplate");var z,A=i,B=r("jobs")+f.id+"/job_events/",C=j,D=C.inject(A,{mode:"edit"});A.base=d.path(),D.job_id=f.id,c.flashMessage=null,D.selected=[],D.expand=!0,D.parentNode="parent-event",D.childNode="child-event",D.removeSetHostLinks&&D.removeSetHostLinks(),D.removeSetHostLinks=D.$on("SetHostLinks",function(a,b){for(var c=0;c<D.jobevents.length;c++)D.jobevents[c].summary_fields.host&&(D.jobevents[c].hostLink="/#/inventories/"+b+"/hosts/?name="+encodeURI(D.jobevents[c].summary_fields.host.name))}),D.removePostRefresh&&D.removePostRefresh(),D.removePostRefresh=D.$on("PostRefresh",function(){var b,c=D[A.name];for(b=0;b<c.length;b++)c[b].event_display=c[b].event_display.replace(/^\u00a0*/g,""),c[b].event_level<3?(c[b].ngclick="toggleChildren("+c[b].id+', "'+c[b].related.children+'")',c[b].ngicon="fa fa-minus-square-o node-toggle",c[b]["class"]="parentNode"):(c[b].ngicon="fa fa-square-o node-no-toggle",c[b]["class"]="childNode",c[b].event_detail=y(c[b].event_data)),c[b].show=!0,c[b].spaces=24*c[b].event_level,D.jobevents[b].failed?(D.jobevents[b].status="error",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"A failure occurred durring one or more playbook tasks.":c[b].event_level<3?"A failure occurred within the children of this event.":"A failure occurred. Click to view details"):D.jobevents[b].changed?(D.jobevents[b].status="changed",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"A change was completed durring one or more playbook tasks.":c[b].event_level<3?"A change was completed by one or more children of this event.":"A change was completed. Click to view details"):(D.jobevents[b].status="success",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"All playbook tasks completed successfully.":c[b].event_level<3?"All the children of this event completed successfully.":"No errors occurred. Click to view details"),c[b].created=a("date")(c[b].created,"MM/dd HH:mm:ss");g.setUrl(r("jobs")+D.job_id),g.get().success(function(a){D.job_status=a.status,D.job_name=a.summary_fields.job_template.name,k({path:"/jobs/"+D.job_id,title:D.job_id+" - "+a.summary_fields.job_template.name}),D.$emit("SetHostLinks",a.inventory)}).error(function(a,b){q(D,a,b,null,{hdr:"Error!",msg:"Failed to get job status for job: "+D.job_id+". GET status: "+b})})}),m({scope:D,set:"jobevents",list:A,url:B}),z=f.page?parseInt(f.page,10)-1:null,n({scope:D,list:A,url:B,page:z}),f.host&&(D[A.iterator+"SearchField"]="host",D[A.iterator+"SearchValue"]=f.host,D[A.iterator+"SearchFieldLabel"]=A.fields.host.label),D.search(A.iterator,f.page),D.toggleChildren=function(a,b){t({scope:D,list:A,id:a,children:b})},D.viewJobEvent=function(a){v({event_id:a})},D.refresh=function(){D.jobSearchSpin=!0,D.jobLoading=!0,x("start"),w({scope:D,set:"jobevents",iterator:"jobevent",url:D.current_url})}}function JobEventsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){m("htmlTemplate");var r=g,s=h,t=h.inject(r,{mode:"edit",related:!0}),u=n("base")+"job_events/"+f.event_id+"/";s.reset(),q("start"),i.setUrl(u),i.get().success(function(a){var b,c,d,e;t.event_display=a.event_display.replace(/^\u00a0*/g,""),l({path:"/jobs/"+f.job_id+"/job_events/"+f.event_id,title:t.event_display});for(c in r.fields)switch(c){case"status":t.status=a.failed?"error":a.changed?"changed":"success";break;case"created":b=new Date(a.created),t.created=o(b);break;case"host":a.summary_fields&&a.summary_fields.host&&(t.host=a.summary_fields.host.name);break;case"id":case"task":case"play":t[c]=a[c];break;case"start":case"end":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[c]&&(b=new Date(a.event_data.res[c]),t[c]=o(b));break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[c]&&(t[c]=a.event_data.res[c],"textarea"===r.fields[c].type&&(d=a.event_data.res[c].match(/\n/g),e=d?d.length:1,e=e>15?5:e,$('textarea[name="'+c+'"]').attr("rows",e)));break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(t[c]=a.event_data.res.invocation.fld)}q("stop")}).error(function(a){k(t,a,status,null,{hdr:"Error!",msg:"Failed to retrieve host: "+f.event_id+". GET status: "+status})}),t.navigateBack=function(){var a="/jobs/"+f.job_id+"/job_events";f.page&&(a+="?page="+f.page),d.url(a)},t.rawView=function(){p({event_id:t.id})}}function JobHostSummaryList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=c.path().replace(/^\//,"").split("/")[0],w=q(v)+e.id+"/job_host_summaries/",x=i,y=x.inject(u,{mode:"edit"});u.index="hosts"===v?!1:!0,y.selected=[],"hosts"===v?(y.job_id=null,y.host_id=e.id):(y.job_id=e.id,y.host_id=null),y.RemoveSetHostLink&&y.RemoveSetHostLink(),y.RemoveSetHostLink=y.$on("setHostLink",function(a,b){for(var c=0;c<y.jobhosts.length;c++)y.jobhosts[c].hostLinkTo="/#/inventories/"+b+"/?host_name="+encodeURI(y.jobhosts[c].summary_fields.host.name)}),y.removePostRefresh&&y.removePostRefresh(),y.removePostRefresh=y.$on("PostRefresh",function(){for(var a=0;a<y.jobhosts.length;a++)y.jobhosts[a].host_name=y.jobhosts[a].summary_fields.host.name,y.jobhosts[a].status=y.jobhosts[a].failed?"failed":"success",y.jobhosts[a].statusBadgeToolTip=s(y.jobhosts[a].status)+" Click to view details.",y.jobhosts[a].statusLinkTo="/#/jobs/"+y.jobhosts[a].job+"/job_events/?host="+encodeURI(y.jobhosts[a].summary_fields.host.name);null!==y.job_id&&void 0!==y.job_id&&""!==y.job_id?(f.setUrl(q("jobs")+y.job_id),f.get().success(function(a){j({path:"/jobs/"+a.id,title:a.id+" - "+a.summary_fields.job_template.name}),y.job_status=a.status,"pending"!==a.status&&"waiting"!==a.status&&"running"!==a.status&&b.timer&&clearInterval(b.timer),y.$emit("setHostLink",a.inventory)}).error(function(a,b){p(y,a,b,null,{hdr:"Error!",msg:"Failed to get job status for job: "+y.job_id+". GET status: "+b})})):(j({path:"/hosts/"+y.host_id,title:y.jobhosts.length>0?y.jobhosts[0].summary_fields.host.name:"Host"}),e.inventory&&y.$emit("setHostLink",e.inventory))}),l({scope:y,set:"jobhosts",list:u,url:w}),m({scope:y,list:u,url:w}),e.host_name&&(y[u.iterator+"SearchField"]="host",y[u.iterator+"SearchValue"]=e.host_name,y[u.iterator+"SearchFieldLabel"]=u.fields.host.label),y.search(u.iterator),y.showEvents=function(a,b){f.setUrl(b),f.get().success(function(b){j({path:"/jobs/"+b.id,title:b.name}),c.url("/jobs/"+b.id+"/job_events/?host="+encodeURI(a))}).error(function(a,c){p(y,a,c,null,{hdr:"Error!",msg:"Failed to lookup last job: "+b+". GET status: "+c})})},y.showJob=function(a){c.path("/jobs/"+a)},y.refresh=function(){null===y.host_id&&(y.jobSearchSpin=!0,y.jobLoading=!0,t("start"),r({scope:y,set:"jobhosts",iterator:"jobhost",url:y.current_url}))}}function JobTemplatesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o("htmlTemplate");var y=h,z=q("job_templates"),A=i,B=c.path().replace(/^\//,"").split("/")[0],C="job_templates"===B?"edit":"select",D=A.inject(y,{mode:C});b.flashMessage=null,D.removePostRefresh&&D.removePostRefresh(),D.removePostRefresh=D.$on("PostRefresh",function(){w("stop"),$("#prompt-modal").off()}),l({scope:D,set:"job_templates",list:y,url:z}),m({scope:D,list:y,url:z}),e.name&&(D[y.iterator+"SearchField"]="name",D[y.iterator+"SearchValue"]=e.name,D[y.iterator+"SearchFieldLabel"]=y.fields.name.label),D.search(y.iterator),j(),D.showActivity=function(){x({scope:D})},D.addJobTemplate=function(){c.path(c.path()+"/add")},D.editJobTemplate=function(a){c.path(c.path()+"/"+a)},D.deleteJobTemplate=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var b=z+a+"/";f.setUrl(b),f.destroy().success(function(){D.search(y.iterator)}).error(function(a){w("stop"),p(D,a,status,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+status})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},D.submitJob=function(a){v({scope:D,id:a})}}function JobTemplatesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){n("htmlTemplate");var x,y,z=o("job_templates"),A=g,B=h,C=B.inject(A,{mode:"add",related:!1}),D={},E={};C.parseType="yaml",u(C),C.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],C.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],C.playbook_options=[],C.allow_callbacks="false",B.reset(),l(),t({scope:C,master:D,check_field:"allow_callbacks",default_val:!1}),s({scope:C,form:A,current_item:null,list:p,field:"inventory"}),jQuery.extend(!0,E,q),E.name="cloudcredentials",E.iterator="cloudcredential",s({url:o("credentials")+"?cloud=true",scope:C,form:A,current_item:null,list:E,field:"cloud_credential",hdr:"Select Cloud Credential"}),s({url:o("credentials")+"?kind=ssh",scope:C,form:A,current_item:null,list:q,field:"credential",hdr:"Select Machine Credential"}),x=function(a,b){var c;a!==b&&C.project&&(v("start"),c=o("projects")+C.project+"/playbooks/",i.setUrl(c),i.get().success(function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(a[b]);C.playbook_options=c,v("stop")}).error(function(a,b){k(C,a,b,A,{hdr:"Error!",msg:"Failed to get playbook list for "+c+". GET returned status: "+b})}))},y=function(a,b){a===b||w(C.project)||(i.setUrl(o("projects")+C.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}b&&j("Waning",b,"alert-info")}).error(function(a,b){k(C,a,b,A,{hdr:"Error!",msg:"Failed to get project "+C.project+". GET returned status: "+b})}))},C.selectPlaybookUnregister&&C.selectPlaybookUnregister(),C.selectPlaybookUnregister=C.$watch("project_name",function(a,b){x(a,b),y(a,b)}),s({scope:C,form:A,current_item:null,list:r,field:"project"}),C.formSave=function(){B.clearApiErrors(),v("start");var a,b,c={};try{if(a="json"===C.parseType?JSON.parse(C.variables):jsyaml.load(C.variables),"object"!=typeof a)throw"failed to return an object!";for(b in A.fields)"select"===A.fields[b].type&&"playbook"!==b?c[b]=C[b].value:"variables"!==b&&(c[b]=C[b]);c.extra_vars=JSON.stringify(a,void 0,"	"),w(c.extra_vars)&&(c.extra_vars=""),i.setUrl(z),i.post(c).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&m(),m(1)}).error(function(a,b){v("stop"),k(C,a,b,A,{hdr:"Error!",msg:"Failed to add new job template. POST returned status: "+b})})}catch(e){v("stop"),j("Error","Error parsing extra variables. Parser returned: "+e)}},C.formReset=function(){B.reset();for(var a in D)C[a]=D[a]}}function JobTemplatesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){p("htmlTemplate");var E,F,G=v("job_templates"),H=h,I=g,J=H.inject(I,{mode:"edit",related:!0}),K=0,L=d.path().replace(/^\//,"").split("/")[0],M={},N=f.id,O={};J.parseType="yaml",x(J),J.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],J.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],J.playbook_options=null,J.playbook=null,H.reset(),F=function(a){var b;C(a)||(b=v("projects")+a+"/playbooks/",A("start"),i.setUrl(b),i.get().success(function(a){var b;for(J.playbook_options=[],b=0;b<a.length;b++)J.playbook_options.push(a[b]),a[b]===J.playbook&&J.job_templates_form.playbook.$setValidity("required",!0);J.playbook?J.$emit("jobTemplateLoadFinished"):A("stop")}).error(function(){A("stop"),j("Missing Playbooks","Unable to retrieve the list of playbooks for this project. Choose a different  project or make the playbooks available on the file system.","alert-info")}))},E=function(){C(J.project)||(A("start"),i.setUrl(v("projects")+J.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}A("stop"),b&&j("Waning",b,"alert-info")}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to get project "+J.project+". GET returned status: "+b})}))},J.watchProjectUnregister&&J.watchProjectUnregister(),J.watchProjectUnregister=J.$watch("project_name",function(a,b){a!==b&&""!==b&&null!==b&&void 0!==b&&(J.playbook=null,F(J.project),E())}),J.removeJobTemplateLoadFinished&&J.removeJobTemplateLoadFinished(),J.removeJobTemplateLoadFinished=J.$on("jobTemplateLoadFinished",function(){if(K++,K>=2)for(var a in O)J.search(O[a].iterator)}),J.removeRelatedJobs&&J.removeRelatedJobs(),J.removeRelatedJobs=J.$on("relatedjobs",function(){var a,b;if(J.jobs&&J.jobs.length)for(a=0;a<J.jobs.length;a++)b=new Date(J.jobs[a].created),J.jobs[a].created=z(b),J.jobs[a].statusBadgeToolTip=y(J.jobs[a].status)+" Click to view status details.",J.jobs[a].statusLinkTo="/#/jobs/"+J.jobs[a].id}),J.cloudCredentialReadyRemove&&J.cloudCredentialReadyRemove(),J.cloudCredentialReadyRemove=J.$on("cloudCredentialReady",function(a,b){var c={};J.cloud_credential_name=b,M.cloud_credential_name=b,jQuery.extend(!0,c,r),c.name="cloudcredentials",c.iterator="cloudcredential",t({url:v("credentials")+"?cloud=true",scope:J,form:I,current_item:J.cloud_credential,list:c,field:"cloud_credential",hdr:"Select Cloud Credential"}),J.$emit("jobTemplateLoadFinished")}),J.jobTemplateLoadedRemove&&J.jobTemplateLoadedRemove(),J.jobTemplateLoadedRemove=J.$on("jobTemplateLoaded",function(a,b){var c;F(J.project),c=""===J.host_config_key||null===J.host_config_key?"false":"true",w({scope:J,master:M,check_field:"allow_callbacks",default_val:c}),b?(i.setUrl(b),i.get().success(function(a){J.$emit("cloudCredentialReady",a.name)}).error(function(a,b){k(J,a,b,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+b})})):J.$emit("cloudCredentialReady",null)}),A("start"),i.setUrl(G+":id/"),i.get({params:{id:N}}).success(function(a){var b,c,d,e,f;l({path:"/job_templates/"+N,title:a.name});for(b in I.fields){if("variables"!==b&&null!==a[b]&&void 0!==a[b]){if("select"===I.fields[b].type)if(J[b+"_options"]&&J[b+"_options"].length>0)for(c=0;c<J[b+"_options"].length;c++)a[b]===J[b+"_options"][c].value&&(J[b]=J[b+"_options"][c]);else J[b]=a[b];else J[b]=a[b];M[b]=J[b]}"variables"===b&&($.isEmptyObject(a.extra_vars)||"{}"===a.extra_vars||"null"===a.extra_vars||""===a.extra_vars||null===a.extra_vars?J.variables="---":(d=JSON.parse(a.extra_vars),J.variables=jsyaml.safeDump(d)),M.variables=J.variables),"lookup"===I.fields[b].type&&a.summary_fields[I.fields[b].sourceModel]&&(J[I.fields[b].sourceModel+"_"+I.fields[b].sourceField]=a.summary_fields[I.fields[b].sourceModel][I.fields[b].sourceField],M[I.fields[b].sourceModel+"_"+I.fields[b].sourceField]=J[I.fields[b].sourceModel+"_"+I.fields[b].sourceField])}J.url=a.url,e=a.related;for(f in I.related)e[f]&&(O[f]={url:e[f],iterator:I.related[f].iterator});J.callback_url=a.related.callback,M.callback_url=J.callback_url,t({scope:J,form:I,current_item:a.inventory,list:q,field:"inventory"}),t({url:v("credentials")+"?kind=ssh",scope:J,form:I,current_item:a.credential,list:r,field:"credential",hdr:"Select Machine Credential"}),t({scope:J,form:I,current_item:a.project,list:s,field:"project"}),m({scope:J,form:I,relatedSets:O}),n({scope:J,relatedSets:O}),J.$emit("jobTemplateLoaded",a.related.cloud_credential)}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to retrieve job template: "+f.id+". GET status: "+b})}),J.formSave=function(){H.clearApiErrors(),A("start");var a,b,c={};try{if(a="json"===J.parseType?JSON.parse(J.variables):jsyaml.load(J.variables),"object"!=typeof a)throw"failed to return an object!";for(b in I.fields)"select"===I.fields[b].type&&"playbook"!==b?c[b]=J[b].value:"variables"!==b&&"callback_url"!==b&&(c[b]=J[b]);c.extra_vars=JSON.stringify(a,void 0,"	"),("null"===c.extra_vars||null===c.extra_vars)&&(c.extra_vars=""),i.setUrl(G+N+"/"),i.put(c).success(function(){A("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&o(),o(1)}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to update job template. PUT returned status: "+b})})}catch(e){A("stop"),j("Error","Error parsing extra variables. Parser returned: "+e)}},J.showActivity=function(){B({scope:J})},J.formReset=function(){H.reset();for(var a in M)J[a]=M[a];J.parseType="yaml",$("#forks-slider").slider("option","value",J.forks)},J.add=function(a){b.flashMessage=null,d.path("/"+L+"/"+f.id+"/"+a)},J.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},J["delete"]=function(a,c,d,e){b.flashMessage=null;var f=function(){var b=G+N+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),J.search(I.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(J,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};D({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+J.name+" "+e+"?",action:f})}}function JobsListCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o("htmlTemplate");var y,z=h,A=q("jobs"),B=i,C=B.inject(z,{mode:"edit"});if(b.flashMessage=null,C.selected=[],C.removePostRefresh&&C.removePostRefresh(),C.removePostRefresh=C.$on("PostRefresh",function(){var a,b;if($("tr.success").each(function(){var a=$(this).attr("ng-class");C[a]=""}),C.jobs&&C.jobs.length)for(a=0;a<C.jobs.length;a++)b=new Date(C.jobs[a].created),C.jobs[a].created=t(b),C.jobs[a].statusBadgeToolTip=v(C.jobs[a].status)+" Click to view status details.",C.jobs[a].statusLinkTo="/#/jobs/"+C.jobs[a].id}),e.job_host_summaries__host?A+="?job_host_summaries__host="+e.job_host_summaries__host:e.inventory__int&&e.status&&(A+="?inventory__int="+e.inventory__int+"&status="+e.status),l({scope:C,set:"jobs",list:z,url:A}),m({scope:C,list:z,url:A}),e.inventory__int&&(C[z.iterator+"SearchField"]="inventory",C[z.iterator+"SearchValue"]=e.inventory__int,C[z.iterator+"SearchFieldLabel"]="Inventory ID"),e.id__int&&(C[z.iterator+"SearchField"]="id",C[z.iterator+"SearchValue"]=e.id__int,C[z.iterator+"SearchFieldLabel"]="Job ID"),e.status){C[z.iterator+"SearchField"]="status",C[z.iterator+"SelectShow"]=!0,C[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,C[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br>/g," ");for(y in z.fields.status.searchOptions)if(z.fields.status.searchOptions[y].value===e.status){C[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[y];break}}C.search(z.iterator),j(),C.refresh=function(){x("start"),C.jobLoading=!1,u({scope:C,set:"jobs",iterator:"job",url:C.current_url})},C.refreshJob=C.refresh,C.editJob=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a)},C.viewEvents=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_events")},C.viewSummary=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_host_summaries")},C.deleteJob=function(a){f.setUrl(A+a+"/"),f.get().success(function(b){var c,d,e,g;"pending"===b.status||"running"===b.status||"waiting"===b.status?(d=b.related.cancel,e="cancel",g="Cancel Job"):(d=A+a+"/",e="delete",g="Delete Job"),c=function(){f.setUrl(d),"cancel"===e?f.post().success(function(){$("#prompt-modal").modal("hide"),C.search(z.iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),p(C,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. POST returned status: "+b})}):f.destroy().success(function(){$("#prompt-modal").modal("hide"),C.search(z.iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),p(C,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. DELETE returned status: "+b})})},k({hdr:g,body:"Are you sure you want to "+e+" job "+a+"?",action:c})}).error(function(a,b){p(C,a,b,null,{hdr:"Error!",msg:"Failed to get job details. GET returned status: "+b})})},C.submitJob=function(a,b){s({scope:C,id:a,template:b})}}function JobsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(a){if(null!==a&&""!==a&&void 0!==a){var b=v("projects")+a+"/playbooks/";i.setUrl(b),i.get().success(function(a){F.playbook_options=[];for(var b=0;b<a.length;b++)F.playbook_options.push(a[b]);F.$emit("jobTemplateLoadFinished")}).error(function(){F.$emit("jobTemplateLoadFinished")})}else F.$emit("jobTemplateLoadFinished")}function B(a){var b=a.match(/\n/g),c=b?b.length:1;return c>15?15:c}p("htmlTemplate");var C=v("jobs"),D=h,E=g,F=D.inject(E,{mode:"edit",related:!0}),G={},H=f.id,I={},J=0;D.reset(),F.job_id=H,F.parseType="yaml",F.statusSearchSpin=!1,F.jobLoadedRemove&&F.jobLoadedRemove(),F.jobLoadedRemove=F.$on("jobLoaded",function(a,b){A(F.project),F[E.name+"ReadOnly"]="new"===F.status?!1:!0,$("#forks-slider").slider("option","value",F.forks),$("#forks-slider").slider("disable"),$('input[type="checkbox"]').attr("disabled","disabled"),$('input[type="radio"]').attr("disabled","disabled"),$("#host_config_key-gen-btn").attr("disabled","disabled"),$("textarea").attr("readonly","readonly"),i.setUrl(F.template_url),i.get().success(function(a){var b=a.host_config_key?"true":"false";F.host_config_key=a.host_config_key,w({scope:F,master:G,check_field:"allow_callbacks",default_val:b}),F.callback_url=a.related?a.related.callback:"<< Job template not found >>",F.$emit("jobTemplateLoadFinished")}).error(function(){z("stop"),F.callback_url="<< Job template not found >>"}),b?(i.setUrl(b),i.get().success(function(a){F.cloud_credential_name=a.name,F.$emit("jobTemplateLoadFinished")}).error(function(a,b){k(F,a,b,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+b})})):F.$emit("jobTemplateLoadFinished")}),F.removeJobTemplateLoadFinished&&F.removeJobTemplateLoadFinished(),F.removeJobTemplateLoadFinished=F.$on("jobTemplateLoadFinished",function(){J++,J>=3&&z("stop")}),F.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],F.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],F.playbook_options=null,F.playbook=null,z("start"),i.setUrl(C+":id/"),i.get({params:{id:H}}).success(function(a){var b,c,d,e,f,g;l();for(d in E.fields){if("variables"!==d&&null!==a[d]&&void 0!==a[d]){if("select"===E.fields[d].type)if(F[d+"_options"]&&F[d+"_options"].length>0)for(b=0;b<F[d+"_options"].length;b++)a[d]===F[d+"_options"][b].value&&(F[d]=F[d+"_options"][b]);else F[d]=a[d]}else F[d]=a[d];G[d]=F[d]}F.id=a.id,F.name=a.summary_fields&&a.summary_fields.job_template?a.summary_fields.job_template.name:"","variables"===d&&($.isEmptyObject(a.extra_vars)||"{}"===a.extra_vars||"null"===a.extra_vars||""===a.extra_vars||null===a.extra_vars?F.variables="---":(e=JSON.parse(a.extra_vars),F.variables=jsyaml.safeDump(e)),G.variables=F.variables),"lookup"===E.fields[d].type&&a.summary_fields[E.fields[d].sourceModel]&&(F[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]=a.summary_fields[E.fields[d].sourceModel][E.fields[d].sourceField],G[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]=F[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]);
for(d in E.statusFields)null!==a[d]&&void 0!==a[d]&&("created"===d?(c=new Date(a.created),F.created=x(c)):F[d]=a[d]);F.statusToolTip=y(a.status),$('form[name="jobs_form"] input[type="text"], form[name="jobs_form"] jobs_form textarea').attr("readonly","readonly"),$('form[name="jobs_form"] select').prop("disabled","disabled"),$('form[name="jobs_form"] .lookup-btn').prop("disabled","disabled"),$('form[name="jobs_form"] .buttons, form[name="jobs_form"] hr').hide(),F.url=a.url,f=a.related;for(g in E.related)f[g]&&(I[g]={url:f[g],iterator:E.related[g].iterator});F.stdout_rows=B(F.result_stdout),F.traceback_rows=B(F.result_traceback),t({scope:F,form:E,current_item:a.inventory,list:q,field:"inventory"}),t({scope:F,form:E,current_item:a.credential,list:r,field:"credential"}),t({scope:F,form:E,current_item:a.project,list:s,field:"project"}),m({scope:F,form:E,relatedSets:I}),n({scope:F,relatedSets:I}),F.template_url=a.related.job_template,F.$emit("jobLoaded",a.related.cloud_credential)}).error(function(a,b){k(F,a,b,E,{hdr:"Error!",msg:"Failed to retrieve job: "+f.id+". GET status: "+b})}),F.refresh=function(){z("start"),i.setUrl(C+H+"/"),i.get().success(function(a){F.status=a.status,F.result_stdout=a.result_stdout,F.result_traceback=a.result_traceback,F.stdout_rows=B(F.result_stdout),F.traceback_rows=B(F.result_traceback),z("stop")}).error(function(a,b){z("stop"),k(F,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})},F.jobSummary=function(){d.path("/jobs/"+H+"/job_host_summaries")},F.jobEvents=function(){d.path("/jobs/"+H+"/job_events")}}function OrganizationsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n("htmlTemplate");var t,u=k,v=j,w=d.path().replace(/^\//,"").split("/"),x="organizations"===w[0]?"edit":"select",y=v.inject(k,{mode:x}),z=p("organizations");c.flashMessage=null,h(),t=p("projects")+a.project_id+"/organizations/",q({scope:y,list:u,url:t,returnToCaller:1}),y.removePostRefresh&&y.removePostRefresh(),y.removePostRefresh=y.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off()}),l({scope:y,set:u.name,list:u,url:z}),m({scope:y,list:u,url:z}),y.search(u.iterator),y.showActivity=function(){s({scope:y})},y.addOrganization=function(){d.path(d.path()+"/add")},y.editOrganization=function(a){d.path(d.path()+"/"+a)},y.deleteOrganization=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide");var b=z+a+"/";f.setUrl(b),f.destroy().success(function(){y.search(u.iterator)}).error(function(a,c){r("stop"),o(y,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};i({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function OrganizationsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){m("htmlTemplate");var q=h,r=g,s=q.inject(r,{mode:"add",related:!1}),t=d.path().replace(/^\//,"").split("/")[0];q.reset(),l(),s.formSave=function(){q.clearApiErrors(),p("start");var c=n(t);c+="organizations"!==t?f.project_id+"/organizations/":"",i.setUrl(c),i.post({name:a.name,description:a.description}).success(function(a){p("stop"),"organizations"===t?(b.flashMessage="New organization successfully created!",d.path("/organizations/"+a.id)):o(1)}).error(function(a,b){k(s,a,b,r,{hdr:"Error!",msg:"Failed to add new organization. Post returned status: "+b})})},s.formReset=function(){b.flashMessage=null,q.reset()}}function OrganizationsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){p("htmlTemplate");var t=g,u=h,v=h.inject(t,{mode:"edit",related:!0}),w=q("organizations"),x=d.path().replace(/^\//,"").split("/")[0],y={},z=f.organization_id,A={};u.reset(),v.organizationLoadedRemove&&v.organizationLoadedRemove(),v.organizationLoadedRemove=v.$on("organizationLoaded",function(){for(var a in A)v.search(A[a].iterator);r("stop")}),r("start"),i.setUrl(w+z+"/"),i.get().success(function(a){var b,c,d;l({path:"/organizations/"+z,title:a.name});for(b in t.fields)a[b]&&(v[b]=a[b],y[b]=a[b]);c=a.related;for(d in t.related)c[d]&&(A[d]={url:c[d],iterator:t.related[d].iterator});m({scope:v,form:t,relatedSets:A}),n({scope:v,relatedSets:A}),v.$emit("organizationLoaded")}).error(function(a,b){k(v,a,b,t,{hdr:"Error!",msg:"Failed to retrieve organization: "+f.id+". GET status: "+b})}),v.formSave=function(){var a,c={};u.clearApiErrors(),r("start");for(a in t.fields)c[a]=v[a];i.setUrl(w+z+"/"),i.put(c).success(function(){r("stop"),y=c,b.flashMessage="Your changes were successfully saved!"}).error(function(a,b){r("stop"),k(v,a,b,g,{hdr:"Error!",msg:"Failed to update organization: "+z+". PUT status: "+b})})},v.showActivity=function(){s({scope:v})},v.formReset=function(){b.flashMessage=null,u.reset();for(var a in y)v[a]=y[a]},v.add=function(a){b.flashMessage=null,d.path("/"+x+"/"+f.organization_id+"/"+a)},v.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},v["delete"]=function(a,c,d,e){b.flashMessage=null;var g=function(){r("start");var b=w+f.organization_id+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){r("stop"),$("#prompt-modal").modal("hide"),v.search(t.related[a].iterator)}).error(function(a,c){r("stop"),$("#prompt-modal").modal("hide"),k(v,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};o({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+v.name+" "+e+"?",action:g})}}function PermissionsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){o("htmlTemplate");var t=h,u=c.path().replace(/^\//,"").split("/")[0],v=q(u),w=i,x=w.inject(t,{mode:"edit"});v+=void 0!==e.user_id?e.user_id:e.team_id,v+="/permissions/",x.selected=[],r({scope:x}),x.removePostRefresh&&x.removePostRefresh(),x.removePostRefresh=x.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),l({scope:x,set:"permissions",list:t,url:v}),m({scope:x,list:t,url:v}),x.search(t.iterator),j(),x.addPermission=function(){x.PermissionAddAllowed&&c.path(c.path()+"/add")},x.editPermission=function(a){c.path(c.path()+"/"+a)},x.deletePermission=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var b=q("base")+"permissions/"+a+"/";f.setUrl(b),f.destroy().success(function(){x.search(t.iterator)}).error(function(a,c){s("stop"),p(x,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};x.PermissionAddAllowed&&k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function PermissionsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){m("htmlTemplate");var v=g,w=h,x=void 0!==f.user_id?f.user_id:f.team_id,y=d.path().replace(/^\//,"").split("/")[0],z=w.inject(v,{mode:"add",related:!1}),A={};s({scope:z}),w.reset(),l(),z.inventoryrequired=!0,z.projectrequired=!1,z.category="Inventory",A.category="Inventory",A.inventoryrequired=!0,A.projectrequired=!1,r({scope:z,form:v,current_item:null,list:p,field:"inventory"}),r({scope:z,form:v,current_item:null,list:q,field:"project"}),z.formSave=function(){var a,b,c={};if(w.clearApiErrors(),t("start"),z.PermissionAddAllowed){c={};for(a in v.fields)c[a]=z[a];b="teams"===y?n("teams")+x+"/permissions/":n("users")+x+"/permissions/",i.setUrl(b),i.post(c).success(function(){t("stop"),o(1)}).error(function(a,b){t("stop"),k(z,a,b,g,{hdr:"Error!",msg:"Failed to create new permission. Post returned status: "+b})})}else j("Access Denied","You do not have access to create new permission objects. Please contact a system administrator.","alert-danger")},z.formReset=function(){b.flashMessage=null,w.reset();for(var a in A)z[a]=A[a];z.selectCategory()},z.selectCategory=function(){u({scope:z,reset:!0})},z.selectCategory()}function PermissionsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n("htmlTemplate");var w=h,x=g,y=w.inject(x,{mode:"edit",related:!0}),z=void 0!==f.user_id?f.user_id:f.team_id,A=f.permission_id,B=p("base")+"permissions/"+A+"/",C={};w.reset(),t({scope:y}),y.selectCategory=function(a){var b=a===!1?!1:!0;v({scope:y,reset:b})},u("start"),i.setUrl(B),i.get().success(function(a){var b,c,d;l({path:"/users/"+z+"/permissions/"+A,title:a.name});for(b in x.fields)a[b]&&(x.fields[b].sourceModel&&(c=x.fields[b].sourceModel,d=x.fields[b].sourceField,y[c+"_"+d]=a.summary_fields[c][d],C[c+"_"+d]=a.summary_fields[c][d]),y[b]=a[b],C[b]=y[b]);y.category="Deploy","run"!==a.permission_type&&"check"!==a.permission_type&&(y.category="Inventory"),C.category=y.category,y.selectCategory(!1),s({scope:y,form:x,current_item:a.inventory,list:q,field:"inventory"}),s({scope:y,form:x,current_item:a.project,list:r,field:"project"}),y.PermissionAddAllowed||$('form[name="permission_form"]').find("select, input, button").each(function(){($(this).is("input")||$(this).is("select"))&&$(this).attr("readonly","readonly"),($(this).is('input[type="checkbox"]')||$(this).is('input[type="radio"]')||$(this).is("button"))&&$(this).attr("disabled","disabled")}),u("stop")}).error(function(a,b){k(y,a,b,x,{hdr:"Error!",msg:"Failed to retrieve Permission: "+A+". GET status: "+b})}),y.formSave=function(){var a,b={};w.clearApiErrors(),u("start");for(a in x.fields)b[a]=y[a];i.setUrl(B),i.put(b).success(function(){u("stop"),m(1)}).error(function(a,b){u("stop"),k(y,a,b,x,{hdr:"Error!",msg:"Failed to update Permission: "+f.id+". PUT status: "+b})})},y.formReset=function(){w.reset();for(var a in C)y[a]=C[a];y.selectCategory(!1)}}function ProjectsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){o("htmlTemplate"),w("start");var A=h,B=q("projects"),C=i,D=c.path().replace(/^\//,"").split("/")[0],E="projects"===D?"edit":"select",F=C.inject(A,{mode:E}),G="teams"===D?q("teams")+e.team_id+"/projects/":B,H=0;b.flashMessage=null,F.projectLoading=!0,"select"===E&&r({scope:F,list:A,url:G,returnToCaller:1}),F.removePostRefresh&&F.removePostRefresh(),F.removePostRefresh=F.$on("PostRefresh",function(){var a,b;if(w("stop"),$("#prompt-modal").off(),F.projects)for(b=0;b<F.projects.length;b++){switch("ok"===F.projects[b].status&&(F.projects[b].status="n/a"),F.projects[b].status){case"n/a":F.projects[b].badge="none";break;case"updating":case"successful":case"ok":F.projects[b].badge="false";break;case"never updated":case"failed":case"missing":F.projects[b].badge="true"}for(F.projects[b].last_updated=null!==F.projects[b].last_updated?u(new Date(F.projects[b].last_updated)):null,a=0;a<F.project_scm_type_options.length;a++)if(F.project_scm_type_options[a].value===F.projects[b].scm_type){F.projects[b].scm_type=F.project_scm_type_options[a].label,"Manual"===F.projects[b].scm_type?(F.projects[b].scm_update_tooltip="Manaul projects do not require an SCM update",F.projects[b].scm_type_class="btn-disabled"):(F.projects[b].scm_update_tooltip="Start an SCM update",F.projects[b].scm_type_class="");break}}}),F.removeChoicesHere&&F.removeChoicesHere(),F.removeChoicesHere=F.$on("choicesCompleteProject",function(){var a;if(A.fields.scm_type.searchOptions=F.project_scm_type_options,A.fields.status.searchOptions=F.project_status_options,e.scm_type&&e.status&&(B+="?status="+e.status),l({scope:F,set:"projects",list:A,url:B}),m({scope:F,list:A,url:B}),e.scm_type){F[A.iterator+"SearchField"]="scm_type",F[A.iterator+"SelectShow"]=!0,F[A.iterator+"SearchSelectOpts"]=A.fields.scm_type.searchOptions,F[A.iterator+"SearchFieldLabel"]=A.fields.scm_type.label.replace(/<br\>/g," ");for(a in A.fields.scm_type.searchOptions)if(A.fields.scm_type.searchOptions[a].value===e.scm_type){F[A.iterator+"SearchSelectValue"]=A.fields.scm_type.searchOptions[a];break}}else if(e.status){F[A.iterator+"SearchValue"]=e.status,F[A.iterator+"SearchField"]="status",F[A.iterator+"SelectShow"]=!0,F[A.iterator+"SearchFieldLabel"]=A.fields.status.label,F[A.iterator+"SearchSelectOpts"]=A.fields.status.searchOptions;for(a in A.fields.status.searchOptions)if(A.fields.status.searchOptions[a].value===e.status){F[A.iterator+"SearchSelectValue"]=A.fields.status.searchOptions[a];break}}F.search(A.iterator)}),F.removeChoicesReady&&F.removeChoicesReady(),F.removeChoicesReady=F.$on("choicesReadyProject",function(){H++,2===H&&F.$emit("choicesCompleteProject")}),y({scope:F,url:B,field:"status",variable:"project_status_options",callback:"choicesReadyProject"}),y({scope:F,url:B,field:"scm_type",variable:"project_scm_type_options",callback:"choicesReadyProject"}),j(),F.showActivity=function(){x({scope:F})},F.addProject=function(){c.path(c.path()+"/add")},F.editProject=function(a){c.path(c.path()+"/"+a)},F.showSCMStatus=function(a){var b,c=F.$on("PostRefresh",function(){var d;for(b=0;b<F.projects.length;b++)if(F.projects[b].id===a){d=F.projects[b];break}null!==d.scm_type?d.related.current_update?(w("start"),t({project_id:a,last_update:d.related.current_update})):d.related.last_update?(w("start"),t({project_id:a,last_update:d.related.last_update})):g("No Updates Available","There is no SCM update information available for this project. An update has not yet been  completed.  If you have not already done so, start an update for this project.","alert-info"):g("Missing SCM Configuration","The selected project is not configured for SCM. You must first edit the project, provide SCM settings, and then run an update.","alert-info"),c()});F.search(A.iterator,null,!1,!0)},F.deleteProject=function(a,b){var c=function(){$("#prompt-modal").on("hiden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var b=B+a+"/";f.setUrl(b),f.destroy().success(function(){F.search(A.iterator)}).error(function(a,c){w("stop"),p(F,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},F.removeCancelUpdate&&F.removeCancelUpdate(),F.removeCancelUpdate=F.$on("Cancel_Update",function(a,b){f.setUrl(b),f.post().success(function(){g("SCM Update Cancel","Your request to cancel the update was submitted to the task maanger.","alert-info"),F.refresh()}).error(function(a,c){p(F,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST status: "+c})})}),F.removeCheckCancel&&F.removeCheckCancel(),F.removeCheckCancel=F.$on("Check_Cancel",function(a,b){var c=b.related.cancel;f.setUrl(c),f.get().success(function(a){a.can_cancel?F.$emit("Cancel_Update",c):g("Cancel Not Allowed","Either you do not have access or the SCM update process completed. Click the <em>Refresh</em> button to view the latest status.","alert-info")}).error(function(a,b){p(F,a,b,null,{hdr:"Error!",msg:"Call to "+c+" failed. GET status: "+b})})}),F.cancelUpdate=function(a,b){var c,d,e=!1;for(c=0;c<F.projects.length;c++)if(F.projects[c].id===a){d=F.projects[c],e=!0;break}e&&d.related.current_update?(f.setUrl(d.related.current_update),f.get().success(function(a){F.$emit("Check_Cancel",a)}).error(function(a,b){p(F,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.current_update+" failed. GET status: "+b})})):g("Update Not Found","An SCM update does not appear to be running for project: "+b+". Click the <em>Refresh</em> button to view the latet status.","alert-info")},F.refresh=function(){w("start"),F.projectLoading=!1,v({scope:F,set:"projects",iterator:"project",url:F.current_url})},F.SCMUpdate=function(a){var b;for(b=0;b<F.projects.length;b++)if(F.projects[b].id===a){if("Manual"===F.projects[b].scm_type||z(F.projects[b].scm_type))break;"updating"===F.projects[b].status?g("Update in Progress","The SCM update process is running. Use the Refresh button to monitor the status.","alert-info"):s({scope:F,project_id:a})}}}function ProjectsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){m("tree-form"),m("htmlTemplate");var w=g,x=h,y=d.path().replace(/^\//,"").split("/")[0],z=n("projects"),A=x.inject(w,{mode:"add",related:!1}),B={};x.reset(),l(),p({scope:A,master:B}),A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReady",function(){var a;for(a=0;a<A.scm_type_options.length;a++)if(""===A.scm_type_options[a].value){A.scm_type=A.scm_type_options[a];break}A.scmRequired=!1,B.scm_type=A.scm_type}),t({scope:A,url:z,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),q({scope:A,form:w,list:r,field:"organization"}),q({scope:A,url:n("credentials")+"?kind=scm",form:w,list:s,field:"credential"}),A.formSave=function(){var a,c,d,e={};x.clearApiErrors(),e={};for(c in w.fields)if("checkbox_group"===w.fields[c].type)for(a=0;a<w.fields[c].fields.length;a++)e[w.fields[c].fields[a].name]=A[w.fields[c].fields[a].name];else"alertblock"!==w.fields[c].type&&(e[c]=A[c]);e.scm_type=A.scm_type.value,""!==A.scm_type.value?delete e.local_path:e.local_path=A.local_path.value,d="teams"===y?n("teams")+f.team_id+"/projects/":z,v("start"),i.setUrl(d),i.post(e).success(function(a){var c=a.id,d=n("projects")+c+"/organizations/",e={id:A.organization};i.setUrl(d),i.post(e).success(function(){v("stop"),b.flashMessage="New project successfully created!","projects"===y&&o(),o(1)}).error(function(a,b){v("stop"),k(A,a,b,g,{hdr:"Error!",msg:"Failed to add organization to project. POST returned status: "+b})})}).error(function(a,b){v("stop"),k(A,a,b,g,{hdr:"Error!",msg:"Failed to create new project. POST returned status: "+b})})},A.scmChange=function(){A.scm_type&&(A.pathRequired=""===A.scm_type.value?!0:!1,A.scmRequired=""!==A.scm_type.value?!0:!1,A.scmBranchLabel="svn"===A.scm_type.value?"Revision #":"SCM Branch")},A.formReset=function(){var a;b.flashMessage=null,x.reset();for(a in B)A.fld=B.fld;A.scmChange()}}function ProjectsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){p("htmlTemplate");var B=g,C=h,D=C.inject(B,{mode:"edit",related:!0}),E=q("projects")+f.id+"/",F=d.path().replace(/^\//,"").split("/")[0],G={},H=f.id,I={};C.reset(),D.project_local_paths=[],D.base_dir="",D.projectLoadedRemove&&D.projectLoadedRemove(),D.projectLoadedRemove=D.$on("projectLoaded",function(){var a,b=[];for(a in I)D.search(I[a].iterator);t.getUserInfo("is_superuser")===!0?s({scope:D,master:G}):(b.push({label:D.local_path,value:D.local_path}),D.project_local_paths=b,D.local_path=D.project_local_paths[0],D.base_dir="You do not have access to view this property"),v({url:q("credentials")+"?kind=scm",scope:D,form:B,list:u,field:"credential"}),D.pathRequired=""===D.scm_type.value?!0:!1,D.scmRequired=""!==D.scm_type.value?!0:!1,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch",z("stop")}),D.removeChoicesReady&&D.removeChoicesReady(),D.removeChoicesReady=D.$on("choicesReady",function(){i.setUrl(E),i.get({params:{id:H}}).success(function(a){var b,c,d,e;l({path:"/projects/"+H,title:a.name});for(d in B.fields){if("checkbox_group"===B.fields[d].type)for(e=0;e<B.fields[d].fields.length;e++)D[B.fields[d].fields[e].name]=a[B.fields[d].fields[e].name],G[B.fields[d].fields[e].name]=a[B.fields[d].fields[e].name];else a[d]&&(D[d]=a[d],G[d]=a[d]);"organization"!==d&&B.fields[d].sourceModel&&a.summary_fields&&a.summary_fields[B.fields[d].sourceModel]&&(D[B.fields[d].sourceModel+"_"+B.fields[d].sourceField]=a.summary_fields[B.fields[d].sourceModel][B.fields[d].sourceField],G[B.fields[d].sourceModel+"_"+B.fields[d].sourceField]=a.summary_fields[B.fields[d].sourceModel][B.fields[d].sourceField])}b=a.related;for(c in B.related)b[c]&&(I[c]={url:b[c],iterator:B.related[c].iterator});for(a.scm_type=x(a.scm_type)?"":a.scm_type,e=0;e<D.scm_type_options.length;e++)if(D.scm_type_options[e].value===a.scm_type){D.scm_type=D.scm_type_options[e];break}""!==D.scm_type.value?(D.pathRequired=!1,D.scmRequired=!0):(D.pathRequired=!0,D.scmRequired=!1),G.scm_type=D.scm_type,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch",m({scope:D,form:B,relatedSets:I}),n({scope:D,relatedSets:I}),D.$emit("projectLoaded")}).error(function(a,b){k(D,a,b,B,{hdr:"Error!",msg:"Failed to retrieve project: "+H+". GET status: "+b})})}),z("start"),w({url:q("projects"),scope:D,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),D.formSave=function(){var a,c,d;C.clearApiErrors(),z("start"),b.flashMessage=null,d={};for(a in B.fields)if("checkbox_group"===B.fields[a].type)for(c=0;c<B.fields[a].fields.length;c++)d[B.fields[a].fields[c].name]=D[B.fields[a].fields[c].name];else"alertblock"!==B.fields[a].type&&(d[a]=D[a]);d.scm_type=D.scm_type.value,""!==D.scm_type.value?delete d.local_path:d.local_path=D.local_path.value,i.setUrl(E),i.put(d).success(function(){z("stop"),r()}).error(function(a,b){z("stop"),k(D,a,b,B,{hdr:"Error!",msg:"Failed to update project: "+H+". PUT status: "+b})})},D.showActivity=function(){A({scope:D})},D.add=function(a){b.flashMessage=null,d.path("/"+F+"/"+f.id+"/"+a)},D.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},D["delete"]=function(a,c,d,e){var f=function(){var d=q("projects")+H+"/"+a+"/";b.flashMessage=null,i.setUrl(d),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),D.search(B.related[a].iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),k(D,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. POST returned status: "+b})})};o({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+D.name+" "+e+"?",action:f})},D.scmChange=function(){D.scm_type&&(D.pathRequired=""===D.scm_type.value?!0:!1,D.scmRequired=""!==D.scm_type.value?!0:!1,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch")},D.formReset=function(){b.flashMessage=null,C.reset();for(var a in G)D[a]=G[a];D.scmChange()}}function TeamsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o("htmlTemplate");var v,w=h,x=r("teams"),y=i,z=c.path().replace(/^\//,"").split("/"),A="teams"===z[0]?"edit":"select",B=y.inject(w,{mode:A});B.selected=[],v=r("base")+c.path()+"/",s({scope:B,list:w,url:v,returnToCaller:1}),B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a;if(B.teams)for(a=0;a<B.teams.length;a++)B.teams[a].organization_name=B.teams[a].summary_fields.organization.name}),l({scope:B,set:"teams",list:w,url:x}),m({scope:B,list:w,url:x}),B.search(w.iterator),j(),B.showActivity=function(){u({scope:B})},B.addTeam=function(){c.path(c.path()+"/add")},B.editTeam=function(a){c.path(c.path()+"/"+a)},B.deleteTeam=function(a,b){var c=function(){t("start");var b=x+a+"/";f.setUrl(b),f.destroy().success(function(){t("stop"),$("#prompt-modal").modal("hide"),B.search(w.iterator)}).error(function(a,c){t("stop"),$("#prompt-modal").modal("hide"),p(B,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function TeamsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){n("htmlTemplate");var v=s("teams"),w=g,x=h,y=x.inject(w,{mode:"add",related:!1});b.flashMessage=null,x.reset(),l(),t({scope:y,form:w,current_item:null,list:p,field:"organization"}),y.formSave=function(){var a,c;x.clearApiErrors(),u("start"),i.setUrl(v),c={};for(a in w.fields)c[a]=y[a];i.post(c).success(function(a){u("stop"),b.flashMessage="New team successfully created!",d.path("/teams/"+a.id)}).error(function(a,b){u("stop"),k(y,a,b,w,{hdr:"Error!",msg:"Failed to add new team. Post returned status: "+b})})},y.formReset=function(){x.reset()}}function TeamsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){p("htmlTemplate");var x=s("teams"),y=h,z=g,A=y.inject(z,{mode:"edit",related:!0}),B=d.path().replace(/^\//,"").split("/")[0],C={},D=f.team_id,E={};y.reset(),A.PermissionAddAllowed=!1,A.teamLoadedRemove&&A.teamLoadedRemove(),A.teamLoadedRemove=A.$on("teamLoaded",function(){t({scope:A}),i.setUrl(A.organization_url),i.get().success(function(a){A.organization_name=a.name,C.organization_name=a.name,v("stop")}).error(function(a,b){k(A,a,b,null,{hdr:"Error!",msg:"Failed to retrieve organization: "+A.orgnization_url+". GET status: "+b})});for(var a in E)A.search(E[a].iterator)}),v("start"),i.setUrl(x+":id/"),i.get({params:{id:D}}).success(function(a){var b,c,d;l({path:"/teams/"+D,title:a.name});for(b in z.fields)a[b]&&(A[b]=a[b],C[b]=A[b]);c=a.related;for(d in z.related)c[d]&&(E[d]={url:c[d],iterator:z.related[d].iterator});m({scope:A,form:z,relatedSets:E}),n({scope:A,relatedSets:E}),q({scope:A,form:z,current_item:a.organization,list:u,field:"organization"}),A.organization_url=a.related.organization,A.$emit("teamLoaded")}).error(function(a,b){k(A,a,b,z,{hdr:"Error!",msg:"Failed to retrieve team: "+f.team_id+". GET status: "+b})}),A.showActivity=function(){w({scope:A})},A.formSave=function(){var a,c={};y.clearApiErrors(),v("start"),b.flashMessage=null,i.setUrl(x+f.team_id+"/");for(a in z.fields)c[a]=A[a];i.put(c).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"teams"===a&&o(),o(1)}).error(function(a,b){v("stop"),k(A,a,b,z,{hdr:"Error!",msg:"Failed to update team: "+f.team_id+". PUT status: "+b})})},A.formReset=function(){b.flashMessage=null,y.reset();for(var a in C)A[a]=C[a]},A.add=function(a){b.flashMessage=null,"permissions"===a?A.PermissionAddAllowed?d.path("/"+B+"/"+f.team_id+"/"+a+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+B+"/"+f.team_id+"/"+a)},A.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/"+B+"/"+f.team_id+"/"+a+"/"+c:"/"+a+"/"+c)},A["delete"]=function(a,c,d,e){b.flashMessage=null;var g=function(){var b;"permissions"===a?A.PermissionAddAllowed?(b=s("base")+"permissions/"+c+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),A.search(z.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(A,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=x+f.team_id+"/"+a+"/",i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),A.search(z.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(A,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+A.name+" "+e+"?",action:g})}}function UsersList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=q("users"),w=i,x=c.path().replace(/^\//,"").split("/")[0],y="users"===x?"edit":"select",z=w.inject(h,{mode:y}),A="organizations"===x?q("organizations")+e.organization_id+"/users/":q("teams")+e.team_id+"/users/";z.selected=[],r({scope:z,list:u,url:A,returnToCaller:1}),z.removePostRefresh&&z.removePostRefresh(),z.removePostRefresh=z.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),b.flashMessage=null,l({scope:z,set:"users",list:u,url:v}),m({scope:z,list:u,url:v}),z.search(u.iterator),j(),z.showActivity=function(){t({scope:z})},z.addUser=function(){c.path(c.path()+"/add")},z.editUser=function(a){c.path(c.path()+"/"+a)},z.deleteUser=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var b=v+a+"/";f.setUrl(b),f.destroy().success(function(){z.search(u.iterator)}).error(function(a,c){s("stop"),p(z,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function UsersAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n("htmlTemplate");var t=o("organizations"),u=g,v=h,w=v.inject(u,{mode:"add",related:!1});r(),w.ldap_user=!1,w.not_ldap_user=!w.ldap_user,w.ldap_dn=null,v.reset(),l(),p({scope:w,form:u,current_item:void 0!==f.organization_id?f.organization_id:null,list:q,field:"organization"}),f.organization_id&&(w.organization=f.organization_id,i.setUrl(o("organizations")+f.organization_id+"/"),i.get().success(function(a){w.organization_name=a.name}).error(function(a,b){k(w,a,b,u,{hdr:"Error!",msg:"Failed to lookup Organization: "+a.id+". GET returned status: "+b})})),w.formSave=function(){v.clearApiErrors();var a,c={};if(void 0!==w.organization&&null!==w.organization&&""!==w.organization){i.setUrl(t+w.organization+"/users/");for(a in u.fields)u.fields[a].realName?c[u.fields[a].realName]=w[a]:c[a]=w[a];c.is_superuser=c.is_superuser||!1,s("start"),i.post(c).success(function(a){var c=d.path().replace(/^\//,"").split("/")[0];"users"===c&&(b.flashMessage="New user successfully created!",d.path("/users/"+a.id)),m(1)}).error(function(a,b){s("stop"),k(w,a,b,u,{hdr:"Error!",msg:"Failed to add new user. POST returned status: "+b})})}else w.organization_name_api_error="A value is required"},w.formReset=function(){v.reset(),w.ldap_user=!1},w.clearPWConfirm=function(a){w[a]="",w[u.name+"_form"][a].$setValidity("awpassmatch",!1)}}function UsersEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){p("htmlTemplate");var w=q("users"),x=h,y=g,z=d.path().replace(/^\//,"").split("/")[0],A={},B=f.user_id,C={};a.removeFormReady&&a.removeFormReady(),a.removeFormReady=a.$on("formReady",function(){var a=x.inject(y,{mode:"edit",related:!0});x.reset(),a.removePostRefresh&&a.removePostRefresh(),a.PermissionAddAllowed=!1,a.removeUserLoaded&&a.removeUserLoaded(),a.removeUserLoaded=a.$on("userLoaded",function(){for(var b in C)a.search(C[b].iterator);s({scope:a}),u("stop")}),i.setUrl(w+":id/"),i.get({params:{id:B}}).success(function(b){l({path:"/users/"+B,title:b.username});var c,d,e;for(c in y.fields)b[c]&&(a[c]="is_superuser"===c?"true"===b[c]||b[c]===!0?"true":"false":b[c],A[c]=a[c]);d=b.related;for(e in y.related)d[e]&&(C[e]={url:d[e],iterator:y.related[e].iterator});a.ldap_user=null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?!0:!1,a.not_ldap_user=!a.ldap_user,A.ldap_user=a.ldap_user,m({scope:a,form:y,relatedSets:C}),n({scope:a,relatedSets:C}),a.$emit("userLoaded")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+f.id+". GET status: "+c})}),a.formSave=function(){var c,e={};x.clearApiErrors(),b.flashMessage=null,i.setUrl(w+B+"/");for(c in y.fields)y.fields[c].realName?e[y.fields[c].realName]=a[c]:e[c]=a[c];e.is_superuser=e.is_superuser||!1,u("start"),i.put(e).success(function(){u("stop");var a=d.path().replace(/^\//,"").split("/")[0];"users"===a&&o(),o(1)}).error(function(b,c){u("stop"),k(a,b,c,y,{hdr:"Error!",msg:"Failed to update users: "+f.id+". PUT status: "+c})})},a.showActivity=function(){v({scope:a})},a.formReset=function(){b.flashMessage=null,x.reset();for(var c in A)a[c]=A[c];a.password_confirm=a.password},a.clearPWConfirm=function(c){a[c]="",a[y.name+"_form"][c].$setValidity("awpassmatch",!1),b.flashMessage=null},a.add=function(c){b.flashMessage=null,"permissions"===c?a.PermissionAddAllowed?d.path("/"+z+"/"+f.user_id+"/"+c+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+z+"/"+f.user_id+"/"+c)},a.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/users/"+f.user_id+"/permissions/"+c:"/"+a+"/"+c)},a["delete"]=function(c,d,e,g){b.flashMessage=null;var h=function(){var b;"permissions"===c?a.PermissionAddAllowed?(b=q("base")+"permissions/"+d+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+d})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=w+f.user_id+"/"+c+"/",i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.username+" "+g+"?",action:h})}}),t(),a.removeModifyForm&&a.removeModifyForm(),a.removeModifyForm=a.$on("modifyForm",function(){i.setUrl(q("config")),i.get().success(function(b){var c,d;if(b.user_ldap_fields)for(c=0;c<b.user_ldap_fields.length;c++)d=b.user_ldap_fields[c],y.fields[d]&&(y.fields[d].readonly=!0,y.fields[d].editRequired=!1,y.fields[d].awRequiredWhen&&delete y.fields[d].awRequiredWhen);a.$emit("formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve application config. GET status: "+c})
})}),u("start"),i.setUrl(w+B+"/"),i.get().success(function(b){a.$emit(null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?"modifyForm":"formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+B+". GET status: "+c})})}function chkPass(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=2,I=2,J=2,K=2,L=3,M=3,N=3,O=4,P=4,Q=6,R="",S="",T="",U="",V="0",W="0",X="0",Y="0",Z="0",_="0",ab="0",bb="0",cb="0",db="0",eb="0",fb="0",gb="0",hb="0",ib="abcdefghijklmnopqrstuvwxyz",jb="01234567890",kb=")_!@#$%^&*()",lb="Too Short";if(c=document.all?0:1,a){for(nScore=parseInt(a.length*O),n=a.length,d=a.replace(/\s+/g,"").split(/\s*/),e=d.length,b=0;e>b;b++){for(d[b].match(/[A-Z]/g)?(""!==R&&R+1==b&&(y++,C++),R=b,o++):d[b].match(/[a-z]/g)?(""!==S&&S+1==b&&(z++,C++),S=b,p++):d[b].match(/[0-9]/g)?(b>0&&e-1>b&&s++,""!==T&&T+1==b&&(A++,C++),T=b,q++):d[b].match(/[^a-zA-Z0-9_]/g)&&(b>0&&e-1>b&&s++,""!==U&&U+1==b&&(B++,C++),U=b,r++),f=!1,g=0;e>g;g++)d[b]==d[g]&&b!=g&&(f=!0,x+=Math.abs(e/(g-b)));f&&(w++,v=e-w,x=Math.ceil(v?x/v:x))}for(h=0;23>h;h++)i=ib.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(D++,G++);for(h=0;8>h;h++)i=jb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(E++,G++);for(h=0;8>h;h++)i=kb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(F++,G++);o>0&&n>o&&(nScore=parseInt(nScore+2*(n-o)),V="+ "+parseInt(2*(n-o))),p>0&&n>p&&(nScore=parseInt(nScore+2*(n-p)),W="+ "+parseInt(2*(n-p))),q>0&&n>q&&(nScore=parseInt(nScore+q*P),X="+ "+parseInt(q*P)),r>0&&(nScore=parseInt(nScore+r*Q),Y="+ "+parseInt(r*Q)),s>0&&(nScore=parseInt(nScore+s*H),Z="+ "+parseInt(s*H)),(p>0||o>0)&&0===r&&0===q&&(nScore=parseInt(nScore-n),t=n,_="- "+n),0===p&&0===o&&0===r&&q>0&&(nScore=parseInt(nScore-n),u=n,ab="- "+n),w>0&&(nScore=parseInt(nScore-x),bb="- "+x),y>0&&(nScore=parseInt(nScore-y*I),cb="- "+parseInt(y*I)),z>0&&(nScore=parseInt(nScore-z*J),db="- "+parseInt(z*J)),A>0&&(nScore=parseInt(nScore-A*K),eb="- "+parseInt(A*K)),D>0&&(nScore=parseInt(nScore-D*L),fb="- "+parseInt(D*L)),E>0&&(nScore=parseInt(nScore-E*M),gb="- "+parseInt(E*M)),F>0&&(nScore=parseInt(nScore-F*N),hb="- "+parseInt(F*N)),nScore>100?nScore=100:0>nScore&&(nScore=0),k=$("#progbar"),l=$AnsibleConfig.password_strength,m=$AnsibleConfig.password_strength-15<0?0:$AnsibleConfig.password_strength-15,k.css("width",nScore+"%"),nScore>=0&&m>=nScore?(lb="Weak",k.addClass("progress-bar-danger"),k.removeClass("progress-bar-success progress-bar-warning")):nScore>m&&l>=nScore?(lb="Good",k.addClass("progress-bar-warning"),k.removeClass("progress-bar-success progress-bar-danger")):nScore>l&&(lb="Strong",k.addClass("progress-bar-success"),k.removeClass("progress-bar-warning progress-bar-danger"))}else k=$("#progbar"),k.css("width","0%"),k.removeClass("progress-bar-success progress-bar-warning");return nScore}function AdminsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=h,r=o("organizations")+e.organization_id+"/users/",s=i,t="select",u=s.inject(h,{mode:t}),v=o("organizations")+e.organization_id+"/admins/";p({scope:u,list:q,url:v,returnToCaller:1}),l({scope:u,set:"admins",list:q,url:r}),m({scope:u,list:q,url:r}),u.search(q.iterator),j()}function Authenticate(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o;l=function(){$("#login-username").focus()},n=k(d.sessionExpired)?a.get("sessionExpired"):d.sessionExpired,m=function(){return k(d.lastPath)?a.get("lastPath"):d.lastPath},$AnsibleConfig.debug_mode&&console&&(console.log("User session expired: "+n),console.log("Last URL: "+m())),$(".modal[aria-hidden=false]").each(function(){"login-modal"!==$(this).attr("id")&&$(this).modal("hide")}),i("stop"),$("#login-modal").modal({show:!0,keyboard:!1,backdrop:"static"}),$("#login-modal").on("shown.bs.modal",function(){l()}),o=angular.element(document.getElementById("login-modal")).scope(),o.login_username=null,o.login_password=null,o.loginForm.login_username.$setPristine(),o.loginForm.login_password.$setPristine(),"/logout"===e.path()&&f.logout(),d.userLoggedIn=!1,a.put("userLoggedIn",!1),$("#login-password").bind("keypress",function(a){var b=a.keyCode?a.keyCode:a.which;13===b&&$("#login-button").click()}),o.reset=function(){$("#login-form input").each(function(){$(this).val("")})},o.systemLogin=function(a,b){$(".api-error").empty();var c;k(a)||k(b)?h("Error!","Please provide a username and password before attempting to login.","alert-danger",l):(i("start"),f.retrieveToken(a,b).success(function(a,b){$("#login-modal").modal("hide"),c=a.token,f.setToken(a.token,a.expires),d.sessionTimer=j.init(),f.getUser().success(function(a){f.setUserInfo(a),d.user_is_superuser=a.results[0].is_superuser,f.getLicense().success(function(a){f.setLicense(a.license_info),m()?e.path(m()):e.url("/home?login=true")}).error(function(){i("stop"),h("Error","Failed to access user information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){i("stop"),h("Error","Failed to access license information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){var c,d,e;if(i("stop"),a.non_field_errors&&0===a.non_field_errors.length)for(e in a)o[e+"Error"]=a[e][0];else a.non_field_errors&&a.non_field_errors.length>0?(c="Error",d=a.non_field_errors[0]):(c="Error",d="The login attempt failed with a status of: "+b),o.reset(),h(c,d,"alert-danger",l)}))}}function CredentialsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o("htmlTemplate"),t("start");var v,w=h,x=q("credentials"),y=i,z=c.path().replace(/^\//,"").split("/")[0],A="credentials"===z?"edit":"select",B=y.inject(w,{mode:A});B.selected=[],B.credentialLoading=!0,v=q(z)+("users"===z?e.user_id+"/credentials/":e.team_id+"/credentials/"),r({scope:B,list:w,url:v,returnToCaller:1}),B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b;for(t("stop"),$("#prompt-modal").off(),w.fields.kind.searchOptions=B.credential_kind_options,a=0;a<B.credentials.length;a++)for(b=0;b<B.credential_kind_options.length;b++)if(B.credential_kind_options[b].value===B.credentials[a].kind){B.credentials[a].kind=B.credential_kind_options[b].label;break}}),B.removeChoicesReady&&B.removeChoicesReady(),B.removeChoicesReady=B.$on("choicesReadyCredential",function(){l({scope:B,set:"credentials",list:w,url:x}),m({scope:B,list:w,url:x}),B.search(w.iterator)}),s({scope:B,url:x,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),j(),B.showActivity=function(){u({scope:B})},B.addCredential=function(){c.path(c.path()+"/add")},B.editCredential=function(a){c.path(c.path()+"/"+a)},B.deleteCredential=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){t("start")}),$("#prompt-modal").modal("hide");var b=x+a+"/";f.setUrl(b),f.destroy().success(function(){B.search(w.iterator)}).error(function(a,c){t("stop"),p(B,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function CredentialsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){n("tree-form"),n("htmlTemplate");var A,B=g,C=h,D=C.inject(B,{mode:"add",related:!1}),E=u("credentials");C.reset(),l(),v({scope:D,url:E,field:"kind",variable:"credential_kind_options"}),r({scope:D,form:B,current_item:w(f.user_id)?null:f.user_id,list:s,field:"user"}),r({scope:D,form:B,current_item:w(f.team_id)?null:f.team_id,list:t,field:"team"}),w(f.user_id)?w(f.team_id)?(D.owner="user",y({scope:D})):(D.owner="team",D.team=f.team_id,y({scope:D}),A=u("teams")+f.team_id+"/",i.setUrl(A),i.get().success(function(a){D.team_name=a.name}).error(function(a,b){k(D,a,b,null,{hdr:"Error!",msg:"Failed to retrieve team. GET status: "+b})})):(D.owner="user",D.user=f.user_id,y({scope:D}),A=u("users")+f.user_id+"/",i.setUrl(A),i.get().success(function(a){D.user_username=a.username}).error(function(a,b){k(D,a,b,null,{hdr:"Error!",msg:"Failed to retrieve user. GET status: "+b})})),D.kindChange=function(){x({scope:D,form:B,reset:!0})},D.formSave=function(){C.clearApiErrors(),z({scope:D,mode:"add"})},D.ownerChange=function(){y({scope:D})},D.formReset=function(){C.reset()},D.clearPWConfirm=function(a){D[a]="",D[B.name+"_form"][a].$setValidity("awpassmatch",!1)},D.ask=function(a,b){D[a+"_ask"]?(D[a]="ASK",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0)):(D[a]="",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0))},D.clear=function(a,b){D[a]="",D[b]="",D[B.name+"_form"][b].$setValidity("awpassmatch",!0),D[B.name+"_form"].$setDirty()}}function CredentialsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){var a,b;for(a in F.fields)"password"===F.fields[a].type&&"ASK"===G[a]?($("#"+a+"-clear-btn").attr("disabled","disabled"),G[a+"_ask"]=!0):(G[a+"_ask"]=!1,$("#"+a+"-clear-btn").removeAttr("disabled")),I[a+"_ask"]=G[a+"_ask"];for(b=0;b<G.credential_kind_options.length;b++)if(G.kind===G.credential_kind_options[b].value){G.kind=G.credential_kind_options[b];break}}p("htmlTemplate");var D=r("credentials"),E=h,F=g,G=E.inject(F,{mode:"edit",related:!0}),H=d.path().replace(/^\//,"").split("/")[0],I={},J=f.credential_id;E.reset(),G.id=J,G.removeCredentialLoaded&&G.removeCredentialLoaded(),G.removeCredentialLoaded=G.$on("credentialLoaded",function(){w({scope:G,form:F,current_item:x(a.user_id)?null:G.user_id,list:u,field:"user"}),w({scope:G,form:F,current_item:x(a.team_id)?null:G.team_id,list:v,field:"team"}),C(),t({scope:G,form:F,reset:!1}),y({scope:G}),B("stop")}),G.removeChoicesReady&&G.removeChoicesReady(),G.removeChoicesReady=G.$on("choicesReadyCredential",function(){i.setUrl(D+":id/"),i.get({params:{id:J}}).success(function(a){var b,c;l({path:"/credentials/"+J,title:a.name});for(c in F.fields)null!==a[c]&&void 0!==a[c]&&(G[c]=a[c],I[c]=G[c]),"lookup"===F.fields[c].type&&a.summary_fields[F.fields[c].sourceModel]&&(G[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]=a.summary_fields[F.fields[c].sourceModel][F.fields[c].sourceField],I[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]=G[F.fields[c].sourceModel+"_"+F.fields[c].sourceField]);for(G.owner=x(G.user)?"team":"user",I.owner=G.owner,b=0;b<G.credential_kind_options.length;b++)if(G.credential_kind_options[b].value===a.kind){G.kind=G.credential_kind_options[b];break}switch(I.kind=G.kind,a.kind){case"aws":G.access_key=a.username,G.secret_key=a.password,I.access_key=G.access_key,I.secret_key=G.secret_key;break;case"ssh":G.ssh_password=a.password,I.ssh_password=G.ssh_password;break;case"rax":G.api_key=a.password,I.api_key=G.api_key}G.$emit("credentialLoaded")}).error(function(a,b){k(G,a,b,F,{hdr:"Error!",msg:"Failed to retrieve Credential: "+f.id+". GET status: "+b})})}),B("start"),s({scope:G,url:D,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),G.showActivity=function(){A({scope:G})},G.formSave=function(){E.clearApiErrors(),z({scope:G,mode:"edit"})},G.ownerChange=function(){y({scope:G})},G.kindChange=function(){t({scope:G,form:F,reset:!0})},G.formReset=function(){E.reset();for(var a in I)G[a]=I[a];C(),t({scope:G,form:F,reset:!1}),y({scope:G})},G.add=function(a){b.flashMessage=null,d.path("/"+H+"/"+f.id+"/"+a+"/add")},G.edit=function(a,c){b.flashMessage=null,d.path("/"+H+"/"+f.id+"/"+a+"/"+c)},G["delete"]=function(a,c,d,e){b.flashMessage=null;var f=function(){var b=D+J+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),G.search(F.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(G,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};q({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+G.name+" "+e+"?",action:f})},G.clearPWConfirm=function(a){G[a]="",G[F.name+"_form"][a].$setValidity("awpassmatch",!1)},G.ask=function(a,b){G[a+"_ask"]?($("#"+a+"-clear-btn").attr("disabled","disabled"),G[a]="ASK",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0)):($("#"+a+"-clear-btn").removeAttr("disabled"),G[a]="",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0))},G.clear=function(a,b){G[a]="",G[b]="",G[F.name+"_form"][b].$setValidity("awpassmatch",!0),G[F.name+"_form"].$setDirty()}}function Home(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){k("home");var q,r,s,t,u;q={refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},r=p({btn:q.refresh,action:"refresh",toolbar:!0}),r+=p({btn:q.stream,action:"stream",toolbar:!0}),s=angular.element(document.getElementById("home-list-actions")),s.html(r),b(s)(a),t=4,u=0,c.login||f("start"),a.removeWidgetLoaded&&a.removeWidgetLoaded(),a.removeWidgetLoaded=a.$on("WidgetLoaded",function(){u++,u===t&&f("stop")}),a.removeDashboardReady&&a.removeDashboardReady(),a.removeDashboardReady=a.$on("dashboardReady",function(b,c){h({scope:a,target:"container1",dashboard:c}),i({scope:a,target:"container2",dashboard:c}),j({scope:a,target:"container4",dashboard:c}),g({scope:a,target:"container3",dashboard:c})}),a.showActivity=function(){l({scope:a})},a.refresh=function(){f("start"),u=0,m.setUrl(n("dashboard")),m.get().success(function(b){a.$emit("dashboardReady",b)}).error(function(b,c){f("stop"),o(a,b,c,null,{hdr:"Error!",msg:"Failed to get dashboard: "+c})})},a.refresh()}function HomeGroups(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){h("htmlTemplate");var x,y=d,z=c,A=i("groups"),B=y.inject(z,{mode:"edit"});if(B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b,c;for(a=0;a<B.home_groups.length;a++)B.home_groups[a].inventory_name=B.home_groups[a].summary_fields.inventory.name,c=n({status:B.home_groups[a].summary_fields.inventory_source.status}),b=m({active_failures:B.home_groups[a].hosts_with_active_failures,total_hosts:B.home_groups[a].total_hosts,inventory_id:B.home_groups[a].inventory,group_id:B.home_groups[a].id}),B.home_groups[a].status_class=c["class"],B.home_groups[a].status_tooltip=c.tooltip,B.home_groups[a].launch_tooltip=c.launch_tip,B.home_groups[a].launch_class=c.launch_class,B.home_groups[a].hosts_status_tip=b.tooltip,B.home_groups[a].show_failures=b.failures,B.home_groups[a].hosts_status_class=b["class"],B.home_groups[a].status=B.home_groups[a].summary_fields.inventory_source.status,B.home_groups[a].source=B.home_groups[a].summary_fields.inventory_source?B.home_groups[a].summary_fields.inventory_source.source:null}),j({scope:B,set:"home_groups",list:z,url:A}),k({scope:B,list:z,url:A}),b.name&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.name,B[z.iterator+"SearchField"]="name",B[z.iterator+"SearchFieldLabel"]=z.fields.name.label,B[z.iterator+"SearchSelectValue"]=null),b.id&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.id,B[z.iterator+"SearchField"]="id",B[z.iterator+"SearchFieldLabel"]=z.fields.id.label,B[z.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchValue"]=b.has_active_failures,B[z.iterator+"SearchField"]="has_active_failures",B[z.iterator+"SearchFieldLabel"]=z.fields.has_active_failures.label,B[z.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),b.status&&!b.source){B[z.iterator+"SearchField"]="status",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br\>/g," ");for(x in z.fields.status.searchOptions)if(z.fields.status.searchOptions[x].value===b.status){B[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[x];break}}if(b.source){B[z.iterator+"SearchField"]="source",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.source.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.source.label.replace(/<br\>/g," ");for(x in z.fields.source.searchOptions)if(z.fields.source.searchOptions[x].value===b.source){B[z.iterator+"SearchSelectValue"]=z.fields.source.searchOptions[x];break}b.status&&(B[z.iterator+"ExtraParms"]="&inventory_source__status__icontains="+b.status)}b.has_external_source&&(B[z.iterator+"SearchField"]="has_external_source",B[z.iterator+"SearchValue"]=z.fields.has_external_source.searchValue,B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchType"]="in",B[z.iterator+"SearchFieldLabel"]=z.fields.has_external_source.label),B.search(z.iterator),f(),B.showActivity=function(){p({scope:B})},B.editGroup=function(a,b){q({scope:B,group_id:a,inventory_id:b,groups_reload:!1})},B.viewUpdateStatus=function(a){B.groups=B.home_groups,o({scope:B,tree_id:a})},B.updateGroup=function(a){var b=w({list:B.home_groups,key:"id",val:a});b&&(u(b.source)||("updating"===b.status?s("Update in Progress","The inventory update process is currently running for group <em>"+b.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(r("start"),t.setUrl(b.related.inventory_source),t.get().success(function(a){v({scope:B,url:a.related.update,group_name:a.summary_fields.group.name,group_source:a.source,tree_id:b.id,group_id:b.id})}).error(function(a,c){e(B,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+b.related.inventory_source+" POST returned status: "+c})}))))},B.refresh=function(){B.search(z.iterator,null,!1,!0)}}function HomeHosts(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){h("htmlTemplate");var s=d,t=c,u=i("hosts"),v=s.inject(t,{mode:"edit"});v.removePostRefresh&&v.removePostRefresh(),v.removePostRefresh=v.$on("PostRefresh",function(){for(var a=0;a<v.hosts.length;a++)v.hosts[a].inventory_name=v.hosts[a].summary_fields.inventory.name,m({scope:v,host:v.hosts[a]})}),j({scope:v,set:"hosts",list:t,url:u}),k({scope:v,list:t,url:u}),b.name&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.name,v[c.iterator+"SearchField"]="name",v[c.iterator+"SearchFieldLabel"]=t.fields.name.label),b.id&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.id,v[c.iterator+"SearchField"]="id",v[c.iterator+"SearchFieldLabel"]=t.fields.id.label,v[c.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(v[c.iterator+"InputDisable"]=!0,v[c.iterator+"SearchValue"]=b.has_active_failures,v[c.iterator+"SearchField"]="has_active_failures",v[c.iterator+"SearchFieldLabel"]=c.fields.has_active_failures.label,v[c.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),v.search(t.iterator),f(),v.showActivity=function(){p({scope:v})},v.toggle_host_enabled=function(a,b){n({host_id:a,external_source:b,scope:v})},v.editHost=function(a){var b=q({list:v.hosts,key:"id",val:a});b&&o({scope:v,host_id:a,inventory_id:b.inventory,group_id:null,hostsReload:!1})},v.showJobSummary=function(a){r({job_id:a})}}function InventoriesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=q("inventory"),w=i,x=c.path().replace(/^\//,"").split("/"),y="inventories"===x[0]?"edit":"select",z=w.inject(h,{mode:y});b.flashMessage=null,l({scope:z,set:"inventories",list:u,url:v}),m({scope:z,list:u,url:v}),e.name&&(z[h.iterator+"InputDisable"]=!1,z[h.iterator+"SearchValue"]=e.name,z[h.iterator+"SearchField"]="name",z[h.iterator+"SearchFieldLabel"]=h.fields.name.label,z[h.iterator+"SearchSelectValue"]=null),e.has_active_failures&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.has_active_failures,z[h.iterator+"SearchField"]="has_active_failures",z[h.iterator+"SearchFieldLabel"]=h.fields.has_active_failures.label,z[h.iterator+"SearchSelectValue"]="true"===e.has_active_failures?{value:1}:{value:0}),e.has_inventory_sources&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.has_inventory_sources,z[h.iterator+"SearchField"]="has_inventory_sources",z[h.iterator+"SearchFieldLabel"]=h.fields.has_inventory_sources.label,z[h.iterator+"SearchSelectValue"]="true"===e.has_inventory_sources?{value:1}:{value:0}),e.inventory_sources_with_failures&&(z[h.iterator+"InputDisable"]=!0,z[h.iterator+"SearchValue"]=e.inventory_sources_with_failures,z[h.iterator+"SearchField"]="inventory_sources_with_failures",z[h.iterator+"SearchFieldLabel"]=h.fields.inventory_sources_with_failures.label,z[h.iterator+"SearchType"]="gtzero"),z.search(u.iterator),j(),z.removePostRefresh&&z.removePostRefresh(),z.removePostRefresh=z.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off();for(var a=0;a<z.inventories.length;a++)z.inventories[a].hosts_with_active_failures>0?(z.inventories[a].failed_hosts_tip=z.inventories[a].hosts_with_active_failures+(1===z.inventories[a].hosts_with_active_failures?" host":" hosts")+" with job failures. Click to view details.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="true"):0===z.inventories[a].total_hosts?(z.inventories[a].failed_hosts_tip="No hosts defined. Click to add.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="na"):(z.inventories[a].failed_hosts_tip=z.inventories[a].total_hosts+(z.inventories[a].total_hosts>1?" hosts":" host")+" with no job failures. Click to view details.",z.inventories[a].failed_hosts_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].failed_hosts_class="false"),z.inventories[a].status=z.inventories[a].inventory_sources_with_failures+" / "+z.inventories[a].total_inventory_sources,z.inventories[a].inventory_sources_with_failures>0?(z.inventories[a].status_tip=z.inventories[a].inventory_sources_with_failures+" cloud "+(1===z.inventories[a].inventory_sources_with_failures?"source":"sources")+" with failures. Click to view details.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="failed"):0===z.inventories[a].total_inventory_sources?(z.inventories[a].status_tip="Not synced with a cloud source. Click to edit.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="na"):(z.inventories[a].status_tip=z.inventories[a].total_inventory_sources+" cloud "+(z.inventories[a].total_inventory_sources>1?"sources":"source")+" with no failures. Click to view details.",z.inventories[a].status_link="/#/inventories/"+z.inventories[a].id+"/",z.inventories[a].status_class="successful")}),z.removeRefreshInventories&&z.removeRefreshInventories(),z.removeRefreshInventories=z.$on("RefreshInventories",function(){z.search(u.iterator)}),z.showActivity=function(){s({scope:z})},z.editInventoryProperties=function(a){t({scope:z,inventory_id:a})},z.addInventory=function(){c.path(c.path()+"/add")},z.editInventory=function(a){c.path(c.path()+"/"+a)},z.deleteInventory=function(a,b){var c=function(){var b=v+a+"/";$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide"),f.setUrl(b),f.destroy().success(function(){z.search(u.iterator)}).error(function(a,c){r("stop"),p(z,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},z.lookupOrganization=function(a){f.setUrl(q("organizations")+a+"/"),f.get().success(function(a){return a.name})},z.viewJobs=function(a){c.url("/jobs/?inventory__int="+a)},z.viewFailedJobs=function(a){c.url("/jobs/?inventory__int="+a+"&status=failed")}}function InventoriesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n("htmlTemplate");var w,x=t("inventory"),y=g,z=h;y.well=!0,y.formLabelSize=null,y.formFieldSize=null,w=z.inject(y,{mode:"add",related:!1}),w.inventoryParseType="yaml",z.reset(),l(),u(w,"inventory_variables","inventoryParseType"),s({scope:w,form:y,current_item:f.organization_id?f.organization_id:null,list:p,field:"organization"}),w.formSave=function(){z.clearApiErrors(),v("start");try{var a,b,c;if(b="json"===w.inventoryParseType?JSON.parse(w.inventory_variables):jsyaml.load(w.inventory_variables),"object"!=typeof b)throw"failed to return an object!";c={};for(a in y.fields)"inventory_variables"!==a&&(y.fields[a].realName?c[y.fields[a].realName]=w[a]:c[a]=w[a]);i.setUrl(x),i.post(c).success(function(a){var c=a.id;w.inventory_variables?(i.setUrl(a.related.variable_data),i.put(b).success(function(){v("stop"),d.path("/inventories/"+c+"/")}).error(function(a,b){v("stop"),k(w,a,b,null,{hdr:"Error!",msg:"Failed to add inventory varaibles. PUT returned status: "+b})})):(v("stop"),d.path("/inventories/"+c+"/"))}).error(function(a,b){v("stop"),k(w,a,b,y,{hdr:"Error!",msg:"Failed to add new inventory. Post returned status: "+b})})}catch(e){v("stop"),j("Error","Error parsing inventory variables. Parser returned: "+e)}},w.formReset=function(){z.reset()}}function InventoriesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){f("htmlTemplate");var Q=e,R=g;a.inventory_id=c.inventory_id,r({path:b.path(),title:"{{ inventory_name }}"}),a.removeGroupTreeLoaded&&a.removeGroupTreeLoaded(),a.removeGroupTreeLoaded=a.$on("GroupTreeLoaded",function(b,c,e){var f,g;f=angular.element(document.getElementById("breadcrumbs")),f.html(q({list:R,mode:"edit"})),d(f)(a),Q.inject(R,{mode:"edit",id:"groups-container",breadCrumbs:!1,searchSize:"col-lg-5 col-md-5 col-sm-5"}),a.groups=e,a.inventory_name=c,a.groups.length>0?(a.selected_tree_id=a.groups[0].id,a.selected_group_id=a.groups[0].group_id,a.groups[0].selected_class="selected",a.groups[0].active_class="active-row",a.selected_group_name=a.groups[0].name):(a.selected_tree_id=null,a.selected_group_id=null),a.show_failures=!1,l({scope:a,inventory_id:a.inventory_id,tree_id:a.selected_tree_id,group_id:a.selected_group_id}),setTimeout(function(){$("#groups_table .name-column").each(function(){var a,b,c,d,e;a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%",$(this).find(".group-name").css({width:e})}),L("#groups_table .group-name a"),L("#hosts_table .host-name a")},2500),M(),g=P("inventoryAutoHelp"),"off"!==g&&a.autoShowGroupHelp&&a.showGroupHelp({autoShow:!0})}),a.removeGroupTreeRefreshed&&a.removeGroupTreeRefreshed(),a.removeGroupTreeRefreshed=a.$on("GroupTreeRefreshed",function(){setTimeout(function(){L("#groups_table .group-name a")},2500),a.showHosts(a.selected_tree_id,a.selected_group_id,!1)}),a.removeGroupDeleteCompleted&&a.removeGroupDeleteCompleted(),a.removeGroupDeleteCompleted=a.$on("GroupDeleteCompleted",function(){a.selected_tree_id=1,a.selected_group_id=null,i({scope:a,inventory_id:a.inventory_id,refresh:!0})}),a.removeCopMoveGroup&&a.removeCopyMoveGroup(),a.removeCopyMoveGroup=a.$on("CopyMoveGroup",function(b,c,d){G({scope:a,target_tree_id:d,inbound_tree_id:c})}),a.removeCopMoveHost&&a.removeCopyMoveHost(),a.removeCopyMoveHost=a.$on("CopyMoveHost",function(b,c,d){H({scope:a,target_tree_id:c,host_id:d})}),a.showHosts=function(b,c,d){if(null!==b){j("start"),a.selected_tree_id=b,a.selected_group_id=c,a.hosts=[],a.show_failures=d;for(var e=0;e<a.groups.length;e++)a.groups[e].id===b?(a.groups[e].selected_class="selected",a.groups[e].active_class="active-row",a.selected_group_name=a.groups[e].name):(a.groups[e].selected_class="",a.groups[e].active_class="");m({scope:a,group_id:c,tree_id:b,inventory_id:a.inventory_id})}else j("stop")},a.createGroup=function(){n({scope:a,inventory_id:a.inventory_id,group_id:a.selected_group_id})},a.editGroup=function(b,c){o({scope:a,inventory_id:a.inventory_id,group_id:b,tree_id:c,groups_reload:!0})},a.updateGroup=function(b){var c=A({list:a.groups,key:"id",val:b});c&&(s(c.source)||("updating"===c.status?w("Update in Progress","The inventory update process is currently running for group <em>"+c.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(j("start"),t.setUrl(c.related.inventory_source),t.get().success(function(b){v({scope:a,url:b.related.update,group_name:b.summary_fields.group.name,group_source:b.source,tree_id:c.id,group_id:c.group_id})}).error(function(b,d){j("stop"),u(a,b,d,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+c.related.inventory_source+" POST returned status: "+d})}))))},a.cancelUpdate=function(b){z({scope:a,tree_id:b})},a.toggle=function(b){x({scope:a,list:R,id:b})},a.refreshGroups=function(b,c){b&&(a.selected_tree_id=b,a.selected_group_id=c),i({scope:a,inventory_id:a.inventory_id,refresh:!0})},a.viewUpdateStatus=function(b,c){y({scope:a,tree_id:b,group_id:c})},a.deleteGroup=function(b,c){p({scope:a,tree_id:b,group_id:c,inventory_id:a.inventory_id})},a.createHost=function(){B({scope:a})},a.editInventoryProperties=function(){C({scope:a,inventory_id:a.inventory_id})},a.editHost=function(b){D({scope:a,host_id:b,inventory_id:a.inventory_id})},a.deleteHost=function(b,c){E({scope:a,host_id:b,host_name:c})},a.toggleHostEnabled=function(b,c){F({scope:a,host_id:b,external_source:c})},a.showGroupActivity=function(){var b,c,d;a.selected_group_id?(d=A({list:a.groups,key:"id",val:a.selected_tree_id}),b=J("activity_stream")+"?group__id="+a.selected_group_id,c="Showing all activities for group "+d.name):(c="Showing all activities for all "+a.inventory_name+" groups",b=J("activity_stream")+"?group__inventory__id="+a.inventory_id),I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showHostActivity=function(){var b,c;c="Showing all activities for all "+a.inventory_name+" hosts",b=J("activity_stream")+"?host__inventory__id="+a.inventory_id,I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showJobSummary=function(a){K({job_id:a})},a.showGroupHelp=function(a){var b={defn:O};a&&(b.autoShow=a.autoShow||!1),N(b)},i({scope:a,inventory_id:a.inventory_id,refresh:!1})}function JobEventsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(a){var b,c,d,e,f,g="",h=!1;if(a.res){if("string"==typeof a.res)c=a.res.match(/\n/g),d=c?c.length:1,d=d>10?10:d,h=!0,g+='<div class="form-group">\n',g+="<label>Traceback:</label>\n",g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res+"</textarea>\n",g+="</div>\n";else for(e in a.res){if(("msg"===e||"stdout"===e||"stderr"===e)&&null!==a.res[e]&&""!==a.res[e]){switch(g+='<div class="form-group">\n',g+="<label>",e){case"msg":case"stdout":g+="Output:";break;case"stderr":g+="Error:"}g+="</label>\n",c=a.res[e].match(/\n/g),d=c?c.length:1,d=d>10?10:d,g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res[e]+"</textarea>\n",g+="</div>\n",h=!0}if("results"===e&&Array.isArray(a.res[e])&&a.res[e].length>0){for(f="",b=0;b<a.res[e].length;b++)f+=a.res[e][b];c=f.match(/\n/g),d=c?c.length:1,d=d>10?10:d,""!==f&&(g+='<div class="form-group">\n',g+="<label>Results:</label>\n",g+='<textarea readonly class="form-control nowrap mono-space" rows="'+d+'">'+f+"</textarea>\n",g+="</div>\n",h=!0)}"rc"===e&&""!==a.res[e]&&(g+='<div class="form-group">\n',g+="<label>Return Code:</label>\n",g+='<input type="text" class="form-control nowrap mono-space" value="'+a.res[e]+'" readonly >\n',g+="</div>\n",h=!0)}g=h?'<form class="event-form">\n'+g+"</form>\n":""}return g=a.hosts?'<span class="event-detail-host visible-sm">'+a.host+"</span>\n"+g:""===g?null:g}p("htmlTemplate");var z,A=i,B=r("jobs")+f.id+"/job_events/",C=j,D=C.inject(A,{mode:"edit"});A.base=d.path(),D.job_id=f.id,c.flashMessage=null,D.selected=[],D.expand=!0,D.parentNode="parent-event",D.childNode="child-event",D.removeSetHostLinks&&D.removeSetHostLinks(),D.removeSetHostLinks=D.$on("SetHostLinks",function(a,b){for(var c=0;c<D.jobevents.length;c++)D.jobevents[c].summary_fields.host&&(D.jobevents[c].hostLink="/#/inventories/"+b+"/hosts/?name="+encodeURI(D.jobevents[c].summary_fields.host.name))}),D.removePostRefresh&&D.removePostRefresh(),D.removePostRefresh=D.$on("PostRefresh",function(){var b,c=D[A.name];for(b=0;b<c.length;b++)c[b].event_display=c[b].event_display.replace(/^\u00a0*/g,""),c[b].event_level<3?(c[b].ngclick="toggleChildren("+c[b].id+', "'+c[b].related.children+'")',c[b].ngicon="fa fa-minus-square-o node-toggle",c[b]["class"]="parentNode"):(c[b].ngicon="fa fa-square-o node-no-toggle",c[b]["class"]="childNode",c[b].event_detail=y(c[b].event_data)),c[b].show=!0,c[b].spaces=24*c[b].event_level,D.jobevents[b].failed?(D.jobevents[b].status="error",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"A failure occurred durring one or more playbook tasks.":c[b].event_level<3?"A failure occurred within the children of this event.":"A failure occurred. Click to view details"):D.jobevents[b].changed?(D.jobevents[b].status="changed",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"A change was completed durring one or more playbook tasks.":c[b].event_level<3?"A change was completed by one or more children of this event.":"A change was completed. Click to view details"):(D.jobevents[b].status="success",D.jobevents[b].statusBadgeToolTip=b===c.length-1?"All playbook tasks completed successfully.":c[b].event_level<3?"All the children of this event completed successfully.":"No errors occurred. Click to view details"),c[b].created=a("date")(c[b].created,"MM/dd HH:mm:ss");
g.setUrl(r("jobs")+D.job_id),g.get().success(function(a){D.job_status=a.status,D.job_name=a.summary_fields.job_template.name,k({path:"/jobs/"+D.job_id,title:D.job_id+" - "+a.summary_fields.job_template.name}),D.$emit("SetHostLinks",a.inventory)}).error(function(a,b){q(D,a,b,null,{hdr:"Error!",msg:"Failed to get job status for job: "+D.job_id+". GET status: "+b})})}),m({scope:D,set:"jobevents",list:A,url:B}),z=f.page?parseInt(f.page,10)-1:null,n({scope:D,list:A,url:B,page:z}),f.host&&(D[A.iterator+"SearchField"]="host",D[A.iterator+"SearchValue"]=f.host,D[A.iterator+"SearchFieldLabel"]=A.fields.host.label),D.search(A.iterator,f.page),D.toggleChildren=function(a,b){t({scope:D,list:A,id:a,children:b})},D.viewJobEvent=function(a){v({event_id:a})},D.refresh=function(){D.jobSearchSpin=!0,D.jobLoading=!0,x("start"),w({scope:D,set:"jobevents",iterator:"jobevent",url:D.current_url})}}function JobEventsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){m("htmlTemplate");var r=g,s=h,t=h.inject(r,{mode:"edit",related:!0}),u=n("base")+"job_events/"+f.event_id+"/";s.reset(),q("start"),i.setUrl(u),i.get().success(function(a){var b,c,d,e;t.event_display=a.event_display.replace(/^\u00a0*/g,""),l({path:"/jobs/"+f.job_id+"/job_events/"+f.event_id,title:t.event_display});for(c in r.fields)switch(c){case"status":t.status=a.failed?"error":a.changed?"changed":"success";break;case"created":b=new Date(a.created),t.created=o(b);break;case"host":a.summary_fields&&a.summary_fields.host&&(t.host=a.summary_fields.host.name);break;case"id":case"task":case"play":t[c]=a[c];break;case"start":case"end":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[c]&&(b=new Date(a.event_data.res[c]),t[c]=o(b));break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[c]&&(t[c]=a.event_data.res[c],"textarea"===r.fields[c].type&&(d=a.event_data.res[c].match(/\n/g),e=d?d.length:1,e=e>15?5:e,$('textarea[name="'+c+'"]').attr("rows",e)));break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(t[c]=a.event_data.res.invocation.fld)}q("stop")}).error(function(a){k(t,a,status,null,{hdr:"Error!",msg:"Failed to retrieve host: "+f.event_id+". GET status: "+status})}),t.navigateBack=function(){var a="/jobs/"+f.job_id+"/job_events";f.page&&(a+="?page="+f.page),d.url(a)},t.rawView=function(){p({event_id:t.id})}}function JobHostSummaryList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=c.path().replace(/^\//,"").split("/")[0],w=q(v)+e.id+"/job_host_summaries/",x=i,y=x.inject(u,{mode:"edit"});u.index="hosts"===v?!1:!0,y.selected=[],"hosts"===v?(y.job_id=null,y.host_id=e.id):(y.job_id=e.id,y.host_id=null),y.RemoveSetHostLink&&y.RemoveSetHostLink(),y.RemoveSetHostLink=y.$on("setHostLink",function(a,b){for(var c=0;c<y.jobhosts.length;c++)y.jobhosts[c].hostLinkTo="/#/inventories/"+b+"/?host_name="+encodeURI(y.jobhosts[c].summary_fields.host.name)}),y.removePostRefresh&&y.removePostRefresh(),y.removePostRefresh=y.$on("PostRefresh",function(){for(var a=0;a<y.jobhosts.length;a++)y.jobhosts[a].host_name=y.jobhosts[a].summary_fields.host.name,y.jobhosts[a].status=y.jobhosts[a].failed?"failed":"success",y.jobhosts[a].statusBadgeToolTip=s(y.jobhosts[a].status)+" Click to view details.",y.jobhosts[a].statusLinkTo="/#/jobs/"+y.jobhosts[a].job+"/job_events/?host="+encodeURI(y.jobhosts[a].summary_fields.host.name);null!==y.job_id&&void 0!==y.job_id&&""!==y.job_id?(f.setUrl(q("jobs")+y.job_id),f.get().success(function(a){j({path:"/jobs/"+a.id,title:a.id+" - "+a.summary_fields.job_template.name}),y.job_status=a.status,"pending"!==a.status&&"waiting"!==a.status&&"running"!==a.status&&b.timer&&clearInterval(b.timer),y.$emit("setHostLink",a.inventory)}).error(function(a,b){p(y,a,b,null,{hdr:"Error!",msg:"Failed to get job status for job: "+y.job_id+". GET status: "+b})})):(j({path:"/hosts/"+y.host_id,title:y.jobhosts.length>0?y.jobhosts[0].summary_fields.host.name:"Host"}),e.inventory&&y.$emit("setHostLink",e.inventory))}),l({scope:y,set:"jobhosts",list:u,url:w}),m({scope:y,list:u,url:w}),e.host_name&&(y[u.iterator+"SearchField"]="host",y[u.iterator+"SearchValue"]=e.host_name,y[u.iterator+"SearchFieldLabel"]=u.fields.host.label),y.search(u.iterator),y.showEvents=function(a,b){f.setUrl(b),f.get().success(function(b){j({path:"/jobs/"+b.id,title:b.name}),c.url("/jobs/"+b.id+"/job_events/?host="+encodeURI(a))}).error(function(a,c){p(y,a,c,null,{hdr:"Error!",msg:"Failed to lookup last job: "+b+". GET status: "+c})})},y.showJob=function(a){c.path("/jobs/"+a)},y.refresh=function(){null===y.host_id&&(y.jobSearchSpin=!0,y.jobLoading=!0,t("start"),r({scope:y,set:"jobhosts",iterator:"jobhost",url:y.current_url}))}}function JobTemplatesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o("htmlTemplate");var y=h,z=q("job_templates"),A=i,B=c.path().replace(/^\//,"").split("/")[0],C="job_templates"===B?"edit":"select",D=A.inject(y,{mode:C});b.flashMessage=null,D.removePostRefresh&&D.removePostRefresh(),D.removePostRefresh=D.$on("PostRefresh",function(){w("stop"),$("#prompt-modal").off()}),l({scope:D,set:"job_templates",list:y,url:z}),m({scope:D,list:y,url:z}),e.name&&(D[y.iterator+"SearchField"]="name",D[y.iterator+"SearchValue"]=e.name,D[y.iterator+"SearchFieldLabel"]=y.fields.name.label),D.search(y.iterator),j(),D.showActivity=function(){x({scope:D})},D.addJobTemplate=function(){c.path(c.path()+"/add")},D.editJobTemplate=function(a){c.path(c.path()+"/"+a)},D.deleteJobTemplate=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var b=z+a+"/";f.setUrl(b),f.destroy().success(function(){D.search(y.iterator)}).error(function(a){w("stop"),p(D,a,status,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+status})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},D.submitJob=function(a){v({scope:D,id:a})}}function JobTemplatesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){n("htmlTemplate");var x,y,z=o("job_templates"),A=g,B=h,C=B.inject(A,{mode:"add",related:!1}),D={},E={};C.parseType="yaml",u(C),C.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],C.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],C.playbook_options=[],C.allow_callbacks="false",B.reset(),l(),t({scope:C,master:D,check_field:"allow_callbacks",default_val:!1}),s({scope:C,form:A,current_item:null,list:p,field:"inventory"}),jQuery.extend(!0,E,q),E.name="cloudcredentials",E.iterator="cloudcredential",s({url:o("credentials")+"?cloud=true",scope:C,form:A,current_item:null,list:E,field:"cloud_credential",hdr:"Select Cloud Credential"}),s({url:o("credentials")+"?kind=ssh",scope:C,form:A,current_item:null,list:q,field:"credential",hdr:"Select Machine Credential"}),x=function(a,b){var c;a!==b&&C.project&&(v("start"),c=o("projects")+C.project+"/playbooks/",i.setUrl(c),i.get().success(function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(a[b]);C.playbook_options=c,v("stop")}).error(function(a,b){k(C,a,b,A,{hdr:"Error!",msg:"Failed to get playbook list for "+c+". GET returned status: "+b})}))},y=function(a,b){a===b||w(C.project)||(i.setUrl(o("projects")+C.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}b&&j("Waning",b,"alert-info")}).error(function(a,b){k(C,a,b,A,{hdr:"Error!",msg:"Failed to get project "+C.project+". GET returned status: "+b})}))},C.selectPlaybookUnregister&&C.selectPlaybookUnregister(),C.selectPlaybookUnregister=C.$watch("project_name",function(a,b){x(a,b),y(a,b)}),s({scope:C,form:A,current_item:null,list:r,field:"project"}),C.formSave=function(){B.clearApiErrors(),v("start");var a,b,c={};try{if(a="json"===C.parseType?JSON.parse(C.variables):jsyaml.load(C.variables),"object"!=typeof a)throw"failed to return an object!";for(b in A.fields)"select"===A.fields[b].type&&"playbook"!==b?c[b]=C[b].value:"variables"!==b&&(c[b]=C[b]);c.extra_vars=JSON.stringify(a,void 0,"	"),w(c.extra_vars)&&(c.extra_vars=""),i.setUrl(z),i.post(c).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&m(),m(1)}).error(function(a,b){v("stop"),k(C,a,b,A,{hdr:"Error!",msg:"Failed to add new job template. POST returned status: "+b})})}catch(e){v("stop"),j("Error","Error parsing extra variables. Parser returned: "+e)}},C.formReset=function(){B.reset();for(var a in D)C[a]=D[a]}}function JobTemplatesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){p("htmlTemplate");var E,F,G=v("job_templates"),H=h,I=g,J=H.inject(I,{mode:"edit",related:!0}),K=0,L=d.path().replace(/^\//,"").split("/")[0],M={},N=f.id,O={};J.parseType="yaml",x(J),J.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],J.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],J.playbook_options=null,J.playbook=null,H.reset(),F=function(a){var b;C(a)||(b=v("projects")+a+"/playbooks/",A("start"),i.setUrl(b),i.get().success(function(a){var b;for(J.playbook_options=[],b=0;b<a.length;b++)J.playbook_options.push(a[b]),a[b]===J.playbook&&J.job_templates_form.playbook.$setValidity("required",!0);J.playbook?J.$emit("jobTemplateLoadFinished"):A("stop")}).error(function(){A("stop"),j("Missing Playbooks","Unable to retrieve the list of playbooks for this project. Choose a different  project or make the playbooks available on the file system.","alert-info")}))},E=function(){C(J.project)||(A("start"),i.setUrl(v("projects")+J.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}A("stop"),b&&j("Waning",b,"alert-info")}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to get project "+J.project+". GET returned status: "+b})}))},J.watchProjectUnregister&&J.watchProjectUnregister(),J.watchProjectUnregister=J.$watch("project_name",function(a,b){a!==b&&""!==b&&null!==b&&void 0!==b&&(J.playbook=null,F(J.project),E())}),J.removeJobTemplateLoadFinished&&J.removeJobTemplateLoadFinished(),J.removeJobTemplateLoadFinished=J.$on("jobTemplateLoadFinished",function(){if(K++,K>=2)for(var a in O)J.search(O[a].iterator)}),J.removeRelatedJobs&&J.removeRelatedJobs(),J.removeRelatedJobs=J.$on("relatedjobs",function(){var a,b;if(J.jobs&&J.jobs.length)for(a=0;a<J.jobs.length;a++)b=new Date(J.jobs[a].created),J.jobs[a].created=z(b),J.jobs[a].statusBadgeToolTip=y(J.jobs[a].status)+" Click to view status details.",J.jobs[a].statusLinkTo="/#/jobs/"+J.jobs[a].id}),J.cloudCredentialReadyRemove&&J.cloudCredentialReadyRemove(),J.cloudCredentialReadyRemove=J.$on("cloudCredentialReady",function(a,b){var c={};J.cloud_credential_name=b,M.cloud_credential_name=b,jQuery.extend(!0,c,r),c.name="cloudcredentials",c.iterator="cloudcredential",t({url:v("credentials")+"?cloud=true",scope:J,form:I,current_item:J.cloud_credential,list:c,field:"cloud_credential",hdr:"Select Cloud Credential"}),J.$emit("jobTemplateLoadFinished")}),J.jobTemplateLoadedRemove&&J.jobTemplateLoadedRemove(),J.jobTemplateLoadedRemove=J.$on("jobTemplateLoaded",function(a,b){var c;F(J.project),c=""===J.host_config_key||null===J.host_config_key?"false":"true",w({scope:J,master:M,check_field:"allow_callbacks",default_val:c}),b?(i.setUrl(b),i.get().success(function(a){J.$emit("cloudCredentialReady",a.name)}).error(function(a,b){k(J,a,b,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+b})})):J.$emit("cloudCredentialReady",null)}),A("start"),i.setUrl(G+":id/"),i.get({params:{id:N}}).success(function(a){var b,c,d,e,f;l({path:"/job_templates/"+N,title:a.name});for(b in I.fields){if("variables"!==b&&null!==a[b]&&void 0!==a[b]){if("select"===I.fields[b].type)if(J[b+"_options"]&&J[b+"_options"].length>0)for(c=0;c<J[b+"_options"].length;c++)a[b]===J[b+"_options"][c].value&&(J[b]=J[b+"_options"][c]);else J[b]=a[b];else J[b]=a[b];M[b]=J[b]}"variables"===b&&($.isEmptyObject(a.extra_vars)||"{}"===a.extra_vars||"null"===a.extra_vars||""===a.extra_vars||null===a.extra_vars?J.variables="---":(d=JSON.parse(a.extra_vars),J.variables=jsyaml.safeDump(d)),M.variables=J.variables),"lookup"===I.fields[b].type&&a.summary_fields[I.fields[b].sourceModel]&&(J[I.fields[b].sourceModel+"_"+I.fields[b].sourceField]=a.summary_fields[I.fields[b].sourceModel][I.fields[b].sourceField],M[I.fields[b].sourceModel+"_"+I.fields[b].sourceField]=J[I.fields[b].sourceModel+"_"+I.fields[b].sourceField])}J.url=a.url,e=a.related;for(f in I.related)e[f]&&(O[f]={url:e[f],iterator:I.related[f].iterator});J.callback_url=a.related.callback,M.callback_url=J.callback_url,t({scope:J,form:I,current_item:a.inventory,list:q,field:"inventory"}),t({url:v("credentials")+"?kind=ssh",scope:J,form:I,current_item:a.credential,list:r,field:"credential",hdr:"Select Machine Credential"}),t({scope:J,form:I,current_item:a.project,list:s,field:"project"}),m({scope:J,form:I,relatedSets:O}),n({scope:J,relatedSets:O}),J.$emit("jobTemplateLoaded",a.related.cloud_credential)}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to retrieve job template: "+f.id+". GET status: "+b})}),J.formSave=function(){H.clearApiErrors(),A("start");var a,b,c={};try{if(a="json"===J.parseType?JSON.parse(J.variables):jsyaml.load(J.variables),"object"!=typeof a)throw"failed to return an object!";for(b in I.fields)"select"===I.fields[b].type&&"playbook"!==b?c[b]=J[b].value:"variables"!==b&&"callback_url"!==b&&(c[b]=J[b]);c.extra_vars=JSON.stringify(a,void 0,"	"),("null"===c.extra_vars||null===c.extra_vars)&&(c.extra_vars=""),i.setUrl(G+N+"/"),i.put(c).success(function(){A("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&o(),o(1)}).error(function(a,b){k(J,a,b,I,{hdr:"Error!",msg:"Failed to update job template. PUT returned status: "+b})})}catch(e){A("stop"),j("Error","Error parsing extra variables. Parser returned: "+e)}},J.showActivity=function(){B({scope:J})},J.formReset=function(){H.reset();for(var a in M)J[a]=M[a];J.parseType="yaml",$("#forks-slider").slider("option","value",J.forks)},J.add=function(a){b.flashMessage=null,d.path("/"+L+"/"+f.id+"/"+a)},J.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},J["delete"]=function(a,c,d,e){b.flashMessage=null;var f=function(){var b=G+N+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),J.search(I.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(J,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};D({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+J.name+" "+e+"?",action:f})}}function JobsListCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o("htmlTemplate");var y,z=h,A=q("jobs"),B=i,C=B.inject(z,{mode:"edit"});if(b.flashMessage=null,C.selected=[],C.removePostRefresh&&C.removePostRefresh(),C.removePostRefresh=C.$on("PostRefresh",function(){var a,b;if($("tr.success").each(function(){var a=$(this).attr("ng-class");C[a]=""}),C.jobs&&C.jobs.length)for(a=0;a<C.jobs.length;a++)b=new Date(C.jobs[a].created),C.jobs[a].created=t(b),C.jobs[a].statusBadgeToolTip=v(C.jobs[a].status)+" Click to view status details.",C.jobs[a].statusLinkTo="/#/jobs/"+C.jobs[a].id}),e.job_host_summaries__host?A+="?job_host_summaries__host="+e.job_host_summaries__host:e.inventory__int&&e.status&&(A+="?inventory__int="+e.inventory__int+"&status="+e.status),l({scope:C,set:"jobs",list:z,url:A}),m({scope:C,list:z,url:A}),e.inventory__int&&(C[z.iterator+"SearchField"]="inventory",C[z.iterator+"SearchValue"]=e.inventory__int,C[z.iterator+"SearchFieldLabel"]="Inventory ID"),e.id__int&&(C[z.iterator+"SearchField"]="id",C[z.iterator+"SearchValue"]=e.id__int,C[z.iterator+"SearchFieldLabel"]="Job ID"),e.status){C[z.iterator+"SearchField"]="status",C[z.iterator+"SelectShow"]=!0,C[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,C[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br>/g," ");for(y in z.fields.status.searchOptions)if(z.fields.status.searchOptions[y].value===e.status){C[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[y];break}}C.search(z.iterator),j(),C.refresh=function(){x("start"),C.jobLoading=!1,u({scope:C,set:"jobs",iterator:"job",url:C.current_url})},C.refreshJob=C.refresh,C.editJob=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a)},C.viewEvents=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_events")},C.viewSummary=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_host_summaries")},C.deleteJob=function(a){f.setUrl(A+a+"/"),f.get().success(function(b){var c,d,e,g;"pending"===b.status||"running"===b.status||"waiting"===b.status?(d=b.related.cancel,e="cancel",g="Cancel Job"):(d=A+a+"/",e="delete",g="Delete Job"),c=function(){f.setUrl(d),"cancel"===e?f.post().success(function(){$("#prompt-modal").modal("hide"),C.search(z.iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),p(C,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. POST returned status: "+b})}):f.destroy().success(function(){$("#prompt-modal").modal("hide"),C.search(z.iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),p(C,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. DELETE returned status: "+b})})},k({hdr:g,body:"Are you sure you want to "+e+" job "+a+"?",action:c})}).error(function(a,b){p(C,a,b,null,{hdr:"Error!",msg:"Failed to get job details. GET returned status: "+b})})},C.submitJob=function(a,b){s({scope:C,id:a,template:b})}}function JobsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(a){if(null!==a&&""!==a&&void 0!==a){var b=v("projects")+a+"/playbooks/";i.setUrl(b),i.get().success(function(a){F.playbook_options=[];for(var b=0;b<a.length;b++)F.playbook_options.push(a[b]);F.$emit("jobTemplateLoadFinished")}).error(function(){F.$emit("jobTemplateLoadFinished")})}else F.$emit("jobTemplateLoadFinished")}function B(a){var b=a.match(/\n/g),c=b?b.length:1;return c>15?15:c}p("htmlTemplate");var C=v("jobs"),D=h,E=g,F=D.inject(E,{mode:"edit",related:!0}),G={},H=f.id,I={},J=0;D.reset(),F.job_id=H,F.parseType="yaml",F.statusSearchSpin=!1,F.jobLoadedRemove&&F.jobLoadedRemove(),F.jobLoadedRemove=F.$on("jobLoaded",function(a,b){A(F.project),F[E.name+"ReadOnly"]="new"===F.status?!1:!0,$("#forks-slider").slider("option","value",F.forks),$("#forks-slider").slider("disable"),$('input[type="checkbox"]').attr("disabled","disabled"),$('input[type="radio"]').attr("disabled","disabled"),$("#host_config_key-gen-btn").attr("disabled","disabled"),$("textarea").attr("readonly","readonly"),i.setUrl(F.template_url),i.get().success(function(a){var b=a.host_config_key?"true":"false";F.host_config_key=a.host_config_key,w({scope:F,master:G,check_field:"allow_callbacks",default_val:b}),F.callback_url=a.related?a.related.callback:"<< Job template not found >>",F.$emit("jobTemplateLoadFinished")}).error(function(){z("stop"),F.callback_url="<< Job template not found >>"}),b?(i.setUrl(b),i.get().success(function(a){F.cloud_credential_name=a.name,F.$emit("jobTemplateLoadFinished")}).error(function(a,b){k(F,a,b,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+b})})):F.$emit("jobTemplateLoadFinished")}),F.removeJobTemplateLoadFinished&&F.removeJobTemplateLoadFinished(),F.removeJobTemplateLoadFinished=F.$on("jobTemplateLoadFinished",function(){J++,J>=3&&z("stop")}),F.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],F.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],F.playbook_options=null,F.playbook=null,z("start"),i.setUrl(C+":id/"),i.get({params:{id:H}}).success(function(a){var b,c,d,e,f,g;l();for(d in E.fields){if("variables"!==d&&null!==a[d]&&void 0!==a[d]){if("select"===E.fields[d].type)if(F[d+"_options"]&&F[d+"_options"].length>0)for(b=0;b<F[d+"_options"].length;b++)a[d]===F[d+"_options"][b].value&&(F[d]=F[d+"_options"][b]);else F[d]=a[d]}else F[d]=a[d];G[d]=F[d]}F.id=a.id,F.name=a.summary_fields&&a.summary_fields.job_template?a.summary_fields.job_template.name:"","variables"===d&&($.isEmptyObject(a.extra_vars)||"{}"===a.extra_vars||"null"===a.extra_vars||""===a.extra_vars||null===a.extra_vars?F.variables="---":(e=JSON.parse(a.extra_vars),F.variables=jsyaml.safeDump(e)),G.variables=F.variables),"lookup"===E.fields[d].type&&a.summary_fields[E.fields[d].sourceModel]&&(F[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]=a.summary_fields[E.fields[d].sourceModel][E.fields[d].sourceField],G[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]=F[E.fields[d].sourceModel+"_"+E.fields[d].sourceField]);for(d in E.statusFields)null!==a[d]&&void 0!==a[d]&&("created"===d?(c=new Date(a.created),F.created=x(c)):F[d]=a[d]);F.statusToolTip=y(a.status),$('form[name="jobs_form"] input[type="text"], form[name="jobs_form"] jobs_form textarea').attr("readonly","readonly"),$('form[name="jobs_form"] select').prop("disabled","disabled"),$('form[name="jobs_form"] .lookup-btn').prop("disabled","disabled"),$('form[name="jobs_form"] .buttons, form[name="jobs_form"] hr').hide(),F.url=a.url,f=a.related;for(g in E.related)f[g]&&(I[g]={url:f[g],iterator:E.related[g].iterator});F.stdout_rows=B(F.result_stdout),F.traceback_rows=B(F.result_traceback),t({scope:F,form:E,current_item:a.inventory,list:q,field:"inventory"}),t({scope:F,form:E,current_item:a.credential,list:r,field:"credential"}),t({scope:F,form:E,current_item:a.project,list:s,field:"project"}),m({scope:F,form:E,relatedSets:I}),n({scope:F,relatedSets:I}),F.template_url=a.related.job_template,F.$emit("jobLoaded",a.related.cloud_credential)}).error(function(a,b){k(F,a,b,E,{hdr:"Error!",msg:"Failed to retrieve job: "+f.id+". GET status: "+b})}),F.refresh=function(){z("start"),i.setUrl(C+H+"/"),i.get().success(function(a){F.status=a.status,F.result_stdout=a.result_stdout,F.result_traceback=a.result_traceback,F.stdout_rows=B(F.result_stdout),F.traceback_rows=B(F.result_traceback),z("stop")}).error(function(a,b){z("stop"),k(F,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})},F.jobSummary=function(){d.path("/jobs/"+H+"/job_host_summaries")},F.jobEvents=function(){d.path("/jobs/"+H+"/job_events")}}function OrganizationsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n("htmlTemplate");var t,u=k,v=j,w=d.path().replace(/^\//,"").split("/"),x="organizations"===w[0]?"edit":"select",y=v.inject(k,{mode:x}),z=p("organizations");c.flashMessage=null,h(),t=p("projects")+a.project_id+"/organizations/",q({scope:y,list:u,url:t,returnToCaller:1}),y.removePostRefresh&&y.removePostRefresh(),y.removePostRefresh=y.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off()}),l({scope:y,set:u.name,list:u,url:z}),m({scope:y,list:u,url:z}),y.search(u.iterator),y.showActivity=function(){s({scope:y})},y.addOrganization=function(){d.path(d.path()+"/add")},y.editOrganization=function(a){d.path(d.path()+"/"+a)},y.deleteOrganization=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide");var b=z+a+"/";f.setUrl(b),f.destroy().success(function(){y.search(u.iterator)}).error(function(a,c){r("stop"),o(y,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};i({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function OrganizationsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){m("htmlTemplate");var q=h,r=g,s=q.inject(r,{mode:"add",related:!1}),t=d.path().replace(/^\//,"").split("/")[0];q.reset(),l(),s.formSave=function(){q.clearApiErrors(),p("start");var c=n(t);c+="organizations"!==t?f.project_id+"/organizations/":"",i.setUrl(c),i.post({name:a.name,description:a.description}).success(function(a){p("stop"),"organizations"===t?(b.flashMessage="New organization successfully created!",d.path("/organizations/"+a.id)):o(1)}).error(function(a,b){k(s,a,b,r,{hdr:"Error!",msg:"Failed to add new organization. Post returned status: "+b})})},s.formReset=function(){b.flashMessage=null,q.reset()}}function OrganizationsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){p("htmlTemplate");var t=g,u=h,v=h.inject(t,{mode:"edit",related:!0}),w=q("organizations"),x=d.path().replace(/^\//,"").split("/")[0],y={},z=f.organization_id,A={};u.reset(),v.organizationLoadedRemove&&v.organizationLoadedRemove(),v.organizationLoadedRemove=v.$on("organizationLoaded",function(){for(var a in A)v.search(A[a].iterator);r("stop")}),r("start"),i.setUrl(w+z+"/"),i.get().success(function(a){var b,c,d;l({path:"/organizations/"+z,title:a.name});for(b in t.fields)a[b]&&(v[b]=a[b],y[b]=a[b]);c=a.related;for(d in t.related)c[d]&&(A[d]={url:c[d],iterator:t.related[d].iterator});m({scope:v,form:t,relatedSets:A}),n({scope:v,relatedSets:A}),v.$emit("organizationLoaded")}).error(function(a,b){k(v,a,b,t,{hdr:"Error!",msg:"Failed to retrieve organization: "+f.id+". GET status: "+b})}),v.formSave=function(){var a,c={};u.clearApiErrors(),r("start");for(a in t.fields)c[a]=v[a];i.setUrl(w+z+"/"),i.put(c).success(function(){r("stop"),y=c,b.flashMessage="Your changes were successfully saved!"}).error(function(a,b){r("stop"),k(v,a,b,g,{hdr:"Error!",msg:"Failed to update organization: "+z+". PUT status: "+b})})},v.showActivity=function(){s({scope:v})},v.formReset=function(){b.flashMessage=null,u.reset();for(var a in y)v[a]=y[a]},v.add=function(a){b.flashMessage=null,d.path("/"+x+"/"+f.organization_id+"/"+a)},v.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},v["delete"]=function(a,c,d,e){b.flashMessage=null;var g=function(){r("start");var b=w+f.organization_id+"/"+a+"/";i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){r("stop"),$("#prompt-modal").modal("hide"),v.search(t.related[a].iterator)}).error(function(a,c){r("stop"),$("#prompt-modal").modal("hide"),k(v,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})})};o({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+v.name+" "+e+"?",action:g})}}function PermissionsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){o("htmlTemplate");var t=h,u=c.path().replace(/^\//,"").split("/")[0],v=q(u),w=i,x=w.inject(t,{mode:"edit"});v+=void 0!==e.user_id?e.user_id:e.team_id,v+="/permissions/",x.selected=[],r({scope:x}),x.removePostRefresh&&x.removePostRefresh(),x.removePostRefresh=x.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),l({scope:x,set:"permissions",list:t,url:v}),m({scope:x,list:t,url:v}),x.search(t.iterator),j(),x.addPermission=function(){x.PermissionAddAllowed&&c.path(c.path()+"/add")},x.editPermission=function(a){c.path(c.path()+"/"+a)},x.deletePermission=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var b=q("base")+"permissions/"+a+"/";f.setUrl(b),f.destroy().success(function(){x.search(t.iterator)}).error(function(a,c){s("stop"),p(x,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};x.PermissionAddAllowed&&k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function PermissionsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){m("htmlTemplate");var v=g,w=h,x=void 0!==f.user_id?f.user_id:f.team_id,y=d.path().replace(/^\//,"").split("/")[0],z=w.inject(v,{mode:"add",related:!1}),A={};s({scope:z}),w.reset(),l(),z.inventoryrequired=!0,z.projectrequired=!1,z.category="Inventory",A.category="Inventory",A.inventoryrequired=!0,A.projectrequired=!1,r({scope:z,form:v,current_item:null,list:p,field:"inventory"}),r({scope:z,form:v,current_item:null,list:q,field:"project"}),z.formSave=function(){var a,b,c={};if(w.clearApiErrors(),t("start"),z.PermissionAddAllowed){c={};for(a in v.fields)c[a]=z[a];b="teams"===y?n("teams")+x+"/permissions/":n("users")+x+"/permissions/",i.setUrl(b),i.post(c).success(function(){t("stop"),o(1)}).error(function(a,b){t("stop"),k(z,a,b,g,{hdr:"Error!",msg:"Failed to create new permission. Post returned status: "+b})})}else j("Access Denied","You do not have access to create new permission objects. Please contact a system administrator.","alert-danger")},z.formReset=function(){b.flashMessage=null,w.reset();for(var a in A)z[a]=A[a];z.selectCategory()},z.selectCategory=function(){u({scope:z,reset:!0})},z.selectCategory()}function PermissionsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n("htmlTemplate");var w=h,x=g,y=w.inject(x,{mode:"edit",related:!0}),z=void 0!==f.user_id?f.user_id:f.team_id,A=f.permission_id,B=p("base")+"permissions/"+A+"/",C={};w.reset(),t({scope:y}),y.selectCategory=function(a){var b=a===!1?!1:!0;v({scope:y,reset:b})},u("start"),i.setUrl(B),i.get().success(function(a){var b,c,d;l({path:"/users/"+z+"/permissions/"+A,title:a.name});for(b in x.fields)a[b]&&(x.fields[b].sourceModel&&(c=x.fields[b].sourceModel,d=x.fields[b].sourceField,y[c+"_"+d]=a.summary_fields[c][d],C[c+"_"+d]=a.summary_fields[c][d]),y[b]=a[b],C[b]=y[b]);y.category="Deploy","run"!==a.permission_type&&"check"!==a.permission_type&&(y.category="Inventory"),C.category=y.category,y.selectCategory(!1),s({scope:y,form:x,current_item:a.inventory,list:q,field:"inventory"}),s({scope:y,form:x,current_item:a.project,list:r,field:"project"}),y.PermissionAddAllowed||$('form[name="permission_form"]').find("select, input, button").each(function(){($(this).is("input")||$(this).is("select"))&&$(this).attr("readonly","readonly"),($(this).is('input[type="checkbox"]')||$(this).is('input[type="radio"]')||$(this).is("button"))&&$(this).attr("disabled","disabled")}),u("stop")}).error(function(a,b){k(y,a,b,x,{hdr:"Error!",msg:"Failed to retrieve Permission: "+A+". GET status: "+b})}),y.formSave=function(){var a,b={};w.clearApiErrors(),u("start");for(a in x.fields)b[a]=y[a];i.setUrl(B),i.put(b).success(function(){u("stop"),m(1)}).error(function(a,b){u("stop"),k(y,a,b,x,{hdr:"Error!",msg:"Failed to update Permission: "+f.id+". PUT status: "+b})})},y.formReset=function(){w.reset();for(var a in C)y[a]=C[a];y.selectCategory(!1)}}function ProjectsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){o("htmlTemplate"),w("start");var A=h,B=q("projects"),C=i,D=c.path().replace(/^\//,"").split("/")[0],E="projects"===D?"edit":"select",F=C.inject(A,{mode:E}),G="teams"===D?q("teams")+e.team_id+"/projects/":B,H=0;b.flashMessage=null,F.projectLoading=!0,"select"===E&&r({scope:F,list:A,url:G,returnToCaller:1}),F.removePostRefresh&&F.removePostRefresh(),F.removePostRefresh=F.$on("PostRefresh",function(){var a,b;if(w("stop"),$("#prompt-modal").off(),F.projects)for(b=0;b<F.projects.length;b++){switch("ok"===F.projects[b].status&&(F.projects[b].status="n/a"),F.projects[b].status){case"n/a":F.projects[b].badge="none";break;case"updating":case"successful":case"ok":F.projects[b].badge="false";break;case"never updated":case"failed":case"missing":F.projects[b].badge="true"}for(F.projects[b].last_updated=null!==F.projects[b].last_updated?u(new Date(F.projects[b].last_updated)):null,a=0;a<F.project_scm_type_options.length;a++)if(F.project_scm_type_options[a].value===F.projects[b].scm_type){F.projects[b].scm_type=F.project_scm_type_options[a].label,"Manual"===F.projects[b].scm_type?(F.projects[b].scm_update_tooltip="Manaul projects do not require an SCM update",F.projects[b].scm_type_class="btn-disabled"):(F.projects[b].scm_update_tooltip="Start an SCM update",F.projects[b].scm_type_class="");
break}}}),F.removeChoicesHere&&F.removeChoicesHere(),F.removeChoicesHere=F.$on("choicesCompleteProject",function(){var a;if(A.fields.scm_type.searchOptions=F.project_scm_type_options,A.fields.status.searchOptions=F.project_status_options,e.scm_type&&e.status&&(B+="?status="+e.status),l({scope:F,set:"projects",list:A,url:B}),m({scope:F,list:A,url:B}),e.scm_type){F[A.iterator+"SearchField"]="scm_type",F[A.iterator+"SelectShow"]=!0,F[A.iterator+"SearchSelectOpts"]=A.fields.scm_type.searchOptions,F[A.iterator+"SearchFieldLabel"]=A.fields.scm_type.label.replace(/<br\>/g," ");for(a in A.fields.scm_type.searchOptions)if(A.fields.scm_type.searchOptions[a].value===e.scm_type){F[A.iterator+"SearchSelectValue"]=A.fields.scm_type.searchOptions[a];break}}else if(e.status){F[A.iterator+"SearchValue"]=e.status,F[A.iterator+"SearchField"]="status",F[A.iterator+"SelectShow"]=!0,F[A.iterator+"SearchFieldLabel"]=A.fields.status.label,F[A.iterator+"SearchSelectOpts"]=A.fields.status.searchOptions;for(a in A.fields.status.searchOptions)if(A.fields.status.searchOptions[a].value===e.status){F[A.iterator+"SearchSelectValue"]=A.fields.status.searchOptions[a];break}}F.search(A.iterator)}),F.removeChoicesReady&&F.removeChoicesReady(),F.removeChoicesReady=F.$on("choicesReadyProject",function(){H++,2===H&&F.$emit("choicesCompleteProject")}),y({scope:F,url:B,field:"status",variable:"project_status_options",callback:"choicesReadyProject"}),y({scope:F,url:B,field:"scm_type",variable:"project_scm_type_options",callback:"choicesReadyProject"}),j(),F.showActivity=function(){x({scope:F})},F.addProject=function(){c.path(c.path()+"/add")},F.editProject=function(a){c.path(c.path()+"/"+a)},F.showSCMStatus=function(a){var b,c=F.$on("PostRefresh",function(){var d;for(b=0;b<F.projects.length;b++)if(F.projects[b].id===a){d=F.projects[b];break}null!==d.scm_type?d.related.current_update?(w("start"),t({project_id:a,last_update:d.related.current_update})):d.related.last_update?(w("start"),t({project_id:a,last_update:d.related.last_update})):g("No Updates Available","There is no SCM update information available for this project. An update has not yet been  completed.  If you have not already done so, start an update for this project.","alert-info"):g("Missing SCM Configuration","The selected project is not configured for SCM. You must first edit the project, provide SCM settings, and then run an update.","alert-info"),c()});F.search(A.iterator,null,!1,!0)},F.deleteProject=function(a,b){var c=function(){$("#prompt-modal").on("hiden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var b=B+a+"/";f.setUrl(b),f.destroy().success(function(){F.search(A.iterator)}).error(function(a,c){w("stop"),p(F,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})},F.removeCancelUpdate&&F.removeCancelUpdate(),F.removeCancelUpdate=F.$on("Cancel_Update",function(a,b){f.setUrl(b),f.post().success(function(){g("SCM Update Cancel","Your request to cancel the update was submitted to the task maanger.","alert-info"),F.refresh()}).error(function(a,c){p(F,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST status: "+c})})}),F.removeCheckCancel&&F.removeCheckCancel(),F.removeCheckCancel=F.$on("Check_Cancel",function(a,b){var c=b.related.cancel;f.setUrl(c),f.get().success(function(a){a.can_cancel?F.$emit("Cancel_Update",c):g("Cancel Not Allowed","Either you do not have access or the SCM update process completed. Click the <em>Refresh</em> button to view the latest status.","alert-info")}).error(function(a,b){p(F,a,b,null,{hdr:"Error!",msg:"Call to "+c+" failed. GET status: "+b})})}),F.cancelUpdate=function(a,b){var c,d,e=!1;for(c=0;c<F.projects.length;c++)if(F.projects[c].id===a){d=F.projects[c],e=!0;break}e&&d.related.current_update?(f.setUrl(d.related.current_update),f.get().success(function(a){F.$emit("Check_Cancel",a)}).error(function(a,b){p(F,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.current_update+" failed. GET status: "+b})})):g("Update Not Found","An SCM update does not appear to be running for project: "+b+". Click the <em>Refresh</em> button to view the latet status.","alert-info")},F.refresh=function(){w("start"),F.projectLoading=!1,v({scope:F,set:"projects",iterator:"project",url:F.current_url})},F.SCMUpdate=function(a){var b;for(b=0;b<F.projects.length;b++)if(F.projects[b].id===a){if("Manual"===F.projects[b].scm_type||z(F.projects[b].scm_type))break;"updating"===F.projects[b].status?g("Update in Progress","The SCM update process is running. Use the Refresh button to monitor the status.","alert-info"):s({scope:F,project_id:a})}}}function ProjectsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){m("tree-form"),m("htmlTemplate");var w=g,x=h,y=d.path().replace(/^\//,"").split("/")[0],z=n("projects"),A=x.inject(w,{mode:"add",related:!1}),B={};x.reset(),l(),p({scope:A,master:B}),A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReady",function(){var a;for(a=0;a<A.scm_type_options.length;a++)if(""===A.scm_type_options[a].value){A.scm_type=A.scm_type_options[a];break}A.scmRequired=!1,B.scm_type=A.scm_type}),t({scope:A,url:z,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),q({scope:A,form:w,list:r,field:"organization"}),q({scope:A,url:n("credentials")+"?kind=scm",form:w,list:s,field:"credential"}),A.formSave=function(){var a,c,d,e={};x.clearApiErrors(),e={};for(c in w.fields)if("checkbox_group"===w.fields[c].type)for(a=0;a<w.fields[c].fields.length;a++)e[w.fields[c].fields[a].name]=A[w.fields[c].fields[a].name];else"alertblock"!==w.fields[c].type&&(e[c]=A[c]);e.scm_type=A.scm_type.value,""!==A.scm_type.value?delete e.local_path:e.local_path=A.local_path.value,d="teams"===y?n("teams")+f.team_id+"/projects/":z,v("start"),i.setUrl(d),i.post(e).success(function(a){var c=a.id,d=n("projects")+c+"/organizations/",e={id:A.organization};i.setUrl(d),i.post(e).success(function(){v("stop"),b.flashMessage="New project successfully created!","projects"===y&&o(),o(1)}).error(function(a,b){v("stop"),k(A,a,b,g,{hdr:"Error!",msg:"Failed to add organization to project. POST returned status: "+b})})}).error(function(a,b){v("stop"),k(A,a,b,g,{hdr:"Error!",msg:"Failed to create new project. POST returned status: "+b})})},A.scmChange=function(){A.scm_type&&(A.pathRequired=""===A.scm_type.value?!0:!1,A.scmRequired=""!==A.scm_type.value?!0:!1,A.scmBranchLabel="svn"===A.scm_type.value?"Revision #":"SCM Branch")},A.formReset=function(){var a;b.flashMessage=null,x.reset();for(a in B)A.fld=B.fld;A.scmChange()}}function ProjectsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){p("htmlTemplate");var B=g,C=h,D=C.inject(B,{mode:"edit",related:!0}),E=q("projects")+f.id+"/",F=d.path().replace(/^\//,"").split("/")[0],G={},H=f.id,I={};C.reset(),D.project_local_paths=[],D.base_dir="",D.projectLoadedRemove&&D.projectLoadedRemove(),D.projectLoadedRemove=D.$on("projectLoaded",function(){var a,b=[];for(a in I)D.search(I[a].iterator);t.getUserInfo("is_superuser")===!0?s({scope:D,master:G}):(b.push({label:D.local_path,value:D.local_path}),D.project_local_paths=b,D.local_path=D.project_local_paths[0],D.base_dir="You do not have access to view this property"),v({url:q("credentials")+"?kind=scm",scope:D,form:B,list:u,field:"credential"}),D.pathRequired=""===D.scm_type.value?!0:!1,D.scmRequired=""!==D.scm_type.value?!0:!1,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch",z("stop")}),D.removeChoicesReady&&D.removeChoicesReady(),D.removeChoicesReady=D.$on("choicesReady",function(){i.setUrl(E),i.get({params:{id:H}}).success(function(a){var b,c,d,e;l({path:"/projects/"+H,title:a.name});for(d in B.fields){if("checkbox_group"===B.fields[d].type)for(e=0;e<B.fields[d].fields.length;e++)D[B.fields[d].fields[e].name]=a[B.fields[d].fields[e].name],G[B.fields[d].fields[e].name]=a[B.fields[d].fields[e].name];else a[d]&&(D[d]=a[d],G[d]=a[d]);"organization"!==d&&B.fields[d].sourceModel&&a.summary_fields&&a.summary_fields[B.fields[d].sourceModel]&&(D[B.fields[d].sourceModel+"_"+B.fields[d].sourceField]=a.summary_fields[B.fields[d].sourceModel][B.fields[d].sourceField],G[B.fields[d].sourceModel+"_"+B.fields[d].sourceField]=a.summary_fields[B.fields[d].sourceModel][B.fields[d].sourceField])}b=a.related;for(c in B.related)b[c]&&(I[c]={url:b[c],iterator:B.related[c].iterator});for(a.scm_type=x(a.scm_type)?"":a.scm_type,e=0;e<D.scm_type_options.length;e++)if(D.scm_type_options[e].value===a.scm_type){D.scm_type=D.scm_type_options[e];break}""!==D.scm_type.value?(D.pathRequired=!1,D.scmRequired=!0):(D.pathRequired=!0,D.scmRequired=!1),G.scm_type=D.scm_type,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch",m({scope:D,form:B,relatedSets:I}),n({scope:D,relatedSets:I}),D.$emit("projectLoaded")}).error(function(a,b){k(D,a,b,B,{hdr:"Error!",msg:"Failed to retrieve project: "+H+". GET status: "+b})})}),z("start"),w({url:q("projects"),scope:D,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),D.formSave=function(){var a,c,d;C.clearApiErrors(),z("start"),b.flashMessage=null,d={};for(a in B.fields)if("checkbox_group"===B.fields[a].type)for(c=0;c<B.fields[a].fields.length;c++)d[B.fields[a].fields[c].name]=D[B.fields[a].fields[c].name];else"alertblock"!==B.fields[a].type&&(d[a]=D[a]);d.scm_type=D.scm_type.value,""!==D.scm_type.value?delete d.local_path:d.local_path=D.local_path.value,i.setUrl(E),i.put(d).success(function(){z("stop"),r()}).error(function(a,b){z("stop"),k(D,a,b,B,{hdr:"Error!",msg:"Failed to update project: "+H+". PUT status: "+b})})},D.showActivity=function(){A({scope:D})},D.add=function(a){b.flashMessage=null,d.path("/"+F+"/"+f.id+"/"+a)},D.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},D["delete"]=function(a,c,d,e){var f=function(){var d=q("projects")+H+"/"+a+"/";b.flashMessage=null,i.setUrl(d),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),D.search(B.related[a].iterator)}).error(function(a,b){$("#prompt-modal").modal("hide"),k(D,a,b,null,{hdr:"Error!",msg:"Call to "+d+" failed. POST returned status: "+b})})};o({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+D.name+" "+e+"?",action:f})},D.scmChange=function(){D.scm_type&&(D.pathRequired=""===D.scm_type.value?!0:!1,D.scmRequired=""!==D.scm_type.value?!0:!1,D.scmBranchLabel="svn"===D.scm_type.value?"Revision #":"SCM Branch")},D.formReset=function(){b.flashMessage=null,C.reset();for(var a in G)D[a]=G[a];D.scmChange()}}function TeamsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o("htmlTemplate");var v,w=h,x=r("teams"),y=i,z=c.path().replace(/^\//,"").split("/"),A="teams"===z[0]?"edit":"select",B=y.inject(w,{mode:A});B.selected=[],v=r("base")+c.path()+"/",s({scope:B,list:w,url:v,returnToCaller:1}),B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a;if(B.teams)for(a=0;a<B.teams.length;a++)B.teams[a].organization_name=B.teams[a].summary_fields.organization.name}),l({scope:B,set:"teams",list:w,url:x}),m({scope:B,list:w,url:x}),B.search(w.iterator),j(),B.showActivity=function(){u({scope:B})},B.addTeam=function(){c.path(c.path()+"/add")},B.editTeam=function(a){c.path(c.path()+"/"+a)},B.deleteTeam=function(a,b){var c=function(){t("start");var b=x+a+"/";f.setUrl(b),f.destroy().success(function(){t("stop"),$("#prompt-modal").modal("hide"),B.search(w.iterator)}).error(function(a,c){t("stop"),$("#prompt-modal").modal("hide"),p(B,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function TeamsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){n("htmlTemplate");var v=s("teams"),w=g,x=h,y=x.inject(w,{mode:"add",related:!1});b.flashMessage=null,x.reset(),l(),t({scope:y,form:w,current_item:null,list:p,field:"organization"}),y.formSave=function(){var a,c;x.clearApiErrors(),u("start"),i.setUrl(v),c={};for(a in w.fields)c[a]=y[a];i.post(c).success(function(a){u("stop"),b.flashMessage="New team successfully created!",d.path("/teams/"+a.id)}).error(function(a,b){u("stop"),k(y,a,b,w,{hdr:"Error!",msg:"Failed to add new team. Post returned status: "+b})})},y.formReset=function(){x.reset()}}function TeamsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){p("htmlTemplate");var x=s("teams"),y=h,z=g,A=y.inject(z,{mode:"edit",related:!0}),B=d.path().replace(/^\//,"").split("/")[0],C={},D=f.team_id,E={};y.reset(),A.PermissionAddAllowed=!1,A.teamLoadedRemove&&A.teamLoadedRemove(),A.teamLoadedRemove=A.$on("teamLoaded",function(){t({scope:A}),i.setUrl(A.organization_url),i.get().success(function(a){A.organization_name=a.name,C.organization_name=a.name,v("stop")}).error(function(a,b){k(A,a,b,null,{hdr:"Error!",msg:"Failed to retrieve organization: "+A.orgnization_url+". GET status: "+b})});for(var a in E)A.search(E[a].iterator)}),v("start"),i.setUrl(x+":id/"),i.get({params:{id:D}}).success(function(a){var b,c,d;l({path:"/teams/"+D,title:a.name});for(b in z.fields)a[b]&&(A[b]=a[b],C[b]=A[b]);c=a.related;for(d in z.related)c[d]&&(E[d]={url:c[d],iterator:z.related[d].iterator});m({scope:A,form:z,relatedSets:E}),n({scope:A,relatedSets:E}),q({scope:A,form:z,current_item:a.organization,list:u,field:"organization"}),A.organization_url=a.related.organization,A.$emit("teamLoaded")}).error(function(a,b){k(A,a,b,z,{hdr:"Error!",msg:"Failed to retrieve team: "+f.team_id+". GET status: "+b})}),A.showActivity=function(){w({scope:A})},A.formSave=function(){var a,c={};y.clearApiErrors(),v("start"),b.flashMessage=null,i.setUrl(x+f.team_id+"/");for(a in z.fields)c[a]=A[a];i.put(c).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"teams"===a&&o(),o(1)}).error(function(a,b){v("stop"),k(A,a,b,z,{hdr:"Error!",msg:"Failed to update team: "+f.team_id+". PUT status: "+b})})},A.formReset=function(){b.flashMessage=null,y.reset();for(var a in C)A[a]=C[a]},A.add=function(a){b.flashMessage=null,"permissions"===a?A.PermissionAddAllowed?d.path("/"+B+"/"+f.team_id+"/"+a+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+B+"/"+f.team_id+"/"+a)},A.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/"+B+"/"+f.team_id+"/"+a+"/"+c:"/"+a+"/"+c)},A["delete"]=function(a,c,d,e){b.flashMessage=null;var g=function(){var b;"permissions"===a?A.PermissionAddAllowed?(b=s("base")+"permissions/"+c+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),A.search(z.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(A,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=x+f.team_id+"/"+a+"/",i.setUrl(b),i.post({id:c,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),A.search(z.related[a].iterator)}).error(function(a,c){$("#prompt-modal").modal("hide"),k(A,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+c})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+d+" from "+A.name+" "+e+"?",action:g})}}function UsersList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o("htmlTemplate");var u=h,v=q("users"),w=i,x=c.path().replace(/^\//,"").split("/")[0],y="users"===x?"edit":"select",z=w.inject(h,{mode:y}),A="organizations"===x?q("organizations")+e.organization_id+"/users/":q("teams")+e.team_id+"/users/";z.selected=[],r({scope:z,list:u,url:A,returnToCaller:1}),z.removePostRefresh&&z.removePostRefresh(),z.removePostRefresh=z.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),b.flashMessage=null,l({scope:z,set:"users",list:u,url:v}),m({scope:z,list:u,url:v}),z.search(u.iterator),j(),z.showActivity=function(){t({scope:z})},z.addUser=function(){c.path(c.path()+"/add")},z.editUser=function(a){c.path(c.path()+"/"+a)},z.deleteUser=function(a,b){var c=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var b=v+a+"/";f.setUrl(b),f.destroy().success(function(){z.search(u.iterator)}).error(function(a,c){s("stop"),p(z,a,c,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+c})})};k({hdr:"Delete",body:"Are you sure you want to delete "+b+"?",action:c})}}function UsersAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n("htmlTemplate");var t=o("organizations"),u=g,v=h,w=v.inject(u,{mode:"add",related:!1});r(),w.ldap_user=!1,w.not_ldap_user=!w.ldap_user,w.ldap_dn=null,v.reset(),l(),p({scope:w,form:u,current_item:void 0!==f.organization_id?f.organization_id:null,list:q,field:"organization"}),f.organization_id&&(w.organization=f.organization_id,i.setUrl(o("organizations")+f.organization_id+"/"),i.get().success(function(a){w.organization_name=a.name}).error(function(a,b){k(w,a,b,u,{hdr:"Error!",msg:"Failed to lookup Organization: "+a.id+". GET returned status: "+b})})),w.formSave=function(){v.clearApiErrors();var a,c={};if(void 0!==w.organization&&null!==w.organization&&""!==w.organization){i.setUrl(t+w.organization+"/users/");for(a in u.fields)u.fields[a].realName?c[u.fields[a].realName]=w[a]:c[a]=w[a];c.is_superuser=c.is_superuser||!1,s("start"),i.post(c).success(function(a){var c=d.path().replace(/^\//,"").split("/")[0];"users"===c&&(b.flashMessage="New user successfully created!",d.path("/users/"+a.id)),m(1)}).error(function(a,b){s("stop"),k(w,a,b,u,{hdr:"Error!",msg:"Failed to add new user. POST returned status: "+b})})}else w.organization_name_api_error="A value is required"},w.formReset=function(){v.reset(),w.ldap_user=!1},w.clearPWConfirm=function(a){w[a]="",w[u.name+"_form"][a].$setValidity("awpassmatch",!1)}}function UsersEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){p("htmlTemplate");var w=q("users"),x=h,y=g,z=d.path().replace(/^\//,"").split("/")[0],A={},B=f.user_id,C={};a.removeFormReady&&a.removeFormReady(),a.removeFormReady=a.$on("formReady",function(){var a=x.inject(y,{mode:"edit",related:!0});x.reset(),a.removePostRefresh&&a.removePostRefresh(),a.PermissionAddAllowed=!1,a.removeUserLoaded&&a.removeUserLoaded(),a.removeUserLoaded=a.$on("userLoaded",function(){for(var b in C)a.search(C[b].iterator);s({scope:a}),u("stop")}),i.setUrl(w+":id/"),i.get({params:{id:B}}).success(function(b){l({path:"/users/"+B,title:b.username});var c,d,e;for(c in y.fields)b[c]&&(a[c]="is_superuser"===c?"true"===b[c]||b[c]===!0?"true":"false":b[c],A[c]=a[c]);d=b.related;for(e in y.related)d[e]&&(C[e]={url:d[e],iterator:y.related[e].iterator});a.ldap_user=null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?!0:!1,a.not_ldap_user=!a.ldap_user,A.ldap_user=a.ldap_user,m({scope:a,form:y,relatedSets:C}),n({scope:a,relatedSets:C}),a.$emit("userLoaded")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+f.id+". GET status: "+c})}),a.formSave=function(){var c,e={};x.clearApiErrors(),b.flashMessage=null,i.setUrl(w+B+"/");for(c in y.fields)y.fields[c].realName?e[y.fields[c].realName]=a[c]:e[c]=a[c];e.is_superuser=e.is_superuser||!1,u("start"),i.put(e).success(function(){u("stop");var a=d.path().replace(/^\//,"").split("/")[0];"users"===a&&o(),o(1)}).error(function(b,c){u("stop"),k(a,b,c,y,{hdr:"Error!",msg:"Failed to update users: "+f.id+". PUT status: "+c})})},a.showActivity=function(){v({scope:a})},a.formReset=function(){b.flashMessage=null,x.reset();for(var c in A)a[c]=A[c];a.password_confirm=a.password},a.clearPWConfirm=function(c){a[c]="",a[y.name+"_form"][c].$setValidity("awpassmatch",!1),b.flashMessage=null},a.add=function(c){b.flashMessage=null,"permissions"===c?a.PermissionAddAllowed?d.path("/"+z+"/"+f.user_id+"/"+c+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+z+"/"+f.user_id+"/"+c)},a.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/users/"+f.user_id+"/permissions/"+c:"/"+a+"/"+c)},a["delete"]=function(c,d,e,g){b.flashMessage=null;var h=function(){var b;"permissions"===c?a.PermissionAddAllowed?(b=q("base")+"permissions/"+d+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+d})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=w+f.user_id+"/"+c+"/",i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.username+" "+g+"?",action:h})}}),t(),a.removeModifyForm&&a.removeModifyForm(),a.removeModifyForm=a.$on("modifyForm",function(){i.setUrl(q("config")),i.get().success(function(b){var c,d;if(b.user_ldap_fields)for(c=0;c<b.user_ldap_fields.length;c++)d=b.user_ldap_fields[c],y.fields[d]&&(y.fields[d].readonly=!0,y.fields[d].editRequired=!1,y.fields[d].awRequiredWhen&&delete y.fields[d].awRequiredWhen);a.$emit("formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve application config. GET status: "+c})})}),u("start"),i.setUrl(w+B+"/"),i.get().success(function(b){a.$emit(null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?"modifyForm":"formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+B+". GET status: "+c})})}function chkPass(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=2,I=2,J=2,K=2,L=3,M=3,N=3,O=4,P=4,Q=6,R="",S="",T="",U="",V="0",W="0",X="0",Y="0",Z="0",_="0",ab="0",bb="0",cb="0",db="0",eb="0",fb="0",gb="0",hb="0",ib="abcdefghijklmnopqrstuvwxyz",jb="01234567890",kb=")_!@#$%^&*()",lb="Too Short";if(c=document.all?0:1,a){for(nScore=parseInt(a.length*O),n=a.length,d=a.replace(/\s+/g,"").split(/\s*/),e=d.length,b=0;e>b;b++){for(d[b].match(/[A-Z]/g)?(""!==R&&R+1==b&&(y++,C++),R=b,o++):d[b].match(/[a-z]/g)?(""!==S&&S+1==b&&(z++,C++),S=b,p++):d[b].match(/[0-9]/g)?(b>0&&e-1>b&&s++,""!==T&&T+1==b&&(A++,C++),T=b,q++):d[b].match(/[^a-zA-Z0-9_]/g)&&(b>0&&e-1>b&&s++,""!==U&&U+1==b&&(B++,C++),U=b,r++),f=!1,g=0;e>g;g++)d[b]==d[g]&&b!=g&&(f=!0,x+=Math.abs(e/(g-b)));f&&(w++,v=e-w,x=Math.ceil(v?x/v:x))}for(h=0;23>h;h++)i=ib.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(D++,G++);for(h=0;8>h;h++)i=jb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(E++,G++);for(h=0;8>h;h++)i=kb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(F++,G++);o>0&&n>o&&(nScore=parseInt(nScore+2*(n-o)),V="+ "+parseInt(2*(n-o))),p>0&&n>p&&(nScore=parseInt(nScore+2*(n-p)),W="+ "+parseInt(2*(n-p))),q>0&&n>q&&(nScore=parseInt(nScore+q*P),X="+ "+parseInt(q*P)),r>0&&(nScore=parseInt(nScore+r*Q),Y="+ "+parseInt(r*Q)),s>0&&(nScore=parseInt(nScore+s*H),Z="+ "+parseInt(s*H)),(p>0||o>0)&&0===r&&0===q&&(nScore=parseInt(nScore-n),t=n,_="- "+n),0===p&&0===o&&0===r&&q>0&&(nScore=parseInt(nScore-n),u=n,ab="- "+n),w>0&&(nScore=parseInt(nScore-x),bb="- "+x),y>0&&(nScore=parseInt(nScore-y*I),cb="- "+parseInt(y*I)),z>0&&(nScore=parseInt(nScore-z*J),db="- "+parseInt(z*J)),A>0&&(nScore=parseInt(nScore-A*K),eb="- "+parseInt(A*K)),D>0&&(nScore=parseInt(nScore-D*L),fb="- "+parseInt(D*L)),E>0&&(nScore=parseInt(nScore-E*M),gb="- "+parseInt(E*M)),F>0&&(nScore=parseInt(nScore-F*N),hb="- "+parseInt(F*N)),nScore>100?nScore=100:0>nScore&&(nScore=0),k=$("#progbar"),l=$AnsibleConfig.password_strength,m=$AnsibleConfig.password_strength-15<0?0:$AnsibleConfig.password_strength-15,k.css("width",nScore+"%"),nScore>=0&&m>=nScore?(lb="Weak",k.addClass("progress-bar-danger"),k.removeClass("progress-bar-success progress-bar-warning")):nScore>m&&l>=nScore?(lb="Good",k.addClass("progress-bar-warning"),k.removeClass("progress-bar-success progress-bar-danger")):nScore>l&&(lb="Strong",k.addClass("progress-bar-success"),k.removeClass("progress-bar-warning progress-bar-danger"))}else k=$("#progbar"),k.css("width","0%"),k.removeClass("progress-bar-success progress-bar-warning");return nScore}function AdminsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=h,r=o("organizations")+e.organization_id+"/users/",s=i,t="select",u=o("organizations")+e.organization_id+"/admins/";s.inject(h,{mode:t,scope:a}),p({scope:a,list:q,url:u,returnToCaller:1}),l({scope:a,set:"admins",list:q,url:r}),m({scope:a,list:q,url:r}),a.search(q.iterator),j()}function Authenticate(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o;l=function(){$("#login-username").focus()},n=k(d.sessionExpired)?a.get("sessionExpired"):d.sessionExpired,m=function(){return k(d.lastPath)?a.get("lastPath"):d.lastPath},$AnsibleConfig.debug_mode&&console&&(console.log("User session expired: "+n),console.log("Last URL: "+m())),$(".modal[aria-hidden=false]").each(function(){"login-modal"!==$(this).attr("id")&&$(this).modal("hide")}),i("stop"),$("#login-modal").modal({show:!0,keyboard:!1,backdrop:"static"}),$("#login-modal").on("shown.bs.modal",function(){l()}),o=angular.element(document.getElementById("login-modal")).scope(),o.login_username=null,o.login_password=null,o.loginForm.login_username.$setPristine(),o.loginForm.login_password.$setPristine(),"/logout"===e.path()&&f.logout(),d.userLoggedIn=!1,a.put("userLoggedIn",!1),$("#login-password").bind("keypress",function(a){var b=a.keyCode?a.keyCode:a.which;13===b&&$("#login-button").click()}),o.reset=function(){$("#login-form input").each(function(){$(this).val("")})},o.systemLogin=function(a,b){$(".api-error").empty();var c;k(a)||k(b)?h("Error!","Please provide a username and password before attempting to login.","alert-danger",l):(i("start"),f.retrieveToken(a,b).success(function(a,b){$("#login-modal").modal("hide"),c=a.token,f.setToken(a.token,a.expires),d.sessionTimer=j.init(),f.getUser().success(function(a){f.setUserInfo(a),d.user_is_superuser=a.results[0].is_superuser,f.getLicense().success(function(a){f.setLicense(a.license_info),m()?e.path(m()):e.url("/home?login=true")}).error(function(){i("stop"),h("Error","Failed to access user information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){i("stop"),h("Error","Failed to access license information. GET returned status: "+b,"alert-danger",l)})}).error(function(a,b){var c,d,e;if(i("stop"),a.non_field_errors&&0===a.non_field_errors.length)for(e in a)o[e+"Error"]=a[e][0];else a.non_field_errors&&a.non_field_errors.length>0?(c="Error",d=a.non_field_errors[0]):(c="Error",d="The login attempt failed with a status of: "+b),o.reset(),h(c,d,"alert-danger",l)}))}}function CredentialsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o(),t("start");var v,w=h,x=q("credentials"),y=i,z=c.path().replace(/^\//,"").split("/")[0],A="credentials"===z?"edit":"select";y.inject(w,{mode:A,scope:a}),a.selected=[],a.credentialLoading=!0,v=q(z)+("users"===z?e.user_id+"/credentials/":e.team_id+"/credentials/"),"select"===A&&r({scope:a,list:w,url:v,returnToCaller:1}),a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){var b,c;for(t("stop"),$("#prompt-modal").off(),w.fields.kind.searchOptions=a.credential_kind_options,b=0;b<a.credentials.length;b++)for(c=0;c<a.credential_kind_options.length;c++)if(a.credential_kind_options[c].value===a.credentials[b].kind){a.credentials[b].kind=a.credential_kind_options[c].label;break}}),a.removeChoicesReady&&a.removeChoicesReady(),a.removeChoicesReady=a.$on("choicesReadyCredential",function(){l({scope:a,set:"credentials",list:w,url:x}),m({scope:a,list:w,url:x}),a.search(w.iterator)}),s({scope:a,url:x,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),j(),a.showActivity=function(){u({scope:a})},a.addCredential=function(){c.path(c.path()+"/add")},a.editCredential=function(a){c.path(c.path()+"/"+a)},a.deleteCredential=function(b,c){var d=function(){$("#prompt-modal").on("hidden.bs.modal",function(){t("start")}),$("#prompt-modal").modal("hide");var c=x+b+"/";f.setUrl(c),f.destroy().success(function(){a.search(w.iterator)}).error(function(b,d){p(a,b,d,null,{hdr:"Error!",msg:"Call to "+c+" failed. DELETE returned status: "+d})})};k({hdr:"Delete",body:"Are you sure you want to delete "+c+"?",action:d})}}function CredentialsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){n();var A,B=g,C=h,D=u("credentials");C.inject(B,{mode:"add",related:!1,scope:a}),C.reset(),l(),v({scope:a,url:D,field:"kind",variable:"credential_kind_options"}),r({scope:a,form:B,current_item:w(f.user_id)?null:f.user_id,list:s,field:"user"}),r({scope:a,form:B,current_item:w(f.team_id)?null:f.team_id,list:t,field:"team"}),w(f.user_id)?w(f.team_id)?(a.owner="user",y({scope:a})):(a.owner="team",a.team=f.team_id,y({scope:a}),A=u("teams")+f.team_id+"/",i.setUrl(A),i.get().success(function(b){a.team_name=b.name}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve team. GET status: "+c})})):(a.owner="user",a.user=f.user_id,y({scope:a}),A=u("users")+f.user_id+"/",i.setUrl(A),i.get().success(function(b){a.user_username=b.username}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user. GET status: "+c})})),a.kindChange=function(){x({scope:a,form:B,reset:!0})},a.formSave=function(){C.clearApiErrors(),z({scope:a,mode:"add"})},a.ownerChange=function(){y({scope:a})},a.formReset=function(){C.reset()},a.clearPWConfirm=function(b){a[b]="",a[B.name+"_form"][b].$setValidity("awpassmatch",!1)},a.ask=function(b,c){a[b+"_ask"]?(a[b]="ASK",a[c]="",a[B.name+"_form"][c].$setValidity("awpassmatch",!0)):(a[b]="",a[c]="",a[B.name+"_form"][c].$setValidity("awpassmatch",!0))},a.clear=function(b,c){a[b]="",a[c]="",a[B.name+"_form"][c].$setValidity("awpassmatch",!0),a[B.name+"_form"].$setDirty()}}function CredentialsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){var b,c;for(b in F.fields)"password"===F.fields[b].type&&"ASK"===a[b]?($("#"+b+"-clear-btn").attr("disabled","disabled"),a[b+"_ask"]=!0):(a[b+"_ask"]=!1,$("#"+b+"-clear-btn").removeAttr("disabled")),H[b+"_ask"]=a[b+"_ask"];for(c=0;c<a.credential_kind_options.length;c++)if(a.kind===a.credential_kind_options[c].value){a.kind=a.credential_kind_options[c];break}}p();var D=r("credentials"),E=h,F=g,G=d.path().replace(/^\//,"").split("/")[0],H={},I=f.credential_id;E.inject(F,{mode:"edit",related:!0,scope:a}),E.reset(),a.id=I,a.removeCredentialLoaded&&a.removeCredentialLoaded(),a.removeCredentialLoaded=a.$on("credentialLoaded",function(){w({scope:a,form:F,current_item:x(a.user_id)?null:a.user_id,list:u,field:"user"}),w({scope:a,form:F,current_item:x(a.team_id)?null:a.team_id,list:v,field:"team"}),C(),t({scope:a,form:F,reset:!1}),y({scope:a}),B("stop")}),a.removeChoicesReady&&a.removeChoicesReady(),a.removeChoicesReady=a.$on("choicesReadyCredential",function(){i.setUrl(D+":id/"),i.get({params:{id:I}}).success(function(b){var c,d;l({path:"/credentials/"+I,title:b.name});for(d in F.fields)null!==b[d]&&void 0!==b[d]&&(a[d]=b[d],H[d]=a[d]),"lookup"===F.fields[d].type&&b.summary_fields[F.fields[d].sourceModel]&&(a[F.fields[d].sourceModel+"_"+F.fields[d].sourceField]=b.summary_fields[F.fields[d].sourceModel][F.fields[d].sourceField],H[F.fields[d].sourceModel+"_"+F.fields[d].sourceField]=a[F.fields[d].sourceModel+"_"+F.fields[d].sourceField]);for(a.owner=x(a.user)?"team":"user",H.owner=a.owner,c=0;c<a.credential_kind_options.length;c++)if(a.credential_kind_options[c].value===b.kind){a.kind=a.credential_kind_options[c];break}switch(H.kind=a.kind,b.kind){case"aws":a.access_key=b.username,a.secret_key=b.password,H.access_key=a.access_key,H.secret_key=a.secret_key;break;case"ssh":a.ssh_password=b.password,H.ssh_password=a.ssh_password;break;case"rax":a.api_key=b.password,H.api_key=a.api_key
}a.$emit("credentialLoaded")}).error(function(b,c){k(a,b,c,F,{hdr:"Error!",msg:"Failed to retrieve Credential: "+f.id+". GET status: "+c})})}),B("start"),s({scope:a,url:D,field:"kind",variable:"credential_kind_options",callback:"choicesReadyCredential"}),a.showActivity=function(){A({scope:a})},a.formSave=function(){E.clearApiErrors(),z({scope:a,mode:"edit"})},a.ownerChange=function(){y({scope:a})},a.kindChange=function(){t({scope:a,form:F,reset:!0})},a.formReset=function(){E.reset();for(var b in H)a[b]=H[b];C(),t({scope:a,form:F,reset:!1}),y({scope:a})},a.add=function(a){b.flashMessage=null,d.path("/"+G+"/"+f.id+"/"+a+"/add")},a.edit=function(a,c){b.flashMessage=null,d.path("/"+G+"/"+f.id+"/"+a+"/"+c)},a["delete"]=function(c,d,e,f){b.flashMessage=null;var g=function(){var b=D+I+"/"+c+"/";i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(F.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})})};q({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.name+" "+f+"?",action:g})},a.clearPWConfirm=function(b){a[b]="",a[F.name+"_form"][b].$setValidity("awpassmatch",!1)},a.ask=function(b,c){a[b+"_ask"]?($("#"+b+"-clear-btn").attr("disabled","disabled"),a[b]="ASK",a[c]="",a[F.name+"_form"][c].$setValidity("awpassmatch",!0)):($("#"+b+"-clear-btn").removeAttr("disabled"),a[b]="",a[c]="",a[F.name+"_form"][c].$setValidity("awpassmatch",!0))},a.clear=function(b,c){a[b]="",a[c]="",a[F.name+"_form"][c].$setValidity("awpassmatch",!0),a[F.name+"_form"].$setDirty()}}function Home(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){k("home");var q,r,s,t,u;q={refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},r=p({btn:q.refresh,action:"refresh",toolbar:!0}),r+=p({btn:q.stream,action:"stream",toolbar:!0}),s=angular.element(document.getElementById("home-list-actions")),s.html(r),b(s)(a),t=4,u=0,c.login||f("start"),a.removeWidgetLoaded&&a.removeWidgetLoaded(),a.removeWidgetLoaded=a.$on("WidgetLoaded",function(){u++,u===t&&f("stop")}),a.removeDashboardReady&&a.removeDashboardReady(),a.removeDashboardReady=a.$on("dashboardReady",function(b,c){h({scope:a,target:"container1",dashboard:c}),i({scope:a,target:"container2",dashboard:c}),j({scope:a,target:"container4",dashboard:c}),g({scope:a,target:"container3",dashboard:c})}),a.showActivity=function(){l({scope:a})},a.refresh=function(){f("start"),u=0,m.setUrl(n("dashboard")),m.get().success(function(b){a.$emit("dashboardReady",b)}).error(function(b,c){f("stop"),o(a,b,c,null,{hdr:"Error!",msg:"Failed to get dashboard: "+c})})},a.refresh()}function HomeGroups(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){h("htmlTemplate");var x,y=d,z=c,A=i("groups"),B=y.inject(z,{mode:"edit"});if(B.removePostRefresh&&B.removePostRefresh(),B.removePostRefresh=B.$on("PostRefresh",function(){var a,b,c;for(a=0;a<B.home_groups.length;a++)B.home_groups[a].inventory_name=B.home_groups[a].summary_fields.inventory.name,c=n({status:B.home_groups[a].summary_fields.inventory_source.status}),b=m({active_failures:B.home_groups[a].hosts_with_active_failures,total_hosts:B.home_groups[a].total_hosts,inventory_id:B.home_groups[a].inventory,group_id:B.home_groups[a].id}),B.home_groups[a].status_class=c["class"],B.home_groups[a].status_tooltip=c.tooltip,B.home_groups[a].launch_tooltip=c.launch_tip,B.home_groups[a].launch_class=c.launch_class,B.home_groups[a].hosts_status_tip=b.tooltip,B.home_groups[a].show_failures=b.failures,B.home_groups[a].hosts_status_class=b["class"],B.home_groups[a].status=B.home_groups[a].summary_fields.inventory_source.status,B.home_groups[a].source=B.home_groups[a].summary_fields.inventory_source?B.home_groups[a].summary_fields.inventory_source.source:null}),j({scope:B,set:"home_groups",list:z,url:A}),k({scope:B,list:z,url:A}),b.name&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.name,B[z.iterator+"SearchField"]="name",B[z.iterator+"SearchFieldLabel"]=z.fields.name.label,B[z.iterator+"SearchSelectValue"]=null),b.id&&(B[z.iterator+"InputDisable"]=!1,B[z.iterator+"SearchValue"]=b.id,B[z.iterator+"SearchField"]="id",B[z.iterator+"SearchFieldLabel"]=z.fields.id.label,B[z.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchValue"]=b.has_active_failures,B[z.iterator+"SearchField"]="has_active_failures",B[z.iterator+"SearchFieldLabel"]=z.fields.has_active_failures.label,B[z.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),b.status&&!b.source){B[z.iterator+"SearchField"]="status",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br\>/g," ");for(x in z.fields.status.searchOptions)if(z.fields.status.searchOptions[x].value===b.status){B[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[x];break}}if(b.source){B[z.iterator+"SearchField"]="source",B[z.iterator+"SelectShow"]=!0,B[z.iterator+"SearchSelectOpts"]=z.fields.source.searchOptions,B[z.iterator+"SearchFieldLabel"]=z.fields.source.label.replace(/<br\>/g," ");for(x in z.fields.source.searchOptions)if(z.fields.source.searchOptions[x].value===b.source){B[z.iterator+"SearchSelectValue"]=z.fields.source.searchOptions[x];break}b.status&&(B[z.iterator+"ExtraParms"]="&inventory_source__status__icontains="+b.status)}b.has_external_source&&(B[z.iterator+"SearchField"]="has_external_source",B[z.iterator+"SearchValue"]=z.fields.has_external_source.searchValue,B[z.iterator+"InputDisable"]=!0,B[z.iterator+"SearchType"]="in",B[z.iterator+"SearchFieldLabel"]=z.fields.has_external_source.label),B.search(z.iterator),f(),B.showActivity=function(){p({scope:B})},B.editGroup=function(a,b){q({scope:B,group_id:a,inventory_id:b,groups_reload:!1})},B.viewUpdateStatus=function(a){B.groups=B.home_groups,o({scope:B,tree_id:a})},B.updateGroup=function(a){var b=w({list:B.home_groups,key:"id",val:a});b&&(u(b.source)||("updating"===b.status?s("Update in Progress","The inventory update process is currently running for group <em>"+b.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(r("start"),t.setUrl(b.related.inventory_source),t.get().success(function(a){v({scope:B,url:a.related.update,group_name:a.summary_fields.group.name,group_source:a.source,tree_id:b.id,group_id:b.id})}).error(function(a,c){e(B,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+b.related.inventory_source+" POST returned status: "+c})}))))},B.refresh=function(){B.search(z.iterator,null,!1,!0)}}function HomeHosts(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){h("htmlTemplate");var s=d,t=c,u=i("hosts"),v=s.inject(t,{mode:"edit"});v.removePostRefresh&&v.removePostRefresh(),v.removePostRefresh=v.$on("PostRefresh",function(){for(var a=0;a<v.hosts.length;a++)v.hosts[a].inventory_name=v.hosts[a].summary_fields.inventory.name,m({scope:v,host:v.hosts[a]})}),j({scope:v,set:"hosts",list:t,url:u}),k({scope:v,list:t,url:u}),b.name&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.name,v[c.iterator+"SearchField"]="name",v[c.iterator+"SearchFieldLabel"]=t.fields.name.label),b.id&&(v[c.iterator+"InputDisable"]=!1,v[c.iterator+"SearchValue"]=b.id,v[c.iterator+"SearchField"]="id",v[c.iterator+"SearchFieldLabel"]=t.fields.id.label,v[c.iterator+"SearchSelectValue"]=null),b.has_active_failures&&(v[c.iterator+"InputDisable"]=!0,v[c.iterator+"SearchValue"]=b.has_active_failures,v[c.iterator+"SearchField"]="has_active_failures",v[c.iterator+"SearchFieldLabel"]=c.fields.has_active_failures.label,v[c.iterator+"SearchSelectValue"]="true"===b.has_active_failures?{value:1}:{value:0}),v.search(t.iterator),f(),v.showActivity=function(){p({scope:v})},v.toggle_host_enabled=function(a,b){n({host_id:a,external_source:b,scope:v})},v.editHost=function(a){var b=q({list:v.hosts,key:"id",val:a});b&&o({scope:v,host_id:a,inventory_id:b.inventory,group_id:null,hostsReload:!1})},v.showJobSummary=function(a){r({job_id:a})}}function InventoriesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o();var u=h,v=q("inventory"),w=i,x=c.path().replace(/^\//,"").split("/"),y="inventories"===x[0]?"edit":"select";w.inject(h,{mode:y,$scope:a}),b.flashMessage=null,l({scope:a,set:"inventories",list:u,url:v}),m({scope:a,list:u,url:v}),e.name&&(a[h.iterator+"InputDisable"]=!1,a[h.iterator+"SearchValue"]=e.name,a[h.iterator+"SearchField"]="name",a[h.iterator+"SearchFieldLabel"]=h.fields.name.label,a[h.iterator+"SearchSelectValue"]=null),e.has_active_failures&&(a[h.iterator+"InputDisable"]=!0,a[h.iterator+"SearchValue"]=e.has_active_failures,a[h.iterator+"SearchField"]="has_active_failures",a[h.iterator+"SearchFieldLabel"]=h.fields.has_active_failures.label,a[h.iterator+"SearchSelectValue"]="true"===e.has_active_failures?{value:1}:{value:0}),e.has_inventory_sources&&(a[h.iterator+"InputDisable"]=!0,a[h.iterator+"SearchValue"]=e.has_inventory_sources,a[h.iterator+"SearchField"]="has_inventory_sources",a[h.iterator+"SearchFieldLabel"]=h.fields.has_inventory_sources.label,a[h.iterator+"SearchSelectValue"]="true"===e.has_inventory_sources?{value:1}:{value:0}),e.inventory_sources_with_failures&&(a[h.iterator+"InputDisable"]=!0,a[h.iterator+"SearchValue"]=e.inventory_sources_with_failures,a[h.iterator+"SearchField"]="inventory_sources_with_failures",a[h.iterator+"SearchFieldLabel"]=h.fields.inventory_sources_with_failures.label,a[h.iterator+"SearchType"]="gtzero"),a.search(u.iterator),j(),a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off();for(var b=0;b<a.inventories.length;b++)a.inventories[b].hosts_with_active_failures>0?(a.inventories[b].failed_hosts_tip=a.inventories[b].hosts_with_active_failures+(1===a.inventories[b].hosts_with_active_failures?" host":" hosts")+" with job failures. Click to view details.",a.inventories[b].failed_hosts_link="/#/inventories/"+a.inventories[b].id+"/",a.inventories[b].failed_hosts_class="true"):0===a.inventories[b].total_hosts?(a.inventories[b].failed_hosts_tip="No hosts defined. Click to add.",a.inventories[b].failed_hosts_link="/#/inventories/"+a.inventories[b].id+"/",a.inventories[b].failed_hosts_class="na"):(a.inventories[b].failed_hosts_tip=a.inventories[b].total_hosts+(a.inventories[b].total_hosts>1?" hosts":" host")+" with no job failures. Click to view details.",a.inventories[b].failed_hosts_link="/#/inventories/"+a.inventories[b].id+"/",a.inventories[b].failed_hosts_class="false"),a.inventories[b].status=a.inventories[b].inventory_sources_with_failures+" / "+a.inventories[b].total_inventory_sources,a.inventories[b].inventory_sources_with_failures>0?(a.inventories[b].status_tip=a.inventories[b].inventory_sources_with_failures+" cloud "+(1===a.inventories[b].inventory_sources_with_failures?"source":"sources")+" with failures. Click to view details.",a.inventories[b].status_link="/#/inventories/"+a.inventories[b].id+"/",a.inventories[b].status_class="failed"):0===a.inventories[b].total_inventory_sources?(a.inventories[b].status_tip="Not synced with a cloud source. Click to edit.",a.inventories[b].status_link="/#/inventories/"+a.inventories[b].id+"/",a.inventories[b].status_class="na"):(a.inventories[b].status_tip=a.inventories[b].total_inventory_sources+" cloud "+(a.inventories[b].total_inventory_sources>1?"sources":"source")+" with no failures. Click to view details.",a.inventories[b].status_link="/#/inventories/"+a.inventories[b].id+"/",a.inventories[b].status_class="successful")}),a.removeRefreshInventories&&a.removeRefreshInventories(),a.removeRefreshInventories=a.$on("RefreshInventories",function(){a.search(u.iterator)}),a.showActivity=function(){s({scope:a})},a.editInventoryProperties=function(b){t({scope:a,inventory_id:b})},a.addInventory=function(){c.path(c.path()+"/add")},a.editInventory=function(a){c.path(c.path()+"/"+a)},a.deleteInventory=function(b,c){var d=function(){var c=v+b+"/";$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide"),f.setUrl(c),f.destroy().success(function(){a.search(u.iterator)}).error(function(b,d){r("stop"),p(a,b,d,null,{hdr:"Error!",msg:"Call to "+c+" failed. DELETE returned status: "+d})})};k({hdr:"Delete",body:"Are you sure you want to delete "+c+"?",action:d})},a.lookupOrganization=function(a){f.setUrl(q("organizations")+a+"/"),f.get().success(function(a){return a.name})},a.viewJobs=function(a){c.url("/jobs/?inventory__int="+a)},a.viewFailedJobs=function(a){c.url("/jobs/?inventory__int="+a+"&status=failed")}}function InventoriesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n();var w=t("inventory"),x=g,y=h;x.well=!0,x.formLabelSize=null,x.formFieldSize=null,y.inject(x,{mode:"add",related:!1,scope:a}),a.inventoryParseType="yaml",y.reset(),l(),u(a,"inventory_variables","inventoryParseType"),s({scope:a,form:x,current_item:f.organization_id?f.organization_id:null,list:p,field:"organization"}),a.formSave=function(){y.clearApiErrors(),v("start");try{var b,c,e;if(c="json"===a.inventoryParseType?JSON.parse(a.inventory_variables):jsyaml.load(a.inventory_variables),"object"!=typeof c)throw"failed to return an object!";e={};for(b in x.fields)"inventory_variables"!==b&&(x.fields[b].realName?e[x.fields[b].realName]=a[b]:e[b]=a[b]);i.setUrl(w),i.post(e).success(function(b){var e=b.id;a.inventory_variables?(i.setUrl(b.related.variable_data),i.put(c).success(function(){v("stop"),d.path("/inventories/"+e+"/")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to add inventory varaibles. PUT returned status: "+c})})):(v("stop"),d.path("/inventories/"+e+"/"))}).error(function(b,c){k(a,b,c,x,{hdr:"Error!",msg:"Failed to add new inventory. Post returned status: "+c})})}catch(f){v("stop"),j("Error","Error parsing inventory variables. Parser returned: "+f)}},a.formReset=function(){y.reset()}}function InventoriesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){f();var Q=e,R=g;a.inventory_id=c.inventory_id,r({path:b.path(),title:"{{ inventory_name }}"}),a.removeGroupTreeLoaded&&a.removeGroupTreeLoaded(),a.removeGroupTreeLoaded=a.$on("GroupTreeLoaded",function(b,c,e){var f,g;f=angular.element(document.getElementById("breadcrumbs")),f.html(q({list:R,mode:"edit"})),d(f)(a),Q.inject(R,{mode:"edit",id:"groups-container",breadCrumbs:!1,searchSize:"col-lg-5 col-md-5 col-sm-5"}),a.groups=e,a.inventory_name=c,a.groups.length>0?(a.selected_tree_id=a.groups[0].id,a.selected_group_id=a.groups[0].group_id,a.groups[0].selected_class="selected",a.groups[0].active_class="active-row",a.selected_group_name=a.groups[0].name):(a.selected_tree_id=null,a.selected_group_id=null),a.show_failures=!1,l({scope:a,inventory_id:a.inventory_id,tree_id:a.selected_tree_id,group_id:a.selected_group_id}),setTimeout(function(){$("#groups_table .name-column").each(function(){var a,b,c,d,e;a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%",$(this).find(".group-name").css({width:e})}),L("#groups_table .group-name a"),L("#hosts_table .host-name a")},2500),M(),g=P("inventoryAutoHelp"),"off"!==g&&a.autoShowGroupHelp&&a.showGroupHelp({autoShow:!0})}),a.removeGroupTreeRefreshed&&a.removeGroupTreeRefreshed(),a.removeGroupTreeRefreshed=a.$on("GroupTreeRefreshed",function(){setTimeout(function(){L("#groups_table .group-name a")},2500),a.showHosts(a.selected_tree_id,a.selected_group_id,!1)}),a.removeGroupDeleteCompleted&&a.removeGroupDeleteCompleted(),a.removeGroupDeleteCompleted=a.$on("GroupDeleteCompleted",function(){a.selected_tree_id=1,a.selected_group_id=null,i({scope:a,inventory_id:a.inventory_id,refresh:!0})}),a.removeCopMoveGroup&&a.removeCopyMoveGroup(),a.removeCopyMoveGroup=a.$on("CopyMoveGroup",function(b,c,d){G({scope:a,target_tree_id:d,inbound_tree_id:c})}),a.removeCopMoveHost&&a.removeCopyMoveHost(),a.removeCopyMoveHost=a.$on("CopyMoveHost",function(b,c,d){H({scope:a,target_tree_id:c,host_id:d})}),a.showHosts=function(b,c,d){if(null!==b){j("start"),a.selected_tree_id=b,a.selected_group_id=c,a.hosts=[],a.show_failures=d;for(var e=0;e<a.groups.length;e++)a.groups[e].id===b?(a.groups[e].selected_class="selected",a.groups[e].active_class="active-row",a.selected_group_name=a.groups[e].name):(a.groups[e].selected_class="",a.groups[e].active_class="");m({scope:a,group_id:c,tree_id:b,inventory_id:a.inventory_id})}else j("stop")},a.createGroup=function(){n({scope:a,inventory_id:a.inventory_id,group_id:a.selected_group_id})},a.editGroup=function(b,c){o({scope:a,inventory_id:a.inventory_id,group_id:b,tree_id:c,groups_reload:!0})},a.updateGroup=function(b){var c=A({list:a.groups,key:"id",val:b});c&&(s(c.source)||("updating"===c.status?w("Update in Progress","The inventory update process is currently running for group <em>"+c.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):(j("start"),t.setUrl(c.related.inventory_source),t.get().success(function(b){v({scope:a,url:b.related.update,group_name:b.summary_fields.group.name,group_source:b.source,tree_id:c.id,group_id:c.group_id})}).error(function(b,d){j("stop"),u(a,b,d,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+c.related.inventory_source+" POST returned status: "+d})}))))},a.cancelUpdate=function(b){z({scope:a,tree_id:b})},a.toggle=function(b){x({scope:a,list:R,id:b})},a.refreshGroups=function(b,c){b&&(a.selected_tree_id=b,a.selected_group_id=c),i({scope:a,inventory_id:a.inventory_id,refresh:!0})},a.viewUpdateStatus=function(b,c){y({scope:a,tree_id:b,group_id:c})},a.deleteGroup=function(b,c){p({scope:a,tree_id:b,group_id:c,inventory_id:a.inventory_id})},a.createHost=function(){B({scope:a})},a.editInventoryProperties=function(){C({scope:a,inventory_id:a.inventory_id})},a.editHost=function(b){D({scope:a,host_id:b,inventory_id:a.inventory_id})},a.deleteHost=function(b,c){E({scope:a,host_id:b,host_name:c})},a.toggleHostEnabled=function(b,c){F({scope:a,host_id:b,external_source:c})},a.showGroupActivity=function(){var b,c,d;a.selected_group_id?(d=A({list:a.groups,key:"id",val:a.selected_tree_id}),b=J("activity_stream")+"?group__id="+a.selected_group_id,c="Showing all activities for group "+d.name):(c="Showing all activities for all "+a.inventory_name+" groups",b=J("activity_stream")+"?group__inventory__id="+a.inventory_id),I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showHostActivity=function(){var b,c;c="Showing all activities for all "+a.inventory_name+" hosts",b=J("activity_stream")+"?host__inventory__id="+a.inventory_id,I({scope:a,inventory_name:a.inventory_name,url:b,title:c})},a.showJobSummary=function(a){K({job_id:a})},a.showGroupHelp=function(a){var b={defn:O};a&&(b.autoShow=a.autoShow||!1),N(b)},i({scope:a,inventory_id:a.inventory_id,refresh:!1})}function JobEventsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(a){var b,c,d,e,f,g="",h=!1;if(a.res){if("string"==typeof a.res)c=a.res.match(/\n/g),d=c?c.length:1,d=d>10?10:d,h=!0,g+='<div class="form-group">\n',g+="<label>Traceback:</label>\n",g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res+"</textarea>\n",g+="</div>\n";else for(e in a.res){if(("msg"===e||"stdout"===e||"stderr"===e)&&null!==a.res[e]&&""!==a.res[e]){switch(g+='<div class="form-group">\n',g+="<label>",e){case"msg":case"stdout":g+="Output:";break;case"stderr":g+="Error:"}g+="</label>\n",c=a.res[e].match(/\n/g),d=c?c.length:1,d=d>10?10:d,g+='<textarea readonly class="form-control nowrap" rows="'+d+'">'+a.res[e]+"</textarea>\n",g+="</div>\n",h=!0}if("results"===e&&Array.isArray(a.res[e])&&a.res[e].length>0){for(f="",b=0;b<a.res[e].length;b++)f+=a.res[e][b];c=f.match(/\n/g),d=c?c.length:1,d=d>10?10:d,""!==f&&(g+='<div class="form-group">\n',g+="<label>Results:</label>\n",g+='<textarea readonly class="form-control nowrap mono-space" rows="'+d+'">'+f+"</textarea>\n",g+="</div>\n",h=!0)}"rc"===e&&""!==a.res[e]&&(g+='<div class="form-group">\n',g+="<label>Return Code:</label>\n",g+='<input type="text" class="form-control nowrap mono-space" value="'+a.res[e]+'" readonly >\n',g+="</div>\n",h=!0)}g=h?'<form class="event-form">\n'+g+"</form>\n":""}return g=a.hosts?'<span class="event-detail-host visible-sm">'+a.host+"</span>\n"+g:""===g?null:g}p();var z,A=i,B=r("jobs")+f.id+"/job_events/",C=j;C.inject(A,{mode:"edit",scope:b}),A.base=d.path(),b.job_id=f.id,c.flashMessage=null,b.selected=[],b.expand=!0,b.parentNode="parent-event",b.childNode="child-event",b.removeSetHostLinks&&b.removeSetHostLinks(),b.removeSetHostLinks=b.$on("SetHostLinks",function(a,c){for(var d=0;d<b.jobevents.length;d++)b.jobevents[d].summary_fields.host&&(b.jobevents[d].hostLink="/#/inventories/"+c+"/hosts/?name="+encodeURI(b.jobevents[d].summary_fields.host.name))}),b.removePostRefresh&&b.removePostRefresh(),b.removePostRefresh=b.$on("PostRefresh",function(){var c,d=b[A.name];for(c=0;c<d.length;c++)d[c].event_display=d[c].event_display.replace(/^\u00a0*/g,""),d[c].event_level<3?(d[c].ngclick="toggleChildren("+d[c].id+', "'+d[c].related.children+'")',d[c].ngicon="fa fa-minus-square-o node-toggle",d[c]["class"]="parentNode"):(d[c].ngicon="fa fa-square-o node-no-toggle",d[c]["class"]="childNode",d[c].event_detail=y(d[c].event_data)),d[c].show=!0,d[c].spaces=24*d[c].event_level,b.jobevents[c].failed?(b.jobevents[c].status="error",b.jobevents[c].statusBadgeToolTip=c===d.length-1?"A failure occurred durring one or more playbook tasks.":d[c].event_level<3?"A failure occurred within the children of this event.":"A failure occurred. Click to view details"):b.jobevents[c].changed?(b.jobevents[c].status="changed",b.jobevents[c].statusBadgeToolTip=c===d.length-1?"A change was completed durring one or more playbook tasks.":d[c].event_level<3?"A change was completed by one or more children of this event.":"A change was completed. Click to view details"):(b.jobevents[c].status="success",b.jobevents[c].statusBadgeToolTip=c===d.length-1?"All playbook tasks completed successfully.":d[c].event_level<3?"All the children of this event completed successfully.":"No errors occurred. Click to view details"),d[c].created=a("date")(d[c].created,"MM/dd HH:mm:ss");g.setUrl(r("jobs")+b.job_id),g.get().success(function(a){b.job_status=a.status,b.job_name=a.summary_fields.job_template.name,k({path:"/jobs/"+b.job_id,title:b.job_id+" - "+a.summary_fields.job_template.name}),b.$emit("SetHostLinks",a.inventory)}).error(function(a,c){q(b,a,c,null,{hdr:"Error!",msg:"Failed to get job status for job: "+b.job_id+". GET status: "+c})})}),m({scope:b,set:"jobevents",list:A,url:B}),z=f.page?parseInt(f.page,10)-1:null,n({scope:b,list:A,url:B,page:z}),f.host&&(b[A.iterator+"SearchField"]="host",b[A.iterator+"SearchValue"]=f.host,b[A.iterator+"SearchFieldLabel"]=A.fields.host.label),b.search(A.iterator,f.page),b.toggleChildren=function(a,c){t({scope:b,list:A,id:a,children:c})},b.viewJobEvent=function(a){v({event_id:a})},b.refresh=function(){b.jobSearchSpin=!0,b.jobLoading=!0,x("start"),w({scope:b,set:"jobevents",iterator:"jobevent",url:b.current_url})}}function JobEventsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){m();var r=g,s=h,t=n("base")+"job_events/"+f.event_id+"/";s.inject(r,{mode:"edit",related:!0,scope:a}),s.reset(),q("start"),i.setUrl(t),i.get().success(function(b){var c,d,e,g;a.event_display=b.event_display.replace(/^\u00a0*/g,""),l({path:"/jobs/"+f.job_id+"/job_events/"+f.event_id,title:a.event_display});for(d in r.fields)switch(d){case"status":a.status=b.failed?"error":b.changed?"changed":"success";break;case"created":c=new Date(b.created),a.created=o(c);break;case"host":b.summary_fields&&b.summary_fields.host&&(a.host=b.summary_fields.host.name);break;case"id":case"task":case"play":a[d]=b[d];break;case"start":case"end":b.event_data&&b.event_data.res&&void 0!==b.event_data.res[d]&&(c=new Date(b.event_data.res[d]),a[d]=o(c));break;case"msg":case"stdout":case"stderr":case"delta":case"rc":b.event_data&&b.event_data.res&&void 0!==b.event_data.res[d]&&(a[d]=b.event_data.res[d],"textarea"===r.fields[d].type&&(e=b.event_data.res[d].match(/\n/g),g=e?e.length:1,g=g>15?5:g,$('textarea[name="'+d+'"]').attr("rows",g)));break;case"module_name":case"module_args":b.event_data.res&&b.event_data.res.invocation&&(a[d]=b.event_data.res.invocation.fld)}q("stop")}).error(function(b){k(a,b,status,null,{hdr:"Error!",msg:"Failed to retrieve host: "+f.event_id+". GET status: "+status})}),a.navigateBack=function(){var a="/jobs/"+f.job_id+"/job_events";f.page&&(a+="?page="+f.page),d.url(a)},a.rawView=function(){p({event_id:a.id})}}function JobHostSummaryList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o();var u=h,v=c.path().replace(/^\//,"").split("/")[0],w=q(v)+e.id+"/job_host_summaries/",x=i,y=x.inject(u,{mode:"edit"});u.index="hosts"===v?!1:!0,a.selected=[],"hosts"===v?(a.job_id=null,a.host_id=e.id):(a.job_id=e.id,a.host_id=null),a.RemoveSetHostLink&&a.RemoveSetHostLink(),a.RemoveSetHostLink=a.$on("setHostLink",function(b,c){for(var d=0;d<a.jobhosts.length;d++)a.jobhosts[d].hostLinkTo="/#/inventories/"+c+"/?host_name="+encodeURI(a.jobhosts[d].summary_fields.host.name)}),a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){for(var c=0;c<a.jobhosts.length;c++)a.jobhosts[c].host_name=a.jobhosts[c].summary_fields.host.name,a.jobhosts[c].status=a.jobhosts[c].failed?"failed":"success",a.jobhosts[c].statusBadgeToolTip=s(a.jobhosts[c].status)+" Click to view details.",a.jobhosts[c].statusLinkTo="/#/jobs/"+a.jobhosts[c].job+"/job_events/?host="+encodeURI(a.jobhosts[c].summary_fields.host.name);null!==a.job_id&&void 0!==a.job_id&&""!==a.job_id?(f.setUrl(q("jobs")+a.job_id),f.get().success(function(c){j({path:"/jobs/"+c.id,title:c.id+" - "+c.summary_fields.job_template.name}),a.job_status=c.status,"pending"!==c.status&&"waiting"!==c.status&&"running"!==c.status&&b.timer&&clearInterval(b.timer),a.$emit("setHostLink",c.inventory)}).error(function(b,c){p(y,b,c,null,{hdr:"Error!",msg:"Failed to get job status for job: "+a.job_id+". GET status: "+c})})):(j({path:"/hosts/"+a.host_id,title:a.jobhosts.length>0?a.jobhosts[0].summary_fields.host.name:"Host"}),e.inventory&&a.$emit("setHostLink",e.inventory))}),l({scope:y,set:"jobhosts",list:u,url:w}),m({scope:y,list:u,url:w}),e.host_name&&(y[u.iterator+"SearchField"]="host",y[u.iterator+"SearchValue"]=e.host_name,y[u.iterator+"SearchFieldLabel"]=u.fields.host.label),a.search(u.iterator),a.showEvents=function(a,b){f.setUrl(b),f.get().success(function(b){j({path:"/jobs/"+b.id,title:b.name}),c.url("/jobs/"+b.id+"/job_events/?host="+encodeURI(a))}).error(function(a,c){p(y,a,c,null,{hdr:"Error!",msg:"Failed to lookup last job: "+b+". GET status: "+c})})},a.showJob=function(a){c.path("/jobs/"+a)},a.refresh=function(){null===a.host_id&&(a.jobSearchSpin=!0,a.jobLoading=!0,t("start"),r({scope:y,set:"jobhosts",iterator:"jobhost",url:a.current_url}))}}function JobTemplatesList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o();var y=h,z=q("job_templates"),A=i,B=c.path().replace(/^\//,"").split("/")[0],C="job_templates"===B?"edit":"select";A.inject(y,{mode:C,scope:a}),b.flashMessage=null,a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){w("stop"),$("#prompt-modal").off()}),l({scope:a,set:"job_templates",list:y,url:z}),m({scope:a,list:y,url:z}),e.name&&(a[y.iterator+"SearchField"]="name",a[y.iterator+"SearchValue"]=e.name,a[y.iterator+"SearchFieldLabel"]=y.fields.name.label),a.search(y.iterator),j(),a.showActivity=function(){x({scope:a})},a.addJobTemplate=function(){c.path(c.path()+"/add")},a.editJobTemplate=function(a){c.path(c.path()+"/"+a)},a.deleteJobTemplate=function(b,c){var d=function(){$("#prompt-modal").on("hidden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var c=z+b+"/";f.setUrl(c),f.destroy().success(function(){a.search(y.iterator)}).error(function(b){w("stop"),p(a,b,status,null,{hdr:"Error!",msg:"Call to "+c+" failed. DELETE returned status: "+status})})};k({hdr:"Delete",body:"Are you sure you want to delete "+c+"?",action:d})},a.submitJob=function(b){v({scope:a,id:b})}}function JobTemplatesAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){n();var x,y,z=o("job_templates"),A=g,B=h,C={},D={};B.inject(A,{mode:"add",related:!1,scope:a}),a.parseType="yaml",u(a),a.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],a.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],a.playbook_options=[],a.allow_callbacks="false",B.reset(),l(),t({scope:a,master:C,check_field:"allow_callbacks",default_val:!1}),s({scope:a,form:A,current_item:null,list:p,field:"inventory"}),jQuery.extend(!0,D,q),D.name="cloudcredentials",D.iterator="cloudcredential",s({url:o("credentials")+"?cloud=true",scope:a,form:A,current_item:null,list:D,field:"cloud_credential",hdr:"Select Cloud Credential"}),s({url:o("credentials")+"?kind=ssh",scope:a,form:A,current_item:null,list:q,field:"credential",hdr:"Select Machine Credential"}),x=function(b,c){var d;b!==c&&a.project&&(v("start"),d=o("projects")+a.project+"/playbooks/",i.setUrl(d),i.get().success(function(b){var c,d=[];for(c=0;c<b.length;c++)d.push(b[c]);a.playbook_options=d,v("stop")}).error(function(b,c){k(a,b,c,A,{hdr:"Error!",msg:"Failed to get playbook list for "+d+". GET returned status: "+c})}))},y=function(b,c){b===c||w(a.project)||(i.setUrl(o("projects")+a.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}b&&j("Waning",b,"alert-info")}).error(function(b,c){k(a,b,c,A,{hdr:"Error!",msg:"Failed to get project "+a.project+". GET returned status: "+c})}))},a.selectPlaybookUnregister&&a.selectPlaybookUnregister(),a.selectPlaybookUnregister=a.$watch("project_name",function(a,b){x(a,b),y(a,b)}),s({scope:a,form:A,current_item:null,list:r,field:"project"}),a.formSave=function(){B.clearApiErrors(),v("start");var b,c,e={};try{if(b="json"===a.parseType?JSON.parse(a.variables):jsyaml.load(a.variables),"object"!=typeof b)throw"failed to return an object!";for(c in A.fields)"select"===A.fields[c].type&&"playbook"!==c?e[c]=a[c].value:"variables"!==c&&(e[c]=a[c]);e.extra_vars=JSON.stringify(b,void 0,"	"),w(e.extra_vars)&&(e.extra_vars=""),i.setUrl(z),i.post(e).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&m(),m(1)}).error(function(b,c){v("stop"),k(a,b,c,A,{hdr:"Error!",msg:"Failed to add new job template. POST returned status: "+c})})}catch(f){v("stop"),j("Error","Error parsing extra variables. Parser returned: "+f)}},a.formReset=function(){B.reset();for(var b in C)a[b]=C[b]}}function JobTemplatesEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){p();var E,F,G=v("job_templates"),H=h,I=g,J=0,K=d.path().replace(/^\//,"").split("/")[0],L={},M=f.id,N={};H.inject(I,{mode:"edit",related:!0,scope:a}),a.parseType="yaml",x(a),a.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],a.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],a.playbook_options=null,a.playbook=null,H.reset(),F=function(b){var c;C(b)||(c=v("projects")+b+"/playbooks/",A("start"),i.setUrl(c),i.get().success(function(b){var c;for(a.playbook_options=[],c=0;c<b.length;c++)a.playbook_options.push(b[c]),b[c]===a.playbook&&a.job_templates_form.playbook.$setValidity("required",!0);
a.playbook?a.$emit("jobTemplateLoadFinished"):A("stop")}).error(function(){A("stop"),j("Missing Playbooks","Unable to retrieve the list of playbooks for this project. Choose a different  project or make the playbooks available on the file system.","alert-info")}))},E=function(){C(a.project)||(A("start"),i.setUrl(v("projects")+a.project+"/"),i.get().success(function(a){var b;switch(a.status){case"failed":b="The selected project has a <em>failed</em> status. Review the project's SCM settings and run an update before adding it to a template.";break;case"never updated":b="The selected project has a <em>never updated</em> status. You will need to run a successful update in order to selected a playbook. Without a valid playbook you will not be able  to save this template.";break;case"missing":b="The selected project has a status of <em>missing</em>. Please check the server and make sure  the directory exists and file permissions are set correctly."}A("stop"),b&&j("Waning",b,"alert-info")}).error(function(b,c){k(a,b,c,I,{hdr:"Error!",msg:"Failed to get project "+a.project+". GET returned status: "+c})}))},a.watchProjectUnregister&&a.watchProjectUnregister(),a.watchProjectUnregister=a.$watch("project_name",function(b,c){b!==c&&""!==c&&null!==c&&void 0!==c&&(a.playbook=null,F(a.project),E())}),a.removeJobTemplateLoadFinished&&a.removeJobTemplateLoadFinished(),a.removeJobTemplateLoadFinished=a.$on("jobTemplateLoadFinished",function(){if(J++,J>=2)for(var b in N)a.search(N[b].iterator)}),a.removeRelatedJobs&&a.removeRelatedJobs(),a.removeRelatedJobs=a.$on("relatedjobs",function(){var b,c;if(a.jobs&&a.jobs.length)for(b=0;b<a.jobs.length;b++)c=new Date(a.jobs[b].created),a.jobs[b].created=z(c),a.jobs[b].statusBadgeToolTip=y(a.jobs[b].status)+" Click to view status details.",a.jobs[b].statusLinkTo="/#/jobs/"+a.jobs[b].id}),a.cloudCredentialReadyRemove&&a.cloudCredentialReadyRemove(),a.cloudCredentialReadyRemove=a.$on("cloudCredentialReady",function(b,c){var d={};a.cloud_credential_name=c,L.cloud_credential_name=c,jQuery.extend(!0,d,r),d.name="cloudcredentials",d.iterator="cloudcredential",t({url:v("credentials")+"?cloud=true",scope:a,form:I,current_item:a.cloud_credential,list:d,field:"cloud_credential",hdr:"Select Cloud Credential"}),a.$emit("jobTemplateLoadFinished")}),a.jobTemplateLoadedRemove&&a.jobTemplateLoadedRemove(),a.jobTemplateLoadedRemove=a.$on("jobTemplateLoaded",function(b,c){var d;F(a.project),d=""===a.host_config_key||null===a.host_config_key?"false":"true",w({scope:a,master:L,check_field:"allow_callbacks",default_val:d}),c?(i.setUrl(c),i.get().success(function(b){a.$emit("cloudCredentialReady",b.name)}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+c})})):a.$emit("cloudCredentialReady",null)}),A("start"),i.setUrl(G+":id/"),i.get({params:{id:M}}).success(function(b){var c,d,e,f,g;l({path:"/job_templates/"+M,title:b.name});for(c in I.fields){if("variables"!==c&&null!==b[c]&&void 0!==b[c]){if("select"===I.fields[c].type)if(a[c+"_options"]&&a[c+"_options"].length>0)for(d=0;d<a[c+"_options"].length;d++)b[c]===a[c+"_options"][d].value&&(a[c]=a[c+"_options"][d]);else a[c]=b[c];else a[c]=b[c];L[c]=a[c]}"variables"===c&&($.isEmptyObject(b.extra_vars)||"{}"===b.extra_vars||"null"===b.extra_vars||""===b.extra_vars||null===b.extra_vars?a.variables="---":(e=JSON.parse(b.extra_vars),a.variables=jsyaml.safeDump(e)),L.variables=a.variables),"lookup"===I.fields[c].type&&b.summary_fields[I.fields[c].sourceModel]&&(a[I.fields[c].sourceModel+"_"+I.fields[c].sourceField]=b.summary_fields[I.fields[c].sourceModel][I.fields[c].sourceField],L[I.fields[c].sourceModel+"_"+I.fields[c].sourceField]=a[I.fields[c].sourceModel+"_"+I.fields[c].sourceField])}a.url=b.url,f=b.related;for(g in I.related)f[g]&&(N[g]={url:f[g],iterator:I.related[g].iterator});a.callback_url=b.related.callback,L.callback_url=a.callback_url,t({scope:a,form:I,current_item:b.inventory,list:q,field:"inventory"}),t({url:v("credentials")+"?kind=ssh",scope:a,form:I,current_item:b.credential,list:r,field:"credential",hdr:"Select Machine Credential"}),t({scope:a,form:I,current_item:b.project,list:s,field:"project"}),m({scope:a,form:I,relatedSets:N}),n({scope:a,relatedSets:N}),a.$emit("jobTemplateLoaded",b.related.cloud_credential)}).error(function(b,c){k(a,b,c,I,{hdr:"Error!",msg:"Failed to retrieve job template: "+f.id+". GET status: "+c})}),a.formSave=function(){H.clearApiErrors(),A("start");var b,c,e={};try{if(b="json"===a.parseType?JSON.parse(a.variables):jsyaml.load(a.variables),"object"!=typeof b)throw"failed to return an object!";for(c in I.fields)"select"===I.fields[c].type&&"playbook"!==c?e[c]=a[c].value:"variables"!==c&&"callback_url"!==c&&(e[c]=a[c]);e.extra_vars=JSON.stringify(b,void 0,"	"),("null"===e.extra_vars||null===e.extra_vars)&&(e.extra_vars=""),i.setUrl(G+M+"/"),i.put(e).success(function(){A("stop");var a=d.path().replace(/^\//,"").split("/")[0];"job_templates"===a&&o(),o(1)}).error(function(b,c){k(a,b,c,I,{hdr:"Error!",msg:"Failed to update job template. PUT returned status: "+c})})}catch(f){A("stop"),j("Error","Error parsing extra variables. Parser returned: "+f)}},a.showActivity=function(){B({scope:a})},a.formReset=function(){H.reset();for(var b in L)a[b]=L[b];a.parseType="yaml",$("#forks-slider").slider("option","value",a.forks)},a.add=function(a){b.flashMessage=null,d.path("/"+K+"/"+f.id+"/"+a)},a.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},a["delete"]=function(c,d,e,f){b.flashMessage=null;var g=function(){var b=G+M+"/"+c+"/";i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(I.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})})};D({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.name+" "+f+"?",action:g})}}function JobsListCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){o();var y,z=h,A=q("jobs"),B=i;if(B.inject(z,{mode:"edit",scope:a}),b.flashMessage=null,a.selected=[],a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){var b,c;if($("tr.success").each(function(){var b=$(this).attr("ng-class");a[b]=""}),a.jobs&&a.jobs.length)for(b=0;b<a.jobs.length;b++)c=new Date(a.jobs[b].created),a.jobs[b].created=t(c),a.jobs[b].statusBadgeToolTip=v(a.jobs[b].status)+" Click to view status details.",a.jobs[b].statusLinkTo="/#/jobs/"+a.jobs[b].id}),e.job_host_summaries__host?A+="?job_host_summaries__host="+e.job_host_summaries__host:e.inventory__int&&e.status&&(A+="?inventory__int="+e.inventory__int+"&status="+e.status),l({scope:a,set:"jobs",list:z,url:A}),m({scope:a,list:z,url:A}),e.inventory__int&&(a[z.iterator+"SearchField"]="inventory",a[z.iterator+"SearchValue"]=e.inventory__int,a[z.iterator+"SearchFieldLabel"]="Inventory ID"),e.id__int&&(a[z.iterator+"SearchField"]="id",a[z.iterator+"SearchValue"]=e.id__int,a[z.iterator+"SearchFieldLabel"]="Job ID"),e.status){a[z.iterator+"SearchField"]="status",a[z.iterator+"SelectShow"]=!0,a[z.iterator+"SearchSelectOpts"]=z.fields.status.searchOptions,a[z.iterator+"SearchFieldLabel"]=z.fields.status.label.replace(/<br>/g," ");for(y in z.fields.status.searchOptions)if(z.fields.status.searchOptions[y].value===e.status){a[z.iterator+"SearchSelectValue"]=z.fields.status.searchOptions[y];break}}a.search(z.iterator),j(),a.refresh=function(){x("start"),a.jobLoading=!1,u({scope:a,set:"jobs",iterator:"job",url:a.current_url})},a.refreshJob=a.refresh,a.editJob=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a)},a.viewEvents=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_events")},a.viewSummary=function(a,b){j({path:"/jobs/"+a,title:a+" - "+b}),c.path(c.path()+"/"+a+"/job_host_summaries")},a.deleteJob=function(b){f.setUrl(A+b+"/"),f.get().success(function(c){var d,e,g,h;"pending"===c.status||"running"===c.status||"waiting"===c.status?(e=c.related.cancel,g="cancel",h="Cancel Job"):(e=A+b+"/",g="delete",h="Delete Job"),d=function(){f.setUrl(e),"cancel"===g?f.post().success(function(){$("#prompt-modal").modal("hide"),a.search(z.iterator)}).error(function(b,c){$("#prompt-modal").modal("hide"),p(a,b,c,null,{hdr:"Error!",msg:"Call to "+e+" failed. POST returned status: "+c})}):f.destroy().success(function(){$("#prompt-modal").modal("hide"),a.search(z.iterator)}).error(function(b,c){$("#prompt-modal").modal("hide"),p(a,b,c,null,{hdr:"Error!",msg:"Call to "+e+" failed. DELETE returned status: "+c})})},k({hdr:h,body:"Are you sure you want to "+g+" job "+b+"?",action:d})}).error(function(b,c){p(a,b,c,null,{hdr:"Error!",msg:"Failed to get job details. GET returned status: "+c})})},a.submitJob=function(b,c){s({scope:a,id:b,template:c})}}function JobsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(b){if(null!==b&&""!==b&&void 0!==b){var c=v("projects")+b+"/playbooks/";i.setUrl(c),i.get().success(function(b){a.playbook_options=[];for(var c=0;c<b.length;c++)a.playbook_options.push(b[c]);a.$emit("jobTemplateLoadFinished")}).error(function(){a.$emit("jobTemplateLoadFinished")})}else a.$emit("jobTemplateLoadFinished")}function B(a){var b=a.match(/\n/g),c=b?b.length:1;return c>15?15:c}p();var C=v("jobs"),D=h,E=g,F={},G=f.id,H={},I=0;D.inject(E,{mode:"edit",related:!0,scope:a}),D.reset(),a.job_id=G,a.parseType="yaml",a.statusSearchSpin=!1,a.jobLoadedRemove&&a.jobLoadedRemove(),a.jobLoadedRemove=a.$on("jobLoaded",function(b,c){A(a.project),a[E.name+"ReadOnly"]="new"===a.status?!1:!0,$("#forks-slider").slider("option","value",a.forks),$("#forks-slider").slider("disable"),$('input[type="checkbox"]').attr("disabled","disabled"),$('input[type="radio"]').attr("disabled","disabled"),$("#host_config_key-gen-btn").attr("disabled","disabled"),$("textarea").attr("readonly","readonly"),i.setUrl(a.template_url),i.get().success(function(b){var c=b.host_config_key?"true":"false";a.host_config_key=b.host_config_key,w({scope:a,master:F,check_field:"allow_callbacks",default_val:c}),a.callback_url=b.related?b.related.callback:"<< Job template not found >>",a.$emit("jobTemplateLoadFinished")}).error(function(){z("stop"),a.callback_url="<< Job template not found >>"}),c?(i.setUrl(c),i.get().success(function(b){a.cloud_credential_name=b.name,a.$emit("jobTemplateLoadFinished")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to related cloud credential. GET returned status: "+c})})):a.$emit("jobTemplateLoadFinished")}),a.removeJobTemplateLoadFinished&&a.removeJobTemplateLoadFinished(),a.removeJobTemplateLoadFinished=a.$on("jobTemplateLoadFinished",function(){I++,I>=3&&z("stop")}),a.job_type_options=[{value:"run",label:"Run"},{value:"check",label:"Check"}],a.verbosity_options=[{value:"0",label:"Default"},{value:"1",label:"Verbose"},{value:"3",label:"Debug"}],a.playbook_options=null,a.playbook=null,z("start"),i.setUrl(C+":id/"),i.get({params:{id:G}}).success(function(b){var c,d,e,f,g,h;l();for(e in E.fields){if("variables"!==e&&null!==b[e]&&void 0!==b[e]){if("select"===E.fields[e].type)if(a[e+"_options"]&&a[e+"_options"].length>0)for(c=0;c<a[e+"_options"].length;c++)b[e]===a[e+"_options"][c].value&&(a[e]=a[e+"_options"][c]);else a[e]=b[e]}else a[e]=b[e];F[e]=a[e]}a.id=b.id,a.name=b.summary_fields&&b.summary_fields.job_template?b.summary_fields.job_template.name:"","variables"===e&&($.isEmptyObject(b.extra_vars)||"{}"===b.extra_vars||"null"===b.extra_vars||""===b.extra_vars||null===b.extra_vars?a.variables="---":(f=JSON.parse(b.extra_vars),a.variables=jsyaml.safeDump(f)),F.variables=a.variables),"lookup"===E.fields[e].type&&b.summary_fields[E.fields[e].sourceModel]&&(a[E.fields[e].sourceModel+"_"+E.fields[e].sourceField]=b.summary_fields[E.fields[e].sourceModel][E.fields[e].sourceField],F[E.fields[e].sourceModel+"_"+E.fields[e].sourceField]=a[E.fields[e].sourceModel+"_"+E.fields[e].sourceField]);for(e in E.statusFields)null!==b[e]&&void 0!==b[e]&&("created"===e?(d=new Date(b.created),a.created=x(d)):a[e]=b[e]);a.statusToolTip=y(b.status),$('form[name="jobs_form"] input[type="text"], form[name="jobs_form"] jobs_form textarea').attr("readonly","readonly"),$('form[name="jobs_form"] select').prop("disabled","disabled"),$('form[name="jobs_form"] .lookup-btn').prop("disabled","disabled"),$('form[name="jobs_form"] .buttons, form[name="jobs_form"] hr').hide(),a.url=b.url,g=b.related;for(h in E.related)g[h]&&(H[h]={url:g[h],iterator:E.related[h].iterator});a.stdout_rows=B(a.result_stdout),a.traceback_rows=B(a.result_traceback),t({scope:a,form:E,current_item:b.inventory,list:q,field:"inventory"}),t({scope:a,form:E,current_item:b.credential,list:r,field:"credential"}),t({scope:a,form:E,current_item:b.project,list:s,field:"project"}),m({scope:a,form:E,relatedSets:H}),n({scope:a,relatedSets:H}),a.template_url=b.related.job_template,a.$emit("jobLoaded",b.related.cloud_credential)}).error(function(b,c){k(a,b,c,E,{hdr:"Error!",msg:"Failed to retrieve job: "+f.id+". GET status: "+c})}),a.refresh=function(){z("start"),i.setUrl(C+G+"/"),i.get().success(function(b){a.status=b.status,a.result_stdout=b.result_stdout,a.result_traceback=b.result_traceback,a.stdout_rows=B(a.result_stdout),a.traceback_rows=B(a.result_traceback),z("stop")}).error(function(b,c){z("stop"),k(a,b,c,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+c})})},a.jobSummary=function(){d.path("/jobs/"+G+"/job_host_summaries")},a.jobEvents=function(){d.path("/jobs/"+G+"/job_events")}}function OrganizationsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n();var t,u=k,v=j,w=d.path().replace(/^\//,"").split("/"),x="organizations"===w[0]?"edit":"select",y=p("organizations");v.inject(k,{mode:x,scope:b}),c.flashMessage=null,h(),"select"===x&&(t=p("projects")+a.project_id+"/organizations/",q({scope:b,list:u,url:t,returnToCaller:1})),b.removePostRefresh&&b.removePostRefresh(),b.removePostRefresh=b.$on("PostRefresh",function(){r("stop"),$("#prompt-modal").off()}),l({scope:b,set:u.name,list:u,url:y}),m({scope:b,list:u,url:y}),b.search(u.iterator),b.showActivity=function(){s({scope:b})},b.addOrganization=function(){d.path(d.path()+"/add")},b.editOrganization=function(a){d.path(d.path()+"/"+a)},b.deleteOrganization=function(a,c){var d=function(){$("#prompt-modal").on("hidden.bs.modal",function(){r("start")}),$("#prompt-modal").modal("hide");var c=y+a+"/";f.setUrl(c),f.destroy().success(function(){b.search(u.iterator)}).error(function(a,d){o(b,a,d,null,{hdr:"Error!",msg:"Call to "+c+" failed. DELETE returned status: "+d})})};i({hdr:"Delete",body:"Are you sure you want to delete "+c+"?",action:d})}}function OrganizationsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){m();var q=h,r=g,s=d.path().replace(/^\//,"").split("/")[0];q.inject(r,{mode:"add",related:!1,scope:a}),q.reset(),l(),a.formSave=function(){q.clearApiErrors(),p("start");var c=n(s);c+="organizations"!==s?f.project_id+"/organizations/":"",i.setUrl(c),i.post({name:a.name,description:a.description}).success(function(a){p("stop"),"organizations"===s?(b.flashMessage="New organization successfully created!",d.path("/organizations/"+a.id)):o(1)}).error(function(b,c){k(a,b,c,r,{hdr:"Error!",msg:"Failed to add new organization. Post returned status: "+c})})},a.formReset=function(){b.flashMessage=null,q.reset()}}function OrganizationsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){p();var t=g,u=h,v=q("organizations"),w=d.path().replace(/^\//,"").split("/")[0],x={},y=f.organization_id,z={};u.inject(t,{mode:"edit",related:!0,scope:a}),u.reset(),a.organizationLoadedRemove&&a.organizationLoadedRemove(),a.organizationLoadedRemove=a.$on("organizationLoaded",function(){for(var b in z)a.search(z[b].iterator);r("stop")}),r("start"),i.setUrl(v+y+"/"),i.get().success(function(b){var c,d,e;l({path:"/organizations/"+y,title:b.name});for(c in t.fields)b[c]&&(a[c]=b[c],x[c]=b[c]);d=b.related;for(e in t.related)d[e]&&(z[e]={url:d[e],iterator:t.related[e].iterator});m({scope:a,form:t,relatedSets:z}),n({scope:a,relatedSets:z}),a.$emit("organizationLoaded")}).error(function(b,c){k(a,b,c,t,{hdr:"Error!",msg:"Failed to retrieve organization: "+f.id+". GET status: "+c})}),a.formSave=function(){var c,d={};u.clearApiErrors(),r("start");for(c in t.fields)d[c]=a[c];i.setUrl(v+y+"/"),i.put(d).success(function(){r("stop"),x=d,b.flashMessage="Your changes were successfully saved!"}).error(function(b,c){k(a,b,c,g,{hdr:"Error!",msg:"Failed to update organization: "+y+". PUT status: "+c})})},a.showActivity=function(){s({$scope:a})},a.formReset=function(){b.flashMessage=null,u.reset();for(var c in x)a[c]=x[c]},a.add=function(a){b.flashMessage=null,d.path("/"+w+"/"+f.organization_id+"/"+a)},a.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},a["delete"]=function(c,d,e,g){b.flashMessage=null;var h=function(){r("start");var b=v+f.organization_id+"/"+c+"/";i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(t.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})})};o({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.name+" "+g+"?",action:h})}}function PermissionsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){o();var t=h,u=c.path().replace(/^\//,"").split("/")[0],v=q(u),w=i;w.inject(t,{mode:"edit",scope:a}),v+=void 0!==e.user_id?e.user_id:e.team_id,v+="/permissions/",a.selected=[],r({scope:a}),a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),l({scope:a,set:"permissions",list:t,url:v}),m({scope:a,list:t,url:v}),a.search(t.iterator),j(),a.addPermission=function(){a.PermissionAddAllowed&&c.path(c.path()+"/add")},a.editPermission=function(a){c.path(c.path()+"/"+a)},a.deletePermission=function(b,c){var d=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var c=q("base")+"permissions/"+b+"/";f.setUrl(c),f.destroy().success(function(){a.search(t.iterator)}).error(function(b,d){s("stop"),p(a,b,d,null,{hdr:"Error!",msg:"Call to "+c+" failed. DELETE returned status: "+d})})};a.PermissionAddAllowed&&k({hdr:"Delete",body:"Are you sure you want to delete "+c+"?",action:d})}}function PermissionsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){m();var v=g,w=h,x=void 0!==f.user_id?f.user_id:f.team_id,y=d.path().replace(/^\//,"").split("/")[0],z={};w.inject(v,{mode:"add",related:!1,scope:a}),s({scope:a}),w.reset(),l(),a.inventoryrequired=!0,a.projectrequired=!1,a.category="Inventory",z.category="Inventory",z.inventoryrequired=!0,z.projectrequired=!1,r({scope:a,form:v,current_item:null,list:p,field:"inventory"}),r({scope:a,form:v,current_item:null,list:q,field:"project"}),a.formSave=function(){var b,c,d={};if(w.clearApiErrors(),t("start"),a.PermissionAddAllowed){d={};for(b in v.fields)d[b]=a[b];c="teams"===y?n("teams")+x+"/permissions/":n("users")+x+"/permissions/",i.setUrl(c),i.post(d).success(function(){t("stop"),o(1)}).error(function(b,c){t("stop"),k(a,b,c,g,{hdr:"Error!",msg:"Failed to create new permission. Post returned status: "+c})})}else j("Access Denied","You do not have access to create new permission objects. Please contact a system administrator.","alert-danger")},a.formReset=function(){b.flashMessage=null,w.reset();for(var c in z)a[c]=z[c];a.selectCategory()},a.selectCategory=function(){u({scope:a,reset:!0})},a.selectCategory()}function PermissionsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){n();var w=h,x=g,y=void 0!==f.user_id?f.user_id:f.team_id,z=f.permission_id,A=p("base")+"permissions/"+z+"/",B={};w.inject(x,{mode:"edit",related:!0,scope:a}),w.reset(),t({scope:a}),a.selectCategory=function(b){var c=b===!1?!1:!0;v({scope:a,reset:c})},u("start"),i.setUrl(A),i.get().success(function(b){var c,d,e;l({path:"/users/"+y+"/permissions/"+z,title:b.name});for(c in x.fields)b[c]&&(x.fields[c].sourceModel&&(d=x.fields[c].sourceModel,e=x.fields[c].sourceField,a[d+"_"+e]=b.summary_fields[d][e],B[d+"_"+e]=b.summary_fields[d][e]),a[c]=b[c],B[c]=a[c]);a.category="Deploy","run"!==b.permission_type&&"check"!==b.permission_type&&(a.category="Inventory"),B.category=a.category,a.selectCategory(!1),s({scope:a,form:x,current_item:b.inventory,list:q,field:"inventory"}),s({scope:a,form:x,current_item:b.project,list:r,field:"project"}),a.PermissionAddAllowed||$('form[name="permission_form"]').find("select, input, button").each(function(){($(this).is("input")||$(this).is("select"))&&$(this).attr("readonly","readonly"),($(this).is('input[type="checkbox"]')||$(this).is('input[type="radio"]')||$(this).is("button"))&&$(this).attr("disabled","disabled")}),u("stop")}).error(function(b,c){k(a,b,c,x,{hdr:"Error!",msg:"Failed to retrieve Permission: "+z+". GET status: "+c})}),a.formSave=function(){var b,c={};w.clearApiErrors(),u("start");for(b in x.fields)c[b]=a[b];i.setUrl(A),i.put(c).success(function(){u("stop"),m(1)}).error(function(b,c){k(a,b,c,x,{hdr:"Error!",msg:"Failed to update Permission: "+f.id+". PUT status: "+c})})},a.formReset=function(){w.reset();for(var b in B)a[b]=B[b];a.selectCategory(!1)}}function ProjectsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){o(),w("start");var A=h,B=q("projects"),C=i,D=c.path().replace(/^\//,"").split("/")[0],E="projects"===D?"edit":"select",F="teams"===D?q("teams")+e.team_id+"/projects/":B,G=0;C.inject(A,{mode:E,scope:a}),b.flashMessage=null,a.projectLoading=!0,"select"===E&&r({scope:a,list:A,url:F,returnToCaller:1}),a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){var b,c;if(w("stop"),$("#prompt-modal").off(),a.projects)for(c=0;c<a.projects.length;c++){switch("ok"===a.projects[c].status&&(a.projects[c].status="n/a"),a.projects[c].status){case"n/a":a.projects[c].badge="none";break;case"updating":case"successful":case"ok":a.projects[c].badge="false";break;case"never updated":case"failed":case"missing":a.projects[c].badge="true"}for(a.projects[c].last_updated=null!==a.projects[c].last_updated?u(new Date(a.projects[c].last_updated)):null,b=0;b<a.project_scm_type_options.length;b++)if(a.project_scm_type_options[b].value===a.projects[c].scm_type){a.projects[c].scm_type=a.project_scm_type_options[b].label,"Manual"===a.projects[c].scm_type?(a.projects[c].scm_update_tooltip="Manaul projects do not require an SCM update",a.projects[c].scm_type_class="btn-disabled"):(a.projects[c].scm_update_tooltip="Start an SCM update",a.projects[c].scm_type_class="");break}}}),a.removeChoicesHere&&a.removeChoicesHere(),a.removeChoicesHere=a.$on("choicesCompleteProject",function(){var b;if(A.fields.scm_type.searchOptions=a.project_scm_type_options,A.fields.status.searchOptions=a.project_status_options,e.scm_type&&e.status&&(B+="?status="+e.status),l({scope:a,set:"projects",list:A,url:B}),m({scope:a,list:A,url:B}),e.scm_type){a[A.iterator+"SearchField"]="scm_type",a[A.iterator+"SelectShow"]=!0,a[A.iterator+"SearchSelectOpts"]=A.fields.scm_type.searchOptions,a[A.iterator+"SearchFieldLabel"]=A.fields.scm_type.label.replace(/<br\>/g," ");for(b in A.fields.scm_type.searchOptions)if(A.fields.scm_type.searchOptions[b].value===e.scm_type){a[A.iterator+"SearchSelectValue"]=A.fields.scm_type.searchOptions[b];break}}else if(e.status){a[A.iterator+"SearchValue"]=e.status,a[A.iterator+"SearchField"]="status",a[A.iterator+"SelectShow"]=!0,a[A.iterator+"SearchFieldLabel"]=A.fields.status.label,a[A.iterator+"SearchSelectOpts"]=A.fields.status.searchOptions;for(b in A.fields.status.searchOptions)if(A.fields.status.searchOptions[b].value===e.status){a[A.iterator+"SearchSelectValue"]=A.fields.status.searchOptions[b];break}}a.search(A.iterator)}),a.removeChoicesReady&&a.removeChoicesReady(),a.removeChoicesReady=a.$on("choicesReadyProject",function(){G++,2===G&&a.$emit("choicesCompleteProject")}),y({scope:a,url:B,field:"status",variable:"project_status_options",callback:"choicesReadyProject"}),y({scope:a,url:B,field:"scm_type",variable:"project_scm_type_options",callback:"choicesReadyProject"}),j(),a.showActivity=function(){x({scope:a})},a.addProject=function(){c.path(c.path()+"/add")},a.editProject=function(a){c.path(c.path()+"/"+a)},a.showSCMStatus=function(b){var c,d=a.$on("PostRefresh",function(){var e;for(c=0;c<a.projects.length;c++)if(a.projects[c].id===b){e=a.projects[c];break}null!==e.scm_type?e.related.current_update?(w("start"),t({project_id:b,last_update:e.related.current_update})):e.related.last_update?(w("start"),t({project_id:b,last_update:e.related.last_update})):g("No Updates Available","There is no SCM update information available for this project. An update has not yet been  completed.  If you have not already done so, start an update for this project.","alert-info"):g("Missing SCM Configuration","The selected project is not configured for SCM. You must first edit the project, provide SCM settings, and then run an update.","alert-info"),d()});a.search(A.iterator,null,!1,!0)},a.deleteProject=function(b,c){var d=function(){$("#prompt-modal").on("hiden.bs.modal",function(){w("start")}),$("#prompt-modal").modal("hide");var c=B+b+"/";f.setUrl(c),f.destroy().success(function(){a.search(A.iterator)}).error(function(b,d){w("stop"),p(a,b,d,null,{hdr:"Error!",msg:"Call to "+c+" failed. DELETE returned status: "+d})})};k({hdr:"Delete",body:"Are you sure you want to delete "+c+"?",action:d})},a.removeCancelUpdate&&a.removeCancelUpdate(),a.removeCancelUpdate=a.$on("Cancel_Update",function(b,c){f.setUrl(c),f.post().success(function(){g("SCM Update Cancel","Your request to cancel the update was submitted to the task maanger.","alert-info"),a.refresh()}).error(function(b,d){p(a,b,d,null,{hdr:"Error!",msg:"Call to "+c+" failed. POST status: "+d})})}),a.removeCheckCancel&&a.removeCheckCancel(),a.removeCheckCancel=a.$on("Check_Cancel",function(b,c){var d=c.related.cancel;f.setUrl(d),f.get().success(function(b){b.can_cancel?a.$emit("Cancel_Update",d):g("Cancel Not Allowed","Either you do not have access or the SCM update process completed. Click the <em>Refresh</em> button to view the latest status.","alert-info")}).error(function(b,c){p(a,b,c,null,{hdr:"Error!",msg:"Call to "+d+" failed. GET status: "+c})})}),a.cancelUpdate=function(b,c){var d,e,h=!1;for(d=0;d<a.projects.length;d++)if(a.projects[d].id===b){e=a.projects[d],h=!0;break}h&&e.related.current_update?(f.setUrl(e.related.current_update),f.get().success(function(b){a.$emit("Check_Cancel",b)}).error(function(b,c){p(a,b,c,null,{hdr:"Error!",msg:"Call to "+e.related.current_update+" failed. GET status: "+c})})):g("Update Not Found","An SCM update does not appear to be running for project: "+c+". Click the <em>Refresh</em> button to view the latet status.","alert-info")},a.refresh=function(){w("start"),a.projectLoading=!1,v({scope:a,set:"projects",iterator:"project",url:a.current_url})},a.SCMUpdate=function(b){var c;for(c=0;c<a.projects.length;c++)if(a.projects[c].id===b){if("Manual"===a.projects[c].scm_type||z(a.projects[c].scm_type))break;"updating"===a.projects[c].status?g("Update in Progress","The SCM update process is running. Use the Refresh button to monitor the status.","alert-info"):s({scope:a,project_id:b})}}}function ProjectsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){m();var w=g,x=h,y=d.path().replace(/^\//,"").split("/")[0],z=n("projects"),A={};x.inject(w,{mode:"add",related:!1,scope:a}),x.reset(),l(),p({scope:a,master:A}),a.removeChoicesReady&&a.removeChoicesReady(),a.removeChoicesReady=a.$on("choicesReady",function(){var b;for(b=0;b<a.scm_type_options.length;b++)if(""===a.scm_type_options[b].value){a.scm_type=a.scm_type_options[b];break}a.scmRequired=!1,A.scm_type=a.scm_type}),t({scope:a,url:z,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),q({scope:a,form:w,list:r,field:"organization"}),q({scope:a,url:n("credentials")+"?kind=scm",form:w,list:s,field:"credential"}),a.formSave=function(){var c,d,e,h={};x.clearApiErrors(),h={};for(d in w.fields)if("checkbox_group"===w.fields[d].type)for(c=0;c<w.fields[d].fields.length;c++)h[w.fields[d].fields[c].name]=a[w.fields[d].fields[c].name];else"alertblock"!==w.fields[d].type&&(h[d]=a[d]);h.scm_type=a.scm_type.value,""!==a.scm_type.value?delete h.local_path:h.local_path=a.local_path.value,e="teams"===y?n("teams")+f.team_id+"/projects/":z,v("start"),i.setUrl(e),i.post(h).success(function(c){var d=c.id,e=n("projects")+d+"/organizations/",f={id:a.organization};i.setUrl(e),i.post(f).success(function(){v("stop"),b.flashMessage="New project successfully created!","projects"===y&&o(),o(1)}).error(function(b,c){v("stop"),k(a,b,c,g,{hdr:"Error!",msg:"Failed to add organization to project. POST returned status: "+c})})}).error(function(b,c){v("stop"),k(a,b,c,g,{hdr:"Error!",msg:"Failed to create new project. POST returned status: "+c})})},a.scmChange=function(){a.scm_type&&(a.pathRequired=""===a.scm_type.value?!0:!1,a.scmRequired=""!==a.scm_type.value?!0:!1,a.scmBranchLabel="svn"===a.scm_type.value?"Revision #":"SCM Branch")},a.formReset=function(){var c;b.flashMessage=null,x.reset();for(c in A)a.fld=A.fld;a.scmChange()}}function ProjectsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){p("htmlTemplate");var B=g,C=h,D=q("projects")+f.id+"/",E=d.path().replace(/^\//,"").split("/")[0],F={},G=f.id,H={};C.inject(B,{mode:"edit",related:!0,scope:a}),C.reset(),a.project_local_paths=[],a.base_dir="",a.projectLoadedRemove&&a.projectLoadedRemove(),a.projectLoadedRemove=a.$on("projectLoaded",function(){var b,c=[];for(b in H)a.search(H[b].iterator);t.getUserInfo("is_superuser")===!0?s({scope:a,master:F}):(c.push({label:a.local_path,value:a.local_path}),a.project_local_paths=c,a.local_path=a.project_local_paths[0],a.base_dir="You do not have access to view this property"),v({url:q("credentials")+"?kind=scm",scope:a,form:B,list:u,field:"credential"}),a.pathRequired=""===a.scm_type.value?!0:!1,a.scmRequired=""!==a.scm_type.value?!0:!1,a.scmBranchLabel="svn"===a.scm_type.value?"Revision #":"SCM Branch",z("stop")}),a.removeChoicesReady&&a.removeChoicesReady(),a.removeChoicesReady=a.$on("choicesReady",function(){i.setUrl(D),i.get({params:{id:G}}).success(function(b){var c,d,e,f;l({path:"/projects/"+G,title:b.name});for(e in B.fields){if("checkbox_group"===B.fields[e].type)for(f=0;f<B.fields[e].fields.length;f++)a[B.fields[e].fields[f].name]=b[B.fields[e].fields[f].name],F[B.fields[e].fields[f].name]=b[B.fields[e].fields[f].name];else b[e]&&(a[e]=b[e],F[e]=b[e]);"organization"!==e&&B.fields[e].sourceModel&&b.summary_fields&&b.summary_fields[B.fields[e].sourceModel]&&(a[B.fields[e].sourceModel+"_"+B.fields[e].sourceField]=b.summary_fields[B.fields[e].sourceModel][B.fields[e].sourceField],F[B.fields[e].sourceModel+"_"+B.fields[e].sourceField]=b.summary_fields[B.fields[e].sourceModel][B.fields[e].sourceField])}c=b.related;for(d in B.related)c[d]&&(H[d]={url:c[d],iterator:B.related[d].iterator});for(b.scm_type=x(b.scm_type)?"":b.scm_type,f=0;f<a.scm_type_options.length;f++)if(a.scm_type_options[f].value===b.scm_type){a.scm_type=a.scm_type_options[f];break}""!==a.scm_type.value?(a.pathRequired=!1,a.scmRequired=!0):(a.pathRequired=!0,a.scmRequired=!1),F.scm_type=a.scm_type,a.scmBranchLabel="svn"===a.scm_type.value?"Revision #":"SCM Branch",m({scope:a,form:B,relatedSets:H}),n({scope:a,relatedSets:H}),a.$emit("projectLoaded")}).error(function(b,c){k(a,b,c,B,{hdr:"Error!",msg:"Failed to retrieve project: "+G+". GET status: "+c})})}),z("start"),w({url:q("projects"),scope:a,field:"scm_type",variable:"scm_type_options",callback:"choicesReady"}),a.formSave=function(){var c,d,e;C.clearApiErrors(),z("start"),b.flashMessage=null,e={};for(c in B.fields)if("checkbox_group"===B.fields[c].type)for(d=0;d<B.fields[c].fields.length;d++)e[B.fields[c].fields[d].name]=a[B.fields[c].fields[d].name];else"alertblock"!==B.fields[c].type&&(e[c]=a[c]);e.scm_type=a.scm_type.value,""!==a.scm_type.value?delete e.local_path:e.local_path=a.local_path.value,i.setUrl(D),i.put(e).success(function(){z("stop"),r()
}).error(function(b,c){k(a,b,c,B,{hdr:"Error!",msg:"Failed to update project: "+G+". PUT status: "+c})})},a.showActivity=function(){A({scope:a})},a.add=function(a){b.flashMessage=null,d.path("/"+E+"/"+f.id+"/"+a)},a.edit=function(a,c){b.flashMessage=null,d.path("/"+a+"/"+c)},a["delete"]=function(c,d,e,f){var g=function(){var e=q("projects")+G+"/"+c+"/";b.flashMessage=null,i.setUrl(e),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(B.related[c].iterator)}).error(function(b,c){$("#prompt-modal").modal("hide"),k(a,b,c,null,{hdr:"Error!",msg:"Call to "+e+" failed. POST returned status: "+c})})};o({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.name+" "+f+"?",action:g})},a.scmChange=function(){a.scm_type&&(a.pathRequired=""===a.scm_type.value?!0:!1,a.scmRequired=""!==a.scm_type.value?!0:!1,a.scmBranchLabel="svn"===a.scm_type.value?"Revision #":"SCM Branch")},a.formReset=function(){b.flashMessage=null,C.reset();for(var c in F)a[c]=F[c];a.scmChange()}}function TeamsList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){o();var v,w=h,x=r("teams"),y=i,z=c.path().replace(/^\//,"").split("/"),A="teams"===z[0]?"edit":"select";y.inject(w,{mode:A,scope:a}),a.selected=[],v=r("base")+c.path()+"/",s({scope:a,list:w,url:v,returnToCaller:1}),a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){var b;if(a.teams)for(b=0;b<a.teams.length;b++)a.teams[b].organization_name=a.teams[b].summary_fields.organization.name}),l({scope:a,set:"teams",list:w,url:x}),m({scope:a,list:w,url:x}),a.search(w.iterator),j(),a.showActivity=function(){u({scope:a})},a.addTeam=function(){c.path(c.path()+"/add")},a.editTeam=function(a){c.path(c.path()+"/"+a)},a.deleteTeam=function(b,c){var d=function(){t("start");var c=x+b+"/";f.setUrl(c),f.destroy().success(function(){t("stop"),$("#prompt-modal").modal("hide"),a.search(w.iterator)}).error(function(b,d){t("stop"),$("#prompt-modal").modal("hide"),p(a,b,d,null,{hdr:"Error!",msg:"Call to "+c+" failed. DELETE returned status: "+d})})};k({hdr:"Delete",body:"Are you sure you want to delete "+c+"?",action:d})}}function TeamsAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){n("htmlTemplate");var v=s("teams"),w=g,x=h,y=x.inject(w,{mode:"add",related:!1});b.flashMessage=null,x.reset(),l(),t({scope:a,form:w,current_item:null,list:p,field:"organization"}),a.formSave=function(){var c,e;x.clearApiErrors(),u("start"),i.setUrl(v),e={};for(c in w.fields)e[c]=y[c];i.post(e).success(function(a){u("stop"),b.flashMessage="New team successfully created!",d.path("/teams/"+a.id)}).error(function(b,c){u("stop"),k(a,b,c,w,{hdr:"Error!",msg:"Failed to add new team. Post returned status: "+c})})},a.formReset=function(){x.reset()}}function TeamsEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){p();var x=s("teams"),y=h,z=g,A=d.path().replace(/^\//,"").split("/")[0],B={},C=f.team_id,D={};y.inject(z,{mode:"edit",related:!0,scope:a}),y.reset(),a.PermissionAddAllowed=!1,a.teamLoadedRemove&&a.teamLoadedRemove(),a.teamLoadedRemove=a.$on("teamLoaded",function(){t({scope:a}),i.setUrl(a.organization_url),i.get().success(function(b){a.organization_name=b.name,B.organization_name=b.name,v("stop")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve organization: "+a.orgnization_url+". GET status: "+c})});for(var b in D)a.search(D[b].iterator)}),v("start"),i.setUrl(x+":id/"),i.get({params:{id:C}}).success(function(b){var c,d,e;l({path:"/teams/"+C,title:b.name});for(c in z.fields)b[c]&&(a[c]=b[c],B[c]=a[c]);d=b.related;for(e in z.related)d[e]&&(D[e]={url:d[e],iterator:z.related[e].iterator});m({scope:a,form:z,relatedSets:D}),n({scope:a,relatedSets:D}),q({scope:a,form:z,current_item:b.organization,list:u,field:"organization"}),a.organization_url=b.related.organization,a.$emit("teamLoaded")}).error(function(b,c){k(a,b,c,z,{hdr:"Error!",msg:"Failed to retrieve team: "+f.team_id+". GET status: "+c})}),a.showActivity=function(){w({scope:a})},a.formSave=function(){var c,e={};y.clearApiErrors(),v("start"),b.flashMessage=null,i.setUrl(x+f.team_id+"/");for(c in z.fields)e[c]=a[c];i.put(e).success(function(){v("stop");var a=d.path().replace(/^\//,"").split("/")[0];"teams"===a&&o(),o(1)}).error(function(b,c){v("stop"),k(a,b,c,z,{hdr:"Error!",msg:"Failed to update team: "+f.team_id+". PUT status: "+c})})},a.formReset=function(){b.flashMessage=null,y.reset();for(var c in B)a[c]=B[c]},a.add=function(c){b.flashMessage=null,"permissions"===c?a.PermissionAddAllowed?d.path("/"+A+"/"+f.team_id+"/"+c+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+A+"/"+f.team_id+"/"+c)},a.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/"+A+"/"+f.team_id+"/"+a+"/"+c:"/"+a+"/"+c)},a["delete"]=function(c,d,e,g){b.flashMessage=null;var h=function(){var b;"permissions"===c?a.PermissionAddAllowed?(b=s("base")+"permissions/"+d+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),a.search(z.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+d})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=x+f.team_id+"/"+c+"/",i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(z.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.name+" "+g+"?",action:h})}}function UsersList(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){o();var u=h,v=q("users"),w=i,x=c.path().replace(/^\//,"").split("/")[0],y="users"===x?"edit":"select",z="organizations"===x?q("organizations")+e.organization_id+"/users/":q("teams")+e.team_id+"/users/";w.inject(h,{mode:y,scope:a}),a.selected=[],"select"===y&&r({scope:a,list:u,url:z,returnToCaller:1}),a.removePostRefresh&&a.removePostRefresh(),a.removePostRefresh=a.$on("PostRefresh",function(){s("stop"),$("#prompt-modal").off()}),b.flashMessage=null,l({scope:a,set:"users",list:u,url:v}),m({scope:a,list:u,url:v}),a.search(u.iterator),j(),a.showActivity=function(){t({scope:a})},a.addUser=function(){c.path(c.path()+"/add")},a.editUser=function(a){c.path(c.path()+"/"+a)},a.deleteUser=function(b,c){var d=function(){$("#prompt-modal").on("hidden.bs.modal",function(){s("start")}),$("#prompt-modal").modal("hide");var c=v+b+"/";f.setUrl(c),f.destroy().success(function(){a.search(u.iterator)}).error(function(b,d){p(a,b,d,null,{hdr:"Error!",msg:"Call to "+c+" failed. DELETE returned status: "+d})})};k({hdr:"Delete",body:"Are you sure you want to delete "+c+"?",action:d})}}function UsersAdd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){n();var t=o("organizations"),u=g,v=h;v.inject(u,{mode:"add",related:!1,scope:a}),r(),a.ldap_user=!1,a.not_ldap_user=!a.ldap_user,a.ldap_dn=null,v.reset(),l(),p({scope:a,form:u,current_item:void 0!==f.organization_id?f.organization_id:null,list:q,field:"organization"}),f.organization_id&&(a.organization=f.organization_id,i.setUrl(o("organizations")+f.organization_id+"/"),i.get().success(function(b){a.organization_name=b.name}).error(function(b,c){k(a,b,c,u,{hdr:"Error!",msg:"Failed to lookup Organization: "+b.id+". GET returned status: "+c})})),a.formSave=function(){v.clearApiErrors();var c,e={};if(void 0!==a.organization&&null!==a.organization&&""!==a.organization){i.setUrl(t+a.organization+"/users/");for(c in u.fields)u.fields[c].realName?e[u.fields[c].realName]=a[c]:e[c]=a[c];e.is_superuser=e.is_superuser||!1,s("start"),i.post(e).success(function(a){var c=d.path().replace(/^\//,"").split("/")[0];"users"===c&&(b.flashMessage="New user successfully created!",d.path("/users/"+a.id)),m(1)}).error(function(b,c){k(a,b,c,u,{hdr:"Error!",msg:"Failed to add new user. POST returned status: "+c})})}else a.organization_name_api_error="A value is required"},a.formReset=function(){v.reset(),a.ldap_user=!1},a.clearPWConfirm=function(b){a[b]="",a[u.name+"_form"][b].$setValidity("awpassmatch",!1)}}function UsersEdit(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){p();var w=q("users"),x=h,y=g,z=d.path().replace(/^\//,"").split("/")[0],A={},B=f.user_id,C={};a.removeFormReady&&a.removeFormReady(),a.removeFormReady=a.$on("formReady",function(){x.inject(y,{mode:"edit",related:!0,scope:a}),x.reset(),a.removePostRefresh&&a.removePostRefresh(),a.PermissionAddAllowed=!1,a.removeUserLoaded&&a.removeUserLoaded(),a.removeUserLoaded=a.$on("userLoaded",function(){for(var b in C)a.search(C[b].iterator);s({scope:a}),u("stop")}),i.setUrl(w+":id/"),i.get({params:{id:B}}).success(function(b){l({path:"/users/"+B,title:b.username});var c,d,e;for(c in y.fields)b[c]&&(a[c]="is_superuser"===c?"true"===b[c]||b[c]===!0?"true":"false":b[c],A[c]=a[c]);d=b.related;for(e in y.related)d[e]&&(C[e]={url:d[e],iterator:y.related[e].iterator});a.ldap_user=null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?!0:!1,a.not_ldap_user=!a.ldap_user,A.ldap_user=a.ldap_user,m({scope:a,form:y,relatedSets:C}),n({scope:a,relatedSets:C}),a.$emit("userLoaded")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+f.id+". GET status: "+c})}),a.formSave=function(){var c,e={};x.clearApiErrors(),b.flashMessage=null,i.setUrl(w+B+"/");for(c in y.fields)y.fields[c].realName?e[y.fields[c].realName]=a[c]:e[c]=a[c];e.is_superuser=e.is_superuser||!1,u("start"),i.put(e).success(function(){u("stop");var a=d.path().replace(/^\//,"").split("/")[0];"users"===a&&o(),o(1)}).error(function(b,c){k(a,b,c,y,{hdr:"Error!",msg:"Failed to update users: "+f.id+". PUT status: "+c})})},a.showActivity=function(){v({scope:a})},a.formReset=function(){b.flashMessage=null,x.reset();for(var c in A)a[c]=A[c];a.password_confirm=a.password},a.clearPWConfirm=function(c){a[c]="",a[y.name+"_form"][c].$setValidity("awpassmatch",!1),b.flashMessage=null},a.add=function(c){b.flashMessage=null,"permissions"===c?a.PermissionAddAllowed?d.path("/"+z+"/"+f.user_id+"/"+c+"/add"):j("Access Denied","You do not have access to this function. Please contact your system administrator."):d.path("/"+z+"/"+f.user_id+"/"+c)},a.edit=function(a,c){b.flashMessage=null,d.path("permissions"===a?"/users/"+f.user_id+"/permissions/"+c:"/"+a+"/"+c)},a["delete"]=function(c,d,e,g){b.flashMessage=null;var h=function(){var b;"permissions"===c?a.PermissionAddAllowed?(b=q("base")+"permissions/"+d+"/",i.setUrl(b),i.destroy().success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. DELETE returned status: "+d})})):j("Access Denied","You do not have access to this function. Please contact your system administrator."):(b=w+f.user_id+"/"+c+"/",i.setUrl(b),i.post({id:d,disassociate:1}).success(function(){$("#prompt-modal").modal("hide"),a.search(y.related[c].iterator)}).error(function(c,d){$("#prompt-modal").modal("hide"),k(a,c,d,null,{hdr:"Error!",msg:"Call to "+b+" failed. POST returned status: "+d})}))};r({hdr:"Delete",body:"Are you sure you want to remove "+e+" from "+a.username+" "+g+"?",action:h})}}),t(),a.removeModifyForm&&a.removeModifyForm(),a.removeModifyForm=a.$on("modifyForm",function(){i.setUrl(q("config")),i.get().success(function(b){var c,d;if(b.user_ldap_fields)for(c=0;c<b.user_ldap_fields.length;c++)d=b.user_ldap_fields[c],y.fields[d]&&(y.fields[d].readonly=!0,y.fields[d].editRequired=!1,y.fields[d].awRequiredWhen&&delete y.fields[d].awRequiredWhen);a.$emit("formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve application config. GET status: "+c})})}),u("start"),i.setUrl(w+B+"/"),i.get().success(function(b){a.$emit(null!==b.ldap_dn&&void 0!==b.ldap_dn&&""!==b.ldap_dn?"modifyForm":"formReady")}).error(function(b,c){k(a,b,c,null,{hdr:"Error!",msg:"Failed to retrieve user: "+B+". GET status: "+c})})}function chkPass(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=2,I=2,J=2,K=2,L=3,M=3,N=3,O=4,P=4,Q=6,R="",S="",T="",U="",V="0",W="0",X="0",Y="0",Z="0",_="0",ab="0",bb="0",cb="0",db="0",eb="0",fb="0",gb="0",hb="0",ib="abcdefghijklmnopqrstuvwxyz",jb="01234567890",kb=")_!@#$%^&*()",lb="Too Short";if(c=document.all?0:1,a){for(nScore=parseInt(a.length*O),n=a.length,d=a.replace(/\s+/g,"").split(/\s*/),e=d.length,b=0;e>b;b++){for(d[b].match(/[A-Z]/g)?(""!==R&&R+1==b&&(y++,C++),R=b,o++):d[b].match(/[a-z]/g)?(""!==S&&S+1==b&&(z++,C++),S=b,p++):d[b].match(/[0-9]/g)?(b>0&&e-1>b&&s++,""!==T&&T+1==b&&(A++,C++),T=b,q++):d[b].match(/[^a-zA-Z0-9_]/g)&&(b>0&&e-1>b&&s++,""!==U&&U+1==b&&(B++,C++),U=b,r++),f=!1,g=0;e>g;g++)d[b]==d[g]&&b!=g&&(f=!0,x+=Math.abs(e/(g-b)));f&&(w++,v=e-w,x=Math.ceil(v?x/v:x))}for(h=0;23>h;h++)i=ib.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(D++,G++);for(h=0;8>h;h++)i=jb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(E++,G++);for(h=0;8>h;h++)i=kb.substring(h,parseInt(h+3)),j=i.strReverse(),(-1!=a.toLowerCase().indexOf(i)||-1!=a.toLowerCase().indexOf(j))&&(F++,G++);o>0&&n>o&&(nScore=parseInt(nScore+2*(n-o)),V="+ "+parseInt(2*(n-o))),p>0&&n>p&&(nScore=parseInt(nScore+2*(n-p)),W="+ "+parseInt(2*(n-p))),q>0&&n>q&&(nScore=parseInt(nScore+q*P),X="+ "+parseInt(q*P)),r>0&&(nScore=parseInt(nScore+r*Q),Y="+ "+parseInt(r*Q)),s>0&&(nScore=parseInt(nScore+s*H),Z="+ "+parseInt(s*H)),(p>0||o>0)&&0===r&&0===q&&(nScore=parseInt(nScore-n),t=n,_="- "+n),0===p&&0===o&&0===r&&q>0&&(nScore=parseInt(nScore-n),u=n,ab="- "+n),w>0&&(nScore=parseInt(nScore-x),bb="- "+x),y>0&&(nScore=parseInt(nScore-y*I),cb="- "+parseInt(y*I)),z>0&&(nScore=parseInt(nScore-z*J),db="- "+parseInt(z*J)),A>0&&(nScore=parseInt(nScore-A*K),eb="- "+parseInt(A*K)),D>0&&(nScore=parseInt(nScore-D*L),fb="- "+parseInt(D*L)),E>0&&(nScore=parseInt(nScore-E*M),gb="- "+parseInt(E*M)),F>0&&(nScore=parseInt(nScore-F*N),hb="- "+parseInt(F*N)),nScore>100?nScore=100:0>nScore&&(nScore=0),k=$("#progbar"),l=$AnsibleConfig.password_strength,m=$AnsibleConfig.password_strength-15<0?0:$AnsibleConfig.password_strength-15,k.css("width",nScore+"%"),nScore>=0&&m>=nScore?(lb="Weak",k.addClass("progress-bar-danger"),k.removeClass("progress-bar-success progress-bar-warning")):nScore>m&&l>=nScore?(lb="Good",k.addClass("progress-bar-warning"),k.removeClass("progress-bar-success progress-bar-danger")):nScore>l&&(lb="Strong",k.addClass("progress-bar-success"),k.removeClass("progress-bar-warning progress-bar-danger"))}else k=$("#progbar"),k.css("width","0%"),k.removeClass("progress-bar-success progress-bar-warning");return nScore}var urlPrefix=$basePath;angular.module("ansible",["ngRoute","ngSanitize","ngCookies","RestServices","AuthService","Utilities","OrganizationFormDefinition","UserFormDefinition","FormGenerator","OrganizationListDefinition","UserListDefinition","UserHelper","ListGenerator","PromptDialog","ApiLoader","RelatedSearchHelper","SearchHelper","PaginationHelpers","RefreshHelper","AdminListDefinition","AWDirectives","InventoriesListDefinition","InventoryFormDefinition","InventoryHelper","InventoryGroupsDefinition","InventoryHostsDefinition","HostsHelper","AWFilters","HostFormDefinition","HostListDefinition","GroupFormDefinition","GroupListDefinition","GroupsHelper","TeamsListDefinition","TeamFormDefinition","TeamHelper","CredentialsListDefinition","CredentialFormDefinition","LookUpHelper","JobTemplatesListDefinition","JobTemplateFormDefinition","JobSubmissionHelper","ProjectsListDefinition","ProjectFormDefinition","ProjectStatusDefinition","ProjectsHelper","PermissionFormDefinition","PermissionListDefinition","PermissionsHelper","JobsListDefinition","JobFormDefinition","JobEventsListDefinition","JobEventDataDefinition","JobEventsFormDefinition","JobHostDefinition","JobSummaryDefinition","ParseHelper","ChildrenHelper","EventsHelper","ProjectPathHelper","md5Helper","AccessHelper","SelectionHelper","License","HostGroupsFormDefinition","JobStatusWidget","InventorySyncStatusWidget","SCMSyncStatusWidget","ObjectCountWidget","StreamWidget","JobsHelper","InventoryGroupsHelpDefinition","InventoryTree","CredentialsHelper","TimerService","StreamListDefinition","HomeGroupListDefinition","HomeHostListDefinition","ActivityDetailDefinition"]).config(["$routeProvider",function(a){a.when("/jobs",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsListCtrl"}).when("/jobs/:id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsEdit"}).when("/jobs/:id/job_events",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsList"}).when("/jobs/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/jobs/:job_id/job_events/:event_id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsEdit"}).when("/job_templates",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesList"}).when("/job_templates/add",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesAdd"}).when("/job_templates/:id",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesEdit"}).when("/projects",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsList"}).when("/projects/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsAdd"}).when("/projects/:id",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsEdit"}).when("/projects/:project_id/organizations",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsList"}).when("/projects/:project_id/organizations/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsAdd"}).when("/hosts/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/inventories",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesList"}).when("/inventories/add",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesAdd"}).when("/inventories/:inventory_id",{templateUrl:urlPrefix+"partials/inventory-edit.html",controller:"InventoriesEdit"}).when("/organizations",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsList"}).when("/organizations/add",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsAdd"}).when("/organizations/:organization_id",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsEdit"}).when("/organizations/:organization_id/admins",{templateUrl:urlPrefix+"partials/organizations.html",controller:"AdminsList"}).when("/organizations/:organization_id/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/organizations/:organization_id/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/organizations/:organization_id/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/teams",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsList"}).when("/teams/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsAdd"}).when("/teams/:team_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsEdit"}).when("/teams/:team_id/permissions/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsAdd"}).when("/teams/:team_id/permissions",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsList"}).when("/teams/:team_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsEdit"}).when("/teams/:team_id/users",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersList"}).when("/teams/:team_id/users/:user_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersEdit"}).when("/teams/:team_id/projects",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsList"}).when("/teams/:team_id/projects/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsAdd"}).when("/teams/:team_id/projects/:project_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsEdit"}).when("/teams/:team_id/credentials",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsList"}).when("/teams/:team_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:team_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/credentials",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsList"}).when("/credentials/add",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsAdd"}).when("/credentials/:credential_id",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsEdit"}).when("/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/users/:user_id/credentials",{templateUrl:urlPrefix+"partials/users.html",controller:"CredentialsList"}).when("/users/:user_id/permissions/add",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsAdd"}).when("/users/:user_id/permissions",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsList"}).when("/users/:user_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsEdit"}).when("/users/:user_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:user_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/login",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/logout",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/home",{templateUrl:urlPrefix+"partials/home.html",controller:"Home"}).when("/home/groups",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeGroups"}).when("/home/hosts",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeHosts"}).otherwise({redirectTo:"/home"})}]).run(["$cookieStore","$rootScope","CheckLicense","$location","Authorization","LoadBasePaths","ViewLicense","Timer","ClearScope","HideStream",function(a,b,c,d,e,f,g,h,i,j){f(),b.breadcrumbs=[],b.crumbCache=[],b.sessionTimer=h.init(),b.$on("$routeChangeStart",function(f,g){$("#stream-container").is(":visible")&&j(),/^\/(login|logout)/.test(d.path())||(b.lastPath=d.path(),a.put("lastPath",d.path())),e.isUserLoggedIn()===!1?g.templateUrl!==urlPrefix+"partials/login.html"&&d.path("/login"):b.sessionTimer.isExpired()?g.templateUrl!==urlPrefix+"partials/login.html"&&(b.sessionTimer.expireSession(),d.path("/login")):((void 0===b.current_user||null===b.current_user)&&e.restoreUserInfo(),c());var h=d.path().replace(/^\//,"").split("/")[0];""===h?h="home":h.replace(/\_/g," "),$('.nav-tabs a[href="#'+h+'"]').tab("show")}),e.getToken()?b.user_is_superuser=e.getUserInfo("is_superuser"):(b.sessionExpired=!1,a.put("sessionExpired",!1),d.path("/login"));var k=d.path().replace(/^\//,"").split("/")[0];""===k?(k="home",d.path("/home")):k.replace(/\_/g," "),$('.nav-tabs a[href="#'+k+'"]').tab("show"),b.viewCurrentUser=function(){d.path("/users/"+b.current_user.id)},b.viewLicense=function(){g()}}]);var urlPrefix=$basePath;angular.module("ansible",["RestServices","AuthService","Utilities","OrganizationFormDefinition","UserFormDefinition","FormGenerator","OrganizationListDefinition","UserListDefinition","UserHelper","ListGenerator","PromptDialog","ApiLoader","RelatedSearchHelper","SearchHelper","PaginationHelpers","RefreshHelper","AdminListDefinition","AWDirectives","InventoriesListDefinition","InventoryFormDefinition","InventoryHelper","InventoryGroupsDefinition","InventoryHostsDefinition","HostsHelper","AWFilters","HostFormDefinition","HostListDefinition","GroupFormDefinition","GroupListDefinition","GroupsHelper","TeamsListDefinition","TeamFormDefinition","TeamHelper","CredentialsListDefinition","CredentialFormDefinition","LookUpHelper","JobTemplatesListDefinition","JobTemplateFormDefinition","JobSubmissionHelper","ProjectsListDefinition","ProjectFormDefinition","ProjectStatusDefinition","ProjectsHelper","PermissionFormDefinition","PermissionListDefinition","PermissionsHelper","JobsListDefinition","JobFormDefinition","JobEventsListDefinition","JobEventDataDefinition","JobEventsFormDefinition","JobHostDefinition","JobSummaryDefinition","ParseHelper","ChildrenHelper","EventsHelper","ProjectPathHelper","md5Helper","AccessHelper","SelectionHelper","License","HostGroupsFormDefinition","JobStatusWidget","InventorySyncStatusWidget","SCMSyncStatusWidget","ObjectCountWidget","StreamWidget","JobsHelper","InventoryGroupsHelpDefinition","InventoryTree","CredentialsHelper","TimerService","StreamListDefinition","HomeGroupListDefinition","HomeHostListDefinition","ActivityDetailDefinition"]).config(["$routeProvider",function(a){a.when("/jobs",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsListCtrl"}).when("/jobs/:id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsEdit"}).when("/jobs/:id/job_events",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsList"}).when("/jobs/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/jobs/:job_id/job_events/:event_id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsEdit"}).when("/job_templates",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesList"}).when("/job_templates/add",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesAdd"}).when("/job_templates/:id",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesEdit"}).when("/projects",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsList"}).when("/projects/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsAdd"}).when("/projects/:id",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsEdit"}).when("/projects/:project_id/organizations",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsList"}).when("/projects/:project_id/organizations/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsAdd"}).when("/hosts/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/inventories",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesList"}).when("/inventories/add",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesAdd"}).when("/inventories/:inventory_id",{templateUrl:urlPrefix+"partials/inventory-edit.html",controller:"InventoriesEdit"}).when("/organizations",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsList"}).when("/organizations/add",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsAdd"}).when("/organizations/:organization_id",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsEdit"}).when("/organizations/:organization_id/admins",{templateUrl:urlPrefix+"partials/organizations.html",controller:"AdminsList"}).when("/organizations/:organization_id/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/organizations/:organization_id/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/organizations/:organization_id/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/teams",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsList"}).when("/teams/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsAdd"}).when("/teams/:team_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsEdit"}).when("/teams/:team_id/permissions/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsAdd"}).when("/teams/:team_id/permissions",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsList"}).when("/teams/:team_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsEdit"}).when("/teams/:team_id/users",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersList"}).when("/teams/:team_id/users/:user_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersEdit"}).when("/teams/:team_id/projects",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsList"}).when("/teams/:team_id/projects/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsAdd"}).when("/teams/:team_id/projects/:project_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsEdit"}).when("/teams/:team_id/credentials",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsList"}).when("/teams/:team_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:team_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/credentials",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsList"}).when("/credentials/add",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsAdd"}).when("/credentials/:credential_id",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsEdit"}).when("/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/users/:user_id/credentials",{templateUrl:urlPrefix+"partials/users.html",controller:"CredentialsList"}).when("/users/:user_id/permissions/add",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsAdd"}).when("/users/:user_id/permissions",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsList"}).when("/users/:user_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsEdit"}).when("/users/:user_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:user_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/login",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/logout",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/home",{templateUrl:urlPrefix+"partials/home.html",controller:"Home"}).when("/home/groups",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeGroups"}).when("/home/hosts",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeHosts"}).otherwise({redirectTo:"/home"})}]).run(["$cookieStore","$rootScope","CheckLicense","$location","Authorization","LoadBasePaths","ViewLicense","Timer","ClearScope","HideStream",function(a,b,c,d,e,f,g,h,i,j){f(),b.breadcrumbs=[],b.crumbCache=[],b.sessionTimer=h.init(),b.$on("$routeChangeStart",function(f,g){$("#stream-container").is(":visible")&&j(),/^\/(login|logout)/.test(d.path())||(b.lastPath=d.path(),a.put("lastPath",d.path())),e.isUserLoggedIn()===!1?g.templateUrl!==urlPrefix+"partials/login.html"&&d.path("/login"):b.sessionTimer.isExpired()?g.templateUrl!==urlPrefix+"partials/login.html"&&(b.sessionTimer.expireSession(),d.path("/login")):((void 0===b.current_user||null===b.current_user)&&e.restoreUserInfo(),c());var h=d.path().replace(/^\//,"").split("/")[0];""===h?h="home":h.replace(/\_/g," "),$('.nav-tabs a[href="#'+h+'"]').tab("show")}),e.getToken()?b.user_is_superuser=e.getUserInfo("is_superuser"):(b.sessionExpired=!1,a.put("sessionExpired",!1),d.path("/login"));
var k=d.path().replace(/^\//,"").split("/")[0];""===k?(k="home",d.path("/home")):k.replace(/\_/g," "),$('.nav-tabs a[href="#'+k+'"]').tab("show"),b.viewCurrentUser=function(){d.path("/users/"+b.current_user.id)},b.viewLicense=function(){g()}}]);var urlPrefix=$basePath;angular.module("ansible",["RestServices","AuthService","Utilities","OrganizationFormDefinition","UserFormDefinition","FormGenerator","OrganizationListDefinition","UserListDefinition","UserHelper","ListGenerator","PromptDialog","ApiLoader","RelatedSearchHelper","SearchHelper","PaginationHelpers","RefreshHelper","AdminListDefinition","AWDirectives","InventoriesListDefinition","InventoryFormDefinition","InventoryHelper","InventoryGroupsDefinition","InventoryHostsDefinition","HostsHelper","AWFilters","HostFormDefinition","HostListDefinition","GroupFormDefinition","GroupListDefinition","GroupsHelper","TeamsListDefinition","TeamFormDefinition","TeamHelper","CredentialsListDefinition","CredentialFormDefinition","LookUpHelper","JobTemplatesListDefinition","JobTemplateFormDefinition","JobSubmissionHelper","ProjectsListDefinition","ProjectFormDefinition","ProjectStatusDefinition","ProjectsHelper","PermissionFormDefinition","PermissionListDefinition","PermissionsHelper","JobsListDefinition","JobFormDefinition","JobEventsListDefinition","JobEventDataDefinition","JobEventsFormDefinition","JobHostDefinition","JobSummaryDefinition","ParseHelper","ChildrenHelper","EventsHelper","ProjectPathHelper","md5Helper","AccessHelper","SelectionHelper","License","HostGroupsFormDefinition","JobStatusWidget","InventorySyncStatusWidget","SCMSyncStatusWidget","ObjectCountWidget","StreamWidget","JobsHelper","InventoryGroupsHelpDefinition","InventoryTree","CredentialsHelper","TimerService","StreamListDefinition","HomeGroupListDefinition","HomeHostListDefinition","ActivityDetailDefinition"]).config(["$routeProvider",function(a){a.when("/jobs",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsListCtrl"}).when("/jobs/:id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsEdit"}).when("/jobs/:id/job_events",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsList"}).when("/jobs/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/jobs/:job_id/job_events/:event_id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsEdit"}).when("/job_templates",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesList"}).when("/job_templates/add",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesAdd"}).when("/job_templates/:id",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesEdit"}).when("/projects",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsList"}).when("/projects/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsAdd"}).when("/projects/:id",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsEdit"}).when("/projects/:project_id/organizations",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsList"}).when("/projects/:project_id/organizations/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsAdd"}).when("/hosts/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/inventories",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesList"}).when("/inventories/add",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesAdd"}).when("/inventories/:inventory_id",{templateUrl:urlPrefix+"partials/inventory-edit.html",controller:"InventoriesEdit"}).when("/organizations",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsList"}).when("/organizations/add",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsAdd"}).when("/organizations/:organization_id",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsEdit"}).when("/organizations/:organization_id/admins",{templateUrl:urlPrefix+"partials/organizations.html",controller:"AdminsList"}).when("/organizations/:organization_id/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/organizations/:organization_id/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/organizations/:organization_id/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/teams",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsList"}).when("/teams/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsAdd"}).when("/teams/:team_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsEdit"}).when("/teams/:team_id/permissions/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsAdd"}).when("/teams/:team_id/permissions",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsList"}).when("/teams/:team_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsEdit"}).when("/teams/:team_id/users",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersList"}).when("/teams/:team_id/users/:user_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersEdit"}).when("/teams/:team_id/projects",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsList"}).when("/teams/:team_id/projects/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsAdd"}).when("/teams/:team_id/projects/:project_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsEdit"}).when("/teams/:team_id/credentials",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsList"}).when("/teams/:team_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:team_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/credentials",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsList"}).when("/credentials/add",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsAdd"}).when("/credentials/:credential_id",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsEdit"}).when("/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/users/:user_id/credentials",{templateUrl:urlPrefix+"partials/users.html",controller:"CredentialsList"}).when("/users/:user_id/permissions/add",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsAdd"}).when("/users/:user_id/permissions",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsList"}).when("/users/:user_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsEdit"}).when("/users/:user_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:user_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/login",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/logout",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/home",{templateUrl:urlPrefix+"partials/home.html",controller:"Home"}).when("/home/groups",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeGroups"}).when("/home/hosts",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeHosts"}).otherwise({redirectTo:"/home"})}]).run(["$cookieStore","$rootScope","CheckLicense","$location","Authorization","LoadBasePaths","ViewLicense","Timer","ClearScope","HideStream",function(a,b,c,d,e,f,g,h,i,j){f(),b.breadcrumbs=[],b.crumbCache=[],b.sessionTimer=h.init(),b.$on("$routeChangeStart",function(f,g){$("#stream-container").is(":visible")&&j(),/^\/(login|logout)/.test(d.path())||(b.lastPath=d.path(),a.put("lastPath",d.path())),e.isUserLoggedIn()===!1?g.templateUrl!==urlPrefix+"partials/login.html"&&d.path("/login"):b.sessionTimer.isExpired()?g.templateUrl!==urlPrefix+"partials/login.html"&&(b.sessionTimer.expireSession(),d.path("/login")):((void 0===b.current_user||null===b.current_user)&&e.restoreUserInfo(),c());var h=d.path().replace(/^\//,"").split("/")[0];""===h?h="home":h.replace(/\_/g," "),$('.nav-tabs a[href="#'+h+'"]').tab("show")}),e.getToken()?b.user_is_superuser=e.getUserInfo("is_superuser"):(b.sessionExpired=!1,a.put("sessionExpired",!1),d.path("/login"));var k=d.path().replace(/^\//,"").split("/")[0];""===k?(k="home",d.path("/home")):k.replace(/\_/g," "),$('.nav-tabs a[href="#'+k+'"]').tab("show"),b.viewCurrentUser=function(){d.path("/users/"+b.current_user.id)},b.viewLicense=function(){g()}}]);var urlPrefix=$basePath;angular.module("ansible",["RestServices","AuthService","Utilities","OrganizationFormDefinition","UserFormDefinition","FormGenerator","OrganizationListDefinition","UserListDefinition","UserHelper","ListGenerator","PromptDialog","ApiLoader","RelatedSearchHelper","SearchHelper","PaginationHelpers","RefreshHelper","AdminListDefinition","AWDirectives","InventoriesListDefinition","InventoryFormDefinition","InventoryHelper","InventoryGroupsDefinition","InventoryHostsDefinition","HostsHelper","AWFilters","HostFormDefinition","HostListDefinition","GroupFormDefinition","GroupListDefinition","GroupsHelper","TeamsListDefinition","TeamFormDefinition","TeamHelper","CredentialsListDefinition","CredentialFormDefinition","LookUpHelper","JobTemplatesListDefinition","JobTemplateFormDefinition","JobSubmissionHelper","ProjectsListDefinition","ProjectFormDefinition","ProjectStatusDefinition","ProjectsHelper","PermissionFormDefinition","PermissionListDefinition","PermissionsHelper","JobsListDefinition","JobFormDefinition","JobEventsListDefinition","JobEventDataDefinition","JobEventsFormDefinition","JobHostDefinition","JobSummaryDefinition","ParseHelper","ChildrenHelper","EventsHelper","ProjectPathHelper","md5Helper","AccessHelper","SelectionHelper","License","HostGroupsFormDefinition","JobStatusWidget","InventorySyncStatusWidget","SCMSyncStatusWidget","ObjectCountWidget","StreamWidget","JobsHelper","InventoryGroupsHelpDefinition","InventoryTree","CredentialsHelper","TimerService","StreamListDefinition","HomeGroupListDefinition","HomeHostListDefinition","ActivityDetailDefinition"]).config(["$routeProvider",function(a){a.when("/jobs",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsListCtrl"}).when("/jobs/:id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsEdit"}).when("/jobs/:id/job_events",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsList"}).when("/jobs/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/jobs/:job_id/job_events/:event_id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsEdit"}).when("/job_templates",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesList"}).when("/job_templates/add",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesAdd"}).when("/job_templates/:id",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesEdit"}).when("/projects",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsList"}).when("/projects/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsAdd"}).when("/projects/:id",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsEdit"}).when("/projects/:project_id/organizations",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsList"}).when("/projects/:project_id/organizations/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsAdd"}).when("/hosts/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/inventories",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesList"}).when("/inventories/add",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesAdd"}).when("/inventories/:inventory_id",{templateUrl:urlPrefix+"partials/inventory-edit.html",controller:"InventoriesEdit"}).when("/organizations",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsList"}).when("/organizations/add",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsAdd"}).when("/organizations/:organization_id",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsEdit"}).when("/organizations/:organization_id/admins",{templateUrl:urlPrefix+"partials/organizations.html",controller:"AdminsList"}).when("/organizations/:organization_id/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/organizations/:organization_id/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/organizations/:organization_id/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/teams",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsList"}).when("/teams/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsAdd"}).when("/teams/:team_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsEdit"}).when("/teams/:team_id/permissions/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsAdd"}).when("/teams/:team_id/permissions",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsList"}).when("/teams/:team_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsEdit"}).when("/teams/:team_id/users",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersList"}).when("/teams/:team_id/users/:user_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersEdit"}).when("/teams/:team_id/projects",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsList"}).when("/teams/:team_id/projects/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsAdd"}).when("/teams/:team_id/projects/:project_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsEdit"}).when("/teams/:team_id/credentials",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsList"}).when("/teams/:team_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:team_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/credentials",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsList"}).when("/credentials/add",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsAdd"}).when("/credentials/:credential_id",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsEdit"}).when("/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/users/:user_id/credentials",{templateUrl:urlPrefix+"partials/users.html",controller:"CredentialsList"}).when("/users/:user_id/permissions/add",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsAdd"}).when("/users/:user_id/permissions",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsList"}).when("/users/:user_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsEdit"}).when("/users/:user_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:user_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/login",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/logout",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/home",{templateUrl:urlPrefix+"partials/home.html",controller:"Home"}).when("/home/groups",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeGroups"}).when("/home/hosts",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeHosts"}).otherwise({redirectTo:"/home"})}]).run(["$cookieStore","$rootScope","CheckLicense","$location","Authorization","LoadBasePaths","ViewLicense","Timer","ClearScope","HideStream",function(a,b,c,d,e,f,g,h,i,j){f(),b.breadcrumbs=[],b.crumbCache=[],b.sessionTimer=h.init(),b.$on("$routeChangeStart",function(f,g){$("#stream-container").is(":visible")&&j(),/^\/(login|logout)/.test(d.path())||(b.lastPath=d.path(),a.put("lastPath",d.path())),e.isUserLoggedIn()===!1?g.templateUrl!==urlPrefix+"partials/login.html"&&d.path("/login"):b.sessionTimer.isExpired()?g.templateUrl!==urlPrefix+"partials/login.html"&&(b.sessionTimer.expireSession(),d.path("/login")):((void 0===b.current_user||null===b.current_user)&&e.restoreUserInfo(),c());var h=d.path().replace(/^\//,"").split("/")[0];""===h?h="home":h.replace(/\_/g," "),$('.nav-tabs a[href="#'+h+'"]').tab("show")}),e.getToken()?b.user_is_superuser=e.getUserInfo("is_superuser"):(b.sessionExpired=!1,a.put("sessionExpired",!1),d.path("/login"));var k=d.path().replace(/^\//,"").split("/")[0];""===k?(k="home",d.path("/home")):k.replace(/\_/g," "),$('.nav-tabs a[href="#'+k+'"]').tab("show"),b.viewCurrentUser=function(){d.path("/users/"+b.current_user.id)},b.viewLicense=function(){g()}}]);var urlPrefix=$basePath;angular.module("ansible",["RestServices","AuthService","Utilities","OrganizationFormDefinition","UserFormDefinition","FormGenerator","OrganizationListDefinition","UserListDefinition","UserHelper","ListGenerator","PromptDialog","ApiLoader","RelatedSearchHelper","SearchHelper","PaginationHelpers","RefreshHelper","AdminListDefinition","AWDirectives","InventoriesListDefinition","InventoryFormDefinition","InventoryHelper","InventoryGroupsDefinition","InventoryHostsDefinition","HostsHelper","AWFilters","HostFormDefinition","HostListDefinition","GroupFormDefinition","GroupListDefinition","GroupsHelper","TeamsListDefinition","TeamFormDefinition","TeamHelper","CredentialsListDefinition","CredentialFormDefinition","LookUpHelper","JobTemplatesListDefinition","JobTemplateFormDefinition","JobSubmissionHelper","ProjectsListDefinition","ProjectFormDefinition","ProjectStatusDefinition","ProjectsHelper","PermissionFormDefinition","PermissionListDefinition","PermissionsHelper","JobsListDefinition","JobFormDefinition","JobEventsListDefinition","JobEventDataDefinition","JobEventsFormDefinition","JobHostDefinition","JobSummaryDefinition","ParseHelper","ChildrenHelper","EventsHelper","ProjectPathHelper","md5Helper","AccessHelper","SelectionHelper","License","HostGroupsFormDefinition","JobStatusWidget","InventorySyncStatusWidget","SCMSyncStatusWidget","ObjectCountWidget","StreamWidget","JobsHelper","InventoryGroupsHelpDefinition","InventoryTree","CredentialsHelper","TimerService","StreamListDefinition","HomeGroupListDefinition","HomeHostListDefinition","ActivityDetailDefinition"]).config(["$routeProvider",function(a){a.when("/jobs",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsListCtrl"}).when("/jobs/:id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobsEdit"}).when("/jobs/:id/job_events",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsList"}).when("/jobs/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/jobs/:job_id/job_events/:event_id",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobEventsEdit"}).when("/job_templates",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesList"}).when("/job_templates/add",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesAdd"}).when("/job_templates/:id",{templateUrl:urlPrefix+"partials/job_templates.html",controller:"JobTemplatesEdit"}).when("/projects",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsList"}).when("/projects/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsAdd"}).when("/projects/:id",{templateUrl:urlPrefix+"partials/projects.html",controller:"ProjectsEdit"}).when("/projects/:project_id/organizations",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsList"}).when("/projects/:project_id/organizations/add",{templateUrl:urlPrefix+"partials/projects.html",controller:"OrganizationsAdd"}).when("/hosts/:id/job_host_summaries",{templateUrl:urlPrefix+"partials/jobs.html",controller:"JobHostSummaryList"}).when("/inventories",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesList"}).when("/inventories/add",{templateUrl:urlPrefix+"partials/inventories.html",controller:"InventoriesAdd"}).when("/inventories/:inventory_id",{templateUrl:urlPrefix+"partials/inventory-edit.html",controller:"InventoriesEdit"}).when("/organizations",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsList"}).when("/organizations/add",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsAdd"}).when("/organizations/:organization_id",{templateUrl:urlPrefix+"partials/organizations.html",controller:"OrganizationsEdit"}).when("/organizations/:organization_id/admins",{templateUrl:urlPrefix+"partials/organizations.html",controller:"AdminsList"}).when("/organizations/:organization_id/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/organizations/:organization_id/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/organizations/:organization_id/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/teams",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsList"}).when("/teams/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsAdd"}).when("/teams/:team_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"TeamsEdit"}).when("/teams/:team_id/permissions/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsAdd"}).when("/teams/:team_id/permissions",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsList"}).when("/teams/:team_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"PermissionsEdit"}).when("/teams/:team_id/users",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersList"}).when("/teams/:team_id/users/:user_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"UsersEdit"}).when("/teams/:team_id/projects",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsList"}).when("/teams/:team_id/projects/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsAdd"}).when("/teams/:team_id/projects/:project_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"ProjectsEdit"}).when("/teams/:team_id/credentials",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsList"}).when("/teams/:team_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:team_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/credentials",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsList"}).when("/credentials/add",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsAdd"}).when("/credentials/:credential_id",{templateUrl:urlPrefix+"partials/credentials.html",controller:"CredentialsEdit"}).when("/users",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersList"}).when("/users/add",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersAdd"}).when("/users/:user_id",{templateUrl:urlPrefix+"partials/users.html",controller:"UsersEdit"}).when("/users/:user_id/credentials",{templateUrl:urlPrefix+"partials/users.html",controller:"CredentialsList"}).when("/users/:user_id/permissions/add",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsAdd"}).when("/users/:user_id/permissions",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsList"}).when("/users/:user_id/permissions/:permission_id",{templateUrl:urlPrefix+"partials/users.html",controller:"PermissionsEdit"}).when("/users/:user_id/credentials/add",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsAdd"}).when("/teams/:user_id/credentials/:credential_id",{templateUrl:urlPrefix+"partials/teams.html",controller:"CredentialsEdit"}).when("/login",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/logout",{templateUrl:urlPrefix+"partials/home.html",controller:"Authenticate"}).when("/home",{templateUrl:urlPrefix+"partials/home.html",controller:"Home"}).when("/home/groups",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeGroups"}).when("/home/hosts",{templateUrl:urlPrefix+"partials/subhome.html",controller:"HomeHosts"}).otherwise({redirectTo:"/home"})}]).run(["$cookieStore","$rootScope","CheckLicense","$location","Authorization","LoadBasePaths","ViewLicense","Timer","ClearScope","HideStream",function(a,b,c,d,e,f,g,h,i,j){f(),b.breadcrumbs=[],b.crumbCache=[],b.sessionTimer=h.init(),b.$on("$routeChangeStart",function(f,g){$("#stream-container").is(":visible")&&j(),/^\/(login|logout)/.test(d.path())||(b.lastPath=d.path(),a.put("lastPath",d.path())),e.isUserLoggedIn()===!1?g.templateUrl!==urlPrefix+"partials/login.html"&&d.path("/login"):b.sessionTimer.isExpired()?g.templateUrl!==urlPrefix+"partials/login.html"&&(b.sessionTimer.expireSession(),d.path("/login")):((void 0===b.current_user||null===b.current_user)&&e.restoreUserInfo(),c());var h=d.path().replace(/^\//,"").split("/")[0];""===h?h="home":h.replace(/\_/g," "),$('.nav-tabs a[href="#'+h+'"]').tab("show")}),e.getToken()?b.user_is_superuser=e.getUserInfo("is_superuser"):(b.sessionExpired=!1,a.put("sessionExpired",!1),d.path("/login"));var k=d.path().replace(/^\//,"").split("/")[0];""===k?(k="home",d.path("/home")):k.replace(/\_/g," "),$('.nav-tabs a[href="#'+k+'"]').tab("show"),b.viewCurrentUser=function(){d.path("/users/"+b.current_user.id)},b.viewLicense=function(){g()}}]);var $AnsibleConfig={tooltip_delay:{show:500,hide:100},debug_mode:!0,password_strength:45,session_timeout:1800};AdminsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","AdminList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","GetBasePath","SelectionInit"],Authenticate.$inject=["$cookieStore","$window","$scope","$rootScope","$location","Authorization","ToggleClass","Alert","Wait","Timer","Empty"],CredentialsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","CredentialList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","GetChoices","Wait","Stream"],CredentialsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","SearchInit","PaginateInit","LookUpInit","UserList","TeamList","GetBasePath","GetChoices","Empty","KindChange","OwnerChange","FormSave"],CredentialsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","Prompt","GetBasePath","GetChoices","KindChange","UserList","TeamList","LookUpInit","Empty","OwnerChange","FormSave","Stream","Wait"],Home.$inject=["$scope","$compile","$routeParams","$rootScope","$location","Wait","ObjectCount","JobStatus","InventorySyncStatus","SCMSyncStatus","ClearScope","Stream","Rest","GetBasePath","ProcessErrors","Button"],HomeGroups.$inject=["$location","$routeParams","HomeGroupList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","GetHostsStatusMsg","GetSyncStatusMsg","ViewUpdateStatus","Stream","GroupsEdit","Wait","Alert","Rest","Empty","InventoryUpdate","Find"],HomeHosts.$inject=["$location","$routeParams","HomeHostList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","SetStatus","ToggleHostEnabled","HostsEdit","Stream","Find","ShowJobSummary"],InventoriesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","InventoryList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Wait","Stream","EditInventoryProperties"],InventoriesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","LookUpInit","GetBasePath","ParseTypeChange","Wait"],InventoriesEdit.$inject=["$scope","$location","$routeParams","$compile","GenerateList","ClearScope","InventoryGroups","InventoryHosts","BuildTree","Wait","GetSyncStatusMsg","InjectHosts","HostsReload","GroupsAdd","GroupsEdit","GroupsDelete","Breadcrumbs","LoadBreadCrumbs","Empty","Rest","ProcessErrors","InventoryUpdate","Alert","ToggleChildren","ViewUpdateStatus","GroupsCancelUpdate","Find","HostsCreate","EditInventoryProperties","HostsEdit","HostsDelete","ToggleHostEnabled","CopyMoveGroup","CopyMoveHost","Stream","GetBasePath","ShowJobSummary","ApplyEllipsis","WatchInventoryWindowResize","HelpDialog","InventoryGroupsHelp","Store"],JobEventsList.$inject=["$filter","$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobEventList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","ToggleChildren","FormatDate","EventView","Refresh","Wait"],JobEventsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobEventsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","FormatDate","EventView","Wait"],JobHostSummaryList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobHostList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Refresh","JobStatusToolTip","Wait"],JobTemplatesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobTemplateList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","PromptPasswords","JobTemplateForm","CredentialList","LookUpInit","SubmitJob","Wait","Stream"],JobTemplatesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","InventoryList","CredentialList","ProjectList","LookUpInit","md5Setup","ParseTypeChange","Wait","Empty"],JobTemplatesEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","ParseTypeChange","JobStatusToolTip","FormatDate","Wait","Stream","Empty","Prompt"],JobsListCtrl.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","SubmitJob","FormatDate","Refresh","JobStatusToolTip","Empty","Wait"],JobsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","FormatDate","JobStatusToolTip","Wait"],OrganizationsList.$inject=["$routeParams","$scope","$rootScope","$location","$log","Rest","Alert","LoadBreadCrumbs","Prompt","GenerateList","OrganizationList","SearchInit","PaginateInit","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],OrganizationsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","Wait"],OrganizationsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","Wait","Stream"],PermissionsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","PermissionList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","CheckAccess","Wait"],PermissionsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],PermissionsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","Prompt","GetBasePath","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],ProjectsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","ProjectList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","ProjectUpdate","ProjectStatus","FormatDate","Refresh","Wait","Stream","GetChoices","Empty"],ProjectsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","LookUpInit","OrganizationList","CredentialList","GetChoices","DebugForm","Wait"],ProjectsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","Authorization","CredentialList","LookUpInit","GetChoices","Empty","DebugForm","Wait","Stream"],TeamsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","TeamList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","SetTeamListeners","GetBasePath","SelectionInit","Wait","Stream"],TeamsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","GetBasePath","LookUpInit","Wait"],TeamsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","LookUpInit","Prompt","GetBasePath","CheckAccess","OrganizationList","Wait","Stream"],UsersList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","UserList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],UsersAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","LookUpInit","OrganizationList","ResetForm","Wait"],UsersEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","GetBasePath","Prompt","CheckAccess","ResetForm","Wait","Stream"],angular.module("ActivityDetailDefinition",[]).value("ActivityDetailForm",{name:"activity",editTitle:"Activity Detail",well:!1,"class":"horizontal-narrow",formFieldSize:"col-lg-10",formLabelSize:"col-lg-2",fields:{user:{label:"Initiated by",type:"text",readonly:!0},operation:{label:"Action",type:"text",readonly:!0},changes:{label:"Changes",type:"textarea",ngHide:"!changes || changes =='' || changes == 'null'",readonly:!0}}}),angular.module("CredentialFormDefinition",[]).value("CredentialForm",{addTitle:"Create Credential",editTitle:"{{ name }}",name:"credential",well:!0,forceListeners:!0,actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"edit"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,autocomplete:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},owner:{label:"Does this credential belong to a team or user?",type:"radio_group",ngChange:"ownerChange()",options:[{label:"User",value:"user",selected:!0},{label:"Team",value:"team"}],awPopOver:"<p>A credential must be associated with either a user or a team. Choosing a user allows only the selected user access to the credential. Choosing a team shares the credential with all team members.</p>",dataTitle:"Owner",dataPlacement:"right",dataContainer:"body"},user:{label:"User that owns this credential",type:"lookup",sourceModel:"user",sourceField:"username",ngClick:"lookUpUser()",ngShow:"owner == 'user'",awRequiredWhen:{variable:"user_required",init:"false"}},team:{label:"Team that owns this credential",type:"lookup",sourceModel:"team",sourceField:"name",ngClick:"lookUpTeam()",ngShow:"owner == 'team'",awRequiredWhen:{variable:"team_required",init:"false"}},kind:{label:"Type",excludeModal:!0,type:"select",ngOptions:"kind.label for kind in credential_kind_options",ngChange:"kindChange()",addRequired:!0,editRequired:!0,helpCollapse:[{hdr:"Select a Credential Type",content:"<dl>\n<dt>AWS</dt>\n<dd>Access keys for Amazon Web Services used for inventory management or deployment.</dd>\n<dt>Machine</dt>\n<dd>Authentication for remote machine access. This can include SSH keys, usernames, passwords, and sudo information. Machine credentials are used when submitting jobs to run playbooks against remote hosts.</dd><dt>Rackspace</dt>\n<dd>Access information for Rackspace Cloud used for inventory management or deployment.</dd>\n<dt>SCM</dt>\n<dd>Used to check out and synchronize playbook repositories with a remote source control management system such as Git, Subversion (svn), or Mercurial (hg). These credentials are used on the Projects tab.</dd>\n</dl>\n"}]},access_key:{label:"Access Key",type:"text",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,apiField:"username"},secret_key:{label:"Secret Key",type:"password",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},username:{labelBind:"usernameLabel",type:"text",ngShow:"kind.value && kind.value !== 'aws'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1},api_key:{label:"API Key",type:"password",ngShow:"kind.value == 'rax'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},password:{label:"Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",ask:!1,clear:!1,associated:"password_confirm",autocomplete:!1},password_confirm:{label:"Confirm Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},ssh_password:{label:"SSH Password",type:"password",ngShow:"kind.value == 'ssh'",ngChange:"clearPWConfirm('ssh_password_confirm')",addRequired:!1,editRequired:!1,ask:!0,clear:!0,associated:"ssh_password_confirm",autocomplete:!1},ssh_password_confirm:{label:"Confirm SSH Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_password",autocomplete:!1},ssh_key_data:{labelBind:"sshKeyDataLabel",type:"textarea",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,"class":"ssh-key-field",rows:10},ssh_key_unlock:{label:"Key Password",type:"password",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('ssh_key_unlock_confirm')",associated:"ssh_key_unlock_confirm",ask:!0,askShow:"kind.value == 'ssh'",clear:!0},ssh_key_unlock_confirm:{label:"Confirm Key Password",type:"password",ngShow:"kind.value == 'ssh'  || kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_key_unlock"},sudo_username:{label:"Sudo Username",type:"text",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,autocomplete:!1},sudo_password:{label:"Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('sudo_password_confirm')",ask:!0,clear:!0,associated:"sudo_password_confirm",autocomplete:!1},sudo_password_confirm:{label:"Confirm Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"sudo_password",autocomplete:!1}},buttons:{save:{label:"Save",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("GroupFormDefinition",[]).value("GroupForm",{addTitle:"Create Group",editTitle:"Edit Group",showTitle:!0,cancelButton:!1,name:"group",well:!0,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",tabs:[{name:"properties",label:"Properties"},{name:"source",label:"Source"}],fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,tab:"properties"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,tab:"properties"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",dataTitle:"Group Variables",dataPlacement:"right",awPopOver:'<p>Variables defined here apply to all child groups and hosts.</p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"properties"},source:{label:"Source",type:"select",ngOptions:"source.label for source in source_type_options",ngChange:"sourceChange()",addRequired:!1,editRequired:!1,tab:"source"},source_path:{label:"Script Path",ngShow:"source && source.value == 'file'",type:"text",awRequiredWhen:{variable:"sourcePathRequired",init:"false"},tab:"source"},credential:{label:"Cloud Credential",type:"lookup",ngShow:"source && source.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,tab:"source"},source_regions:{label:"Regions",type:"text",ngShow:"source && (source.value == 'rax' || source.value == 'ec2')",addRequired:!1,editRequired:!1,awMultiselect:"source_region_choices",dataTitle:"Source Regions",dataPlacement:"right",awPopOver:"<p>Click on the regions field to see a list of regions for your cloud provider. You can select multiple regions, or choose <em>All</em> to include all regions. Tower will only be updated with Hosts associated with the selected regions.</p>",dataContainer:"body",tab:"source"},source_vars:{label:"Source Variables",ngShow:"source && (source.value == 'file' || source.value == 'ec2')",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",parseTypeName:"envParseType",dataTitle:"Source Variables",dataPlacement:"right",awPopOver:'<p>Override variables found in ec2.ini and used by the inventory update script. For a detailed description of these variables <a href="https://github.com/ansible/ansible/blob/devel/plugins/inventory/ec2.ini" target="_blank">view ec2.ini in the Ansible github repo.</a></p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"source"},checkbox_group:{label:"Update Options",type:"checkbox_group",ngShow:"source && (source.value !== '' && source.value !== null)",tab:"source",fields:[{name:"overwrite",label:"Overwrite",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>When checked all child groups and hosts not found on the remote source will be deleted from the local inventory.</p><p>Unchecked any local child hosts and groups not found on the external source will remain untouched by the inventory update process.</p>",dataTitle:"Overwrite",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"overwrite_vars",label:"Overwrite Variables",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>If checked, all variables for child groups and hosts will be removed and replaced by those found on the external source.</p><p>When not checked a merge will be performed, combining local variables with those found on the external source.</p>",dataTitle:"Overwrite Variables",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"update_on_launch",label:"Update on Launch",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this inventory, refresh the inventory from the selected source before executing job tasks.</p>",dataTitle:"Update on Launch",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{labelClass:"col-lg-3",controlClass:"col-lg-5",save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostGroupsFormDefinition",[]).value("HostGroupsForm",{editTitle:"Host Groups",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{groups:{label:"Groups",type:"select",multiple:!0,ngOptions:"group.name for group in inventory_groups",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostFormDefinition",[]).value("HostForm",{addTitle:"Create Host",editTitle:"{{ name }}",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{name:{label:"Host Name",type:"text",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},enabled:{label:"Enabled?",type:"checkbox",addRequired:!1,editRequired:!1,"default":!0,awPopOver:"<p>Indicates if a host is available and should be included in running jobs.</p><p>For hosts that are part of an external inventory, this flag cannot be changed. It will be set by the inventory sync process.</p>",dataTitle:"Host Enabled",dataPlacement:"right",dataContainer:"#form-modal .modal-content",ngDisabled:"has_inventory_sources == true"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"class":"modal-input-xlarge","default":"---",awPopOver:'<p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Host Variables",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},inventory:{type:"hidden",includeOnEdit:!0,includeOnAdd:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("InventoryFormDefinition",[]).value("InventoryForm",{addTitle:"Create Inventory",editTitle:"{{ inventory_name | capitalize }}",name:"inventory",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{inventory_name:{realName:"name",label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},inventory_description:{realName:"description",label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"}},inventory_variables:{realName:"variables",label:"Variables",type:"textarea","class":"span12",addRequired:!1,editRequird:!1,parseTypeName:"inventoryParseType",rows:6,"default":"---",awPopOver:'<p>Enter inventory variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Inventory Variables",dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("JobEventDataDefinition",[]).value("JobEventDataForm",{editTitle:"{{ id }} - {{ event_display }}",name:"job_events",well:!1,"class":"horizontal-narrow",fields:{event_data:{label:!1,type:"textarea",readonly:!0,rows:18,"class":"modal-input-xxlarge"}}}),angular.module("JobEventsFormDefinition",[]).value("JobEventsForm",{name:"job_events",well:!1,forceListeners:!0,fields:{status:{labelClass:"job-{{ status }}",type:"custom",section:"Event",control:'<div class="job-event-status job-{{ status }}"><i class="fa icon-job-{{ status }}"></i> {{ status }}</div>'},id:{label:"ID",type:"text",readonly:!0,section:"Event","class":"span1"},created:{label:"Created On",type:"text",section:"Event",readonly:!0},host:{label:"Host",type:"text",readonly:!0,section:"Event",ngShow:"host !== ''"},play:{label:"Play",type:"text",readonly:!0,section:"Event",ngShow:"play !== ''"},task:{label:"Task",type:"text",readonly:!0,section:"Event",ngShow:"task !== ''"},rc:{label:"Return Code",type:"text",readonly:!0,section:"Results","class":"span1",ngShow:"rc !== ''"},msg:{label:"Msg",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"msg !== ''",rows:10},stdout:{label:"Std Out",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stdout !== ''",rows:10},stderr:{label:"Std Err",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stderr !== ''",rows:10},results:{label:"Results",type:"textarea",section:"Results",readonly:!0,"class":"nowrap",ngShow:"results !== ''",rows:10},start:{label:"Start",type:"text",readonly:!0,section:"Timing",ngShow:"start !== ''"},traceback:{label:!1,type:"textarea",readonly:!0,section:"Traceback","class":"nowrap",ngShow:"traceback !== ''",rows:10},end:{label:"End",type:"text",readonly:!0,section:"Timing",ngShow:"end !== ''"},delta:{label:"Elapsed",type:"text",readonly:!0,section:"Timing",ngShow:"delta !== ''"},module_name:{label:"Name",type:"text",readonly:!0,section:"Module",ngShow:"module_name !== ''"},module_args:{label:"Args",type:"text",readonly:!0,section:"Module",ngShow:"module_args !== ''"}}}),angular.module("JobSummaryDefinition",[]).value("JobSummary",{editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!1,fields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space resizable",ngShow:'result_stdout != ""'},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space resizable",ngShow:'result_traceback != ""'}}}),angular.module("JobTemplateFormDefinition",[]).value("JobTemplateForm",{addTitle:"Create Job Templates",editTitle:"{{ name }}",name:"job_templates",twoColumns:!0,well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body"},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"},column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"true"},column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",awRequiredWhen:{variable:"playbookrequired",init:"true"},column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Machine Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCloudcredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"default":"0",addRequired:!1,editRequired:!1,"class":"input-small",column:1,awPopOver:'<p>The number of parallel or simultaneous processes to use while executing the playbook. 0 signifies the default value from the <a href="http://docs.ansible.com/intro_configuration.html#the-ansible-configuration-file"  target="_blank">ansible configuration file</a>.</p>',dataTitle:"Forks",dataPlacement:"right",dataContainer:"body"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see <a href="http://docs.ansible.com/intro_patterns.html" target="_blank">the Patters top at docs.ansible.com</a>.</p>',dataTitle:"Limit",dataPlacement:"right",dataContainer:"body"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,"default":"---",column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataPlacement:"right",dataContainer:"body"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataPlacement:"right",dataContainer:"body"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting the Tower server using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{jobs:{type:"collection",title:"Jobs",iterator:"job",index:!1,open:!1,actions:{reset:{dataPlacement:"top",icon:"icon-undo",mode:"all","class":"btn-xs btn-primary",awToolTip:"Reset the search filter",ngClick:"resetSearch('job')",iconSize:"large"}},fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},created:{label:"Date",link:!1,searchable:!1},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{}} job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},fieldActions:{edit:{label:"View",ngClick:"edit('jobs', job.id, job.name)",icon:"icon-zoom-in"}}}}}),angular.module("JobFormDefinition",[]).value("JobForm",{addTitle:"Create Job",editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!0,collapse:!0,collapseMode:"edit",collapseTitle:"Job Template",twoColumns:!0,navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",active:!0,ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{name:{label:"Job Template",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":"run",addRequired:!0,editRequired:!0,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body",column:1},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpInventory()",column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpProject()",column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"class":"input-small","default":"0",addRequired:!1,editRequired:!1,column:1,disabled:!0,awPopOver:"<p>The number of parallel or simultaneous processes to use while executing the playbook.</p>",dataContainer:"body",dataTitle:"Forks",dataPlacement:"right"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see the <a href="http://ansible.cc/docs/patterns.html#selecting-targets" target="_blank">Selecting Targets section</a> under Inventory and Patterns  in the Ansible documentation.</p>',dataContainer:"body",dataTitle:"Limit",dataPlacement:"right"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataContainer:"body",dataPlacement:"right"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataContainer:"body",dataPlacement:"right"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')","class":"span12",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting Tower using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{label:"Save",icon:"icon-ok","class":"btn-success",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",label:"Reset",icon:"icon-undo","class":"btn btn-default",ngDisabled:!0}},statusFields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space",ngShow:"result_stdout != ''"},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space",ngShow:"result_traceback != ''"}},statusActions:{refresh:{dataPlacement:"top",icon:"icon-refresh",iconSize:"large",mode:"all","class":"btn-xs btn-primary",awToolTip:"Refresh the page",ngClick:"refresh()"}}}),angular.module("LicenseFormDefinition",[]).value("LicenseForm",{name:"license",well:!1,forceListeners:!0,fields:{license_status:{type:"custom",control:'<div class="license-status" ng-class="status_color"><i class="fa fa-circle"></i> {{ license_status }}</span></div>',readonly:!0,section:"License"},license_key:{label:"Key",type:"textarea","class":"modal-input-xlarge",readonly:!0,section:"License"},license_date:{label:"Expires On",type:"text",readonly:!0,section:"License"},time_remaining:{label:"Time Left",type:"text",readonly:!0,section:"License"},available_instances:{label:"Available",type:"text",readonly:!0,section:"Managed Hosts"},current_instances:{label:"Used",type:"text",readonly:!0,section:"Managed Hosts"},free_instances:{label:"Remaining",type:"text",readonly:!0,section:"Managed Hosts",controlNGClass:"free_instances_class",labelNGClass:"free_instances_class"},company_name:{label:"Company",type:"text",readonly:!0,section:"Contact Info"},contact_name:{label:"Contact",type:"text",readonly:!0,section:"Contact Info"},contact_email:{label:"Contact Email",type:"text",readonly:!0,section:"Contact Info"}}}),angular.module("OrganizationFormDefinition",[]).value("OrganizationForm",{addTitle:"Create Organization",editTitle:"{{ name }}",name:"organization",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",label:"Add",icon:"icon-plus",awToolTip:"Add a new user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit","class":"btn-default",awToolTip:"Edit user"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove user"}}},admins:{type:"collection",title:"Administrators",iterator:"admin",open:!1,base:"/users",actions:{add:{ngClick:"add('admins')",icon:"icon-plus",label:"Add",awToolTip:"Add new administrator"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', admin.id, admin.username)",icon:"icon-edit",awToolTip:"Edit administrator","class":"btn-default"},"delete":{label:"Delete",ngClick:"delete('admins', admin.id, admin.username, 'administrators')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove administrator"}}}}}),angular.module("PermissionFormDefinition",[]).value("PermissionsForm",{addTitle:"Add Permission",editTitle:"{{ name }}",name:"permission",well:!0,forceListeners:!0,stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"},fields:{category:{label:"Permission Type",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Inventory",value:"Inventory",selected:!0},{label:"Deployment",value:"Deploy"}],ngChange:"selectCategory()"},name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},user:{label:"User",type:"hidden"},team:{label:"Team",type:"hidden"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngShow:"category == 'Deploy'",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"false"}},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"}},permission_type:{label:"Permission",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Read",value:"read",ngShow:"category == 'Inventory'"},{label:"Write",value:"write",ngShow:"category == 'Inventory'"},{label:"Admin",value:"admin",ngShow:"category == 'Inventory'"},{label:"Run",value:"run",ngShow:"category == 'Deploy'"},{label:"Check",value:"check",ngShow:"category == 'Deploy'"}],helpCollapse:[{hdr:"Permission",ngBind:"permissionTypeHelp"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("ProjectStatusDefinition",[]).value("ProjectStatusForm",{name:"project_update",editTitle:"SCM Status",well:!1,"class":"horizontal-narrow",fields:{created:{label:"Created",type:"text",readonly:!0},status:{label:"Status",type:"text",readonly:!0},result_stdout:{label:"Std Out",type:"textarea",ngShow:"result_stdout","class":"mono-space",readonly:!0,rows:15},result_traceback:{label:"Traceback",type:"textarea",ngShow:"result_traceback","class":"mono-space",readonly:!0,rows:15}}}),angular.module("ProjectFormDefinition",[]).value("ProjectsForm",{addTitle:"Create Project",editTitle:"{{ name }}",name:"project",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",addRequired:!0,editRequired:!1,excludeMode:"edit",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"},awPopOver:"<p>A project must have at least one organization. Pick one organization now to create the project, and then after the project is created you can add additional organizations.</p><p>Only super users and organization administrators are allowed to make changes to projects. Associating one or more organizations to a project determins which organizations admins have access to modify the project.",dataTitle:"Organization",dataContainer:"body",dataPlacement:"right"},scm_type:{label:"SCM Type",type:"select",ngOptions:"type.label for type in scm_type_options",ngChange:"scmChange()",addRequired:!0,editRequired:!0},missing_path_alert:{type:"alertblock","class":"alert-info",ngShow:"showMissingPlaybooksAlert && scm_type.value == ''",alertTxt:'<p class="text-justify"><strong>WARNING:</strong> There are no unassigned playbook directories in the base project path {{ base_dir }}. Either the projects directory is empty, or all of the contents are already assigned to other projects. New projects can be checked out from source control by changing the SCM type option rather than specifying checkout paths manually. To continue with manual setup, log into the Tower host and ensure content is present in a subdirectory under {{ base_dir }}. Run "chown -R awx" on the content directory to ensure Tower can read the playbooks.</p>',closeable:!1},base_dir:{label:"Project Base Path",type:"textarea",showonly:!0,ngShow:"scm_type.value == ''",awPopOver:"<p>Base path used for locating playbooks. Directories found inside this path will be listed in the playbook directory drop-down. Together the base path and selected playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Base Path",dataContainer:"body",dataPlacement:"right"},local_path:{label:"Playbook Directory",type:"select",id:"local-path-select",ngOptions:"path.label for path in project_local_paths",awRequiredWhen:{variable:"pathRequired",init:!1},ngShow:"scm_type.value == '' && !showMissingPlaybooksAlert",awPopOver:"<p>Select from the list of directories found in the base path.Together the base path and the playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Path",dataContainer:"body",dataPlacement:"right"},scm_url:{label:"SCM URL",type:"text",ngShow:"scm_type && scm_type.value !== ''",awRequiredWhen:{variable:"scmRequired",init:!1},helpCollapse:[{hdr:"GIT URLs",content:'<p>Example URLs for GIT SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible.git</li><li>git@github.com:ansible/ansible.git</li><li>git://servername.example.com/ansible.git</li></ul><p><strong>Note:</strong> If using SSH protocol for GitHub or Bitbucket, enter in the SSH key only, do not enter a username (other than git). Additionally, GitHub and Bitbucket do not support password authentication when using SSH protocol. GIT read only protocol (git://) does not use username or password information.',show:"scm_type.value == 'git'"},{hdr:"SVN URLs",content:'<p>Example URLs for Subversion SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible</li><li>svn://servername.example.com/path</li><li>svn+ssh://servername.example.com/path</li></ul>',show:"scm_type.value == 'svn'"},{hdr:"Mercurial URLs",content:'<p>Example URLs for Mercurial SCM include:</p><ul class="no-bullets"><li>https://bitbucket.org/username/project</li><li>ssh://hg@bitbucket.org/username/project</li><li>ssh://server.example.com/path</li></ul><p><strong>Note:</strong> Mercurial does not support password authentication for SSH. If applicable, add the username, password and key below. Do not put the username and key in the URL. If using Bitbucket and SSH, do not supply your Bitbucket username.',show:"scm_type.value == 'hg'"}]},scm_branch:{labelBind:"scmBranchLabel",type:"text",ngShow:"scm_type && scm_type.value !== ''",addRequired:!1,editRequired:!1},credential:{label:"SCM Credential",type:"lookup",ngShow:"scm_type && scm_type.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1},checkbox_group:{label:"SCM Update Options",type:"checkbox_group",ngShow:"scm_type && scm_type.value !== ''",fields:[{name:"scm_clean",label:"Clean",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Remove any local modifications prior to performing an update.</p>",dataTitle:"SCM Clean",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_delete_on_update",label:"Delete on Update",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Delete the local repository in its entirety prior to performing an update.</p><p>Depending on the size of the repository this may significantly increase the amount of time required to complete an update.</p>",dataTitle:"SCM Delete",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_update_on_launch",label:"Update on Launch",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this project, perform an update to the local repository prior to starting the job.</p>",dataTitle:"SCM Update",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{add:{ngClick:"add('organizations')",icon:"icon-plus",label:"Add",awToolTip:"Add an organization"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('organizations', organization.id, organization.name)",icon:"icon-edit",awToolTip:"Edit the organization","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('organizations', organization.id, organization.name, 'organizations')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the organization"}}}}}),angular.module("TeamFormDefinition",[]).value("TeamForm",{addTitle:"Create Team",editTitle:"{{ name }}",name:"team",well:!0,collapse:!0,collapseTitle:"Team Settings",collapseMode:"edit",collapseOpen:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"teamrequired",init:"true"}}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",add:"Add a new credential"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Modify the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{add:{ngClick:"add('projects')",icon:"icon-plus",label:"Add"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('projects', project.id, project.name)",icon:"icon-edit",awToolTip:"Modify the project","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('projects', project.id, project.name, 'projects')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the project"}}},users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",icon:"icon-plus",label:"Add",awToolTip:"Add a user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit",awToolTip:"Edit user","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-terash","class":"btn-danger",awToolTip:"Remove user"}}}}}),angular.module("UserFormDefinition",[]).value("UserForm",{addTitle:"Create User",editTitle:"{{ username }}",name:"user",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{first_name:{label:"First Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},last_name:{label:"Last Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},email:{label:"Email",type:"email",addRequired:!0,editRequired:!0,autocomplete:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",excludeMode:"edit",awRequiredWhen:{variable:"orgrequired",init:!0}},username:{label:"Username",type:"text",awRequiredWhen:{variable:"not_ldap_user",init:!0},autocomplete:!1},password:{label:"Password",type:"password",ngShow:"ldap_user == false",addRequired:!0,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",autocomplete:!1,chkPass:!0},password_confirm:{label:"Confirm Password",type:"password",ngShow:"ldap_user == false",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},is_superuser:{label:"Superuser (User has full system administration privileges.)",type:"checkbox",trueValue:"true",falseValue:"false","default":"false",ngShow:"current_user['is_superuser'] == true"},ldap_user:{label:"Created by LDAP",type:"checkbox",readonly:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",awToolTip:"Add a credential for this user"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Edit the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},admin_of_organizations:{type:"collection",title:"Admin of Organizations",iterator:"adminof",open:!1,base:"/organizations",actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},teams:{type:"collection",title:"Teams",iterator:"team",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}}}}),angular.module("InventoryGroupsHelpDefinition",[]).value("InventoryGroupsHelp",{story:{hdr:"Building your inventory",width:510,height:560,steps:[{intro:"Start by creating a group:",img:{src:"groups001.png",maxWidth:338,maxHeight:222},box:'Click <i class="fa fa-plus"></i> on the groups list (the left side of the page) to add a new group.',autoOffNotice:!0},{intro:"Enter group properties:",img:{src:"groups002.png",maxWidth:443,maxHeight:251},box:'Enter the group name, a description and any inventory variables. Variables can be entered using either JSON or YAML syntax. For more on inventory variables, see <a href="http://docs.ansible.com/intro_inventory.html" target="_blank"> docs.ansible.com/intro_inventory.html</a>'},{intro:"Cloud inventory: select cloud source",img:{src:"groups003.png",maxWidth:412,maxHeight:215},box:'For a cloud inventory, choose the cloud provider from the list and select your credentials. If you have not already setup credentials for the provider, you will need to do that first on the <a href="/#/credentials" target="_blank">Credentials</a> tab.'},{intro:"Cloud inventory: synchronize Tower with the cloud",img:{src:"groups004.png",maxWidth:261,maxHeight:221},box:'To pull the cloud inventory into Tower, initiate an inventory sync by clicking <i class="fa fa-exchange"></i>.'},{intro:"Groups can have subgroups:",img:{src:"groups005.png",maxWidth:430,maxHeight:206},box:'<div class="text-left">First, select a group. Then click <i class="fa fa-plus"></i> to create a new group. The new group will be added to the selected group.</div>'},{intro:"Copy or move groups:",img:{src:"groups006.png",maxWidth:263,maxHeight:211},box:'<div class="text-left">Copy or move a group by dragging and dropping its name onto another group name. A dialog will appear asking if the group should be coppied or moved.</div>'},{intro:"Adding hosts:",img:{src:"groups007.png",maxWidth:466,maxHeight:178},box:'<div class="text-left"><p>First, select a Group. Then click <i class="fa fa-plus"></i> on the hosts list (the right side of the page) to create a host. The new host will be part of the selected group.</p><p>Note hosts cannot be added to the All Hosts group.</p></div>'}]}}),angular.module("AccessHelper",["RestServices","Utilities","ngCookies"]).factory("CheckAccess",["$rootScope","Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d,e){return function(b){var d=a.current_user,f=b.scope;
d.is_superuser?f.PermissionAddAllowed=!0:d.related.admin_of_organizations&&(c.setUrl(d.related.admin_of_organizations),c.get().success(function(a){f.PermissionAddAllowed=a.results.length>0?!0:!1}).error(function(a,b){e(f,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.admin_of_organizations+" failed. DELETE returned status: "+b})}))}}]).factory("CheckLicense",["$rootScope","$cookieStore","Alert","$location","Authorization",function(a,b,c,d,e){return function(){var d,f,g="success",h=b.get("license"),i='<p>To purchase a license or extend an existing license <a href="http://www.ansible.com/ansible-pricing" target="_blank"><strong>visit the Ansible online store</strong></a>, or visit <strong><a href="https://support.ansible.com" target="_blank">support.ansible.com</a></strong> for assistance.</p>';h&&!e.licenseTested()&&(h.tested=!0,b.remove("license"),b.put("license",h),a.license_tested=!0,void 0!==h.valid_key&&h.valid_key===!1?(g="alert-danger",d="License Error",f="<p>There is a problem with the /etc/awx/license file on your Tower server. Check to make sure Tower can access the file.</p>"+i,c(d,f,g,null,!1,!0)):void 0!==h.demo&&h.demo===!0&&(g="alert-info",d="Tower Demo",f="<p>Thank you for trying Ansible Tower. You can use this edition to manage up to 10 hosts free.</p>"+i,c(d,f,g)),void 0!==h.date_expired&&h.date_expired===!0?(g="alert-info",d="License Expired",f="<p>Your Ansible Tower License has expired and is no longer compliant. You can continue, but you will be unable to add any additional hosts.</p>"+i,c(d,f,g)):void 0!==h.date_warning&&h.date_warning===!0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license is about to expire!</p>"+i,c(d,f,g)),void 0!==h.free_instances&&parseInt(h.free_instances)<=0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license has reached capacity for the number of managed hosts allowed. You will not be able to add any additional hosts.</p>"+i,c(d,f,g,null,!0)))}}]),angular.module("ChildrenHelper",["RestServices","Utilities"]).factory("ToggleChildren",[function(){return function(a){function b(a){var b;for(i[a].ngicon="fa fa-minus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!0)}function c(a){var b;for(i[a].ngicon="fa fa-plus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!1,i[b].related.children&&c(b))}var d,e,f=a.scope,g=a.list,h=a.id,i=f[g.name],j=!1;for(d=0;d<i.length&&j===!1;d++)i[d].id===h&&(e=d,j=!0);/plus-square-o/.test(i[e].ngicon)?b(e):/minus-square-o/.test(i[e].ngicon)&&c(e)}}]),angular.module("CredentialsHelper",["Utilities"]).factory("KindChange",["Empty",function(a){return function(b){var c,d,e=b.scope,f=b.reset;if(e.usernameLabel="Username",e.aws_required=!1,e.rackspace_required=!1,e.sshKeyDataLabel="SSH Private Key",!a(e.kind))switch(e.kind.value){case"aws":e.aws_required=!0;break;case"rax":e.rackspace_required=!0;break;case"ssh":e.usernameLabel="SSH Username";break;case"scm":e.sshKeyDataLabel="SCM Private Key"}f&&(e.access_key=null,e.secret_key=null,e.api_key=null,e.username=null,e.password=null,e.password_confirm=null,e.ssh_key_data=null,e.ssh_key_unlock=null,e.ssh_key_unlock_confirm=null,e.sudo_username=null,e.sudo_password=null,e.sudo_password_confirm=null),c=$("#credential_kind").parent().find(".panel-collapse").first(),d=c.attr("id"),a(e.kind)||""===e.kind.value?$("#"+d+"-icon").hasClass("icon-plus")&&e.accordionToggle("#"+d):$("#"+d+"-icon").hasClass("icon-minus")&&e.accordionToggle("#"+d)}}]).factory("OwnerChange",[function(){return function(a){var b=a.scope,c=b.owner;"team"===c?(b.team_required=!0,b.user_required=!1,b.user=null,b.user_username=null):(b.team_required=!1,b.user_required=!0,b.team=null,b.team_name=null)}}]).factory("FormSave",["$location","Alert","Rest","ProcessErrors","Empty","GetBasePath","CredentialForm","ReturnToCaller","Wait",function(a,b,c,d,e,f,g,h,i){return function(j){var k,l,m=j.scope,n=j.mode,o=g,p={};for(k in o.fields)"access_key"!==k&&"secret_key"!==k&&"ssh_username"!==k&&"ssh_password"!==k&&(p[k]=null===m[k]?"":m[k]);switch(e(m.team)?(p.user=m.user,p.team=""):(p.team=m.team,p.user=""),p.kind=m.kind.value,p.kind){case"ssh":p.password=m.ssh_password;break;case"aws":p.username=m.access_key,p.password=m.secret_key;break;case"rax":p.password=m.api_key}e(p.team)&&e(p.user)?b("Missing User or Team","You must provide either a User or a Team. If this credential will only be accessed by a specific user, select a User. To allow a team of users to access this credential, select a Team.","alert-danger"):(i("start"),"add"===n?(l=e(p.team)?f("users")+p.user+"/credentials/":f("teams")+p.team+"/credentials/",c.setUrl(l),c.post(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to create new Credential. POST status: "+b})})):(l=f("credentials")+m.id+"/",c.setUrl(l),c.put(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to update Credential. PUT status: "+b})})))}}]),angular.module("EventsHelper",["RestServices","Utilities","JobEventDataDefinition","JobEventsFormDefinition"]).factory("EventView",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","JobEventDataForm","Empty","JobEventsForm",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.event_id,d=g,f=angular.copy(n),h=j("base")+"job_events/"+c+"/";e.setUrl(h),e.get().success(function(a){var c,e,h,i,j,n;if($.isEmptyObject(a.event_data)||!a.event_data.res||"string"==typeof a.event_data.res)for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"results":case"module_name":case"module_args":case"rc":delete f.fields[h]}($.isEmptyObject(a.event_data)||!a.event_data.res||"string"!=typeof a.event_data.res)&&delete f.fields.traceback;for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"rc":a.event_data&&a.event_data.res&&m(a.event_data.res[h])?delete f.fields[h]:"textarea"===f.fields[h].type&&(e=a.event_data.res[h].match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i);break;case"results":if(a.event_data&&a.event_data.res&&void 0===a.event_data.res[h])delete f.fields[h];else if(Array.isArray(a.event_data.res[h])&&0!==a.event_data.res[h].length){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""===j?delete f.fields[h]:(e=j.match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i)}else delete f.fields[h];break;case"module_name":case"module_args":a.event_data&&a.event_data.res&&(void 0===a.event_data.res.invocation||void 0===a.event_data.res.invocation[h])&&delete f.fields[h]}b=d.inject(f,{mode:"edit",modal:!0,related:!1}),d.reset(),b.formModalAction=function(){$("#form-modal").modal("hide")},b.formModalActionLabel="OK",b.formModalCancelShow=!1,b.formModalInfo="View JSON",$("#form-modal .btn-success").removeClass("btn-success").addClass("btn-none"),$("#form-modal").addClass("skinny-modal"),b.formModalHeader=a.event_display.replace(/^\u00a0*/g,""),b.formModalInfoAction=function(){var b=g,c=b.inject(l,{mode:"edit",modal:!0,related:!1,modal_selector:"#form-modal2",modal_body_id:"form-modal2-body",modal_title_id:"formModal2Header"});b.reset(),c.formModal2Header=a.event_display.replace(/^\u00a0*/g,""),c.event_data=JSON.stringify(a.event_data,null,"	"),c.formModal2ActionLabel="OK",c.formModal2CancelShow=!1,c.formModal2Info=!1,c.formModalInfo="View JSON",c.formModal2Action=function(){$("#form-modal2").modal("hide")},$("#form-modal2 .btn-success").removeClass("btn-success").addClass("btn-none")},"string"==typeof a.event_data.res&&(b.traceback=a.event_data.res);for(h in f.fields)switch(h){case"status":b.status=a.failed?"error":a.changed?"changed":"success";break;case"created":n=new Date(a.created),b.created=k(n);break;case"host":a.summary_fields&&a.summary_fields.host&&(b.host=a.summary_fields.host.name);break;case"id":case"task":case"play":b[h]=a[h];break;case"start":case"end":a.event_data&&a.event_data.res&&!m(a.event_data.res[h])&&(b[h]=a.event_data.res[h]);break;case"results":if(Array.isArray(a.event_data.res[h])&&a.event_data.res[h].length>0){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""!==j&&(b[h]=j)}break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[h]&&(b[h]=a.event_data.res[h]);break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(b[h]=a.event_data.res.invocation[h])}b.$$phase||b.$digest()}).error(function(a,d){$("#form-modal").modal("hide"),i(b,a,d,f,{hdr:"Error!",msg:"Failed to retrieve event: "+c+". GET status: "+d})})}}]),angular.module("GroupsHelper",["RestServices","Utilities","ListGenerator","GroupListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","GroupsHelper","InventoryHelper","SelectionHelper","JobSubmissionHelper","RefreshHelper","PromptDialog","CredentialsListDefinition","InventoryTree"]).factory("GetSourceTypeOptions",["Rest","ProcessErrors","GetBasePath",function(a,b,c){return function(d){var e=d.scope,f=d.variable;void 0===e[f]&&(e[f]=[],a.setUrl(c("inventory_sources")),a.options().success(function(a){var b,c=a.actions.GET.source.choices;for(b=0;b<c.length;b++)"file"!==c[b][0]&&e[f].push({label:""===c[b][0]?"Manual":c[b][1],value:c[b][0]})}).error(function(a,c){b(e,a,c,null,{hdr:"Error!",msg:"Failed to retrieve options for inventory_sources.source. OPTIONS status: "+c})}))}}]).factory("ViewUpdateStatus",["Rest","ProcessErrors","GetBasePath","ShowUpdateStatus","Alert","Wait","Empty","Find",function(a,b,c,d,e,f,g,h){return function(c){var i=c.scope,j=c.tree_id,k=c.group_id,l=h({list:i.groups,key:"id",val:j});l&&(g(l.source)?e("Missing Configuration","The selected group is not configured for inventory sync. You must first edit the group, provide Source settings, and then run the sync process.","alert-info"):g(l.status)||"never updated"===l.status?e("No Status Available",'An inventory sync has not been performed for the selected group. Start the process by clicking the <i class="fa fa-exchange"></i> button.',"alert-info"):(f("start"),a.setUrl(l.related.inventory_source),a.get().success(function(a){var b=a.related.current_update?a.related.current_update:a.related.last_update;d({group_name:a.summary_fields.group.name,last_update:b,license_error:a.summary_fields.last_update&&a.summary_fields.last_update.license_error?!0:!1,tree_id:j,group_id:k,parent_scope:i})}).error(function(a,c){f("stop"),b(i,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+l.related.inventory_source+" POST returned status: "+c})})))}}]).factory("GetHostsStatusMsg",[function(){return function(a){var b,c,d,e=a.active_failures,f=a.total_hosts;return e>0?(b=f+(1===f?" host":" hosts")+". "+e+" with failed jobs.",d="true",c=!0):(c=!1,0===f?(b="Group contains 0 hosts.",d="na"):(b=f+(1===f?" host":" hosts")+". No job failures",d="false")),{tooltip:b,failures:c,"class":d}}}]).factory("GetSyncStatusMsg",[function(){return function(a){var b,c,d,e=a.status,f="",g="Start sync process";switch(b=e,c="icon-cloud-"+b,e){case"never updated":b="never",c="icon-cloud-na disabled",d='Sync not performed. Click <i class="fa fa-exchange"></i> to start it now.';break;case"none":case"":f="btn-disabled",b="n/a",c="icon-cloud-na disabled",d='Cloud source not configured. Click <i class="fa fa-pencil"></i> to update.',g=d;break;case"failed":d="Sync failed. Click to view log.";break;case"successful":d="Sync completed. Click to view log.";break;case"updating":d="Sync running"}return{"class":c,tooltip:d,status:b,launch_class:f,launch_tip:g}}}]).factory("SourceChange",["GetBasePath","CredentialList","LookUpInit","Empty",function(a,b,c,d){return function(e){var f,g,h=e.scope,i=e.form;d(h.source)||("file"===h.source.value?h.sourcePathRequired=!0:(h.sourcePathRequired=!1,h.source_path="",h[i.name+"_form"].source_path.$setValidity("required",!0)),"rax"===h.source.value?(h.source_region_choices=h.rax_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])):"ec2"===h.source.value&&(h.source_region_choices=h.ec2_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])),("rax"===h.source.value||"ec2"===h.source.value)&&(f="rax"===h.source.value?"rax":"aws",g=a("credentials")+"?cloud=true&kind="+f,c({url:g,scope:h,form:i,list:b,field:"credential"})))}}]).factory("GroupsCancelUpdate",["Rest","ProcessErrors","Alert","Wait","Find",function(a,b,c,d,e){return function(f){var g,h=f.scope,i=f.tree_id;h.removeCancelUpdate&&h.removeCancelUpdate(),h.removeCancelUpdate=h.$on("CancelUpdate",function(e,f){a.setUrl(f),a.post().success(function(){d("stop"),c("Inventory Sync Cancelled",'Your request to cancel the sync process was submitted to the task manger. Click the <i class="fa fa-refresh fa-lg"></i> button to monitor the status.',"alert-info")}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+f+" failed. POST status: "+c})})}),h.removeCheckCancel&&h.removeCheckCancel(),h.removeCheckCancel=h.$on("CheckCancel",function(e,f,g){var i=g?g:f;i+="cancel/",a.setUrl(i),a.get().success(function(a){a.can_cancel?h.$emit("CancelUpdate",i):(d("stop"),c("Cancel Inventory Sync",'Either you do not have access or the sync process completed.<br /> Click the <i class="fa fa-refresh fa-lg"></i> button to view the latest status.',"alert-info"))}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+i+" failed. GET status: "+c})})}),g=e({list:h.groups,key:"id",val:i}),h.selected_tree_id=g.id,h.selected_group_id=g.group_id,!g||"updating"!==g.status&&"pending"!==g.status?c("Cancel Inventory Sync",'The sync process completed. Click the <i class="fa fa-refresh fa-lg"></i> to view the latest status.',"alert-info"):(d("start"),a.setUrl(g.related.inventory_source),a.get().success(function(a){h.$emit("CheckCancel",a.related.last_update,a.related.current_update)}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+g.related.inventory_source+" failed. GET status: "+c})}))}}]).factory("GroupsAdd",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","ParseTypeChange","GroupsEdit","Wait","GetChoices","GetSourceTypeOptions","LookUpInit","BuildTree","SourceChange","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return function(b){var c,d=b.inventory_id,i=void 0!==b.group_id?b.group_id:null,m=b.scope,q=null!==i?k("groups")+i+"/children/":k("inventory")+d+"/groups/",u=g,v=h,w=v.inject(u,{mode:"add",modal:!0,related:!1,show_modal:!1});$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),w.formModalActionLabel="Save",w.formModalCancelShow=!0,w.parseType="yaml",w.source=null,l(w),v.reset(),w.removeAddTreeRefreshed&&w.removeAddTreeRefreshed(),w.removeAddTreeRefreshed=w.$on("GroupTreeRefreshed",function(){a.formModalHeader=null,a.formModalCancleShow=null,a.formModalActionLabel=null,n("stop"),$("#form-modal").modal("hide"),w.removeAddTreeRefreshed()}),w.removeSaveComplete&&w.removeSaveComplete(),w.removeSaveComplete=w.$on("SaveComplete",function(a,b,c){c||(w.searchCleanup&&w.searchCleanup(),w.formModalActionDisabled=!1,r({scope:m,inventory_id:d,refresh:!0,new_group_id:b}),t())}),w.removeFormSaveSuccess&&w.removeFormSaveSuccess(),w.removeFormSaveSuccess=w.$on("formSaveSuccess",function(a,b,c){var d,g,h,i,k=!1,l={};if(null!==w.source.value&&""!==w.source.value){for(l.group=b,l.source=w.source.value,l.source_path=w.source_path,l.credential=w.credential,l.overwrite=w.overwrite,l.overwrite_vars=w.overwrite_vars,l.update_on_launch=w.update_on_launch,d=$("#s2id_group_source_regions").select2("data"),g=[],h=0;h<d.length;h++)g.push(d[h].id);if(l.source_regions=g.join(),"ec2"===w.source.value)try{if(i="json"===w.envParseType?JSON.parse(w.source_vars):jsyaml.load(w.source_vars),"object"!=typeof i)throw"failed to return an object!";l.source_vars=$.isEmptyObject(i)?"":JSON.stringify(i,void 0,"	")}catch(m){k=!0,w.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+m)}k||(e.setUrl(c),e.put(l).success(function(){w.$emit("SaveComplete",b,!1)}).error(function(a,c){w.$emit("SaveComplete",b,!0),j(w,a,c,u,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+c})}))}else w.$emit("SaveComplete",b,!1)}),w.cancelModal=function(){w.searchCleanup&&w.searchCleanup(),t()},w.formModalAction=function(){var a,b;n("start");try{if(w.formModalActionDisabled=!0,a="json"===w.parseType?JSON.parse(w.variables):jsyaml.load(w.variables),"object"!=typeof a)throw"failed to return an object!";b={name:w.name,description:w.description},d&&(b.inventory=d),b.variables=$.isEmptyObject(a)?"":JSON.stringify(a,void 0,"	"),e.setUrl(q),e.post(b).success(function(a){w.$emit("formSaveSuccess",a.id,k("inventory_sources")+a.id+"/")}).error(function(a,b){n("stop"),w.formModalActionDisabled=!1,j(w,a,b,u,{hdr:"Error!",msg:"Failed to add new group. POST returned status: "+b})})}catch(c){n("stop"),w.formModalActionDisabled=!1,f("Error","Error parsing group variables. Parser returned: "+c)}},w.sourceChange=function(){s({scope:w,form:g})},c=0,w.removeChoicesReady&&w.removeChoicesReady(),w.removeChoicesReady=w.$on("choicesReadyGroup",function(){c++,2===c&&($("#form-modal").modal("show"),n("stop"))}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),p({scope:w,variable:"source_type_options"}),n("start")}}]).factory("GroupsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","SetNodeName","ParseTypeChange","GetSourceTypeOptions","InventoryUpdate","LookUpInit","Empty","Wait","GetChoices","UpdateGroup","SourceChange","Find","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return function(a){var b,c=a.scope,d=a.group_id,i=a.tree_id,l=a.inventory_id,p=a.groups_reload,q=h,r=g,y=k("groups")+d+"/",z={},A=q.inject(r,{mode:"edit",modal:!0,related:!1,show_modal:!1});q.reset(),n({scope:A,variable:"source_type_options"}),A.formModalActionLabel="Save",A.formModalHeader="Group",A.formModalCancelShow=!0,A.source=r.fields.source["default"],A.parseType="yaml",A[r.fields.source_vars.parseTypeName]="yaml",A.sourcePathRequired=!1,m(A),m(A,"source_vars",r.fields.source_vars.parseTypeName),A.groupLoadedRemove&&A.groupLoadedRemove(),A.groupLoadedRemove=A.$on("groupLoaded",function(){A.variable_url?(e.setUrl(A.variable_url),e.get().success(function(a){A.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),s("stop")}).error(function(a,b){A.variables=null,s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group variables. GET returned status: "+b})})):A.variables="---",z.variables=A.variables,A.source_url&&(e.setUrl(A.source_url),e.get().success(function(a){var b,c,d,e,f,g,h,i,j;for(b in r.fields){if("checkbox_group"===b)for(c=0;c<r.fields[b].fields.length;c++)e=r.fields[b].fields[c],void 0!==a[e.name]&&(A[e.name]=a[e.name],z[e.name]=A[e.name]);if("source"===b){for(f=!1,c=0;c<A.source_type_options.length;c++)A.source_type_options[c].value===a.source&&(A.source=A.source_type_options[c],f=!0);A.groupUpdateHide=f&&""!==A.source.value?!1:!0,z.source=A.source}else if("update_interval"===b)for((""===a[b]||null===a[b]||void 0===a[b])&&(a[b]=0),c=0;c<A.update_interval_options.length;c++)A.update_interval_options[c].value===a[b]&&(A[b]=A.update_interval_options[c]);else"source_vars"===b?($.isEmptyObject(a.source_vars)||"{}"===a.source_vars||"null"===a.source_vars||""===a.source_vars?A.source_vars="---":(g=JSON.parse(a.source_vars),A.source_vars=jsyaml.safeDump(g)),z.source_vars=A.variables):a[b]&&(A[b]=a[b],z[b]=A[b]);r.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[r.fields[b].sourceModel]&&(A[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField],z[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField])}if(A.sourceChange(),a.source_regions){if("ec2"===a.source||"rax"===a.source){for(h="ec2"===a.source?A.ec2_regions:A.rax_regions,i=[],j=a.source_regions.split(","),c=0;c<j.length;c++)for(d=0;d<h.length;d++)j[c]===h[d].value&&i.push({id:h[d].value,text:h[d].label});z.source_regions=i,$("#s2id_group_source_regions").select2("data",i)}}else z.source_regions=[{id:"all",text:"All"}];A.group_update_url=a.related.update,s("stop")}).error(function(a,b){A.source="",s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve inventory source. GET status: "+b})}))}),A.removeChoicesComplete&&A.removeChoicesComplete(),A.removeChoicesComplete=A.$on("choicesCompleteGroup",function(){e.setUrl(y),e.get().success(function(a){for(var b in r.fields)a[b]&&(A[b]=a[b],z[b]=A[b]);A.variable_url=a.related.variable_data,A.source_url=a.related.inventory_source,$("#form-modal").modal("show"),A.$emit("groupLoaded")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group: "+y+". GET status: "+b})})}),b=0,A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReadyGroup",function(){b++,2===b&&A.$emit("choicesCompleteGroup")}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),s("start"),A.removeSaveComplete&&A.removeSaveComplete(),A.removeSaveComplete=A.$on("SaveComplete",function(a,b){if(!b){if(p)u({scope:c,group_id:d,properties:{name:A.name,description:A.description,has_inventory_sources:A.source&&A.source.value?!0:!1,source:A.source&&A.source.value?A.source.value:""}});else if(A.home_groups){var e=w({list:c.home_groups,key:"id",val:d});e&&(e.name=A.name,e.description=A.description)}A.searchCleanUp&&A.searchCleanup(),A.formModalActionDisabled=!1,$("#form-modal").modal("hide"),p&&c.selected_tree_id!==i?c.showHosts(i,d,!1):s("stop"),x()}}),A.removeFormSaveSuccess&&A.removeFormSaveSuccess(),A.removeFormSaveSuccess=A.$on("formSaveSuccess",function(){var a,b,c,g,h=!1,i={group:d,source:A.source&&A.source.value?A.source.value:"",source_path:A.source_path,credential:A.credential,overwrite:A.overwrite,overwrite_vars:A.overwrite_vars,update_on_launch:A.update_on_launch};for(a=$("#s2id_group_source_regions").select2("data"),b=[],c=0;c<a.length;c++)b.push(a[c].id);if(i.source_regions=b.join(),A.source&&"ec2"===A.source.value)try{if(g="json"===A.envParseType?JSON.parse(A.source_vars):jsyaml.load(A.source_vars),"object"!=typeof g)throw"failed to return an object!";i.source_vars=$.isEmptyObject(g)?"":JSON.stringify(g)}catch(k){h=!0,A.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+k)}h||(e.setUrl(A.source_url),e.put(i).success(function(){A.$emit("SaveComplete",!1)}).error(function(a,b){A.$emit("SaveComplete",!0),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+b})}))}),A.cancelModal=function(){A.searchCleanup&&A.searchCleanup(),x()},A.formModalAction=function(){s("start");try{var a,b,c;if(c="json"===A.parseType?JSON.parse(A.variables):jsyaml.load(A.variables),"object"!=typeof c)throw"failed to return an object!";b={};for(a in r.fields)b[a]=A[a];b.inventory=l,e.setUrl(y),e.put(b).success(function(){A.variables?(e.setUrl(A.variable_url),e.put(c).success(function(){A.$emit("formSaveSuccess")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group variables. PUT status: "+b})})):A.$emit("formSaveSuccess")}).error(function(a,b){s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group: "+d+". PUT status: "+b})})}catch(g){s("stop"),f("Error","Error parsing group variables. Parser returned: "+g)}},A.updateGroup=function(){""===A.source||null===A.source?f("Missing Configuration","The selected group is not configured for updates. You must first edit the group, provide Source settings, and then run an update.","alert-info"):"updating"===A.status?f("Update in Progress","The inventory update process is currently running for group <em>"+A.summary_fields.group.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):o({scope:A,group_id:d,url:A.group_update_url,group_name:A.name,group_source:A.source.value})},A.sourceChange=function(){v({scope:A,form:g})}}}]).factory("GroupsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","Wait","BuildTree","Find",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.scope,d=a.tree_id,f=a.inventory_id,g=n({list:c.groups,key:"id",val:d}),h=k("inventory")+f+"/groups/";b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){l("start")}),$("#prompt-modal").modal("hide"),e.setUrl(h),e.post({id:g.group_id,disassociate:1}).success(function(){$("#prompt-modal").off(),c.$emit("GroupDeleteCompleted")}).error(function(a,b){l("stop"),j(c,a,b,null,{hdr:"Error!",msg:"Call to "+h+" failed. POST returned status: "+b})})},i({hdr:"Delete Group",body:"<p>Are you sure you want to delete group <em>"+g.name+"?</p>",action:b,"class":"btn-danger"})}}]).factory("ShowUpdateStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","InventoryStatusForm","Wait","Empty","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){function b(a){var b,d;return b=a.match(/\n/g),d=b?b.length:1,d>c?c:d}var c,d,h,j,n,p,q,r=a.group_name,s=a.last_update,t=g,u=l,v=a.license_error;void 0===s||null===s||""===s?(m("stop"),f("Missing Configuration","The selected group is not configured for inventory sync. Edit the group and provide Source information.","alert-info")):(d='<div id="status-modal-dialog" title="'+r+'- Inventory Sync">\n<div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(d),h=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),j=$(document).width(),n=$("body").height(),j>1199?(p=675,q=750>n?n-20:750,c=18):1199>=j&&j>=768?(p=550,q=620>n?n-15:620,c=12):(p=j-20,q=500>n?n:500,c=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:p,height:q,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),o()},open:function(){m("stop")}}),e.setUrl(s),e.get().success(function(a){for(var c in u.fields)a[c]&&(h[c]="created"===c?k(new Date(a[c])):a[c]);h.license_error=v,h.status_rows=b(a.status),h.stdout_rows=b(a.result_stdout),h.traceback_rows=b(a.result_traceback),$("#status-modal-dialog").dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(h,a,b,null,{hdr:"Error!",msg:"Failed to retrieve last update: "+s+". GET status: "+b})}))}}]),angular.module("HostsHelper",["RestServices","Utilities","ListGenerator","HostListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","HostsHelper","InventoryHelper","RelatedSearchHelper","InventoryFormDefinition","SelectionHelper","HostGroupsFormDefinition"]).factory("SetEnabledMsg",[function(){return function(a){a.enabledToolTip=a.has_inventory_sources?a.enabled?"Host is available":"Host is not available":a.enabled?"Host is available. Click to toggle.":"Host is not available. Click to toggle."}}]).factory("SetHostStatus",["SetEnabledMsg",function(a){return function(b){b.activeFailuresLink="/#/hosts/"+b.id+"/job_host_summaries/?inventory="+b.inventory+"&host_name="+encodeURI(b.name),b.has_active_failures===!0?(b.badgeToolTip="Most recent job failed. Click to view jobs.",b.active_failures="failed"):b.has_active_failures===!1&&null===b.last_job?(b.has_active_failures="none",b.badgeToolTip="No job data available.",b.active_failures="n/a"):b.has_active_failures===!1&&null!==b.last_job&&(b.badgeToolTip="Most recent job successful. Click to view jobs.",b.active_failures="success"),b.enabled_flag=b.enabled,a(b)}}]).factory("SetStatus",["SetEnabledMsg","Empty",function(a,b){return function(c){function d(a){return a.length>25?a.substr(0,25)+"...":a}function e(a){var b,c,e;if(a.has_active_failures===!0||a.has_active_failures===!1&&null!==a.last_job)if(a.has_active_failures===!0?(a.badgeToolTip="Most recent job failed. Click to view jobs.",a.active_failures="failed"):(a.badgeToolTip="Most recent job successful. Click to view jobs.",a.active_failures="success"),a.summary_fields.recent_jobs.length>0){for(e=a.summary_fields.recent_jobs.sort(function(a,b){return-1*(a-b)}),h="Recent Jobs",g='<table class="table table-condensed host-flyout" style="width: 100%">\n',g+="<thead>\n",g+="<tr>\n",g+="<th>ID</td>\n",g+='<th class="text-center">Status</td>\n',g+="<th>View</th>\n",g+="<th>Name</td>\n",g+="</tr>\n",g+="</thead>\n",g+="<tbody>\n",b=0;b<e.length;b++)c=e[b],g+="<tr>\n",g+='<td><a href="/#/jobs/'+c.id+'">'+c.id+"</a></td>\n",g+='<td class="text-center"><a ng-click="showJobSummary('+c.id+')" aw-tool-tip="'+c.status.charAt(0).toUpperCase()+c.status.slice(1)+'. Click for details" data-placement="top"><i class="fa icon-job-'+c.status+'"></i></a></td>\n',g+='<td><a href="/#/jobs/'+c.id+"/job_events/?host="+encodeURI(a.name)+'">Events</a> <a href="/#/jobs/'+c.id+"/job_host_summaries/?host_name="+encodeURI(a.name)+'">Hosts</a></td>\n',g+='<td class="break">'+d(c.name)+"</td>\n",g+="</tr>\n";g+="</tbody>\n",g+="</table>\n"}else h="No job data",g="<p>No recent job data available for this host.</p>";else a.has_active_failures===!1&&null===a.last_job&&(a.has_active_failures="none",a.badgeToolTip="No job data available.",a.active_failures="n/a");a.job_status_html=g,a.job_status_title=h}var f,g,h,i=c.scope,j=c.host;if(b(j))for(f=0;f<i.hosts.length;f++)e(i.hosts[f]),a(i.hosts[f]);else e(j),a(j)}}]).factory("HostsReload",["$routeParams","Empty","InventoryHosts","GetBasePath","SearchInit","PaginateInit","Wait","SetHostStatus","SetStatus","ApplyEllipsis",function(a,b,c,d,e,f,g,h,i,j){return function(h){var k=h.scope,l=h.group_id,m=h.inventory_id,n=c,o=b(l)?d("inventory")+m+"/hosts/":d("groups")+l+"/all_hosts/";k.search_place_holder="Search "+k.selected_group_name,k.removePostRefresh&&k.removePostRefresh(),k.removePostRefresh=k.$on("PostRefresh",function(){for(var a=0;a<k.hosts.length;a++)k.hosts[a].enabled_flag=k.hosts[a].enabled;i({scope:k}),setTimeout(function(){j("#hosts_table .host-name a")},2500),g("stop"),k.$emit("HostReloadComplete")}),e({scope:k,set:"hosts",list:n,url:o}),f({scope:k,list:n,url:o}),a.host_name&&(k[n.iterator+"InputDisable"]=!1,k[n.iterator+"SearchValue"]=a.host_name,k[n.iterator+"SearchField"]="name",k[n.iterator+"SearchFieldLabel"]=n.fields.name.label,k[n.iterator+"SearchSelectValue"]=null),k.show_failures&&(k[n.iterator+"InputDisable"]=!0,k[n.iterator+"SearchValue"]="true",k[n.iterator+"SearchField"]="has_active_failures",k[n.iterator+"SearchFieldLabel"]=n.fields.has_active_failures.label,k[n.iterator+"SearchSelectValue"]={value:1}),k.search(n.iterator)
}}]).factory("InjectHosts",["GenerateList","InventoryHosts","HostsReload",function(a,b,c){return function(d){var e=d.scope,f=d.inventory_id,g=d.group_id,h=d.tree_id,i=a;i.inject(b,{scope:e,mode:"edit",id:"hosts-container",breadCrumbs:!1,searchSize:"col-lg-6 col-md-6 col-sm-6"}),c({scope:e,group_id:g,tree_id:h,inventory_id:f})}}]).factory("ToggleHostEnabled",["GetBasePath","Rest","Wait","ProcessErrors","Alert","Find","SetEnabledMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){a.enabled=a.enabled?!1:!0,a.enabled_flag=a.enabled,g(a)}var j,k=h.host_id,l=h.external_source,m=h.scope;l?e("Action Not Allowed","This host is part of a cloud inventory. It can only be disabled in the cloud. After disabling it, run an inventory sync to see the new status reflected here.","alert-info"):(c("start"),j=f({list:m.hosts,key:"id",val:k}),i(j),b.setUrl(a("hosts")+k+"/"),b.put(j).success(function(){c("stop")}).error(function(a,b){i(j),c("stop"),d(m,a,b,null,{hdr:"Error!",msg:"Failed to update host. PUT returned status: "+b})}))}}]).factory("HostsList",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostList","GenerateList","Prompt","SearchInit","PaginateInit","ProcessErrors","GetBasePath","HostsAdd","HostsReload","SelectionInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return function(a){var b,c,d=a.inventory_id,e=a.group_id,f=g,i=h;f.iterator="subhost",f.name="subhosts",c=i.inject(f,{id:"form-modal-body",mode:"select",breadCrumbs:!1,selectButton:!1}),b=m("inventory")+d+"/hosts/?not__groups__id="+c.group_id,c.formModalActionLabel="Select",c.formModalHeader="Add Existing Hosts",c.formModalCancelShow=!0,p({scope:c,list:f,url:m("groups")+e+"/hosts/"}),c.removeModalClosed&&c.removeModalClosed(),c.removeModalClosed=c.$on("modalClosed",function(){o(a)}),$(".popover").popover("hide"),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),$("#form-modal").modal({backdrop:"static",keyboard:!1}),j({scope:c,set:"subhosts",list:f,url:b}),k({scope:c,list:f,url:b,mode:"lookup"}),c.search(f.iterator),c.$$phase||c.$digest(),c.createHost=function(){$("#form-modal").modal("hide"),n({scope:a.scope,inventory_id:d,group_id:e})}}}]).factory("HostsCreate",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){var b=a.scope,c=b.inventory_id,d=b.selected_group_id,i=k("groups")+d+"/hosts/",p=g,q=h,r=q.inject(p,{mode:"add",modal:!0,related:!1}),s={};r.formModalActionLabel="Save",r.formModalHeader="Create New Host",r.formModalCancelShow=!0,r.parseType="yaml",m(r),r.removeHostsReload&&r.removeHostsReload(),r.removeHostsReload=r.$on("hostsReload",function(){l(a)}),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),q.reset(),s={},r.$$phase||r.$digest(),r.removeHostSaveComplete&&r.removeHostSaveComplete(),r.removeHostSaveComplete=r.$on("HostSaveComplete",function(){n("stop"),$("#form-modal").modal("hide"),l({scope:b,group_id:b.selected_group_id,tree_id:b.selected_tree_id,inventory_id:b.inventory_id}),o()}),r.formModalAction=function(){n("start");try{var a,b,d={};if(r.formModalActionDisabled=!0,b="json"===r.parseType?JSON.parse(r.variables):jsyaml.load(r.variables),"object"!=typeof b)throw"failed to return an object!";for(a in p.fields)"variables"!==a&&(d[a]=r[a]);d.inventory=c,d.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(i),e.post(d).success(function(){r.$emit("HostSaveComplete")}).error(function(a,b){n("stop"),r.formModalActionDisabled=!1,j(r,a,b,p,{hdr:"Error!",msg:"Failed to add new host. POST returned status: "+b})})}catch(g){n("stop"),r.formModalActionDisabled=!1,f("Error","Error parsing host variables. Parser returned: "+g)}},r.formReset=function(){q.reset()},r.cancelModal=function(){o()}}}]).factory("HostsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","Find","SetStatus","ApplyEllipsis","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(a){var b=a.scope,c=a.host_id,d=a.inventory_id,i=h,l=g,s=k("hosts")+c+"/",t=i.inject(l,{mode:"edit",modal:!0,related:!1,show_modal:!1}),u={},v={};i.reset(),t.formModalActionLabel="Save",t.formModalHeader="Host Properties",t.formModalCancelShow=!0,t.parseType="yaml",m(t),t.hostLoadedRemove&&t.hostLoadedRemove(),t.hostLoadedRemove=t.$on("hostLoaded",function(){t.variable_url?(e.setUrl(t.variable_url),e.get().success(function(a){t.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),n("stop"),$("#form-modal").modal("show")}).error(function(a,b){t.variables=null,j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host variables. GET returned status: "+b})})):(t.variables="---",n("stop"),$("#form-modal").modal("show")),u.variables=t.variables}),n("start"),e.setUrl(s),e.get().success(function(a){var b,c,d;for(c in l.fields)a[c]&&(t[c]=a[c],u[c]=t[c]);d=a.related;for(b in l.related)d[b]&&(v[b]={url:d[b],iterator:l.related[b].iterator});t.variable_url=a.related.variable_data,t.$emit("hostLoaded")}).error(function(a,b){j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host: "+c+". GET returned status: "+b})}),t.removeSaveCompleted&&t.removeSaveCompleted(),t.removeSaveCompleted=t.$on("saveCompleted",function(){var a=o({list:b.hosts,key:"id",val:c}),d=a.name;a.name=t.name,a.enabled=t.enabled,a.enabled_flag=t.enabled,p({scope:b,host:a}),d?setTimeout(function(){$('#hosts_table .host-name a[title="'+d+'"').attr("title",a.name),q("#hosts_table .host-name a"),n("stop"),$("#form-modal").modal("hide")},2e3):(n("stop"),$("#form-modal").modal("hide")),r()}),t.formModalAction=function(){n("start");try{var a,b,g={};if(b="json"===t.parseType?JSON.parse(t.variables):jsyaml.load(t.variables),"object"!=typeof b)throw"failed to return an object!";for(a in l.fields)g[a]=t[a];g.inventory=d,g.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(s),e.put(g).success(function(){t.$emit("saveCompleted")}).error(function(a,b){n("stop"),j(t,a,b,l,{hdr:"Error!",msg:"Failed to update host: "+c+". PUT returned status: "+b})})}catch(h){n("stop"),f("Error","Error parsing host variables. Parser returned: "+h)}},t.formReset=function(){i.reset();for(var a in u)t[a]=u[a];t.parseType="yaml"},t.cancelModal=function(){r()}}}]).factory("HostsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","Prompt","ProcessErrors","GetBasePath","HostsReload","Wait","Find",function(a,b,c,d,e,f,g,h,i,j,k,l){return function(a){var b,c,d=a.scope,f=a.host_id,j=a.host_name,m=null===d.selected_group_id?i("inventory")+d.inventory_id+"/hosts/":i("groups")+d.selected_group_id+"/hosts/",n=d.selected_tree_id?l({list:d.groups,key:"id",val:d.selected_tree_id}):null;d.removeHostsReload&&d.removeHostsReload(),d.removeHostsReload=d.$on("hostsReload",function(){d.showHosts(d.selected_tree_id,d.selected_group_id,!1)}),b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){k("start")}),$("#prompt-modal").modal("hide"),e.setUrl(m),e.post({id:f,disassociate:1}).success(function(){d.$emit("hostsReload")}).error(function(a,b){k("stop"),h(d,a,b,null,{hdr:"Error!",msg:"Attempt to delete "+j+" failed. POST returned status: "+b})})},c=n?"<p>Are you sure you want to delete host <em>"+j+"</em> from group <em>"+n.name+"</em>?</p>":"<p>Are you sure you want to delete host <em>"+j+"</em>?</p>",g({hdr:"Delete Host",body:c,action:b,"class":"btn-danger"})}}]).factory("EditHostGroups",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,l=a.host_id,n=a.inventory_id,o=g,p=[];for(c='<div class="row host-groups">\n',c+='<div class="col-lg-6">\n',c+="<label>Available Groups:</label>\n",c+='<select multiple class="form-control" name="available-groups" ng-model="selectedGroups" ng-change="leftChange()" ng-options="avail_group.name for avail_group in available_groups"></select>\n',c+="</div>\n",c+='<div class="col-lg-6">\n',c+="<label>Belongs to Groups:</label>\n",c+='<select multiple class="form-control" name="selected-groups" ng-model="assignedGroups" ng-change="rightChange()" ng-options="host_group.name for host_group in host_groups"></select>\n',c+="</div>\n",c+="</div>\n",c+='<div class="row host-group-buttons">\n',c+='<div class="col-lg-12">\n',c+='<button type="button" ng-click="moveLeft()" class="btn btn-sm btn-primary left-button" ng-disabled="leftButtonDisabled"><i class="icon-arrow-left"></i></button>\n',c+='<button type="button" ng-click="moveRight()" class="btn btn-sm btn-primary right-button" ng-disabled="rightButtonDisabled"><i class="icon-arrow-right"></i></button>\n',c+="<p>(move selected groups)</p>\n",c+="</div>\n",c+="</div>\n",d=j("hosts")+l+"/",f=o.inject(null,{mode:"edit",modal:!0,related:!1,html:c}),b=0;b<f.hosts.length;b++)f.hosts[b].id===l&&(f.host=f.hosts[b]);f.selectedGroups=null,f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionLabel="Save",f.formModalHeader=f.host.name+' - <span class="subtitle">Groups</span>',f.formModalCancelShow=!0,f.formModalActionDisabled=!0,$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),f.hostGroupChangeRemove&&f.hostGroupChangeRemove(),f.hostGroupChangeRemove=f.$on("hostGroupChange",function(){p.pop(),0===p.length&&(h=function(){setTimeout(function(){m("stop")},500)},k({scope:f,inventory_id:n,group_id:f.group_id,action:h}))}),f.formModalAction=function(){var a,b,c;for($("#form-modal").modal("hide"),m("start"),a=0;a<f.original_groups.length;a++){for(c=!1,b=0;b<f.host_groups.length;b++)f.original_groups[a].id===f.host_groups[b].id&&(c=!0);c||(p.push({group_id:f.original_groups[a].id,action:"delete"}),e.setUrl(j("groups")+f.original_groups[a].id+"/hosts/"),e.post({id:l,disassociate:1}).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to remove host from group "+f.original_groups[a].name+" failed. POST returned status: "+c})}))}for(a=0;a<f.host_groups.length;a++){for(c=!1,b=0;b<f.original_groups.length;b++)f.original_groups[b].id===f.host_groups[a].id&&(c=!0);c||(p.push({group_id:f.host_groups[a].id,action:"add"}),e.setUrl(j("groups")+f.host_groups[a].id+"/hosts/"),e.post(f.host).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to add host to group "+f.host_groups[a].name+" failed. POST returned status: "+c})}))}},f.leftChange=function(){null!==f.selectedGroups&&f.selectedGroups.length>0?(f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!1):f.rightButtonDisabled=!0},f.rightChange=function(){null!==f.assignedGroups&&f.assignedGroups.length>0?(f.selectedGroups=null,f.leftButtonDisabled=!1,f.rightButtonDisabled=!0):f.leftButtonDisabled=!0},f.moveLeft=function(){var a,b,c,d;for(a=0;a<f.assignedGroups.length;a++)for(b=0;b<f.host_groups.length;b++)if(f.host_groups[b].id===f.assignedGroups[a].id){f.host_groups.splice(b,1);break}for(a=0;a<f.assignedGroups.length;a++){for(c=!1,b=0;b<f.available_groups.length&&!c;b++)f.available_groups[b].id===f.assignedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.available_groups.length&&!d;b++)0===b&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b].name.toLowerCase()?(d=!0,f.available_groups.unshift(f.assignedGroups[a])):b+1<f.available_groups.length&&f.assignedGroups[a].name.toLowerCase()>f.available_groups[b].name.toLowerCase()&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b+1].name.toLowerCase()&&(d=!0,f.available_groups.splice(b+1,0,f.assignedGroups[a]));d||f.available_groups.push(f.assignedGroups[a])}}f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.moveRight=function(){var a,b,c,d;for(a=0;a<f.selectedGroups.length;a++)for(b=0;b<f.available_groups.length;b++)if(f.available_groups[b].id===f.selectedGroups[a].id){f.available_groups.splice(b,1);break}for(a=0;a<f.selectedGroups.length;a++){for(c=!1,b=0;b<f.host_groups.length&&!c;b++)f.host_groups[b].id===f.selectedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.host_groups.length&&!d;b++)0===b&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b].name.toLowerCase()?(d=!0,f.host_groups.unshift(f.selectedGroups[a])):b+1<f.host_groups.length&&f.selectedGroups[a].name.toLowerCase()>f.host_groups[b].name.toLowerCase()&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b+1].name.toLowerCase()&&(d=!0,f.host_groups.splice(b+1,0,f.selectedGroups[a]));d||f.host_groups.push(f.selectedGroups[a])}}f.selectedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.host_groups=[],f.original_groups=[],f.available_groups=[],e.setUrl(f.host.related.groups+"?order_by=name"),e.get().success(function(a){var b,c,d;for(b=0;b<a.results.length;b++)f.host_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description}),f.original_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description});for(b=0;b<f.inventory_groups.length;b++){for(d=!1,c=0;c<f.host_groups.length;c++)f.inventory_groups[b].id===f.host_groups[c].id&&(d=!0);d||f.available_groups.push(f.inventory_groups[b])}}).error(function(a,b){i(f,a,b,null,{hdr:"Error!",msg:"Failed to get current groups for host: "+l+". GET returned: "+b})}),f.removeHostsReload&&f.removeHostsReload(),f.removeHostsReload=f.$on("hostsReload",function(){k(a)}),f.$$phase||f.$digest()}}]),angular.module("JobSubmissionHelper",["RestServices","Utilities","CredentialFormDefinition","CredentialsListDefinition","LookUpHelper","ProjectFormDefinition","JobSubmissionHelper"]).factory("PromptPasswords",["CredentialForm","JobTemplateForm","$compile","Rest","$location","ProcessErrors","GetBasePath","Alert","Empty","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(a){function b(a){a?e.path("/"+v):"jobs"===v?q.refreshJob():e.path("/jobs")}function k(){var a=g("jobs")+q.job_id+"/";d.setUrl(a),d.destroy().success(function(){"credential"===t.name&&b(!0)}).error(function(b,c){f(q,b,c,null,{hdr:"Error!",msg:"Call to "+a+" failed. DELETE returned status: "+c})})}var l,m,n,o,p,q=a.scope,r=a.passwords,s=a.start_url,t=a.form,u="",v=e.path().replace(/^\//,"").split("/")[0],w=a.extra_html;if(q.cancelJob=function(){$("#password-modal").modal("hide"),"credential"===t.name?k():q.$emit("UpdateSubmitted","canceled")},q.startJob=function(){var a={},c=!1;$("#password-modal").modal("hide"),j("start"),$(".password-field").each(function(){a[$(this).attr("name")]=$(this).val(),""!==$(this).val()&&null!==$(this).val()&&(c=!0)}),i(r)||0===r.length||c?(d.setUrl(s),d.post(a).success(function(){q.$emit("UpdateSubmitted","started"),"credential"===t.name&&b(!1)}).error(function(a,b){j("stop"),f(q,a,b,null,{hdr:"Error!",msg:"POST to "+s+" failed with status: "+b})})):(j("stop"),h("No Passwords","Required password(s) not provided. The request was not submitted.","alert-info"),"credential"===t.name&&q.cancelJob())},r&&r.length>0){for(j("stop"),u+='<form class="form-horizontal" name="password_form" novalidate>\n',u+=w?w:"",o=0;o<r.length;o++)"credential"===t.name?t.fields[r[o]]?p=t:(h("Form Not Found","Could not locate form for: "+r[o],"alert-danger"),e("/#/jobs")):p=t,l=p.fields[r[o]],n=r[o],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="password-field form-control" ',u+="required ",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n",n=l.associated,l=p.fields[l.associated],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="form-control" ',u+="required ",u+=l.awPassMatch?'awpassmatch="'+l.associated+'" ':"",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',l.awPassMatch&&(u+='<span class="error" ng-show="password_form.'+n+'.$error.awpassmatch">Must match Password value</span>\n'),u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n";u+="</form>\n",m=angular.element(document.getElementById("password-body")),m.html(u),c(m.contents())(q),$("#password-modal").modal(),$("#password-modal").on("shown.bs.modal",function(){$("#password-body").find('input[type="password"]:first').focus()})}else q.startJob()}}]).factory("SubmitJob",["PromptPasswords","$compile","Rest","$location","GetBasePath","CredentialList","LookUpInit","CredentialForm","ProcessErrors","JobTemplateForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k){return function(b){function l(b){var e,f,g;m.credentialWatchRemove&&m.credentialWatchRemove(),e=(new Date).toISOString(),f=b.related.jobs?b.related.jobs:b.related.job_template+"jobs/",g=o?o:b.name,k("start"),c.setUrl(f),c.post({name:g+" "+e,description:b.description,job_template:b.id,inventory:b.inventory,project:b.project,playbook:b.playbook,credential:b.credential,forks:b.forks,limit:b.limit,verbosity:b.verbosity,extra_vars:b.extra_vars}).success(function(b){m.job_id=b.id,b.passwords_needed_to_start.length>0?a({scope:m,passwords:b.passwords_needed_to_start,start_url:b.related.start,form:h}):(c.setUrl(b.related.start),c.post().success(function(){k("stop");var a=d.path().replace(/^\//,"").split("/")[0];"jobs"===a?m.refresh():d.path("/jobs")}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to start job. POST returned status: "+b})}))}).error(function(a,b){k("stop"),i(m,a,b,null,{hdr:"Error!",msg:"Failed to create job. POST returned status: "+b})})}var m=b.scope,n=b.id,o=b.template?b.template:null,p=d.path().replace(/^\//,"").split("/")[0],q=e(p)+n+"/";k("start"),c.setUrl(q),c.get().success(function(a){m.credential="",""===a.credential||null===a.credential?(k("stop"),m.credentialWatchRemove&&m.credentialWatchRemove(),m.credentialWatchRemove=m.$watch("credential",function(b,c){b!==c&&""!==m.credential&&null!==m.credential&&void 0!==m.credential&&(a.credential=m.credential,l(a))}),g({scope:m,form:j,current_item:null,list:f,field:"credential",hdr:"Credential Required"}),m.lookUpCredential()):l(a)}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to get job template details. GET returned status: "+b})})}}]).factory("ProjectUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","ProjectsForm","Wait",function(a,b,c,d,e,f,g,h,i){return function(b){var d=b.scope,j=b.project_id,k=e("projects")+j+"/update/";d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(){i("stop"),g("Update Started","The request to start the SCM update process was submitted. To monitor the update status, refresh the page by clicking the <em>Refresh</em> button.","alert-info"),d.refresh()}),d.removeSCMSubmit&&d.removeSCMSubmit(),d.removeSCMSubmit=d.$on("SCMSubmit",function(b,c,e){a({scope:d,passwords:c,start_url:k,form:h,extra_html:e})}),i("start"),c.setUrl(k),c.get().success(function(a){var b,c;if(i("stop"),a.can_update){for(c="",b=0;b<d.projects.length;b++)if(d.projects[b].id===j){c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_url">SCM URL</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_url" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_url+'" ',c+="/>",c+="</div>\n",c+="</div>\n",d.projects[b].scm_username&&(c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_username">SCM Username</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_username" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_username+'" ',c+="/>",c+="</div>\n",c+="</div>\n");break}c+="</p>",d.$emit("SCMSubmit",a.passwords_needed_to_update,c)}else g("Permission Denied","You do not have access to update this project. Please contact your system administrator.","alert-danger")}).error(function(a,b){f(d,a,b,null,{hdr:"Error!",msg:"Failed to get project update details: "+k+" GET status: "+b})})}}]).factory("InventoryUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","GroupForm","BuildTree","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(b){var d=b.scope,e=b.url,i=b.group_id,k=b.tree_id;d.removeHostReloadComplete&&d.removeHostReloadComplete(),d.removeHostReloadComplete=d.$on("HostReloadComplete",function(){j("stop"),g("Update Started",'Your request to start the inventory sync process was submitted. Monitor progress by clicking the <i class="fa fa-refresh fa-lg"></i> button.',"alert-info"),d.removeHostReloadComplete&&d.removeHostReloadComplete()}),d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(a,b){"started"===b&&(d.refreshGroups?(d.selected_tree_id=k,d.selected_group_id=i,d.refreshGroups()):d.refresh&&d.refresh(),d.$emit("HostReloadComplete"))}),d.removeInventorySubmit&&d.removeInventorySubmit(),d.removeInventorySubmit=d.$on("InventorySubmit",function(b,c,f){a({scope:d,passwords:c,start_url:e,form:h,extra_html:f})}),j("start"),c.setUrl(e),c.get().success(function(a){a.can_update?d.$emit("InventorySubmit",a.passwords_needed_to_update):(j("stop"),g("Permission Denied","You do not have access to run the update. Please contact your system administrator.","alert-danger"))}).error(function(a,b){j("stop"),f(d,a,b,null,{hdr:"Error!",msg:"Failed to get inventory_source details. "+e+"GET status: "+b})})}}]),angular.module("JobsHelper",["Utilities","FormGenerator","JobSummaryDefinition","InventoryHelper"]).factory("JobStatusToolTip",[function(){return function(a){var b;switch(a){case"successful":case"success":b="There were no failed tasks.";break;case"failed":b="Some tasks encountered errors.";break;case"canceled":b="Stopped by user request.";break;case"new":b="In queue, waiting on task manager.";break;case"waiting":b="SCM Update or Inventory Update is executing.";break;case"pending":b="Not in queue, waiting on task manager.";break;case"running":b="Playbook tasks executing."}return b}}]).factory("ShowJobSummary",["Rest","Wait","GetBasePath","FormatDate","ProcessErrors","GenerateForm","JobSummary","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h){return function(i){function j(a){var b=a.match(/\n/g),c=b?b.length:1;return c>p?20:c}var k,l,m,n,o,p,q,r,s=i.job_id,t=f,u=g;r='<div id="status-modal-dialog" title="Job '+s+'"><div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(r),k=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),l=$(document).width(),m=$("body").height(),l>1199?(n=675,o=750>m?m-20:750,p=20):1199>=l&&l>=768?(n=550,o=620>m?m-15:620,p=15):(n=l-20,o=500>m?m:500,p=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:n,height:o,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),h()},open:function(){b("stop")}}),b("start"),q=c("jobs")+s+"/",a.setUrl(q),a.get().success(function(a){var b;k.id=a.id,k.name=a.name,k.status=a.status,k.result_stdout=a.result_stdout,k.result_traceback=a.result_traceback,k.stdout_rows=j(k.result_stdout),k.traceback_rows=j(k.result_traceback),b=new Date(a.created),k.created=d(b),$("#status-modal-dialog").dialog("open")}).error(function(a,b){e(k,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})}}]),angular.module("LookUpHelper",["RestServices","Utilities","SearchHelper","PaginationHelpers","ListGenerator","ApiLoader"]).factory("LookUpInit",["Alert","Rest","GenerateList","SearchInit","PaginateInit","GetBasePath","FormatDate","Empty",function(a,b,c,d,e,f,g,h){return function(b){var i,j,k,l,m=b.scope,n=b.form,o=b.list,p=b.field,q=b.postAction;i=b.url?b.url:f("inventories"===o.name?"inventory":o.name),j=o.iterator.charAt(0).toUpperCase()+o.iterator.substring(1),k=b.hdr?b.hdr:"Select "+j,l=/\/$/.test(i)?i+"?":i+"&",l+=n.fields[p].sourceField+"__iexact=:value",$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-url",l),$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-source",p),m["lookUp"+j]=function(){var b=c,f=b.inject(o,{mode:"lookup",hdr:k});$("#lookup-modal").on("hidden.bs.modal",function(){f.searchCleanup&&f.searchCleanup(),(""===m[p]||null===m[p])&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]="",m.$$phase||m.$digest())}),f.selectAction=function(){var c,d=!1;for(c=0;c<f[o.name].length;c++)"1"===f[o.name][c].checked&&(d=!0,m[p]=f[o.name][c].id,m[n.name+"_form"]&&n.fields[p]&&n.fields[p].sourceModel&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]=f[o.name][c][n.fields[p].sourceField],m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField].$setValidity("awlookup",!0)),m[n.name+"_form"]&&m[n.name+"_form"].$setDirty(),b.hide());d===!1?a("Missing Selection","Oops, you failed to make a selection. Click on a row to make your selection, and then click the Select button."):q&&q()},f["toggle_"+o.iterator]=function(a){var b;for(b=0;b<m[o.name].length;b++)f[o.name][b].id===a?(f[o.name][b].checked="1",f[o.name][b].success_class="success"):(f[o.name][b].checked="0",f[o.name][b].success_class="")},d({scope:f,set:o.name,list:o,url:i}),e({scope:f,list:o,url:i,mode:"lookup"}),f.lookupPostRefreshRemove&&f.lookupPostRefreshRemove(),f.lookupPostRefreshRemove=m.$on("PostRefresh",function(){var a,b;for(a in o.fields)if(o.fields[a].type&&"date"===o.fields[a].type)for(b=0;b<m[o.name].length;b++)m[o.name][b][a]=g(new Date(m[o.name][b][a]));if(""!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&null!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField])for(b=0;b<f[o.name].length;b++)if(f[o.name][b][n.fields[p].sourceField]===m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]){m[p]=f[o.name][b].id;break}h(m[p])||f["toggle_"+o.iterator](m[p])}),f.search(o.iterator)}}}]),angular.module("PaginationHelpers",["Utilities","RefreshHelper","RefreshRelatedHelper"]).factory("PageRangeSetup",["Empty",function(a){return function(b){var c,d,e,f=b.scope,g=b.count,h=b.next,i=b.previous,j=b.iterator;for(f[j+"_page"]=1,f[j+"_num_pages"]=Math.ceil(g/f[j+"_page_size"]),f[j+"_num_pages"]=f[j+"_num_pages"]<=0?1:f[j+"_num_pages"],f[j+"_total_rows"]=g,a(h)&&i?f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1:h&&a(i)?f[j+"_page"]=1:h&&i&&(f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1),f[j+"_page_range"]=[],d=f[j+"_page"]>5?f[j+"_page"]-5:1,e=f[j+"_page"]<6?10<=f[j+"_num_pages"]?10:f[j+"_num_pages"]:f[j+"_page"]+4<f[j+"_num_pages"]?f[j+"_page"]+4:f[j+"_num_pages"],c=d;e>=c;c++)f[j+"_page_range"].push(c)}}]).factory("RelatedPaginateInit",["RefreshRelated","$cookieStore","Wait",function(a,b,c){return function(d){var e,f=d.scope,g=d.relatedSets,h=d.pageSize?d.pageSize:10;for(e in g)f[g[e].iterator+"_url"]=g[e].url,f[g[e].iterator+"_page"]=0,f[g[e].iterator+"_page_size"]=h;f.getPage=function(b,d,e){var g=f[e+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=f[e+"SearchParams"]?"&"+f[e+"SearchParams"]+"&page_size="+f[e+"_page_size"]:"page_size="+f[e+"PageSize"],c("start"),a({scope:f,set:d,iterator:e,url:g})},f.pageIsActive=function(a,b){return a===f[b+"_page"]?"active":""},f.changePageSize=function(c,d){f[d+"_page"]=1;var e=f[d+"_url"];b.put(d+"_page_size",f[d+"_page_size"]),e=e.replace(/\/\?.*$/,"/"),e+=f[d+"SearchParams"]?"?"+f[d+"SearchParams"]+"&page_size="+f[d+"_page_size"]:"?page_size="+f[d+"_page_size"],a({scope:f,set:c,iterator:d,url:e})}}}]).factory("PaginateInit",["Refresh","$cookieStore","Wait",function(a,b,c){return function(b){var d=b.scope,e=b.list,f=b.iterator?b.iterator:e.iterator,g=b.mode?b.mode:null;d[f+"_page"]=b.page?b.page:1,d[f+"_url"]=b.url,d[f+"_mode"]=g,d[f+"_page_size"]=b.pageSize?b.pageSize:"lookup"===g?5:20,d.getPage=function(b,e,f){var g=d[f+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=d[f+"SearchParams"]?"&"+d[f+"SearchParams"]+"&page_size="+d[f+"_page_size"]:"page_size="+d[f+"PageSize"],c("start"),a({scope:d,set:e,iterator:f,url:g})},d.pageIsActive=function(a,b){return a===d[b+"_page"]?"active":""},d.changePageSize=function(b,e){d[e+"_page"]=0;var f=d[e+"_url"].replace(/\?page_size\=\d+/,""),g=/\/$/.test(f)?"?":"&";f+=d[e+"SearchParams"]?g+d[e+"SearchParams"]+"&page_size="+d[e+"_page_size"]:g+"page_size="+d[e+"_page_size"],c("start"),a({scope:d,set:b,iterator:e,url:f})}}}]),angular.module("ParseHelper",[]).factory("ParseTypeChange",[function(){return function(a,b,c){var d=b?b:"variables",e=c?c:"parseType";a.blockParseTypeWatch=!1,a.blockVariableDataWatch=!1,a["remove"+d+"Watch"]&&a["remove"+d+"Watch"](),a["remove"+d+"Watch"]=a.$watch(e,function(b,c){var e;if(b!==c)if("json"===b)if(a[d]&&!/^---$/.test(a[d]))try{e=jsyaml.load(a[d]),a[d]=JSON.stringify(e,null," ")}catch(f){}else a[d]="{}";else if(a[d]&&!/^\{\}$/.test(a[d]))try{e=JSON.parse(a[d]),a[d]=jsyaml.safeDump(e)}catch(f){}else a[d]="---"})}}]),angular.module("PermissionsHelper",[]).factory("PermissionCategoryChange",[function(){return function(a){var b=a.scope,c=a.reset;"Inventory"===b.category?(b.projectrequired=!1,b.permissionTypeHelp="<dl>\n<dt>Read</dt>\n<dd>Only allow the user or team to view the inventory.</dd>\n<dt>Write</dt>\n<dd>Allow the user or team to modify hosts and groups contained in the inventory, add new hosts and groups, and perform inventory sync operations.\n<dt>Admin</dt>\n<dd>Allow the user or team full access to the inventory. This includes reading, writing, deletion of the inventory and inventory sync operations.</dd>\n</dl>\n"):(b.projectrequired=!0,b.permissionTypeHelp="<dl>\n<dt>Run</dt>\n<dd>Allow the user or team to perform a live deployment of the project against the inventory. In Run mode modules will be executed, and changes to the inventory will occur.</dd>\n<dt>Check</dt>\n<dd>Only allow the user or team to deploy the project against the inventory as a dry-run operation. In Check mode, module operations will only be simulated. No changes will occur.</dd>\n</dl>\n"),c&&(b.permission_type="Inventory"===b.category?"read":"run")}}]),angular.module("ProjectPathHelper",["RestServices","Utilities"]).factory("GetProjectPath",["Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d){return function(a){function e(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].value);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].value===d[c]&&e.push(a[b]);return e}var f=a.scope,g=a.master;f.showMissingPlaybooksAlert=!1,b.setUrl(c("config")),b.get().success(function(a){var b,c=[];
for(b=0;b<a.project_local_paths.length;b++)c.push({label:a.project_local_paths[b],value:a.project_local_paths[b]});if(f.local_path&&c.push({label:f.local_path,value:f.local_path}),f.project_local_paths=e(c),f.local_path)for(b=0;f.project_local_paths.length;b++)if(f.project_local_paths[b].value===f.local_path){f.local_path=f.project_local_paths[b];break}f.base_dir=a.project_base_dir,g.local_path=f.local_path,g.base_dir=f.base_dir,0===c.length&&(f.showMissingPlaybooksAlert=!0)}).error(function(a,b){d(f,a,b,null,{hdr:"Error!",msg:"Failed to access API config. GET status: "+b})})}}]),angular.module("ProjectsHelper",["RestServices","Utilities","ProjectStatusDefinition","ProjectFormDefinition"]).factory("ProjectStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","ProjectStatusForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,j,n,o=a.project_id,p=a.last_update,q=g,r=l;m("start"),b='<div id="status-modal-dialog"><div id="form-container" style="width: 100%;"></div></div>\n',$("#projects-modal-container").empty().append(b),c=q.inject(r,{mode:"edit",id:"form-container",related:!1,breadCrumbs:!1}),q.reset(),d=$(document).width(),f=$("body").height(),d>1199?(h=675,j=750>f?f-20:750,n=20):1199>=d&&d>=768?(h=550,j=620>f?f-15:620,n=15):(h=d-20,j=500>f?f:500,n=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:h,height:j,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#projects-modal-container").empty()},open:function(){m("stop")}}),e.setUrl(p),e.get().success(function(a){var b,d=a;for(b in r.fields)d[b]?c[b]="created"===b?k(new Date(d[b])):d[b]:d.summary_fields.project[b]&&(c[b]=d.summary_fields.project[b]);$("#status-modal-dialog").dialog({title:d.summary_fields.project.name+" Status"}).dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(c,a,b,r,{hdr:"Error!",msg:"Failed to retrieve status of project: "+o+". GET status: "+b})})}}]),angular.module("SelectionHelper",["Utilities","RestServices"]).factory("SelectionInit",["Rest","Alert","ProcessErrors","ReturnToCaller","Wait",function(a,b,c,d,e){return function(b){var f,g=b.scope,h=b.list,i=b.url,j=b.returnToCaller;f=void 0!==b.selected?b.selected:[],g.formModalActionDisabled=!0,g.disableSelectBtn=!0,g["toggle_"+h.iterator]=function(a,b){var c,d,e;for(c=0;c<g[h.name].length;c++)if(g[h.name][c].id===a)if("0"===g[h.name][c].checked&&!b||1===g[h.name][c].checked&&b){for(g[h.name][c].checked="1",g[h.name][c].success_class="success",e=!1,d=0;d<f.length;d++)if(f[d].id===a){e=!0;break}e||f.push(g[h.name][c])}else for(g[h.name][c].checked="0",g[h.name][c].success_class="",d=0;d<f.length;d++)if(f[d].id===a){f.splice(d,1);break}f.length>0?(g.formModalActionDisabled=!1,g.disableSelectBtn=!1):(g.formModalActionDisabled=!0,g.disableSelectBtn=!0)},g.finishSelection=function(){function b(){f=[],void 0!==j?d(j):($("#form-modal").modal("hide"),g.$emit("modalClosed"))}function k(b){a.post(b).success(function(a,b){m.push({result:"success",data:a,status:b}),g.$emit("callFinished")}).error(function(a,b,c){m.push({result:"error",data:a,status:b,headers:c}),g.$emit("callFinished")})}a.setUrl(i);var l,m=[];if(g.formModalActionDisabled=!0,g.disableSelectBtn=!0,e("start"),g.callFinishedRemove&&g.callFinishedRemove(),g.callFinishedRemove=g.$on("callFinished",function(){var a,d=0;if(m.length===f.length){for(e("stop"),a=0;a<m.length;a++)"error"===m[a].result&&(c(g,m[a].data,m[a].status,null,{hdr:"POST Failure",msg:"Failed to add "+h.iterator+". POST returned status: "+m[a].status}),d++);0===d&&b()}}),f.length>0)for(l=0;l<f.length;l++)k(f[l]);else b()},g.formModalAction=g.finishSelection,g.SelectPostRefreshRemove&&g.SelectPostRefreshRemove(),g.SelectPostRefreshRemove=g.$on("PostRefresh",function(){var a,b,c;if(g[h.name])for(a=0;a<g[h.name].length;a++){for(c=!1,b=0;b<f.length;b++)if(f[b].id===g[h.name][a].id){c=!0;break}c?(g[h.name][a].checked="1",g[h.name][a].success_class="success"):(g[h.name][a].checked="0",g[h.name][a].success_class="")}})}}]),angular.module("UserHelper",["UserFormDefinition"]).factory("ResetForm",["UserForm",function(a){return function(){a.fields.first_name.readonly=!1,a.fields.first_name.editRequired=!0,a.fields.last_name.readonly=!1,a.fields.last_name.editRequired=!0,a.fields.email.readonly=!1,a.fields.email.editRequired=!0,a.fields.organization.awRequiredWhen={variable:"orgrequired",init:!0},a.fields.organization.readonly=!1,a.fields.username.awRequiredWhen={variable:"not_ldap_user",init:!0},a.fields.username.readonly=!1,a.fields.password.editRequired=!1,a.fields.password.addRrequired=!0}}]),angular.module("APIDefaults",["RestServices","Utilities"]).factory("GetAPIDefaults",["Alert","Rest","$rootScope",function(a,b,c){return function(a){function d(a){var b,d={};for(b in c.apiDefaults)if(b===a||b.iterator===a){d[b]=c.apiDefaults[b];break}return d}function e(){if($.isEmptyObject(g)&&5>h)h++,setTimeout(1e3,e());else if("success"===g.status)return d(a)}var f,g={},h=0;return null===c.apiDefaults||void 0===c.apiDefaults?(f="/api/v1/",b.setUrl(f),b.get().success(function(a){var b,d=a;for(b in d)switch(b){case"organizations":d[b].iterator="organization";break;case"jobs":d[b].iterator="job";break;case"users":d[b].iterator="user";break;case"teams":d[b].iterator="team";break;case"hosts":d[b].iterator="host";break;case"groups":d[b].iterator="group";break;case"projects":d[b].iterator="project";break;case"inventories":d[b].iterator="inventory"}c.apiDefaults=d,g={status:"success"}}).error(function(a,b){g={status:"error",msg:"Call to "+f+" failed. GET returned status: "+b}}),e()):d(a)}}]),angular.module("InventoryHelper",["RestServices","Utilities","OrganizationListDefinition","ListGenerator","AuthService","InventoryHelper","InventoryFormDefinition","ParseHelper","SearchHelper"]).factory("WatchInventoryWindowResize",["ApplyEllipsis",function(a){return function(){var b;$(window).resize(function(){clearTimeout(b),b=setTimeout(function(){$("#groups_table .name-column").each(function(){var a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%";$(this).find(".group-name").css({width:e})}),a("#groups_table .group-name a"),a("#hosts_table .host-name a")},100)})}}]).factory("SaveInventory",["InventoryForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i){return function(e){var f,h,j,k=e.scope,l=a,m=g("inventory");i("start");try{if(h="json"===k.inventoryParseType?JSON.parse(k.inventory_variables):jsyaml.load(k.inventory_variables),"object"!=typeof h)throw"failed to return an object!";j={};for(f in l.fields)"inventory_variables"!==f&&(l.fields[f].realName?j[l.fields[f].realName]=k[f]:j[f]=k[f]);b.setUrl(m+k.inventory_id+"/"),b.put(j).success(function(a){k.inventory_variables?(b.setUrl(a.related.variable_data),b.put(h).success(function(){i("stop"),k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory varaibles. PUT returned status: "+b})})):k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory. POST returned status: "+b})})}catch(n){i("stop"),c("Error","Error parsing inventory variables. Parser returned: "+n)}}}]).factory("EditInventoryProperties",["InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","SaveInventory","Wait","Store","SearchInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(n){var o,p=n.scope,q=n.inventory_id,r=b,s=a,t={},u=l("CurrentSearchParams");s.well=!1,o=r.inject(s,{mode:"edit",modal:!0,related:!1,modal_show:!1}),s.well=!0,i(o,"inventory_variables","inventoryParseType"),o.inventoryParseType="yaml",o.formModalActionLabel="Save",o.formModalCancelShow=!0,o.formModalInfo=!1,o.formModalHeader="Inventory Properties",k("start"),c.setUrl(h("inventory")+q+"/"),c.get().success(function(a){var b,c;for(b in s.fields){if("inventory_variables"===b){if($.isEmptyObject(a.variables)||"{}"===a.variables||"null"===a.variables||""===a.variables)o.inventory_variables="---";else try{c=JSON.parse(a.variables),o.inventory_variables=jsyaml.safeDump(c)}catch(e){d("Variable Parse Error","Attempted to parse variables for inventory: "+q+". Parse returned: "+e),console&&(console.log(e),console.log("data:"),console.log(a.variables)),o.inventory_variables="---"}t.inventory_variables=o.variables}else"inventory_name"===b?(o[b]=a.name,t[b]=o[b]):"inventory_description"===b?(o[b]=a.description,t[b]=o[b]):a[b]&&(o[b]=a[b],t[b]=o[b]);s.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[s.fields[b].sourceModel]&&(o[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField],t[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField])}f({scope:o,form:s,current_item:o.organization,list:g,field:"organization"}),k("stop"),$("#form-modal").modal("show")}).error(function(a,b){e(o,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+q+". GET returned: "+b})}),o.removeInventorySaved&&o.removeInventorySaved(),o.removeInventorySaved=o.$on("InventorySaved",function(){$("#form-modal").modal("hide"),o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1}),p.$emit("RefreshInventories")}),o.cancelModal=function(){o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1})},o.formModalAction=function(){p.inventory_id=q,p.inventory_name=o.inventory_name,j({scope:o})}}}]),angular.module("md5Helper",["RestServices","Utilities"]).factory("md5Setup",[function(){return function(a){var b=a.scope,c=a.master,d=a.check_field,e=a.default_val;b[d]=e,c[d]=e,b.genMD5=function(a){var c=new Date;b[a]=$.md5("AnsibleWorks"+c.getTime())},b.toggleCallback=function(a){"false"===b.allow_callbacks&&(b[a]="")},b.selectAll=function(a){$('input[name="'+a+'"]').focus().select()}}}]),angular.module("RefreshRelatedHelper",["RestServices","Utilities","PaginationHelpers"]).factory("RefreshRelated",["ProcessErrors","Rest","Wait","PageRangeSetup",function(a,b,c,d){return function(e){var f=e.scope,g=e.set,h=e.iterator,i=e.url;b.setUrl(i),b.get().success(function(a){d({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[g]=a.results,f[h+"Loading"]=!1,f[h+"HoldInput"]=!1,c("stop"),f.$emit("related"+g)}).error(function(b,c){a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RefreshHelper",["RestServices","Utilities","PaginationHelpers"]).factory("Refresh",["ProcessErrors","Rest","Wait","Empty","PageRangeSetup",function(a,b,c,d,e){return function(d){var f=d.scope,g=d.set,h=d.iterator,i=d.url;f.current_url=i,b.setUrl(i),b.get().success(function(a){var b,d;for(e({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[h+"Loading"]=!1,b=1;3>=b;b++)d=1===b?"":b,f[h+"HoldInput"+d]=!1;f[g]=a.results,window.scrollTo(0,0),c("stop"),f.$emit("PostRefresh")}).error(function(b,c){f[h+"HoldInput"]=!1,a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RelatedSearchHelper",["RestServices","Utilities","RefreshRelatedHelper"]).factory("RelatedSearchInit",["$timeout","Alert","Rest","RefreshRelated","Wait",function(a,b,c,d,e){return function(a){function b(a){var b,c,d,e;for(e in h.related)if("tree"!==h.related[e].type&&(void 0===a||a===h.related[e].iterator)){b=h.related[e].iterator;for(d in h.related[e].fields)if(h.related[e].fields[d].key){f[b+"SearchField"]=d,f[b+"SearchFieldLabel"]=h.related[e].fields[d].label;break}f[b+"SortOrder"]=null,f[b+"SearchType"]="icontains",f[b+"SearchTypeLabel"]="Contains",f[b+"SearchValue"]=null,f[b+"SelectShow"]=!1,f[b+"ShowStartBtn"]=!0,f[b+"HideAllStartBtn"]=!1,c=f[b+"SearchField"],!h.related[e].fields[c].searchType||"boolean"!==h.related[e].fields[c].searchType&&"select"!==h.related[e].fields[c].searchType||(f[b+"SelectShow"]=!0,f[b+"SearchSelectOpts"]=h.fields[c].searchOptions),h.related[e].fields[c].searchType&&"gtzero"===h.related[e].fields[c].searchType&&(f[b+"InputHide"]=!0)}}var c,f=a.scope,g=a.relatedSets,h=a.form;b(),f.resetSearch=function(a){b(a),f.search(a)},f.setSearchField=function(a,b,c){var d,e;for(e in h.related)h.related[e].iterator===a&&(d=h.related[e].fields[b]);f[a+"SearchFieldLabel"]=c,f[a+"SearchField"]=b,f[a+"SearchValue"]="",f[a+"SelectShow"]=!1,f[a+"InputHide"]=!1,f[a+"ShowStartBtn"]=!0,void 0!==d.searchType&&"gtzero"===d.searchType&&(f[a+"InputHide"]=!0,f[a+"ShowStartBtn"]=!1),void 0===d.searchType||"boolean"!==d.searchType&&"select"!==d.searchType||(f[a+"SelectShow"]=!0,f[a+"SearchSelectOpts"]=d.searchOptions),void 0!==d.searchType&&"int"===d.searchType&&(f[a+"SearchType"]="int"),f.search(a)},f.setSearchType=function(a,b,c){f[a+"SearchTypeLabel"]=c,f[a+"SearchType"]=b,f.search(a)},f.startSearch=function(a,b){13===a.keyCode&&f.search(b)},f.search=function(a){e("start"),f[a+"Loading"]=!0,f[a+"HoldInput"]=!0,f[a+"SearchValue"]&&(f[a+"ShowStartBtn"]=!1),"host"===a&&"has_active_failures"===f.hostSearchField&&(f.hostFailureFilter=f.hostSearchSelectValue&&1===f.hostSearchSelectValue.value?!0:!1);var b,i,j,k,l;for(i in g)if(g[i].iterator===a){j=i,k=g[i].url;for(b in h.related[i].fields)h.related[i].fields[b].key&&(l=h.related[i].fields[b].desc?"-"+b:b);break}l=null===f[a+"SortOrder"]?l:f[a+"SortOrder"],c=h.related[j].fields[f[a+"SearchField"]],f[a+"SelectShow"]===!1&&""!==f[a+"SearchValue"]&&void 0!==f[a+"SearchValue"]||f[a+"SelectShow"]&&f[a+"SearchSelectValue"]||c.searchType&&"gtzero"===c.searchType?(f[a+"SearchParams"]=c.sourceModel?c.sourceModel+"__"+c.sourceField+"__":c.searchField?c.searchField+"__":f[a+"SearchField"]+"__",f[a+"SearchParams"]+=!c.searchType||"int"!==c.searchType&&"boolean"!==c.searchType?c.searchType&&"gtzero"===c.searchType?"gt=0":f[a+"SearchType"]+"=":"int=",!c.searchType||"boolean"!==c.searchType&&"select"!==c.searchType?(void 0===c.searchType||"gtzero"===c.searchType)&&(f[a+"SearchParams"]+=encodeURI(f[a+"SearchValue"])):f[a+"SearchParams"]+=f[a+"SearchSelectValue"].value,f[a+"SearchParams"]+=l?"&order_by="+encodeURI(l):""):f[a+"SearchParams"]=l?"order_by="+encodeURI(l):"",f[a+"Page"]=0,k+=k.match(/\/$/)?"?":"&",k+=f[a+"SearchParams"],k+=f[a+"PageSize"]?"&page_size="+f[a+"PageSize"]:"",d({scope:f,set:j,iterator:a,url:k})},f.sort=function(a,b){var c,d,e,g;$("."+a+" .list-header").each(function(){if($(this).attr("id")!==a+"-"+b+"-header"){var c=$(this).find("i");c.attr("class","icon-sort")}}),d=$("#"+a+"-"+b+"-header i"),e="",d.hasClass("icon-sort")?(d.removeClass("icon-sort"),d.addClass("icon-sort-up")):d.hasClass("icon-sort-up")?(d.removeClass("icon-sort-up"),d.addClass("icon-sort-down"),e="-"):d.hasClass("icon-sort-down")&&(d.removeClass("icon-sort-down"),d.addClass("icon-sort-up"));for(g in h.related)h.related[g].iterator===a&&(c=h.related[g].fields[b].sourceModel?e+h.related[g].fields[b].sourceModel+"__"+h.related[g].fields[b].sourceField:e+b);f[a+"SortOrder"]=c,f.search(a)}}}]),angular.module("SearchHelper",["RestServices","Utilities","RefreshHelper"]).factory("SearchInit",["Alert","Rest","Refresh","$location","GetBasePath","Empty","$timeout","Wait","Store",function(a,b,c,d,e,f,g,h,i){return function(a){function b(a){var b,c,d,e;e=void 0===a||1===a?"":a,l[p+"SearchField"+e]="",l[p+"SearchFieldLabel"+e]="";for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&o.fields[c].key){o.fields[c].sourceModel?(d=o.fields[c].sourceModel+"__"+o.fields[c].sourceField,r=o.fields[c].desc?"-"+d:d):r=o.fields[c].desc?"-"+c:c,(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)&&(l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label);break}if(f(l[p+"SearchField"+e]))for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)){l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label;break}l[p+"SearchType"+e]="icontains",l[p+"SearchTypeLabel"+e]="Contains",l[p+"SearchParams"+e]="",l[p+"SearchValue"+e]="",l[p+"SelectShow"+e]=!1,l[p+"HideSearchType"+e]=!1,l[p+"InputDisable"+e]=!1,l[p+"ExtraParms"+e]="",l[p+"ShowStartBtn"+e]=!0,l[p+"HideAllStartBtn"+e]=!1,l[p+"SearchPlaceholder"+e]=o.fields[l[p+"SearchField"+e]]&&o.fields[l[p+"SearchField"+e]].searchPlaceholder?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]:o.fields[l[p+"SearchField"+e]].searchPlaceholder:"Search",l[p+"InputDisable"+e]=o.fields[l[p+"SearchField"+e]]&&"all"===o.fields[l[p+"SearchField"+e]].searchObject?!0:!1,b=l[p+"SearchField"+e],o.fields[b]&&(!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType||(l[p+"SelectShow"+e]=!0,l[p+"SearchSelectOpts"+e]=o.fields[b].searchOptions),o.fields[b].searchType&&"int"===o.fields[b].searchType&&(l[p+"HideSearchType"+e]=!0),o.fields[b].searchType&&"gtzero"===o.fields[b].searchType&&(l[p+"InputHide"+e]=!0))}var e,g,j,k,l=a.scope,m=a.set,n=a.url,o=a.list,p=a.iterator?a.iterator:o.iterator,q=a.setWidgets===!1?!1:!0,r=a.sort_order||"";if(q)for(e=o.searchWidgets?o.searchWidgets:1,g=1;e>=g;g++)j=1===g?"":g,$("#search-widget-container"+j)&&b(g);k={set:m,defaultUrl:n,list:o,iterator:p,sort_order:r},i("CurrentSearchParams",k),l.setSearchField=function(a,b,c,d){var e=void 0===d||1===d?"":d;l[a+"SearchFieldLabel"+e]=c,l[a+"SearchField"+e]=b,l[a+"SearchValue"+e]="",l[a+"SelectShow"+e]=!1,l[a+"HideSearchType"+e]=!1,l[a+"InputHide"+e]=!1,l[a+"SearchType"+e]="icontains",l[a+"InputDisable"+e]="all"===o.fields[b].searchObject?!0:!1,l[a+"ShowStartBtn"+e]=!0,l[a+"SearchPlaceholder"+e]=o.fields[l[a+"SearchField"+e]]&&o.fields[l[a+"SearchField"+e]].searchPlaceholder?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]:o.fields[l[a+"SearchField"+e]].searchPlaceholder:"Search",o.fields[b].searchType&&"gtzero"===o.fields[b].searchType?(l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1,l.search(a)):o.fields[b].searchSingleValue?(l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"SearchSelectValue"+e]="boolean"===o.fields[b].searchType&&"true"===o.fields[b].searchValue?{value:1}:"boolean"===o.fields[b].searchType&&"false"===o.fields[b].searchValue?{value:0}:{value:o.fields[b].searchValue},l[a+"ShowStartBtn"+e]=!1):"in"===o.fields[b].searchType?(l[a+"SearchType"+e]="in",l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1):!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType&&"select_or"!==o.fields[b].searchType?o.fields[b].searchType&&"int"===o.fields[b].searchType?l[a+"SearchType"+e]="int":o.fields[b].searchType&&"isnull"===o.fields[b].searchType&&(l[a+"SearchType"+e]="isnull",l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]="true",l[a+"ShowStartBtn"+e]=!1):(l[a+"SelectShow"+e]=!0,l[a+"SearchSelectOpts"+e]=o.fields[b].searchOptions),l.search(a)},l.resetSearch=function(a){var c,e=o.searchWidgets?o.searchWidgets:1;for(c=1;e>=c;c++)b(c);window.location="/#"+d.path(),l.search(a)},l.removeDoSearch&&l.removeDoSearch(),l.removeDoSearch=l.$on("doSearch",function(a,b,d,e){l[b+"Loading"]=void 0===e||e===!0?!0:!1;var f,g=n;l[b+"Page"]=d?parseInt(d)-1:0,l[b+"SearchParams"]&&(g+=/\/$/.test(g)?"?"+l[b+"SearchParams"]:"&"+l[b+"SearchParams"]),f=/\/$/.test(g)?"?":"&",g+=l[b+"_page_size"]?f+"page_size="+l[b+"_page_size"]:"",d&&(f=/\/$/.test(g)?"?":"&",g+=f+"page="+d),l[b+"ExtraParms"]&&(f=/\/$/.test(g)?"?":"&",g+=f+l[b+"ExtraParms"]),g=g.replace(/\&\&/,"&"),c({scope:l,set:m,iterator:b,url:g})}),l.removePrepareSearch&&l.removePrepareSearch(),l.removePrepareSearch=l.$on("prepareSearch",function(a,b,c,d,e){h("start"),l[b+"SearchParams"]="";var f,g,i=o.searchWidgets?o.searchWidgets:1;for(f=1;i>=f;f++)g=1===f?"":f,$("#search-widget-container"+g)&&o.fields[l[b+"SearchField"+g]]&&o.fields[l[b+"SearchField"+g]].searchObject&&("all"!==o.fields[l[b+"SearchField"+g]].searchObject?(l[b+"HideAllStartBtn"+g]=!1,l[b+"SearchValue"+g]?(l[b+"ShowStartBtn"+g]=!1,l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+g]].searchOnID?"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__id="+l[b+"SearchValue"+g]:"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__name__icontains="+l[b+"SearchValue"+g]):(l[b+"ShowStartBtn"+g]=!0,l[b+"SearchParams"]+="&"+o.fields[l[b+"SearchField"+g]].searchField+"="+o.fields[l[b+"SearchField"+g]].searchObject)):l[b+"HideAllStartBtn"+g]=!0);l.$emit("prepareSearch2",b,c,d,e)}),l.removePrepareSearch2&&l.removePrepareSearch2(),l.removePrepareSearch2=l.$on("prepareSearch2",function(a,b,c,d,e){var g,h,i=o.searchWidgets?o.searchWidgets:1;for(g=1;i>=g;g++)h=1===g?"":g,l[b+"HoldInput"+h]=!0,$("#search-widget-container"+h)&&o.fields[l[b+"SearchField"+h]]&&!o.fields[l[b+"SearchField"+h]].searchObject&&(l[b+"ShowStartBtn"+h]=l[b+"SearchValue"+h]?!1:!0,(!l[b+"SelectShow"+h]&&!f(l[b+"SearchValue"+h])||l[b+"SelectShow"+h]&&l[b+"SearchSelectValue"+h]||o.fields[l[b+"SearchField"+h]]&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+h]].searchField?"&"+o.fields[l[b+"SearchField"+h]].searchField+"__":o.fields[l[b+"SearchField"+h]].sourceModel?"&"+o.fields[l[b+"SearchField"+h]].sourceModel+"__"+o.fields[l[b+"SearchField"+h]].sourceField+"__":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?"&"+l[b+"SearchField"+h]+"__":"&"+l[b+"SearchField"+h]+"__",l[b+"SearchParams"]+=!o.fields[l[b+"SearchField"+h]].searchType||"int"!==o.fields[l[b+"SearchField"+h]].searchType&&"boolean"!==o.fields[l[b+"SearchField"+h]].searchType?o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType?"gt=0":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?l[b+"SearchType"+h]+"=":"iexact=":"int=",!o.fields[l[b+"SearchField"+h]].searchType||"boolean"!==o.fields[l[b+"SearchField"+h]].searchType&&"select"!==o.fields[l[b+"SearchField"+h]].searchType?(!o.fields[l[b+"SearchField"+h]].searchType||o.fields[l[b+"SearchField"+h]].searchType&&"or"!==o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"!==o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=encodeURI(l[b+"SearchValue"+h])):l[b+"SearchParams"]+=l[b+"SearchSelectValue"+h].value));("inventory"===b&&l.inventoryFailureFilter||"host"===b&&l.hostFailureFilter)&&(l[b+"SearchParams"]+="&has_active_failures=true"),r&&(l[b+"SearchParams"]+=l[b+"SearchParams"]?"&":"",l[b+"SearchParams"]+="order_by="+encodeURI(r)),l.$emit("doSearch",b,c,d,e)}),l.startSearch=function(a,b){13===a.keyCode&&l.search(b)},l.search=function(a,b,c){c=void 0===c?!0:!1,c&&(l[m]=[]),l.$emit("prepareSearch",a,b,c)},l.sort=function(a){$(".list-header").each(function(){if($(this).attr("id")!==a+"-header"){var b=$(this).find("i");b.attr("class","fa fa-sort")}});var b=$("#"+a+"-header i"),c="";b.hasClass("fa-sort")?(b.removeClass("fa-sort"),b.addClass("fa-sort-up")):b.hasClass("fa-sort-up")?(b.removeClass("fa-sort-up"),b.addClass("fa-sort-down"),c="-"):b.hasClass("fa-sort-down")&&(b.removeClass("fa-sort-down"),b.addClass("fa-sort-up")),r=o.fields[a].searchField?c+o.fields[a].searchField:o.fields[a].sortField?c+o.fields[a].sortField:o.fields[a].sourceModel?c+o.fields[a].sourceModel+"__"+o.fields[a].sourceField:c+a,l.search(o.iterator)},l.searchCleanup=function(){l.removeDoSearch(),l.removePrepareSearch(),l.removePrepareSearch2()}}}]),angular.module("TeamHelper",["RestServices","Utilities","OrganizationListDefinition","SearchHelper","PaginationHelpers","ListGenerator"]).factory("SetTeamListeners",["Alert","Rest",function(a,b){return function(a){var c=a.scope,d=a.set,e=a.iterator;c.$on("TeamResultFound",function(a,b,f){var g,h,i,j;if(f.length===b.length){for(i="organization",j="organization_name",g=0;g<b.length;g++)for(h=0;h<f.length;h++)b[g][i]===f[h].id&&(b[g][j]=f[h].value);c[e+"SearchSpin"]=!1,c[d]=b}}),c.$on("TeamRefreshFinished",function(a,d){function e(a){b.setUrl(a),b.get().success(function(a){h.push({id:a.id,value:a.name}),c.$emit("TeamResultFound",d,h)}).error(function(){h.push({id:"error"}),c.$emit("TeamResultFound",d,h)})}var f,g,h=[];for(f=0;f<d.length;f++)g="/api/v1/organizations/"+d[f].organization+"/",e(g)})}}]).factory("TeamLookUpOrganizationInit",["Alert","Rest","OrganizationList","GenerateList","SearchInit","PaginateInit",function(a,b,c,d,e,f){return function(b){var g=b.scope;g.lookUpOrganization=function(){var b=c,h=d,i=h.inject(b,{mode:"lookup",hdr:"Select Organization"}),j="/api/v1/organizations/";i.selectAction=function(){var c,d=!1;for(c=0;c<i[b.name].length;c++)"success"===i[b.iterator+"_"+i[b.name][c].id+"_class"]&&(d=!0,g.organization=i[b.name][c].id,g.organization_name=i[b.name][c].name,g.team_form.$setDirty(),h.hide());d===!1&&a("No Selection","Click on a row to select an Organization before clicking the Select button.")},i.toggle_organization=function(a){if(i[b.name])for(var c=0;c<i[b.name].length;c++)i[b.iterator+"_"+i[b.name][c].id+"_class"]="";null!==a&&void 0!==a&&(i[b.iterator+"_"+a+"_class"]="success")},e({scope:i,set:b.name,list:b,url:j}),f({scope:i,list:b,url:j,mode:"lookup"}),g.search(b.iterator),i.toggle_organization(g.organization)}}}]),angular.module("AdminListDefinition",[]).value("AdminList",{name:"admins",iterator:"admin",selectTitle:"Add Administrators",editTitle:"Admins",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p>",base:"users",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{},fieldActions:{}}),angular.module("CloudCredentialsListDefinition",[]).value("CloudCredentialList",{name:"cloudcredentials",iterator:"cloudcredential",selectTitle:"Add Cloud Credentials",editTitle:"Cloud Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},team:{label:"Team",ngBind:"credential.team_name",sourceModel:"team",sourceField:"name",excludeModal:!0},user:{label:"User",ngBind:"credential.user_username",sourceModel:"user",sourceField:"username",excludeModal:!0}},actions:{add:{mode:"all",ngClick:"addCredential()","class":"btn-sm",awToolTip:"Create a new credential"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash-o",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("CredentialsListDefinition",[]).value("CredentialList",{name:"credentials",iterator:"credential",selectTitle:"Add Credentials",editTitle:"Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},kind:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0}},actions:{add:{mode:"all",ngClick:"addCredential()",awToolTip:"Create a new credential"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("GroupListDefinition",[]).value("GroupList",{name:"groups",iterator:"group",selectTitle:"Copy Groups",editTitle:"Groups",index:!0,well:!1,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{help:{awPopOver:"Choose groups by clicking on each group you wish to add. Click the <em>Select</em> button to add the groups to the selected inventory group.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Adding Groups"}},fieldActions:{edit:{label:"Edit",ngClick:"editGroup(group.id)",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit group",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteGroup(group.id, group.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete group",dataPlacement:"top"}}}),angular.module("HomeGroupListDefinition",[]).value("HomeGroupList",{name:"home_groups",iterator:"group",editTitle:"Groups",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Group",ngClick:"editGroup(group.id, group.inventory)",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-6 ellipsis"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ /#/inventories/' + group.inventory + '/' }}"},source:{label:"Source",searchType:"select",searchOptions:[{name:"ec2",value:"ec2"},{name:"none",value:""},{name:"rax",value:"rax"}],sourceModel:"inventory_source",sourceField:"source",searchOnly:!0},has_external_source:{label:"Has external source?",searchType:"in",searchValue:"ec2,rax",searchOnly:!0,sourceModel:"inventory_source",sourceField:"source"},has_active_failures:{label:"Has failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},last_update_failed:{label:"Update failed?",searchType:"select",searchSingleValue:!0,searchValue:"failed",searchOnly:!0,sourceModel:"inventory_source",sourceField:"status"},id:{label:"ID",searchOnly:!0}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",awToolTip:"{{ group.status_tooltip }}",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",dataPlacement:"top",ngHref:"/#/inventories/{{ group.inventory }}/",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",ngShow:"(group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate(group.id)",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"(group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{label:"Edit",mode:"all",ngClick:"editGroup(group.id)",awToolTip:"Edit group",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HomeHostListDefinition",[]).value("HomeHostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Name",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-7 ellipsis",ngClick:"editHost(host.id, host.name)"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ '/#/inventories/' + host.inventory }}"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Has failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_inventory_sources:{label:"Has external source?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},id:{label:"ID",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{label:"Edit",ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"}},actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HostListDefinition",[]).value("HostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,well:!1,fields:{name:{key:!0,label:"Host Name",linkTo:"/inventories/{{ inventory_id }}/hosts/{{ host.id }}"},description:{label:"Description"}},actions:{help:{awPopOver:"Select hosts by clicking on each host you wish to add. Add the selected hosts to the group by clicking the <em>Select</em> button.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Selecting Hosts"}},fieldActions:{edit:{label:"Edit",ngClick:"editHost({{ host.id }})",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit host",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete host",dataPlacement:"top"}}}),angular.module("InventoriesListDefinition",[]).value("InventoryList",{name:"inventories",iterator:"inventory",selectTitle:"Add Inventories",editTitle:"Inventories",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},organization:{label:"Organization",ngBind:"inventory.summary_fields.organization.name",linkTo:"/#/organizations/{{ inventory.organization }}",sourceModel:"organization",sourceField:"name",excludeModal:!0},has_inventory_sources:{label:"Cloud sourced?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_active_failures:{label:"Failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},inventory_sources_with_failures:{label:"Sync failures?",searchType:"gtzero",searchValue:"true",searchOnly:!0}},actions:{add:{mode:"all",ngClick:"addInventory()",awToolTip:"Create a new inventory"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{status:{ngHref:"inventory.status_link",iconClass:"{{ 'fa fa-cloud icon-cloud-' + inventory.status_class }}",awToolTip:"{{ inventory.status_tip }}",dataPlacement:"top"},failed_hosts:{ngHref:"inventory.failed_hosts_link",iconClass:"{{ 'fa icon-failures-' + inventory.failed_hosts_class }}",awToolTip:"{{ inventory.failed_hosts_tip }}",dataPlacement:"top"},edit:{label:"Edit",ngClick:"editInventoryProperties(inventory.id)",awToolTip:"Edit inventory",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteInventory(inventory.id, inventory.names')",awToolTip:"Delete inventory",dataPlacement:"top"}}}),angular.module("InventoryGroupsDefinition",[]).value("InventoryGroups",{name:"groups",iterator:"group",editTitle:"{{ inventory_name }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,filterBy:"{ show: true }","class":"table-condensed table-no-border",fields:{name:{label:"Groups",key:!0,ngClick:"showHosts(group.id,group.group_id, false)",ngClass:"group.selected_class",hasChildren:!0,columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",nosort:!0,awDroppable:"{{ group.isDroppable }}",awDraggable:"{{ group.isDraggable }}",dataContainment:"#groups_table",dataTreeId:"{{ group.id }}",dataGroupId:"{{ group.group_id }}",dataType:"group"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createGroup()",awToolTip:"Create a new group"},properties:{mode:"all",awToolTip:"Edit inventory properties",ngClick:"editInventoryProperties()"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refreshGroups()"},stream:{ngClick:"showGroupActivity()",awToolTip:"View Activity Stream",mode:"all"},help:{mode:"all",awToolTip:"Get help building your inventory",ngClick:"showGroupHelp()",id:"inventory-summary-help"}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",ngShow:"group.id > 1",awToolTip:"{{ group.status_tooltip }}",dataTipWatch:"group.launch_tooltip",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",ngShow:"group.id > 1",dataPlacement:"top",ngClick:"showHosts(group.id, group.group_id, group.show_failures)",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",dataTipWatch:"group.launch_tooltip",ngShow:"group.id > 1 && (group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate({{ group.id }})",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"group.id > 1 && (group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{mode:"all",ngClick:"editGroup({{ group.group_id + ',' + group.id }})",awToolTip:"Edit group",ngShow:"group.id > 1",dataPlacement:"top"},"delete":{mode:"all",ngClick:"deleteGroup({{ group.id + ',' + group.group_id }})",awToolTip:"Delete group",ngShow:"group.id != 1",dataPlacement:"top"}}}),angular.module("InventoryHostsDefinition",[]).value("InventoryHosts",{name:"hosts",iterator:"host",editTitle:"{{ selected_group }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,"class":"table-condensed table-no-border",fields:{name:{key:!0,label:"Hosts",ngClick:"editHost(host.id)",searchPlaceholder:"search_place_holder",columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",dataHostId:"{{ host.id }}",dataType:"host",awDraggable:"true"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"},"delete":{ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash",awToolTip:"Delete host",dataPlacement:"top"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createHost()",ngHide:"selected_tree_id == 1",awToolTip:"Create a new host"},stream:{ngClick:"showHostActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("JobEventsListDefinition",[]).value("JobEventList",{name:"jobevents",iterator:"jobevent",editTitle:"Job Events",index:!1,hover:!0,hasChildren:!0,filterBy:"{ show: true }",navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",active:!0,icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{created:{label:"Created On",columnClass:"col-lg-1 col-md-1 hidden-sm hidden-xs",key:!0,nosort:!0,searchable:!1,link:!1},status:{label:"Status",showValue:!1,columnClass:"col-sm-1 col-xs-2 text-center",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}],nosort:!0,searchable:!1,ngClick:"viewJobEvent({{ jobevent.id }})",awToolTip:"{{ jobevent.statusBadgeToolTip }}",dataPlacement:"top",badgeIcon:"fa icon-job-{{ jobevent.status }}",badgePlacement:"left",badgeToolTip:"{{ jobevent.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgClick:"viewJobEvent({{ jobevent.id }})"},event_display:{label:"Event",hasChildren:!0,ngClick:"toggleChildren(jobevent.id, jobevent.related.children)",nosort:!0,searchable:!1,ngClass:"{{ jobevent.class }}",appendHTML:"jobevent.event_detail"},host:{label:"Host",ngBind:"jobevent.summary_fields.host.name",ngHref:"{{ jobevent.hostLink }}",searchField:"hosts__name",nosort:!0,searchOnly:!1,id:"job-event-host-header","class":"break",columnClass:"col-lg-2 hidden-sm hidden-xs"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{columnClass:"col-sm-1 col-xs-2",view:{label:"View",ngClick:"viewJobEvent(jobevent.id)",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("JobHostDefinition",[]).value("JobHostList",{name:"jobhosts",iterator:"jobhost",editTitle:"All summaries",index:!0,hover:!0,navigationLinks:{ngHide:"host_id !== null",details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",active:!0,icon:"icon-laptop"}},fields:{job:{label:"Job ID",ngClick:"showJob(jobhost.job)",columnShow:"host_id !== null",key:!0,desc:!0},host:{label:"Host",key:!0,sourceModel:"host",sourceField:"name",ngBind:"jobhost.host_name",ngHref:"jobhost.hostLinkTo"},status:{label:"Status",badgeNgHref:"{{ jobhost.statusLinkTo }}",badgeIcon:"fa icon-job-{{ jobhost.status }}",badgePlacement:"left",badgeToolTip:"{{ jobhost.statusBadgeToolTip }}",badgeTipPlacement:"top",ngHref:"{{ jobhost.statusLinkTo }}",awToolTip:"{{ jobhost.statusBadgeToolTip }}",dataPlacement:"top",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}]},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},ok:{label:"Success",searchable:!1},changed:{label:"Changed",searchable:!1},failures:{label:"Failure",searchable:!0,searchLabel:"Contains failed events?",searchType:"gtzero"},dark:{label:"Unreachable",searchable:!0,searchType:"gtzero",searchLabel:"Contains unreachable hosts?"},skipped:{label:"Skipped",searchable:!1}},actions:{help:{awPopOver:"<dl>\n<dt>Success</dt><dd>Tasks successfully executed on the host.</dd>\n<dt>Changed</dt><dd>Actions taken on the host.</dd>\n<dt>Failure</dt><dd>Tasks that failed on the host.</dd>\n<dt>Unreachable</dt><dd>Times the ansible server could not reach the host.</dd>\n<dt>Skipped</dt><dd>Tasks bypassed and not performed on the host due to prior task failure or the host being unreachable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Job Host Summary",id:"jobhost-help-button"},refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refresh()",ngShow:"host_id == null"}},fieldActions:{}}),angular.module("JobTemplatesListDefinition",[]).value("JobTemplateList",{name:"job_templates",iterator:"job_template",selectTitle:"Add Job Template",editTitle:"Job Templates",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addJobTemplate()",basePaths:["job_templates"],awToolTip:"Create a new template"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editJobTemplate(job_template.id)",icon:"icon-edit",awToolTip:"Edit template","class":"btn-default btn-xs",dataPlacement:"top"},submit:{label:"Launch",icon:"icon-rocket",mode:"all","class":"btn-xs btn-success",ngClick:"submitJob(job_template.id)",awToolTip:"Start a job using this template",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteJobTemplate(job_template.id, job_template.name)",icon:"icon-trash","class":"btn-danger btn-xs",awToolTip:"Delete template",dataPlacement:"top"}}}),angular.module("JobsListDefinition",[]).value("JobList",{name:"jobs",iterator:"job",editTitle:"Jobs",index:!1,hover:!0,"class":"jobs-table",fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},inventory:{label:"Inventory ID",searchType:"int",searchOnly:!0},created:{label:"Create On",link:!1,searchable:!1},job_template:{label:"Job Template",ngBind:"job.summary_fields.job_template.name",ngHref:"{{ '/#/job_templates/' + job.job_template }}",sourceModel:"job_template",sourceField:"name"},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{ job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{submit:{label:"Relaunch",icon:"icon-rocket",mode:"all",ngClick:"submitJob(job.id, job.summary_fields.job_template.name)",awToolTip:"Start the job",dataPlacement:"top"},cancel:{label:"Stop",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Cancel a running or pending job",ngShow:"job.status == 'pending' || job.status == 'running' || job.status == 'waiting'",dataPlacement:"top"},"delete":{label:"Delete",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Delete the job",ngShow:"job.status != 'pending' && job.status != 'running' && job.status != 'waiting'",dataPlacement:"top"},dropdown:{type:"DropDown",label:"View",icon:"fa-search-plus","class":"btn-default btn-xs",options:[{ngClick:"editJob(job.id, job.summary_fields.job_template.name)",label:"Status"},{ngClick:"viewEvents(job.id, job.summary_fields.job_template.name)",label:"Events",ngHide:"job.status == 'new'"},{ngClick:"viewSummary(job.id, job.summary_fields.job_template.name)",label:"Host Summary",ngHide:"job.status == 'new'"}]}}}),angular.module("OrganizationListDefinition",[]).value("OrganizationList",{name:"organizations",iterator:"organization",selectTitle:"Add Organizations",editTitle:"Organizations",hover:!0,index:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addOrganization()",awToolTip:"Create a new organization"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editOrganization(organization.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit organization",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteOrganization(organization.id, organization.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete organization",dataPlacement:"top"}}}),angular.module("PermissionListDefinition",[]).value("PermissionList",{name:"permissions",iterator:"permission",selectTitle:"Add Permission",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',editTitle:"Permissions",index:!0,well:!0,fields:{name:{key:!0,label:"Name",ngClick:"editPermission(permission.id)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},actions:{add:{mode:"all",ngClick:"addPermission()",awToolTip:"Add a new permission",ngShow:"PermissionAddAllowed"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editPermission(permission.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit permission",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deletePermission(permission.id, permission.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete permission",ngShow:"PermissionAddAllowed",dataPlacement:"top"}}}),angular.module("ProjectsListDefinition",[]).value("ProjectList",{name:"projects",iterator:"project",selectTitle:"Add Project",editTitle:"Projects",selectInstructions:"<p>Select existing projects by clicking each project or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new project by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",columnClass:"hidden-sm hidden-xs",excludeModal:!0},scm_type:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0},status:{label:"Status",ngClick:"showSCMStatus(project.id)",awToolTip:"View details of last SCM Update",dataPlacement:"top",badgeIcon:"{{ 'fa icon-failures-' + project.badge }}",badgePlacement:"left",searchType:"select",searchOptions:[],excludeModal:!0},last_updated:{label:"Last Updated",type:"date",excludeModal:!0,searchable:!1}},actions:{add:{mode:"all",ngClick:"addProject()",awToolTip:"Create a new project"},help:{awPopOver:"<dl>\n<dt>Updating</dt><dd>A source control update is in progress.</dd>\n<dt>Never Updated</dt><dd>This project has not yet been updated from source control.</dd>\n<dt>Failed</dt><dd>An error occurred during the most recent source control update, click the status text for more information.</dd>\n<dt>Successful</dt><dd>TThe latest source control update completed successfully.</dd>\n<dt>Missing</dt><dd>The previously configured local project directory is missing.</dd>\n<dt>N/A</dt><dd>The project is not linked to source control, so updates are not applicable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all",awToolTip:"Click for help",awTipPlacement:"top"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editProject(project.id)",awToolTip:"Edit project properties",dataPlacement:"top"},scm_update:{label:"Update",ngClick:"SCMUpdate(project.id)",awToolTip:"{{ project.scm_update_tooltip }}",ngClass:"project.scm_type_class",dataPlacement:"top"},cancel:{label:"Stop",ngClick:"cancelUpdate(project.id, project.name)",awToolTip:"Cancel a running SCM update process",ngShow:"project.status == 'updating'",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteProject(project.id, project.name)",awToolTip:"Permanently remove project from the database",ngShow:"project.status !== 'updating'",dataPlacement:"top"}}}),angular.module("StreamListDefinition",[]).value("StreamList",{name:"activities",iterator:"activity",editTitle:"Activity Stream",selectInstructions:"",index:!1,hover:!0,"class":"table-condensed",searchWidgets:3,fields:{timestamp:{label:"Event Time",key:!0,desc:!0,noLink:!0,searchable:!1},user:{label:"Initiated by",ngBindHtml:"activity.user",sourceModel:"actor",sourceField:"username",searchPlaceholder:"Username",searchWidget:1},description:{label:"Action",ngBindHtml:"activity.description",nosort:!0,searchable:!1,columnClass:"col-lg-7"},system_event:{label:"System event",searchOnly:!0,searchType:"isnull",sourceModel:"actor",sourceField:"username",searchWidget:1},all_objects:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All resources",searchWidget:2},credential_search:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Credential name",searchWidget:2,searchField:"object1"},group_search:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Group name",searchWidget:2,searchField:"object1"},host_search:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Host name",searchWidget:2,searchField:"object1"},inventory_search:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Inventory name",searchWidget:2,searchField:"object1"},job_template_search:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Job template name",searchWidget:2,searchField:"object1"},job_search:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:2,searchField:"object1"},organization_search:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Organization name",searchWidget:2,searchField:"object1"},project_search:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Project name",searchWidget:2,searchField:"object1"},user_search:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Primary username",searchWidget:2,searchField:"object1"},all_objects3:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All related resources",searchWidget:3,searchField:"object2"},credential_search3:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Related credential name",searchWidget:3,searchField:"object2"},group_search3:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Related group name",searchWidget:3,searchField:"object2"},host_search3:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Related host name",searchWidget:3,searchField:"object2"},inventory_search3:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Related inventory name",searchWidget:3,searchField:"object2"},job_search3:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:3,searchField:"object2"},job_template_search3:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Related job template name",searchWidget:3,searchField:"object2"},organization_search3:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Related organization name",searchWidget:3,searchField:"object2"},project_search3:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Related project name",searchWidget:3,searchField:"object2"},user_search3:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Related username",searchWidget:3,searchField:"object2"}},actions:{refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refreshStream()"},close:{mode:"all",awToolTip:"Close Activity Stream view",ngClick:"closeStream()"}},fieldActions:{view:{label:"View",ngClick:"showDetail(activity.id)",icon:"fa-zoom-in","class":"btn-default btn-xs",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("TeamsListDefinition",[]).value("TeamList",{name:"teams",iterator:"team",selectTitle:"Add Team",editTitle:"Teams",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"},organization:{label:"Organization",ngBind:"team.organization_name",sourceModel:"organization",sourceField:"name"}},actions:{add:{mode:"all",ngClick:"addTeam()",awToolTip:"Create a new team"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editTeam(team.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit team",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteTeam(team.id, team.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete team",dataPlacement:"top"}}}),angular.module("UserListDefinition",[]).value("UserList",{name:"users",iterator:"user",selectTitle:"Add Users",editTitle:"Users",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>When available, a brand new user can be created by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{add:{label:"Create New",mode:"all",ngClick:"addUser()",basePaths:["organizations","users"],"class":"btn-xs",awToolTip:"Create a new user"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editUser(user.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit user",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteUser(user.id, user.username)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete user",dataPlacement:"top"}}}),angular.module("InventorySyncStatusWidget",["RestServices","Utilities"]).factory("InventorySyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b=a.label,c=a.count,d=a.fail,e=a.link,f=a.fail_link,g="<tr>\n";
return g+='<td><a href="'+e+'"',g+="Hosts"===b||"Groups"===b?' class="pad-left-sm" ':"",g+=">"+b+"</a></td>\n",g+='<td class="',g+=d>0?"failed-column":"zero-column",g+=' text-right">',g+='<a href="'+f+'">'+d+"</a>",g+="</td>\n",g+='<td class="text-right">',g+='<a href="'+e+'">'+c+"</a>",g+="</td></tr>\n"}var d,e,f,g,h,i=a.scope,j=a.target,k=a.dashboard;if(d='<div class="panel panel-default">\n',d+='<div class="panel-heading">Inventory Sync Status</div>\n',d+='<div class="panel-body">\n',d+='<table class="table table-condensed table-hover">\n',d+="<thead>\n",d+="<tr>\n",d+='<th class="col-md-4 col-lg-3"></th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',d+="</tr>\n",d+="</thead>\n",d+="<tbody>\n",d+=c({label:"Inventories",count:k.inventories&&k.inventories.total_with_inventory_source?k.inventories.total_with_inventory_source:0,fail:k.inventories&&k.inventories.inventory_failed?k.inventories.inventory_failed:0,link:"/#/inventories/?has_inventory_sources=true",fail_link:"/#/inventories/?inventory_sources_with_failures=true"}),e=0,f=0,k.inventory_sources)for(h in k.inventory_sources)e+=k.inventory_sources[h].total?k.inventory_sources[h].total:0,f+=k.inventory_sources[h].failed?k.inventory_sources[h].failed:0;d+=c({label:"Groups",count:e,fail:f,link:"/#/home/groups/?has_external_source=true",fail_link:"/#/home/groups/?status=failed"});for(h in k.inventory_sources)k.inventory_sources[h].total&&(d+=c({label:k.inventory_sources[h].label,count:k.inventory_sources[h].total?k.inventory_sources[h].total:0,fail:k.inventory_sources[h].failed?k.inventory_sources[h].failed:0,link:"/#/home/groups/?source="+h,fail_link:"/#/home/groups/?status=failed&source="+h}));d+="</tbody>\n",d+="</table>\n",d+="</div>\n",d+="</div>\n",d+="</div>\n",g=angular.element(document.getElementById(j)),g.html(d),b(g)(i),i.$emit("WidgetLoaded")}}]),angular.module("JobStatusWidget",["RestServices","Utilities"]).factory("JobStatus",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'"',b+="Hosts"===c||"Groups"===c?' class="pad-left-sm" ':"",b+=">"+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e=a.scope,f=a.target,g=a.dashboard,h="";h='<div class="panel panel-default">\n',h+='<div class="panel-heading">Job Status</div>\n',h+='<div class="panel-body">\n',h+='<table class="table table-condensed table-hover">\n',h+="<thead>\n",h+="<tr>\n",h+='<th class="col-md-4 col-lg-3"></th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',h+="</tr>\n",h+="</thead>\n",h+="<tbody>\n",h+=c({label:"Jobs",link:"/#/jobs",count:g.jobs&&g.jobs.total?g.jobs.total:0,fail:g.jobs&&g.jobs.failed?g.jobs.failed:0,fail_link:"/#/jobs/?status=failed"}),h+=c({label:"Inventories",link:"/#/inventories",count:g.inventories&&g.inventories.total?g.inventories.total:0,fail:g.inventories&&g.inventories.job_failed?g.inventories.job_failed:0,fail_link:"/#/inventories/?has_active_failures=true"}),h+=c({label:"Groups",link:"/#/home/groups",count:g.groups&&g.groups.total?g.groups.total:0,fail:g.groups&&g.groups.job_failed?g.groups.job_failed:0,fail_link:"/#/home/groups/?has_active_failures=true"}),h+=c({label:"Hosts",link:"/#/home/hosts",count:g.hosts&&g.hosts.total?g.hosts.total:0,fail:g.hosts&&g.hosts.failed?g.hosts.failed:0,fail_link:"/#/home/hosts/?has_active_failures=true"}),h+="</tbody>\n",h+="</table>\n",h+="</div>\n",h+="</div>\n",h+="</div>\n",d=angular.element(document.getElementById(f)),d.html(h),b(d)(e),e.$emit("WidgetLoaded")}}]),angular.module("ObjectCountWidget",["RestServices","Utilities"]).factory("ObjectCount",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.count;return b+="<tr>\n",b+='<td class="capitalize"><a href="'+d+'"',b+="hosts"===c||"groups"===c?' class="pad-left-sm" ':"",b+=">"+c.replace(/\_/g," ")+"</a></td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+e+"</a>",b+="</td></tr>\n"}var d,e,f,g=a.scope,h=a.target,i=a.dashboard,j=["organizations","users","teams","credentials","projects","inventories","groups","hosts","job_templates","jobs"];for(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">System Summary</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-5 col-lg-4"></th>\n',e+='<th class="col-md-1 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",d=0;d<j.length;d++)e+=c({label:j[d],link:"/#/"+("hosts"===j[d]||"groups"===j[d]?"home/"+j[d]:j[d]),count:i[j[d]]&&i[j[d]].total?i[j[d]].total:0});e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",f=angular.element(document.getElementById(h)),f.html(e),b(f)(g),g.$emit("WidgetLoaded")}}]),angular.module("SCMSyncStatusWidget",["RestServices","Utilities"]).factory("SCMSyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'">'+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e,f,g,h,i,j=a.scope,k=a.target,l=a.dashboard;if(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">Project SCM Status</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-4 col-lg-3"></th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",f=0,l.scm_types)for(h in l.scm_types)f+=l.scm_types[h].total?l.scm_types[h].total:0;e+=c({label:"Projects",link:"/#/projects",count:f,fail:l.projects&&l.projects.failed?l.projects.failed:0,fail_link:"/#/projects/?status=failed"}),i=[];for(h in l.scm_types)i.push(h);for(i.sort(),d=0;d<i.length;d++)h=i[d],l.scm_types[h].total&&(e+=c({label:l.scm_types[h].label,link:"/#/projects/?scm_type="+h,count:l.scm_types[h].total?l.scm_types[h].total:0,fail:l.scm_types[h].failed?l.scm_types[h].failed:0,fail_link:"/#/projects/?scm_type="+h+"&status=failed"}));e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",e+="</div>\n",g=angular.element(document.getElementById(k)),g.html(e),b(g)(j),j.$emit("WidgetLoaded")}}]),angular.module("StreamWidget",["RestServices","Utilities","StreamListDefinition","SearchHelper","PaginationHelpers","RefreshHelper","ListGenerator","StreamWidget","AuthService"]).factory("setStreamHeight",[function(){return function(){var a=$("#stream-content").height(),b=parseInt($("#tab-content-container").css("min-height").replace(/px/,"")),c=a>b?a:b;$("#tab-content-container").css({"min-height":c})}}]).factory("ShowStream",["setStreamHeight","Authorization",function(a){return function(){var b=$("#stream-container");b.css({position:"absolute",top:0,left:0,width:"100%","min-height":"100%","background-color":"#FFF"}),a(),b.show("slide",{direction:"left"},{duration:500,queue:!1})}}]).factory("HideStream",["LoadBreadCrumbs",function(a){return function(){var b=$("#stream-container");b.hide("slide",{direction:"left"},{duration:500,queue:!1}),setTimeout(function(){b.detach(),b.empty(),b.unbind(),$("#tab-content-container").css({"min-height":0})},500),a()}}]).factory("StreamBreadCrumbs",["$rootScope","$location",function(a,b){return function(){a.breadcrumbs=[];var c,d,e,f,g=b.path().split("/");for(g.splice(0,1),e=0;e<g.length;e++){if(/^\d+/.test(g[e])){for(c="",d="",f=0;e>=f;f++)c+="/"+g[f];for(f=0;f<a.crumbCache.length;f++)if(a.crumbCache[f].path===c){d=a.crumbCache[f].title;break}d||(d=g[e-1].substr(0,g[e-1].length-1),d=d.charAt(0).toUpperCase()+d.slice(1),d="Inventorie"===d?"Inventory":d)}else{if(c="",d="",e>0)for(f=0;e>=f;f++)c+="/"+g[f];else c="/"+g[e];d=g[e],d=d.charAt(0).toUpperCase()+d.slice(1)}a.breadcrumbs.push({path:c,title:d,ngClick:"closeStream('"+c+"')"})}}}]).factory("FixUrl",[function(){return function(a){return a.replace(/\/api\/v1\//,"/#/")}}]).factory("BuildUrl",[function(){return function(a){var b="/#/";switch(a.base){case"group":case"host":b+="home/"+a.base+"s/?id="+a.id;break;case"inventory":b+="inventories/"+a.id+"/";break;default:b+=a.base+"s/"+a.id+"/"}return b}}]).factory("BuildDescription",["FixUrl","BuildUrl",function(a,b){return function(a){function c(a){return a.replace(/^_deleted_\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d+\+\d+:\d+_/,"")}var d,e,f,g,h,i,j,k;d=a.operation,d+=/e$/.test(a.operation)?"d ":"ed ",e=d,f=a.object1,g=a.object2,h=a.summary_fields[f]?a.summary_fields[f][0]:null,i=f===g?a.summary_fields[f][1]:a.summary_fields[g]?a.summary_fields[g][0]:null,("user"===f||"user"===g)&&(a.summary_fields.user[0].name=a.summary_fields.user[0].username),i&&i.name&&!/^_delete/.test(i.name)?(i.base=g,d+=g+' <a href="'+b(i)+'">'+i.name+"</a>"+("disassociate"===a.operation?" from ":" to "),e+=g+" "+i.name+("disassociate"===a.operation?" from ":" to ")):g&&(j="",i&&i.name&&(j=" "+c(i.name)),d+=g+j+("disassociate"===a.operation?" from ":" to "),e+=g+j+("disassociate"===a.operation?" from ":" to ")),h&&h.name&&!/^\_delete/.test(h.name)?(h.base=f,d+=f+' <a href="'+b(h)+'">'+h.name+"</a>",e+=f+" "+h.name):f&&(j="",k="",!h||!h.name||h&&h.name&&/^_delete/.test(h.name)?a.changes&&a.changes.name?"string"==typeof a.changes.name?(j=" "+a.changes.name,k=j):"object"==typeof a.changes.name&&Array.isArray(a.changes.name)&&(j=" "+a.changes.name[0],k=j):"job"===f&&h&&a.changes&&a.changes.job_template?"delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+" "+a.changes.job_template+"</a>",k=" "+h.id+" "+a.changes.job_template):(j=" "+h.id+" "+a.changes.job_template,k=j):"job"===f&&h&&("delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+"</a>",k=" "+h.id):(j=" "+h.id,k=j)):h&&h.name&&(j=" "+c(h.name),k=j),d+=f+j,e+=f+k),a.description=d,a.description_nolink=e}}]).factory("ShowDetail",["$rootScope","Rest","Alert","GenerateForm","ProcessErrors","GetBasePath","FormatDate","ActivityDetailForm","Empty","Find",function(a,b,c,d,e,f,g,h,i,j){return function(a){var b,c,e,f=a.activity_id,i=a.scope,k=d,l=h,m=j({list:i.activities,key:"id",val:f});m&&(m.changes_stringified=JSON.stringify(m.changes,null,"	"),b=m.changes_stringified.match(/\n/g),c=b?b.length:1,c=1>c?3:10,l.fields.changes.rows=10,e=k.inject(l,{mode:"edit",modal:!0,related:!1}),e.changes=m.changes_stringified,e.user=(m.summary_fields.actor?m.summary_fields.actor.username:"system")+" on "+g(new Date(m.timestamps)),e.operation=m.description_nolink,e.formModalAction=function(){$("#form-modal").modal("hide")},$("#form-modal").on("show.bs.modal",function(){$("#form-modal-body").css({width:"auto",height:"auto","max-height":"100%"})}),e.formModalActionLabel="OK",e.formModalCancelShow=!1,e.formModalInfo=!1,e.formModalHeader="Event "+m.id,e.$$phase||e.$digest())}}]).factory("Stream",["$rootScope","$location","Rest","GetBasePath","ProcessErrors","Wait","StreamList","SearchInit","PaginateInit","GenerateList","FormatDate","ShowStream","HideStream","BuildDescription","FixUrl","BuildUrl","ShowDetail","StreamBreadCrumbs","setStreamHeight","Find","Store",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return function(c){var e,f,o,v,w=g,x=d("activity_stream"),y=j,z=b.path().replace(/^\//,"").split("/")[0],A=c.scope,B=u("CurrentSearchParams"),C=c&&c.inventory_name?c.inventory_name:null,D=c&&c.url?c.url:null;a.flashMessage=null,D?x=D:"/home"!==b.path()&&(e="inventories"===z?"inventory":z.replace(/s$/,""),f=b.path().split("/"),f.splice(0,1),f.length>1&&/^\d+/.test(f[f.length-1])?(e=f[f.length-2],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?"+e+"__id="+f[f.length-1]):f.length>1?(e=f[f.length-1],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?or__object1="+e+"&or__object2="+e):x+="?or__object1="+e+"&or__object2="+e),$("#tab-content-container").append('<div id="stream-container"><div id="stream-content"></div></div><!-- Stream widget -->'),r(),C&&(o=t({list:a.breadcrumbs,key:"title",val:"{{ inventory_name }}"}),o&&(o.title=C)),l(),v=y.inject(w,{mode:"edit",id:"stream-content",searchSize:"col-lg-3",secondWidget:!0,activityStream:!0}),v.streamTitle=c&&c.title?c.title:null,v.closeStream=function(a){m(),v.searchCleanup&&v.searchCleanup(),B&&h({scope:A,set:B.set,list:B.list,url:B.defaultUrl,iterator:B.iterator,sort_order:B.sort_order,setWidgets:!1}),a&&b.path(a)},v.refreshStream=function(){v.search(w.iterator)},v.showDetail=function(a){q({scope:v,activity_id:a})},v.removeStreamPostRefresh&&v.removeStreamPostRefresh(),v.removeStreamPostRefresh=v.$on("PostRefresh",function(){var a,b,c,d,e,f;for(a=0;a<v.activities.length;a++)b=new Date(v.activities[a].timestamp),v.activities[a].timestamp=k(b),v.activities[a].user=v.activities[a].summary_fields.actor?'<a href="/#/users/'+v.activities[a].summary_fields.actor.id+'">'+v.activities[a].summary_fields.actor.username+"</a>":"system",d=/^\_delete/,e=v.activities[a].object1,f=v.activities[a].object2,e&&v.activities[a].summary_fields[e]&&v.activities[a].summary_fields[e].name?d.test(v.activities[a].summary_fields[e].name)?v.activities[a].objects=v.activities[a].summary_fields[e].name:(c=p(v.activities[a].summary_fields.object1),v.activities[a].objects='<a href="'+c+'">'+v.activities[a].summary_fields[e].name+"</a>"):v.activities[a].object1&&(v.activities[a].objects=v.activities[a].object1),f&&v.activities[a].summary_fields[f]&&v.activities[a].summary_fields[f].name?d.test(v.activities[a].summary_fields.object2.name)?v.activities[a].objects+=","+v.activities[a].summary_fields[f].name:(c=p(v.activities[a].summary_fields.object2),v.activities[a].objects+=', <a href="'+c+'">'+v.activities[a].summary_fields[f].name+"</a>"):v.activities[a].object2&&(v.activities[a].objects+=", "+v.activities[a].object2),n(v.activities[a]);setTimeout(function(){s()},500)}),h({scope:v,set:w.name,list:w,url:x}),i({scope:v,list:w,url:x}),v.search(w.iterator)}}]),angular.module("AuthService",["ngCookies","Utilities"]).factory("Authorization",["$http","$rootScope","$location","$cookieStore","GetBasePath",function(a,b,c,d,e){return{setToken:function(a,c){d.remove("token"),d.remove("token_expires"),d.remove("userLoggedIn"),d.put("token",a),d.put("token_expires",c),d.put("userLoggedIn",!0),d.put("sessionExpired",!1),b.token=a,b.userLoggedIn=!0,b.token_expires=c,b.sessionExpired=!1},isUserLoggedIn:function(){return void 0===b.userLoggedIn&&(b.userLoggedIn=d.get("userLoggedIn"),b.sessionExpired=d.get("sessionExpired")),b.userLoggedIn},getToken:function(){return b.token?b.token:d.get("token")},retrieveToken:function(b,c){return a({method:"POST",url:e("authtoken"),data:{username:b,password:c}})},logout:function(){var a=angular.element(document.getElementById("main-view")).scope();a.$destroy(),b.$destroy(),d.remove("accordions"),d.remove("token"),d.remove("token_expires"),d.remove("current_user"),d.remove("lastPath"),d.put("userLoggedIn",!1),d.put("sessionExpired",!1),d.remove("lastPath","/home"),b.current_user={},b.license_tested=void 0,b.userLoggedIn=!1,b.sessionExpired=!1,b.token=null,b.token_expires=null,b.lastPath="/home"},getLicense:function(){return a({method:"GET",url:e("config"),headers:{Authorization:"Token "+this.getToken()}})},setLicense:function(a){a.tested=!1,d.put("license",a)},licenseTested:function(){var a,c;return void 0!==b.license_tested?c=b.license_tested:(a=d.get("license"),c=a&&void 0!==a.tested?a.tested:!1),c},getUser:function(){return a({method:"GET",url:"/api/v1/me/",headers:{Authorization:"Token "+this.getToken()}})},setUserInfo:function(a){b.current_user=a.results[0],d.put("current_user",a.results[0])},restoreUserInfo:function(){b.current_user=d.get("current_user")},getUserInfo:function(a){var c;return b.current_user?b.current_user[a]:(this.restoreUserInfo(),c=d.get("current_user"),c[a])}}}]),angular.module("InventoryTree",["Utilities","RestServices","GroupsHelper","PromptDialog"]).factory("SortNodes",[function(){return function(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].name);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].name===d[c]&&e.push(a[b]);return e}}]).factory("BuildTree",["Rest","GetBasePath","ProcessErrors","SortNodes","Wait","GetSyncStatusMsg","GetHostsStatusMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){var b,c,e=[],f=d(a);for(b=0;b<f.length;b++)e.push(f[b].id);c={name:"All Hosts",id:1,group_id:null,parent:0,description:"",show:!0,ngicon:null,has_children:!1,related:{},selected_class:"",show_failures:!1,isDraggable:!1,isDroppable:!0,children:e},q.push(c)}function j(a,b,c){var e,h,i,k,n,o,s=d(a);for(e=0;e<s.length;e++){for(r++,k=f({status:s[e].summary_fields.inventory_source.status}),n=g({active_failures:s[e].hosts_with_active_failures,total_hosts:s[e].total_hosts,inventory_id:l,group_id:s[e].id}),i=[],h=0;h<s[e].children.length;h++)i.push(s[e].children[h].id);o={name:s[e].name,has_active_failures:s[e].has_active_failures,total_hosts:s[e].total_hosts,hosts_with_active_failures:s[e].hosts_with_active_failures,total_groups:s[e].total_groups,groups_with_active_failures:s[e].groups_with_active_failures,parent:b,has_children:s[e].children.length>0?!0:!1,has_inventory_sources:s[e].has_inventory_sources,id:r,source:s[e].summary_fields.inventory_source.source,group_id:s[e].id,event_level:c,children:i,ngicon:s[e].children.length>0?"fa fa-minus-square-o node-toggle":"fa fa-square-o node-no-toggle",ngclick:"toggle("+r+")",related:{children:s[e].children.length>0?s[e].related.children:"",inventory_source:s[e].related.inventory_source},status:s[e].summary_fields.inventory_source.status,status_class:k["class"],status_tooltip:k.tooltip,launch_tooltip:k.launch_tip,launch_class:k.launch_class,hosts_status_tip:n.tooltip,show_failures:n.failures,hosts_status_class:n["class"],selected_class:"",show:!0,isDraggable:!0,isDroppable:!0},q.push(o),p&&o.group_id===p&&(m.selected_tree_id=r,m.selected_group_id=o.group_id),s[e].children.length>0&&j(s[e].children,r,c+1)}}function k(){e("start"),a.setUrl(b("inventory")+l+"/"),a.get().success(function(a){m.$emit("buildAllGroups",a.name,a.related.tree,a.related.groups)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+l+". GET returned: "+b})})}var l=h.inventory_id,m=h.scope,n=h.refresh,o=h.emit,p=h.new_group_id,q=[],r=1;m.buildAllGroupsRemove&&m.buildAllGroupsRemove(),m.buildAllGroupsRemove=m.$on("buildAllGroups",function(b,d,f){a.setUrl(f),a.get().success(function(a){i(a),j(a,0,0),m.autoShowGroupHelp=0===a.length?!0:!1,n?(m.groups=q,m.$emit("GroupTreeRefreshed",d,q,o)):m.$emit("GroupTreeLoaded",d,q,o)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory tree for: "+l+". GET returned: "+b})})}),k()}}]).factory("UpdateGroup",["ApplyEllipsis","GetSyncStatusMsg","Empty",function(a,b,c){return function(d){var e,f,g,h,i,j=d.scope,k=d.group_id,l=d.properties;for(e=0;e<j.groups.length;e++){if(j.groups[e].group_id===k){g=j.groups[e];for(f in l)"name"===f&&(h=j.groups[e].name),"source"===f&&l[f]!==j.groups[e][f]&&(c(l[f])||"none"!==j.groups[e].status&&!c(j.groups[e].status)?l[f]||(j.groups[e].status="none"):j.groups[e].status="never updated",i=b({status:j.groups[e].status}),j.groups[e].status_class=i["class"],j.groups[e].status_tooltip=i.tooltip,j.groups[e].launch_tooltip=i.launch_tip,j.groups[e].launch_class=i.launch_class),j.groups[e][f]=l[f]}j.groups[e].id===j.selected_tree_id&&(j.selected_group_name=j.groups[e].name,j.search_place_holder="Search "+j.groups[e].name,j.hostSearchPlaceholder="Search "+j.groups[e].name)}h&&setTimeout(function(){$('#groups_table .group-name a[title="'+h+'"]').attr("title",l.name),a("#groups_table .group-name a")},2500)}}]).factory("SetNodeName",[function(){return function(a){var b=a.name,c=a.description,d=void 0!==a.group_id?a.group_id:null,e=void 0!==a.inventory_id?a.inventory_id:null;null!==d&&$("#inventory-tree").find('li [data-group-id="'+d+'"]').each(function(){$(this).attr("data-name",b),$(this).attr("data-description",c),$(this).find(".activate").first().text(b)}),null!==e&&$("#inventory-root-node").attr("data-name",b).attr("data-description",c).find(".activate").first().text(b)}}]).factory("CopyMoveGroup",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.groups,key:"id",val:b.inbound_tree_id}),m="";m+='<div id="copy-prompt-modal" class="modal fade">\n',m+='<div class="modal-dialog">\n',m+='<div class="modal-content">\n',m+='<div class="modal-header">\n',m+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',m+=1===k.id||0===l.parent?"<h3>Move Group</h3>\n":"<h3>Copy or Move?</h3>\n",m+="</div>\n",m+='<div class="modal-body">\n',1===k.id?m+="<p>Are you sure you want to move group "+l.name+" to the top level?</p>":0===l.parent?m+="<p>Are you sure you want to move group "+l.name+" from the top level and make it a child of "+k.name+"?</p>":(m+='<div class="text-center">\n',m+="<p>Would you like to copy or move group <em>"+l.name+"</em> to group <em>"+k.name+"</em>?</p>\n",m+='<div style="margin-top: 30px;">\n',m+='<a href="" ng-click="moveGroup()" class="btn btn-primary" style="margin-right: 15px;"><i class="fa fa-cut"></i> Move</a>\n',m+='<a href="" ng-click="copyGroup()" class="btn btn-primary"><i class="fa fa-copy"></i> Copy</a>\n',m+="</div>\n",m+="</div>\n"),m+="</div>\n",m+='<div class="modal-footer">\n',m+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">Cancel</a>\n',(1===k.id||0===l.parent)&&(m+='<a href="" data-target="#prompt-modal" ng-click="moveGroup()" class="btn btn-primary">Yes</a>\n'),m+="</div>\n",m+="</div><!-- modal-content -->\n",m+="</div><!-- modal-dialog -->\n",m+="</div><!-- modal -->\n",i=angular.element(document.getElementById("inventory-modal-container")),i.empty().append(m),a(i)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.moveGroup=function(){var a,b,i;$("#copy-prompt-modal").modal("hide"),e("start"),j.removeGroupRemove&&j.removeGroupRemove(),j.removeGroupRemove=j.$on("removeGroup",function(){l.parent>0?(i=d({list:j.groups,key:"id",val:l.parent}),a=h("base")+"groups/"+i.group_id+"/children/",f.setUrl(a),f.post({id:l.group_id,disassociate:1}).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to remove "+l.name+" from "+i.name+". POST returned status: "+b})})):j.$emit("GroupDeleteCompleted")}),a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id},f.setUrl(a),f.post(b).success(function(){j.$emit("removeGroup")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})},j.copyGroup=function(){$("#copy-prompt-modal").modal("hide"),e("start");var a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id};f.setUrl(a),f.post(b).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})}}}]).factory("CopyMoveHost",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var g,i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.hosts,key:"id",val:b.host_id}),m=!1,n="";if(l.summary_fields.all_groups)for(i=0;i<l.summary_fields.all_groups.length;i++)if(l.summary_fields.all_groups[i].id===k.group_id){m=!0;break}m?(n+='<div id="copy-alert-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" ng-hide="disableButtons" data-target="#copy-alert-modal"\n',n+='data-dismiss="modal" class="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Already in Group</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+='<div class="alert alert-info"><p>Host '+l.name+" is already in group "+k.name+".</p></div>\n",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#copy-alert-modal" data-dismiss="modal" class="btn btn-primary">OK</a>\n',n+="</div>\n",n+="</div>\n",n+="</div>\n",n+="</div>\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-alert-modal").modal({backdrop:"static",keyboard:!0,show:!0})):(n="",n+='<div id="copy-prompt-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Copy Host</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+="<p>Are you sure you want to copy host "+l.name+" to group "+k.name+"?</p>",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">No</a>\n',n+='<a href="" data-target="#prompt-modal" ng-click="copyHost()" class="btn btn-primary">Yes</a>\n',n+="</div>\n",n+="</div><!-- modal-content -->\n",n+="</div><!-- modal-dialog -->\n",n+="</div><!-- modal -->\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.copyHost=function(){$("#copy-prompt-modal").modal("hide"),e("start"),f.setUrl(h("groups")+k.group_id+"/hosts/"),f.post(l).success(function(){j.$emit("GroupTreeRefreshed")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+k.name+". POST returned status: "+b})})})}}]),angular.module("RestServices",["ngCookies","AuthService"]).factory("Rest",["$http","$rootScope","$cookieStore","$q","Authorization",function(a,b,c,d,e){return{headers:{},setUrl:function(a){this.url=a},checkExpired:function(){return b.sessionTimer.isExpired()},pReplace:function(){var a,b;for(a in this.params)b=new RegExp("\\:"+a,"gm"),b.test(this.url)&&(this.url=this.url.replace(b,this.params[a]),delete this.params[a])},createResponse:function(a,b){var c=d.reject({data:a,status:b});return c.success=function(a){return c.then(function(b){a(b.data,b.status)},null),c},c.error=function(a){return c.then(null,function(b){a(b.data,b.status)}),c},c},setHeader:function(a){for(var b in a)this.headers[b]=a[b]},get:function(b){b=b?b:{},this.params=b.params?b.params:null,this.pReplace();var c=this.checkExpired(),d=e.getToken();return c?this.createResponse({detail:"Token is expired"},401):d?(this.setHeader({Authorization:"Token "+d}),this.setHeader({"X-Auth-Token":"Token "+d}),a({method:"GET",url:this.url,headers:this.headers,params:this.params})):this.createResponse({detail:"Invalid token"},401)},post:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"POST",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},put:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"PUT",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},destroy:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"DELETE",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},options:function(){var b=e.getToken(),c=this.checkExpired();return c?this.createResponse({detail:"Token is expired"},401):b?(this.setHeader({Authorization:"Token "+b}),this.setHeader({"X-Auth-Token":"Token "+b}),a({method:"OPTIONS",url:this.url,headers:this.headers})):this.createResponse({detail:"Invalid token"},401)}}}]),angular.module("TimerService",["ngCookies","Utilities"]).factory("Timer",["$rootScope","$cookieStore","$location","GetBasePath","Empty",function(a,b){return{sessionTime:null,timeout:null,getSessionTime:function(){return this.sessionTime?this.sessionTime:b.get("sessionTime")},isExpired:function(){var a=this.getSessionTime(),b=(new Date).getTime();return 0>=a-b?!0:(this.moveForward(),!1)},expireSession:function(){this.sessionTime=0,a.sessionExpired=!0,b.put("sessionExpired",!0)},moveForward:function(){var c=(new Date).getTime()+1e3*$AnsibleConfig.session_timeout;this.sessionTime=c,b.put("sessionTime",c),a.sessionExpired=!1,b.put("sessionExpired",!1)},init:function(){return this.moveForward(),this}}}]),angular.module("Utilities",["RestServices","Utilities"]).factory("ClearScope",[function(){return function(a){var b,c=document.getElementById(a);c&&(b=angular.element(c).scope(),b.$destroy()),$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()});try{$("#help-modal").dialog("close")}catch(d){}$(window).unbind("resize")}}]).factory("Empty",[function(){return function(a){return null===a||void 0===a||""===a?!0:!1}}]).factory("ToggleClass",function(){return function(a,b){$(a)&&$(a).hasClass(b)?$(a).removeClass(b):$(a)&&$(a).addClass(b)}}).factory("Alert",["$rootScope",function(a){return function(b,c,d,e,f,g){f?(a.alertHeader2=b,a.alertBody2=c,a.alertClass2=d?d:"alert-danger",$("#alert-modal2").modal({show:!0,keyboard:!0,backdrop:"static"}),a.disableButtons2=g?!0:!1,e&&$("#alert-modal2").on("hidden",function(){e()}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal2").modal("hide"),e&&e())})):(a.alertHeader=b,a.alertBody=c,a.alertClass=d?d:"alert-danger",$("#alert-modal").modal({show:!0,keyboard:!0,backdrop:"static"}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal").modal("hide"),e&&e())}),a.disableButtons=g?!0:!1,e&&$("#alert-modal").on("hidden",function(){e()}))}}]).factory("ProcessErrors",["$rootScope","$cookieStore","$log","$location","Alert","Wait",function(a,b,c,d,e,f){return function(b,c,g,h,i){var j,k,l;if(f("stop"),$AnsibleConfig.debug_mode&&console&&(console.log("Debug status: "+g),console.log("Debug data: "),console.log(c)),403===g)l="The API responded with a 403 Access Denied error. ",l+=c.detail?"Detail: "+c.detail:"Please contact your system administrator.",e(i.hdr,l);else if(401===g&&c.detail&&"Token is expired"===c.detail||401===g&&c.detail&&"Invalid token"===c.detail)a.sessionTimer.expireSession(),d.url("/login");else if(c.non_field_errors)e("Error!",c.non_field_errors);else if(c.detail)e(i.hdr,i.msg+" "+c.detail);else if(c.__all__)e("Error!",c.__all__);else if(h){k=!1;for(j in h.fields)c[j]&&h.fields[j].tab&&$("#"+h.name+'_tabs a[href="#'+h.fields[j].tab+'"]').tab("show"),h.fields[j].realName&&c[h.fields[j].realName]&&(b[j+"_api_error"]=c[h.fields[j]][0],$('[name="'+h.fields[j].realName+'"]').addClass("ng-invalid"),k=!0),h.fields[j].sourceModel?c[j]&&(b[h.fields[j].sourceModel+"_"+h.fields[j].sourceField+"_api_error"]=c[j][0],$('[name="'+h.fields[j].sourceModel+"_"+h.fields[j].sourceField+'"]').addClass("ng-invalid"),k=!0):c[j]&&(b[j+"_api_error"]=c[j][0],$('[name="'+j+'"]').addClass("ng-invalid"),k=!0);
!k&&i&&e(i.hdr,i.msg)}else e(i.hdr,i.msg)}}]).factory("LoadBreadCrumbs",["$rootScope","$routeParams","$location","Empty",function(a,b,c,d){return function(b){function e(a){return a.toUpperCase()}function f(a){return"ies"===a?"y":""}var g,h,i,j,k,l,m,n;if(!d(b)){for(h=!1,j=0;j<a.crumbCache.length;j++)if(a.crumbCache[j].path===b.path){h=!0,a.crumbCache[j]=b;break}h||a.crumbCache.push(b)}if(k=c.path().replace(/^\//,"").split("/"),l="",a.breadcrumbs=[],k.length>1)for(j=0;j<k.length-1;j++){if(j>0&&k[j].match(/\d+/)){for(m=k[j-1],n=m.replace(/(ies$|s$)/,f),n=n.charAt(0).toUpperCase()+n.slice(1),h=!1,i=0;i<a.crumbCache.length;i++)if(a.crumbCache[i].path==="/"+m+"/"+k[j]){n=a.crumbCache[i].title,h=!0;break}a.breadcrumbs.push(h&&void 0!==a.crumbCache[i].altPath?{title:n,path:a.crumbCache[i].altPath}:{title:n,path:l+"/"+k[j]})}else/_/.test(k[j])&&(k[j]=k[j].replace(/(?:^|_)\S/g,e).replace(/_/g," ")),g=k[j].charAt(0).toUpperCase()+k[j].slice(1),a.breadcrumbs.push({title:g,path:l+"/"+k[j]});l+="/"+k[j]}}}]).factory("HelpDialog",["$rootScope","$location","Store",function(a,b,c){return function(a){function b(a){function g(a){var b="";return b+="<h4>"+a.intro+"</h4>\n",b+='<div class="img-container">\n',b+='<img src="'+$basePath+"img/help/"+a.img.src+'" >',b+="</div>\n",b+='<div class="help-box">'+a.box+"</div>",b+=f&&a.autoOffNotice?'<div class="help-auto-off"><label><input type="checkbox" name="auto-off-checkbox" id="auto-off-checkbox"> Do not show this message in the future</label></div>\n':""}var h,i,j,k,l=!1;e=a,j=d.story.width?d.story.width:510,k=d.story.height?d.story.height:600,i=$(document).width(),j=j>i?i:j;try{l=$("#help-modal").dialog("isOpen")}catch(m){}l?$("#help-modal").html(g(d.story.steps[e])):(h=[],d.story.steps.length>1&&(h.push({text:"Prev",click:function(a){e-1===0&&$(a.target).button("disable"),e-1<d.story.steps.length-1&&$(a.target).next().button("enable"),b(e-1)},disabled:!0}),h.push({text:"Next",click:function(a){e+1>0&&$(a.target).prev().button("enable"),e+1===d.story.steps.length-1&&$(a.target).button("disable"),b(e+1)}})),h.push({text:"Close",click:function(){$("#help-modal").dialog("close")}}),$("#help-modal").html(g(d.story.steps[e])).dialog({position:{my:"center top",at:"center top+150",of:"body"},title:d.story.hdr,width:j,height:k,buttons:h,closeOnEscape:!0,show:500,hide:500,resizable:!1,close:function(){$("#help-modal").empty()}}),$(".ui-dialog-buttonset button").each(function(){var a,b,c;c=$(this).text(),"Close"===c?(b="fa-times",a="btn btn-default",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Close')):"Prev"===c?(b="fa-chevron-left",a="btn btn-primary",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Prev')):(b="fa-chevron-right",a="btn btn-primary",$(this).attr({"class":a}).html('Next <i class="fa '+b+'"></i>').css({"margin-right":"20px"}))}),$('.ui-dialog[aria-describedby="help-modal"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$("#auto-off-checkbox").click(function(){$('input[name="auto-off-checkbox"]:checked').length?c("inventoryAutoHelp","off"):c("inventoryAutoHelp","on")}))}var d=a.defn,e=a.step,f=a.autoShow||!1;b(0)}}]).factory("ReturnToCaller",["$location","Empty",function(a,b){return function(c){var d,e=a.path().replace(/^\//,"").split("/"),f="";for(c=b(c)?e.length-1:c+1,d=0;c>d;d++)f+="/"+e[d];a.path(f)}}]).factory("FormatDate",["$filter",function(a){return function(b){return a("date")(b,"MM/dd/yy HH:mm:ss")}}]).factory("Wait",["$rootScope",function(a){return function(b){var c,d,e,f,g,h;"start"!==b||a.waiting?"stop"===b&&a.waiting&&$(".spinny, .overlay").fadeOut(400,function(){a.waiting=!1}):(a.waiting=!0,c=$(window).width(),d=$(window).height(),e=$(".spinny").width(),f=$(".spinny").height(),g=(c-e)/2,h=(d-f)/2,$(".overlay").css({width:$(document).width(),height:$(document).height()}).fadeIn(),$(".spinny").css({top:h,left:g}).fadeIn(400))}}]).factory("HideElement",[function(){return function(a,b){var c=$(a),d=c.css("width"),e=c.css("height"),f=c.position(),g=c.parent(),h=c.css("border-radius"),i=c.css("background-color"),j=c.css("margin"),k=c.css("padding");g.append('<div id="curtain-div" style="position: absolute;top: '+f.top+"px; left: "+f.left+"px; z-index: 1000; width: "+d+"; height: "+e+"; background-color: "+i+"; margin: "+j+"; padding: "+k+"; border-radius: "+h+'; opacity: .75; display: none; "></div>'),$("#curtain-div").show(0,b)}}]).factory("ShowElement",[function(){return function(){$("#curtain-div").fadeOut(500,function(){$(this).remove()})}}]).factory("GetChoices",["Rest","ProcessErrors",function(a,b){return function(c){var d=c.scope,e=c.url,f=c.field,g=c.variable,h=c.callback,i=c.choice_name;d[g]?d[g].length=0:d[g]=[],a.setUrl(e),a.options().success(function(a){var b,c;for(b=i?a.actions.GET[f][i]:a.actions.GET[f].choices,c=0;c<b.length;c++)d[g].push({label:b[c][1],value:b[c][0],name:b[c][1]});h&&d.$emit(h)}).error(function(a,c){b(d,a,c,null,{hdr:"Error!",msg:"Failed to get "+e+". GET status: "+c})})}}]).factory("Find",[function(){return function(a){var b,c=a.list,d=a.key,e=a.val,f=!1;if("object"==typeof c&&Array.isArray(c)){for(b=0;b<a.list.length;b++)if(c[b][d]===e){f=!0;break}return f?c[b]:null}return null}}]).factory("DebugForm",[function(){return function(a){var b,c=a.form,d=a.scope;for(b in c.fields)d[c.name+"_form"][b]&&console.log(b+" valid: "+d[c.name+"_form"][b].$valid),c.fields[b].sourceModel&&d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField]&&console.log(c.fields[b].sourceModel+"_"+c.fields[b].sourceField+" valid: "+d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField].$valid);console.log("form pristine: "+d[c.name+"_form"].$pristine),console.log("form valid: "+d[c.name+"_form"].$valid)}}]).factory("Store",["Empty",function(a){return function(b,c){if(a(c)){if(!a(b)){var d=localStorage[b];return a(d)?null:JSON.parse(d)}}else localStorage[b]=JSON.stringify(c)}}]).factory("ApplyEllipsis",[function(){return function(a){var b=$("#string-test");b.length||($("body").append('<div style="display:none;" id="string-test"></div>'),b=$("#string-test")),$(a).each(function(){var a,c,d,e,f,g=!0;$(this).attr("title")?(a=$(this).attr("title"),g=!1):a=$(this).text(),b.text(a),c=b.width(),d=$(this).parent().width(),c>d&&(g&&$(this).attr("title",a),e=c/a.length,f=c-d,a=a.substr(0,a.length-(Math.ceil(f/e)+3)),$(this).text(a+"...")),d>c&&!g&&(a=$(this).attr("title"),$(this).text(a))})}}]),angular.module("ApiLoader",["Utilities"]).factory("LoadBasePaths",["$http","$rootScope","Store","ProcessErrors",function(a,b,c,d){return function(){a.get("/api/").success(function(e){var f=e.current_version;a.get(f).success(function(a){a.base=f,b.defaultUrls=a,c("api",a)}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read "+f+". GET status: "+c})})}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read /api. GET status: "+c})})}}]).factory("GetBasePath",["$rootScope","Store","LoadBasePaths","Empty",function(a,b,c,d){return function(c){return d(a.defaultUrls)?b("api")?(a.defaultUrls=b("api"),a.defaultUrls[c]):"":a.defaultUrls[c]}}]),angular.module("AWDirectives",["RestServices","Utilities","AuthService","JobsHelper"]).directive("awpassmatch",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=c.awpassmatch,e=$('input[name="'+b+'"]').val();return a===e?(d.$setValidity("awpassmatch",!0),a):void d.$setValidity("awpassmatch",!1)})}}}).directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c=a.split(" "),e="";for(b=0;b<c.length;b++)e+=c[b].charAt(0).toUpperCase()+c[b].substr(1)+" ";return e=e.trim(),e!==a&&(d.$setViewValue(e),d.$render()),e})}}}).directive("integer",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){return d.$setValidity("min",!0),d.$setValidity("max",!0),/^\-?\d*$/.test(a)?(d.$setValidity("integer",!0),b.attr("min")&&(""===a||null===a||parseInt(a,10)<parseInt(b.attr("min"),10))?void d.$setValidity("min",!1):b.attr("max")&&parseInt(a,10)>parseInt(b.attr("max"),10)?void d.$setValidity("max",!1):a):void d.$setValidity("integer",!1)})}}}).directive("awRequiredWhen",function(){return{require:"ngModel",link:function(a,b,c,d){function e(){var e,f=b.val(),g=!0;!a[c.awRequiredWhen]||null!==b.attr("required")&&void 0!==b.attr("required")?a[c.awRequiredWhen]||(b.removeAttr("required"),$(b).hasClass("lookup")?(e=$(b).parent().parent().parent().find("label").first(),e.removeClass("prepend-asterisk")):$(b).parent().parent().find("label").first().removeClass("prepend-asterisk")):($(b).attr("required","required"),$(b).hasClass("lookup")?$(b).parent().parent().parent().find("label").first().addClass("prepend-asterisk"):$(b).parent().parent().find("label").first().addClass("prepend-asterisk")),!a[c.awRequiredWhen]||void 0!==f&&null!==f&&""!==f||(g=!1),d.$setValidity("required",g)}void 0!==c.awrequiredInit&&null!==c.awrequiredInit&&(a[c.awRequiredWhen]=c.awrequiredInit,e()),a.$watch(c.awRequiredWhen,function(){e()}),a.$watch($(b).attr("name"),function(){e()})}}}).directive("awPlaceholder",[function(){return{require:"ngModel",link:function(a,b,c){$(b).attr("placeholder",a[c.awPlaceholder]),a.$watch(c.awPlaceholder,function(a){$(b).attr("placeholder",a)})}}}]).directive("awlookup",["Rest",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(d){if(""!==d&&null!==d){var f=c.attr("data-url");f=f.replace(/\:value/,encodeURI(d)),b[c.attr("data-source")]=null,a.setUrl(f),a.get().then(function(a){var f=a.data.results;return f.length>0?(b[c.attr("data-source")]=f[0].id,b[c.attr("name")]=f[0].name,e.$setValidity("required",!0),e.$setValidity("awlookup",!0),d):(e.$setValidity("required",!0),void e.$setValidity("awlookup",!1))})}else e.$setValidity("awlookup",!0),b[c.attr("data-source")]=null})}}}]).directive("awValidUrl",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c,e=!0;""!==a&&(d.$setValidity("required",!0),b=/^(https|http|ssh)\:\/\//,c=/\@/g,(!b.test(a)||c.test(a))&&(e=!1)),d.$setValidity("awvalidurl",e)})}}}]).directive("awToolTip",function(){return function(a,b,c){var d,e=void 0!==c.delay&&null!==c.delay?c.delay:$AnsibleConfig.tooltip_delay;d=c.awTipPlacement?c.awTipPlacement:void 0!==c.placement&&null!==c.placement?c.placement:"left",$(b).on("hidden.bs.tooltip",function(){$(".tooltip").each(function(){$(this).remove()})}),$(b).tooltip({placement:d,delay:e,html:!0,title:c.awToolTip,container:"body"}),c.tipWatch&&a.$watch(c.tipWatch,function(a,c){a!==c&&$(b).tooltip("hide").attr("data-original-title",a).tooltip("fixTitle")})}}).directive("awPopOver",["$compile",function(a){return function(b,c,d){var e=void 0!==d.placement&&null!==d.placement?d.placement:"left",f=void 0!==d.title&&null!==d.title?d.title:"Help",g=void 0!==d.container?d.container:!1;$(c).popover({placement:e,delay:0,title:f,content:d.awPopOver,trigger:"manual",html:!0,container:g}),$(c).click(function(){var c=$(this).attr("id");$(".help-link, .help-link-white").each(function(){c!==$(this).attr("id")&&$(this).popover("hide")}),$(".popover").each(function(){$(this).remove()}),$(".tooltip").each(function(){$(this).hide()}),$(this).popover("toggle"),$(".popover").each(function(){a($(this))(b)})}),$(document).bind("keydown",function(a){27===a.keyCode&&($(c).popover("hide"),$(".popover").each(function(){$(this).remove()}))})}}]).directive("ngSlider",[function(){return{require:"ngModel",link:function(a,b,c,d){var e=b.attr("name");$("#"+e+"-slider").slider({value:0,step:1,min:b.attr("min"),max:b.attr("max"),slide:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.$$phase||a.$digest()}}),$("#"+e+"-number").change(function(){$("#"+e+"-slider").slider("value",parseInt($(this).val(),10))})}}}]).directive("awMultiSelect",[function(){return{require:"ngModel",link:function(a,b){$(b).multiselect({buttonClass:"btn-default, btn-mini",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,buttonText:function(a){if(0===a.length)return'None selected <b class="caret"></b>';if(a.length>3)return a.length+' selected  <b class="caret"></b>';var b="";return a.each(function(){b+=$(this).text()+", "}),b.substr(0,b.length-2)+' <b class="caret"></b>'}})}}}]).directive("ngSpinner",[function(){return{require:"ngModel",link:function(a,b,c,d){var e,f;e=b.attr("data-disabled"),f={value:0,step:1,min:b.attr("min"),max:b.attr("max"),numberFormat:"d",spin:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.job_templates_form.$dirty=!0,a.$$phase||a.$digest()}},e&&(f.disabled=!0),$(b).spinner(f)}}}]).directive("chkPass",[function(){return{require:"ngModel",link:function(a,b,c,d){$(b).keyup(function(){var c=!0,e=chkPass(b.val());b.val()&&(c=e>$AnsibleConfig.password_strength?!0:!1),d.$setValidity("complexity",c),a.$$phase||a.$digest()})}}}]).directive("awRefresh",["$rootScope",function(a){return{link:function(b){function c(){for(var a=""+b.refreshCnt;a.length<2;)a="0"+a;return"Refresh in "+a+" sec."}b.refreshCnt=$AnsibleConfig.refresh_rate,b.refreshMsg=c(),a.timer&&clearInterval(a.timer),a.timer=setInterval(function(){b.refreshCnt--,b.refreshCnt<=0&&(b.refresh(),b.refreshCnt=$AnsibleConfig.refresh_rate),b.refreshMsg=c(),b.$$phase||b.$digest()},1e3)}}}]).directive("awMultiselect",[function(){return{require:"^form",link:function(a,b,c,d){$(b).select2({multiple:!0,data:function(){if(a[c.awMultiselect]){var b,d=a[c.awMultiselect],e=[];for(b=0;b<d.length;b++)e.push({id:d[b].value,text:d[b].label});return{results:e}}return{results:{id:"",text:""}}}}),$(b).on("change",function(){d.$setDirty(),a.$$phase||a.$digest()})}}}]).directive("awDraggable",[function(){return function(a,b,c){if("true"===c.awDraggable){var d=c.containment;$(b).draggable({containment:d,scroll:!0,revert:"invalid",helper:"clone",start:function(a,b){b.helper.addClass("draggable-clone")},zIndex:100,cursorAt:{left:-1}})}}}]).directive("awDroppable",["Find",function(a){return function(b,c,d){var e;"true"===d.awDroppable&&$(c).droppable({accept:function(c){if("group"===c.attr("data-type")){if($(this).attr("data-group-id")===c.attr("data-group-id"))return!1;if(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)})){var d,f=parseInt(c.attr("data-group-id"),10),g=!1;for(d=0;d<e.children.length;d++)if(e.children[d]===f){g=!0;break}return g?!1:!0}return!1}return"host"===c.attr("data-type")?(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)}),e.id>1?!0:!1):!1},over:function(){$(this).addClass("droppable-hover")},out:function(){$(this).removeClass("droppable-hover")},drop:function(a,c){$(this).removeClass("droppable-hover"),"group"===c.draggable.attr("data-type")?b.$emit("CopyMoveGroup",parseInt(c.draggable.attr("data-tree-id"),10),parseInt($(this).attr("data-tree-id"),10)):"host"===c.draggable.attr("data-type")&&b.$emit("CopyMoveHost",parseInt($(this).attr("data-tree-id"),10),parseInt(c.draggable.attr("data-host-id"),10))},tolerance:"pointer"})}}]),angular.module("AWFilters",[]).filter("capitalize",[function(){return function(a){var b,c,d;if(a){for(b=a.replace(/\_/g," ").split(" "),c="",d=0;d<b.length;d++)c+=b[d].charAt(0).toUpperCase()+b[d].substr(1)+" ";return c.trim()}}}]),angular.module("FormGenerator",["GeneratorHelpers","ngCookies","Utilities"]).factory("GenerateForm",["$rootScope","$location","$cookieStore","$compile","SearchWidget","PaginateWidget","Attr","Icon","Column","NavigationLink","HelpCollapse","Button","DropDown","Empty","SelectIcon",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{setForm:function(a){this.form=a},attr:g,icon:h,accordion_count:0,scope:null,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},inject:function(a,b){var c,e,f,g;if(c=angular.element(document.getElementById(b.modal?b.modal_body_id?b.modal_body_id:"form-modal-body":b.id?b.id:"htmlTemplate")),this.mode=b.mode,this.modal=b.modal?!0:!1,this.setForm(a),c.html(b.html?b.html:this.build(b)),this.scope=b.scope?b.scope:c.scope(),d(c)(this.scope),!b.html){for(e in a.fields)this.scope[e]=null;for(f in a.related)this.scope[f]=null;(!b.modal&&b.related||this.form.forceListeners)&&this.addListeners(),"add"===b.mode&&this.applyDefaults()}$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize"),$('.form-control[required], input[type="radio"][required]').each(function(){var a,b;n($(this).attr("aw-required-when"))&&(a=$(this).parent().parent().find("label").first(),"radio"===$(this).attr("type")&&(a=$(this).parent().parent().parent().find("label").first()),a.length>0&&(b=a.children("span"),b.length>0&&!b.first().hasClass("prepend-asterisk")?b.first().addClass("prepend-asterisk"):b.length<=0&&!a.first().hasClass("prepend-asterisk")&&a.first().addClass("prepend-asterisk")))});try{$("#help-modal").empty().dialog("destroy")}catch(h){}return b.modal&&(this.scope.formModalActionDisabled=!1,this.scope.formModalInfo=!1,a&&(b.modal_title_id?this.scope[b.modal_title_id]="add"===b.mode?a.addTitle:a.editTitle:this.scope.formModalHeader="add"===b.mode?a.addTitle:a.editTitle),b.modal_selector?($(b.modal_selector).modal({show:!0,backdrop:"static",keyboard:!0}),$(b.modal_selector).on("shown.bs.modal",function(){$(b.modal_select+" input:first").focus()}),$(b.modal_selector).on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})):(g=b.show_modal===!1?!1:!0,$("#form-modal").modal({show:g,backdrop:"static",keyboard:!0}),$("#form-modal").on("shown.bs.modal",function(){$("#form-modal input:first").focus()}),$("#form-modal").on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})),$(document).bind("keydown",function(a){27===a.keyCode&&(b.modal_selector&&$(b.modal_selector).modal("hide"),$("#prompt-modal").modal("hide"),$("#form-modal").modal("hide"))})),this.scope.$$phase||this.scope.$digest(),this.scope},applyDefaults:function(){for(var a in this.form.fields)(this.form.fields[a]["default"]||0===this.form.fields[a]["default"])&&(this.scope[a]="select"===this.form.fields[a].type&&this.scope[a+"_options"]?this.scope[a+"_options"][this.form.fields[a]["default"]]:this.form.fields[a]["default"])},reset:function(){function a(a,b){if("checkbox_group"===a.type)for(var e=0;e<a.fields.length;e++)c[a.fields[e].name]="",c[a.fields[e].name+"_api_error"]="",c[d.name+"_form"][a.fields[e].name].$setValidity("apiError",!0);else c[b]="",c[b+"_api_error"]="";a.sourceModel&&(c[a.sourceModel+"_"+a.sourceField]="",c[a.sourceModel+"_"+a.sourceField+"_api_error"]="",c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),"lookup"===a.type&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&(c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setPristine(),c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setPristine(),c[d.name+"_form"][b].$setValidity("apiError",!0)),a.chkPass&&c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setValidity("complexity",!0),$("#progbar").css({width:0})),a.awPassMatch&&c[d.name+"_form"][b]&&c[d.name+"_form"][b].$setValidity("awpassmatch",!0),a.ask&&(c[b+"_ask"]=!1)}var b,c=this.scope,d=this.form;c[d.name+"_form"]&&c[d.name+"_form"].$setPristine();for(b in d.fields)a(d.fields[b],b);if(d.statusFields)for(b in d.statusFields)a(d.statusFields[b],b);"add"===this.mode&&this.applyDefaults()},addListeners:function(){this.modal?$(".jqui-accordion-modal").accordion({collapsible:!1,heightStyle:"content",active:0}):(this.scope.accordionToggle=function(a){$(a).collapse("toggle"),$(a+"-icon").hasClass("fa-minus")?$(a+"-icon").removeClass("fa-minus").addClass("fa-plus"):$(a+"-icon").removeClass("fa-plus").addClass("fa-minus")},$(".jqui-accordion").each(function(){var a,d,e,f=!1,g=c.get("accordions"),h=!1;if(g)for(a=$(this).attr("id"),d=b.path().replace(/^\//,"").split("/")[0],e=0;e<g.length&&h===!1;e++)g[e].base===d&&g[e].id===a&&(h=!0,f=g[e].active);h===!1&&"true"===$(this).attr("data-open")&&(f=0),$(this).accordion({collapsible:!0,heightStyle:"content",active:f,activate:function(){$(".jqui-accordion").each(function(){var a,d,e=$(this).accordion("option","active"),f=$(this).attr("id"),g=b.path().replace(/^\//,"").split("/")[0],h=c.get("accordions");for((null===h||void 0===h)&&(h=[]),d=!1,a=0;a<h.length&&d===!1;a++)h[a].base===g&&h[a].id===f&&(d=!0,h[a].active=e);d===!1&&h.push({base:g,id:f,active:e}),c.put("accordions",h)})}})}))},genID:function(){var a=new Date;return a.getTime()},headerField:function(a,b){var c="";return b.label&&(c+="<label>"+b.label+"</label>\n"),c+='<input type="text" name="'+a+'" ',c+='ng-model="'+a+'" ',c+=b["class"]?g(b,"class"):"",c+=" readonly />\n"},clearApiErrors:function(){for(var a in this.form.fields)this.form.fields[a].sourceModel?(this.scope[this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+"_api_error"]="",$('[name="'+this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+'"]').removeClass("ng-invalid")):this.form.fields[a].realName?(this.scope[this.form.fields[a].realName+"_api_error"]="",$('[name="'+this.form.fields[a].realName+'"]').removeClass("ng-invalid")):(this.scope[a+"_api_error"]="",$('[name="'+a+'"]').removeClass("ng-invalid"));this.scope.$$phase||this.scope.$digest()},button:l,navigationLink:j,buildHelpCollapse:function(a){var b,c="",d={};for(b=0;b<a.length;b++)d.hdr=a[b].hdr,d.content=a[b].content,d.idx=this.accordion_count++,d.show=a[b].show?a[b].show:null,d.bind=a[b].ngBind?a[b].ngBind:null,c+=k(d);return c},buildField:function(a,b,c,d){function e(){var a;return a=d.formFieldSize?d.formFieldSize:b.xtraWide?"col-lg-10":b.column?"col-lg-8":!d.formFieldSize&&c.modal?"col-lg-10":"col-lg-6"}function f(){var a;return a=d.formLabelSize?d.formLabelSize:b.column?"col-lg-4":!d.formLabelSize&&c.modal?"col-lg-2":"col-lg-2"}function i(a,b,c){var d="";return d+=a.id?g(a,"id"):'id="'+c.name+"_"+b+'" '}function j(a,b,c,d,e){var f="",h=void 0!==e&&e===!1?!1:!0;return h&&(f+='<label class="',f+=void 0===b.inline||b.inline===!0?"checkbox-inline":"",f+=b.labelClass?" "+b.labelClass:"",f+='">'),f+='<input type="checkbox" ',f+=g(b,"type"),f+='ng-model="'+c+'" ',f+='name="'+c+'" ',f+=b.ngChange?g(b,"ngChange"):"",f+='id="'+a.name+"_"+c+'_chbox" ',f+=void 0!==d?"_"+d:"",f+='class="',f+=b["class"]?b["class"]+" ":"",f+='"',f+=void 0!==b.trueValue?g(b,"trueValue"):"",f+=void 0!==b.falseValue?g(b,"falseValue"):"",f+=b.checked?"checked ":"",f+=b.readonly?"disabled ":"",f+=" > ",h&&(f+=b.label+" ",f+=b.awPopOver?g(b,"awPopOver",c):"",f+="</label>\n"),f}function l(){var c="";return(b.label||b.labelBind)&&(c+="<label ",c+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",(q||b.labelClass)&&(c+='class="',c+=b.labelClass?b.labelClass:"",c+=q?" "+f():"",c+='" '),c+=b.labelNGClass?'ng-class="'+b.labelNGClass+'" ':"",c+='for="'+a+'">',c+=b.icon?h(b.icon):"",c+='<span class="label-text">'+b.label+"</span>",c+=b.awPopOver&&!b.awPopOverRight?g(b,"awPopOver",a):"",c+="</label>\n"),c}var m,n,o,p="",q=this.form.horizontal?!0:!1;if("alertblock"===b.type&&(p+='<div class="row">\n',p+='<div class="',p+=c.modal||c.id?"col-lg-12":"col-lg-8 col-lg-offset-2",p+='">\n',p+='<div class="alert',p+=void 0===b.closeable||b.closeable===!0?" alert-dismissable":"",p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=">\n",p+=void 0===b.closeable||b.closeable===!0?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n':"",p+=b.alertTxt,p+="</div>\n",p+="</div>\n",p+="</div>\n"),"hidden"===b.type&&("edit"===c.mode&&b.includeOnEdit||"add"===c.mode&&b.includeOnAdd)&&(p+='<input type="hidden" ng-model="'+a+'" name="'+a+'" />'),!b.readonly||b.readonly&&"edit"===c.mode){if(p+='<div class="form-group" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=b.ngHide?this.attr(b,"ngHide"):"",p+=">\n",("text"===b.type||"password"===b.type||"email"===b.type)&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+=b.clear||b.genMD5?'<div class="input-group">\n':"",(null===b.control||void 0===b.control||b.control)&&(p+="<input ",p+=this.attr(b,"type"),p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.chkPass?"chk-pass ":"",p+=i(b,a,this.form),p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+='class="form-control',p+=b["class"]?" "+this.attr(b,"class"):"",p+='" ',p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+=b.awPassMatch?'awpassmatch="'+b.associated+'" ':"",p+=b.capitalize?"capitalize ":"",p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=void 0!==b.autocomplete?this.attr(b,"autocomplete"):"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=b.awValidUrl?"aw-valid-url ":"",p+=b.associated&&this.form.fields[b.associated].ask?'ng-disabled="'+b.associated+'_ask" ':"",p+=b.awMultiselect?'aw-multiselect="'+b.awMultiselect+'" ':"",p+=" >\n"),b.clear&&(p+='<span class="input-group-btn"><button type="button" ',p+='id="'+this.form.name+"_"+a+'_clear_btn" ',p+='class="btn btn-default" ng-click="clear(\''+a+"','"+b.associated+'\')" aw-tool-tip="Clear '+b.label+'" id="'+a+'-clear-btn" ',p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=' ><i class="fa fa-undo"></i></button>\n',p+="</span>\n</div>\n",b.ask&&(p+='<label class="checkbox-inline ask-checkbox" ',p+=b.askShow?'ng-show="'+b.askShow+'" ':"",p+=">",p+='<input type="checkbox" ng-model="'+a+'_ask" ng-change="ask(\''+a+"','"+b.associated+"')\" ",p+='id="'+this.form.name+"_"+a+'_ask_chbox" ',p+="> Ask at runtime?</label>")),b.genMD5&&(p+='<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="genMD5(\''+a+'\')" aw-tool-tip="Generate '+b.label+'" data-placement="top" id="'+this.form.name+"_"+a+'_gen_btn"><i class="fa fa-magic"></i></button></span>\n</div>\n'),("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),"email"===b.type&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.email">A valid email address is required!</div>\n'),b.awPassMatch&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.awpassmatch">Must match Password value</div>\n'),b.awValidUrl&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.awvalidurl\">URL must begin with ssh, http or https and may not contain '@'</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',b.chkPass&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.complexity">Password must be stronger</div>\n',p+='<div class="pw-progress">\n',p+='<div class="progress progress-striped">\n',p+='<div id="progbar" class="progress-bar" role="progress"></div>\n',p+="</div>\n",p+=k({hdr:"Password Complexity",content:'<p>A password with reasonable strength is required. As you type the password a progress bar will measure the strength. Sufficient strength is reached when the bar turns green.</p><p>Password strength is judged using the following:</p><ul class="pwddetails"><li>Minimum 8 characters in length</li>\n<li>Contains a sufficient combination of the following items:\n<ul>\n<li>UPPERCASE letters</li>\n<li>Numbers</li>\n<li>Symbols _!@#$%^&*()</li>\n</ul>\n</li>\n</ul>\n',idx:this.accordion_count++,show:null}),p+="</div><!-- pw-progress -->\n"),p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"textarea"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",("variables"===a||"extra_vars"===a||"inventory_variables"===a||"source_vars"===a)&&(p+='<div class="parse-selection" id="'+this.form.name+"_"+a+'_parse_type">Parse as: <input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="yaml"> <span class="parse-label">YAML</span>\n',p+='<input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="json"> <span class="parse-label">JSON</span>\n',p+="</div>\n"),p+="<textarea ",p+=b.rows?this.attr(b,"rows"):"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+="></textarea>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"select"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<select ",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=this.attr(b,"ngOptions"),p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.multiSelect?"multiple ":"",p+=b.readonly?"readonly ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=">\n",p+='<option value="">',p+=b.defaultOption?b.defaultOption:"Choose a "+b.label.toLowerCase(),p+="</option>\n",p+="</select>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"number"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<input ",p+=b.spinner?"":'type="text" ',p+='" value="'+b["default"]+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.slider?'ng-slider="'+a+'" ':"",p+=b.spinner?'ng-spinner="'+a+'" ':"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=i(b,a,this.form),p+=b.min||0===b.min?this.attr(b,"min"):"",p+=b.max?this.attr(b,"max"):"",p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.slider?'id="'+a+'-number"':b.id?this.attr(b,"id"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly?"readonly ":"",p+=b.integer?"integer ":"",p+=b.disabled?'data-disabled="true" ':"",p+=" >\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(void 0!==b.min||void 0!==b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be an integer between '+b.min+" and ",p+=void 0!==b.max?b.max:"unlimited",p+="</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"checkbox_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="checkbox-group" ',p+='id="'+this.form.name+"_"+a+'_chbox_group" ',p+=">\n",m=0;m<b.fields.length;m++)p+=j(this.form,b.fields[m],b.fields[m].name,m);
("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(b.min||b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be in range '+b.min+" to "+b.max+"</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox-group -->\n",p+="</div>\n"}if("checkbox"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="checkbox">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+=j(this.form,b,a,void 0,!1),p+=b.icon?h(b.icon):"",p+='<span class="label-text">'+b.label+"</span>",p+=b.awPopOver?this.attr(b,"awPopOver",a):"",p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox -->\n",q&&(p+="</div>\n")),"radio_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",m=0;m<b.options.length;m++)p+='<label class="radio-inline" ',p+=b.options[m].ngShow?this.attr(b.options[m],"ngShow"):"",p+=">",p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.options[m].value+'" ',p+='ng-model="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.ngDisabled?this.attr(b,"ngDisabled"):"",p+=" > "+b.options[m].label+"\n",p+="</label>\n";("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"}"radio"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="radio">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.value+'" ',p+='ng-model="'+b.ngModel+'" ',p+=b.ngChange?g(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+=b.ngDisabled?g(b,"ngDisabled"):"",p+=" > ",p+=b.label,p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- radio -->\n",q&&(p+="</div>\n")),"lookup"!==b.type||void 0!==b.excludeMode&&b.excludeMode===c.mode||(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="input-group">\n',p+='<span class="input-group-btn">\n',p+='<button type="button" class="lookup-btn btn btn-default" '+this.attr(b,"ngClick")+'><i class="fa fa-search"></i></button>\n',p+="</span>\n",p+='<input type="text" class="form-control input-medium lookup" ',p+='ng-model="'+b.sourceModel+"_"+b.sourceField+'" ',p+='name="'+b.sourceModel+"_"+b.sourceField+'" ',p+='class="form-control" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.id?this.attr(b,"id"):"",p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=" awlookup >\n",p+="</div>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.required">A value is required!</div>\n'),p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.awlookup">Value not found</div>\n',p+='<div class="error api-error" ng-bind="'+b.sourceModel+"_"+b.sourceField+'_api_error"></div>\n',p+="</div>\n"),"custom"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<div ",p+='id="'+d.name+"_"+a+'" ',p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+=">\n",p+=b.control,p+="</div>\n",p+="</div>\n"),p+="</div>\n"}return p},getActions:function(a){var b,c='<div class="list-actions">\n';for(b in this.form.actions)("all"===this.form.actions[b].mode||this.form.actions[b].mode===a.mode)&&(c+=this.button({btn:this.form.actions[b],action:b,toolbar:!0}));return c+="</div>\n"},breadCrumbs:function(a,c){var d,e,f="";if(f+='<div class="nav-path">\n',f+='<ul class="breadcrumb">\n',f+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',c){e=b.path().replace(/^\//,"").split("/"),2===e.length&&(f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n"),f+='<li class="active"> </li>\n',f+="</ul>\n",f+='<div class="dropdown">\n';for(d in c)if(c[d].active){f+='<a href="" class="toggle" ',f+='data-toggle="dropdown" ',f+=">"+c[d].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}f+='<ul class="dropdown-menu" role="menu">\n';for(d in c)f+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+c[d].href+'" ',f+=">",f+='<i class="fa fa-check" style="visibility: ',f+=c[d].active?"visible":"hidden",f+='"></i> ',f+=c[d].listLabel?c[d].listLabel:c[d].label,f+="</a></li>\n";f+="</ul>\n",f+="</div><!-- dropdown -->\n",f+="</div><!-- nav-path -->\n"}else f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n</ul>\n</div><!-- nav-path -->\n";return f},build:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p="";if(this.modal||void 0!==a.breadCrumbs&&a.breadCrumbs!==!0||(p+=this.form.navigationLinks?this.breadCrumbs(a,this.form.navigationLinks):this.breadCrumbs(a)),!this.modal&&this.form.statusFields){if(p+='<div class="well">\n',this.form.statusActions){p+='<div class="list-actions">\n';for(c in this.form.statusActions)b=this.form.statusActions[c],p+=this.button({btn:b,action:c,toolbar:!0});p+="</div>\n"}p+='<div class="form status-fields">\n';for(f in this.form.statusFields)g=this.form.statusFields[f],p+=this.buildField(f,g,a,this.form);p+="</div><!-- status fields -->\n",p+="</div><!-- well -->\n"}if(this.form.fieldsAsHeader){p+='<div class="well">\n',p+='<form class="form-inline" name="'+this.form.name+'_form" id="'+this.form.name+'_form" novalidate >\n';for(f in this.form.fields)g=this.form.fields[f],p+=this.headerField(f,g,a);p+="</form>\n",p+="</div>\n"}else{if(this.form.collapse&&this.form.collapseMode===a.mode&&(p+='<div id="'+this.form.name+'-collapse-0" ',p+=this.form.collapseOpen?'data-open="true" ':"",p+='class="jqui-accordion">\n',p+="<h3>"+this.form.collapseTitle+"</h3>\n",p+="<div>\n"),!this.modal&&this.has("well")&&(p+='<div class="well">\n'),!this.modal&&this.form.actions&&(p+=this.getActions(a)),!a.modal&&this.form.showTitle){if(p+='<div class="form-title">',p+="edit"===a.mode?this.form.editTitle:this.form.addTitle,this.has("titleActions")){p+='<div class="title-actions pull-right">\n';for(d in this.form.titleActions)p+=this.button({btn:this.form.titleActions[d],action:d,toolbar:!0});p+="</div>\n"}p+="</div>\n",p+='<hr class="form-title-hr">\n'}if(p+='<form class="',p+=this.form.horizontal?"form-horizontal":"",p+=this.form["class"]?" "+this.form["class"]:"",p+='" name="'+this.form.name+'_form" id="'+this.form.name+'_form" autocomplete="off" novalidate>\n',p+='<div ng-show="flashMessage != null && flashMessage != undefined" class="alert alert-info">{{ flashMessage }}</div>\n',this.form.twoColumns){p+='<div class="row">\n',p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],1===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 1 -->\n",p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],2===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 2 -->\n",p+="</div>\n"}else if(this.form.tabs){for(p+='<ul id="'+this.form.name+'_tabs" class="nav nav-tabs">\n',h=0;h<this.form.tabs.length;h++)k=this.form.tabs[h],p+="<li",0===h&&(p+=' class="active"'),p+='><a href="#'+k.name+'" data-toggle="tab">'+k.label+"</a></li>\n";for(p+="</ul>\n",p+='<div class="tab-content">\n',h=0;h<this.form.tabs.length;h++){k=this.form.tabs[h],p+='<div class="tab-pane',0===h&&(p+=" active"),p+='" id="'+k.name+'">\n';for(f in this.form.fields)this.form.fields[f].tab===k.name&&(p+=this.buildField(f,this.form.fields[f],a,this.form));p+="</div>\n"}p+="</div>\n"}else{i="",j="";for(f in this.form.fields)g=this.form.fields[f],a.modal&&g.excludeModal||(g.group&&g.group!==j&&(""!==j&&(p+="</div>\n"),p+='<div class="well">\n',p+="<h5>"+g.group+"</h5>\n",j=g.group),g.section&&g.section!==i&&(""!==i?p+="</div>\n":(p+="</div>\n",p+='<div id="'+this.form.name+'-collapse" class="jqui-accordion-modal">\n'),l=this.form[g.section+"Show"]?' ng-show="'+this.form[g.section+"Show"]+'"':"",p+="<h3"+l+">"+g.section+"</h3>\n",p+="<div"+l+">\n",i=g.section),p+=this.buildField(f,g,a,this.form));""!==i&&(p+="</div>\n</div>\n"),""!==j&&(p+="</div>\n")}if(!this.modal&&this.has("buttons")){this.form.twoColumns&&(p+='<div class="row">\n',p+='<div class="col-lg-12">\n',p+="<hr />\n"),p+='<div class="buttons" ',p+='id="'+this.form.name+'_controls" ',p+=">\n",this.form.horizontal&&(m=2,this.form.buttons.labelClass&&(m=parseInt(this.form.buttons.labelClass.replace(/[A-Z,a-z,-]/g,""))),n=12-m,p+='<div class="col-lg-offset-'+m+" col-lg-"+n+">\n");for(d in this.form.buttons)"object"==typeof this.form.buttons[d]&&(e=this.form.buttons[d],"save"===d&&(e.label="Save",e["class"]="btn-success"),"reset"===d&&(e.label="Reset",e["class"]="btn-default"),p+='<button type="button" ',p+='class="btn btn-sm',p+=e["class"]?" "+e["class"]:"",p+='" ',p+='id="'+this.form.name+"_"+d+'_btn" ',e.ngClick&&(p+=this.attr(e,"ngClick")),e.ngDisabled&&("reset"!==d?(p+='ng-disabled="'+this.form.name+"_form.$pristine || "+this.form.name+"_form.$invalid",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" '):(p+='ng-disabled="'+this.form.name+"_form.$pristine",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" ')),p+=">",p+=o({action:d}),p+=" "+e.label+"</button>\n");p+="</div><!-- buttons -->\n",this.form.horizontal&&(p+="</div>\n"),this.form.twoColumns&&(p+="</div>\n",p+="</div>\n")}p+="</form>\n",!this.modal&&this.has("well")&&(p+="</div>\n"),this.form.collapse&&this.form.collapseMode===a.mode&&(p+="</div>\n",p+="</div>\n")}return!this.modal&&a.related&&this.form.related&&(p+=this.buildCollections(a)),p},buildCollections:function(a){var b,c,d,g,h,j,k,l=1,m=this.form,n='<div id="'+this.form.name+"-collapse-"+l+'" class="jqui-accordion">\n';for(g in m.related)if("collection"===m.related[g].type){n+='<h3 class="'+g+'_collapse">'+m.related[g].title+"<h3>\n",n+="<div>\n",m.related[g].instructions&&(n+='<div class="alert alert-info alert-block">\n',n+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',n+="<strong>Hint: </strong>"+m.related[g].instructions+"\n",n+="</div>\n"),n+='<div class="well">\n',n+='<div class="row">\n',n+=e({iterator:m.related[g].iterator,template:m.related[g],mini:!0}),n+='<div class="col-lg-8">\n',n+='<div class="list-actions">\n';for(b in m.related[g].actions)h=m.related[g].actions[b],n+=this.button({btn:h,action:b,toolbar:!0});n+="</div>\n",n+="</div>\n",n+="</div><!-- row -->\n",n+='<div class="list">\n',n+='<table id="'+g+'_table" class="'+m.related[g].iterator+' table table-condensed table-hover">\n',n+="<thead>\n",n+="<tr>\n",n+=void 0===m.related[g].index||m.related[g].index!==!1?"<th>#</th>\n":"";for(d in m.related[g].fields)n+='<th class="list-header" id="'+m.related[g].iterator+"-"+d+'-header" ng-click="sort(\''+m.related[g].iterator+"', '"+d+"')\">"+m.related[g].fields[d].label,n+=' <i class="',n+=m.related[g].fields[d].key?m.related[g].fields[d].desc?"icon-sort-down":"icon-sort-up":"icon-sort",n+='"></i></a></th>\n';n+="<th></th>\n",n+="</tr>\n",n+="</thead>",n+="<tbody>\n",n+='<tr ng-repeat="'+m.related[g].iterator+" in "+g+'" >\n',(void 0===m.related[g].index||m.related[g].index!==!1)&&(n+="<td>{{ $index + (("+m.related[g].iterator+"_page - 1) * "+m.related[g].iterator+"_page_size) + 1 }}.</td>\n"),j=1,k=m.related[g].base?m.related[g].base:g,k=k.replace(/^\//,"");for(d in m.related[g].fields)j++,n+=i({list:m.related[g],fld:d,options:a,base:k});n+='<td class="actions">';for(b in m.related[g].fieldActions)c=m.related[g].fieldActions[b],n+="<a ",n+=c.href?'href="'+c.href+'" ':"",n+=c.ngClick?this.attr(c,"ngClick"):"",n+=c.ngHref?this.attr(c,"ngHref"):"",n+=c.ngShow?this.attr(c,"ngShow"):"",n+=">",n+=o({action:b}),n+=c.label?" "+c.label:"",n+="</a>";n+="</td>",n+="</tr>\n",n+='<tr class="info" ng-show="'+m.related[g].iterator+"Loading == false && ("+g+" == null || "+g+'.length == 0)">\n',n+='<td colspan="'+j+'"><div class="alert alert-info">No records matched your search.</div></td>\n',n+="</tr>\n",n+='<tr class="info" ng-show="'+m.related[g].iterator+'Loading == true">\n',n+='<td colspan="'+j+'"><div class="alert alert-info">Loading...</div></td>\n',n+="</tr>\n",n+="</tbody>\n",n+="</table>\n",n+="</div>\n",n+="</div>\n",n+=f({set:g,iterator:m.related[g].iterator,mini:!0}),n+="</div>\n",l++}return n+="</div>\n",n+="</div>\n"}}}]),angular.module("GeneratorHelpers",["GeneratorHelpers"]).factory("Attr",function(){return function(a,b,c){var d,e,f,g="string"==typeof a[b]?a[b].replace(/[\'\"]/g,"&quot;"):a[b];if(/^ng/.test(b))f="ng-"+b.replace(/^ng/,"").toLowerCase()+'="'+g+'" ';else if(/^data|^aw/.test(b)&&"awPopOver"!==b){for(e="",d=0;d<b.length;d++)e+=/[A-Z]/.test(b.charAt(d))?"-"+b.charAt(d).toLowerCase():b.charAt(d);f=e+'="'+g+'" '}else switch(b){case"trueValue":f='ng-true-value="'+g+'" ';break;case"falseValue":f='ng-false-value="'+g+'" ';break;case"awPopOver":f='<a id="awp-'+c+'" href="" aw-pop-over=\''+g+"' ",f+=a.dataPlacement?'data-placement="'+a.dataPlacement.replace(/[\'\"]/g,"&quot;")+'" ':"",f+=a.dataContainer?'data-container="'+a.dataContainer.replace(/[\'\"]/g,"&quot;")+'" ':"",f+='class="help-link" ',f+='><i class="fa fa-question-circle"></i></a> ';break;case"columnShow":f='ng-show="'+g+'" ';break;case"icon":f='<i class="fa fa-'+g,f+=a.iconSize?" "+a.iconSize:"",f+='"></i>';break;case"autocomplete":f='autocomplete="',f+=g?"true":"false",f+='" ';break;default:f=b+'="'+g+'" '}return f}}).factory("Icon",function(){return function(a){return'<i class="fa '+a+'"></i> '}}).factory("SelectIcon",["Icon",function(a){return function(b){var c,d=b.action,e=b.size;switch(d){case"help":c="fa-question-circle";break;case"add":case"create":c="fa-plus";break;case"edit":c="fa-pencil";break;case"delete":c="fa-trash-o";break;case"group_update":c="fa-exchange";break;case"scm_update":c="fa-cloud-download";break;case"cancel":c="fa-minus-circle";break;case"run":case"rerun":case"submit":c="fa-rocket";break;case"stream":c="fa-clock-o";break;case"refresh":c="fa-refresh";break;case"close":c="fa-arrow-left";break;case"save":c="fa-check-square-o";break;case"properties":c="fa-wrench";break;case"reset":c="fa-undo";break;case"view":c="fa-search-plus";break;case"sync_status":c="fa-cloud"}return c+=e?" "+e:"",a(c)}}]).factory("Button",["Attr","SelectIcon",function(a,b){return function(c){var d=c.btn,e=c.action,f=c.toolbar,g="";return f&&(d.class="btn-xs btn-primary",d.iconSize="fa-lg",delete d.label),g+='<button type="button" ',g+='class="btn',g+=d["class"]?" "+d["class"]:" btn-sm",g+=d.awPopOver?" help-link-white":"",g+='" ',g+=d.ngClick?a(d,"ngClick"):"",d.id?g+='id="'+d.id+'" ':e&&(g+='id="'+e+'_btn" '),g+=d.ngHide?a(d,"ngHide"):"",g+=d.awToolTip?a(d,"awToolTip"):"",g+=d.awToolTip&&void 0===d.dataPlacement?'data-placement="top" ':"",g+=d.awPopOver?'aw-pop-over="'+d.awPopOver.replace(/[\'\"]/g,"&quot;")+'" ':"",g+=d.dataPlacement?a(d,"dataPlacement"):"",g+=d.dataContainer?a(d,"dataContainer"):"",g+=d.dataTitle?a(d,"dataTitle"):"",g+=d.ngShow?a(d,"ngShow"):"",g+=d.ngHide?a(d,"ngHide"):"",g+=d.ngDisabled?a(d,"ngHide"):"",g+=d.ngClass?a(d,"ngClass"):"",g+=d.awTipPlacement?a(d,"awTipPlacement"):"",g+=" >",g+=d.img?'<img src="'+$basePath+"img/"+d.img+'" style="width: 12px; height: 12px;" >':"",g+=b({action:e,size:d.iconSize}),g+=d.label?" "+d.label:"",g+="</button> "}}]).factory("NavigationLink",["Attr","Icon",function(a,b){return function(c){var d="<a ";return d+=c.href?a(c,"href"):"",d+=c.ngClick?a(c,"ngClick"):"",d+=c.ngShow?a(c,"ngShow"):"",d+=">",d+=c.icon?b(c.icon):"",d+=c.label?c.label:"",d+="</a>\n"}}]).factory("DropDown",["Attr","Icon",function(a,b){return function(a){var c,d,e,f,g=a.list,h=a.fld;for(e=a.field?a.field:a.type?g[a.type][h]:g.fields[h],f=e.label.replace(/ /g,"_"),d=void 0===a.td||a.td!==!1?'<td class="'+h+'-column">\n':"",d+='<div class="dropdown">\n',d+='<a href="" class="toggle',d+='" ',d+=e.ngDisabled?'ng-disabled="'+e.ngDisabled+'" ':"",d+='data-toggle="dropdown" ',d+=">",d+=e.icon?b(e.icon):"",d+=e.label,d+=' <span class="caret"></span></a>\n',d+='<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu1">\n',c=0;c<e.options.length;c++)d+='<li role="presentation"><a role="menuitem" tabindex="-1" ',d+='ng-click="'+e.options[c].ngClick+'" ',d+=e.options[c].ngShow?'ng-show="'+e.options[c].ngShow+'" ':"",d+=e.options[c].ngHide?'ng-hide="'+e.options[c].ngHide+'" ':"",d+='href="">'+e.options[c].label+"</a></li>\n";return d+="</ul>\n",d+="</div>\n",d+=void 0===a.td||a.td!==!1?"</td>\n":""}}]).factory("BadgeCount",[function(){return function(a){var b,c=a.list,d=a.fld,e=c.fields[d];return b='<td class="'+d+"-column",b+=e.columnClass?" "+e.columnClass:"",b+='">\n',b+='<a ng-href="'+e.ngHref+'" aw-tool-tip="'+e.awToolTip+'"',b+=e.dataPlacement?' data-placement="'+e.dataPlacement+'"':"",b+=">",b+='<span class="badge',b+=e["class"]?" "+e["class"]:"",b+='">',b+="{{ "+c.iterator+"."+d+" }}",b+="</span>",b+=e.badgeLabel?" "+e.badgeLabel:"",b+="</a>\n",b+="</td>\n"}}]).factory("Badge",[function(){return function(a){var b,c="";if(a.badges)for(b=0;b<a.badges.length;b++)a.badges[b].toolTip&&(c+='<a href="" aw-tool-tip="'+a.badges[b].toolTip+'"',c+=a.badges[b].toolTipPlacement?' data-placement="'+a.badges[b].toolTipPlacement+'"':"",c+=a.badges[b].badgeShow?' ng-show="'+a.badges[b].badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badges[b].badgeShow?'ng-show="'+a.badges[b].badgeShow+'" ':"",c+=' class="field-badge '+a.badges[b].icon,c+=a.badges[b].badgeClass?" "+a.badges[b].badgeClass:"",c+='"></i>',a.badges[b].toolTip&&(c+="</a>"),c+="\n";else a.badgeToolTip&&(c+="<a ",c+=a.badgeNgHref?'ng-href="'+a.badgeNgHref+'" ':'href=""',c+=a.ngClick?'ng-click="'+a.ngClick+'" ':"",c+=' aw-tool-tip="'+a.badgeToolTip+'"',c+=a.badgeTipPlacement?' data-placement="'+a.badgeTipPlacement+'"':"",c+=a.badgeTipWatch?' data-tip-watch="'+a.badgeTipWatch+'"':"",c+=a.badgeShow?' ng-show="'+a.badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badgeShow?'ng-show="'+a.badgeShow+'" ':"",c+=' class="field-badge '+a.badgeIcon,c+=a.badgeClass?" "+a.badgeClass:"",c+='"></i>',a.badgeToolTip&&(c+="</a>"),c+="\n";return c}}]).factory("Breadcrumbs",["Attr",function(a){return function(b){var c,d,e=b.list,f=b.mode,g="";if(g+='<div class="nav-path">\n',g+='<ul class="breadcrumb" id="breadcrumb-list">\n',g+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',e.navigationLinks){d=e.navigationLinks,d.ngHide?(g+='<li class="active" ng-show="'+d.ngHide+'">',g+=e.editTitle,g+="</li>\n",g+='<li class="active" ng-hide="'+d.ngHide+'"> </li>\n'):(g+='<li class="active"> </li>\n',g+="</ul>\n"),g+='<div class="dropdown" ',g+=d.ngHide?a(d,"ngHide"):"",g+=">\n";for(c in d)if("object"==typeof d[c]&&d[c].active){g+='<a href="" class="toggle" ',g+='data-toggle="dropdown" ',g+=">"+d[c].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}g+='<ul class="dropdown-menu" role="menu">\n';for(c in d)"object"==typeof d[c]&&(g+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+d[c].href+'" ',g+=">",g+='<i class="fa fa-check" style="visibility: ',g+=d[c].active?"visible":"hidden",g+='"></i> ',g+=d[c].label,g+="</a></li>\n");g+="</ul>\n",g+="</div><!-- dropdown -->\n",g+="</div><!-- nav-path -->\n"}else g+='<li class="active">',g+="select"===f?e.selectTitle:e.editTitle,g+="</li>\n</ul>\n</div>\n";return g}}]).factory("Column",["Attr","Icon","DropDown","Badge","BadgeCount",function(a,b,c,d,e){return function(f){var g,h=f.list,i=f.fld,j=f.options,k=f.base,l=h.fields[i],m="";return void 0!==l.type&&"DropDown"===l.type?m=c(f):"badgeCount"===l.type?m=e(f):(m+='<td class="'+i+"-column",m+=l["class"]?" "+l["class"]:"",m+=l.columnClass?" "+l.columnClass:"",m+='" ',m+=l.ngClass?a(l,"ngClass"):"",m+="lookup"===j.mode||"select"===j.mode?' ng-click="toggle_'+h.iterator+"({{ "+h.iterator+'.id }})"':"",m+=l.columnShow?a(l,"columnShow"):"",m+=l.ngBindHtml?'ng-bind-html-unsafe="'+l.ngBindHtml+'" ':"",m+=">\n",m+=l.ngShow?"<span "+a(l,"ngShow")+">":"","lookup"!==j.mode&&(l.badges||l.badgeIcon&&l.badgePlacement&&"left"===l.badgePlacement)&&(m+=d(l)),h.hasChildren&&l.hasChildren&&(m+='<div class="level level-{{ '+h.iterator+'.event_level }}"><a href="" ng-click="{{ '+h.iterator+'.ngclick }}"> <i class="{{ '+h.iterator+'.ngicon }}"></i></a></div>'),"groups"===h.name&&(m+='<div class="group-name">'),"hosts"===h.name&&(m+='<div class="host-name">'),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(g=!1,l.linkTo?(m+='<a href="'+l.linkTo+'" ',g=!0):l.ngClick?(m+='<a href=""'+a(l,"ngClick")+" ",g=!0):l.ngHref?(m+='<a ng-href="'+l.ngHref+'" ',g=!0):(l.link||l.key&&(void 0===l.link||l.link))&&(m+='<a href="#/'+k+"/{{"+h.iterator+'.id }}" ',g=!0),l.awDroppable&&(m+=a(l,"awDroppable"),m+=l.dataAccept?a(l,"dataAccept"):""),l.awDraggable&&(m+=a(l,"awDraggable"),m+=l.dataContainment?a(l,"dataContainment"):"",m+=l.dataTreeId?a(l,"dataTreeId"):"",m+=l.dataGroupId?a(l,"dataGroupId"):"",m+=l.dataHostId?a(l,"dataHostId"):"",m+=l.dataType?a(l,"dataType"):""),l.awToolTip&&(m+=a(l,"awToolTip"),m+=l.dataPlacement?a(l,"dataPlacement"):"",m+=l.dataTipWatch?a(l,"dataTipWatch"):""),m+=g?">":""),l.ngShowIcon?m+='<i ng-show="'+l.ngShowIcon+'" class="'+l.icon+'"></i> ':l.icon&&(m+=b(l.icon)+" "),l.ngBindHtml||void 0!==l.showValue&&l.showValue!==!0||(m+=l.ngBind?"{{ "+l.ngBind+" }}":"{{"+h.iterator+"."+i+"}}"),l.text&&(m+=l.text),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(m+="</a>"),("hosts"===h.name||"groups"===h.name)&&(m+="</div>"),m+=l.ngShow?"</span>":"",m+=l.appendHTML?'<div ng-show="'+l.appendHTML+' !== null" ng-bind-html-unsafe="'+l.appendHTML+'" class="level-{{ '+h.iterator+'.event_level }}-detail" ></div>\n':"","lookup"!==j.mode&&l.badgeIcon&&l.badgePlacement&&"left"!==l.badgePlacement&&(m+=d(l))),m+="</td>\n"}}]).factory("HelpCollapse",function(){return function(a){var b=a.hdr,c=a.content,d=a.show,e=a.idx,f=a.bind,g="";return g+='<div class="panel-group collapsible-help" ',g+=d?'ng-show="'+d+'"':"",g+=">\n",g+='<div class="panel panel-default">\n',g+='<div class="panel-heading" ng-click="accordionToggle(\'#accordion'+e+"')\">\n",g+='<h4 class="panel-title">\n',g+=b,g+='<i class="fa fa-minus pull-right collapse-help-icon" id="accordion'+e+'-icon"></i>',g+="</h4>\n",g+="</div>\n",g+='<div id="accordion'+e+'" class="panel-collapse collapse in">\n',g+='<div class="panel-body" ',g+=f?'ng-bind-html-unsafe="'+f+'" ':"",g+=">\n",g+=f?"":c,g+="</div>\n",g+="</div>\n",g+="</div>\n",g+="</div>\n"}}).factory("SearchWidget",function(){return function(a){var b,c,d,e=a.iterator,f=a.template,g=a.mini,h="",i=a.searchWidgets?a.searchWidgets:1;for(c=1;i>=c;c++){d=1===c?"":c,h+='<div class="',h+=a.size?a.size:"col-lg-4 col-md-6 col-sm-12 col-xs-12",h+='" id="search-widget-container'+d+'">\n',h+='<div class="input-group',h+=g?" input-group-sm":" input-group-sm",h+='">\n',h+='<div class="input-group-btn dropdown">\n',h+='<button type="button" ',h+='id="search_field_ddown" ',h+='class="btn btn-default ',h+='dropdown-toggle" data-toggle="dropdown"',h+=">\n",h+='<span ng-bind="'+e+"SearchFieldLabel"+d+'"></span>\n',h+='<span class="caret"></span>\n',h+="</button>\n",h+='<ul class="dropdown-menu" id="'+e+"SearchDropdown"+d+'">\n';for(b in f.fields)void 0!==f.fields[b].searchable&&f.fields[b].searchable!==!0||(void 0!==f.fields[b].searchWidget&&1!==f.fields[b].searchWidget||1!==c)&&f.fields[b].searchWidget!==c||(h+='<li><a href="" ng-click="setSearchField(\''+e+"','",h+=b+"','",h+=f.fields[b].searchLabel?f.fields[b].searchLabel+"', "+c+')">'+f.fields[b].searchLabel+"</a></li>\n":f.fields[b].label.replace(/<br \/>/g," ")+"', "+c+')">'+f.fields[b].label.replace(/<br \/>/g," ")+"</a></li>\n");h+="</ul>\n",h+="</div><!-- input-group-btn -->\n",h+='<select id="search_value_select" ng-show="'+e+"SelectShow"+d+'" ng-model="'+e+"SearchSelectValue"+d+'" ng-change="search(\''+e+"')\" ",h+='ng-options="c.name for c in '+e+"SearchSelectOpts"+d+'" class="form-control search-select',h+='"></select>\n',h+='<input id="search_value_input" type="text" ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+'" class="form-control" ng-model="'+e+"SearchValue"+d+'" aw-placeholder="'+e+"SearchPlaceholder"+d+'" type="text" ng-disabled="'+e+"InputDisable"+d+" || "+e+"HoldInput"+d+'" ng-keypress="startSearch($event,\''+e+"')\">\n",h+='<div class="input-group-btn" ng-show="'+e+"SelectShow"+d+'" >\n',h+='<button type="button" class="btn btn-default btn-small" ng-click="resetSearch(\''+e+'\')" aw-tool-tip="Clear the search" data-placement="top"><i class="fa fa-times"></i></button>\n',h+="</div><!-- input-group-btn -->\n",h+="</div><!-- input-group -->\n",h+='<a class="search-reset-start" ng-click="resetSearch(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || "+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-times"></i></a>\n',h+='<a class="search-reset-start" ng-click="search(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || !"+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-search"></i></a>\n',h+="</div>\n"}return h}}).factory("PaginateWidget",[function(){return function(a){var b=a.iterator,c=a.set,d="";return d+="<!-- Paginate Widget -->\n",d+='<div class="row page-row">\n',d+='<div class="col-lg-8">\n',d+='<ul class="pagination" ng-hide="'+b+"Loading || "+b+'_num_pages <= 1">\n',d+='<li ng-hide="'+b+'_page -5 <= 1 "><a href ng-click="getPage(1,\''+c+"','"+b+'\')"><i class="fa fa-angle-double-left"></i></a></li>\n',d+='<li ng-hide="'+b+'_page -1 <= 0"><a href ng-click="getPage('+b+"_page - 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-left"></i></a></li>\n',d+='<li ng-repeat="page in '+b+'_page_range" ng-class="pageIsActive(page,\''+b+"')\"><a href ng-click=\"getPage(page,'"+c+"','"+b+"')\">{{ page }}</a></li>\n",d+='<li ng-hide="'+b+"_page + 1 > "+b+'_num_pages"><a href ng-click="getPage('+b+"_page + 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-right"></i></a></li>\n',d+='<li ng-hide="'+b+"_page +4 >= "+b+'_num_pages"><a href ng-click="getPage('+b+"_num_pages,'"+c+"','"+b+'\')"><i class="fa fa-angle-double-right"></i></a></li>\n',d+="</ul>\n",d+="</div>\n",d+='<div class="col-lg-4 col-md-4" ng-hide="'+b+"_mode == 'lookup'\">\n",d+='<div class="page-label">\n',d+="Page {{ "+b+"_page }} of {{ "+b+"_num_pages }} for {{ "+b+"_total_rows | number:0 }} "+c+".",d+="</div>\n",d+="</div>\n",d+="</div>\n"}}]),angular.module("License",["RestServices","Utilities","FormGenerator","PromptDialog","LicenseFormDefinition"]).factory("ViewLicense",["$location","$rootScope","GenerateForm","Rest","Alert","GetBasePath","ProcessErrors","FormatDate","Prompt","Empty","LicenseForm",function(a,b,c,d,e,f,g,h,i,j,k){return function(){var a,e=f("config"),l=c,m=angular.copy(k);d.setUrl(e),d.get().success(function(b){var c,d,e,f,g,k,n,o;for(c in m.fields)"time_remaining"!==c&&"license_status"!==c&&j(b.license_info[c])&&delete m.fields[c];(b.license_info.is_aws||j(b.license_info.license_date))&&(delete m.fields.license_date,delete m.fields.time_remaining),a=l.inject(m,{mode:"edit",modal:!0,related:!1}),l.reset(),a.formModalAction=function(){$("#form-modal").modal("hide")},a.formModalActionLabel="OK",a.formModalCancelShow=!1,a.formModalInfo="Purchase/Extend License",a.formModalHeader="Tower License",a.formModalInfoAction=function(){i({hdr:"Tower Licensing",body:'<p>Ansible Tower licenses can be purchased or extended by visiting <a id="license-link" href="http://www.ansible.com/ansible-pricing" target="_blank">the Ansible online store</a>. Would you like to purchase or extend your license now?</p>',"class":"btn-primary",action:function(){var a=$("#license-link").attr("href");window.open(a,"storeWindow")}})};for(c in m.fields)j(b.license_info[c])||(a[c]=b.license_info[c]);a.license_date&&(d=new Date(parseInt(a.license_date)),"1970"===d.getFullYear()&&(d=new Date(1e3*parseInt(a.license_date,10)),a.time_remaining=a.time_remaining+"000"),a.license_date=h(d),e=parseInt(a.time_remaining/864e5,10),f=a.time_remaining-864e5*e,g=parseInt(f/36e5,10),f-=36e5*g,k=parseInt(f/6e4,10),f-=6e4*k,n=parseInt(f/1e3,10),a.time_remaining=e+" days "+("0"+g).slice(-2)+":"+("0"+k).slice(-2)+":"+("0"+n).slice(-2)),a.free_instances_class=parseInt(a.free_instances)<=0?"field-failure":"field-success",o=b.license_info,void 0===o.valid_key||o.valid_key?void 0!==o.demo&&o.demo?(a.license_status="Demo",a.status_color="license-demo"):void 0!==o.date_expired&&o.date_expired?(a.license_status="Expired",a.status_color="license-expired"):void 0!==o.date_warning&&o.date_warning?(a.license_status="Expiration Warning",a.status_color="license-warning"):void 0!==o.free_instances&&parseInt(o.free_instances)<=0?(a.license_status="No available managed hosts",a.status_color="license-invalid"):(a.license_status="Valid",a.status_color="license-valid"):(a.license_status="Invalid",a.status_color="license-invalid")}).error(function(a,c){g(b,a,c,m,{hdr:"Error!",msg:"Failed to retrieve license. GET status: "+c})})}}]),angular.module("ListGenerator",["GeneratorHelpers"]).factory("GenerateList",["$location","$compile","$rootScope","SearchWidget","PaginateWidget","Attr","Icon","Column","DropDown","NavigationLink","Button","SelectIcon","Breadcrumbs",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{setList:function(a){this.list=a},attr:f,icon:g,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},hide:function(){$("#lookup-modal").modal("hide")},button:k,inject:function(a,c){var d;d=angular.element(document.getElementById("lookup"===c.mode?"lookup-modal-body":c.id?c.id:"htmlTemplate")),this.setList(a),d.html(this.build(c)),c.prepend&&d.prepend(c.prepend),c.append&&d.append(c.prepend),this.scope=c.scope?c.scope:d.scope(),b(d)(this.scope),this.scope[a.name]=null,this.scope[a.iterator]=null,$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize");try{$("#help-modal").empty().dialog("destroy")}catch(e){}return"lookup"===c.mode&&(this.scope.formModalActionDisabled=!1,this.scope.lookupHeader=c.hdr,$("#lookup-modal").modal({backdrop:"static",keyboard:!0}),$("#lookup-modal").unbind("hidden.bs.modal"),$(document).bind("keydown",function(a){27===a.keyCode&&$("#lookup-modal").modal("hide")})),this.scope},build:function(b){var c,g,j,k,n,o,p,q,r,s="",t=this.list;if(b.activityStream?(s+='<div class="nav-path">\n',s+='<ul class="breadcrumb">\n',s+='<li ng-repeat="crumb in breadcrumbs"><a href="" ng-click="{{ crumb.ngClick }}">{{ crumb.title }}</a></li>\n',s+='<li class="active">',s+=t.editTitle,s+="</li>\n</ul>\n</div>\n"):"lookup"===b.mode||void 0!==b.breadCrumbs&&!b.breadCrumbs||(s+=m({list:t,mode:b.mode})),"edit"===b.mode&&t.editInstructions&&(s+='<div class="alert alert-info alert-block">\n',s+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',s+="<strong>Hint: </strong>"+t.editInstructions+"\n",s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&!t.well||(s+='<div class="well">\n'),b.activityStream&&(s+='<div class="row">\n',s+='<div class="col-lg-12">\n',s+="<h5>{{ streamTitle }}</h5>\n",s+="</div>\n",s+="</div>\n"),s+='<div class="row">\n',"groups"!==t.name&&(s+=d(b.searchSize?{iterator:t.iterator,template:t,mini:!0,size:b.searchSize,searchWidgets:t.searchWidgets}:"summary"===b.mode?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-6"}:"lookup"===b.mode||void 0!==b.id?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-8"}:{iterator:t.iterator,template:t,mini:!0})),"lookup"!==b.mode){c=a.path().replace(/^\//,"").split("/")[0],s+='<div class="',"groups"===t.name?s+="col-lg-12":b.searchSize?(g=parseInt(b.searchSize.replace(/([A-Z]|[a-z]|\-)/g,"")),g=t.searchWidgets?t.searchWidgets*g:g,s+="col-lg-"+(12-g)):s+="summary"===b.mode?"col-lg-6":void 0!==b.id?"col-lg-4":"col-lg-8 col-md-6",s+='">\n',s+='<div class="list-actions">\n';
for(j in t.actions)("all"===t.actions[j].mode||t.actions[j].mode===b.mode)&&(void 0===t.actions[j].basePaths||t.actions[j].basePaths&&t.actions[j].basePaths.indexOf(c)>-1)&&(s+=this.button({btn:t.actions[j],action:j,toolbar:!0}));"select"===b.mode&&t.selectInstructions&&(k={awPopOver:t.selectInstructions,dataPlacement:"top",dataContainer:"body","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Help",iconSize:"fa-lg"},s+=this.button({btn:k,action:"help",toolbar:!0})),s+="</div><!-- list-acitons -->\n",s+="</div><!-- list-actions-column -->\n"}else s+='<div class="col-lg-7"></div>\n';s+="</div><!-- row -->\n","lookup"!==b.mode&&t.showTitle&&(s+='<div class="form-title">',s+="edit"===b.mode||"summary"===b.mode?t.editTitle:t.addTitle,s+="</div>\n"),s+='<table id="'+t.name+'_table" ',s+='class="table',s+=t["class"]?" "+t["class"]:"",s+="summary"===b.mode||"edit"===b.mode||"lookup"!==b.mode&&!b.id?"":" table-hover-inverse",s+=t.hover?" table-hover":"",s+="summary"===b.mode?" table-summary":"",s+='" ',s+=">\n",s+="<thead>\n",s+="<tr>\n",t.index&&(s+='<th class="col-lg-1 col-md-1 col-sm-1 hidden-xs">#</th>\n');for(n in t.fields)void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+='<th class="list-header',s+=t.fields[n].columnClass?" "+t.fields[n].columnClass:"",s+='" id="',s+=t.fields[n].id?t.fields[n].id:n+"-header",s+='"',s+=t.fields[n].columnShow?' ng-show="'+t.fields[n].columnShow+'" ':"",s+=void 0===t.fields[n].nosort||t.fields[n].nosort!==!0?"ng-click=\"sort('"+n+"')\"":"",s+=">",s+=t.fields[n].label,(void 0===t.fields[n].nosort||t.fields[n].nosort!==!0)&&(s+=' <i class="fa ',s+=t.fields[n].key?t.fields[n].desc?"fa-sort-down":"fa-sort-up":"fa-sort",s+='"></i></a>'),s+="</th>\n");"select"===b.mode||"lookup"===b.mode?s+="<th>Select</th>":"edit"===b.mode&&t.fieldActions&&(s+='<th class="actions-column',s+=t.fieldActions&&t.fieldActions.columnClass?" "+t.fieldActions.columnClass:"",s+='">Actions</th>\n'),s+="</tr>\n",s+="</thead>\n",s+="<tbody>\n",s+='<tr ng-class="'+t.iterator,s+="lookup"===b.mode||"select"===b.mode?".success_class":".active_class",s+='" ',s+='class="'+t.iterator+'_class" ng-repeat="'+t.iterator+" in "+t.name,s+=t.orderBy?" | orderBy:'"+t.orderBy+"'":"",s+=t.filterBy?" | filter: "+t.filterBy:"",s+='"',s+=">\n",t.index&&(s+='<td class="index-column hidden-xs">{{ $index + (('+t.iterator+"_page - 1) * "+t.iterator+"_page_size) + 1 }}.</td>\n"),o=2,c=t.base?t.base:t.name,c=c.replace(/^\//,"");for(n in t.fields)o++,void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+=h({list:t,fld:n,options:b,base:c}));if("select"===b.mode||"lookup"===b.mode)s+='<td><input type="checkbox" ng-model="'+t.iterator+'.checked" name="check_{{'+t.iterator+'.id }}" ng-click="toggle_'+t.iterator+"({{ "+t.iterator+'.id }}, true)" ng-true-value="1" ng-false-value="0" id="check_{{'+t.iterator+'.id}}" /></td>';else if(("edit"===b.mode||"summary"===b.mode)&&t.fieldActions){s+='<td class="actions">';for(p in t.fieldActions)if("columnClass"!==p)if(t.fieldActions[p].type&&"DropDown"===t.fieldActions[p].type)s+=i({list:t,fld:p,options:b,base:c,type:"fieldActions",td:!1});else{q=t.fieldActions[p],s+="<a ",s+=q.href?'href="'+q.href+'" ':"",s+=q.ngHref?'ng-href="'+q.ngHref+'" ':"",s+="cancel"===p?'class="cancel red-txt" ':"",s+=q.awPopOver?'aw-pop-over="'+q.awPopOver+'" ':"",s+=q.dataPlacement?f(q,"dataPlacement"):"",s+=q.dataTitle?f(q,"dataTitle"):"";for(r in q)"ngHref"!==r&&"href"!==r&&"label"!==r&&"icon"!==r&&"class"!==r&&"iconClass"!==r&&"dataPlacement"!==r&&"awPopOver"!==r&&"dataTitle"!==r&&(s+=f(q,r));s+=">",s+=q.iconClass?'<i class="'+q.iconClass+'"></i>':l({action:p}),s+=q.label?" "+t.fieldActions[p].label:"",s+="</a>"}s+="</td>"}return s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+"Loading == false && ("+t.name+" == null || "+t.name+'.length == 0)">\n',s+='<td colspan="'+o+'"><div class="alert alert-info">No records matched your search.</div></td>\n',s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+'Loading == true">\n',s+='<td colspan="'+o+'"><div class="alert alert-info">Loading...</div></td>\n',s+="</tr>\n",s+="</tbody>\n",s+="</table>\n","select"!==b.mode||void 0!==b.selectButton&&!b.selectButton||(s+='<div class="navigation-buttons">\n',s+=' <button class="btn btn-sm btn-primary pull-right" aw-tool-tip="Complete your selection" ng-click="finishSelection()" ng-disabled="disableSelectBtn"><i class="fa fa-check"></i> Select</button>\n',s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&t.well!==!0||(s+="</div>\n"),"groups"!==t.name&&(s+=e("lookup"===b.mode||b.id&&"form-modal-body"===b.id?{set:t.name,iterator:t.iterator}:{set:t.name,iterator:t.iterator})),s}}}]),angular.module("PromptDialog",["Utilities"]).factory("Prompt",[function(){return function(a){var b,c=angular.element(document.getElementById("prompt-modal")),d=c.scope();d.promptHeader=a.hdr,d.promptBody=a.body,d.promptAction=a.action,b=null===a["class"]||void 0===a["class"]?"btn-danger":a["class"],$("#prompt_action_btn").removeClass(b).addClass(b),$(c).modal({backdrop:"static",keyboard:!0,show:!0})}}]),String.prototype.strReverse=function(){var a,b="";for(a=0;a<this.length;a++)b=this.charAt(a)+b;return b};var nScore=0,$AnsibleConfig={tooltip_delay:{show:500,hide:100},debug_mode:!0,password_strength:45,session_timeout:1800};AdminsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","AdminList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","GetBasePath","SelectionInit"],Authenticate.$inject=["$cookieStore","$window","$scope","$rootScope","$location","Authorization","ToggleClass","Alert","Wait","Timer","Empty"],CredentialsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","CredentialList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","GetChoices","Wait","Stream"],CredentialsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","SearchInit","PaginateInit","LookUpInit","UserList","TeamList","GetBasePath","GetChoices","Empty","KindChange","OwnerChange","FormSave"],CredentialsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","Prompt","GetBasePath","GetChoices","KindChange","UserList","TeamList","LookUpInit","Empty","OwnerChange","FormSave","Stream","Wait"],Home.$inject=["$scope","$compile","$routeParams","$rootScope","$location","Wait","ObjectCount","JobStatus","InventorySyncStatus","SCMSyncStatus","ClearScope","Stream","Rest","GetBasePath","ProcessErrors","Button"],HomeGroups.$inject=["$location","$routeParams","HomeGroupList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","GetHostsStatusMsg","GetSyncStatusMsg","ViewUpdateStatus","Stream","GroupsEdit","Wait","Alert","Rest","Empty","InventoryUpdate","Find"],HomeHosts.$inject=["$location","$routeParams","HomeHostList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","SetStatus","ToggleHostEnabled","HostsEdit","Stream","Find","ShowJobSummary"],InventoriesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","InventoryList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Wait","Stream","EditInventoryProperties"],InventoriesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","LookUpInit","GetBasePath","ParseTypeChange","Wait"],InventoriesEdit.$inject=["$scope","$location","$routeParams","$compile","GenerateList","ClearScope","InventoryGroups","InventoryHosts","BuildTree","Wait","GetSyncStatusMsg","InjectHosts","HostsReload","GroupsAdd","GroupsEdit","GroupsDelete","Breadcrumbs","LoadBreadCrumbs","Empty","Rest","ProcessErrors","InventoryUpdate","Alert","ToggleChildren","ViewUpdateStatus","GroupsCancelUpdate","Find","HostsCreate","EditInventoryProperties","HostsEdit","HostsDelete","ToggleHostEnabled","CopyMoveGroup","CopyMoveHost","Stream","GetBasePath","ShowJobSummary","ApplyEllipsis","WatchInventoryWindowResize","HelpDialog","InventoryGroupsHelp","Store"],JobEventsList.$inject=["$filter","$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobEventList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","ToggleChildren","FormatDate","EventView","Refresh","Wait"],JobEventsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobEventsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","FormatDate","EventView","Wait"],JobHostSummaryList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobHostList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Refresh","JobStatusToolTip","Wait"],JobTemplatesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobTemplateList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","PromptPasswords","JobTemplateForm","CredentialList","LookUpInit","SubmitJob","Wait","Stream"],JobTemplatesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","InventoryList","CredentialList","ProjectList","LookUpInit","md5Setup","ParseTypeChange","Wait","Empty"],JobTemplatesEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","ParseTypeChange","JobStatusToolTip","FormatDate","Wait","Stream","Empty","Prompt"],JobsListCtrl.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","SubmitJob","FormatDate","Refresh","JobStatusToolTip","Empty","Wait"],JobsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","FormatDate","JobStatusToolTip","Wait"],OrganizationsList.$inject=["$routeParams","$scope","$rootScope","$location","$log","Rest","Alert","LoadBreadCrumbs","Prompt","GenerateList","OrganizationList","SearchInit","PaginateInit","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],OrganizationsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","Wait"],OrganizationsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","Wait","Stream"],PermissionsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","PermissionList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","CheckAccess","Wait"],PermissionsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],PermissionsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","Prompt","GetBasePath","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],ProjectsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","ProjectList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","ProjectUpdate","ProjectStatus","FormatDate","Refresh","Wait","Stream","GetChoices","Empty"],ProjectsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","LookUpInit","OrganizationList","CredentialList","GetChoices","DebugForm","Wait"],ProjectsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","Authorization","CredentialList","LookUpInit","GetChoices","Empty","DebugForm","Wait","Stream"],TeamsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","TeamList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","SetTeamListeners","GetBasePath","SelectionInit","Wait","Stream"],TeamsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","GetBasePath","LookUpInit","Wait"],TeamsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","LookUpInit","Prompt","GetBasePath","CheckAccess","OrganizationList","Wait","Stream"],UsersList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","UserList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],UsersAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","LookUpInit","OrganizationList","ResetForm","Wait"],UsersEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","GetBasePath","Prompt","CheckAccess","ResetForm","Wait","Stream"],angular.module("ActivityDetailDefinition",[]).value("ActivityDetailForm",{name:"activity",editTitle:"Activity Detail",well:!1,"class":"horizontal-narrow",formFieldSize:"col-lg-10",formLabelSize:"col-lg-2",fields:{user:{label:"Initiated by",type:"text",readonly:!0},operation:{label:"Action",type:"text",readonly:!0},changes:{label:"Changes",type:"textarea",ngHide:"!changes || changes =='' || changes == 'null'",readonly:!0}}}),angular.module("CredentialFormDefinition",[]).value("CredentialForm",{addTitle:"Create Credential",editTitle:"{{ name }}",name:"credential",well:!0,forceListeners:!0,actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"edit"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,autocomplete:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},owner:{label:"Does this credential belong to a team or user?",type:"radio_group",ngChange:"ownerChange()",options:[{label:"User",value:"user",selected:!0},{label:"Team",value:"team"}],awPopOver:"<p>A credential must be associated with either a user or a team. Choosing a user allows only the selected user access to the credential. Choosing a team shares the credential with all team members.</p>",dataTitle:"Owner",dataPlacement:"right",dataContainer:"body"},user:{label:"User that owns this credential",type:"lookup",sourceModel:"user",sourceField:"username",ngClick:"lookUpUser()",ngShow:"owner == 'user'",awRequiredWhen:{variable:"user_required",init:"false"}},team:{label:"Team that owns this credential",type:"lookup",sourceModel:"team",sourceField:"name",ngClick:"lookUpTeam()",ngShow:"owner == 'team'",awRequiredWhen:{variable:"team_required",init:"false"}},kind:{label:"Type",excludeModal:!0,type:"select",ngOptions:"kind.label for kind in credential_kind_options",ngChange:"kindChange()",addRequired:!0,editRequired:!0,helpCollapse:[{hdr:"Select a Credential Type",content:"<dl>\n<dt>AWS</dt>\n<dd>Access keys for Amazon Web Services used for inventory management or deployment.</dd>\n<dt>Machine</dt>\n<dd>Authentication for remote machine access. This can include SSH keys, usernames, passwords, and sudo information. Machine credentials are used when submitting jobs to run playbooks against remote hosts.</dd><dt>Rackspace</dt>\n<dd>Access information for Rackspace Cloud used for inventory management or deployment.</dd>\n<dt>SCM</dt>\n<dd>Used to check out and synchronize playbook repositories with a remote source control management system such as Git, Subversion (svn), or Mercurial (hg). These credentials are used on the Projects tab.</dd>\n</dl>\n"}]},access_key:{label:"Access Key",type:"text",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,apiField:"username"},secret_key:{label:"Secret Key",type:"password",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},username:{labelBind:"usernameLabel",type:"text",ngShow:"kind.value && kind.value !== 'aws'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1},api_key:{label:"API Key",type:"password",ngShow:"kind.value == 'rax'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},password:{label:"Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",ask:!1,clear:!1,associated:"password_confirm",autocomplete:!1},password_confirm:{label:"Confirm Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},ssh_password:{label:"SSH Password",type:"password",ngShow:"kind.value == 'ssh'",ngChange:"clearPWConfirm('ssh_password_confirm')",addRequired:!1,editRequired:!1,ask:!0,clear:!0,associated:"ssh_password_confirm",autocomplete:!1},ssh_password_confirm:{label:"Confirm SSH Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_password",autocomplete:!1},ssh_key_data:{labelBind:"sshKeyDataLabel",type:"textarea",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,"class":"ssh-key-field",rows:10},ssh_key_unlock:{label:"Key Password",type:"password",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('ssh_key_unlock_confirm')",associated:"ssh_key_unlock_confirm",ask:!0,askShow:"kind.value == 'ssh'",clear:!0},ssh_key_unlock_confirm:{label:"Confirm Key Password",type:"password",ngShow:"kind.value == 'ssh'  || kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_key_unlock"},sudo_username:{label:"Sudo Username",type:"text",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,autocomplete:!1},sudo_password:{label:"Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('sudo_password_confirm')",ask:!0,clear:!0,associated:"sudo_password_confirm",autocomplete:!1},sudo_password_confirm:{label:"Confirm Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"sudo_password",autocomplete:!1}},buttons:{save:{label:"Save",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("GroupFormDefinition",[]).value("GroupForm",{addTitle:"Create Group",editTitle:"Edit Group",showTitle:!0,cancelButton:!1,name:"group",well:!0,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",tabs:[{name:"properties",label:"Properties"},{name:"source",label:"Source"}],fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,tab:"properties"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,tab:"properties"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",dataTitle:"Group Variables",dataPlacement:"right",awPopOver:'<p>Variables defined here apply to all child groups and hosts.</p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"properties"},source:{label:"Source",type:"select",ngOptions:"source.label for source in source_type_options",ngChange:"sourceChange()",addRequired:!1,editRequired:!1,tab:"source"},source_path:{label:"Script Path",ngShow:"source && source.value == 'file'",type:"text",awRequiredWhen:{variable:"sourcePathRequired",init:"false"},tab:"source"},credential:{label:"Cloud Credential",type:"lookup",ngShow:"source && source.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,tab:"source"},source_regions:{label:"Regions",type:"text",ngShow:"source && (source.value == 'rax' || source.value == 'ec2')",addRequired:!1,editRequired:!1,awMultiselect:"source_region_choices",dataTitle:"Source Regions",dataPlacement:"right",awPopOver:"<p>Click on the regions field to see a list of regions for your cloud provider. You can select multiple regions, or choose <em>All</em> to include all regions. Tower will only be updated with Hosts associated with the selected regions.</p>",dataContainer:"body",tab:"source"},source_vars:{label:"Source Variables",ngShow:"source && (source.value == 'file' || source.value == 'ec2')",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",parseTypeName:"envParseType",dataTitle:"Source Variables",dataPlacement:"right",awPopOver:'<p>Override variables found in ec2.ini and used by the inventory update script. For a detailed description of these variables <a href="https://github.com/ansible/ansible/blob/devel/plugins/inventory/ec2.ini" target="_blank">view ec2.ini in the Ansible github repo.</a></p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"source"},checkbox_group:{label:"Update Options",type:"checkbox_group",ngShow:"source && (source.value !== '' && source.value !== null)",tab:"source",fields:[{name:"overwrite",label:"Overwrite",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>When checked all child groups and hosts not found on the remote source will be deleted from the local inventory.</p><p>Unchecked any local child hosts and groups not found on the external source will remain untouched by the inventory update process.</p>",dataTitle:"Overwrite",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"overwrite_vars",label:"Overwrite Variables",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>If checked, all variables for child groups and hosts will be removed and replaced by those found on the external source.</p><p>When not checked a merge will be performed, combining local variables with those found on the external source.</p>",dataTitle:"Overwrite Variables",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"update_on_launch",label:"Update on Launch",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this inventory, refresh the inventory from the selected source before executing job tasks.</p>",dataTitle:"Update on Launch",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{labelClass:"col-lg-3",controlClass:"col-lg-5",save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostGroupsFormDefinition",[]).value("HostGroupsForm",{editTitle:"Host Groups",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{groups:{label:"Groups",type:"select",multiple:!0,ngOptions:"group.name for group in inventory_groups",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostFormDefinition",[]).value("HostForm",{addTitle:"Create Host",editTitle:"{{ name }}",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{name:{label:"Host Name",type:"text",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},enabled:{label:"Enabled?",type:"checkbox",addRequired:!1,editRequired:!1,"default":!0,awPopOver:"<p>Indicates if a host is available and should be included in running jobs.</p><p>For hosts that are part of an external inventory, this flag cannot be changed. It will be set by the inventory sync process.</p>",dataTitle:"Host Enabled",dataPlacement:"right",dataContainer:"#form-modal .modal-content",ngDisabled:"has_inventory_sources == true"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"class":"modal-input-xlarge","default":"---",awPopOver:'<p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Host Variables",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},inventory:{type:"hidden",includeOnEdit:!0,includeOnAdd:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("InventoryFormDefinition",[]).value("InventoryForm",{addTitle:"Create Inventory",editTitle:"{{ inventory_name | capitalize }}",name:"inventory",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{inventory_name:{realName:"name",label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},inventory_description:{realName:"description",label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"}},inventory_variables:{realName:"variables",label:"Variables",type:"textarea","class":"span12",addRequired:!1,editRequird:!1,parseTypeName:"inventoryParseType",rows:6,"default":"---",awPopOver:'<p>Enter inventory variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Inventory Variables",dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("JobEventDataDefinition",[]).value("JobEventDataForm",{editTitle:"{{ id }} - {{ event_display }}",name:"job_events",well:!1,"class":"horizontal-narrow",fields:{event_data:{label:!1,type:"textarea",readonly:!0,rows:18,"class":"modal-input-xxlarge"}}}),angular.module("JobEventsFormDefinition",[]).value("JobEventsForm",{name:"job_events",well:!1,forceListeners:!0,fields:{status:{labelClass:"job-{{ status }}",type:"custom",section:"Event",control:'<div class="job-event-status job-{{ status }}"><i class="fa icon-job-{{ status }}"></i> {{ status }}</div>'},id:{label:"ID",type:"text",readonly:!0,section:"Event","class":"span1"},created:{label:"Created On",type:"text",section:"Event",readonly:!0},host:{label:"Host",type:"text",readonly:!0,section:"Event",ngShow:"host !== ''"},play:{label:"Play",type:"text",readonly:!0,section:"Event",ngShow:"play !== ''"},task:{label:"Task",type:"text",readonly:!0,section:"Event",ngShow:"task !== ''"},rc:{label:"Return Code",type:"text",readonly:!0,section:"Results","class":"span1",ngShow:"rc !== ''"},msg:{label:"Msg",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"msg !== ''",rows:10},stdout:{label:"Std Out",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stdout !== ''",rows:10},stderr:{label:"Std Err",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stderr !== ''",rows:10},results:{label:"Results",type:"textarea",section:"Results",readonly:!0,"class":"nowrap",ngShow:"results !== ''",rows:10},start:{label:"Start",type:"text",readonly:!0,section:"Timing",ngShow:"start !== ''"},traceback:{label:!1,type:"textarea",readonly:!0,section:"Traceback","class":"nowrap",ngShow:"traceback !== ''",rows:10},end:{label:"End",type:"text",readonly:!0,section:"Timing",ngShow:"end !== ''"},delta:{label:"Elapsed",type:"text",readonly:!0,section:"Timing",ngShow:"delta !== ''"},module_name:{label:"Name",type:"text",readonly:!0,section:"Module",ngShow:"module_name !== ''"},module_args:{label:"Args",type:"text",readonly:!0,section:"Module",ngShow:"module_args !== ''"}}}),angular.module("JobSummaryDefinition",[]).value("JobSummary",{editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!1,fields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space resizable",ngShow:'result_stdout != ""'},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space resizable",ngShow:'result_traceback != ""'}}}),angular.module("JobTemplateFormDefinition",[]).value("JobTemplateForm",{addTitle:"Create Job Templates",editTitle:"{{ name }}",name:"job_templates",twoColumns:!0,well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body"},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"},column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"true"},column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",awRequiredWhen:{variable:"playbookrequired",init:"true"},column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Machine Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCloudcredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"default":"0",addRequired:!1,editRequired:!1,"class":"input-small",column:1,awPopOver:'<p>The number of parallel or simultaneous processes to use while executing the playbook. 0 signifies the default value from the <a href="http://docs.ansible.com/intro_configuration.html#the-ansible-configuration-file"  target="_blank">ansible configuration file</a>.</p>',dataTitle:"Forks",dataPlacement:"right",dataContainer:"body"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see <a href="http://docs.ansible.com/intro_patterns.html" target="_blank">the Patters top at docs.ansible.com</a>.</p>',dataTitle:"Limit",dataPlacement:"right",dataContainer:"body"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,"default":"---",column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataPlacement:"right",dataContainer:"body"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataPlacement:"right",dataContainer:"body"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting the Tower server using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{jobs:{type:"collection",title:"Jobs",iterator:"job",index:!1,open:!1,actions:{reset:{dataPlacement:"top",icon:"icon-undo",mode:"all","class":"btn-xs btn-primary",awToolTip:"Reset the search filter",ngClick:"resetSearch('job')",iconSize:"large"}},fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},created:{label:"Date",link:!1,searchable:!1},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{}} job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},fieldActions:{edit:{label:"View",ngClick:"edit('jobs', job.id, job.name)",icon:"icon-zoom-in"}}}}}),angular.module("JobFormDefinition",[]).value("JobForm",{addTitle:"Create Job",editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!0,collapse:!0,collapseMode:"edit",collapseTitle:"Job Template",twoColumns:!0,navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",active:!0,ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{name:{label:"Job Template",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":"run",addRequired:!0,editRequired:!0,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body",column:1},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpInventory()",column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpProject()",column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"class":"input-small","default":"0",addRequired:!1,editRequired:!1,column:1,disabled:!0,awPopOver:"<p>The number of parallel or simultaneous processes to use while executing the playbook.</p>",dataContainer:"body",dataTitle:"Forks",dataPlacement:"right"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see the <a href="http://ansible.cc/docs/patterns.html#selecting-targets" target="_blank">Selecting Targets section</a> under Inventory and Patterns  in the Ansible documentation.</p>',dataContainer:"body",dataTitle:"Limit",dataPlacement:"right"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataContainer:"body",dataPlacement:"right"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataContainer:"body",dataPlacement:"right"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')","class":"span12",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting Tower using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{label:"Save",icon:"icon-ok","class":"btn-success",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",label:"Reset",icon:"icon-undo","class":"btn btn-default",ngDisabled:!0}},statusFields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space",ngShow:"result_stdout != ''"},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space",ngShow:"result_traceback != ''"}},statusActions:{refresh:{dataPlacement:"top",icon:"icon-refresh",iconSize:"large",mode:"all","class":"btn-xs btn-primary",awToolTip:"Refresh the page",ngClick:"refresh()"}}}),angular.module("LicenseFormDefinition",[]).value("LicenseForm",{name:"license",well:!1,forceListeners:!0,fields:{license_status:{type:"custom",control:'<div class="license-status" ng-class="status_color"><i class="fa fa-circle"></i> {{ license_status }}</span></div>',readonly:!0,section:"License"},license_key:{label:"Key",type:"textarea","class":"modal-input-xlarge",readonly:!0,section:"License"},license_date:{label:"Expires On",type:"text",readonly:!0,section:"License"},time_remaining:{label:"Time Left",type:"text",readonly:!0,section:"License"},available_instances:{label:"Available",type:"text",readonly:!0,section:"Managed Hosts"},current_instances:{label:"Used",type:"text",readonly:!0,section:"Managed Hosts"},free_instances:{label:"Remaining",type:"text",readonly:!0,section:"Managed Hosts",controlNGClass:"free_instances_class",labelNGClass:"free_instances_class"},company_name:{label:"Company",type:"text",readonly:!0,section:"Contact Info"},contact_name:{label:"Contact",type:"text",readonly:!0,section:"Contact Info"},contact_email:{label:"Contact Email",type:"text",readonly:!0,section:"Contact Info"}}}),angular.module("OrganizationFormDefinition",[]).value("OrganizationForm",{addTitle:"Create Organization",editTitle:"{{ name }}",name:"organization",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",label:"Add",icon:"icon-plus",awToolTip:"Add a new user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit","class":"btn-default",awToolTip:"Edit user"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove user"}}},admins:{type:"collection",title:"Administrators",iterator:"admin",open:!1,base:"/users",actions:{add:{ngClick:"add('admins')",icon:"icon-plus",label:"Add",awToolTip:"Add new administrator"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', admin.id, admin.username)",icon:"icon-edit",awToolTip:"Edit administrator","class":"btn-default"},"delete":{label:"Delete",ngClick:"delete('admins', admin.id, admin.username, 'administrators')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove administrator"}}}}}),angular.module("PermissionFormDefinition",[]).value("PermissionsForm",{addTitle:"Add Permission",editTitle:"{{ name }}",name:"permission",well:!0,forceListeners:!0,stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"},fields:{category:{label:"Permission Type",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Inventory",value:"Inventory",selected:!0},{label:"Deployment",value:"Deploy"}],ngChange:"selectCategory()"},name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},user:{label:"User",type:"hidden"},team:{label:"Team",type:"hidden"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngShow:"category == 'Deploy'",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"false"}},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"}},permission_type:{label:"Permission",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Read",value:"read",ngShow:"category == 'Inventory'"},{label:"Write",value:"write",ngShow:"category == 'Inventory'"},{label:"Admin",value:"admin",ngShow:"category == 'Inventory'"},{label:"Run",value:"run",ngShow:"category == 'Deploy'"},{label:"Check",value:"check",ngShow:"category == 'Deploy'"}],helpCollapse:[{hdr:"Permission",ngBind:"permissionTypeHelp"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("ProjectStatusDefinition",[]).value("ProjectStatusForm",{name:"project_update",editTitle:"SCM Status",well:!1,"class":"horizontal-narrow",fields:{created:{label:"Created",type:"text",readonly:!0},status:{label:"Status",type:"text",readonly:!0},result_stdout:{label:"Std Out",type:"textarea",ngShow:"result_stdout","class":"mono-space",readonly:!0,rows:15},result_traceback:{label:"Traceback",type:"textarea",ngShow:"result_traceback","class":"mono-space",readonly:!0,rows:15}}}),angular.module("ProjectFormDefinition",[]).value("ProjectsForm",{addTitle:"Create Project",editTitle:"{{ name }}",name:"project",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",addRequired:!0,editRequired:!1,excludeMode:"edit",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"},awPopOver:"<p>A project must have at least one organization. Pick one organization now to create the project, and then after the project is created you can add additional organizations.</p><p>Only super users and organization administrators are allowed to make changes to projects. Associating one or more organizations to a project determins which organizations admins have access to modify the project.",dataTitle:"Organization",dataContainer:"body",dataPlacement:"right"},scm_type:{label:"SCM Type",type:"select",ngOptions:"type.label for type in scm_type_options",ngChange:"scmChange()",addRequired:!0,editRequired:!0},missing_path_alert:{type:"alertblock","class":"alert-info",ngShow:"showMissingPlaybooksAlert && scm_type.value == ''",alertTxt:'<p class="text-justify"><strong>WARNING:</strong> There are no unassigned playbook directories in the base project path {{ base_dir }}. Either the projects directory is empty, or all of the contents are already assigned to other projects. New projects can be checked out from source control by changing the SCM type option rather than specifying checkout paths manually. To continue with manual setup, log into the Tower host and ensure content is present in a subdirectory under {{ base_dir }}. Run "chown -R awx" on the content directory to ensure Tower can read the playbooks.</p>',closeable:!1},base_dir:{label:"Project Base Path",type:"textarea",showonly:!0,ngShow:"scm_type.value == ''",awPopOver:"<p>Base path used for locating playbooks. Directories found inside this path will be listed in the playbook directory drop-down. Together the base path and selected playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Base Path",dataContainer:"body",dataPlacement:"right"},local_path:{label:"Playbook Directory",type:"select",id:"local-path-select",ngOptions:"path.label for path in project_local_paths",awRequiredWhen:{variable:"pathRequired",init:!1},ngShow:"scm_type.value == '' && !showMissingPlaybooksAlert",awPopOver:"<p>Select from the list of directories found in the base path.Together the base path and the playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Path",dataContainer:"body",dataPlacement:"right"},scm_url:{label:"SCM URL",type:"text",ngShow:"scm_type && scm_type.value !== ''",awRequiredWhen:{variable:"scmRequired",init:!1},helpCollapse:[{hdr:"GIT URLs",content:'<p>Example URLs for GIT SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible.git</li><li>git@github.com:ansible/ansible.git</li><li>git://servername.example.com/ansible.git</li></ul><p><strong>Note:</strong> If using SSH protocol for GitHub or Bitbucket, enter in the SSH key only, do not enter a username (other than git). Additionally, GitHub and Bitbucket do not support password authentication when using SSH protocol. GIT read only protocol (git://) does not use username or password information.',show:"scm_type.value == 'git'"},{hdr:"SVN URLs",content:'<p>Example URLs for Subversion SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible</li><li>svn://servername.example.com/path</li><li>svn+ssh://servername.example.com/path</li></ul>',show:"scm_type.value == 'svn'"},{hdr:"Mercurial URLs",content:'<p>Example URLs for Mercurial SCM include:</p><ul class="no-bullets"><li>https://bitbucket.org/username/project</li><li>ssh://hg@bitbucket.org/username/project</li><li>ssh://server.example.com/path</li></ul><p><strong>Note:</strong> Mercurial does not support password authentication for SSH. If applicable, add the username, password and key below. Do not put the username and key in the URL. If using Bitbucket and SSH, do not supply your Bitbucket username.',show:"scm_type.value == 'hg'"}]},scm_branch:{labelBind:"scmBranchLabel",type:"text",ngShow:"scm_type && scm_type.value !== ''",addRequired:!1,editRequired:!1},credential:{label:"SCM Credential",type:"lookup",ngShow:"scm_type && scm_type.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1},checkbox_group:{label:"SCM Update Options",type:"checkbox_group",ngShow:"scm_type && scm_type.value !== ''",fields:[{name:"scm_clean",label:"Clean",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Remove any local modifications prior to performing an update.</p>",dataTitle:"SCM Clean",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_delete_on_update",label:"Delete on Update",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Delete the local repository in its entirety prior to performing an update.</p><p>Depending on the size of the repository this may significantly increase the amount of time required to complete an update.</p>",dataTitle:"SCM Delete",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_update_on_launch",label:"Update on Launch",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this project, perform an update to the local repository prior to starting the job.</p>",dataTitle:"SCM Update",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{add:{ngClick:"add('organizations')",icon:"icon-plus",label:"Add",awToolTip:"Add an organization"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('organizations', organization.id, organization.name)",icon:"icon-edit",awToolTip:"Edit the organization","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('organizations', organization.id, organization.name, 'organizations')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the organization"}}}}}),angular.module("TeamFormDefinition",[]).value("TeamForm",{addTitle:"Create Team",editTitle:"{{ name }}",name:"team",well:!0,collapse:!0,collapseTitle:"Team Settings",collapseMode:"edit",collapseOpen:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"teamrequired",init:"true"}}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",add:"Add a new credential"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Modify the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{add:{ngClick:"add('projects')",icon:"icon-plus",label:"Add"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('projects', project.id, project.name)",icon:"icon-edit",awToolTip:"Modify the project","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('projects', project.id, project.name, 'projects')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the project"}}},users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",icon:"icon-plus",label:"Add",awToolTip:"Add a user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit",awToolTip:"Edit user","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-terash","class":"btn-danger",awToolTip:"Remove user"}}}}}),angular.module("UserFormDefinition",[]).value("UserForm",{addTitle:"Create User",editTitle:"{{ username }}",name:"user",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{first_name:{label:"First Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},last_name:{label:"Last Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},email:{label:"Email",type:"email",addRequired:!0,editRequired:!0,autocomplete:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",excludeMode:"edit",awRequiredWhen:{variable:"orgrequired",init:!0}},username:{label:"Username",type:"text",awRequiredWhen:{variable:"not_ldap_user",init:!0},autocomplete:!1},password:{label:"Password",type:"password",ngShow:"ldap_user == false",addRequired:!0,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",autocomplete:!1,chkPass:!0},password_confirm:{label:"Confirm Password",type:"password",ngShow:"ldap_user == false",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},is_superuser:{label:"Superuser (User has full system administration privileges.)",type:"checkbox",trueValue:"true",falseValue:"false","default":"false",ngShow:"current_user['is_superuser'] == true"},ldap_user:{label:"Created by LDAP",type:"checkbox",readonly:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",awToolTip:"Add a credential for this user"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Edit the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},admin_of_organizations:{type:"collection",title:"Admin of Organizations",iterator:"adminof",open:!1,base:"/organizations",actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},teams:{type:"collection",title:"Teams",iterator:"team",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}}}}),angular.module("InventoryGroupsHelpDefinition",[]).value("InventoryGroupsHelp",{story:{hdr:"Building your inventory",width:510,height:560,steps:[{intro:"Start by creating a group:",img:{src:"groups001.png",maxWidth:338,maxHeight:222},box:'Click <i class="fa fa-plus"></i> on the groups list (the left side of the page) to add a new group.',autoOffNotice:!0},{intro:"Enter group properties:",img:{src:"groups002.png",maxWidth:443,maxHeight:251},box:'Enter the group name, a description and any inventory variables. Variables can be entered using either JSON or YAML syntax. For more on inventory variables, see <a href="http://docs.ansible.com/intro_inventory.html" target="_blank"> docs.ansible.com/intro_inventory.html</a>'},{intro:"Cloud inventory: select cloud source",img:{src:"groups003.png",maxWidth:412,maxHeight:215},box:'For a cloud inventory, choose the cloud provider from the list and select your credentials. If you have not already setup credentials for the provider, you will need to do that first on the <a href="/#/credentials" target="_blank">Credentials</a> tab.'},{intro:"Cloud inventory: synchronize Tower with the cloud",img:{src:"groups004.png",maxWidth:261,maxHeight:221},box:'To pull the cloud inventory into Tower, initiate an inventory sync by clicking <i class="fa fa-exchange"></i>.'},{intro:"Groups can have subgroups:",img:{src:"groups005.png",maxWidth:430,maxHeight:206},box:'<div class="text-left">First, select a group. Then click <i class="fa fa-plus"></i> to create a new group. The new group will be added to the selected group.</div>'},{intro:"Copy or move groups:",img:{src:"groups006.png",maxWidth:263,maxHeight:211},box:'<div class="text-left">Copy or move a group by dragging and dropping its name onto another group name. A dialog will appear asking if the group should be coppied or moved.</div>'},{intro:"Adding hosts:",img:{src:"groups007.png",maxWidth:466,maxHeight:178},box:'<div class="text-left"><p>First, select a Group. Then click <i class="fa fa-plus"></i> on the hosts list (the right side of the page) to create a host. The new host will be part of the selected group.</p><p>Note hosts cannot be added to the All Hosts group.</p></div>'}]}}),angular.module("AccessHelper",["RestServices","Utilities","ngCookies"]).factory("CheckAccess",["$rootScope","Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d,e){return function(b){var d=a.current_user,f=b.scope;
d.is_superuser?f.PermissionAddAllowed=!0:d.related.admin_of_organizations&&(c.setUrl(d.related.admin_of_organizations),c.get().success(function(a){f.PermissionAddAllowed=a.results.length>0?!0:!1}).error(function(a,b){e(f,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.admin_of_organizations+" failed. DELETE returned status: "+b})}))}}]).factory("CheckLicense",["$rootScope","$cookieStore","Alert","$location","Authorization",function(a,b,c,d,e){return function(){var d,f,g="success",h=b.get("license"),i='<p>To purchase a license or extend an existing license <a href="http://www.ansible.com/ansible-pricing" target="_blank"><strong>visit the Ansible online store</strong></a>, or visit <strong><a href="https://support.ansible.com" target="_blank">support.ansible.com</a></strong> for assistance.</p>';h&&!e.licenseTested()&&(h.tested=!0,b.remove("license"),b.put("license",h),a.license_tested=!0,void 0!==h.valid_key&&h.valid_key===!1?(g="alert-danger",d="License Error",f="<p>There is a problem with the /etc/awx/license file on your Tower server. Check to make sure Tower can access the file.</p>"+i,c(d,f,g,null,!1,!0)):void 0!==h.demo&&h.demo===!0&&(g="alert-info",d="Tower Demo",f="<p>Thank you for trying Ansible Tower. You can use this edition to manage up to 10 hosts free.</p>"+i,c(d,f,g)),void 0!==h.date_expired&&h.date_expired===!0?(g="alert-info",d="License Expired",f="<p>Your Ansible Tower License has expired and is no longer compliant. You can continue, but you will be unable to add any additional hosts.</p>"+i,c(d,f,g)):void 0!==h.date_warning&&h.date_warning===!0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license is about to expire!</p>"+i,c(d,f,g)),void 0!==h.free_instances&&parseInt(h.free_instances)<=0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license has reached capacity for the number of managed hosts allowed. You will not be able to add any additional hosts.</p>"+i,c(d,f,g,null,!0)))}}]),angular.module("ChildrenHelper",["RestServices","Utilities"]).factory("ToggleChildren",[function(){return function(a){function b(a){var b;for(i[a].ngicon="fa fa-minus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!0)}function c(a){var b;for(i[a].ngicon="fa fa-plus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!1,i[b].related.children&&c(b))}var d,e,f=a.scope,g=a.list,h=a.id,i=f[g.name],j=!1;for(d=0;d<i.length&&j===!1;d++)i[d].id===h&&(e=d,j=!0);/plus-square-o/.test(i[e].ngicon)?b(e):/minus-square-o/.test(i[e].ngicon)&&c(e)}}]),angular.module("CredentialsHelper",["Utilities"]).factory("KindChange",["Empty",function(a){return function(b){var c,d,e=b.scope,f=b.reset;if(e.usernameLabel="Username",e.aws_required=!1,e.rackspace_required=!1,e.sshKeyDataLabel="SSH Private Key",!a(e.kind))switch(e.kind.value){case"aws":e.aws_required=!0;break;case"rax":e.rackspace_required=!0;break;case"ssh":e.usernameLabel="SSH Username";break;case"scm":e.sshKeyDataLabel="SCM Private Key"}f&&(e.access_key=null,e.secret_key=null,e.api_key=null,e.username=null,e.password=null,e.password_confirm=null,e.ssh_key_data=null,e.ssh_key_unlock=null,e.ssh_key_unlock_confirm=null,e.sudo_username=null,e.sudo_password=null,e.sudo_password_confirm=null),c=$("#credential_kind").parent().find(".panel-collapse").first(),d=c.attr("id"),a(e.kind)||""===e.kind.value?$("#"+d+"-icon").hasClass("icon-plus")&&e.accordionToggle("#"+d):$("#"+d+"-icon").hasClass("icon-minus")&&e.accordionToggle("#"+d)}}]).factory("OwnerChange",[function(){return function(a){var b=a.scope,c=b.owner;"team"===c?(b.team_required=!0,b.user_required=!1,b.user=null,b.user_username=null):(b.team_required=!1,b.user_required=!0,b.team=null,b.team_name=null)}}]).factory("FormSave",["$location","Alert","Rest","ProcessErrors","Empty","GetBasePath","CredentialForm","ReturnToCaller","Wait",function(a,b,c,d,e,f,g,h,i){return function(j){var k,l,m=j.scope,n=j.mode,o=g,p={};for(k in o.fields)"access_key"!==k&&"secret_key"!==k&&"ssh_username"!==k&&"ssh_password"!==k&&(p[k]=null===m[k]?"":m[k]);switch(e(m.team)?(p.user=m.user,p.team=""):(p.team=m.team,p.user=""),p.kind=m.kind.value,p.kind){case"ssh":p.password=m.ssh_password;break;case"aws":p.username=m.access_key,p.password=m.secret_key;break;case"rax":p.password=m.api_key}e(p.team)&&e(p.user)?b("Missing User or Team","You must provide either a User or a Team. If this credential will only be accessed by a specific user, select a User. To allow a team of users to access this credential, select a Team.","alert-danger"):(i("start"),"add"===n?(l=e(p.team)?f("users")+p.user+"/credentials/":f("teams")+p.team+"/credentials/",c.setUrl(l),c.post(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to create new Credential. POST status: "+b})})):(l=f("credentials")+m.id+"/",c.setUrl(l),c.put(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to update Credential. PUT status: "+b})})))}}]),angular.module("EventsHelper",["RestServices","Utilities","JobEventDataDefinition","JobEventsFormDefinition"]).factory("EventView",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","JobEventDataForm","Empty","JobEventsForm",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.event_id,d=g,f=angular.copy(n),h=j("base")+"job_events/"+c+"/";e.setUrl(h),e.get().success(function(a){var c,e,h,i,j,n;if($.isEmptyObject(a.event_data)||!a.event_data.res||"string"==typeof a.event_data.res)for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"results":case"module_name":case"module_args":case"rc":delete f.fields[h]}($.isEmptyObject(a.event_data)||!a.event_data.res||"string"!=typeof a.event_data.res)&&delete f.fields.traceback;for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"rc":a.event_data&&a.event_data.res&&m(a.event_data.res[h])?delete f.fields[h]:"textarea"===f.fields[h].type&&(e=a.event_data.res[h].match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i);break;case"results":if(a.event_data&&a.event_data.res&&void 0===a.event_data.res[h])delete f.fields[h];else if(Array.isArray(a.event_data.res[h])&&0!==a.event_data.res[h].length){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""===j?delete f.fields[h]:(e=j.match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i)}else delete f.fields[h];break;case"module_name":case"module_args":a.event_data&&a.event_data.res&&(void 0===a.event_data.res.invocation||void 0===a.event_data.res.invocation[h])&&delete f.fields[h]}b=d.inject(f,{mode:"edit",modal:!0,related:!1}),d.reset(),b.formModalAction=function(){$("#form-modal").modal("hide")},b.formModalActionLabel="OK",b.formModalCancelShow=!1,b.formModalInfo="View JSON",$("#form-modal .btn-success").removeClass("btn-success").addClass("btn-none"),$("#form-modal").addClass("skinny-modal"),b.formModalHeader=a.event_display.replace(/^\u00a0*/g,""),b.formModalInfoAction=function(){var b=g,c=b.inject(l,{mode:"edit",modal:!0,related:!1,modal_selector:"#form-modal2",modal_body_id:"form-modal2-body",modal_title_id:"formModal2Header"});b.reset(),c.formModal2Header=a.event_display.replace(/^\u00a0*/g,""),c.event_data=JSON.stringify(a.event_data,null,"	"),c.formModal2ActionLabel="OK",c.formModal2CancelShow=!1,c.formModal2Info=!1,c.formModalInfo="View JSON",c.formModal2Action=function(){$("#form-modal2").modal("hide")},$("#form-modal2 .btn-success").removeClass("btn-success").addClass("btn-none")},"string"==typeof a.event_data.res&&(b.traceback=a.event_data.res);for(h in f.fields)switch(h){case"status":b.status=a.failed?"error":a.changed?"changed":"success";break;case"created":n=new Date(a.created),b.created=k(n);break;case"host":a.summary_fields&&a.summary_fields.host&&(b.host=a.summary_fields.host.name);break;case"id":case"task":case"play":b[h]=a[h];break;case"start":case"end":a.event_data&&a.event_data.res&&!m(a.event_data.res[h])&&(b[h]=a.event_data.res[h]);break;case"results":if(Array.isArray(a.event_data.res[h])&&a.event_data.res[h].length>0){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""!==j&&(b[h]=j)}break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[h]&&(b[h]=a.event_data.res[h]);break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(b[h]=a.event_data.res.invocation[h])}b.$$phase||b.$digest()}).error(function(a,d){$("#form-modal").modal("hide"),i(b,a,d,f,{hdr:"Error!",msg:"Failed to retrieve event: "+c+". GET status: "+d})})}}]),angular.module("GroupsHelper",["RestServices","Utilities","ListGenerator","GroupListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","GroupsHelper","InventoryHelper","SelectionHelper","JobSubmissionHelper","RefreshHelper","PromptDialog","CredentialsListDefinition","InventoryTree"]).factory("GetSourceTypeOptions",["Rest","ProcessErrors","GetBasePath",function(a,b,c){return function(d){var e=d.scope,f=d.variable;void 0===e[f]&&(e[f]=[],a.setUrl(c("inventory_sources")),a.options().success(function(a){var b,c=a.actions.GET.source.choices;for(b=0;b<c.length;b++)"file"!==c[b][0]&&e[f].push({label:""===c[b][0]?"Manual":c[b][1],value:c[b][0]})}).error(function(a,c){b(e,a,c,null,{hdr:"Error!",msg:"Failed to retrieve options for inventory_sources.source. OPTIONS status: "+c})}))}}]).factory("ViewUpdateStatus",["Rest","ProcessErrors","GetBasePath","ShowUpdateStatus","Alert","Wait","Empty","Find",function(a,b,c,d,e,f,g,h){return function(c){var i=c.scope,j=c.tree_id,k=c.group_id,l=h({list:i.groups,key:"id",val:j});l&&(g(l.source)?e("Missing Configuration","The selected group is not configured for inventory sync. You must first edit the group, provide Source settings, and then run the sync process.","alert-info"):g(l.status)||"never updated"===l.status?e("No Status Available",'An inventory sync has not been performed for the selected group. Start the process by clicking the <i class="fa fa-exchange"></i> button.',"alert-info"):(f("start"),a.setUrl(l.related.inventory_source),a.get().success(function(a){var b=a.related.current_update?a.related.current_update:a.related.last_update;d({group_name:a.summary_fields.group.name,last_update:b,license_error:a.summary_fields.last_update&&a.summary_fields.last_update.license_error?!0:!1,tree_id:j,group_id:k,parent_scope:i})}).error(function(a,c){f("stop"),b(i,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+l.related.inventory_source+" POST returned status: "+c})})))}}]).factory("GetHostsStatusMsg",[function(){return function(a){var b,c,d,e=a.active_failures,f=a.total_hosts;return e>0?(b=f+(1===f?" host":" hosts")+". "+e+" with failed jobs.",d="true",c=!0):(c=!1,0===f?(b="Group contains 0 hosts.",d="na"):(b=f+(1===f?" host":" hosts")+". No job failures",d="false")),{tooltip:b,failures:c,"class":d}}}]).factory("GetSyncStatusMsg",[function(){return function(a){var b,c,d,e=a.status,f="",g="Start sync process";switch(b=e,c="icon-cloud-"+b,e){case"never updated":b="never",c="icon-cloud-na disabled",d='Sync not performed. Click <i class="fa fa-exchange"></i> to start it now.';break;case"none":case"":f="btn-disabled",b="n/a",c="icon-cloud-na disabled",d='Cloud source not configured. Click <i class="fa fa-pencil"></i> to update.',g=d;break;case"failed":d="Sync failed. Click to view log.";break;case"successful":d="Sync completed. Click to view log.";break;case"updating":d="Sync running"}return{"class":c,tooltip:d,status:b,launch_class:f,launch_tip:g}}}]).factory("SourceChange",["GetBasePath","CredentialList","LookUpInit","Empty",function(a,b,c,d){return function(e){var f,g,h=e.scope,i=e.form;d(h.source)||("file"===h.source.value?h.sourcePathRequired=!0:(h.sourcePathRequired=!1,h.source_path="",h[i.name+"_form"].source_path.$setValidity("required",!0)),"rax"===h.source.value?(h.source_region_choices=h.rax_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])):"ec2"===h.source.value&&(h.source_region_choices=h.ec2_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])),("rax"===h.source.value||"ec2"===h.source.value)&&(f="rax"===h.source.value?"rax":"aws",g=a("credentials")+"?cloud=true&kind="+f,c({url:g,scope:h,form:i,list:b,field:"credential"})))}}]).factory("GroupsCancelUpdate",["Rest","ProcessErrors","Alert","Wait","Find",function(a,b,c,d,e){return function(f){var g,h=f.scope,i=f.tree_id;h.removeCancelUpdate&&h.removeCancelUpdate(),h.removeCancelUpdate=h.$on("CancelUpdate",function(e,f){a.setUrl(f),a.post().success(function(){d("stop"),c("Inventory Sync Cancelled",'Your request to cancel the sync process was submitted to the task manger. Click the <i class="fa fa-refresh fa-lg"></i> button to monitor the status.',"alert-info")}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+f+" failed. POST status: "+c})})}),h.removeCheckCancel&&h.removeCheckCancel(),h.removeCheckCancel=h.$on("CheckCancel",function(e,f,g){var i=g?g:f;i+="cancel/",a.setUrl(i),a.get().success(function(a){a.can_cancel?h.$emit("CancelUpdate",i):(d("stop"),c("Cancel Inventory Sync",'Either you do not have access or the sync process completed.<br /> Click the <i class="fa fa-refresh fa-lg"></i> button to view the latest status.',"alert-info"))}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+i+" failed. GET status: "+c})})}),g=e({list:h.groups,key:"id",val:i}),h.selected_tree_id=g.id,h.selected_group_id=g.group_id,!g||"updating"!==g.status&&"pending"!==g.status?c("Cancel Inventory Sync",'The sync process completed. Click the <i class="fa fa-refresh fa-lg"></i> to view the latest status.',"alert-info"):(d("start"),a.setUrl(g.related.inventory_source),a.get().success(function(a){h.$emit("CheckCancel",a.related.last_update,a.related.current_update)}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+g.related.inventory_source+" failed. GET status: "+c})}))}}]).factory("GroupsAdd",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","ParseTypeChange","GroupsEdit","Wait","GetChoices","GetSourceTypeOptions","LookUpInit","BuildTree","SourceChange","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return function(b){var c,d=b.inventory_id,i=void 0!==b.group_id?b.group_id:null,m=b.scope,q=null!==i?k("groups")+i+"/children/":k("inventory")+d+"/groups/",u=g,v=h,w=v.inject(u,{mode:"add",modal:!0,related:!1,show_modal:!1});$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),w.formModalActionLabel="Save",w.formModalCancelShow=!0,w.parseType="yaml",w.source=null,l(w),v.reset(),w.removeAddTreeRefreshed&&w.removeAddTreeRefreshed(),w.removeAddTreeRefreshed=w.$on("GroupTreeRefreshed",function(){a.formModalHeader=null,a.formModalCancleShow=null,a.formModalActionLabel=null,n("stop"),$("#form-modal").modal("hide"),w.removeAddTreeRefreshed()}),w.removeSaveComplete&&w.removeSaveComplete(),w.removeSaveComplete=w.$on("SaveComplete",function(a,b,c){c||(w.searchCleanup&&w.searchCleanup(),w.formModalActionDisabled=!1,r({scope:m,inventory_id:d,refresh:!0,new_group_id:b}),t())}),w.removeFormSaveSuccess&&w.removeFormSaveSuccess(),w.removeFormSaveSuccess=w.$on("formSaveSuccess",function(a,b,c){var d,g,h,i,k=!1,l={};if(null!==w.source.value&&""!==w.source.value){for(l.group=b,l.source=w.source.value,l.source_path=w.source_path,l.credential=w.credential,l.overwrite=w.overwrite,l.overwrite_vars=w.overwrite_vars,l.update_on_launch=w.update_on_launch,d=$("#s2id_group_source_regions").select2("data"),g=[],h=0;h<d.length;h++)g.push(d[h].id);if(l.source_regions=g.join(),"ec2"===w.source.value)try{if(i="json"===w.envParseType?JSON.parse(w.source_vars):jsyaml.load(w.source_vars),"object"!=typeof i)throw"failed to return an object!";l.source_vars=$.isEmptyObject(i)?"":JSON.stringify(i,void 0,"	")}catch(m){k=!0,w.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+m)}k||(e.setUrl(c),e.put(l).success(function(){w.$emit("SaveComplete",b,!1)}).error(function(a,c){w.$emit("SaveComplete",b,!0),j(w,a,c,u,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+c})}))}else w.$emit("SaveComplete",b,!1)}),w.cancelModal=function(){w.searchCleanup&&w.searchCleanup(),t()},w.formModalAction=function(){var a,b;n("start");try{if(w.formModalActionDisabled=!0,a="json"===w.parseType?JSON.parse(w.variables):jsyaml.load(w.variables),"object"!=typeof a)throw"failed to return an object!";b={name:w.name,description:w.description},d&&(b.inventory=d),b.variables=$.isEmptyObject(a)?"":JSON.stringify(a,void 0,"	"),e.setUrl(q),e.post(b).success(function(a){w.$emit("formSaveSuccess",a.id,k("inventory_sources")+a.id+"/")}).error(function(a,b){n("stop"),w.formModalActionDisabled=!1,j(w,a,b,u,{hdr:"Error!",msg:"Failed to add new group. POST returned status: "+b})})}catch(c){n("stop"),w.formModalActionDisabled=!1,f("Error","Error parsing group variables. Parser returned: "+c)}},w.sourceChange=function(){s({scope:w,form:g})},c=0,w.removeChoicesReady&&w.removeChoicesReady(),w.removeChoicesReady=w.$on("choicesReadyGroup",function(){c++,2===c&&($("#form-modal").modal("show"),n("stop"))}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),p({scope:w,variable:"source_type_options"}),n("start")}}]).factory("GroupsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","SetNodeName","ParseTypeChange","GetSourceTypeOptions","InventoryUpdate","LookUpInit","Empty","Wait","GetChoices","UpdateGroup","SourceChange","Find","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return function(a){var b,c=a.scope,d=a.group_id,i=a.tree_id,l=a.inventory_id,p=a.groups_reload,q=h,r=g,y=k("groups")+d+"/",z={},A=q.inject(r,{mode:"edit",modal:!0,related:!1,show_modal:!1});q.reset(),n({scope:A,variable:"source_type_options"}),A.formModalActionLabel="Save",A.formModalHeader="Group",A.formModalCancelShow=!0,A.source=r.fields.source["default"],A.parseType="yaml",A[r.fields.source_vars.parseTypeName]="yaml",A.sourcePathRequired=!1,m(A),m(A,"source_vars",r.fields.source_vars.parseTypeName),A.groupLoadedRemove&&A.groupLoadedRemove(),A.groupLoadedRemove=A.$on("groupLoaded",function(){A.variable_url?(e.setUrl(A.variable_url),e.get().success(function(a){A.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),s("stop")}).error(function(a,b){A.variables=null,s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group variables. GET returned status: "+b})})):A.variables="---",z.variables=A.variables,A.source_url&&(e.setUrl(A.source_url),e.get().success(function(a){var b,c,d,e,f,g,h,i,j;for(b in r.fields){if("checkbox_group"===b)for(c=0;c<r.fields[b].fields.length;c++)e=r.fields[b].fields[c],void 0!==a[e.name]&&(A[e.name]=a[e.name],z[e.name]=A[e.name]);if("source"===b){for(f=!1,c=0;c<A.source_type_options.length;c++)A.source_type_options[c].value===a.source&&(A.source=A.source_type_options[c],f=!0);A.groupUpdateHide=f&&""!==A.source.value?!1:!0,z.source=A.source}else if("update_interval"===b)for((""===a[b]||null===a[b]||void 0===a[b])&&(a[b]=0),c=0;c<A.update_interval_options.length;c++)A.update_interval_options[c].value===a[b]&&(A[b]=A.update_interval_options[c]);else"source_vars"===b?($.isEmptyObject(a.source_vars)||"{}"===a.source_vars||"null"===a.source_vars||""===a.source_vars?A.source_vars="---":(g=JSON.parse(a.source_vars),A.source_vars=jsyaml.safeDump(g)),z.source_vars=A.variables):a[b]&&(A[b]=a[b],z[b]=A[b]);r.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[r.fields[b].sourceModel]&&(A[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField],z[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField])}if(A.sourceChange(),a.source_regions){if("ec2"===a.source||"rax"===a.source){for(h="ec2"===a.source?A.ec2_regions:A.rax_regions,i=[],j=a.source_regions.split(","),c=0;c<j.length;c++)for(d=0;d<h.length;d++)j[c]===h[d].value&&i.push({id:h[d].value,text:h[d].label});z.source_regions=i,$("#s2id_group_source_regions").select2("data",i)}}else z.source_regions=[{id:"all",text:"All"}];A.group_update_url=a.related.update,s("stop")}).error(function(a,b){A.source="",s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve inventory source. GET status: "+b})}))}),A.removeChoicesComplete&&A.removeChoicesComplete(),A.removeChoicesComplete=A.$on("choicesCompleteGroup",function(){e.setUrl(y),e.get().success(function(a){for(var b in r.fields)a[b]&&(A[b]=a[b],z[b]=A[b]);A.variable_url=a.related.variable_data,A.source_url=a.related.inventory_source,$("#form-modal").modal("show"),A.$emit("groupLoaded")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group: "+y+". GET status: "+b})})}),b=0,A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReadyGroup",function(){b++,2===b&&A.$emit("choicesCompleteGroup")}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),s("start"),A.removeSaveComplete&&A.removeSaveComplete(),A.removeSaveComplete=A.$on("SaveComplete",function(a,b){if(!b){if(p)u({scope:c,group_id:d,properties:{name:A.name,description:A.description,has_inventory_sources:A.source&&A.source.value?!0:!1,source:A.source&&A.source.value?A.source.value:""}});else if(A.home_groups){var e=w({list:c.home_groups,key:"id",val:d});e&&(e.name=A.name,e.description=A.description)}A.searchCleanUp&&A.searchCleanup(),A.formModalActionDisabled=!1,$("#form-modal").modal("hide"),p&&c.selected_tree_id!==i?c.showHosts(i,d,!1):s("stop"),x()}}),A.removeFormSaveSuccess&&A.removeFormSaveSuccess(),A.removeFormSaveSuccess=A.$on("formSaveSuccess",function(){var a,b,c,g,h=!1,i={group:d,source:A.source&&A.source.value?A.source.value:"",source_path:A.source_path,credential:A.credential,overwrite:A.overwrite,overwrite_vars:A.overwrite_vars,update_on_launch:A.update_on_launch};for(a=$("#s2id_group_source_regions").select2("data"),b=[],c=0;c<a.length;c++)b.push(a[c].id);if(i.source_regions=b.join(),A.source&&"ec2"===A.source.value)try{if(g="json"===A.envParseType?JSON.parse(A.source_vars):jsyaml.load(A.source_vars),"object"!=typeof g)throw"failed to return an object!";i.source_vars=$.isEmptyObject(g)?"":JSON.stringify(g)}catch(k){h=!0,A.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+k)}h||(e.setUrl(A.source_url),e.put(i).success(function(){A.$emit("SaveComplete",!1)}).error(function(a,b){A.$emit("SaveComplete",!0),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+b})}))}),A.cancelModal=function(){A.searchCleanup&&A.searchCleanup(),x()},A.formModalAction=function(){s("start");try{var a,b,c;if(c="json"===A.parseType?JSON.parse(A.variables):jsyaml.load(A.variables),"object"!=typeof c)throw"failed to return an object!";b={};for(a in r.fields)b[a]=A[a];b.inventory=l,e.setUrl(y),e.put(b).success(function(){A.variables?(e.setUrl(A.variable_url),e.put(c).success(function(){A.$emit("formSaveSuccess")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group variables. PUT status: "+b})})):A.$emit("formSaveSuccess")}).error(function(a,b){s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group: "+d+". PUT status: "+b})})}catch(g){s("stop"),f("Error","Error parsing group variables. Parser returned: "+g)}},A.updateGroup=function(){""===A.source||null===A.source?f("Missing Configuration","The selected group is not configured for updates. You must first edit the group, provide Source settings, and then run an update.","alert-info"):"updating"===A.status?f("Update in Progress","The inventory update process is currently running for group <em>"+A.summary_fields.group.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):o({scope:A,group_id:d,url:A.group_update_url,group_name:A.name,group_source:A.source.value})},A.sourceChange=function(){v({scope:A,form:g})}}}]).factory("GroupsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","Wait","BuildTree","Find",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.scope,d=a.tree_id,f=a.inventory_id,g=n({list:c.groups,key:"id",val:d}),h=k("inventory")+f+"/groups/";b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){l("start")}),$("#prompt-modal").modal("hide"),e.setUrl(h),e.post({id:g.group_id,disassociate:1}).success(function(){$("#prompt-modal").off(),c.$emit("GroupDeleteCompleted")}).error(function(a,b){l("stop"),j(c,a,b,null,{hdr:"Error!",msg:"Call to "+h+" failed. POST returned status: "+b})})},i({hdr:"Delete Group",body:"<p>Are you sure you want to delete group <em>"+g.name+"?</p>",action:b,"class":"btn-danger"})}}]).factory("ShowUpdateStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","InventoryStatusForm","Wait","Empty","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){function b(a){var b,d;return b=a.match(/\n/g),d=b?b.length:1,d>c?c:d}var c,d,h,j,n,p,q,r=a.group_name,s=a.last_update,t=g,u=l,v=a.license_error;void 0===s||null===s||""===s?(m("stop"),f("Missing Configuration","The selected group is not configured for inventory sync. Edit the group and provide Source information.","alert-info")):(d='<div id="status-modal-dialog" title="'+r+'- Inventory Sync">\n<div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(d),h=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),j=$(document).width(),n=$("body").height(),j>1199?(p=675,q=750>n?n-20:750,c=18):1199>=j&&j>=768?(p=550,q=620>n?n-15:620,c=12):(p=j-20,q=500>n?n:500,c=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:p,height:q,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),o()},open:function(){m("stop")}}),e.setUrl(s),e.get().success(function(a){for(var c in u.fields)a[c]&&(h[c]="created"===c?k(new Date(a[c])):a[c]);h.license_error=v,h.status_rows=b(a.status),h.stdout_rows=b(a.result_stdout),h.traceback_rows=b(a.result_traceback),$("#status-modal-dialog").dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(h,a,b,null,{hdr:"Error!",msg:"Failed to retrieve last update: "+s+". GET status: "+b})}))}}]),angular.module("HostsHelper",["RestServices","Utilities","ListGenerator","HostListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","HostsHelper","InventoryHelper","RelatedSearchHelper","InventoryFormDefinition","SelectionHelper","HostGroupsFormDefinition"]).factory("SetEnabledMsg",[function(){return function(a){a.enabledToolTip=a.has_inventory_sources?a.enabled?"Host is available":"Host is not available":a.enabled?"Host is available. Click to toggle.":"Host is not available. Click to toggle."}}]).factory("SetHostStatus",["SetEnabledMsg",function(a){return function(b){b.activeFailuresLink="/#/hosts/"+b.id+"/job_host_summaries/?inventory="+b.inventory+"&host_name="+encodeURI(b.name),b.has_active_failures===!0?(b.badgeToolTip="Most recent job failed. Click to view jobs.",b.active_failures="failed"):b.has_active_failures===!1&&null===b.last_job?(b.has_active_failures="none",b.badgeToolTip="No job data available.",b.active_failures="n/a"):b.has_active_failures===!1&&null!==b.last_job&&(b.badgeToolTip="Most recent job successful. Click to view jobs.",b.active_failures="success"),b.enabled_flag=b.enabled,a(b)}}]).factory("SetStatus",["SetEnabledMsg","Empty",function(a,b){return function(c){function d(a){return a.length>25?a.substr(0,25)+"...":a}function e(a){var b,c,e;if(a.has_active_failures===!0||a.has_active_failures===!1&&null!==a.last_job)if(a.has_active_failures===!0?(a.badgeToolTip="Most recent job failed. Click to view jobs.",a.active_failures="failed"):(a.badgeToolTip="Most recent job successful. Click to view jobs.",a.active_failures="success"),a.summary_fields.recent_jobs.length>0){for(e=a.summary_fields.recent_jobs.sort(function(a,b){return-1*(a-b)}),h="Recent Jobs",g='<table class="table table-condensed host-flyout" style="width: 100%">\n',g+="<thead>\n",g+="<tr>\n",g+="<th>ID</td>\n",g+='<th class="text-center">Status</td>\n',g+="<th>View</th>\n",g+="<th>Name</td>\n",g+="</tr>\n",g+="</thead>\n",g+="<tbody>\n",b=0;b<e.length;b++)c=e[b],g+="<tr>\n",g+='<td><a href="/#/jobs/'+c.id+'">'+c.id+"</a></td>\n",g+='<td class="text-center"><a ng-click="showJobSummary('+c.id+')" aw-tool-tip="'+c.status.charAt(0).toUpperCase()+c.status.slice(1)+'. Click for details" data-placement="top"><i class="fa icon-job-'+c.status+'"></i></a></td>\n',g+='<td><a href="/#/jobs/'+c.id+"/job_events/?host="+encodeURI(a.name)+'">Events</a> <a href="/#/jobs/'+c.id+"/job_host_summaries/?host_name="+encodeURI(a.name)+'">Hosts</a></td>\n',g+='<td class="break">'+d(c.name)+"</td>\n",g+="</tr>\n";g+="</tbody>\n",g+="</table>\n"}else h="No job data",g="<p>No recent job data available for this host.</p>";else a.has_active_failures===!1&&null===a.last_job&&(a.has_active_failures="none",a.badgeToolTip="No job data available.",a.active_failures="n/a");a.job_status_html=g,a.job_status_title=h}var f,g,h,i=c.scope,j=c.host;if(b(j))for(f=0;f<i.hosts.length;f++)e(i.hosts[f]),a(i.hosts[f]);else e(j),a(j)}}]).factory("HostsReload",["$routeParams","Empty","InventoryHosts","GetBasePath","SearchInit","PaginateInit","Wait","SetHostStatus","SetStatus","ApplyEllipsis",function(a,b,c,d,e,f,g,h,i,j){return function(h){var k=h.scope,l=h.group_id,m=h.inventory_id,n=c,o=b(l)?d("inventory")+m+"/hosts/":d("groups")+l+"/all_hosts/";k.search_place_holder="Search "+k.selected_group_name,k.removePostRefresh&&k.removePostRefresh(),k.removePostRefresh=k.$on("PostRefresh",function(){for(var a=0;a<k.hosts.length;a++)k.hosts[a].enabled_flag=k.hosts[a].enabled;i({scope:k}),setTimeout(function(){j("#hosts_table .host-name a")},2500),g("stop"),k.$emit("HostReloadComplete")}),e({scope:k,set:"hosts",list:n,url:o}),f({scope:k,list:n,url:o}),a.host_name&&(k[n.iterator+"InputDisable"]=!1,k[n.iterator+"SearchValue"]=a.host_name,k[n.iterator+"SearchField"]="name",k[n.iterator+"SearchFieldLabel"]=n.fields.name.label,k[n.iterator+"SearchSelectValue"]=null),k.show_failures&&(k[n.iterator+"InputDisable"]=!0,k[n.iterator+"SearchValue"]="true",k[n.iterator+"SearchField"]="has_active_failures",k[n.iterator+"SearchFieldLabel"]=n.fields.has_active_failures.label,k[n.iterator+"SearchSelectValue"]={value:1}),k.search(n.iterator)
}}]).factory("InjectHosts",["GenerateList","InventoryHosts","HostsReload",function(a,b,c){return function(d){var e=d.scope,f=d.inventory_id,g=d.group_id,h=d.tree_id,i=a;i.inject(b,{scope:e,mode:"edit",id:"hosts-container",breadCrumbs:!1,searchSize:"col-lg-6 col-md-6 col-sm-6"}),c({scope:e,group_id:g,tree_id:h,inventory_id:f})}}]).factory("ToggleHostEnabled",["GetBasePath","Rest","Wait","ProcessErrors","Alert","Find","SetEnabledMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){a.enabled=a.enabled?!1:!0,a.enabled_flag=a.enabled,g(a)}var j,k=h.host_id,l=h.external_source,m=h.scope;l?e("Action Not Allowed","This host is part of a cloud inventory. It can only be disabled in the cloud. After disabling it, run an inventory sync to see the new status reflected here.","alert-info"):(c("start"),j=f({list:m.hosts,key:"id",val:k}),i(j),b.setUrl(a("hosts")+k+"/"),b.put(j).success(function(){c("stop")}).error(function(a,b){i(j),c("stop"),d(m,a,b,null,{hdr:"Error!",msg:"Failed to update host. PUT returned status: "+b})}))}}]).factory("HostsList",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostList","GenerateList","Prompt","SearchInit","PaginateInit","ProcessErrors","GetBasePath","HostsAdd","HostsReload","SelectionInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return function(a){var b,c,d=a.inventory_id,e=a.group_id,f=g,i=h;f.iterator="subhost",f.name="subhosts",c=i.inject(f,{id:"form-modal-body",mode:"select",breadCrumbs:!1,selectButton:!1}),b=m("inventory")+d+"/hosts/?not__groups__id="+c.group_id,c.formModalActionLabel="Select",c.formModalHeader="Add Existing Hosts",c.formModalCancelShow=!0,p({scope:c,list:f,url:m("groups")+e+"/hosts/"}),c.removeModalClosed&&c.removeModalClosed(),c.removeModalClosed=c.$on("modalClosed",function(){o(a)}),$(".popover").popover("hide"),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),$("#form-modal").modal({backdrop:"static",keyboard:!1}),j({scope:c,set:"subhosts",list:f,url:b}),k({scope:c,list:f,url:b,mode:"lookup"}),c.search(f.iterator),c.$$phase||c.$digest(),c.createHost=function(){$("#form-modal").modal("hide"),n({scope:a.scope,inventory_id:d,group_id:e})}}}]).factory("HostsCreate",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){var b=a.scope,c=b.inventory_id,d=b.selected_group_id,i=k("groups")+d+"/hosts/",p=g,q=h,r=q.inject(p,{mode:"add",modal:!0,related:!1}),s={};r.formModalActionLabel="Save",r.formModalHeader="Create New Host",r.formModalCancelShow=!0,r.parseType="yaml",m(r),r.removeHostsReload&&r.removeHostsReload(),r.removeHostsReload=r.$on("hostsReload",function(){l(a)}),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),q.reset(),s={},r.$$phase||r.$digest(),r.removeHostSaveComplete&&r.removeHostSaveComplete(),r.removeHostSaveComplete=r.$on("HostSaveComplete",function(){n("stop"),$("#form-modal").modal("hide"),l({scope:b,group_id:b.selected_group_id,tree_id:b.selected_tree_id,inventory_id:b.inventory_id}),o()}),r.formModalAction=function(){n("start");try{var a,b,d={};if(r.formModalActionDisabled=!0,b="json"===r.parseType?JSON.parse(r.variables):jsyaml.load(r.variables),"object"!=typeof b)throw"failed to return an object!";for(a in p.fields)"variables"!==a&&(d[a]=r[a]);d.inventory=c,d.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(i),e.post(d).success(function(){r.$emit("HostSaveComplete")}).error(function(a,b){n("stop"),r.formModalActionDisabled=!1,j(r,a,b,p,{hdr:"Error!",msg:"Failed to add new host. POST returned status: "+b})})}catch(g){n("stop"),r.formModalActionDisabled=!1,f("Error","Error parsing host variables. Parser returned: "+g)}},r.formReset=function(){q.reset()},r.cancelModal=function(){o()}}}]).factory("HostsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","Find","SetStatus","ApplyEllipsis","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(a){var b=a.scope,c=a.host_id,d=a.inventory_id,i=h,l=g,s=k("hosts")+c+"/",t=i.inject(l,{mode:"edit",modal:!0,related:!1,show_modal:!1}),u={},v={};i.reset(),t.formModalActionLabel="Save",t.formModalHeader="Host Properties",t.formModalCancelShow=!0,t.parseType="yaml",m(t),t.hostLoadedRemove&&t.hostLoadedRemove(),t.hostLoadedRemove=t.$on("hostLoaded",function(){t.variable_url?(e.setUrl(t.variable_url),e.get().success(function(a){t.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),n("stop"),$("#form-modal").modal("show")}).error(function(a,b){t.variables=null,j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host variables. GET returned status: "+b})})):(t.variables="---",n("stop"),$("#form-modal").modal("show")),u.variables=t.variables}),n("start"),e.setUrl(s),e.get().success(function(a){var b,c,d;for(c in l.fields)a[c]&&(t[c]=a[c],u[c]=t[c]);d=a.related;for(b in l.related)d[b]&&(v[b]={url:d[b],iterator:l.related[b].iterator});t.variable_url=a.related.variable_data,t.$emit("hostLoaded")}).error(function(a,b){j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host: "+c+". GET returned status: "+b})}),t.removeSaveCompleted&&t.removeSaveCompleted(),t.removeSaveCompleted=t.$on("saveCompleted",function(){var a=o({list:b.hosts,key:"id",val:c}),d=a.name;a.name=t.name,a.enabled=t.enabled,a.enabled_flag=t.enabled,p({scope:b,host:a}),d?setTimeout(function(){$('#hosts_table .host-name a[title="'+d+'"').attr("title",a.name),q("#hosts_table .host-name a"),n("stop"),$("#form-modal").modal("hide")},2e3):(n("stop"),$("#form-modal").modal("hide")),r()}),t.formModalAction=function(){n("start");try{var a,b,g={};if(b="json"===t.parseType?JSON.parse(t.variables):jsyaml.load(t.variables),"object"!=typeof b)throw"failed to return an object!";for(a in l.fields)g[a]=t[a];g.inventory=d,g.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(s),e.put(g).success(function(){t.$emit("saveCompleted")}).error(function(a,b){n("stop"),j(t,a,b,l,{hdr:"Error!",msg:"Failed to update host: "+c+". PUT returned status: "+b})})}catch(h){n("stop"),f("Error","Error parsing host variables. Parser returned: "+h)}},t.formReset=function(){i.reset();for(var a in u)t[a]=u[a];t.parseType="yaml"},t.cancelModal=function(){r()}}}]).factory("HostsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","Prompt","ProcessErrors","GetBasePath","HostsReload","Wait","Find",function(a,b,c,d,e,f,g,h,i,j,k,l){return function(a){var b,c,d=a.scope,f=a.host_id,j=a.host_name,m=null===d.selected_group_id?i("inventory")+d.inventory_id+"/hosts/":i("groups")+d.selected_group_id+"/hosts/",n=d.selected_tree_id?l({list:d.groups,key:"id",val:d.selected_tree_id}):null;d.removeHostsReload&&d.removeHostsReload(),d.removeHostsReload=d.$on("hostsReload",function(){d.showHosts(d.selected_tree_id,d.selected_group_id,!1)}),b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){k("start")}),$("#prompt-modal").modal("hide"),e.setUrl(m),e.post({id:f,disassociate:1}).success(function(){d.$emit("hostsReload")}).error(function(a,b){k("stop"),h(d,a,b,null,{hdr:"Error!",msg:"Attempt to delete "+j+" failed. POST returned status: "+b})})},c=n?"<p>Are you sure you want to delete host <em>"+j+"</em> from group <em>"+n.name+"</em>?</p>":"<p>Are you sure you want to delete host <em>"+j+"</em>?</p>",g({hdr:"Delete Host",body:c,action:b,"class":"btn-danger"})}}]).factory("EditHostGroups",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,l=a.host_id,n=a.inventory_id,o=g,p=[];for(c='<div class="row host-groups">\n',c+='<div class="col-lg-6">\n',c+="<label>Available Groups:</label>\n",c+='<select multiple class="form-control" name="available-groups" ng-model="selectedGroups" ng-change="leftChange()" ng-options="avail_group.name for avail_group in available_groups"></select>\n',c+="</div>\n",c+='<div class="col-lg-6">\n',c+="<label>Belongs to Groups:</label>\n",c+='<select multiple class="form-control" name="selected-groups" ng-model="assignedGroups" ng-change="rightChange()" ng-options="host_group.name for host_group in host_groups"></select>\n',c+="</div>\n",c+="</div>\n",c+='<div class="row host-group-buttons">\n',c+='<div class="col-lg-12">\n',c+='<button type="button" ng-click="moveLeft()" class="btn btn-sm btn-primary left-button" ng-disabled="leftButtonDisabled"><i class="icon-arrow-left"></i></button>\n',c+='<button type="button" ng-click="moveRight()" class="btn btn-sm btn-primary right-button" ng-disabled="rightButtonDisabled"><i class="icon-arrow-right"></i></button>\n',c+="<p>(move selected groups)</p>\n",c+="</div>\n",c+="</div>\n",d=j("hosts")+l+"/",f=o.inject(null,{mode:"edit",modal:!0,related:!1,html:c}),b=0;b<f.hosts.length;b++)f.hosts[b].id===l&&(f.host=f.hosts[b]);f.selectedGroups=null,f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionLabel="Save",f.formModalHeader=f.host.name+' - <span class="subtitle">Groups</span>',f.formModalCancelShow=!0,f.formModalActionDisabled=!0,$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),f.hostGroupChangeRemove&&f.hostGroupChangeRemove(),f.hostGroupChangeRemove=f.$on("hostGroupChange",function(){p.pop(),0===p.length&&(h=function(){setTimeout(function(){m("stop")},500)},k({scope:f,inventory_id:n,group_id:f.group_id,action:h}))}),f.formModalAction=function(){var a,b,c;for($("#form-modal").modal("hide"),m("start"),a=0;a<f.original_groups.length;a++){for(c=!1,b=0;b<f.host_groups.length;b++)f.original_groups[a].id===f.host_groups[b].id&&(c=!0);c||(p.push({group_id:f.original_groups[a].id,action:"delete"}),e.setUrl(j("groups")+f.original_groups[a].id+"/hosts/"),e.post({id:l,disassociate:1}).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to remove host from group "+f.original_groups[a].name+" failed. POST returned status: "+c})}))}for(a=0;a<f.host_groups.length;a++){for(c=!1,b=0;b<f.original_groups.length;b++)f.original_groups[b].id===f.host_groups[a].id&&(c=!0);c||(p.push({group_id:f.host_groups[a].id,action:"add"}),e.setUrl(j("groups")+f.host_groups[a].id+"/hosts/"),e.post(f.host).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to add host to group "+f.host_groups[a].name+" failed. POST returned status: "+c})}))}},f.leftChange=function(){null!==f.selectedGroups&&f.selectedGroups.length>0?(f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!1):f.rightButtonDisabled=!0},f.rightChange=function(){null!==f.assignedGroups&&f.assignedGroups.length>0?(f.selectedGroups=null,f.leftButtonDisabled=!1,f.rightButtonDisabled=!0):f.leftButtonDisabled=!0},f.moveLeft=function(){var a,b,c,d;for(a=0;a<f.assignedGroups.length;a++)for(b=0;b<f.host_groups.length;b++)if(f.host_groups[b].id===f.assignedGroups[a].id){f.host_groups.splice(b,1);break}for(a=0;a<f.assignedGroups.length;a++){for(c=!1,b=0;b<f.available_groups.length&&!c;b++)f.available_groups[b].id===f.assignedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.available_groups.length&&!d;b++)0===b&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b].name.toLowerCase()?(d=!0,f.available_groups.unshift(f.assignedGroups[a])):b+1<f.available_groups.length&&f.assignedGroups[a].name.toLowerCase()>f.available_groups[b].name.toLowerCase()&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b+1].name.toLowerCase()&&(d=!0,f.available_groups.splice(b+1,0,f.assignedGroups[a]));d||f.available_groups.push(f.assignedGroups[a])}}f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.moveRight=function(){var a,b,c,d;for(a=0;a<f.selectedGroups.length;a++)for(b=0;b<f.available_groups.length;b++)if(f.available_groups[b].id===f.selectedGroups[a].id){f.available_groups.splice(b,1);break}for(a=0;a<f.selectedGroups.length;a++){for(c=!1,b=0;b<f.host_groups.length&&!c;b++)f.host_groups[b].id===f.selectedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.host_groups.length&&!d;b++)0===b&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b].name.toLowerCase()?(d=!0,f.host_groups.unshift(f.selectedGroups[a])):b+1<f.host_groups.length&&f.selectedGroups[a].name.toLowerCase()>f.host_groups[b].name.toLowerCase()&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b+1].name.toLowerCase()&&(d=!0,f.host_groups.splice(b+1,0,f.selectedGroups[a]));d||f.host_groups.push(f.selectedGroups[a])}}f.selectedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.host_groups=[],f.original_groups=[],f.available_groups=[],e.setUrl(f.host.related.groups+"?order_by=name"),e.get().success(function(a){var b,c,d;for(b=0;b<a.results.length;b++)f.host_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description}),f.original_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description});for(b=0;b<f.inventory_groups.length;b++){for(d=!1,c=0;c<f.host_groups.length;c++)f.inventory_groups[b].id===f.host_groups[c].id&&(d=!0);d||f.available_groups.push(f.inventory_groups[b])}}).error(function(a,b){i(f,a,b,null,{hdr:"Error!",msg:"Failed to get current groups for host: "+l+". GET returned: "+b})}),f.removeHostsReload&&f.removeHostsReload(),f.removeHostsReload=f.$on("hostsReload",function(){k(a)}),f.$$phase||f.$digest()}}]),angular.module("JobSubmissionHelper",["RestServices","Utilities","CredentialFormDefinition","CredentialsListDefinition","LookUpHelper","ProjectFormDefinition","JobSubmissionHelper"]).factory("PromptPasswords",["CredentialForm","JobTemplateForm","$compile","Rest","$location","ProcessErrors","GetBasePath","Alert","Empty","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(a){function b(a){a?e.path("/"+v):"jobs"===v?q.refreshJob():e.path("/jobs")}function k(){var a=g("jobs")+q.job_id+"/";d.setUrl(a),d.destroy().success(function(){"credential"===t.name&&b(!0)}).error(function(b,c){f(q,b,c,null,{hdr:"Error!",msg:"Call to "+a+" failed. DELETE returned status: "+c})})}var l,m,n,o,p,q=a.scope,r=a.passwords,s=a.start_url,t=a.form,u="",v=e.path().replace(/^\//,"").split("/")[0],w=a.extra_html;if(q.cancelJob=function(){$("#password-modal").modal("hide"),"credential"===t.name?k():q.$emit("UpdateSubmitted","canceled")},q.startJob=function(){var a={},c=!1;$("#password-modal").modal("hide"),j("start"),$(".password-field").each(function(){a[$(this).attr("name")]=$(this).val(),""!==$(this).val()&&null!==$(this).val()&&(c=!0)}),i(r)||0===r.length||c?(d.setUrl(s),d.post(a).success(function(){q.$emit("UpdateSubmitted","started"),"credential"===t.name&&b(!1)}).error(function(a,b){j("stop"),f(q,a,b,null,{hdr:"Error!",msg:"POST to "+s+" failed with status: "+b})})):(j("stop"),h("No Passwords","Required password(s) not provided. The request was not submitted.","alert-info"),"credential"===t.name&&q.cancelJob())},r&&r.length>0){for(j("stop"),u+='<form class="form-horizontal" name="password_form" novalidate>\n',u+=w?w:"",o=0;o<r.length;o++)"credential"===t.name?t.fields[r[o]]?p=t:(h("Form Not Found","Could not locate form for: "+r[o],"alert-danger"),e("/#/jobs")):p=t,l=p.fields[r[o]],n=r[o],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="password-field form-control" ',u+="required ",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n",n=l.associated,l=p.fields[l.associated],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="form-control" ',u+="required ",u+=l.awPassMatch?'awpassmatch="'+l.associated+'" ':"",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',l.awPassMatch&&(u+='<span class="error" ng-show="password_form.'+n+'.$error.awpassmatch">Must match Password value</span>\n'),u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n";u+="</form>\n",m=angular.element(document.getElementById("password-body")),m.html(u),c(m.contents())(q),$("#password-modal").modal(),$("#password-modal").on("shown.bs.modal",function(){$("#password-body").find('input[type="password"]:first').focus()})}else q.startJob()}}]).factory("SubmitJob",["PromptPasswords","$compile","Rest","$location","GetBasePath","CredentialList","LookUpInit","CredentialForm","ProcessErrors","JobTemplateForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k){return function(b){function l(b){var e,f,g;m.credentialWatchRemove&&m.credentialWatchRemove(),e=(new Date).toISOString(),f=b.related.jobs?b.related.jobs:b.related.job_template+"jobs/",g=o?o:b.name,k("start"),c.setUrl(f),c.post({name:g+" "+e,description:b.description,job_template:b.id,inventory:b.inventory,project:b.project,playbook:b.playbook,credential:b.credential,forks:b.forks,limit:b.limit,verbosity:b.verbosity,extra_vars:b.extra_vars}).success(function(b){m.job_id=b.id,b.passwords_needed_to_start.length>0?a({scope:m,passwords:b.passwords_needed_to_start,start_url:b.related.start,form:h}):(c.setUrl(b.related.start),c.post().success(function(){k("stop");var a=d.path().replace(/^\//,"").split("/")[0];"jobs"===a?m.refresh():d.path("/jobs")}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to start job. POST returned status: "+b})}))}).error(function(a,b){k("stop"),i(m,a,b,null,{hdr:"Error!",msg:"Failed to create job. POST returned status: "+b})})}var m=b.scope,n=b.id,o=b.template?b.template:null,p=d.path().replace(/^\//,"").split("/")[0],q=e(p)+n+"/";k("start"),c.setUrl(q),c.get().success(function(a){m.credential="",""===a.credential||null===a.credential?(k("stop"),m.credentialWatchRemove&&m.credentialWatchRemove(),m.credentialWatchRemove=m.$watch("credential",function(b,c){b!==c&&""!==m.credential&&null!==m.credential&&void 0!==m.credential&&(a.credential=m.credential,l(a))}),g({scope:m,form:j,current_item:null,list:f,field:"credential",hdr:"Credential Required"}),m.lookUpCredential()):l(a)}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to get job template details. GET returned status: "+b})})}}]).factory("ProjectUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","ProjectsForm","Wait",function(a,b,c,d,e,f,g,h,i){return function(b){var d=b.scope,j=b.project_id,k=e("projects")+j+"/update/";d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(){i("stop"),g("Update Started","The request to start the SCM update process was submitted. To monitor the update status, refresh the page by clicking the <em>Refresh</em> button.","alert-info"),d.refresh()}),d.removeSCMSubmit&&d.removeSCMSubmit(),d.removeSCMSubmit=d.$on("SCMSubmit",function(b,c,e){a({scope:d,passwords:c,start_url:k,form:h,extra_html:e})}),i("start"),c.setUrl(k),c.get().success(function(a){var b,c;if(i("stop"),a.can_update){for(c="",b=0;b<d.projects.length;b++)if(d.projects[b].id===j){c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_url">SCM URL</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_url" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_url+'" ',c+="/>",c+="</div>\n",c+="</div>\n",d.projects[b].scm_username&&(c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_username">SCM Username</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_username" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_username+'" ',c+="/>",c+="</div>\n",c+="</div>\n");break}c+="</p>",d.$emit("SCMSubmit",a.passwords_needed_to_update,c)}else g("Permission Denied","You do not have access to update this project. Please contact your system administrator.","alert-danger")}).error(function(a,b){f(d,a,b,null,{hdr:"Error!",msg:"Failed to get project update details: "+k+" GET status: "+b})})}}]).factory("InventoryUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","GroupForm","BuildTree","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(b){var d=b.scope,e=b.url,i=b.group_id,k=b.tree_id;d.removeHostReloadComplete&&d.removeHostReloadComplete(),d.removeHostReloadComplete=d.$on("HostReloadComplete",function(){j("stop"),g("Update Started",'Your request to start the inventory sync process was submitted. Monitor progress by clicking the <i class="fa fa-refresh fa-lg"></i> button.',"alert-info"),d.removeHostReloadComplete&&d.removeHostReloadComplete()}),d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(a,b){"started"===b&&(d.refreshGroups?(d.selected_tree_id=k,d.selected_group_id=i,d.refreshGroups()):d.refresh&&d.refresh(),d.$emit("HostReloadComplete"))}),d.removeInventorySubmit&&d.removeInventorySubmit(),d.removeInventorySubmit=d.$on("InventorySubmit",function(b,c,f){a({scope:d,passwords:c,start_url:e,form:h,extra_html:f})}),j("start"),c.setUrl(e),c.get().success(function(a){a.can_update?d.$emit("InventorySubmit",a.passwords_needed_to_update):(j("stop"),g("Permission Denied","You do not have access to run the update. Please contact your system administrator.","alert-danger"))}).error(function(a,b){j("stop"),f(d,a,b,null,{hdr:"Error!",msg:"Failed to get inventory_source details. "+e+"GET status: "+b})})}}]),angular.module("JobsHelper",["Utilities","FormGenerator","JobSummaryDefinition","InventoryHelper"]).factory("JobStatusToolTip",[function(){return function(a){var b;switch(a){case"successful":case"success":b="There were no failed tasks.";break;case"failed":b="Some tasks encountered errors.";break;case"canceled":b="Stopped by user request.";break;case"new":b="In queue, waiting on task manager.";break;case"waiting":b="SCM Update or Inventory Update is executing.";break;case"pending":b="Not in queue, waiting on task manager.";break;case"running":b="Playbook tasks executing."}return b}}]).factory("ShowJobSummary",["Rest","Wait","GetBasePath","FormatDate","ProcessErrors","GenerateForm","JobSummary","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h){return function(i){function j(a){var b=a.match(/\n/g),c=b?b.length:1;return c>p?20:c}var k,l,m,n,o,p,q,r,s=i.job_id,t=f,u=g;r='<div id="status-modal-dialog" title="Job '+s+'"><div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(r),k=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),l=$(document).width(),m=$("body").height(),l>1199?(n=675,o=750>m?m-20:750,p=20):1199>=l&&l>=768?(n=550,o=620>m?m-15:620,p=15):(n=l-20,o=500>m?m:500,p=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:n,height:o,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),h()},open:function(){b("stop")}}),b("start"),q=c("jobs")+s+"/",a.setUrl(q),a.get().success(function(a){var b;k.id=a.id,k.name=a.name,k.status=a.status,k.result_stdout=a.result_stdout,k.result_traceback=a.result_traceback,k.stdout_rows=j(k.result_stdout),k.traceback_rows=j(k.result_traceback),b=new Date(a.created),k.created=d(b),$("#status-modal-dialog").dialog("open")}).error(function(a,b){e(k,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})}}]),angular.module("LookUpHelper",["RestServices","Utilities","SearchHelper","PaginationHelpers","ListGenerator","ApiLoader"]).factory("LookUpInit",["Alert","Rest","GenerateList","SearchInit","PaginateInit","GetBasePath","FormatDate","Empty",function(a,b,c,d,e,f,g,h){return function(b){var i,j,k,l,m=b.scope,n=b.form,o=b.list,p=b.field,q=b.postAction;i=b.url?b.url:f("inventories"===o.name?"inventory":o.name),j=o.iterator.charAt(0).toUpperCase()+o.iterator.substring(1),k=b.hdr?b.hdr:"Select "+j,l=/\/$/.test(i)?i+"?":i+"&",l+=n.fields[p].sourceField+"__iexact=:value",$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-url",l),$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-source",p),m["lookUp"+j]=function(){var b=c,f=b.inject(o,{mode:"lookup",hdr:k});$("#lookup-modal").on("hidden.bs.modal",function(){f.searchCleanup&&f.searchCleanup(),(""===m[p]||null===m[p])&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]="",m.$$phase||m.$digest())}),f.selectAction=function(){var c,d=!1;for(c=0;c<f[o.name].length;c++)"1"===f[o.name][c].checked&&(d=!0,m[p]=f[o.name][c].id,m[n.name+"_form"]&&n.fields[p]&&n.fields[p].sourceModel&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]=f[o.name][c][n.fields[p].sourceField],m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField].$setValidity("awlookup",!0)),m[n.name+"_form"]&&m[n.name+"_form"].$setDirty(),b.hide());d===!1?a("Missing Selection","Oops, you failed to make a selection. Click on a row to make your selection, and then click the Select button."):q&&q()},f["toggle_"+o.iterator]=function(a){var b;for(b=0;b<m[o.name].length;b++)f[o.name][b].id===a?(f[o.name][b].checked="1",f[o.name][b].success_class="success"):(f[o.name][b].checked="0",f[o.name][b].success_class="")},d({scope:f,set:o.name,list:o,url:i}),e({scope:f,list:o,url:i,mode:"lookup"}),f.lookupPostRefreshRemove&&f.lookupPostRefreshRemove(),f.lookupPostRefreshRemove=m.$on("PostRefresh",function(){var a,b;for(a in o.fields)if(o.fields[a].type&&"date"===o.fields[a].type)for(b=0;b<m[o.name].length;b++)m[o.name][b][a]=g(new Date(m[o.name][b][a]));if(""!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&null!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField])for(b=0;b<f[o.name].length;b++)if(f[o.name][b][n.fields[p].sourceField]===m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]){m[p]=f[o.name][b].id;break}h(m[p])||f["toggle_"+o.iterator](m[p])}),f.search(o.iterator)}}}]),angular.module("PaginationHelpers",["Utilities","RefreshHelper","RefreshRelatedHelper"]).factory("PageRangeSetup",["Empty",function(a){return function(b){var c,d,e,f=b.scope,g=b.count,h=b.next,i=b.previous,j=b.iterator;for(f[j+"_page"]=1,f[j+"_num_pages"]=Math.ceil(g/f[j+"_page_size"]),f[j+"_num_pages"]=f[j+"_num_pages"]<=0?1:f[j+"_num_pages"],f[j+"_total_rows"]=g,a(h)&&i?f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1:h&&a(i)?f[j+"_page"]=1:h&&i&&(f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1),f[j+"_page_range"]=[],d=f[j+"_page"]>5?f[j+"_page"]-5:1,e=f[j+"_page"]<6?10<=f[j+"_num_pages"]?10:f[j+"_num_pages"]:f[j+"_page"]+4<f[j+"_num_pages"]?f[j+"_page"]+4:f[j+"_num_pages"],c=d;e>=c;c++)f[j+"_page_range"].push(c)}}]).factory("RelatedPaginateInit",["RefreshRelated","$cookieStore","Wait",function(a,b,c){return function(d){var e,f=d.scope,g=d.relatedSets,h=d.pageSize?d.pageSize:10;for(e in g)f[g[e].iterator+"_url"]=g[e].url,f[g[e].iterator+"_page"]=0,f[g[e].iterator+"_page_size"]=h;f.getPage=function(b,d,e){var g=f[e+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=f[e+"SearchParams"]?"&"+f[e+"SearchParams"]+"&page_size="+f[e+"_page_size"]:"page_size="+f[e+"PageSize"],c("start"),a({scope:f,set:d,iterator:e,url:g})},f.pageIsActive=function(a,b){return a===f[b+"_page"]?"active":""},f.changePageSize=function(c,d){f[d+"_page"]=1;var e=f[d+"_url"];b.put(d+"_page_size",f[d+"_page_size"]),e=e.replace(/\/\?.*$/,"/"),e+=f[d+"SearchParams"]?"?"+f[d+"SearchParams"]+"&page_size="+f[d+"_page_size"]:"?page_size="+f[d+"_page_size"],a({scope:f,set:c,iterator:d,url:e})}}}]).factory("PaginateInit",["Refresh","$cookieStore","Wait",function(a,b,c){return function(b){var d=b.scope,e=b.list,f=b.iterator?b.iterator:e.iterator,g=b.mode?b.mode:null;d[f+"_page"]=b.page?b.page:1,d[f+"_url"]=b.url,d[f+"_mode"]=g,d[f+"_page_size"]=b.pageSize?b.pageSize:"lookup"===g?5:20,d.getPage=function(b,e,f){var g=d[f+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=d[f+"SearchParams"]?"&"+d[f+"SearchParams"]+"&page_size="+d[f+"_page_size"]:"page_size="+d[f+"PageSize"],c("start"),a({scope:d,set:e,iterator:f,url:g})},d.pageIsActive=function(a,b){return a===d[b+"_page"]?"active":""},d.changePageSize=function(b,e){d[e+"_page"]=0;var f=d[e+"_url"].replace(/\?page_size\=\d+/,""),g=/\/$/.test(f)?"?":"&";f+=d[e+"SearchParams"]?g+d[e+"SearchParams"]+"&page_size="+d[e+"_page_size"]:g+"page_size="+d[e+"_page_size"],c("start"),a({scope:d,set:b,iterator:e,url:f})}}}]),angular.module("ParseHelper",[]).factory("ParseTypeChange",[function(){return function(a,b,c){var d=b?b:"variables",e=c?c:"parseType";a.blockParseTypeWatch=!1,a.blockVariableDataWatch=!1,a["remove"+d+"Watch"]&&a["remove"+d+"Watch"](),a["remove"+d+"Watch"]=a.$watch(e,function(b,c){var e;if(b!==c)if("json"===b)if(a[d]&&!/^---$/.test(a[d]))try{e=jsyaml.load(a[d]),a[d]=JSON.stringify(e,null," ")}catch(f){}else a[d]="{}";else if(a[d]&&!/^\{\}$/.test(a[d]))try{e=JSON.parse(a[d]),a[d]=jsyaml.safeDump(e)}catch(f){}else a[d]="---"})}}]),angular.module("PermissionsHelper",[]).factory("PermissionCategoryChange",[function(){return function(a){var b=a.scope,c=a.reset;"Inventory"===b.category?(b.projectrequired=!1,b.permissionTypeHelp="<dl>\n<dt>Read</dt>\n<dd>Only allow the user or team to view the inventory.</dd>\n<dt>Write</dt>\n<dd>Allow the user or team to modify hosts and groups contained in the inventory, add new hosts and groups, and perform inventory sync operations.\n<dt>Admin</dt>\n<dd>Allow the user or team full access to the inventory. This includes reading, writing, deletion of the inventory and inventory sync operations.</dd>\n</dl>\n"):(b.projectrequired=!0,b.permissionTypeHelp="<dl>\n<dt>Run</dt>\n<dd>Allow the user or team to perform a live deployment of the project against the inventory. In Run mode modules will be executed, and changes to the inventory will occur.</dd>\n<dt>Check</dt>\n<dd>Only allow the user or team to deploy the project against the inventory as a dry-run operation. In Check mode, module operations will only be simulated. No changes will occur.</dd>\n</dl>\n"),c&&(b.permission_type="Inventory"===b.category?"read":"run")}}]),angular.module("ProjectPathHelper",["RestServices","Utilities"]).factory("GetProjectPath",["Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d){return function(a){function e(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].value);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].value===d[c]&&e.push(a[b]);return e}var f=a.scope,g=a.master;f.showMissingPlaybooksAlert=!1,b.setUrl(c("config")),b.get().success(function(a){var b,c=[];
for(b=0;b<a.project_local_paths.length;b++)c.push({label:a.project_local_paths[b],value:a.project_local_paths[b]});if(f.local_path&&c.push({label:f.local_path,value:f.local_path}),f.project_local_paths=e(c),f.local_path)for(b=0;f.project_local_paths.length;b++)if(f.project_local_paths[b].value===f.local_path){f.local_path=f.project_local_paths[b];break}f.base_dir=a.project_base_dir,g.local_path=f.local_path,g.base_dir=f.base_dir,0===c.length&&(f.showMissingPlaybooksAlert=!0)}).error(function(a,b){d(f,a,b,null,{hdr:"Error!",msg:"Failed to access API config. GET status: "+b})})}}]),angular.module("ProjectsHelper",["RestServices","Utilities","ProjectStatusDefinition","ProjectFormDefinition"]).factory("ProjectStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","ProjectStatusForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,j,n,o=a.project_id,p=a.last_update,q=g,r=l;m("start"),b='<div id="status-modal-dialog"><div id="form-container" style="width: 100%;"></div></div>\n',$("#projects-modal-container").empty().append(b),c=q.inject(r,{mode:"edit",id:"form-container",related:!1,breadCrumbs:!1}),q.reset(),d=$(document).width(),f=$("body").height(),d>1199?(h=675,j=750>f?f-20:750,n=20):1199>=d&&d>=768?(h=550,j=620>f?f-15:620,n=15):(h=d-20,j=500>f?f:500,n=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:h,height:j,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#projects-modal-container").empty()},open:function(){m("stop")}}),e.setUrl(p),e.get().success(function(a){var b,d=a;for(b in r.fields)d[b]?c[b]="created"===b?k(new Date(d[b])):d[b]:d.summary_fields.project[b]&&(c[b]=d.summary_fields.project[b]);$("#status-modal-dialog").dialog({title:d.summary_fields.project.name+" Status"}).dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(c,a,b,r,{hdr:"Error!",msg:"Failed to retrieve status of project: "+o+". GET status: "+b})})}}]),angular.module("SelectionHelper",["Utilities","RestServices"]).factory("SelectionInit",["Rest","Alert","ProcessErrors","ReturnToCaller","Wait",function(a,b,c,d,e){return function(b){var f,g=b.scope,h=b.list,i=b.url,j=b.returnToCaller;f=void 0!==b.selected?b.selected:[],g.formModalActionDisabled=!0,g.disableSelectBtn=!0,g["toggle_"+h.iterator]=function(a,b){var c,d,e;for(c=0;c<g[h.name].length;c++)if(g[h.name][c].id===a)if("0"===g[h.name][c].checked&&!b||1===g[h.name][c].checked&&b){for(g[h.name][c].checked="1",g[h.name][c].success_class="success",e=!1,d=0;d<f.length;d++)if(f[d].id===a){e=!0;break}e||f.push(g[h.name][c])}else for(g[h.name][c].checked="0",g[h.name][c].success_class="",d=0;d<f.length;d++)if(f[d].id===a){f.splice(d,1);break}f.length>0?(g.formModalActionDisabled=!1,g.disableSelectBtn=!1):(g.formModalActionDisabled=!0,g.disableSelectBtn=!0)},g.finishSelection=function(){function b(){f=[],void 0!==j?d(j):($("#form-modal").modal("hide"),g.$emit("modalClosed"))}function k(b){a.post(b).success(function(a,b){m.push({result:"success",data:a,status:b}),g.$emit("callFinished")}).error(function(a,b,c){m.push({result:"error",data:a,status:b,headers:c}),g.$emit("callFinished")})}a.setUrl(i);var l,m=[];if(g.formModalActionDisabled=!0,g.disableSelectBtn=!0,e("start"),g.callFinishedRemove&&g.callFinishedRemove(),g.callFinishedRemove=g.$on("callFinished",function(){var a,d=0;if(m.length===f.length){for(e("stop"),a=0;a<m.length;a++)"error"===m[a].result&&(c(g,m[a].data,m[a].status,null,{hdr:"POST Failure",msg:"Failed to add "+h.iterator+". POST returned status: "+m[a].status}),d++);0===d&&b()}}),f.length>0)for(l=0;l<f.length;l++)k(f[l]);else b()},g.formModalAction=g.finishSelection,g.SelectPostRefreshRemove&&g.SelectPostRefreshRemove(),g.SelectPostRefreshRemove=g.$on("PostRefresh",function(){var a,b,c;if(g[h.name])for(a=0;a<g[h.name].length;a++){for(c=!1,b=0;b<f.length;b++)if(f[b].id===g[h.name][a].id){c=!0;break}c?(g[h.name][a].checked="1",g[h.name][a].success_class="success"):(g[h.name][a].checked="0",g[h.name][a].success_class="")}})}}]),angular.module("UserHelper",["UserFormDefinition"]).factory("ResetForm",["UserForm",function(a){return function(){a.fields.first_name.readonly=!1,a.fields.first_name.editRequired=!0,a.fields.last_name.readonly=!1,a.fields.last_name.editRequired=!0,a.fields.email.readonly=!1,a.fields.email.editRequired=!0,a.fields.organization.awRequiredWhen={variable:"orgrequired",init:!0},a.fields.organization.readonly=!1,a.fields.username.awRequiredWhen={variable:"not_ldap_user",init:!0},a.fields.username.readonly=!1,a.fields.password.editRequired=!1,a.fields.password.addRrequired=!0}}]),angular.module("APIDefaults",["RestServices","Utilities"]).factory("GetAPIDefaults",["Alert","Rest","$rootScope",function(a,b,c){return function(a){function d(a){var b,d={};for(b in c.apiDefaults)if(b===a||b.iterator===a){d[b]=c.apiDefaults[b];break}return d}function e(){if($.isEmptyObject(g)&&5>h)h++,setTimeout(1e3,e());else if("success"===g.status)return d(a)}var f,g={},h=0;return null===c.apiDefaults||void 0===c.apiDefaults?(f="/api/v1/",b.setUrl(f),b.get().success(function(a){var b,d=a;for(b in d)switch(b){case"organizations":d[b].iterator="organization";break;case"jobs":d[b].iterator="job";break;case"users":d[b].iterator="user";break;case"teams":d[b].iterator="team";break;case"hosts":d[b].iterator="host";break;case"groups":d[b].iterator="group";break;case"projects":d[b].iterator="project";break;case"inventories":d[b].iterator="inventory"}c.apiDefaults=d,g={status:"success"}}).error(function(a,b){g={status:"error",msg:"Call to "+f+" failed. GET returned status: "+b}}),e()):d(a)}}]),angular.module("InventoryHelper",["RestServices","Utilities","OrganizationListDefinition","ListGenerator","AuthService","InventoryHelper","InventoryFormDefinition","ParseHelper","SearchHelper"]).factory("WatchInventoryWindowResize",["ApplyEllipsis",function(a){return function(){var b;$(window).resize(function(){clearTimeout(b),b=setTimeout(function(){$("#groups_table .name-column").each(function(){var a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%";$(this).find(".group-name").css({width:e})}),a("#groups_table .group-name a"),a("#hosts_table .host-name a")},100)})}}]).factory("SaveInventory",["InventoryForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i){return function(e){var f,h,j,k=e.scope,l=a,m=g("inventory");i("start");try{if(h="json"===k.inventoryParseType?JSON.parse(k.inventory_variables):jsyaml.load(k.inventory_variables),"object"!=typeof h)throw"failed to return an object!";j={};for(f in l.fields)"inventory_variables"!==f&&(l.fields[f].realName?j[l.fields[f].realName]=k[f]:j[f]=k[f]);b.setUrl(m+k.inventory_id+"/"),b.put(j).success(function(a){k.inventory_variables?(b.setUrl(a.related.variable_data),b.put(h).success(function(){i("stop"),k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory varaibles. PUT returned status: "+b})})):k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory. POST returned status: "+b})})}catch(n){i("stop"),c("Error","Error parsing inventory variables. Parser returned: "+n)}}}]).factory("EditInventoryProperties",["InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","SaveInventory","Wait","Store","SearchInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(n){var o,p=n.scope,q=n.inventory_id,r=b,s=a,t={},u=l("CurrentSearchParams");s.well=!1,o=r.inject(s,{mode:"edit",modal:!0,related:!1,modal_show:!1}),s.well=!0,i(o,"inventory_variables","inventoryParseType"),o.inventoryParseType="yaml",o.formModalActionLabel="Save",o.formModalCancelShow=!0,o.formModalInfo=!1,o.formModalHeader="Inventory Properties",k("start"),c.setUrl(h("inventory")+q+"/"),c.get().success(function(a){var b,c;for(b in s.fields){if("inventory_variables"===b){if($.isEmptyObject(a.variables)||"{}"===a.variables||"null"===a.variables||""===a.variables)o.inventory_variables="---";else try{c=JSON.parse(a.variables),o.inventory_variables=jsyaml.safeDump(c)}catch(e){d("Variable Parse Error","Attempted to parse variables for inventory: "+q+". Parse returned: "+e),console&&(console.log(e),console.log("data:"),console.log(a.variables)),o.inventory_variables="---"}t.inventory_variables=o.variables}else"inventory_name"===b?(o[b]=a.name,t[b]=o[b]):"inventory_description"===b?(o[b]=a.description,t[b]=o[b]):a[b]&&(o[b]=a[b],t[b]=o[b]);s.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[s.fields[b].sourceModel]&&(o[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField],t[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField])}f({scope:o,form:s,current_item:o.organization,list:g,field:"organization"}),k("stop"),$("#form-modal").modal("show")}).error(function(a,b){e(o,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+q+". GET returned: "+b})}),o.removeInventorySaved&&o.removeInventorySaved(),o.removeInventorySaved=o.$on("InventorySaved",function(){$("#form-modal").modal("hide"),o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1}),p.$emit("RefreshInventories")}),o.cancelModal=function(){o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1})},o.formModalAction=function(){p.inventory_id=q,p.inventory_name=o.inventory_name,j({scope:o})}}}]),angular.module("md5Helper",["RestServices","Utilities"]).factory("md5Setup",[function(){return function(a){var b=a.scope,c=a.master,d=a.check_field,e=a.default_val;b[d]=e,c[d]=e,b.genMD5=function(a){var c=new Date;b[a]=$.md5("AnsibleWorks"+c.getTime())},b.toggleCallback=function(a){"false"===b.allow_callbacks&&(b[a]="")},b.selectAll=function(a){$('input[name="'+a+'"]').focus().select()}}}]),angular.module("RefreshRelatedHelper",["RestServices","Utilities","PaginationHelpers"]).factory("RefreshRelated",["ProcessErrors","Rest","Wait","PageRangeSetup",function(a,b,c,d){return function(e){var f=e.scope,g=e.set,h=e.iterator,i=e.url;b.setUrl(i),b.get().success(function(a){d({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[g]=a.results,f[h+"Loading"]=!1,f[h+"HoldInput"]=!1,c("stop"),f.$emit("related"+g)}).error(function(b,c){a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RefreshHelper",["RestServices","Utilities","PaginationHelpers"]).factory("Refresh",["ProcessErrors","Rest","Wait","Empty","PageRangeSetup",function(a,b,c,d,e){return function(d){var f=d.scope,g=d.set,h=d.iterator,i=d.url;f.current_url=i,b.setUrl(i),b.get().success(function(a){var b,d;for(e({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[h+"Loading"]=!1,b=1;3>=b;b++)d=1===b?"":b,f[h+"HoldInput"+d]=!1;f[g]=a.results,window.scrollTo(0,0),c("stop"),f.$emit("PostRefresh")}).error(function(b,c){f[h+"HoldInput"]=!1,a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RelatedSearchHelper",["RestServices","Utilities","RefreshRelatedHelper"]).factory("RelatedSearchInit",["$timeout","Alert","Rest","RefreshRelated","Wait",function(a,b,c,d,e){return function(a){function b(a){var b,c,d,e;for(e in h.related)if("tree"!==h.related[e].type&&(void 0===a||a===h.related[e].iterator)){b=h.related[e].iterator;for(d in h.related[e].fields)if(h.related[e].fields[d].key){f[b+"SearchField"]=d,f[b+"SearchFieldLabel"]=h.related[e].fields[d].label;break}f[b+"SortOrder"]=null,f[b+"SearchType"]="icontains",f[b+"SearchTypeLabel"]="Contains",f[b+"SearchValue"]=null,f[b+"SelectShow"]=!1,f[b+"ShowStartBtn"]=!0,f[b+"HideAllStartBtn"]=!1,c=f[b+"SearchField"],!h.related[e].fields[c].searchType||"boolean"!==h.related[e].fields[c].searchType&&"select"!==h.related[e].fields[c].searchType||(f[b+"SelectShow"]=!0,f[b+"SearchSelectOpts"]=h.fields[c].searchOptions),h.related[e].fields[c].searchType&&"gtzero"===h.related[e].fields[c].searchType&&(f[b+"InputHide"]=!0)}}var c,f=a.scope,g=a.relatedSets,h=a.form;b(),f.resetSearch=function(a){b(a),f.search(a)},f.setSearchField=function(a,b,c){var d,e;for(e in h.related)h.related[e].iterator===a&&(d=h.related[e].fields[b]);f[a+"SearchFieldLabel"]=c,f[a+"SearchField"]=b,f[a+"SearchValue"]="",f[a+"SelectShow"]=!1,f[a+"InputHide"]=!1,f[a+"ShowStartBtn"]=!0,void 0!==d.searchType&&"gtzero"===d.searchType&&(f[a+"InputHide"]=!0,f[a+"ShowStartBtn"]=!1),void 0===d.searchType||"boolean"!==d.searchType&&"select"!==d.searchType||(f[a+"SelectShow"]=!0,f[a+"SearchSelectOpts"]=d.searchOptions),void 0!==d.searchType&&"int"===d.searchType&&(f[a+"SearchType"]="int"),f.search(a)},f.setSearchType=function(a,b,c){f[a+"SearchTypeLabel"]=c,f[a+"SearchType"]=b,f.search(a)},f.startSearch=function(a,b){13===a.keyCode&&f.search(b)},f.search=function(a){e("start"),f[a+"Loading"]=!0,f[a+"HoldInput"]=!0,f[a+"SearchValue"]&&(f[a+"ShowStartBtn"]=!1),"host"===a&&"has_active_failures"===f.hostSearchField&&(f.hostFailureFilter=f.hostSearchSelectValue&&1===f.hostSearchSelectValue.value?!0:!1);var b,i,j,k,l;for(i in g)if(g[i].iterator===a){j=i,k=g[i].url;for(b in h.related[i].fields)h.related[i].fields[b].key&&(l=h.related[i].fields[b].desc?"-"+b:b);break}l=null===f[a+"SortOrder"]?l:f[a+"SortOrder"],c=h.related[j].fields[f[a+"SearchField"]],f[a+"SelectShow"]===!1&&""!==f[a+"SearchValue"]&&void 0!==f[a+"SearchValue"]||f[a+"SelectShow"]&&f[a+"SearchSelectValue"]||c.searchType&&"gtzero"===c.searchType?(f[a+"SearchParams"]=c.sourceModel?c.sourceModel+"__"+c.sourceField+"__":c.searchField?c.searchField+"__":f[a+"SearchField"]+"__",f[a+"SearchParams"]+=!c.searchType||"int"!==c.searchType&&"boolean"!==c.searchType?c.searchType&&"gtzero"===c.searchType?"gt=0":f[a+"SearchType"]+"=":"int=",!c.searchType||"boolean"!==c.searchType&&"select"!==c.searchType?(void 0===c.searchType||"gtzero"===c.searchType)&&(f[a+"SearchParams"]+=encodeURI(f[a+"SearchValue"])):f[a+"SearchParams"]+=f[a+"SearchSelectValue"].value,f[a+"SearchParams"]+=l?"&order_by="+encodeURI(l):""):f[a+"SearchParams"]=l?"order_by="+encodeURI(l):"",f[a+"Page"]=0,k+=k.match(/\/$/)?"?":"&",k+=f[a+"SearchParams"],k+=f[a+"PageSize"]?"&page_size="+f[a+"PageSize"]:"",d({scope:f,set:j,iterator:a,url:k})},f.sort=function(a,b){var c,d,e,g;$("."+a+" .list-header").each(function(){if($(this).attr("id")!==a+"-"+b+"-header"){var c=$(this).find("i");c.attr("class","icon-sort")}}),d=$("#"+a+"-"+b+"-header i"),e="",d.hasClass("icon-sort")?(d.removeClass("icon-sort"),d.addClass("icon-sort-up")):d.hasClass("icon-sort-up")?(d.removeClass("icon-sort-up"),d.addClass("icon-sort-down"),e="-"):d.hasClass("icon-sort-down")&&(d.removeClass("icon-sort-down"),d.addClass("icon-sort-up"));for(g in h.related)h.related[g].iterator===a&&(c=h.related[g].fields[b].sourceModel?e+h.related[g].fields[b].sourceModel+"__"+h.related[g].fields[b].sourceField:e+b);f[a+"SortOrder"]=c,f.search(a)}}}]),angular.module("SearchHelper",["RestServices","Utilities","RefreshHelper"]).factory("SearchInit",["Alert","Rest","Refresh","$location","GetBasePath","Empty","$timeout","Wait","Store",function(a,b,c,d,e,f,g,h,i){return function(a){function b(a){var b,c,d,e;e=void 0===a||1===a?"":a,l[p+"SearchField"+e]="",l[p+"SearchFieldLabel"+e]="";for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&o.fields[c].key){o.fields[c].sourceModel?(d=o.fields[c].sourceModel+"__"+o.fields[c].sourceField,r=o.fields[c].desc?"-"+d:d):r=o.fields[c].desc?"-"+c:c,(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)&&(l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label);break}if(f(l[p+"SearchField"+e]))for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)){l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label;break}l[p+"SearchType"+e]="icontains",l[p+"SearchTypeLabel"+e]="Contains",l[p+"SearchParams"+e]="",l[p+"SearchValue"+e]="",l[p+"SelectShow"+e]=!1,l[p+"HideSearchType"+e]=!1,l[p+"InputDisable"+e]=!1,l[p+"ExtraParms"+e]="",l[p+"ShowStartBtn"+e]=!0,l[p+"HideAllStartBtn"+e]=!1,l[p+"SearchPlaceholder"+e]=o.fields[l[p+"SearchField"+e]]&&o.fields[l[p+"SearchField"+e]].searchPlaceholder?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]:o.fields[l[p+"SearchField"+e]].searchPlaceholder:"Search",l[p+"InputDisable"+e]=o.fields[l[p+"SearchField"+e]]&&"all"===o.fields[l[p+"SearchField"+e]].searchObject?!0:!1,b=l[p+"SearchField"+e],o.fields[b]&&(!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType||(l[p+"SelectShow"+e]=!0,l[p+"SearchSelectOpts"+e]=o.fields[b].searchOptions),o.fields[b].searchType&&"int"===o.fields[b].searchType&&(l[p+"HideSearchType"+e]=!0),o.fields[b].searchType&&"gtzero"===o.fields[b].searchType&&(l[p+"InputHide"+e]=!0))}var e,g,j,k,l=a.scope,m=a.set,n=a.url,o=a.list,p=a.iterator?a.iterator:o.iterator,q=a.setWidgets===!1?!1:!0,r=a.sort_order||"";if(q)for(e=o.searchWidgets?o.searchWidgets:1,g=1;e>=g;g++)j=1===g?"":g,$("#search-widget-container"+j)&&b(g);k={set:m,defaultUrl:n,list:o,iterator:p,sort_order:r},i("CurrentSearchParams",k),l.setSearchField=function(a,b,c,d){var e=void 0===d||1===d?"":d;l[a+"SearchFieldLabel"+e]=c,l[a+"SearchField"+e]=b,l[a+"SearchValue"+e]="",l[a+"SelectShow"+e]=!1,l[a+"HideSearchType"+e]=!1,l[a+"InputHide"+e]=!1,l[a+"SearchType"+e]="icontains",l[a+"InputDisable"+e]="all"===o.fields[b].searchObject?!0:!1,l[a+"ShowStartBtn"+e]=!0,l[a+"SearchPlaceholder"+e]=o.fields[l[a+"SearchField"+e]]&&o.fields[l[a+"SearchField"+e]].searchPlaceholder?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]:o.fields[l[a+"SearchField"+e]].searchPlaceholder:"Search",o.fields[b].searchType&&"gtzero"===o.fields[b].searchType?(l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1,l.search(a)):o.fields[b].searchSingleValue?(l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"SearchSelectValue"+e]="boolean"===o.fields[b].searchType&&"true"===o.fields[b].searchValue?{value:1}:"boolean"===o.fields[b].searchType&&"false"===o.fields[b].searchValue?{value:0}:{value:o.fields[b].searchValue},l[a+"ShowStartBtn"+e]=!1):"in"===o.fields[b].searchType?(l[a+"SearchType"+e]="in",l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1):!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType&&"select_or"!==o.fields[b].searchType?o.fields[b].searchType&&"int"===o.fields[b].searchType?l[a+"SearchType"+e]="int":o.fields[b].searchType&&"isnull"===o.fields[b].searchType&&(l[a+"SearchType"+e]="isnull",l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]="true",l[a+"ShowStartBtn"+e]=!1):(l[a+"SelectShow"+e]=!0,l[a+"SearchSelectOpts"+e]=o.fields[b].searchOptions),l.search(a)},l.resetSearch=function(a){var c,e=o.searchWidgets?o.searchWidgets:1;for(c=1;e>=c;c++)b(c);window.location="/#"+d.path(),l.search(a)},l.removeDoSearch&&l.removeDoSearch(),l.removeDoSearch=l.$on("doSearch",function(a,b,d,e){l[b+"Loading"]=void 0===e||e===!0?!0:!1;var f,g=n;l[b+"Page"]=d?parseInt(d)-1:0,l[b+"SearchParams"]&&(g+=/\/$/.test(g)?"?"+l[b+"SearchParams"]:"&"+l[b+"SearchParams"]),f=/\/$/.test(g)?"?":"&",g+=l[b+"_page_size"]?f+"page_size="+l[b+"_page_size"]:"",d&&(f=/\/$/.test(g)?"?":"&",g+=f+"page="+d),l[b+"ExtraParms"]&&(f=/\/$/.test(g)?"?":"&",g+=f+l[b+"ExtraParms"]),g=g.replace(/\&\&/,"&"),c({scope:l,set:m,iterator:b,url:g})}),l.removePrepareSearch&&l.removePrepareSearch(),l.removePrepareSearch=l.$on("prepareSearch",function(a,b,c,d,e){h("start"),l[b+"SearchParams"]="";var f,g,i=o.searchWidgets?o.searchWidgets:1;for(f=1;i>=f;f++)g=1===f?"":f,$("#search-widget-container"+g)&&o.fields[l[b+"SearchField"+g]]&&o.fields[l[b+"SearchField"+g]].searchObject&&("all"!==o.fields[l[b+"SearchField"+g]].searchObject?(l[b+"HideAllStartBtn"+g]=!1,l[b+"SearchValue"+g]?(l[b+"ShowStartBtn"+g]=!1,l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+g]].searchOnID?"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__id="+l[b+"SearchValue"+g]:"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__name__icontains="+l[b+"SearchValue"+g]):(l[b+"ShowStartBtn"+g]=!0,l[b+"SearchParams"]+="&"+o.fields[l[b+"SearchField"+g]].searchField+"="+o.fields[l[b+"SearchField"+g]].searchObject)):l[b+"HideAllStartBtn"+g]=!0);l.$emit("prepareSearch2",b,c,d,e)}),l.removePrepareSearch2&&l.removePrepareSearch2(),l.removePrepareSearch2=l.$on("prepareSearch2",function(a,b,c,d,e){var g,h,i=o.searchWidgets?o.searchWidgets:1;for(g=1;i>=g;g++)h=1===g?"":g,l[b+"HoldInput"+h]=!0,$("#search-widget-container"+h)&&o.fields[l[b+"SearchField"+h]]&&!o.fields[l[b+"SearchField"+h]].searchObject&&(l[b+"ShowStartBtn"+h]=l[b+"SearchValue"+h]?!1:!0,(!l[b+"SelectShow"+h]&&!f(l[b+"SearchValue"+h])||l[b+"SelectShow"+h]&&l[b+"SearchSelectValue"+h]||o.fields[l[b+"SearchField"+h]]&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+h]].searchField?"&"+o.fields[l[b+"SearchField"+h]].searchField+"__":o.fields[l[b+"SearchField"+h]].sourceModel?"&"+o.fields[l[b+"SearchField"+h]].sourceModel+"__"+o.fields[l[b+"SearchField"+h]].sourceField+"__":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?"&"+l[b+"SearchField"+h]+"__":"&"+l[b+"SearchField"+h]+"__",l[b+"SearchParams"]+=!o.fields[l[b+"SearchField"+h]].searchType||"int"!==o.fields[l[b+"SearchField"+h]].searchType&&"boolean"!==o.fields[l[b+"SearchField"+h]].searchType?o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType?"gt=0":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?l[b+"SearchType"+h]+"=":"iexact=":"int=",!o.fields[l[b+"SearchField"+h]].searchType||"boolean"!==o.fields[l[b+"SearchField"+h]].searchType&&"select"!==o.fields[l[b+"SearchField"+h]].searchType?(!o.fields[l[b+"SearchField"+h]].searchType||o.fields[l[b+"SearchField"+h]].searchType&&"or"!==o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"!==o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=encodeURI(l[b+"SearchValue"+h])):l[b+"SearchParams"]+=l[b+"SearchSelectValue"+h].value));("inventory"===b&&l.inventoryFailureFilter||"host"===b&&l.hostFailureFilter)&&(l[b+"SearchParams"]+="&has_active_failures=true"),r&&(l[b+"SearchParams"]+=l[b+"SearchParams"]?"&":"",l[b+"SearchParams"]+="order_by="+encodeURI(r)),l.$emit("doSearch",b,c,d,e)}),l.startSearch=function(a,b){13===a.keyCode&&l.search(b)},l.search=function(a,b,c){c=void 0===c?!0:!1,c&&(l[m]=[]),l.$emit("prepareSearch",a,b,c)},l.sort=function(a){$(".list-header").each(function(){if($(this).attr("id")!==a+"-header"){var b=$(this).find("i");b.attr("class","fa fa-sort")}});var b=$("#"+a+"-header i"),c="";b.hasClass("fa-sort")?(b.removeClass("fa-sort"),b.addClass("fa-sort-up")):b.hasClass("fa-sort-up")?(b.removeClass("fa-sort-up"),b.addClass("fa-sort-down"),c="-"):b.hasClass("fa-sort-down")&&(b.removeClass("fa-sort-down"),b.addClass("fa-sort-up")),r=o.fields[a].searchField?c+o.fields[a].searchField:o.fields[a].sortField?c+o.fields[a].sortField:o.fields[a].sourceModel?c+o.fields[a].sourceModel+"__"+o.fields[a].sourceField:c+a,l.search(o.iterator)},l.searchCleanup=function(){l.removeDoSearch(),l.removePrepareSearch(),l.removePrepareSearch2()}}}]),angular.module("TeamHelper",["RestServices","Utilities","OrganizationListDefinition","SearchHelper","PaginationHelpers","ListGenerator"]).factory("SetTeamListeners",["Alert","Rest",function(a,b){return function(a){var c=a.scope,d=a.set,e=a.iterator;c.$on("TeamResultFound",function(a,b,f){var g,h,i,j;if(f.length===b.length){for(i="organization",j="organization_name",g=0;g<b.length;g++)for(h=0;h<f.length;h++)b[g][i]===f[h].id&&(b[g][j]=f[h].value);c[e+"SearchSpin"]=!1,c[d]=b}}),c.$on("TeamRefreshFinished",function(a,d){function e(a){b.setUrl(a),b.get().success(function(a){h.push({id:a.id,value:a.name}),c.$emit("TeamResultFound",d,h)}).error(function(){h.push({id:"error"}),c.$emit("TeamResultFound",d,h)})}var f,g,h=[];for(f=0;f<d.length;f++)g="/api/v1/organizations/"+d[f].organization+"/",e(g)})}}]).factory("TeamLookUpOrganizationInit",["Alert","Rest","OrganizationList","GenerateList","SearchInit","PaginateInit",function(a,b,c,d,e,f){return function(b){var g=b.scope;g.lookUpOrganization=function(){var b=c,h=d,i=h.inject(b,{mode:"lookup",hdr:"Select Organization"}),j="/api/v1/organizations/";i.selectAction=function(){var c,d=!1;for(c=0;c<i[b.name].length;c++)"success"===i[b.iterator+"_"+i[b.name][c].id+"_class"]&&(d=!0,g.organization=i[b.name][c].id,g.organization_name=i[b.name][c].name,g.team_form.$setDirty(),h.hide());d===!1&&a("No Selection","Click on a row to select an Organization before clicking the Select button.")},i.toggle_organization=function(a){if(i[b.name])for(var c=0;c<i[b.name].length;c++)i[b.iterator+"_"+i[b.name][c].id+"_class"]="";null!==a&&void 0!==a&&(i[b.iterator+"_"+a+"_class"]="success")},e({scope:i,set:b.name,list:b,url:j}),f({scope:i,list:b,url:j,mode:"lookup"}),g.search(b.iterator),i.toggle_organization(g.organization)}}}]),angular.module("AdminListDefinition",[]).value("AdminList",{name:"admins",iterator:"admin",selectTitle:"Add Administrators",editTitle:"Admins",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p>",base:"users",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{},fieldActions:{}}),angular.module("CloudCredentialsListDefinition",[]).value("CloudCredentialList",{name:"cloudcredentials",iterator:"cloudcredential",selectTitle:"Add Cloud Credentials",editTitle:"Cloud Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},team:{label:"Team",ngBind:"credential.team_name",sourceModel:"team",sourceField:"name",excludeModal:!0},user:{label:"User",ngBind:"credential.user_username",sourceModel:"user",sourceField:"username",excludeModal:!0}},actions:{add:{mode:"all",ngClick:"addCredential()","class":"btn-sm",awToolTip:"Create a new credential"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash-o",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("CredentialsListDefinition",[]).value("CredentialList",{name:"credentials",iterator:"credential",selectTitle:"Add Credentials",editTitle:"Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},kind:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0}},actions:{add:{mode:"all",ngClick:"addCredential()",awToolTip:"Create a new credential"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("GroupListDefinition",[]).value("GroupList",{name:"groups",iterator:"group",selectTitle:"Copy Groups",editTitle:"Groups",index:!0,well:!1,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{help:{awPopOver:"Choose groups by clicking on each group you wish to add. Click the <em>Select</em> button to add the groups to the selected inventory group.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Adding Groups"}},fieldActions:{edit:{label:"Edit",ngClick:"editGroup(group.id)",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit group",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteGroup(group.id, group.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete group",dataPlacement:"top"}}}),angular.module("HomeGroupListDefinition",[]).value("HomeGroupList",{name:"home_groups",iterator:"group",editTitle:"Groups",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Group",ngClick:"editGroup(group.id, group.inventory)",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-6 ellipsis"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ /#/inventories/' + group.inventory + '/' }}"},source:{label:"Source",searchType:"select",searchOptions:[{name:"ec2",value:"ec2"},{name:"none",value:""},{name:"rax",value:"rax"}],sourceModel:"inventory_source",sourceField:"source",searchOnly:!0},has_external_source:{label:"Has external source?",searchType:"in",searchValue:"ec2,rax",searchOnly:!0,sourceModel:"inventory_source",sourceField:"source"},has_active_failures:{label:"Has failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},last_update_failed:{label:"Update failed?",searchType:"select",searchSingleValue:!0,searchValue:"failed",searchOnly:!0,sourceModel:"inventory_source",sourceField:"status"},id:{label:"ID",searchOnly:!0}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",awToolTip:"{{ group.status_tooltip }}",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",dataPlacement:"top",ngHref:"/#/inventories/{{ group.inventory }}/",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",ngShow:"(group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate(group.id)",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"(group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{label:"Edit",mode:"all",ngClick:"editGroup(group.id)",awToolTip:"Edit group",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HomeHostListDefinition",[]).value("HomeHostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Name",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-7 ellipsis",ngClick:"editHost(host.id, host.name)"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ '/#/inventories/' + host.inventory }}"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Has failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_inventory_sources:{label:"Has external source?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},id:{label:"ID",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{label:"Edit",ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"}},actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HostListDefinition",[]).value("HostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,well:!1,fields:{name:{key:!0,label:"Host Name",linkTo:"/inventories/{{ inventory_id }}/hosts/{{ host.id }}"},description:{label:"Description"}},actions:{help:{awPopOver:"Select hosts by clicking on each host you wish to add. Add the selected hosts to the group by clicking the <em>Select</em> button.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Selecting Hosts"}},fieldActions:{edit:{label:"Edit",ngClick:"editHost({{ host.id }})",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit host",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete host",dataPlacement:"top"}}}),angular.module("InventoriesListDefinition",[]).value("InventoryList",{name:"inventories",iterator:"inventory",selectTitle:"Add Inventories",editTitle:"Inventories",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},organization:{label:"Organization",ngBind:"inventory.summary_fields.organization.name",linkTo:"/#/organizations/{{ inventory.organization }}",sourceModel:"organization",sourceField:"name",excludeModal:!0},has_inventory_sources:{label:"Cloud sourced?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_active_failures:{label:"Failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},inventory_sources_with_failures:{label:"Sync failures?",searchType:"gtzero",searchValue:"true",searchOnly:!0}},actions:{add:{mode:"all",ngClick:"addInventory()",awToolTip:"Create a new inventory"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{status:{ngHref:"inventory.status_link",iconClass:"{{ 'fa fa-cloud icon-cloud-' + inventory.status_class }}",awToolTip:"{{ inventory.status_tip }}",dataPlacement:"top"},failed_hosts:{ngHref:"inventory.failed_hosts_link",iconClass:"{{ 'fa icon-failures-' + inventory.failed_hosts_class }}",awToolTip:"{{ inventory.failed_hosts_tip }}",dataPlacement:"top"},edit:{label:"Edit",ngClick:"editInventoryProperties(inventory.id)",awToolTip:"Edit inventory",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteInventory(inventory.id, inventory.names')",awToolTip:"Delete inventory",dataPlacement:"top"}}}),angular.module("InventoryGroupsDefinition",[]).value("InventoryGroups",{name:"groups",iterator:"group",editTitle:"{{ inventory_name }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,filterBy:"{ show: true }","class":"table-condensed table-no-border",fields:{name:{label:"Groups",key:!0,ngClick:"showHosts(group.id,group.group_id, false)",ngClass:"group.selected_class",hasChildren:!0,columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",nosort:!0,awDroppable:"{{ group.isDroppable }}",awDraggable:"{{ group.isDraggable }}",dataContainment:"#groups_table",dataTreeId:"{{ group.id }}",dataGroupId:"{{ group.group_id }}",dataType:"group"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createGroup()",awToolTip:"Create a new group"},properties:{mode:"all",awToolTip:"Edit inventory properties",ngClick:"editInventoryProperties()"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refreshGroups()"},stream:{ngClick:"showGroupActivity()",awToolTip:"View Activity Stream",mode:"all"},help:{mode:"all",awToolTip:"Get help building your inventory",ngClick:"showGroupHelp()",id:"inventory-summary-help"}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",ngShow:"group.id > 1",awToolTip:"{{ group.status_tooltip }}",dataTipWatch:"group.launch_tooltip",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",ngShow:"group.id > 1",dataPlacement:"top",ngClick:"showHosts(group.id, group.group_id, group.show_failures)",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",dataTipWatch:"group.launch_tooltip",ngShow:"group.id > 1 && (group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate({{ group.id }})",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"group.id > 1 && (group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{mode:"all",ngClick:"editGroup({{ group.group_id + ',' + group.id }})",awToolTip:"Edit group",ngShow:"group.id > 1",dataPlacement:"top"},"delete":{mode:"all",ngClick:"deleteGroup({{ group.id + ',' + group.group_id }})",awToolTip:"Delete group",ngShow:"group.id != 1",dataPlacement:"top"}}}),angular.module("InventoryHostsDefinition",[]).value("InventoryHosts",{name:"hosts",iterator:"host",editTitle:"{{ selected_group }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,"class":"table-condensed table-no-border",fields:{name:{key:!0,label:"Hosts",ngClick:"editHost(host.id)",searchPlaceholder:"search_place_holder",columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",dataHostId:"{{ host.id }}",dataType:"host",awDraggable:"true"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"},"delete":{ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash",awToolTip:"Delete host",dataPlacement:"top"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createHost()",ngHide:"selected_tree_id == 1",awToolTip:"Create a new host"},stream:{ngClick:"showHostActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("JobEventsListDefinition",[]).value("JobEventList",{name:"jobevents",iterator:"jobevent",editTitle:"Job Events",index:!1,hover:!0,hasChildren:!0,filterBy:"{ show: true }",navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",active:!0,icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{created:{label:"Created On",columnClass:"col-lg-1 col-md-1 hidden-sm hidden-xs",key:!0,nosort:!0,searchable:!1,link:!1},status:{label:"Status",showValue:!1,columnClass:"col-sm-1 col-xs-2 text-center",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}],nosort:!0,searchable:!1,ngClick:"viewJobEvent({{ jobevent.id }})",awToolTip:"{{ jobevent.statusBadgeToolTip }}",dataPlacement:"top",badgeIcon:"fa icon-job-{{ jobevent.status }}",badgePlacement:"left",badgeToolTip:"{{ jobevent.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgClick:"viewJobEvent({{ jobevent.id }})"},event_display:{label:"Event",hasChildren:!0,ngClick:"toggleChildren(jobevent.id, jobevent.related.children)",nosort:!0,searchable:!1,ngClass:"{{ jobevent.class }}",appendHTML:"jobevent.event_detail"},host:{label:"Host",ngBind:"jobevent.summary_fields.host.name",ngHref:"{{ jobevent.hostLink }}",searchField:"hosts__name",nosort:!0,searchOnly:!1,id:"job-event-host-header","class":"break",columnClass:"col-lg-2 hidden-sm hidden-xs"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{columnClass:"col-sm-1 col-xs-2",view:{label:"View",ngClick:"viewJobEvent(jobevent.id)",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("JobHostDefinition",[]).value("JobHostList",{name:"jobhosts",iterator:"jobhost",editTitle:"All summaries",index:!0,hover:!0,navigationLinks:{ngHide:"host_id !== null",details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",active:!0,icon:"icon-laptop"}},fields:{job:{label:"Job ID",ngClick:"showJob(jobhost.job)",columnShow:"host_id !== null",key:!0,desc:!0},host:{label:"Host",key:!0,sourceModel:"host",sourceField:"name",ngBind:"jobhost.host_name",ngHref:"jobhost.hostLinkTo"},status:{label:"Status",badgeNgHref:"{{ jobhost.statusLinkTo }}",badgeIcon:"fa icon-job-{{ jobhost.status }}",badgePlacement:"left",badgeToolTip:"{{ jobhost.statusBadgeToolTip }}",badgeTipPlacement:"top",ngHref:"{{ jobhost.statusLinkTo }}",awToolTip:"{{ jobhost.statusBadgeToolTip }}",dataPlacement:"top",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}]},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},ok:{label:"Success",searchable:!1},changed:{label:"Changed",searchable:!1},failures:{label:"Failure",searchable:!0,searchLabel:"Contains failed events?",searchType:"gtzero"},dark:{label:"Unreachable",searchable:!0,searchType:"gtzero",searchLabel:"Contains unreachable hosts?"},skipped:{label:"Skipped",searchable:!1}},actions:{help:{awPopOver:"<dl>\n<dt>Success</dt><dd>Tasks successfully executed on the host.</dd>\n<dt>Changed</dt><dd>Actions taken on the host.</dd>\n<dt>Failure</dt><dd>Tasks that failed on the host.</dd>\n<dt>Unreachable</dt><dd>Times the ansible server could not reach the host.</dd>\n<dt>Skipped</dt><dd>Tasks bypassed and not performed on the host due to prior task failure or the host being unreachable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Job Host Summary",id:"jobhost-help-button"},refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refresh()",ngShow:"host_id == null"}},fieldActions:{}}),angular.module("JobTemplatesListDefinition",[]).value("JobTemplateList",{name:"job_templates",iterator:"job_template",selectTitle:"Add Job Template",editTitle:"Job Templates",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addJobTemplate()",basePaths:["job_templates"],awToolTip:"Create a new template"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editJobTemplate(job_template.id)",icon:"icon-edit",awToolTip:"Edit template","class":"btn-default btn-xs",dataPlacement:"top"},submit:{label:"Launch",icon:"icon-rocket",mode:"all","class":"btn-xs btn-success",ngClick:"submitJob(job_template.id)",awToolTip:"Start a job using this template",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteJobTemplate(job_template.id, job_template.name)",icon:"icon-trash","class":"btn-danger btn-xs",awToolTip:"Delete template",dataPlacement:"top"}}}),angular.module("JobsListDefinition",[]).value("JobList",{name:"jobs",iterator:"job",editTitle:"Jobs",index:!1,hover:!0,"class":"jobs-table",fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},inventory:{label:"Inventory ID",searchType:"int",searchOnly:!0},created:{label:"Create On",link:!1,searchable:!1},job_template:{label:"Job Template",ngBind:"job.summary_fields.job_template.name",ngHref:"{{ '/#/job_templates/' + job.job_template }}",sourceModel:"job_template",sourceField:"name"},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{ job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{submit:{label:"Relaunch",icon:"icon-rocket",mode:"all",ngClick:"submitJob(job.id, job.summary_fields.job_template.name)",awToolTip:"Start the job",dataPlacement:"top"},cancel:{label:"Stop",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Cancel a running or pending job",ngShow:"job.status == 'pending' || job.status == 'running' || job.status == 'waiting'",dataPlacement:"top"},"delete":{label:"Delete",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Delete the job",ngShow:"job.status != 'pending' && job.status != 'running' && job.status != 'waiting'",dataPlacement:"top"},dropdown:{type:"DropDown",label:"View",icon:"fa-search-plus","class":"btn-default btn-xs",options:[{ngClick:"editJob(job.id, job.summary_fields.job_template.name)",label:"Status"},{ngClick:"viewEvents(job.id, job.summary_fields.job_template.name)",label:"Events",ngHide:"job.status == 'new'"},{ngClick:"viewSummary(job.id, job.summary_fields.job_template.name)",label:"Host Summary",ngHide:"job.status == 'new'"}]}}}),angular.module("OrganizationListDefinition",[]).value("OrganizationList",{name:"organizations",iterator:"organization",selectTitle:"Add Organizations",editTitle:"Organizations",hover:!0,index:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addOrganization()",awToolTip:"Create a new organization"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editOrganization(organization.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit organization",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteOrganization(organization.id, organization.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete organization",dataPlacement:"top"}}}),angular.module("PermissionListDefinition",[]).value("PermissionList",{name:"permissions",iterator:"permission",selectTitle:"Add Permission",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',editTitle:"Permissions",index:!0,well:!0,fields:{name:{key:!0,label:"Name",ngClick:"editPermission(permission.id)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},actions:{add:{mode:"all",ngClick:"addPermission()",awToolTip:"Add a new permission",ngShow:"PermissionAddAllowed"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editPermission(permission.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit permission",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deletePermission(permission.id, permission.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete permission",ngShow:"PermissionAddAllowed",dataPlacement:"top"}}}),angular.module("ProjectsListDefinition",[]).value("ProjectList",{name:"projects",iterator:"project",selectTitle:"Add Project",editTitle:"Projects",selectInstructions:"<p>Select existing projects by clicking each project or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new project by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",columnClass:"hidden-sm hidden-xs",excludeModal:!0},scm_type:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0},status:{label:"Status",ngClick:"showSCMStatus(project.id)",awToolTip:"View details of last SCM Update",dataPlacement:"top",badgeIcon:"{{ 'fa icon-failures-' + project.badge }}",badgePlacement:"left",searchType:"select",searchOptions:[],excludeModal:!0},last_updated:{label:"Last Updated",type:"date",excludeModal:!0,searchable:!1}},actions:{add:{mode:"all",ngClick:"addProject()",awToolTip:"Create a new project"},help:{awPopOver:"<dl>\n<dt>Updating</dt><dd>A source control update is in progress.</dd>\n<dt>Never Updated</dt><dd>This project has not yet been updated from source control.</dd>\n<dt>Failed</dt><dd>An error occurred during the most recent source control update, click the status text for more information.</dd>\n<dt>Successful</dt><dd>TThe latest source control update completed successfully.</dd>\n<dt>Missing</dt><dd>The previously configured local project directory is missing.</dd>\n<dt>N/A</dt><dd>The project is not linked to source control, so updates are not applicable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all",awToolTip:"Click for help",awTipPlacement:"top"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editProject(project.id)",awToolTip:"Edit project properties",dataPlacement:"top"},scm_update:{label:"Update",ngClick:"SCMUpdate(project.id)",awToolTip:"{{ project.scm_update_tooltip }}",ngClass:"project.scm_type_class",dataPlacement:"top"},cancel:{label:"Stop",ngClick:"cancelUpdate(project.id, project.name)",awToolTip:"Cancel a running SCM update process",ngShow:"project.status == 'updating'",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteProject(project.id, project.name)",awToolTip:"Permanently remove project from the database",ngShow:"project.status !== 'updating'",dataPlacement:"top"}}}),angular.module("StreamListDefinition",[]).value("StreamList",{name:"activities",iterator:"activity",editTitle:"Activity Stream",selectInstructions:"",index:!1,hover:!0,"class":"table-condensed",searchWidgets:3,fields:{timestamp:{label:"Event Time",key:!0,desc:!0,noLink:!0,searchable:!1},user:{label:"Initiated by",ngBindHtml:"activity.user",sourceModel:"actor",sourceField:"username",searchPlaceholder:"Username",searchWidget:1},description:{label:"Action",ngBindHtml:"activity.description",nosort:!0,searchable:!1,columnClass:"col-lg-7"},system_event:{label:"System event",searchOnly:!0,searchType:"isnull",sourceModel:"actor",sourceField:"username",searchWidget:1},all_objects:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All resources",searchWidget:2},credential_search:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Credential name",searchWidget:2,searchField:"object1"},group_search:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Group name",searchWidget:2,searchField:"object1"},host_search:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Host name",searchWidget:2,searchField:"object1"},inventory_search:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Inventory name",searchWidget:2,searchField:"object1"},job_template_search:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Job template name",searchWidget:2,searchField:"object1"},job_search:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:2,searchField:"object1"},organization_search:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Organization name",searchWidget:2,searchField:"object1"},project_search:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Project name",searchWidget:2,searchField:"object1"},user_search:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Primary username",searchWidget:2,searchField:"object1"},all_objects3:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All related resources",searchWidget:3,searchField:"object2"},credential_search3:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Related credential name",searchWidget:3,searchField:"object2"},group_search3:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Related group name",searchWidget:3,searchField:"object2"},host_search3:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Related host name",searchWidget:3,searchField:"object2"},inventory_search3:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Related inventory name",searchWidget:3,searchField:"object2"},job_search3:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:3,searchField:"object2"},job_template_search3:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Related job template name",searchWidget:3,searchField:"object2"},organization_search3:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Related organization name",searchWidget:3,searchField:"object2"},project_search3:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Related project name",searchWidget:3,searchField:"object2"},user_search3:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Related username",searchWidget:3,searchField:"object2"}},actions:{refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refreshStream()"},close:{mode:"all",awToolTip:"Close Activity Stream view",ngClick:"closeStream()"}},fieldActions:{view:{label:"View",ngClick:"showDetail(activity.id)",icon:"fa-zoom-in","class":"btn-default btn-xs",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("TeamsListDefinition",[]).value("TeamList",{name:"teams",iterator:"team",selectTitle:"Add Team",editTitle:"Teams",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"},organization:{label:"Organization",ngBind:"team.organization_name",sourceModel:"organization",sourceField:"name"}},actions:{add:{mode:"all",ngClick:"addTeam()",awToolTip:"Create a new team"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editTeam(team.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit team",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteTeam(team.id, team.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete team",dataPlacement:"top"}}}),angular.module("UserListDefinition",[]).value("UserList",{name:"users",iterator:"user",selectTitle:"Add Users",editTitle:"Users",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>When available, a brand new user can be created by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{add:{label:"Create New",mode:"all",ngClick:"addUser()",basePaths:["organizations","users"],"class":"btn-xs",awToolTip:"Create a new user"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editUser(user.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit user",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteUser(user.id, user.username)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete user",dataPlacement:"top"}}}),angular.module("InventorySyncStatusWidget",["RestServices","Utilities"]).factory("InventorySyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b=a.label,c=a.count,d=a.fail,e=a.link,f=a.fail_link,g="<tr>\n";
return g+='<td><a href="'+e+'"',g+="Hosts"===b||"Groups"===b?' class="pad-left-sm" ':"",g+=">"+b+"</a></td>\n",g+='<td class="',g+=d>0?"failed-column":"zero-column",g+=' text-right">',g+='<a href="'+f+'">'+d+"</a>",g+="</td>\n",g+='<td class="text-right">',g+='<a href="'+e+'">'+c+"</a>",g+="</td></tr>\n"}var d,e,f,g,h,i=a.scope,j=a.target,k=a.dashboard;if(d='<div class="panel panel-default">\n',d+='<div class="panel-heading">Inventory Sync Status</div>\n',d+='<div class="panel-body">\n',d+='<table class="table table-condensed table-hover">\n',d+="<thead>\n",d+="<tr>\n",d+='<th class="col-md-4 col-lg-3"></th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',d+="</tr>\n",d+="</thead>\n",d+="<tbody>\n",d+=c({label:"Inventories",count:k.inventories&&k.inventories.total_with_inventory_source?k.inventories.total_with_inventory_source:0,fail:k.inventories&&k.inventories.inventory_failed?k.inventories.inventory_failed:0,link:"/#/inventories/?has_inventory_sources=true",fail_link:"/#/inventories/?inventory_sources_with_failures=true"}),e=0,f=0,k.inventory_sources)for(h in k.inventory_sources)e+=k.inventory_sources[h].total?k.inventory_sources[h].total:0,f+=k.inventory_sources[h].failed?k.inventory_sources[h].failed:0;d+=c({label:"Groups",count:e,fail:f,link:"/#/home/groups/?has_external_source=true",fail_link:"/#/home/groups/?status=failed"});for(h in k.inventory_sources)k.inventory_sources[h].total&&(d+=c({label:k.inventory_sources[h].label,count:k.inventory_sources[h].total?k.inventory_sources[h].total:0,fail:k.inventory_sources[h].failed?k.inventory_sources[h].failed:0,link:"/#/home/groups/?source="+h,fail_link:"/#/home/groups/?status=failed&source="+h}));d+="</tbody>\n",d+="</table>\n",d+="</div>\n",d+="</div>\n",d+="</div>\n",g=angular.element(document.getElementById(j)),g.html(d),b(g)(i),i.$emit("WidgetLoaded")}}]),angular.module("JobStatusWidget",["RestServices","Utilities"]).factory("JobStatus",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'"',b+="Hosts"===c||"Groups"===c?' class="pad-left-sm" ':"",b+=">"+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e=a.scope,f=a.target,g=a.dashboard,h="";h='<div class="panel panel-default">\n',h+='<div class="panel-heading">Job Status</div>\n',h+='<div class="panel-body">\n',h+='<table class="table table-condensed table-hover">\n',h+="<thead>\n",h+="<tr>\n",h+='<th class="col-md-4 col-lg-3"></th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',h+="</tr>\n",h+="</thead>\n",h+="<tbody>\n",h+=c({label:"Jobs",link:"/#/jobs",count:g.jobs&&g.jobs.total?g.jobs.total:0,fail:g.jobs&&g.jobs.failed?g.jobs.failed:0,fail_link:"/#/jobs/?status=failed"}),h+=c({label:"Inventories",link:"/#/inventories",count:g.inventories&&g.inventories.total?g.inventories.total:0,fail:g.inventories&&g.inventories.job_failed?g.inventories.job_failed:0,fail_link:"/#/inventories/?has_active_failures=true"}),h+=c({label:"Groups",link:"/#/home/groups",count:g.groups&&g.groups.total?g.groups.total:0,fail:g.groups&&g.groups.job_failed?g.groups.job_failed:0,fail_link:"/#/home/groups/?has_active_failures=true"}),h+=c({label:"Hosts",link:"/#/home/hosts",count:g.hosts&&g.hosts.total?g.hosts.total:0,fail:g.hosts&&g.hosts.failed?g.hosts.failed:0,fail_link:"/#/home/hosts/?has_active_failures=true"}),h+="</tbody>\n",h+="</table>\n",h+="</div>\n",h+="</div>\n",h+="</div>\n",d=angular.element(document.getElementById(f)),d.html(h),b(d)(e),e.$emit("WidgetLoaded")}}]),angular.module("ObjectCountWidget",["RestServices","Utilities"]).factory("ObjectCount",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.count;return b+="<tr>\n",b+='<td class="capitalize"><a href="'+d+'"',b+="hosts"===c||"groups"===c?' class="pad-left-sm" ':"",b+=">"+c.replace(/\_/g," ")+"</a></td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+e+"</a>",b+="</td></tr>\n"}var d,e,f,g=a.scope,h=a.target,i=a.dashboard,j=["organizations","users","teams","credentials","projects","inventories","groups","hosts","job_templates","jobs"];for(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">System Summary</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-5 col-lg-4"></th>\n',e+='<th class="col-md-1 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",d=0;d<j.length;d++)e+=c({label:j[d],link:"/#/"+("hosts"===j[d]||"groups"===j[d]?"home/"+j[d]:j[d]),count:i[j[d]]&&i[j[d]].total?i[j[d]].total:0});e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",f=angular.element(document.getElementById(h)),f.html(e),b(f)(g),g.$emit("WidgetLoaded")}}]),angular.module("SCMSyncStatusWidget",["RestServices","Utilities"]).factory("SCMSyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'">'+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e,f,g,h,i,j=a.scope,k=a.target,l=a.dashboard;if(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">Project SCM Status</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-4 col-lg-3"></th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",f=0,l.scm_types)for(h in l.scm_types)f+=l.scm_types[h].total?l.scm_types[h].total:0;e+=c({label:"Projects",link:"/#/projects",count:f,fail:l.projects&&l.projects.failed?l.projects.failed:0,fail_link:"/#/projects/?status=failed"}),i=[];for(h in l.scm_types)i.push(h);for(i.sort(),d=0;d<i.length;d++)h=i[d],l.scm_types[h].total&&(e+=c({label:l.scm_types[h].label,link:"/#/projects/?scm_type="+h,count:l.scm_types[h].total?l.scm_types[h].total:0,fail:l.scm_types[h].failed?l.scm_types[h].failed:0,fail_link:"/#/projects/?scm_type="+h+"&status=failed"}));e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",e+="</div>\n",g=angular.element(document.getElementById(k)),g.html(e),b(g)(j),j.$emit("WidgetLoaded")}}]),angular.module("StreamWidget",["RestServices","Utilities","StreamListDefinition","SearchHelper","PaginationHelpers","RefreshHelper","ListGenerator","StreamWidget","AuthService"]).factory("setStreamHeight",[function(){return function(){var a=$("#stream-content").height(),b=parseInt($("#tab-content-container").css("min-height").replace(/px/,"")),c=a>b?a:b;$("#tab-content-container").css({"min-height":c})}}]).factory("ShowStream",["setStreamHeight","Authorization",function(a){return function(){var b=$("#stream-container");b.css({position:"absolute",top:0,left:0,width:"100%","min-height":"100%","background-color":"#FFF"}),a(),b.show("slide",{direction:"left"},{duration:500,queue:!1})}}]).factory("HideStream",["LoadBreadCrumbs",function(a){return function(){var b=$("#stream-container");b.hide("slide",{direction:"left"},{duration:500,queue:!1}),setTimeout(function(){b.detach(),b.empty(),b.unbind(),$("#tab-content-container").css({"min-height":0})},500),a()}}]).factory("StreamBreadCrumbs",["$rootScope","$location",function(a,b){return function(){a.breadcrumbs=[];var c,d,e,f,g=b.path().split("/");for(g.splice(0,1),e=0;e<g.length;e++){if(/^\d+/.test(g[e])){for(c="",d="",f=0;e>=f;f++)c+="/"+g[f];for(f=0;f<a.crumbCache.length;f++)if(a.crumbCache[f].path===c){d=a.crumbCache[f].title;break}d||(d=g[e-1].substr(0,g[e-1].length-1),d=d.charAt(0).toUpperCase()+d.slice(1),d="Inventorie"===d?"Inventory":d)}else{if(c="",d="",e>0)for(f=0;e>=f;f++)c+="/"+g[f];else c="/"+g[e];d=g[e],d=d.charAt(0).toUpperCase()+d.slice(1)}a.breadcrumbs.push({path:c,title:d,ngClick:"closeStream('"+c+"')"})}}}]).factory("FixUrl",[function(){return function(a){return a.replace(/\/api\/v1\//,"/#/")}}]).factory("BuildUrl",[function(){return function(a){var b="/#/";switch(a.base){case"group":case"host":b+="home/"+a.base+"s/?id="+a.id;break;case"inventory":b+="inventories/"+a.id+"/";break;default:b+=a.base+"s/"+a.id+"/"}return b}}]).factory("BuildDescription",["FixUrl","BuildUrl",function(a,b){return function(a){function c(a){return a.replace(/^_deleted_\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d+\+\d+:\d+_/,"")}var d,e,f,g,h,i,j,k;d=a.operation,d+=/e$/.test(a.operation)?"d ":"ed ",e=d,f=a.object1,g=a.object2,h=a.summary_fields[f]?a.summary_fields[f][0]:null,i=f===g?a.summary_fields[f][1]:a.summary_fields[g]?a.summary_fields[g][0]:null,("user"===f||"user"===g)&&(a.summary_fields.user[0].name=a.summary_fields.user[0].username),i&&i.name&&!/^_delete/.test(i.name)?(i.base=g,d+=g+' <a href="'+b(i)+'">'+i.name+"</a>"+("disassociate"===a.operation?" from ":" to "),e+=g+" "+i.name+("disassociate"===a.operation?" from ":" to ")):g&&(j="",i&&i.name&&(j=" "+c(i.name)),d+=g+j+("disassociate"===a.operation?" from ":" to "),e+=g+j+("disassociate"===a.operation?" from ":" to ")),h&&h.name&&!/^\_delete/.test(h.name)?(h.base=f,d+=f+' <a href="'+b(h)+'">'+h.name+"</a>",e+=f+" "+h.name):f&&(j="",k="",!h||!h.name||h&&h.name&&/^_delete/.test(h.name)?a.changes&&a.changes.name?"string"==typeof a.changes.name?(j=" "+a.changes.name,k=j):"object"==typeof a.changes.name&&Array.isArray(a.changes.name)&&(j=" "+a.changes.name[0],k=j):"job"===f&&h&&a.changes&&a.changes.job_template?"delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+" "+a.changes.job_template+"</a>",k=" "+h.id+" "+a.changes.job_template):(j=" "+h.id+" "+a.changes.job_template,k=j):"job"===f&&h&&("delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+"</a>",k=" "+h.id):(j=" "+h.id,k=j)):h&&h.name&&(j=" "+c(h.name),k=j),d+=f+j,e+=f+k),a.description=d,a.description_nolink=e}}]).factory("ShowDetail",["$rootScope","Rest","Alert","GenerateForm","ProcessErrors","GetBasePath","FormatDate","ActivityDetailForm","Empty","Find",function(a,b,c,d,e,f,g,h,i,j){return function(a){var b,c,e,f=a.activity_id,i=a.scope,k=d,l=h,m=j({list:i.activities,key:"id",val:f});m&&(m.changes_stringified=JSON.stringify(m.changes,null,"	"),b=m.changes_stringified.match(/\n/g),c=b?b.length:1,c=1>c?3:10,l.fields.changes.rows=10,e=k.inject(l,{mode:"edit",modal:!0,related:!1}),e.changes=m.changes_stringified,e.user=(m.summary_fields.actor?m.summary_fields.actor.username:"system")+" on "+g(new Date(m.timestamps)),e.operation=m.description_nolink,e.formModalAction=function(){$("#form-modal").modal("hide")},$("#form-modal").on("show.bs.modal",function(){$("#form-modal-body").css({width:"auto",height:"auto","max-height":"100%"})}),e.formModalActionLabel="OK",e.formModalCancelShow=!1,e.formModalInfo=!1,e.formModalHeader="Event "+m.id,e.$$phase||e.$digest())}}]).factory("Stream",["$rootScope","$location","Rest","GetBasePath","ProcessErrors","Wait","StreamList","SearchInit","PaginateInit","GenerateList","FormatDate","ShowStream","HideStream","BuildDescription","FixUrl","BuildUrl","ShowDetail","StreamBreadCrumbs","setStreamHeight","Find","Store",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return function(c){var e,f,o,v,w=g,x=d("activity_stream"),y=j,z=b.path().replace(/^\//,"").split("/")[0],A=c.scope,B=u("CurrentSearchParams"),C=c&&c.inventory_name?c.inventory_name:null,D=c&&c.url?c.url:null;a.flashMessage=null,D?x=D:"/home"!==b.path()&&(e="inventories"===z?"inventory":z.replace(/s$/,""),f=b.path().split("/"),f.splice(0,1),f.length>1&&/^\d+/.test(f[f.length-1])?(e=f[f.length-2],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?"+e+"__id="+f[f.length-1]):f.length>1?(e=f[f.length-1],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?or__object1="+e+"&or__object2="+e):x+="?or__object1="+e+"&or__object2="+e),$("#tab-content-container").append('<div id="stream-container"><div id="stream-content"></div></div><!-- Stream widget -->'),r(),C&&(o=t({list:a.breadcrumbs,key:"title",val:"{{ inventory_name }}"}),o&&(o.title=C)),l(),v=y.inject(w,{mode:"edit",id:"stream-content",searchSize:"col-lg-3",secondWidget:!0,activityStream:!0}),v.streamTitle=c&&c.title?c.title:null,v.closeStream=function(a){m(),v.searchCleanup&&v.searchCleanup(),B&&h({scope:A,set:B.set,list:B.list,url:B.defaultUrl,iterator:B.iterator,sort_order:B.sort_order,setWidgets:!1}),a&&b.path(a)},v.refreshStream=function(){v.search(w.iterator)},v.showDetail=function(a){q({scope:v,activity_id:a})},v.removeStreamPostRefresh&&v.removeStreamPostRefresh(),v.removeStreamPostRefresh=v.$on("PostRefresh",function(){var a,b,c,d,e,f;for(a=0;a<v.activities.length;a++)b=new Date(v.activities[a].timestamp),v.activities[a].timestamp=k(b),v.activities[a].user=v.activities[a].summary_fields.actor?'<a href="/#/users/'+v.activities[a].summary_fields.actor.id+'">'+v.activities[a].summary_fields.actor.username+"</a>":"system",d=/^\_delete/,e=v.activities[a].object1,f=v.activities[a].object2,e&&v.activities[a].summary_fields[e]&&v.activities[a].summary_fields[e].name?d.test(v.activities[a].summary_fields[e].name)?v.activities[a].objects=v.activities[a].summary_fields[e].name:(c=p(v.activities[a].summary_fields.object1),v.activities[a].objects='<a href="'+c+'">'+v.activities[a].summary_fields[e].name+"</a>"):v.activities[a].object1&&(v.activities[a].objects=v.activities[a].object1),f&&v.activities[a].summary_fields[f]&&v.activities[a].summary_fields[f].name?d.test(v.activities[a].summary_fields.object2.name)?v.activities[a].objects+=","+v.activities[a].summary_fields[f].name:(c=p(v.activities[a].summary_fields.object2),v.activities[a].objects+=', <a href="'+c+'">'+v.activities[a].summary_fields[f].name+"</a>"):v.activities[a].object2&&(v.activities[a].objects+=", "+v.activities[a].object2),n(v.activities[a]);setTimeout(function(){s()},500)}),h({scope:v,set:w.name,list:w,url:x}),i({scope:v,list:w,url:x}),v.search(w.iterator)}}]),angular.module("AuthService",["ngCookies","Utilities"]).factory("Authorization",["$http","$rootScope","$location","$cookieStore","GetBasePath",function(a,b,c,d,e){return{setToken:function(a,c){d.remove("token"),d.remove("token_expires"),d.remove("userLoggedIn"),d.put("token",a),d.put("token_expires",c),d.put("userLoggedIn",!0),d.put("sessionExpired",!1),b.token=a,b.userLoggedIn=!0,b.token_expires=c,b.sessionExpired=!1},isUserLoggedIn:function(){return void 0===b.userLoggedIn&&(b.userLoggedIn=d.get("userLoggedIn"),b.sessionExpired=d.get("sessionExpired")),b.userLoggedIn},getToken:function(){return b.token?b.token:d.get("token")},retrieveToken:function(b,c){return a({method:"POST",url:e("authtoken"),data:{username:b,password:c}})},logout:function(){var a=angular.element(document.getElementById("main-view")).scope();a.$destroy(),b.$destroy(),d.remove("accordions"),d.remove("token"),d.remove("token_expires"),d.remove("current_user"),d.remove("lastPath"),d.put("userLoggedIn",!1),d.put("sessionExpired",!1),d.remove("lastPath","/home"),b.current_user={},b.license_tested=void 0,b.userLoggedIn=!1,b.sessionExpired=!1,b.token=null,b.token_expires=null,b.lastPath="/home"},getLicense:function(){return a({method:"GET",url:e("config"),headers:{Authorization:"Token "+this.getToken()}})},setLicense:function(a){a.tested=!1,d.put("license",a)},licenseTested:function(){var a,c;return void 0!==b.license_tested?c=b.license_tested:(a=d.get("license"),c=a&&void 0!==a.tested?a.tested:!1),c},getUser:function(){return a({method:"GET",url:"/api/v1/me/",headers:{Authorization:"Token "+this.getToken()}})},setUserInfo:function(a){b.current_user=a.results[0],d.put("current_user",a.results[0])},restoreUserInfo:function(){b.current_user=d.get("current_user")},getUserInfo:function(a){var c;return b.current_user?b.current_user[a]:(this.restoreUserInfo(),c=d.get("current_user"),c[a])}}}]),angular.module("InventoryTree",["Utilities","RestServices","GroupsHelper","PromptDialog"]).factory("SortNodes",[function(){return function(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].name);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].name===d[c]&&e.push(a[b]);return e}}]).factory("BuildTree",["Rest","GetBasePath","ProcessErrors","SortNodes","Wait","GetSyncStatusMsg","GetHostsStatusMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){var b,c,e=[],f=d(a);for(b=0;b<f.length;b++)e.push(f[b].id);c={name:"All Hosts",id:1,group_id:null,parent:0,description:"",show:!0,ngicon:null,has_children:!1,related:{},selected_class:"",show_failures:!1,isDraggable:!1,isDroppable:!0,children:e},q.push(c)}function j(a,b,c){var e,h,i,k,n,o,s=d(a);for(e=0;e<s.length;e++){for(r++,k=f({status:s[e].summary_fields.inventory_source.status}),n=g({active_failures:s[e].hosts_with_active_failures,total_hosts:s[e].total_hosts,inventory_id:l,group_id:s[e].id}),i=[],h=0;h<s[e].children.length;h++)i.push(s[e].children[h].id);o={name:s[e].name,has_active_failures:s[e].has_active_failures,total_hosts:s[e].total_hosts,hosts_with_active_failures:s[e].hosts_with_active_failures,total_groups:s[e].total_groups,groups_with_active_failures:s[e].groups_with_active_failures,parent:b,has_children:s[e].children.length>0?!0:!1,has_inventory_sources:s[e].has_inventory_sources,id:r,source:s[e].summary_fields.inventory_source.source,group_id:s[e].id,event_level:c,children:i,ngicon:s[e].children.length>0?"fa fa-minus-square-o node-toggle":"fa fa-square-o node-no-toggle",ngclick:"toggle("+r+")",related:{children:s[e].children.length>0?s[e].related.children:"",inventory_source:s[e].related.inventory_source},status:s[e].summary_fields.inventory_source.status,status_class:k["class"],status_tooltip:k.tooltip,launch_tooltip:k.launch_tip,launch_class:k.launch_class,hosts_status_tip:n.tooltip,show_failures:n.failures,hosts_status_class:n["class"],selected_class:"",show:!0,isDraggable:!0,isDroppable:!0},q.push(o),p&&o.group_id===p&&(m.selected_tree_id=r,m.selected_group_id=o.group_id),s[e].children.length>0&&j(s[e].children,r,c+1)}}function k(){e("start"),a.setUrl(b("inventory")+l+"/"),a.get().success(function(a){m.$emit("buildAllGroups",a.name,a.related.tree,a.related.groups)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+l+". GET returned: "+b})})}var l=h.inventory_id,m=h.scope,n=h.refresh,o=h.emit,p=h.new_group_id,q=[],r=1;m.buildAllGroupsRemove&&m.buildAllGroupsRemove(),m.buildAllGroupsRemove=m.$on("buildAllGroups",function(b,d,f){a.setUrl(f),a.get().success(function(a){i(a),j(a,0,0),m.autoShowGroupHelp=0===a.length?!0:!1,n?(m.groups=q,m.$emit("GroupTreeRefreshed",d,q,o)):m.$emit("GroupTreeLoaded",d,q,o)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory tree for: "+l+". GET returned: "+b})})}),k()}}]).factory("UpdateGroup",["ApplyEllipsis","GetSyncStatusMsg","Empty",function(a,b,c){return function(d){var e,f,g,h,i,j=d.scope,k=d.group_id,l=d.properties;for(e=0;e<j.groups.length;e++){if(j.groups[e].group_id===k){g=j.groups[e];for(f in l)"name"===f&&(h=j.groups[e].name),"source"===f&&l[f]!==j.groups[e][f]&&(c(l[f])||"none"!==j.groups[e].status&&!c(j.groups[e].status)?l[f]||(j.groups[e].status="none"):j.groups[e].status="never updated",i=b({status:j.groups[e].status}),j.groups[e].status_class=i["class"],j.groups[e].status_tooltip=i.tooltip,j.groups[e].launch_tooltip=i.launch_tip,j.groups[e].launch_class=i.launch_class),j.groups[e][f]=l[f]}j.groups[e].id===j.selected_tree_id&&(j.selected_group_name=j.groups[e].name,j.search_place_holder="Search "+j.groups[e].name,j.hostSearchPlaceholder="Search "+j.groups[e].name)}h&&setTimeout(function(){$('#groups_table .group-name a[title="'+h+'"]').attr("title",l.name),a("#groups_table .group-name a")},2500)}}]).factory("SetNodeName",[function(){return function(a){var b=a.name,c=a.description,d=void 0!==a.group_id?a.group_id:null,e=void 0!==a.inventory_id?a.inventory_id:null;null!==d&&$("#inventory-tree").find('li [data-group-id="'+d+'"]').each(function(){$(this).attr("data-name",b),$(this).attr("data-description",c),$(this).find(".activate").first().text(b)}),null!==e&&$("#inventory-root-node").attr("data-name",b).attr("data-description",c).find(".activate").first().text(b)}}]).factory("CopyMoveGroup",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.groups,key:"id",val:b.inbound_tree_id}),m="";m+='<div id="copy-prompt-modal" class="modal fade">\n',m+='<div class="modal-dialog">\n',m+='<div class="modal-content">\n',m+='<div class="modal-header">\n',m+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',m+=1===k.id||0===l.parent?"<h3>Move Group</h3>\n":"<h3>Copy or Move?</h3>\n",m+="</div>\n",m+='<div class="modal-body">\n',1===k.id?m+="<p>Are you sure you want to move group "+l.name+" to the top level?</p>":0===l.parent?m+="<p>Are you sure you want to move group "+l.name+" from the top level and make it a child of "+k.name+"?</p>":(m+='<div class="text-center">\n',m+="<p>Would you like to copy or move group <em>"+l.name+"</em> to group <em>"+k.name+"</em>?</p>\n",m+='<div style="margin-top: 30px;">\n',m+='<a href="" ng-click="moveGroup()" class="btn btn-primary" style="margin-right: 15px;"><i class="fa fa-cut"></i> Move</a>\n',m+='<a href="" ng-click="copyGroup()" class="btn btn-primary"><i class="fa fa-copy"></i> Copy</a>\n',m+="</div>\n",m+="</div>\n"),m+="</div>\n",m+='<div class="modal-footer">\n',m+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">Cancel</a>\n',(1===k.id||0===l.parent)&&(m+='<a href="" data-target="#prompt-modal" ng-click="moveGroup()" class="btn btn-primary">Yes</a>\n'),m+="</div>\n",m+="</div><!-- modal-content -->\n",m+="</div><!-- modal-dialog -->\n",m+="</div><!-- modal -->\n",i=angular.element(document.getElementById("inventory-modal-container")),i.empty().append(m),a(i)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.moveGroup=function(){var a,b,i;$("#copy-prompt-modal").modal("hide"),e("start"),j.removeGroupRemove&&j.removeGroupRemove(),j.removeGroupRemove=j.$on("removeGroup",function(){l.parent>0?(i=d({list:j.groups,key:"id",val:l.parent}),a=h("base")+"groups/"+i.group_id+"/children/",f.setUrl(a),f.post({id:l.group_id,disassociate:1}).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to remove "+l.name+" from "+i.name+". POST returned status: "+b})})):j.$emit("GroupDeleteCompleted")}),a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id},f.setUrl(a),f.post(b).success(function(){j.$emit("removeGroup")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})},j.copyGroup=function(){$("#copy-prompt-modal").modal("hide"),e("start");var a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id};f.setUrl(a),f.post(b).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})}}}]).factory("CopyMoveHost",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var g,i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.hosts,key:"id",val:b.host_id}),m=!1,n="";if(l.summary_fields.all_groups)for(i=0;i<l.summary_fields.all_groups.length;i++)if(l.summary_fields.all_groups[i].id===k.group_id){m=!0;break}m?(n+='<div id="copy-alert-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" ng-hide="disableButtons" data-target="#copy-alert-modal"\n',n+='data-dismiss="modal" class="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Already in Group</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+='<div class="alert alert-info"><p>Host '+l.name+" is already in group "+k.name+".</p></div>\n",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#copy-alert-modal" data-dismiss="modal" class="btn btn-primary">OK</a>\n',n+="</div>\n",n+="</div>\n",n+="</div>\n",n+="</div>\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-alert-modal").modal({backdrop:"static",keyboard:!0,show:!0})):(n="",n+='<div id="copy-prompt-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Copy Host</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+="<p>Are you sure you want to copy host "+l.name+" to group "+k.name+"?</p>",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">No</a>\n',n+='<a href="" data-target="#prompt-modal" ng-click="copyHost()" class="btn btn-primary">Yes</a>\n',n+="</div>\n",n+="</div><!-- modal-content -->\n",n+="</div><!-- modal-dialog -->\n",n+="</div><!-- modal -->\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.copyHost=function(){$("#copy-prompt-modal").modal("hide"),e("start"),f.setUrl(h("groups")+k.group_id+"/hosts/"),f.post(l).success(function(){j.$emit("GroupTreeRefreshed")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+k.name+". POST returned status: "+b})})})}}]),angular.module("RestServices",["ngCookies","AuthService"]).factory("Rest",["$http","$rootScope","$cookieStore","$q","Authorization",function(a,b,c,d,e){return{headers:{},setUrl:function(a){this.url=a},checkExpired:function(){return b.sessionTimer.isExpired()},pReplace:function(){var a,b;for(a in this.params)b=new RegExp("\\:"+a,"gm"),b.test(this.url)&&(this.url=this.url.replace(b,this.params[a]),delete this.params[a])},createResponse:function(a,b){var c=d.reject({data:a,status:b});return c.success=function(a){return c.then(function(b){a(b.data,b.status)},null),c},c.error=function(a){return c.then(null,function(b){a(b.data,b.status)}),c},c},setHeader:function(a){for(var b in a)this.headers[b]=a[b]},get:function(b){b=b?b:{},this.params=b.params?b.params:null,this.pReplace();var c=this.checkExpired(),d=e.getToken();return c?this.createResponse({detail:"Token is expired"},401):d?(this.setHeader({Authorization:"Token "+d}),this.setHeader({"X-Auth-Token":"Token "+d}),a({method:"GET",url:this.url,headers:this.headers,params:this.params})):this.createResponse({detail:"Invalid token"},401)},post:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"POST",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},put:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"PUT",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},destroy:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"DELETE",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},options:function(){var b=e.getToken(),c=this.checkExpired();return c?this.createResponse({detail:"Token is expired"},401):b?(this.setHeader({Authorization:"Token "+b}),this.setHeader({"X-Auth-Token":"Token "+b}),a({method:"OPTIONS",url:this.url,headers:this.headers})):this.createResponse({detail:"Invalid token"},401)}}}]),angular.module("TimerService",["ngCookies","Utilities"]).factory("Timer",["$rootScope","$cookieStore","$location","GetBasePath","Empty",function(a,b){return{sessionTime:null,timeout:null,getSessionTime:function(){return this.sessionTime?this.sessionTime:b.get("sessionTime")},isExpired:function(){var a=this.getSessionTime(),b=(new Date).getTime();return 0>=a-b?!0:(this.moveForward(),!1)},expireSession:function(){this.sessionTime=0,a.sessionExpired=!0,b.put("sessionExpired",!0)},moveForward:function(){var c=(new Date).getTime()+1e3*$AnsibleConfig.session_timeout;this.sessionTime=c,b.put("sessionTime",c),a.sessionExpired=!1,b.put("sessionExpired",!1)},init:function(){return this.moveForward(),this}}}]),angular.module("Utilities",["RestServices","Utilities"]).factory("ClearScope",[function(){return function(a){var b,c=document.getElementById(a);c&&(b=angular.element(c).scope(),b.$destroy()),$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()});try{$("#help-modal").dialog("close")}catch(d){}$(window).unbind("resize")}}]).factory("Empty",[function(){return function(a){return null===a||void 0===a||""===a?!0:!1}}]).factory("ToggleClass",function(){return function(a,b){$(a)&&$(a).hasClass(b)?$(a).removeClass(b):$(a)&&$(a).addClass(b)}}).factory("Alert",["$rootScope",function(a){return function(b,c,d,e,f,g){f?(a.alertHeader2=b,a.alertBody2=c,a.alertClass2=d?d:"alert-danger",$("#alert-modal2").modal({show:!0,keyboard:!0,backdrop:"static"}),a.disableButtons2=g?!0:!1,e&&$("#alert-modal2").on("hidden",function(){e()}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal2").modal("hide"),e&&e())})):(a.alertHeader=b,a.alertBody=c,a.alertClass=d?d:"alert-danger",$("#alert-modal").modal({show:!0,keyboard:!0,backdrop:"static"}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal").modal("hide"),e&&e())}),a.disableButtons=g?!0:!1,e&&$("#alert-modal").on("hidden",function(){e()}))}}]).factory("ProcessErrors",["$rootScope","$cookieStore","$log","$location","Alert","Wait",function(a,b,c,d,e,f){return function(b,c,g,h,i){var j,k,l;if(f("stop"),$AnsibleConfig.debug_mode&&console&&(console.log("Debug status: "+g),console.log("Debug data: "),console.log(c)),403===g)l="The API responded with a 403 Access Denied error. ",l+=c.detail?"Detail: "+c.detail:"Please contact your system administrator.",e(i.hdr,l);else if(401===g&&c.detail&&"Token is expired"===c.detail||401===g&&c.detail&&"Invalid token"===c.detail)a.sessionTimer.expireSession(),d.url("/login");else if(c.non_field_errors)e("Error!",c.non_field_errors);else if(c.detail)e(i.hdr,i.msg+" "+c.detail);else if(c.__all__)e("Error!",c.__all__);else if(h){k=!1;for(j in h.fields)c[j]&&h.fields[j].tab&&$("#"+h.name+'_tabs a[href="#'+h.fields[j].tab+'"]').tab("show"),h.fields[j].realName&&c[h.fields[j].realName]&&(b[j+"_api_error"]=c[h.fields[j]][0],$('[name="'+h.fields[j].realName+'"]').addClass("ng-invalid"),k=!0),h.fields[j].sourceModel?c[j]&&(b[h.fields[j].sourceModel+"_"+h.fields[j].sourceField+"_api_error"]=c[j][0],$('[name="'+h.fields[j].sourceModel+"_"+h.fields[j].sourceField+'"]').addClass("ng-invalid"),k=!0):c[j]&&(b[j+"_api_error"]=c[j][0],$('[name="'+j+'"]').addClass("ng-invalid"),k=!0);
!k&&i&&e(i.hdr,i.msg)}else e(i.hdr,i.msg)}}]).factory("LoadBreadCrumbs",["$rootScope","$routeParams","$location","Empty",function(a,b,c,d){return function(b){function e(a){return a.toUpperCase()}function f(a){return"ies"===a?"y":""}var g,h,i,j,k,l,m,n;if(!d(b)){for(h=!1,j=0;j<a.crumbCache.length;j++)if(a.crumbCache[j].path===b.path){h=!0,a.crumbCache[j]=b;break}h||a.crumbCache.push(b)}if(k=c.path().replace(/^\//,"").split("/"),l="",a.breadcrumbs=[],k.length>1)for(j=0;j<k.length-1;j++){if(j>0&&k[j].match(/\d+/)){for(m=k[j-1],n=m.replace(/(ies$|s$)/,f),n=n.charAt(0).toUpperCase()+n.slice(1),h=!1,i=0;i<a.crumbCache.length;i++)if(a.crumbCache[i].path==="/"+m+"/"+k[j]){n=a.crumbCache[i].title,h=!0;break}a.breadcrumbs.push(h&&void 0!==a.crumbCache[i].altPath?{title:n,path:a.crumbCache[i].altPath}:{title:n,path:l+"/"+k[j]})}else/_/.test(k[j])&&(k[j]=k[j].replace(/(?:^|_)\S/g,e).replace(/_/g," ")),g=k[j].charAt(0).toUpperCase()+k[j].slice(1),a.breadcrumbs.push({title:g,path:l+"/"+k[j]});l+="/"+k[j]}}}]).factory("HelpDialog",["$rootScope","$location","Store",function(a,b,c){return function(a){function b(a){function g(a){var b="";return b+="<h4>"+a.intro+"</h4>\n",b+='<div class="img-container">\n',b+='<img src="'+$basePath+"img/help/"+a.img.src+'" >',b+="</div>\n",b+='<div class="help-box">'+a.box+"</div>",b+=f&&a.autoOffNotice?'<div class="help-auto-off"><label><input type="checkbox" name="auto-off-checkbox" id="auto-off-checkbox"> Do not show this message in the future</label></div>\n':""}var h,i,j,k,l=!1;e=a,j=d.story.width?d.story.width:510,k=d.story.height?d.story.height:600,i=$(document).width(),j=j>i?i:j;try{l=$("#help-modal").dialog("isOpen")}catch(m){}l?$("#help-modal").html(g(d.story.steps[e])):(h=[],d.story.steps.length>1&&(h.push({text:"Prev",click:function(a){e-1===0&&$(a.target).button("disable"),e-1<d.story.steps.length-1&&$(a.target).next().button("enable"),b(e-1)},disabled:!0}),h.push({text:"Next",click:function(a){e+1>0&&$(a.target).prev().button("enable"),e+1===d.story.steps.length-1&&$(a.target).button("disable"),b(e+1)}})),h.push({text:"Close",click:function(){$("#help-modal").dialog("close")}}),$("#help-modal").html(g(d.story.steps[e])).dialog({position:{my:"center top",at:"center top+150",of:"body"},title:d.story.hdr,width:j,height:k,buttons:h,closeOnEscape:!0,show:500,hide:500,resizable:!1,close:function(){$("#help-modal").empty()}}),$(".ui-dialog-buttonset button").each(function(){var a,b,c;c=$(this).text(),"Close"===c?(b="fa-times",a="btn btn-default",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Close')):"Prev"===c?(b="fa-chevron-left",a="btn btn-primary",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Prev')):(b="fa-chevron-right",a="btn btn-primary",$(this).attr({"class":a}).html('Next <i class="fa '+b+'"></i>').css({"margin-right":"20px"}))}),$('.ui-dialog[aria-describedby="help-modal"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$("#auto-off-checkbox").click(function(){$('input[name="auto-off-checkbox"]:checked').length?c("inventoryAutoHelp","off"):c("inventoryAutoHelp","on")}))}var d=a.defn,e=a.step,f=a.autoShow||!1;b(0)}}]).factory("ReturnToCaller",["$location","Empty",function(a,b){return function(c){var d,e=a.path().replace(/^\//,"").split("/"),f="";for(c=b(c)?e.length-1:c+1,d=0;c>d;d++)f+="/"+e[d];a.path(f)}}]).factory("FormatDate",["$filter",function(a){return function(b){return a("date")(b,"MM/dd/yy HH:mm:ss")}}]).factory("Wait",["$rootScope",function(a){return function(b){var c,d,e,f,g,h;"start"!==b||a.waiting?"stop"===b&&a.waiting&&$(".spinny, .overlay").fadeOut(400,function(){a.waiting=!1}):(a.waiting=!0,c=$(window).width(),d=$(window).height(),e=$(".spinny").width(),f=$(".spinny").height(),g=(c-e)/2,h=(d-f)/2,$(".overlay").css({width:$(document).width(),height:$(document).height()}).fadeIn(),$(".spinny").css({top:h,left:g}).fadeIn(400))}}]).factory("HideElement",[function(){return function(a,b){var c=$(a),d=c.css("width"),e=c.css("height"),f=c.position(),g=c.parent(),h=c.css("border-radius"),i=c.css("background-color"),j=c.css("margin"),k=c.css("padding");g.append('<div id="curtain-div" style="position: absolute;top: '+f.top+"px; left: "+f.left+"px; z-index: 1000; width: "+d+"; height: "+e+"; background-color: "+i+"; margin: "+j+"; padding: "+k+"; border-radius: "+h+'; opacity: .75; display: none; "></div>'),$("#curtain-div").show(0,b)}}]).factory("ShowElement",[function(){return function(){$("#curtain-div").fadeOut(500,function(){$(this).remove()})}}]).factory("GetChoices",["Rest","ProcessErrors",function(a,b){return function(c){var d=c.scope,e=c.url,f=c.field,g=c.variable,h=c.callback,i=c.choice_name;d[g]?d[g].length=0:d[g]=[],a.setUrl(e),a.options().success(function(a){var b,c;for(b=i?a.actions.GET[f][i]:a.actions.GET[f].choices,c=0;c<b.length;c++)d[g].push({label:b[c][1],value:b[c][0],name:b[c][1]});h&&d.$emit(h)}).error(function(a,c){b(d,a,c,null,{hdr:"Error!",msg:"Failed to get "+e+". GET status: "+c})})}}]).factory("Find",[function(){return function(a){var b,c=a.list,d=a.key,e=a.val,f=!1;if("object"==typeof c&&Array.isArray(c)){for(b=0;b<a.list.length;b++)if(c[b][d]===e){f=!0;break}return f?c[b]:null}return null}}]).factory("DebugForm",[function(){return function(a){var b,c=a.form,d=a.scope;for(b in c.fields)d[c.name+"_form"][b]&&console.log(b+" valid: "+d[c.name+"_form"][b].$valid),c.fields[b].sourceModel&&d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField]&&console.log(c.fields[b].sourceModel+"_"+c.fields[b].sourceField+" valid: "+d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField].$valid);console.log("form pristine: "+d[c.name+"_form"].$pristine),console.log("form valid: "+d[c.name+"_form"].$valid)}}]).factory("Store",["Empty",function(a){return function(b,c){if(a(c)){if(!a(b)){var d=localStorage[b];return a(d)?null:JSON.parse(d)}}else localStorage[b]=JSON.stringify(c)}}]).factory("ApplyEllipsis",[function(){return function(a){var b=$("#string-test");b.length||($("body").append('<div style="display:none;" id="string-test"></div>'),b=$("#string-test")),$(a).each(function(){var a,c,d,e,f,g=!0;$(this).attr("title")?(a=$(this).attr("title"),g=!1):a=$(this).text(),b.text(a),c=b.width(),d=$(this).parent().width(),c>d&&(g&&$(this).attr("title",a),e=c/a.length,f=c-d,a=a.substr(0,a.length-(Math.ceil(f/e)+3)),$(this).text(a+"...")),d>c&&!g&&(a=$(this).attr("title"),$(this).text(a))})}}]),angular.module("ApiLoader",["Utilities"]).factory("LoadBasePaths",["$http","$rootScope","Store","ProcessErrors",function(a,b,c,d){return function(){a.get("/api/").success(function(e){var f=e.current_version;a.get(f).success(function(a){a.base=f,b.defaultUrls=a,c("api",a)}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read "+f+". GET status: "+c})})}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read /api. GET status: "+c})})}}]).factory("GetBasePath",["$rootScope","Store","LoadBasePaths","Empty",function(a,b,c,d){return function(c){return d(a.defaultUrls)?b("api")?(a.defaultUrls=b("api"),a.defaultUrls[c]):"":a.defaultUrls[c]}}]),angular.module("AWDirectives",["RestServices","Utilities","AuthService","JobsHelper"]).directive("awpassmatch",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=c.awpassmatch,e=$('input[name="'+b+'"]').val();return a===e?(d.$setValidity("awpassmatch",!0),a):void d.$setValidity("awpassmatch",!1)})}}}).directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c=a.split(" "),e="";for(b=0;b<c.length;b++)e+=c[b].charAt(0).toUpperCase()+c[b].substr(1)+" ";return e=e.trim(),e!==a&&(d.$setViewValue(e),d.$render()),e})}}}).directive("integer",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){return d.$setValidity("min",!0),d.$setValidity("max",!0),/^\-?\d*$/.test(a)?(d.$setValidity("integer",!0),b.attr("min")&&(""===a||null===a||parseInt(a,10)<parseInt(b.attr("min"),10))?void d.$setValidity("min",!1):b.attr("max")&&parseInt(a,10)>parseInt(b.attr("max"),10)?void d.$setValidity("max",!1):a):void d.$setValidity("integer",!1)})}}}).directive("awRequiredWhen",function(){return{require:"ngModel",link:function(a,b,c,d){function e(){var e,f=b.val(),g=!0;!a[c.awRequiredWhen]||null!==b.attr("required")&&void 0!==b.attr("required")?a[c.awRequiredWhen]||(b.removeAttr("required"),$(b).hasClass("lookup")?(e=$(b).parent().parent().parent().find("label").first(),e.removeClass("prepend-asterisk")):$(b).parent().parent().find("label").first().removeClass("prepend-asterisk")):($(b).attr("required","required"),$(b).hasClass("lookup")?$(b).parent().parent().parent().find("label").first().addClass("prepend-asterisk"):$(b).parent().parent().find("label").first().addClass("prepend-asterisk")),!a[c.awRequiredWhen]||void 0!==f&&null!==f&&""!==f||(g=!1),d.$setValidity("required",g)}void 0!==c.awrequiredInit&&null!==c.awrequiredInit&&(a[c.awRequiredWhen]=c.awrequiredInit,e()),a.$watch(c.awRequiredWhen,function(){e()}),a.$watch($(b).attr("name"),function(){e()})}}}).directive("awPlaceholder",[function(){return{require:"ngModel",link:function(a,b,c){$(b).attr("placeholder",a[c.awPlaceholder]),a.$watch(c.awPlaceholder,function(a){$(b).attr("placeholder",a)})}}}]).directive("awlookup",["Rest",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(d){if(""!==d&&null!==d){var f=c.attr("data-url");f=f.replace(/\:value/,encodeURI(d)),b[c.attr("data-source")]=null,a.setUrl(f),a.get().then(function(a){var f=a.data.results;return f.length>0?(b[c.attr("data-source")]=f[0].id,b[c.attr("name")]=f[0].name,e.$setValidity("required",!0),e.$setValidity("awlookup",!0),d):(e.$setValidity("required",!0),void e.$setValidity("awlookup",!1))})}else e.$setValidity("awlookup",!0),b[c.attr("data-source")]=null})}}}]).directive("awValidUrl",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c,e=!0;""!==a&&(d.$setValidity("required",!0),b=/^(https|http|ssh)\:\/\//,c=/\@/g,(!b.test(a)||c.test(a))&&(e=!1)),d.$setValidity("awvalidurl",e)})}}}]).directive("awToolTip",function(){return function(a,b,c){var d,e=void 0!==c.delay&&null!==c.delay?c.delay:$AnsibleConfig.tooltip_delay;d=c.awTipPlacement?c.awTipPlacement:void 0!==c.placement&&null!==c.placement?c.placement:"left",$(b).on("hidden.bs.tooltip",function(){$(".tooltip").each(function(){$(this).remove()})}),$(b).tooltip({placement:d,delay:e,html:!0,title:c.awToolTip,container:"body"}),c.tipWatch&&a.$watch(c.tipWatch,function(a,c){a!==c&&$(b).tooltip("hide").attr("data-original-title",a).tooltip("fixTitle")})}}).directive("awPopOver",["$compile",function(a){return function(b,c,d){var e=void 0!==d.placement&&null!==d.placement?d.placement:"left",f=void 0!==d.title&&null!==d.title?d.title:"Help",g=void 0!==d.container?d.container:!1;$(c).popover({placement:e,delay:0,title:f,content:d.awPopOver,trigger:"manual",html:!0,container:g}),$(c).click(function(){var c=$(this).attr("id");$(".help-link, .help-link-white").each(function(){c!==$(this).attr("id")&&$(this).popover("hide")}),$(".popover").each(function(){$(this).remove()}),$(".tooltip").each(function(){$(this).hide()}),$(this).popover("toggle"),$(".popover").each(function(){a($(this))(b)})}),$(document).bind("keydown",function(a){27===a.keyCode&&($(c).popover("hide"),$(".popover").each(function(){$(this).remove()}))})}}]).directive("ngSlider",[function(){return{require:"ngModel",link:function(a,b,c,d){var e=b.attr("name");$("#"+e+"-slider").slider({value:0,step:1,min:b.attr("min"),max:b.attr("max"),slide:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.$$phase||a.$digest()}}),$("#"+e+"-number").change(function(){$("#"+e+"-slider").slider("value",parseInt($(this).val(),10))})}}}]).directive("awMultiSelect",[function(){return{require:"ngModel",link:function(a,b){$(b).multiselect({buttonClass:"btn-default, btn-mini",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,buttonText:function(a){if(0===a.length)return'None selected <b class="caret"></b>';if(a.length>3)return a.length+' selected  <b class="caret"></b>';var b="";return a.each(function(){b+=$(this).text()+", "}),b.substr(0,b.length-2)+' <b class="caret"></b>'}})}}}]).directive("ngSpinner",[function(){return{require:"ngModel",link:function(a,b,c,d){var e,f;e=b.attr("data-disabled"),f={value:0,step:1,min:b.attr("min"),max:b.attr("max"),numberFormat:"d",spin:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.job_templates_form.$dirty=!0,a.$$phase||a.$digest()}},e&&(f.disabled=!0),$(b).spinner(f)}}}]).directive("chkPass",[function(){return{require:"ngModel",link:function(a,b,c,d){$(b).keyup(function(){var c=!0,e=chkPass(b.val());b.val()&&(c=e>$AnsibleConfig.password_strength?!0:!1),d.$setValidity("complexity",c),a.$$phase||a.$digest()})}}}]).directive("awRefresh",["$rootScope",function(a){return{link:function(b){function c(){for(var a=""+b.refreshCnt;a.length<2;)a="0"+a;return"Refresh in "+a+" sec."}b.refreshCnt=$AnsibleConfig.refresh_rate,b.refreshMsg=c(),a.timer&&clearInterval(a.timer),a.timer=setInterval(function(){b.refreshCnt--,b.refreshCnt<=0&&(b.refresh(),b.refreshCnt=$AnsibleConfig.refresh_rate),b.refreshMsg=c(),b.$$phase||b.$digest()},1e3)}}}]).directive("awMultiselect",[function(){return{require:"^form",link:function(a,b,c,d){$(b).select2({multiple:!0,data:function(){if(a[c.awMultiselect]){var b,d=a[c.awMultiselect],e=[];for(b=0;b<d.length;b++)e.push({id:d[b].value,text:d[b].label});return{results:e}}return{results:{id:"",text:""}}}}),$(b).on("change",function(){d.$setDirty(),a.$$phase||a.$digest()})}}}]).directive("awDraggable",[function(){return function(a,b,c){if("true"===c.awDraggable){var d=c.containment;$(b).draggable({containment:d,scroll:!0,revert:"invalid",helper:"clone",start:function(a,b){b.helper.addClass("draggable-clone")},zIndex:100,cursorAt:{left:-1}})}}}]).directive("awDroppable",["Find",function(a){return function(b,c,d){var e;"true"===d.awDroppable&&$(c).droppable({accept:function(c){if("group"===c.attr("data-type")){if($(this).attr("data-group-id")===c.attr("data-group-id"))return!1;if(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)})){var d,f=parseInt(c.attr("data-group-id"),10),g=!1;for(d=0;d<e.children.length;d++)if(e.children[d]===f){g=!0;break}return g?!1:!0}return!1}return"host"===c.attr("data-type")?(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)}),e.id>1?!0:!1):!1},over:function(){$(this).addClass("droppable-hover")},out:function(){$(this).removeClass("droppable-hover")},drop:function(a,c){$(this).removeClass("droppable-hover"),"group"===c.draggable.attr("data-type")?b.$emit("CopyMoveGroup",parseInt(c.draggable.attr("data-tree-id"),10),parseInt($(this).attr("data-tree-id"),10)):"host"===c.draggable.attr("data-type")&&b.$emit("CopyMoveHost",parseInt($(this).attr("data-tree-id"),10),parseInt(c.draggable.attr("data-host-id"),10))},tolerance:"pointer"})}}]),angular.module("AWFilters",[]).filter("capitalize",[function(){return function(a){var b,c,d;if(a){for(b=a.replace(/\_/g," ").split(" "),c="",d=0;d<b.length;d++)c+=b[d].charAt(0).toUpperCase()+b[d].substr(1)+" ";return c.trim()}}}]),angular.module("FormGenerator",["GeneratorHelpers","ngCookies","Utilities"]).factory("GenerateForm",["$rootScope","$location","$cookieStore","$compile","SearchWidget","PaginateWidget","Attr","Icon","Column","NavigationLink","HelpCollapse","Button","DropDown","Empty","SelectIcon",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{setForm:function(a){this.form=a},attr:g,icon:h,accordion_count:0,scope:null,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},inject:function(a,b){var c,e,f,g;if(c=angular.element(document.getElementById(b.modal?b.modal_body_id?b.modal_body_id:"form-modal-body":b.id?b.id:"htmlTemplate")),this.mode=b.mode,this.modal=b.modal?!0:!1,this.setForm(a),c.html(b.html?b.html:this.build(b)),this.scope=b.scope?b.scope:c.scope(),d(c)(this.scope),!b.html){for(e in a.fields)this.scope[e]=null;for(f in a.related)this.scope[f]=null;(!b.modal&&b.related||this.form.forceListeners)&&this.addListeners(),"add"===b.mode&&this.applyDefaults()}$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize"),$('.form-control[required], input[type="radio"][required]').each(function(){var a,b;n($(this).attr("aw-required-when"))&&(a=$(this).parent().parent().find("label").first(),"radio"===$(this).attr("type")&&(a=$(this).parent().parent().parent().find("label").first()),a.length>0&&(b=a.children("span"),b.length>0&&!b.first().hasClass("prepend-asterisk")?b.first().addClass("prepend-asterisk"):b.length<=0&&!a.first().hasClass("prepend-asterisk")&&a.first().addClass("prepend-asterisk")))});try{$("#help-modal").empty().dialog("destroy")}catch(h){}return b.modal&&(this.scope.formModalActionDisabled=!1,this.scope.formModalInfo=!1,a&&(b.modal_title_id?this.scope[b.modal_title_id]="add"===b.mode?a.addTitle:a.editTitle:this.scope.formModalHeader="add"===b.mode?a.addTitle:a.editTitle),b.modal_selector?($(b.modal_selector).modal({show:!0,backdrop:"static",keyboard:!0}),$(b.modal_selector).on("shown.bs.modal",function(){$(b.modal_select+" input:first").focus()}),$(b.modal_selector).on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})):(g=b.show_modal===!1?!1:!0,$("#form-modal").modal({show:g,backdrop:"static",keyboard:!0}),$("#form-modal").on("shown.bs.modal",function(){$("#form-modal input:first").focus()}),$("#form-modal").on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})),$(document).bind("keydown",function(a){27===a.keyCode&&(b.modal_selector&&$(b.modal_selector).modal("hide"),$("#prompt-modal").modal("hide"),$("#form-modal").modal("hide"))})),this.scope.$$phase||this.scope.$digest(),this.scope},applyDefaults:function(){for(var a in this.form.fields)(this.form.fields[a]["default"]||0===this.form.fields[a]["default"])&&(this.scope[a]="select"===this.form.fields[a].type&&this.scope[a+"_options"]?this.scope[a+"_options"][this.form.fields[a]["default"]]:this.form.fields[a]["default"])},reset:function(){function a(a,b){if("checkbox_group"===a.type)for(var e=0;e<a.fields.length;e++)c[a.fields[e].name]="",c[a.fields[e].name+"_api_error"]="",c[d.name+"_form"][a.fields[e].name].$setValidity("apiError",!0);else c[b]="",c[b+"_api_error"]="";a.sourceModel&&(c[a.sourceModel+"_"+a.sourceField]="",c[a.sourceModel+"_"+a.sourceField+"_api_error"]="",c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),"lookup"===a.type&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&(c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setPristine(),c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setPristine(),c[d.name+"_form"][b].$setValidity("apiError",!0)),a.chkPass&&c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setValidity("complexity",!0),$("#progbar").css({width:0})),a.awPassMatch&&c[d.name+"_form"][b]&&c[d.name+"_form"][b].$setValidity("awpassmatch",!0),a.ask&&(c[b+"_ask"]=!1)}var b,c=this.scope,d=this.form;c[d.name+"_form"]&&c[d.name+"_form"].$setPristine();for(b in d.fields)a(d.fields[b],b);if(d.statusFields)for(b in d.statusFields)a(d.statusFields[b],b);"add"===this.mode&&this.applyDefaults()},addListeners:function(){this.modal?$(".jqui-accordion-modal").accordion({collapsible:!1,heightStyle:"content",active:0}):(this.scope.accordionToggle=function(a){$(a).collapse("toggle"),$(a+"-icon").hasClass("fa-minus")?$(a+"-icon").removeClass("fa-minus").addClass("fa-plus"):$(a+"-icon").removeClass("fa-plus").addClass("fa-minus")},$(".jqui-accordion").each(function(){var a,d,e,f=!1,g=c.get("accordions"),h=!1;if(g)for(a=$(this).attr("id"),d=b.path().replace(/^\//,"").split("/")[0],e=0;e<g.length&&h===!1;e++)g[e].base===d&&g[e].id===a&&(h=!0,f=g[e].active);h===!1&&"true"===$(this).attr("data-open")&&(f=0),$(this).accordion({collapsible:!0,heightStyle:"content",active:f,activate:function(){$(".jqui-accordion").each(function(){var a,d,e=$(this).accordion("option","active"),f=$(this).attr("id"),g=b.path().replace(/^\//,"").split("/")[0],h=c.get("accordions");for((null===h||void 0===h)&&(h=[]),d=!1,a=0;a<h.length&&d===!1;a++)h[a].base===g&&h[a].id===f&&(d=!0,h[a].active=e);d===!1&&h.push({base:g,id:f,active:e}),c.put("accordions",h)})}})}))},genID:function(){var a=new Date;return a.getTime()},headerField:function(a,b){var c="";return b.label&&(c+="<label>"+b.label+"</label>\n"),c+='<input type="text" name="'+a+'" ',c+='ng-model="'+a+'" ',c+=b["class"]?g(b,"class"):"",c+=" readonly />\n"},clearApiErrors:function(){for(var a in this.form.fields)this.form.fields[a].sourceModel?(this.scope[this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+"_api_error"]="",$('[name="'+this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+'"]').removeClass("ng-invalid")):this.form.fields[a].realName?(this.scope[this.form.fields[a].realName+"_api_error"]="",$('[name="'+this.form.fields[a].realName+'"]').removeClass("ng-invalid")):(this.scope[a+"_api_error"]="",$('[name="'+a+'"]').removeClass("ng-invalid"));this.scope.$$phase||this.scope.$digest()},button:l,navigationLink:j,buildHelpCollapse:function(a){var b,c="",d={};for(b=0;b<a.length;b++)d.hdr=a[b].hdr,d.content=a[b].content,d.idx=this.accordion_count++,d.show=a[b].show?a[b].show:null,d.bind=a[b].ngBind?a[b].ngBind:null,c+=k(d);return c},buildField:function(a,b,c,d){function e(){var a;return a=d.formFieldSize?d.formFieldSize:b.xtraWide?"col-lg-10":b.column?"col-lg-8":!d.formFieldSize&&c.modal?"col-lg-10":"col-lg-6"}function f(){var a;return a=d.formLabelSize?d.formLabelSize:b.column?"col-lg-4":!d.formLabelSize&&c.modal?"col-lg-2":"col-lg-2"}function i(a,b,c){var d="";return d+=a.id?g(a,"id"):'id="'+c.name+"_"+b+'" '}function j(a,b,c,d,e){var f="",h=void 0!==e&&e===!1?!1:!0;return h&&(f+='<label class="',f+=void 0===b.inline||b.inline===!0?"checkbox-inline":"",f+=b.labelClass?" "+b.labelClass:"",f+='">'),f+='<input type="checkbox" ',f+=g(b,"type"),f+='ng-model="'+c+'" ',f+='name="'+c+'" ',f+=b.ngChange?g(b,"ngChange"):"",f+='id="'+a.name+"_"+c+'_chbox" ',f+=void 0!==d?"_"+d:"",f+='class="',f+=b["class"]?b["class"]+" ":"",f+='"',f+=void 0!==b.trueValue?g(b,"trueValue"):"",f+=void 0!==b.falseValue?g(b,"falseValue"):"",f+=b.checked?"checked ":"",f+=b.readonly?"disabled ":"",f+=" > ",h&&(f+=b.label+" ",f+=b.awPopOver?g(b,"awPopOver",c):"",f+="</label>\n"),f}function l(){var c="";return(b.label||b.labelBind)&&(c+="<label ",c+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",(q||b.labelClass)&&(c+='class="',c+=b.labelClass?b.labelClass:"",c+=q?" "+f():"",c+='" '),c+=b.labelNGClass?'ng-class="'+b.labelNGClass+'" ':"",c+='for="'+a+'">',c+=b.icon?h(b.icon):"",c+='<span class="label-text">'+b.label+"</span>",c+=b.awPopOver&&!b.awPopOverRight?g(b,"awPopOver",a):"",c+="</label>\n"),c}var m,n,o,p="",q=this.form.horizontal?!0:!1;if("alertblock"===b.type&&(p+='<div class="row">\n',p+='<div class="',p+=c.modal||c.id?"col-lg-12":"col-lg-8 col-lg-offset-2",p+='">\n',p+='<div class="alert',p+=void 0===b.closeable||b.closeable===!0?" alert-dismissable":"",p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=">\n",p+=void 0===b.closeable||b.closeable===!0?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n':"",p+=b.alertTxt,p+="</div>\n",p+="</div>\n",p+="</div>\n"),"hidden"===b.type&&("edit"===c.mode&&b.includeOnEdit||"add"===c.mode&&b.includeOnAdd)&&(p+='<input type="hidden" ng-model="'+a+'" name="'+a+'" />'),!b.readonly||b.readonly&&"edit"===c.mode){if(p+='<div class="form-group" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=b.ngHide?this.attr(b,"ngHide"):"",p+=">\n",("text"===b.type||"password"===b.type||"email"===b.type)&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+=b.clear||b.genMD5?'<div class="input-group">\n':"",(null===b.control||void 0===b.control||b.control)&&(p+="<input ",p+=this.attr(b,"type"),p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.chkPass?"chk-pass ":"",p+=i(b,a,this.form),p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+='class="form-control',p+=b["class"]?" "+this.attr(b,"class"):"",p+='" ',p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+=b.awPassMatch?'awpassmatch="'+b.associated+'" ':"",p+=b.capitalize?"capitalize ":"",p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=void 0!==b.autocomplete?this.attr(b,"autocomplete"):"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=b.awValidUrl?"aw-valid-url ":"",p+=b.associated&&this.form.fields[b.associated].ask?'ng-disabled="'+b.associated+'_ask" ':"",p+=b.awMultiselect?'aw-multiselect="'+b.awMultiselect+'" ':"",p+=" >\n"),b.clear&&(p+='<span class="input-group-btn"><button type="button" ',p+='id="'+this.form.name+"_"+a+'_clear_btn" ',p+='class="btn btn-default" ng-click="clear(\''+a+"','"+b.associated+'\')" aw-tool-tip="Clear '+b.label+'" id="'+a+'-clear-btn" ',p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=' ><i class="fa fa-undo"></i></button>\n',p+="</span>\n</div>\n",b.ask&&(p+='<label class="checkbox-inline ask-checkbox" ',p+=b.askShow?'ng-show="'+b.askShow+'" ':"",p+=">",p+='<input type="checkbox" ng-model="'+a+'_ask" ng-change="ask(\''+a+"','"+b.associated+"')\" ",p+='id="'+this.form.name+"_"+a+'_ask_chbox" ',p+="> Ask at runtime?</label>")),b.genMD5&&(p+='<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="genMD5(\''+a+'\')" aw-tool-tip="Generate '+b.label+'" data-placement="top" id="'+this.form.name+"_"+a+'_gen_btn"><i class="fa fa-magic"></i></button></span>\n</div>\n'),("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),"email"===b.type&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.email">A valid email address is required!</div>\n'),b.awPassMatch&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.awpassmatch">Must match Password value</div>\n'),b.awValidUrl&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.awvalidurl\">URL must begin with ssh, http or https and may not contain '@'</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',b.chkPass&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.complexity">Password must be stronger</div>\n',p+='<div class="pw-progress">\n',p+='<div class="progress progress-striped">\n',p+='<div id="progbar" class="progress-bar" role="progress"></div>\n',p+="</div>\n",p+=k({hdr:"Password Complexity",content:'<p>A password with reasonable strength is required. As you type the password a progress bar will measure the strength. Sufficient strength is reached when the bar turns green.</p><p>Password strength is judged using the following:</p><ul class="pwddetails"><li>Minimum 8 characters in length</li>\n<li>Contains a sufficient combination of the following items:\n<ul>\n<li>UPPERCASE letters</li>\n<li>Numbers</li>\n<li>Symbols _!@#$%^&*()</li>\n</ul>\n</li>\n</ul>\n',idx:this.accordion_count++,show:null}),p+="</div><!-- pw-progress -->\n"),p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"textarea"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",("variables"===a||"extra_vars"===a||"inventory_variables"===a||"source_vars"===a)&&(p+='<div class="parse-selection" id="'+this.form.name+"_"+a+'_parse_type">Parse as: <input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="yaml"> <span class="parse-label">YAML</span>\n',p+='<input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="json"> <span class="parse-label">JSON</span>\n',p+="</div>\n"),p+="<textarea ",p+=b.rows?this.attr(b,"rows"):"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+="></textarea>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"select"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<select ",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=this.attr(b,"ngOptions"),p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.multiSelect?"multiple ":"",p+=b.readonly?"readonly ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=">\n",p+='<option value="">',p+=b.defaultOption?b.defaultOption:"Choose a "+b.label.toLowerCase(),p+="</option>\n",p+="</select>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"number"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<input ",p+=b.spinner?"":'type="text" ',p+='" value="'+b["default"]+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.slider?'ng-slider="'+a+'" ':"",p+=b.spinner?'ng-spinner="'+a+'" ':"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=i(b,a,this.form),p+=b.min||0===b.min?this.attr(b,"min"):"",p+=b.max?this.attr(b,"max"):"",p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.slider?'id="'+a+'-number"':b.id?this.attr(b,"id"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly?"readonly ":"",p+=b.integer?"integer ":"",p+=b.disabled?'data-disabled="true" ':"",p+=" >\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(void 0!==b.min||void 0!==b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be an integer between '+b.min+" and ",p+=void 0!==b.max?b.max:"unlimited",p+="</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"checkbox_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="checkbox-group" ',p+='id="'+this.form.name+"_"+a+'_chbox_group" ',p+=">\n",m=0;m<b.fields.length;m++)p+=j(this.form,b.fields[m],b.fields[m].name,m);
("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(b.min||b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be in range '+b.min+" to "+b.max+"</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox-group -->\n",p+="</div>\n"}if("checkbox"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="checkbox">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+=j(this.form,b,a,void 0,!1),p+=b.icon?h(b.icon):"",p+='<span class="label-text">'+b.label+"</span>",p+=b.awPopOver?this.attr(b,"awPopOver",a):"",p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox -->\n",q&&(p+="</div>\n")),"radio_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",m=0;m<b.options.length;m++)p+='<label class="radio-inline" ',p+=b.options[m].ngShow?this.attr(b.options[m],"ngShow"):"",p+=">",p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.options[m].value+'" ',p+='ng-model="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.ngDisabled?this.attr(b,"ngDisabled"):"",p+=" > "+b.options[m].label+"\n",p+="</label>\n";("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"}"radio"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="radio">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.value+'" ',p+='ng-model="'+b.ngModel+'" ',p+=b.ngChange?g(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+=b.ngDisabled?g(b,"ngDisabled"):"",p+=" > ",p+=b.label,p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- radio -->\n",q&&(p+="</div>\n")),"lookup"!==b.type||void 0!==b.excludeMode&&b.excludeMode===c.mode||(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="input-group">\n',p+='<span class="input-group-btn">\n',p+='<button type="button" class="lookup-btn btn btn-default" '+this.attr(b,"ngClick")+'><i class="fa fa-search"></i></button>\n',p+="</span>\n",p+='<input type="text" class="form-control input-medium lookup" ',p+='ng-model="'+b.sourceModel+"_"+b.sourceField+'" ',p+='name="'+b.sourceModel+"_"+b.sourceField+'" ',p+='class="form-control" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.id?this.attr(b,"id"):"",p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=" awlookup >\n",p+="</div>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.required">A value is required!</div>\n'),p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.awlookup">Value not found</div>\n',p+='<div class="error api-error" ng-bind="'+b.sourceModel+"_"+b.sourceField+'_api_error"></div>\n',p+="</div>\n"),"custom"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<div ",p+='id="'+d.name+"_"+a+'" ',p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+=">\n",p+=b.control,p+="</div>\n",p+="</div>\n"),p+="</div>\n"}return p},getActions:function(a){var b,c='<div class="list-actions">\n';for(b in this.form.actions)("all"===this.form.actions[b].mode||this.form.actions[b].mode===a.mode)&&(c+=this.button({btn:this.form.actions[b],action:b,toolbar:!0}));return c+="</div>\n"},breadCrumbs:function(a,c){var d,e,f="";if(f+='<div class="nav-path">\n',f+='<ul class="breadcrumb">\n',f+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',c){e=b.path().replace(/^\//,"").split("/"),2===e.length&&(f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n"),f+='<li class="active"> </li>\n',f+="</ul>\n",f+='<div class="dropdown">\n';for(d in c)if(c[d].active){f+='<a href="" class="toggle" ',f+='data-toggle="dropdown" ',f+=">"+c[d].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}f+='<ul class="dropdown-menu" role="menu">\n';for(d in c)f+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+c[d].href+'" ',f+=">",f+='<i class="fa fa-check" style="visibility: ',f+=c[d].active?"visible":"hidden",f+='"></i> ',f+=c[d].listLabel?c[d].listLabel:c[d].label,f+="</a></li>\n";f+="</ul>\n",f+="</div><!-- dropdown -->\n",f+="</div><!-- nav-path -->\n"}else f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n</ul>\n</div><!-- nav-path -->\n";return f},build:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p="";if(this.modal||void 0!==a.breadCrumbs&&a.breadCrumbs!==!0||(p+=this.form.navigationLinks?this.breadCrumbs(a,this.form.navigationLinks):this.breadCrumbs(a)),!this.modal&&this.form.statusFields){if(p+='<div class="well">\n',this.form.statusActions){p+='<div class="list-actions">\n';for(c in this.form.statusActions)b=this.form.statusActions[c],p+=this.button({btn:b,action:c,toolbar:!0});p+="</div>\n"}p+='<div class="form status-fields">\n';for(f in this.form.statusFields)g=this.form.statusFields[f],p+=this.buildField(f,g,a,this.form);p+="</div><!-- status fields -->\n",p+="</div><!-- well -->\n"}if(this.form.fieldsAsHeader){p+='<div class="well">\n',p+='<form class="form-inline" name="'+this.form.name+'_form" id="'+this.form.name+'_form" novalidate >\n';for(f in this.form.fields)g=this.form.fields[f],p+=this.headerField(f,g,a);p+="</form>\n",p+="</div>\n"}else{if(this.form.collapse&&this.form.collapseMode===a.mode&&(p+='<div id="'+this.form.name+'-collapse-0" ',p+=this.form.collapseOpen?'data-open="true" ':"",p+='class="jqui-accordion">\n',p+="<h3>"+this.form.collapseTitle+"</h3>\n",p+="<div>\n"),!this.modal&&this.has("well")&&(p+='<div class="well">\n'),!this.modal&&this.form.actions&&(p+=this.getActions(a)),!a.modal&&this.form.showTitle){if(p+='<div class="form-title">',p+="edit"===a.mode?this.form.editTitle:this.form.addTitle,this.has("titleActions")){p+='<div class="title-actions pull-right">\n';for(d in this.form.titleActions)p+=this.button({btn:this.form.titleActions[d],action:d,toolbar:!0});p+="</div>\n"}p+="</div>\n",p+='<hr class="form-title-hr">\n'}if(p+='<form class="',p+=this.form.horizontal?"form-horizontal":"",p+=this.form["class"]?" "+this.form["class"]:"",p+='" name="'+this.form.name+'_form" id="'+this.form.name+'_form" autocomplete="off" novalidate>\n',p+='<div ng-show="flashMessage != null && flashMessage != undefined" class="alert alert-info">{{ flashMessage }}</div>\n',this.form.twoColumns){p+='<div class="row">\n',p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],1===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 1 -->\n",p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],2===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 2 -->\n",p+="</div>\n"}else if(this.form.tabs){for(p+='<ul id="'+this.form.name+'_tabs" class="nav nav-tabs">\n',h=0;h<this.form.tabs.length;h++)k=this.form.tabs[h],p+="<li",0===h&&(p+=' class="active"'),p+='><a href="#'+k.name+'" data-toggle="tab">'+k.label+"</a></li>\n";for(p+="</ul>\n",p+='<div class="tab-content">\n',h=0;h<this.form.tabs.length;h++){k=this.form.tabs[h],p+='<div class="tab-pane',0===h&&(p+=" active"),p+='" id="'+k.name+'">\n';for(f in this.form.fields)this.form.fields[f].tab===k.name&&(p+=this.buildField(f,this.form.fields[f],a,this.form));p+="</div>\n"}p+="</div>\n"}else{i="",j="";for(f in this.form.fields)g=this.form.fields[f],a.modal&&g.excludeModal||(g.group&&g.group!==j&&(""!==j&&(p+="</div>\n"),p+='<div class="well">\n',p+="<h5>"+g.group+"</h5>\n",j=g.group),g.section&&g.section!==i&&(""!==i?p+="</div>\n":(p+="</div>\n",p+='<div id="'+this.form.name+'-collapse" class="jqui-accordion-modal">\n'),l=this.form[g.section+"Show"]?' ng-show="'+this.form[g.section+"Show"]+'"':"",p+="<h3"+l+">"+g.section+"</h3>\n",p+="<div"+l+">\n",i=g.section),p+=this.buildField(f,g,a,this.form));""!==i&&(p+="</div>\n</div>\n"),""!==j&&(p+="</div>\n")}if(!this.modal&&this.has("buttons")){this.form.twoColumns&&(p+='<div class="row">\n',p+='<div class="col-lg-12">\n',p+="<hr />\n"),p+='<div class="buttons" ',p+='id="'+this.form.name+'_controls" ',p+=">\n",this.form.horizontal&&(m=2,this.form.buttons.labelClass&&(m=parseInt(this.form.buttons.labelClass.replace(/[A-Z,a-z,-]/g,""))),n=12-m,p+='<div class="col-lg-offset-'+m+" col-lg-"+n+">\n");for(d in this.form.buttons)"object"==typeof this.form.buttons[d]&&(e=this.form.buttons[d],"save"===d&&(e.label="Save",e["class"]="btn-success"),"reset"===d&&(e.label="Reset",e["class"]="btn-default"),p+='<button type="button" ',p+='class="btn btn-sm',p+=e["class"]?" "+e["class"]:"",p+='" ',p+='id="'+this.form.name+"_"+d+'_btn" ',e.ngClick&&(p+=this.attr(e,"ngClick")),e.ngDisabled&&("reset"!==d?(p+='ng-disabled="'+this.form.name+"_form.$pristine || "+this.form.name+"_form.$invalid",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" '):(p+='ng-disabled="'+this.form.name+"_form.$pristine",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" ')),p+=">",p+=o({action:d}),p+=" "+e.label+"</button>\n");p+="</div><!-- buttons -->\n",this.form.horizontal&&(p+="</div>\n"),this.form.twoColumns&&(p+="</div>\n",p+="</div>\n")}p+="</form>\n",!this.modal&&this.has("well")&&(p+="</div>\n"),this.form.collapse&&this.form.collapseMode===a.mode&&(p+="</div>\n",p+="</div>\n")}return!this.modal&&a.related&&this.form.related&&(p+=this.buildCollections(a)),p},buildCollections:function(a){var b,c,d,g,h,j,k,l=1,m=this.form,n='<div id="'+this.form.name+"-collapse-"+l+'" class="jqui-accordion">\n';for(g in m.related)if("collection"===m.related[g].type){n+='<h3 class="'+g+'_collapse">'+m.related[g].title+"<h3>\n",n+="<div>\n",m.related[g].instructions&&(n+='<div class="alert alert-info alert-block">\n',n+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',n+="<strong>Hint: </strong>"+m.related[g].instructions+"\n",n+="</div>\n"),n+='<div class="well">\n',n+='<div class="row">\n',n+=e({iterator:m.related[g].iterator,template:m.related[g],mini:!0}),n+='<div class="col-lg-8">\n',n+='<div class="list-actions">\n';for(b in m.related[g].actions)h=m.related[g].actions[b],n+=this.button({btn:h,action:b,toolbar:!0});n+="</div>\n",n+="</div>\n",n+="</div><!-- row -->\n",n+='<div class="list">\n',n+='<table id="'+g+'_table" class="'+m.related[g].iterator+' table table-condensed table-hover">\n',n+="<thead>\n",n+="<tr>\n",n+=void 0===m.related[g].index||m.related[g].index!==!1?"<th>#</th>\n":"";for(d in m.related[g].fields)n+='<th class="list-header" id="'+m.related[g].iterator+"-"+d+'-header" ng-click="sort(\''+m.related[g].iterator+"', '"+d+"')\">"+m.related[g].fields[d].label,n+=' <i class="',n+=m.related[g].fields[d].key?m.related[g].fields[d].desc?"icon-sort-down":"icon-sort-up":"icon-sort",n+='"></i></a></th>\n';n+="<th></th>\n",n+="</tr>\n",n+="</thead>",n+="<tbody>\n",n+='<tr ng-repeat="'+m.related[g].iterator+" in "+g+'" >\n',(void 0===m.related[g].index||m.related[g].index!==!1)&&(n+="<td>{{ $index + (("+m.related[g].iterator+"_page - 1) * "+m.related[g].iterator+"_page_size) + 1 }}.</td>\n"),j=1,k=m.related[g].base?m.related[g].base:g,k=k.replace(/^\//,"");for(d in m.related[g].fields)j++,n+=i({list:m.related[g],fld:d,options:a,base:k});n+='<td class="actions">';for(b in m.related[g].fieldActions)c=m.related[g].fieldActions[b],n+="<a ",n+=c.href?'href="'+c.href+'" ':"",n+=c.ngClick?this.attr(c,"ngClick"):"",n+=c.ngHref?this.attr(c,"ngHref"):"",n+=c.ngShow?this.attr(c,"ngShow"):"",n+=">",n+=o({action:b}),n+=c.label?" "+c.label:"",n+="</a>";n+="</td>",n+="</tr>\n",n+='<tr class="info" ng-show="'+m.related[g].iterator+"Loading == false && ("+g+" == null || "+g+'.length == 0)">\n',n+='<td colspan="'+j+'"><div class="alert alert-info">No records matched your search.</div></td>\n',n+="</tr>\n",n+='<tr class="info" ng-show="'+m.related[g].iterator+'Loading == true">\n',n+='<td colspan="'+j+'"><div class="alert alert-info">Loading...</div></td>\n',n+="</tr>\n",n+="</tbody>\n",n+="</table>\n",n+="</div>\n",n+="</div>\n",n+=f({set:g,iterator:m.related[g].iterator,mini:!0}),n+="</div>\n",l++}return n+="</div>\n",n+="</div>\n"}}}]),angular.module("GeneratorHelpers",["GeneratorHelpers"]).factory("Attr",function(){return function(a,b,c){var d,e,f,g="string"==typeof a[b]?a[b].replace(/[\'\"]/g,"&quot;"):a[b];if(/^ng/.test(b))f="ng-"+b.replace(/^ng/,"").toLowerCase()+'="'+g+'" ';else if(/^data|^aw/.test(b)&&"awPopOver"!==b){for(e="",d=0;d<b.length;d++)e+=/[A-Z]/.test(b.charAt(d))?"-"+b.charAt(d).toLowerCase():b.charAt(d);f=e+'="'+g+'" '}else switch(b){case"trueValue":f='ng-true-value="'+g+'" ';break;case"falseValue":f='ng-false-value="'+g+'" ';break;case"awPopOver":f='<a id="awp-'+c+'" href="" aw-pop-over=\''+g+"' ",f+=a.dataPlacement?'data-placement="'+a.dataPlacement.replace(/[\'\"]/g,"&quot;")+'" ':"",f+=a.dataContainer?'data-container="'+a.dataContainer.replace(/[\'\"]/g,"&quot;")+'" ':"",f+='class="help-link" ',f+='><i class="fa fa-question-circle"></i></a> ';break;case"columnShow":f='ng-show="'+g+'" ';break;case"icon":f='<i class="fa fa-'+g,f+=a.iconSize?" "+a.iconSize:"",f+='"></i>';break;case"autocomplete":f='autocomplete="',f+=g?"true":"false",f+='" ';break;default:f=b+'="'+g+'" '}return f}}).factory("Icon",function(){return function(a){return'<i class="fa '+a+'"></i> '}}).factory("SelectIcon",["Icon",function(a){return function(b){var c,d=b.action,e=b.size;switch(d){case"help":c="fa-question-circle";break;case"add":case"create":c="fa-plus";break;case"edit":c="fa-pencil";break;case"delete":c="fa-trash-o";break;case"group_update":c="fa-exchange";break;case"scm_update":c="fa-cloud-download";break;case"cancel":c="fa-minus-circle";break;case"run":case"rerun":case"submit":c="fa-rocket";break;case"stream":c="fa-clock-o";break;case"refresh":c="fa-refresh";break;case"close":c="fa-arrow-left";break;case"save":c="fa-check-square-o";break;case"properties":c="fa-wrench";break;case"reset":c="fa-undo";break;case"view":c="fa-search-plus";break;case"sync_status":c="fa-cloud"}return c+=e?" "+e:"",a(c)}}]).factory("Button",["Attr","SelectIcon",function(a,b){return function(c){var d=c.btn,e=c.action,f=c.toolbar,g="";return f&&(d.class="btn-xs btn-primary",d.iconSize="fa-lg",delete d.label),g+='<button type="button" ',g+='class="btn',g+=d["class"]?" "+d["class"]:" btn-sm",g+=d.awPopOver?" help-link-white":"",g+='" ',g+=d.ngClick?a(d,"ngClick"):"",d.id?g+='id="'+d.id+'" ':e&&(g+='id="'+e+'_btn" '),g+=d.ngHide?a(d,"ngHide"):"",g+=d.awToolTip?a(d,"awToolTip"):"",g+=d.awToolTip&&void 0===d.dataPlacement?'data-placement="top" ':"",g+=d.awPopOver?'aw-pop-over="'+d.awPopOver.replace(/[\'\"]/g,"&quot;")+'" ':"",g+=d.dataPlacement?a(d,"dataPlacement"):"",g+=d.dataContainer?a(d,"dataContainer"):"",g+=d.dataTitle?a(d,"dataTitle"):"",g+=d.ngShow?a(d,"ngShow"):"",g+=d.ngHide?a(d,"ngHide"):"",g+=d.ngDisabled?a(d,"ngHide"):"",g+=d.ngClass?a(d,"ngClass"):"",g+=d.awTipPlacement?a(d,"awTipPlacement"):"",g+=" >",g+=d.img?'<img src="'+$basePath+"img/"+d.img+'" style="width: 12px; height: 12px;" >':"",g+=b({action:e,size:d.iconSize}),g+=d.label?" "+d.label:"",g+="</button> "}}]).factory("NavigationLink",["Attr","Icon",function(a,b){return function(c){var d="<a ";return d+=c.href?a(c,"href"):"",d+=c.ngClick?a(c,"ngClick"):"",d+=c.ngShow?a(c,"ngShow"):"",d+=">",d+=c.icon?b(c.icon):"",d+=c.label?c.label:"",d+="</a>\n"}}]).factory("DropDown",["Attr","Icon",function(a,b){return function(a){var c,d,e,f,g=a.list,h=a.fld;for(e=a.field?a.field:a.type?g[a.type][h]:g.fields[h],f=e.label.replace(/ /g,"_"),d=void 0===a.td||a.td!==!1?'<td class="'+h+'-column">\n':"",d+='<div class="dropdown">\n',d+='<a href="" class="toggle',d+='" ',d+=e.ngDisabled?'ng-disabled="'+e.ngDisabled+'" ':"",d+='data-toggle="dropdown" ',d+=">",d+=e.icon?b(e.icon):"",d+=e.label,d+=' <span class="caret"></span></a>\n',d+='<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu1">\n',c=0;c<e.options.length;c++)d+='<li role="presentation"><a role="menuitem" tabindex="-1" ',d+='ng-click="'+e.options[c].ngClick+'" ',d+=e.options[c].ngShow?'ng-show="'+e.options[c].ngShow+'" ':"",d+=e.options[c].ngHide?'ng-hide="'+e.options[c].ngHide+'" ':"",d+='href="">'+e.options[c].label+"</a></li>\n";return d+="</ul>\n",d+="</div>\n",d+=void 0===a.td||a.td!==!1?"</td>\n":""}}]).factory("BadgeCount",[function(){return function(a){var b,c=a.list,d=a.fld,e=c.fields[d];return b='<td class="'+d+"-column",b+=e.columnClass?" "+e.columnClass:"",b+='">\n',b+='<a ng-href="'+e.ngHref+'" aw-tool-tip="'+e.awToolTip+'"',b+=e.dataPlacement?' data-placement="'+e.dataPlacement+'"':"",b+=">",b+='<span class="badge',b+=e["class"]?" "+e["class"]:"",b+='">',b+="{{ "+c.iterator+"."+d+" }}",b+="</span>",b+=e.badgeLabel?" "+e.badgeLabel:"",b+="</a>\n",b+="</td>\n"}}]).factory("Badge",[function(){return function(a){var b,c="";if(a.badges)for(b=0;b<a.badges.length;b++)a.badges[b].toolTip&&(c+='<a href="" aw-tool-tip="'+a.badges[b].toolTip+'"',c+=a.badges[b].toolTipPlacement?' data-placement="'+a.badges[b].toolTipPlacement+'"':"",c+=a.badges[b].badgeShow?' ng-show="'+a.badges[b].badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badges[b].badgeShow?'ng-show="'+a.badges[b].badgeShow+'" ':"",c+=' class="field-badge '+a.badges[b].icon,c+=a.badges[b].badgeClass?" "+a.badges[b].badgeClass:"",c+='"></i>',a.badges[b].toolTip&&(c+="</a>"),c+="\n";else a.badgeToolTip&&(c+="<a ",c+=a.badgeNgHref?'ng-href="'+a.badgeNgHref+'" ':'href=""',c+=a.ngClick?'ng-click="'+a.ngClick+'" ':"",c+=' aw-tool-tip="'+a.badgeToolTip+'"',c+=a.badgeTipPlacement?' data-placement="'+a.badgeTipPlacement+'"':"",c+=a.badgeTipWatch?' data-tip-watch="'+a.badgeTipWatch+'"':"",c+=a.badgeShow?' ng-show="'+a.badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badgeShow?'ng-show="'+a.badgeShow+'" ':"",c+=' class="field-badge '+a.badgeIcon,c+=a.badgeClass?" "+a.badgeClass:"",c+='"></i>',a.badgeToolTip&&(c+="</a>"),c+="\n";return c}}]).factory("Breadcrumbs",["Attr",function(a){return function(b){var c,d,e=b.list,f=b.mode,g="";if(g+='<div class="nav-path">\n',g+='<ul class="breadcrumb" id="breadcrumb-list">\n',g+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',e.navigationLinks){d=e.navigationLinks,d.ngHide?(g+='<li class="active" ng-show="'+d.ngHide+'">',g+=e.editTitle,g+="</li>\n",g+='<li class="active" ng-hide="'+d.ngHide+'"> </li>\n'):(g+='<li class="active"> </li>\n',g+="</ul>\n"),g+='<div class="dropdown" ',g+=d.ngHide?a(d,"ngHide"):"",g+=">\n";for(c in d)if("object"==typeof d[c]&&d[c].active){g+='<a href="" class="toggle" ',g+='data-toggle="dropdown" ',g+=">"+d[c].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}g+='<ul class="dropdown-menu" role="menu">\n';for(c in d)"object"==typeof d[c]&&(g+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+d[c].href+'" ',g+=">",g+='<i class="fa fa-check" style="visibility: ',g+=d[c].active?"visible":"hidden",g+='"></i> ',g+=d[c].label,g+="</a></li>\n");g+="</ul>\n",g+="</div><!-- dropdown -->\n",g+="</div><!-- nav-path -->\n"}else g+='<li class="active">',g+="select"===f?e.selectTitle:e.editTitle,g+="</li>\n</ul>\n</div>\n";return g}}]).factory("Column",["Attr","Icon","DropDown","Badge","BadgeCount",function(a,b,c,d,e){return function(f){var g,h=f.list,i=f.fld,j=f.options,k=f.base,l=h.fields[i],m="";return void 0!==l.type&&"DropDown"===l.type?m=c(f):"badgeCount"===l.type?m=e(f):(m+='<td class="'+i+"-column",m+=l["class"]?" "+l["class"]:"",m+=l.columnClass?" "+l.columnClass:"",m+='" ',m+=l.ngClass?a(l,"ngClass"):"",m+="lookup"===j.mode||"select"===j.mode?' ng-click="toggle_'+h.iterator+"({{ "+h.iterator+'.id }})"':"",m+=l.columnShow?a(l,"columnShow"):"",m+=l.ngBindHtml?'ng-bind-html-unsafe="'+l.ngBindHtml+'" ':"",m+=">\n",m+=l.ngShow?"<span "+a(l,"ngShow")+">":"","lookup"!==j.mode&&(l.badges||l.badgeIcon&&l.badgePlacement&&"left"===l.badgePlacement)&&(m+=d(l)),h.hasChildren&&l.hasChildren&&(m+='<div class="level level-{{ '+h.iterator+'.event_level }}"><a href="" ng-click="{{ '+h.iterator+'.ngclick }}"> <i class="{{ '+h.iterator+'.ngicon }}"></i></a></div>'),"groups"===h.name&&(m+='<div class="group-name">'),"hosts"===h.name&&(m+='<div class="host-name">'),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(g=!1,l.linkTo?(m+='<a href="'+l.linkTo+'" ',g=!0):l.ngClick?(m+='<a href=""'+a(l,"ngClick")+" ",g=!0):l.ngHref?(m+='<a ng-href="'+l.ngHref+'" ',g=!0):(l.link||l.key&&(void 0===l.link||l.link))&&(m+='<a href="#/'+k+"/{{"+h.iterator+'.id }}" ',g=!0),l.awDroppable&&(m+=a(l,"awDroppable"),m+=l.dataAccept?a(l,"dataAccept"):""),l.awDraggable&&(m+=a(l,"awDraggable"),m+=l.dataContainment?a(l,"dataContainment"):"",m+=l.dataTreeId?a(l,"dataTreeId"):"",m+=l.dataGroupId?a(l,"dataGroupId"):"",m+=l.dataHostId?a(l,"dataHostId"):"",m+=l.dataType?a(l,"dataType"):""),l.awToolTip&&(m+=a(l,"awToolTip"),m+=l.dataPlacement?a(l,"dataPlacement"):"",m+=l.dataTipWatch?a(l,"dataTipWatch"):""),m+=g?">":""),l.ngShowIcon?m+='<i ng-show="'+l.ngShowIcon+'" class="'+l.icon+'"></i> ':l.icon&&(m+=b(l.icon)+" "),l.ngBindHtml||void 0!==l.showValue&&l.showValue!==!0||(m+=l.ngBind?"{{ "+l.ngBind+" }}":"{{"+h.iterator+"."+i+"}}"),l.text&&(m+=l.text),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(m+="</a>"),("hosts"===h.name||"groups"===h.name)&&(m+="</div>"),m+=l.ngShow?"</span>":"",m+=l.appendHTML?'<div ng-show="'+l.appendHTML+' !== null" ng-bind-html-unsafe="'+l.appendHTML+'" class="level-{{ '+h.iterator+'.event_level }}-detail" ></div>\n':"","lookup"!==j.mode&&l.badgeIcon&&l.badgePlacement&&"left"!==l.badgePlacement&&(m+=d(l))),m+="</td>\n"}}]).factory("HelpCollapse",function(){return function(a){var b=a.hdr,c=a.content,d=a.show,e=a.idx,f=a.bind,g="";return g+='<div class="panel-group collapsible-help" ',g+=d?'ng-show="'+d+'"':"",g+=">\n",g+='<div class="panel panel-default">\n',g+='<div class="panel-heading" ng-click="accordionToggle(\'#accordion'+e+"')\">\n",g+='<h4 class="panel-title">\n',g+=b,g+='<i class="fa fa-minus pull-right collapse-help-icon" id="accordion'+e+'-icon"></i>',g+="</h4>\n",g+="</div>\n",g+='<div id="accordion'+e+'" class="panel-collapse collapse in">\n',g+='<div class="panel-body" ',g+=f?'ng-bind-html-unsafe="'+f+'" ':"",g+=">\n",g+=f?"":c,g+="</div>\n",g+="</div>\n",g+="</div>\n",g+="</div>\n"}}).factory("SearchWidget",function(){return function(a){var b,c,d,e=a.iterator,f=a.template,g=a.mini,h="",i=a.searchWidgets?a.searchWidgets:1;for(c=1;i>=c;c++){d=1===c?"":c,h+='<div class="',h+=a.size?a.size:"col-lg-4 col-md-6 col-sm-12 col-xs-12",h+='" id="search-widget-container'+d+'">\n',h+='<div class="input-group',h+=g?" input-group-sm":" input-group-sm",h+='">\n',h+='<div class="input-group-btn dropdown">\n',h+='<button type="button" ',h+='id="search_field_ddown" ',h+='class="btn btn-default ',h+='dropdown-toggle" data-toggle="dropdown"',h+=">\n",h+='<span ng-bind="'+e+"SearchFieldLabel"+d+'"></span>\n',h+='<span class="caret"></span>\n',h+="</button>\n",h+='<ul class="dropdown-menu" id="'+e+"SearchDropdown"+d+'">\n';for(b in f.fields)void 0!==f.fields[b].searchable&&f.fields[b].searchable!==!0||(void 0!==f.fields[b].searchWidget&&1!==f.fields[b].searchWidget||1!==c)&&f.fields[b].searchWidget!==c||(h+='<li><a href="" ng-click="setSearchField(\''+e+"','",h+=b+"','",h+=f.fields[b].searchLabel?f.fields[b].searchLabel+"', "+c+')">'+f.fields[b].searchLabel+"</a></li>\n":f.fields[b].label.replace(/<br \/>/g," ")+"', "+c+')">'+f.fields[b].label.replace(/<br \/>/g," ")+"</a></li>\n");h+="</ul>\n",h+="</div><!-- input-group-btn -->\n",h+='<select id="search_value_select" ng-show="'+e+"SelectShow"+d+'" ng-model="'+e+"SearchSelectValue"+d+'" ng-change="search(\''+e+"')\" ",h+='ng-options="c.name for c in '+e+"SearchSelectOpts"+d+'" class="form-control search-select',h+='"></select>\n',h+='<input id="search_value_input" type="text" ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+'" class="form-control" ng-model="'+e+"SearchValue"+d+'" aw-placeholder="'+e+"SearchPlaceholder"+d+'" type="text" ng-disabled="'+e+"InputDisable"+d+" || "+e+"HoldInput"+d+'" ng-keypress="startSearch($event,\''+e+"')\">\n",h+='<div class="input-group-btn" ng-show="'+e+"SelectShow"+d+'" >\n',h+='<button type="button" class="btn btn-default btn-small" ng-click="resetSearch(\''+e+'\')" aw-tool-tip="Clear the search" data-placement="top"><i class="fa fa-times"></i></button>\n',h+="</div><!-- input-group-btn -->\n",h+="</div><!-- input-group -->\n",h+='<a class="search-reset-start" ng-click="resetSearch(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || "+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-times"></i></a>\n',h+='<a class="search-reset-start" ng-click="search(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || !"+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-search"></i></a>\n',h+="</div>\n"}return h}}).factory("PaginateWidget",[function(){return function(a){var b=a.iterator,c=a.set,d="";return d+="<!-- Paginate Widget -->\n",d+='<div class="row page-row">\n',d+='<div class="col-lg-8">\n',d+='<ul class="pagination" ng-hide="'+b+"Loading || "+b+'_num_pages <= 1">\n',d+='<li ng-hide="'+b+'_page -5 <= 1 "><a href ng-click="getPage(1,\''+c+"','"+b+'\')"><i class="fa fa-angle-double-left"></i></a></li>\n',d+='<li ng-hide="'+b+'_page -1 <= 0"><a href ng-click="getPage('+b+"_page - 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-left"></i></a></li>\n',d+='<li ng-repeat="page in '+b+'_page_range" ng-class="pageIsActive(page,\''+b+"')\"><a href ng-click=\"getPage(page,'"+c+"','"+b+"')\">{{ page }}</a></li>\n",d+='<li ng-hide="'+b+"_page + 1 > "+b+'_num_pages"><a href ng-click="getPage('+b+"_page + 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-right"></i></a></li>\n',d+='<li ng-hide="'+b+"_page +4 >= "+b+'_num_pages"><a href ng-click="getPage('+b+"_num_pages,'"+c+"','"+b+'\')"><i class="fa fa-angle-double-right"></i></a></li>\n',d+="</ul>\n",d+="</div>\n",d+='<div class="col-lg-4 col-md-4" ng-hide="'+b+"_mode == 'lookup'\">\n",d+='<div class="page-label">\n',d+="Page {{ "+b+"_page }} of {{ "+b+"_num_pages }} for {{ "+b+"_total_rows | number:0 }} "+c+".",d+="</div>\n",d+="</div>\n",d+="</div>\n"}}]),angular.module("License",["RestServices","Utilities","FormGenerator","PromptDialog","LicenseFormDefinition"]).factory("ViewLicense",["$location","$rootScope","GenerateForm","Rest","Alert","GetBasePath","ProcessErrors","FormatDate","Prompt","Empty","LicenseForm",function(a,b,c,d,e,f,g,h,i,j,k){return function(){var a,e=f("config"),l=c,m=angular.copy(k);d.setUrl(e),d.get().success(function(b){var c,d,e,f,g,k,n,o;for(c in m.fields)"time_remaining"!==c&&"license_status"!==c&&j(b.license_info[c])&&delete m.fields[c];(b.license_info.is_aws||j(b.license_info.license_date))&&(delete m.fields.license_date,delete m.fields.time_remaining),a=l.inject(m,{mode:"edit",modal:!0,related:!1}),l.reset(),a.formModalAction=function(){$("#form-modal").modal("hide")},a.formModalActionLabel="OK",a.formModalCancelShow=!1,a.formModalInfo="Purchase/Extend License",a.formModalHeader="Tower License",a.formModalInfoAction=function(){i({hdr:"Tower Licensing",body:'<p>Ansible Tower licenses can be purchased or extended by visiting <a id="license-link" href="http://www.ansible.com/ansible-pricing" target="_blank">the Ansible online store</a>. Would you like to purchase or extend your license now?</p>',"class":"btn-primary",action:function(){var a=$("#license-link").attr("href");window.open(a,"storeWindow")}})};for(c in m.fields)j(b.license_info[c])||(a[c]=b.license_info[c]);a.license_date&&(d=new Date(parseInt(a.license_date)),"1970"===d.getFullYear()&&(d=new Date(1e3*parseInt(a.license_date,10)),a.time_remaining=a.time_remaining+"000"),a.license_date=h(d),e=parseInt(a.time_remaining/864e5,10),f=a.time_remaining-864e5*e,g=parseInt(f/36e5,10),f-=36e5*g,k=parseInt(f/6e4,10),f-=6e4*k,n=parseInt(f/1e3,10),a.time_remaining=e+" days "+("0"+g).slice(-2)+":"+("0"+k).slice(-2)+":"+("0"+n).slice(-2)),a.free_instances_class=parseInt(a.free_instances)<=0?"field-failure":"field-success",o=b.license_info,void 0===o.valid_key||o.valid_key?void 0!==o.demo&&o.demo?(a.license_status="Demo",a.status_color="license-demo"):void 0!==o.date_expired&&o.date_expired?(a.license_status="Expired",a.status_color="license-expired"):void 0!==o.date_warning&&o.date_warning?(a.license_status="Expiration Warning",a.status_color="license-warning"):void 0!==o.free_instances&&parseInt(o.free_instances)<=0?(a.license_status="No available managed hosts",a.status_color="license-invalid"):(a.license_status="Valid",a.status_color="license-valid"):(a.license_status="Invalid",a.status_color="license-invalid")}).error(function(a,c){g(b,a,c,m,{hdr:"Error!",msg:"Failed to retrieve license. GET status: "+c})})}}]),angular.module("ListGenerator",["GeneratorHelpers"]).factory("GenerateList",["$location","$compile","$rootScope","SearchWidget","PaginateWidget","Attr","Icon","Column","DropDown","NavigationLink","Button","SelectIcon","Breadcrumbs",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{setList:function(a){this.list=a},attr:f,icon:g,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},hide:function(){$("#lookup-modal").modal("hide")},button:k,inject:function(a,c){var d;d=angular.element(document.getElementById("lookup"===c.mode?"lookup-modal-body":c.id?c.id:"htmlTemplate")),this.setList(a),d.html(this.build(c)),c.prepend&&d.prepend(c.prepend),c.append&&d.append(c.prepend),this.scope=c.scope?c.scope:d.scope(),b(d)(this.scope),this.scope[a.name]=null,this.scope[a.iterator]=null,$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize");try{$("#help-modal").empty().dialog("destroy")}catch(e){}return"lookup"===c.mode&&(this.scope.formModalActionDisabled=!1,this.scope.lookupHeader=c.hdr,$("#lookup-modal").modal({backdrop:"static",keyboard:!0}),$("#lookup-modal").unbind("hidden.bs.modal"),$(document).bind("keydown",function(a){27===a.keyCode&&$("#lookup-modal").modal("hide")})),this.scope},build:function(b){var c,g,j,k,n,o,p,q,r,s="",t=this.list;if(b.activityStream?(s+='<div class="nav-path">\n',s+='<ul class="breadcrumb">\n',s+='<li ng-repeat="crumb in breadcrumbs"><a href="" ng-click="{{ crumb.ngClick }}">{{ crumb.title }}</a></li>\n',s+='<li class="active">',s+=t.editTitle,s+="</li>\n</ul>\n</div>\n"):"lookup"===b.mode||void 0!==b.breadCrumbs&&!b.breadCrumbs||(s+=m({list:t,mode:b.mode})),"edit"===b.mode&&t.editInstructions&&(s+='<div class="alert alert-info alert-block">\n',s+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',s+="<strong>Hint: </strong>"+t.editInstructions+"\n",s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&!t.well||(s+='<div class="well">\n'),b.activityStream&&(s+='<div class="row">\n',s+='<div class="col-lg-12">\n',s+="<h5>{{ streamTitle }}</h5>\n",s+="</div>\n",s+="</div>\n"),s+='<div class="row">\n',"groups"!==t.name&&(s+=d(b.searchSize?{iterator:t.iterator,template:t,mini:!0,size:b.searchSize,searchWidgets:t.searchWidgets}:"summary"===b.mode?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-6"}:"lookup"===b.mode||void 0!==b.id?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-8"}:{iterator:t.iterator,template:t,mini:!0})),"lookup"!==b.mode){c=a.path().replace(/^\//,"").split("/")[0],s+='<div class="',"groups"===t.name?s+="col-lg-12":b.searchSize?(g=parseInt(b.searchSize.replace(/([A-Z]|[a-z]|\-)/g,"")),g=t.searchWidgets?t.searchWidgets*g:g,s+="col-lg-"+(12-g)):s+="summary"===b.mode?"col-lg-6":void 0!==b.id?"col-lg-4":"col-lg-8 col-md-6",s+='">\n',s+='<div class="list-actions">\n';
for(j in t.actions)("all"===t.actions[j].mode||t.actions[j].mode===b.mode)&&(void 0===t.actions[j].basePaths||t.actions[j].basePaths&&t.actions[j].basePaths.indexOf(c)>-1)&&(s+=this.button({btn:t.actions[j],action:j,toolbar:!0}));"select"===b.mode&&t.selectInstructions&&(k={awPopOver:t.selectInstructions,dataPlacement:"top",dataContainer:"body","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Help",iconSize:"fa-lg"},s+=this.button({btn:k,action:"help",toolbar:!0})),s+="</div><!-- list-acitons -->\n",s+="</div><!-- list-actions-column -->\n"}else s+='<div class="col-lg-7"></div>\n';s+="</div><!-- row -->\n","lookup"!==b.mode&&t.showTitle&&(s+='<div class="form-title">',s+="edit"===b.mode||"summary"===b.mode?t.editTitle:t.addTitle,s+="</div>\n"),s+='<table id="'+t.name+'_table" ',s+='class="table',s+=t["class"]?" "+t["class"]:"",s+="summary"===b.mode||"edit"===b.mode||"lookup"!==b.mode&&!b.id?"":" table-hover-inverse",s+=t.hover?" table-hover":"",s+="summary"===b.mode?" table-summary":"",s+='" ',s+=">\n",s+="<thead>\n",s+="<tr>\n",t.index&&(s+='<th class="col-lg-1 col-md-1 col-sm-1 hidden-xs">#</th>\n');for(n in t.fields)void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+='<th class="list-header',s+=t.fields[n].columnClass?" "+t.fields[n].columnClass:"",s+='" id="',s+=t.fields[n].id?t.fields[n].id:n+"-header",s+='"',s+=t.fields[n].columnShow?' ng-show="'+t.fields[n].columnShow+'" ':"",s+=void 0===t.fields[n].nosort||t.fields[n].nosort!==!0?"ng-click=\"sort('"+n+"')\"":"",s+=">",s+=t.fields[n].label,(void 0===t.fields[n].nosort||t.fields[n].nosort!==!0)&&(s+=' <i class="fa ',s+=t.fields[n].key?t.fields[n].desc?"fa-sort-down":"fa-sort-up":"fa-sort",s+='"></i></a>'),s+="</th>\n");"select"===b.mode||"lookup"===b.mode?s+="<th>Select</th>":"edit"===b.mode&&t.fieldActions&&(s+='<th class="actions-column',s+=t.fieldActions&&t.fieldActions.columnClass?" "+t.fieldActions.columnClass:"",s+='">Actions</th>\n'),s+="</tr>\n",s+="</thead>\n",s+="<tbody>\n",s+='<tr ng-class="'+t.iterator,s+="lookup"===b.mode||"select"===b.mode?".success_class":".active_class",s+='" ',s+='class="'+t.iterator+'_class" ng-repeat="'+t.iterator+" in "+t.name,s+=t.orderBy?" | orderBy:'"+t.orderBy+"'":"",s+=t.filterBy?" | filter: "+t.filterBy:"",s+='"',s+=">\n",t.index&&(s+='<td class="index-column hidden-xs">{{ $index + (('+t.iterator+"_page - 1) * "+t.iterator+"_page_size) + 1 }}.</td>\n"),o=2,c=t.base?t.base:t.name,c=c.replace(/^\//,"");for(n in t.fields)o++,void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+=h({list:t,fld:n,options:b,base:c}));if("select"===b.mode||"lookup"===b.mode)s+='<td><input type="checkbox" ng-model="'+t.iterator+'.checked" name="check_{{'+t.iterator+'.id }}" ng-click="toggle_'+t.iterator+"({{ "+t.iterator+'.id }}, true)" ng-true-value="1" ng-false-value="0" id="check_{{'+t.iterator+'.id}}" /></td>';else if(("edit"===b.mode||"summary"===b.mode)&&t.fieldActions){s+='<td class="actions">';for(p in t.fieldActions)if("columnClass"!==p)if(t.fieldActions[p].type&&"DropDown"===t.fieldActions[p].type)s+=i({list:t,fld:p,options:b,base:c,type:"fieldActions",td:!1});else{q=t.fieldActions[p],s+="<a ",s+=q.href?'href="'+q.href+'" ':"",s+=q.ngHref?'ng-href="'+q.ngHref+'" ':"",s+="cancel"===p?'class="cancel red-txt" ':"",s+=q.awPopOver?'aw-pop-over="'+q.awPopOver+'" ':"",s+=q.dataPlacement?f(q,"dataPlacement"):"",s+=q.dataTitle?f(q,"dataTitle"):"";for(r in q)"ngHref"!==r&&"href"!==r&&"label"!==r&&"icon"!==r&&"class"!==r&&"iconClass"!==r&&"dataPlacement"!==r&&"awPopOver"!==r&&"dataTitle"!==r&&(s+=f(q,r));s+=">",s+=q.iconClass?'<i class="'+q.iconClass+'"></i>':l({action:p}),s+=q.label?" "+t.fieldActions[p].label:"",s+="</a>"}s+="</td>"}return s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+"Loading == false && ("+t.name+" == null || "+t.name+'.length == 0)">\n',s+='<td colspan="'+o+'"><div class="alert alert-info">No records matched your search.</div></td>\n',s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+'Loading == true">\n',s+='<td colspan="'+o+'"><div class="alert alert-info">Loading...</div></td>\n',s+="</tr>\n",s+="</tbody>\n",s+="</table>\n","select"!==b.mode||void 0!==b.selectButton&&!b.selectButton||(s+='<div class="navigation-buttons">\n',s+=' <button class="btn btn-sm btn-primary pull-right" aw-tool-tip="Complete your selection" ng-click="finishSelection()" ng-disabled="disableSelectBtn"><i class="fa fa-check"></i> Select</button>\n',s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&t.well!==!0||(s+="</div>\n"),"groups"!==t.name&&(s+=e("lookup"===b.mode||b.id&&"form-modal-body"===b.id?{set:t.name,iterator:t.iterator}:{set:t.name,iterator:t.iterator})),s}}}]),angular.module("PromptDialog",["Utilities"]).factory("Prompt",[function(){return function(a){var b,c=angular.element(document.getElementById("prompt-modal")),d=c.scope();d.promptHeader=a.hdr,d.promptBody=a.body,d.promptAction=a.action,b=null===a["class"]||void 0===a["class"]?"btn-danger":a["class"],$("#prompt_action_btn").removeClass(b).addClass(b),$(c).modal({backdrop:"static",keyboard:!0,show:!0})}}]),String.prototype.strReverse=function(){var a,b="";for(a=0;a<this.length;a++)b=this.charAt(a)+b;return b};var nScore=0,$AnsibleConfig={tooltip_delay:{show:500,hide:100},debug_mode:!0,password_strength:45,session_timeout:1800};AdminsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","AdminList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","GetBasePath","SelectionInit"],Authenticate.$inject=["$cookieStore","$window","$scope","$rootScope","$location","Authorization","ToggleClass","Alert","Wait","Timer","Empty"],CredentialsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","CredentialList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","GetChoices","Wait","Stream"],CredentialsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","SearchInit","PaginateInit","LookUpInit","UserList","TeamList","GetBasePath","GetChoices","Empty","KindChange","OwnerChange","FormSave"],CredentialsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","Prompt","GetBasePath","GetChoices","KindChange","UserList","TeamList","LookUpInit","Empty","OwnerChange","FormSave","Stream","Wait"],Home.$inject=["$scope","$compile","$routeParams","$rootScope","$location","Wait","ObjectCount","JobStatus","InventorySyncStatus","SCMSyncStatus","ClearScope","Stream","Rest","GetBasePath","ProcessErrors","Button"],HomeGroups.$inject=["$location","$routeParams","HomeGroupList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","GetHostsStatusMsg","GetSyncStatusMsg","ViewUpdateStatus","Stream","GroupsEdit","Wait","Alert","Rest","Empty","InventoryUpdate","Find"],HomeHosts.$inject=["$location","$routeParams","HomeHostList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","SetStatus","ToggleHostEnabled","HostsEdit","Stream","Find","ShowJobSummary"],InventoriesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","InventoryList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Wait","Stream","EditInventoryProperties"],InventoriesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","LookUpInit","GetBasePath","ParseTypeChange","Wait"],InventoriesEdit.$inject=["$scope","$location","$routeParams","$compile","GenerateList","ClearScope","InventoryGroups","InventoryHosts","BuildTree","Wait","GetSyncStatusMsg","InjectHosts","HostsReload","GroupsAdd","GroupsEdit","GroupsDelete","Breadcrumbs","LoadBreadCrumbs","Empty","Rest","ProcessErrors","InventoryUpdate","Alert","ToggleChildren","ViewUpdateStatus","GroupsCancelUpdate","Find","HostsCreate","EditInventoryProperties","HostsEdit","HostsDelete","ToggleHostEnabled","CopyMoveGroup","CopyMoveHost","Stream","GetBasePath","ShowJobSummary","ApplyEllipsis","WatchInventoryWindowResize","HelpDialog","InventoryGroupsHelp","Store"],JobEventsList.$inject=["$filter","$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobEventList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","ToggleChildren","FormatDate","EventView","Refresh","Wait"],JobEventsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobEventsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","FormatDate","EventView","Wait"],JobHostSummaryList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobHostList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Refresh","JobStatusToolTip","Wait"],JobTemplatesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobTemplateList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","PromptPasswords","JobTemplateForm","CredentialList","LookUpInit","SubmitJob","Wait","Stream"],JobTemplatesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","InventoryList","CredentialList","ProjectList","LookUpInit","md5Setup","ParseTypeChange","Wait","Empty"],JobTemplatesEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","ParseTypeChange","JobStatusToolTip","FormatDate","Wait","Stream","Empty","Prompt"],JobsListCtrl.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","SubmitJob","FormatDate","Refresh","JobStatusToolTip","Empty","Wait"],JobsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","FormatDate","JobStatusToolTip","Wait"],OrganizationsList.$inject=["$routeParams","$scope","$rootScope","$location","$log","Rest","Alert","LoadBreadCrumbs","Prompt","GenerateList","OrganizationList","SearchInit","PaginateInit","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],OrganizationsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","Wait"],OrganizationsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","Wait","Stream"],PermissionsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","PermissionList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","CheckAccess","Wait"],PermissionsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],PermissionsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","Prompt","GetBasePath","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],ProjectsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","ProjectList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","ProjectUpdate","ProjectStatus","FormatDate","Refresh","Wait","Stream","GetChoices","Empty"],ProjectsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","LookUpInit","OrganizationList","CredentialList","GetChoices","DebugForm","Wait"],ProjectsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","Authorization","CredentialList","LookUpInit","GetChoices","Empty","DebugForm","Wait","Stream"],TeamsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","TeamList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","SetTeamListeners","GetBasePath","SelectionInit","Wait","Stream"],TeamsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","GetBasePath","LookUpInit","Wait"],TeamsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","LookUpInit","Prompt","GetBasePath","CheckAccess","OrganizationList","Wait","Stream"],UsersList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","UserList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],UsersAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","LookUpInit","OrganizationList","ResetForm","Wait"],UsersEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","GetBasePath","Prompt","CheckAccess","ResetForm","Wait","Stream"],angular.module("ActivityDetailDefinition",[]).value("ActivityDetailForm",{name:"activity",editTitle:"Activity Detail",well:!1,"class":"horizontal-narrow",formFieldSize:"col-lg-10",formLabelSize:"col-lg-2",fields:{user:{label:"Initiated by",type:"text",readonly:!0},operation:{label:"Action",type:"text",readonly:!0},changes:{label:"Changes",type:"textarea",ngHide:"!changes || changes =='' || changes == 'null'",readonly:!0}}}),angular.module("CredentialFormDefinition",[]).value("CredentialForm",{addTitle:"Create Credential",editTitle:"{{ name }}",name:"credential",well:!0,forceListeners:!0,actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"edit"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,autocomplete:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},owner:{label:"Does this credential belong to a team or user?",type:"radio_group",ngChange:"ownerChange()",options:[{label:"User",value:"user",selected:!0},{label:"Team",value:"team"}],awPopOver:"<p>A credential must be associated with either a user or a team. Choosing a user allows only the selected user access to the credential. Choosing a team shares the credential with all team members.</p>",dataTitle:"Owner",dataPlacement:"right",dataContainer:"body"},user:{label:"User that owns this credential",type:"lookup",sourceModel:"user",sourceField:"username",ngClick:"lookUpUser()",ngShow:"owner == 'user'",awRequiredWhen:{variable:"user_required",init:"false"}},team:{label:"Team that owns this credential",type:"lookup",sourceModel:"team",sourceField:"name",ngClick:"lookUpTeam()",ngShow:"owner == 'team'",awRequiredWhen:{variable:"team_required",init:"false"}},kind:{label:"Type",excludeModal:!0,type:"select",ngOptions:"kind.label for kind in credential_kind_options",ngChange:"kindChange()",addRequired:!0,editRequired:!0,helpCollapse:[{hdr:"Select a Credential Type",content:"<dl>\n<dt>AWS</dt>\n<dd>Access keys for Amazon Web Services used for inventory management or deployment.</dd>\n<dt>Machine</dt>\n<dd>Authentication for remote machine access. This can include SSH keys, usernames, passwords, and sudo information. Machine credentials are used when submitting jobs to run playbooks against remote hosts.</dd><dt>Rackspace</dt>\n<dd>Access information for Rackspace Cloud used for inventory management or deployment.</dd>\n<dt>SCM</dt>\n<dd>Used to check out and synchronize playbook repositories with a remote source control management system such as Git, Subversion (svn), or Mercurial (hg). These credentials are used on the Projects tab.</dd>\n</dl>\n"}]},access_key:{label:"Access Key",type:"text",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,apiField:"username"},secret_key:{label:"Secret Key",type:"password",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},username:{labelBind:"usernameLabel",type:"text",ngShow:"kind.value && kind.value !== 'aws'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1},api_key:{label:"API Key",type:"password",ngShow:"kind.value == 'rax'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},password:{label:"Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",ask:!1,clear:!1,associated:"password_confirm",autocomplete:!1},password_confirm:{label:"Confirm Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},ssh_password:{label:"SSH Password",type:"password",ngShow:"kind.value == 'ssh'",ngChange:"clearPWConfirm('ssh_password_confirm')",addRequired:!1,editRequired:!1,ask:!0,clear:!0,associated:"ssh_password_confirm",autocomplete:!1},ssh_password_confirm:{label:"Confirm SSH Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_password",autocomplete:!1},ssh_key_data:{labelBind:"sshKeyDataLabel",type:"textarea",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,"class":"ssh-key-field",rows:10},ssh_key_unlock:{label:"Key Password",type:"password",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('ssh_key_unlock_confirm')",associated:"ssh_key_unlock_confirm",ask:!0,askShow:"kind.value == 'ssh'",clear:!0},ssh_key_unlock_confirm:{label:"Confirm Key Password",type:"password",ngShow:"kind.value == 'ssh'  || kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_key_unlock"},sudo_username:{label:"Sudo Username",type:"text",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,autocomplete:!1},sudo_password:{label:"Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('sudo_password_confirm')",ask:!0,clear:!0,associated:"sudo_password_confirm",autocomplete:!1},sudo_password_confirm:{label:"Confirm Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"sudo_password",autocomplete:!1}},buttons:{save:{label:"Save",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("GroupFormDefinition",[]).value("GroupForm",{addTitle:"Create Group",editTitle:"Edit Group",showTitle:!0,cancelButton:!1,name:"group",well:!0,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",tabs:[{name:"properties",label:"Properties"},{name:"source",label:"Source"}],fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,tab:"properties"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,tab:"properties"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",dataTitle:"Group Variables",dataPlacement:"right",awPopOver:'<p>Variables defined here apply to all child groups and hosts.</p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"properties"},source:{label:"Source",type:"select",ngOptions:"source.label for source in source_type_options",ngChange:"sourceChange()",addRequired:!1,editRequired:!1,tab:"source"},source_path:{label:"Script Path",ngShow:"source && source.value == 'file'",type:"text",awRequiredWhen:{variable:"sourcePathRequired",init:"false"},tab:"source"},credential:{label:"Cloud Credential",type:"lookup",ngShow:"source && source.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,tab:"source"},source_regions:{label:"Regions",type:"text",ngShow:"source && (source.value == 'rax' || source.value == 'ec2')",addRequired:!1,editRequired:!1,awMultiselect:"source_region_choices",dataTitle:"Source Regions",dataPlacement:"right",awPopOver:"<p>Click on the regions field to see a list of regions for your cloud provider. You can select multiple regions, or choose <em>All</em> to include all regions. Tower will only be updated with Hosts associated with the selected regions.</p>",dataContainer:"body",tab:"source"},source_vars:{label:"Source Variables",ngShow:"source && (source.value == 'file' || source.value == 'ec2')",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",parseTypeName:"envParseType",dataTitle:"Source Variables",dataPlacement:"right",awPopOver:'<p>Override variables found in ec2.ini and used by the inventory update script. For a detailed description of these variables <a href="https://github.com/ansible/ansible/blob/devel/plugins/inventory/ec2.ini" target="_blank">view ec2.ini in the Ansible github repo.</a></p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"source"},checkbox_group:{label:"Update Options",type:"checkbox_group",ngShow:"source && (source.value !== '' && source.value !== null)",tab:"source",fields:[{name:"overwrite",label:"Overwrite",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>When checked all child groups and hosts not found on the remote source will be deleted from the local inventory.</p><p>Unchecked any local child hosts and groups not found on the external source will remain untouched by the inventory update process.</p>",dataTitle:"Overwrite",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"overwrite_vars",label:"Overwrite Variables",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>If checked, all variables for child groups and hosts will be removed and replaced by those found on the external source.</p><p>When not checked a merge will be performed, combining local variables with those found on the external source.</p>",dataTitle:"Overwrite Variables",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"update_on_launch",label:"Update on Launch",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this inventory, refresh the inventory from the selected source before executing job tasks.</p>",dataTitle:"Update on Launch",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{labelClass:"col-lg-3",controlClass:"col-lg-5",save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostGroupsFormDefinition",[]).value("HostGroupsForm",{editTitle:"Host Groups",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{groups:{label:"Groups",type:"select",multiple:!0,ngOptions:"group.name for group in inventory_groups",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostFormDefinition",[]).value("HostForm",{addTitle:"Create Host",editTitle:"{{ name }}",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{name:{label:"Host Name",type:"text",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},enabled:{label:"Enabled?",type:"checkbox",addRequired:!1,editRequired:!1,"default":!0,awPopOver:"<p>Indicates if a host is available and should be included in running jobs.</p><p>For hosts that are part of an external inventory, this flag cannot be changed. It will be set by the inventory sync process.</p>",dataTitle:"Host Enabled",dataPlacement:"right",dataContainer:"#form-modal .modal-content",ngDisabled:"has_inventory_sources == true"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"class":"modal-input-xlarge","default":"---",awPopOver:'<p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Host Variables",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},inventory:{type:"hidden",includeOnEdit:!0,includeOnAdd:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("InventoryFormDefinition",[]).value("InventoryForm",{addTitle:"Create Inventory",editTitle:"{{ inventory_name | capitalize }}",name:"inventory",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{inventory_name:{realName:"name",label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},inventory_description:{realName:"description",label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"}},inventory_variables:{realName:"variables",label:"Variables",type:"textarea","class":"span12",addRequired:!1,editRequird:!1,parseTypeName:"inventoryParseType",rows:6,"default":"---",awPopOver:'<p>Enter inventory variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Inventory Variables",dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("JobEventDataDefinition",[]).value("JobEventDataForm",{editTitle:"{{ id }} - {{ event_display }}",name:"job_events",well:!1,"class":"horizontal-narrow",fields:{event_data:{label:!1,type:"textarea",readonly:!0,rows:18,"class":"modal-input-xxlarge"}}}),angular.module("JobEventsFormDefinition",[]).value("JobEventsForm",{name:"job_events",well:!1,forceListeners:!0,fields:{status:{labelClass:"job-{{ status }}",type:"custom",section:"Event",control:'<div class="job-event-status job-{{ status }}"><i class="fa icon-job-{{ status }}"></i> {{ status }}</div>'},id:{label:"ID",type:"text",readonly:!0,section:"Event","class":"span1"},created:{label:"Created On",type:"text",section:"Event",readonly:!0},host:{label:"Host",type:"text",readonly:!0,section:"Event",ngShow:"host !== ''"},play:{label:"Play",type:"text",readonly:!0,section:"Event",ngShow:"play !== ''"},task:{label:"Task",type:"text",readonly:!0,section:"Event",ngShow:"task !== ''"},rc:{label:"Return Code",type:"text",readonly:!0,section:"Results","class":"span1",ngShow:"rc !== ''"},msg:{label:"Msg",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"msg !== ''",rows:10},stdout:{label:"Std Out",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stdout !== ''",rows:10},stderr:{label:"Std Err",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stderr !== ''",rows:10},results:{label:"Results",type:"textarea",section:"Results",readonly:!0,"class":"nowrap",ngShow:"results !== ''",rows:10},start:{label:"Start",type:"text",readonly:!0,section:"Timing",ngShow:"start !== ''"},traceback:{label:!1,type:"textarea",readonly:!0,section:"Traceback","class":"nowrap",ngShow:"traceback !== ''",rows:10},end:{label:"End",type:"text",readonly:!0,section:"Timing",ngShow:"end !== ''"},delta:{label:"Elapsed",type:"text",readonly:!0,section:"Timing",ngShow:"delta !== ''"},module_name:{label:"Name",type:"text",readonly:!0,section:"Module",ngShow:"module_name !== ''"},module_args:{label:"Args",type:"text",readonly:!0,section:"Module",ngShow:"module_args !== ''"}}}),angular.module("JobSummaryDefinition",[]).value("JobSummary",{editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!1,fields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space resizable",ngShow:'result_stdout != ""'},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space resizable",ngShow:'result_traceback != ""'}}}),angular.module("JobTemplateFormDefinition",[]).value("JobTemplateForm",{addTitle:"Create Job Templates",editTitle:"{{ name }}",name:"job_templates",twoColumns:!0,well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body"},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"},column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"true"},column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",awRequiredWhen:{variable:"playbookrequired",init:"true"},column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Machine Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCloudcredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"default":"0",addRequired:!1,editRequired:!1,"class":"input-small",column:1,awPopOver:'<p>The number of parallel or simultaneous processes to use while executing the playbook. 0 signifies the default value from the <a href="http://docs.ansible.com/intro_configuration.html#the-ansible-configuration-file"  target="_blank">ansible configuration file</a>.</p>',dataTitle:"Forks",dataPlacement:"right",dataContainer:"body"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see <a href="http://docs.ansible.com/intro_patterns.html" target="_blank">the Patters top at docs.ansible.com</a>.</p>',dataTitle:"Limit",dataPlacement:"right",dataContainer:"body"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,"default":"---",column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataPlacement:"right",dataContainer:"body"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataPlacement:"right",dataContainer:"body"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting the Tower server using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{jobs:{type:"collection",title:"Jobs",iterator:"job",index:!1,open:!1,actions:{reset:{dataPlacement:"top",icon:"icon-undo",mode:"all","class":"btn-xs btn-primary",awToolTip:"Reset the search filter",ngClick:"resetSearch('job')",iconSize:"large"}},fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},created:{label:"Date",link:!1,searchable:!1},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{}} job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},fieldActions:{edit:{label:"View",ngClick:"edit('jobs', job.id, job.name)",icon:"icon-zoom-in"}}}}}),angular.module("JobFormDefinition",[]).value("JobForm",{addTitle:"Create Job",editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!0,collapse:!0,collapseMode:"edit",collapseTitle:"Job Template",twoColumns:!0,navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",active:!0,ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{name:{label:"Job Template",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":"run",addRequired:!0,editRequired:!0,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body",column:1},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpInventory()",column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpProject()",column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"class":"input-small","default":"0",addRequired:!1,editRequired:!1,column:1,disabled:!0,awPopOver:"<p>The number of parallel or simultaneous processes to use while executing the playbook.</p>",dataContainer:"body",dataTitle:"Forks",dataPlacement:"right"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see the <a href="http://ansible.cc/docs/patterns.html#selecting-targets" target="_blank">Selecting Targets section</a> under Inventory and Patterns  in the Ansible documentation.</p>',dataContainer:"body",dataTitle:"Limit",dataPlacement:"right"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataContainer:"body",dataPlacement:"right"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataContainer:"body",dataPlacement:"right"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')","class":"span12",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting Tower using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{label:"Save",icon:"icon-ok","class":"btn-success",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",label:"Reset",icon:"icon-undo","class":"btn btn-default",ngDisabled:!0}},statusFields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space",ngShow:"result_stdout != ''"},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space",ngShow:"result_traceback != ''"}},statusActions:{refresh:{dataPlacement:"top",icon:"icon-refresh",iconSize:"large",mode:"all","class":"btn-xs btn-primary",awToolTip:"Refresh the page",ngClick:"refresh()"}}}),angular.module("LicenseFormDefinition",[]).value("LicenseForm",{name:"license",well:!1,forceListeners:!0,fields:{license_status:{type:"custom",control:'<div class="license-status" ng-class="status_color"><i class="fa fa-circle"></i> {{ license_status }}</span></div>',readonly:!0,section:"License"},license_key:{label:"Key",type:"textarea","class":"modal-input-xlarge",readonly:!0,section:"License"},license_date:{label:"Expires On",type:"text",readonly:!0,section:"License"},time_remaining:{label:"Time Left",type:"text",readonly:!0,section:"License"},available_instances:{label:"Available",type:"text",readonly:!0,section:"Managed Hosts"},current_instances:{label:"Used",type:"text",readonly:!0,section:"Managed Hosts"},free_instances:{label:"Remaining",type:"text",readonly:!0,section:"Managed Hosts",controlNGClass:"free_instances_class",labelNGClass:"free_instances_class"},company_name:{label:"Company",type:"text",readonly:!0,section:"Contact Info"},contact_name:{label:"Contact",type:"text",readonly:!0,section:"Contact Info"},contact_email:{label:"Contact Email",type:"text",readonly:!0,section:"Contact Info"}}}),angular.module("OrganizationFormDefinition",[]).value("OrganizationForm",{addTitle:"Create Organization",editTitle:"{{ name }}",name:"organization",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",label:"Add",icon:"icon-plus",awToolTip:"Add a new user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit","class":"btn-default",awToolTip:"Edit user"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove user"}}},admins:{type:"collection",title:"Administrators",iterator:"admin",open:!1,base:"/users",actions:{add:{ngClick:"add('admins')",icon:"icon-plus",label:"Add",awToolTip:"Add new administrator"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', admin.id, admin.username)",icon:"icon-edit",awToolTip:"Edit administrator","class":"btn-default"},"delete":{label:"Delete",ngClick:"delete('admins', admin.id, admin.username, 'administrators')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove administrator"}}}}}),angular.module("PermissionFormDefinition",[]).value("PermissionsForm",{addTitle:"Add Permission",editTitle:"{{ name }}",name:"permission",well:!0,forceListeners:!0,stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"},fields:{category:{label:"Permission Type",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Inventory",value:"Inventory",selected:!0},{label:"Deployment",value:"Deploy"}],ngChange:"selectCategory()"},name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},user:{label:"User",type:"hidden"},team:{label:"Team",type:"hidden"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngShow:"category == 'Deploy'",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"false"}},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"}},permission_type:{label:"Permission",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Read",value:"read",ngShow:"category == 'Inventory'"},{label:"Write",value:"write",ngShow:"category == 'Inventory'"},{label:"Admin",value:"admin",ngShow:"category == 'Inventory'"},{label:"Run",value:"run",ngShow:"category == 'Deploy'"},{label:"Check",value:"check",ngShow:"category == 'Deploy'"}],helpCollapse:[{hdr:"Permission",ngBind:"permissionTypeHelp"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("ProjectStatusDefinition",[]).value("ProjectStatusForm",{name:"project_update",editTitle:"SCM Status",well:!1,"class":"horizontal-narrow",fields:{created:{label:"Created",type:"text",readonly:!0},status:{label:"Status",type:"text",readonly:!0},result_stdout:{label:"Std Out",type:"textarea",ngShow:"result_stdout","class":"mono-space",readonly:!0,rows:15},result_traceback:{label:"Traceback",type:"textarea",ngShow:"result_traceback","class":"mono-space",readonly:!0,rows:15}}}),angular.module("ProjectFormDefinition",[]).value("ProjectsForm",{addTitle:"Create Project",editTitle:"{{ name }}",name:"project",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",addRequired:!0,editRequired:!1,excludeMode:"edit",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"},awPopOver:"<p>A project must have at least one organization. Pick one organization now to create the project, and then after the project is created you can add additional organizations.</p><p>Only super users and organization administrators are allowed to make changes to projects. Associating one or more organizations to a project determins which organizations admins have access to modify the project.",dataTitle:"Organization",dataContainer:"body",dataPlacement:"right"},scm_type:{label:"SCM Type",type:"select",ngOptions:"type.label for type in scm_type_options",ngChange:"scmChange()",addRequired:!0,editRequired:!0},missing_path_alert:{type:"alertblock","class":"alert-info",ngShow:"showMissingPlaybooksAlert && scm_type.value == ''",alertTxt:'<p class="text-justify"><strong>WARNING:</strong> There are no unassigned playbook directories in the base project path {{ base_dir }}. Either the projects directory is empty, or all of the contents are already assigned to other projects. New projects can be checked out from source control by changing the SCM type option rather than specifying checkout paths manually. To continue with manual setup, log into the Tower host and ensure content is present in a subdirectory under {{ base_dir }}. Run "chown -R awx" on the content directory to ensure Tower can read the playbooks.</p>',closeable:!1},base_dir:{label:"Project Base Path",type:"textarea",showonly:!0,ngShow:"scm_type.value == ''",awPopOver:"<p>Base path used for locating playbooks. Directories found inside this path will be listed in the playbook directory drop-down. Together the base path and selected playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Base Path",dataContainer:"body",dataPlacement:"right"},local_path:{label:"Playbook Directory",type:"select",id:"local-path-select",ngOptions:"path.label for path in project_local_paths",awRequiredWhen:{variable:"pathRequired",init:!1},ngShow:"scm_type.value == '' && !showMissingPlaybooksAlert",awPopOver:"<p>Select from the list of directories found in the base path.Together the base path and the playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Path",dataContainer:"body",dataPlacement:"right"},scm_url:{label:"SCM URL",type:"text",ngShow:"scm_type && scm_type.value !== ''",awRequiredWhen:{variable:"scmRequired",init:!1},helpCollapse:[{hdr:"GIT URLs",content:'<p>Example URLs for GIT SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible.git</li><li>git@github.com:ansible/ansible.git</li><li>git://servername.example.com/ansible.git</li></ul><p><strong>Note:</strong> If using SSH protocol for GitHub or Bitbucket, enter in the SSH key only, do not enter a username (other than git). Additionally, GitHub and Bitbucket do not support password authentication when using SSH protocol. GIT read only protocol (git://) does not use username or password information.',show:"scm_type.value == 'git'"},{hdr:"SVN URLs",content:'<p>Example URLs for Subversion SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible</li><li>svn://servername.example.com/path</li><li>svn+ssh://servername.example.com/path</li></ul>',show:"scm_type.value == 'svn'"},{hdr:"Mercurial URLs",content:'<p>Example URLs for Mercurial SCM include:</p><ul class="no-bullets"><li>https://bitbucket.org/username/project</li><li>ssh://hg@bitbucket.org/username/project</li><li>ssh://server.example.com/path</li></ul><p><strong>Note:</strong> Mercurial does not support password authentication for SSH. If applicable, add the username, password and key below. Do not put the username and key in the URL. If using Bitbucket and SSH, do not supply your Bitbucket username.',show:"scm_type.value == 'hg'"}]},scm_branch:{labelBind:"scmBranchLabel",type:"text",ngShow:"scm_type && scm_type.value !== ''",addRequired:!1,editRequired:!1},credential:{label:"SCM Credential",type:"lookup",ngShow:"scm_type && scm_type.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1},checkbox_group:{label:"SCM Update Options",type:"checkbox_group",ngShow:"scm_type && scm_type.value !== ''",fields:[{name:"scm_clean",label:"Clean",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Remove any local modifications prior to performing an update.</p>",dataTitle:"SCM Clean",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_delete_on_update",label:"Delete on Update",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Delete the local repository in its entirety prior to performing an update.</p><p>Depending on the size of the repository this may significantly increase the amount of time required to complete an update.</p>",dataTitle:"SCM Delete",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_update_on_launch",label:"Update on Launch",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this project, perform an update to the local repository prior to starting the job.</p>",dataTitle:"SCM Update",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{add:{ngClick:"add('organizations')",icon:"icon-plus",label:"Add",awToolTip:"Add an organization"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('organizations', organization.id, organization.name)",icon:"icon-edit",awToolTip:"Edit the organization","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('organizations', organization.id, organization.name, 'organizations')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the organization"}}}}}),angular.module("TeamFormDefinition",[]).value("TeamForm",{addTitle:"Create Team",editTitle:"{{ name }}",name:"team",well:!0,collapse:!0,collapseTitle:"Team Settings",collapseMode:"edit",collapseOpen:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"teamrequired",init:"true"}}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",add:"Add a new credential"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Modify the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{add:{ngClick:"add('projects')",icon:"icon-plus",label:"Add"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('projects', project.id, project.name)",icon:"icon-edit",awToolTip:"Modify the project","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('projects', project.id, project.name, 'projects')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the project"}}},users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",icon:"icon-plus",label:"Add",awToolTip:"Add a user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit",awToolTip:"Edit user","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-terash","class":"btn-danger",awToolTip:"Remove user"}}}}}),angular.module("UserFormDefinition",[]).value("UserForm",{addTitle:"Create User",editTitle:"{{ username }}",name:"user",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{first_name:{label:"First Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},last_name:{label:"Last Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},email:{label:"Email",type:"email",addRequired:!0,editRequired:!0,autocomplete:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",excludeMode:"edit",awRequiredWhen:{variable:"orgrequired",init:!0}},username:{label:"Username",type:"text",awRequiredWhen:{variable:"not_ldap_user",init:!0},autocomplete:!1},password:{label:"Password",type:"password",ngShow:"ldap_user == false",addRequired:!0,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",autocomplete:!1,chkPass:!0},password_confirm:{label:"Confirm Password",type:"password",ngShow:"ldap_user == false",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},is_superuser:{label:"Superuser (User has full system administration privileges.)",type:"checkbox",trueValue:"true",falseValue:"false","default":"false",ngShow:"current_user['is_superuser'] == true"},ldap_user:{label:"Created by LDAP",type:"checkbox",readonly:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",awToolTip:"Add a credential for this user"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Edit the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},admin_of_organizations:{type:"collection",title:"Admin of Organizations",iterator:"adminof",open:!1,base:"/organizations",actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},teams:{type:"collection",title:"Teams",iterator:"team",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}}}}),angular.module("InventoryGroupsHelpDefinition",[]).value("InventoryGroupsHelp",{story:{hdr:"Building your inventory",width:510,height:560,steps:[{intro:"Start by creating a group:",img:{src:"groups001.png",maxWidth:338,maxHeight:222},box:'Click <i class="fa fa-plus"></i> on the groups list (the left side of the page) to add a new group.',autoOffNotice:!0},{intro:"Enter group properties:",img:{src:"groups002.png",maxWidth:443,maxHeight:251},box:'Enter the group name, a description and any inventory variables. Variables can be entered using either JSON or YAML syntax. For more on inventory variables, see <a href="http://docs.ansible.com/intro_inventory.html" target="_blank"> docs.ansible.com/intro_inventory.html</a>'},{intro:"Cloud inventory: select cloud source",img:{src:"groups003.png",maxWidth:412,maxHeight:215},box:'For a cloud inventory, choose the cloud provider from the list and select your credentials. If you have not already setup credentials for the provider, you will need to do that first on the <a href="/#/credentials" target="_blank">Credentials</a> tab.'},{intro:"Cloud inventory: synchronize Tower with the cloud",img:{src:"groups004.png",maxWidth:261,maxHeight:221},box:'To pull the cloud inventory into Tower, initiate an inventory sync by clicking <i class="fa fa-exchange"></i>.'},{intro:"Groups can have subgroups:",img:{src:"groups005.png",maxWidth:430,maxHeight:206},box:'<div class="text-left">First, select a group. Then click <i class="fa fa-plus"></i> to create a new group. The new group will be added to the selected group.</div>'},{intro:"Copy or move groups:",img:{src:"groups006.png",maxWidth:263,maxHeight:211},box:'<div class="text-left">Copy or move a group by dragging and dropping its name onto another group name. A dialog will appear asking if the group should be coppied or moved.</div>'},{intro:"Adding hosts:",img:{src:"groups007.png",maxWidth:466,maxHeight:178},box:'<div class="text-left"><p>First, select a Group. Then click <i class="fa fa-plus"></i> on the hosts list (the right side of the page) to create a host. The new host will be part of the selected group.</p><p>Note hosts cannot be added to the All Hosts group.</p></div>'}]}}),angular.module("AccessHelper",["RestServices","Utilities","ngCookies"]).factory("CheckAccess",["$rootScope","Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d,e){return function(b){var d=a.current_user,f=b.scope;
d.is_superuser?f.PermissionAddAllowed=!0:d.related.admin_of_organizations&&(c.setUrl(d.related.admin_of_organizations),c.get().success(function(a){f.PermissionAddAllowed=a.results.length>0?!0:!1}).error(function(a,b){e(f,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.admin_of_organizations+" failed. DELETE returned status: "+b})}))}}]).factory("CheckLicense",["$rootScope","$cookieStore","Alert","$location","Authorization",function(a,b,c,d,e){return function(){var d,f,g="success",h=b.get("license"),i='<p>To purchase a license or extend an existing license <a href="http://www.ansible.com/ansible-pricing" target="_blank"><strong>visit the Ansible online store</strong></a>, or visit <strong><a href="https://support.ansible.com" target="_blank">support.ansible.com</a></strong> for assistance.</p>';h&&!e.licenseTested()&&(h.tested=!0,b.remove("license"),b.put("license",h),a.license_tested=!0,void 0!==h.valid_key&&h.valid_key===!1?(g="alert-danger",d="License Error",f="<p>There is a problem with the /etc/awx/license file on your Tower server. Check to make sure Tower can access the file.</p>"+i,c(d,f,g,null,!1,!0)):void 0!==h.demo&&h.demo===!0&&(g="alert-info",d="Tower Demo",f="<p>Thank you for trying Ansible Tower. You can use this edition to manage up to 10 hosts free.</p>"+i,c(d,f,g)),void 0!==h.date_expired&&h.date_expired===!0?(g="alert-info",d="License Expired",f="<p>Your Ansible Tower License has expired and is no longer compliant. You can continue, but you will be unable to add any additional hosts.</p>"+i,c(d,f,g)):void 0!==h.date_warning&&h.date_warning===!0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license is about to expire!</p>"+i,c(d,f,g)),void 0!==h.free_instances&&parseInt(h.free_instances)<=0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license has reached capacity for the number of managed hosts allowed. You will not be able to add any additional hosts.</p>"+i,c(d,f,g,null,!0)))}}]),angular.module("ChildrenHelper",["RestServices","Utilities"]).factory("ToggleChildren",[function(){return function(a){function b(a){var b;for(i[a].ngicon="fa fa-minus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!0)}function c(a){var b;for(i[a].ngicon="fa fa-plus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!1,i[b].related.children&&c(b))}var d,e,f=a.scope,g=a.list,h=a.id,i=f[g.name],j=!1;for(d=0;d<i.length&&j===!1;d++)i[d].id===h&&(e=d,j=!0);/plus-square-o/.test(i[e].ngicon)?b(e):/minus-square-o/.test(i[e].ngicon)&&c(e)}}]),angular.module("CredentialsHelper",["Utilities"]).factory("KindChange",["Empty",function(a){return function(b){var c,d,e=b.scope,f=b.reset;if(e.usernameLabel="Username",e.aws_required=!1,e.rackspace_required=!1,e.sshKeyDataLabel="SSH Private Key",!a(e.kind))switch(e.kind.value){case"aws":e.aws_required=!0;break;case"rax":e.rackspace_required=!0;break;case"ssh":e.usernameLabel="SSH Username";break;case"scm":e.sshKeyDataLabel="SCM Private Key"}f&&(e.access_key=null,e.secret_key=null,e.api_key=null,e.username=null,e.password=null,e.password_confirm=null,e.ssh_key_data=null,e.ssh_key_unlock=null,e.ssh_key_unlock_confirm=null,e.sudo_username=null,e.sudo_password=null,e.sudo_password_confirm=null),c=$("#credential_kind").parent().find(".panel-collapse").first(),d=c.attr("id"),a(e.kind)||""===e.kind.value?$("#"+d+"-icon").hasClass("icon-plus")&&e.accordionToggle("#"+d):$("#"+d+"-icon").hasClass("icon-minus")&&e.accordionToggle("#"+d)}}]).factory("OwnerChange",[function(){return function(a){var b=a.scope,c=b.owner;"team"===c?(b.team_required=!0,b.user_required=!1,b.user=null,b.user_username=null):(b.team_required=!1,b.user_required=!0,b.team=null,b.team_name=null)}}]).factory("FormSave",["$location","Alert","Rest","ProcessErrors","Empty","GetBasePath","CredentialForm","ReturnToCaller","Wait",function(a,b,c,d,e,f,g,h,i){return function(j){var k,l,m=j.scope,n=j.mode,o=g,p={};for(k in o.fields)"access_key"!==k&&"secret_key"!==k&&"ssh_username"!==k&&"ssh_password"!==k&&(p[k]=null===m[k]?"":m[k]);switch(e(m.team)?(p.user=m.user,p.team=""):(p.team=m.team,p.user=""),p.kind=m.kind.value,p.kind){case"ssh":p.password=m.ssh_password;break;case"aws":p.username=m.access_key,p.password=m.secret_key;break;case"rax":p.password=m.api_key}e(p.team)&&e(p.user)?b("Missing User or Team","You must provide either a User or a Team. If this credential will only be accessed by a specific user, select a User. To allow a team of users to access this credential, select a Team.","alert-danger"):(i("start"),"add"===n?(l=e(p.team)?f("users")+p.user+"/credentials/":f("teams")+p.team+"/credentials/",c.setUrl(l),c.post(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to create new Credential. POST status: "+b})})):(l=f("credentials")+m.id+"/",c.setUrl(l),c.put(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to update Credential. PUT status: "+b})})))}}]),angular.module("EventsHelper",["RestServices","Utilities","JobEventDataDefinition","JobEventsFormDefinition"]).factory("EventView",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","JobEventDataForm","Empty","JobEventsForm",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.event_id,d=g,f=angular.copy(n),h=j("base")+"job_events/"+c+"/";e.setUrl(h),e.get().success(function(a){var c,e,h,i,j,n;if($.isEmptyObject(a.event_data)||!a.event_data.res||"string"==typeof a.event_data.res)for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"results":case"module_name":case"module_args":case"rc":delete f.fields[h]}($.isEmptyObject(a.event_data)||!a.event_data.res||"string"!=typeof a.event_data.res)&&delete f.fields.traceback;for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"rc":a.event_data&&a.event_data.res&&m(a.event_data.res[h])?delete f.fields[h]:"textarea"===f.fields[h].type&&(e=a.event_data.res[h].match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i);break;case"results":if(a.event_data&&a.event_data.res&&void 0===a.event_data.res[h])delete f.fields[h];else if(Array.isArray(a.event_data.res[h])&&0!==a.event_data.res[h].length){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""===j?delete f.fields[h]:(e=j.match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i)}else delete f.fields[h];break;case"module_name":case"module_args":a.event_data&&a.event_data.res&&(void 0===a.event_data.res.invocation||void 0===a.event_data.res.invocation[h])&&delete f.fields[h]}b=d.inject(f,{mode:"edit",modal:!0,related:!1}),d.reset(),b.formModalAction=function(){$("#form-modal").modal("hide")},b.formModalActionLabel="OK",b.formModalCancelShow=!1,b.formModalInfo="View JSON",$("#form-modal .btn-success").removeClass("btn-success").addClass("btn-none"),$("#form-modal").addClass("skinny-modal"),b.formModalHeader=a.event_display.replace(/^\u00a0*/g,""),b.formModalInfoAction=function(){var b=g,c=b.inject(l,{mode:"edit",modal:!0,related:!1,modal_selector:"#form-modal2",modal_body_id:"form-modal2-body",modal_title_id:"formModal2Header"});b.reset(),c.formModal2Header=a.event_display.replace(/^\u00a0*/g,""),c.event_data=JSON.stringify(a.event_data,null,"	"),c.formModal2ActionLabel="OK",c.formModal2CancelShow=!1,c.formModal2Info=!1,c.formModalInfo="View JSON",c.formModal2Action=function(){$("#form-modal2").modal("hide")},$("#form-modal2 .btn-success").removeClass("btn-success").addClass("btn-none")},"string"==typeof a.event_data.res&&(b.traceback=a.event_data.res);for(h in f.fields)switch(h){case"status":b.status=a.failed?"error":a.changed?"changed":"success";break;case"created":n=new Date(a.created),b.created=k(n);break;case"host":a.summary_fields&&a.summary_fields.host&&(b.host=a.summary_fields.host.name);break;case"id":case"task":case"play":b[h]=a[h];break;case"start":case"end":a.event_data&&a.event_data.res&&!m(a.event_data.res[h])&&(b[h]=a.event_data.res[h]);break;case"results":if(Array.isArray(a.event_data.res[h])&&a.event_data.res[h].length>0){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""!==j&&(b[h]=j)}break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[h]&&(b[h]=a.event_data.res[h]);break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(b[h]=a.event_data.res.invocation[h])}b.$$phase||b.$digest()}).error(function(a,d){$("#form-modal").modal("hide"),i(b,a,d,f,{hdr:"Error!",msg:"Failed to retrieve event: "+c+". GET status: "+d})})}}]),angular.module("GroupsHelper",["RestServices","Utilities","ListGenerator","GroupListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","GroupsHelper","InventoryHelper","SelectionHelper","JobSubmissionHelper","RefreshHelper","PromptDialog","CredentialsListDefinition","InventoryTree"]).factory("GetSourceTypeOptions",["Rest","ProcessErrors","GetBasePath",function(a,b,c){return function(d){var e=d.scope,f=d.variable;void 0===e[f]&&(e[f]=[],a.setUrl(c("inventory_sources")),a.options().success(function(a){var b,c=a.actions.GET.source.choices;for(b=0;b<c.length;b++)"file"!==c[b][0]&&e[f].push({label:""===c[b][0]?"Manual":c[b][1],value:c[b][0]})}).error(function(a,c){b(e,a,c,null,{hdr:"Error!",msg:"Failed to retrieve options for inventory_sources.source. OPTIONS status: "+c})}))}}]).factory("ViewUpdateStatus",["Rest","ProcessErrors","GetBasePath","ShowUpdateStatus","Alert","Wait","Empty","Find",function(a,b,c,d,e,f,g,h){return function(c){var i=c.scope,j=c.tree_id,k=c.group_id,l=h({list:i.groups,key:"id",val:j});l&&(g(l.source)?e("Missing Configuration","The selected group is not configured for inventory sync. You must first edit the group, provide Source settings, and then run the sync process.","alert-info"):g(l.status)||"never updated"===l.status?e("No Status Available",'An inventory sync has not been performed for the selected group. Start the process by clicking the <i class="fa fa-exchange"></i> button.',"alert-info"):(f("start"),a.setUrl(l.related.inventory_source),a.get().success(function(a){var b=a.related.current_update?a.related.current_update:a.related.last_update;d({group_name:a.summary_fields.group.name,last_update:b,license_error:a.summary_fields.last_update&&a.summary_fields.last_update.license_error?!0:!1,tree_id:j,group_id:k,parent_scope:i})}).error(function(a,c){f("stop"),b(i,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+l.related.inventory_source+" POST returned status: "+c})})))}}]).factory("GetHostsStatusMsg",[function(){return function(a){var b,c,d,e=a.active_failures,f=a.total_hosts;return e>0?(b=f+(1===f?" host":" hosts")+". "+e+" with failed jobs.",d="true",c=!0):(c=!1,0===f?(b="Group contains 0 hosts.",d="na"):(b=f+(1===f?" host":" hosts")+". No job failures",d="false")),{tooltip:b,failures:c,"class":d}}}]).factory("GetSyncStatusMsg",[function(){return function(a){var b,c,d,e=a.status,f="",g="Start sync process";switch(b=e,c="icon-cloud-"+b,e){case"never updated":b="never",c="icon-cloud-na disabled",d='Sync not performed. Click <i class="fa fa-exchange"></i> to start it now.';break;case"none":case"":f="btn-disabled",b="n/a",c="icon-cloud-na disabled",d='Cloud source not configured. Click <i class="fa fa-pencil"></i> to update.',g=d;break;case"failed":d="Sync failed. Click to view log.";break;case"successful":d="Sync completed. Click to view log.";break;case"updating":d="Sync running"}return{"class":c,tooltip:d,status:b,launch_class:f,launch_tip:g}}}]).factory("SourceChange",["GetBasePath","CredentialList","LookUpInit","Empty",function(a,b,c,d){return function(e){var f,g,h=e.scope,i=e.form;d(h.source)||("file"===h.source.value?h.sourcePathRequired=!0:(h.sourcePathRequired=!1,h.source_path="",h[i.name+"_form"].source_path.$setValidity("required",!0)),"rax"===h.source.value?(h.source_region_choices=h.rax_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])):"ec2"===h.source.value&&(h.source_region_choices=h.ec2_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])),("rax"===h.source.value||"ec2"===h.source.value)&&(f="rax"===h.source.value?"rax":"aws",g=a("credentials")+"?cloud=true&kind="+f,c({url:g,scope:h,form:i,list:b,field:"credential"})))}}]).factory("GroupsCancelUpdate",["Rest","ProcessErrors","Alert","Wait","Find",function(a,b,c,d,e){return function(f){var g,h=f.scope,i=f.tree_id;h.removeCancelUpdate&&h.removeCancelUpdate(),h.removeCancelUpdate=h.$on("CancelUpdate",function(e,f){a.setUrl(f),a.post().success(function(){d("stop"),c("Inventory Sync Cancelled",'Your request to cancel the sync process was submitted to the task manger. Click the <i class="fa fa-refresh fa-lg"></i> button to monitor the status.',"alert-info")}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+f+" failed. POST status: "+c})})}),h.removeCheckCancel&&h.removeCheckCancel(),h.removeCheckCancel=h.$on("CheckCancel",function(e,f,g){var i=g?g:f;i+="cancel/",a.setUrl(i),a.get().success(function(a){a.can_cancel?h.$emit("CancelUpdate",i):(d("stop"),c("Cancel Inventory Sync",'Either you do not have access or the sync process completed.<br /> Click the <i class="fa fa-refresh fa-lg"></i> button to view the latest status.',"alert-info"))}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+i+" failed. GET status: "+c})})}),g=e({list:h.groups,key:"id",val:i}),h.selected_tree_id=g.id,h.selected_group_id=g.group_id,!g||"updating"!==g.status&&"pending"!==g.status?c("Cancel Inventory Sync",'The sync process completed. Click the <i class="fa fa-refresh fa-lg"></i> to view the latest status.',"alert-info"):(d("start"),a.setUrl(g.related.inventory_source),a.get().success(function(a){h.$emit("CheckCancel",a.related.last_update,a.related.current_update)}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+g.related.inventory_source+" failed. GET status: "+c})}))}}]).factory("GroupsAdd",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","ParseTypeChange","GroupsEdit","Wait","GetChoices","GetSourceTypeOptions","LookUpInit","BuildTree","SourceChange","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return function(b){var c,d=b.inventory_id,i=void 0!==b.group_id?b.group_id:null,m=b.scope,q=null!==i?k("groups")+i+"/children/":k("inventory")+d+"/groups/",u=g,v=h,w=v.inject(u,{mode:"add",modal:!0,related:!1,show_modal:!1});$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),w.formModalActionLabel="Save",w.formModalCancelShow=!0,w.parseType="yaml",w.source=null,l(w),v.reset(),w.removeAddTreeRefreshed&&w.removeAddTreeRefreshed(),w.removeAddTreeRefreshed=w.$on("GroupTreeRefreshed",function(){a.formModalHeader=null,a.formModalCancleShow=null,a.formModalActionLabel=null,n("stop"),$("#form-modal").modal("hide"),w.removeAddTreeRefreshed()}),w.removeSaveComplete&&w.removeSaveComplete(),w.removeSaveComplete=w.$on("SaveComplete",function(a,b,c){c||(w.searchCleanup&&w.searchCleanup(),w.formModalActionDisabled=!1,r({scope:m,inventory_id:d,refresh:!0,new_group_id:b}),t())}),w.removeFormSaveSuccess&&w.removeFormSaveSuccess(),w.removeFormSaveSuccess=w.$on("formSaveSuccess",function(a,b,c){var d,g,h,i,k=!1,l={};if(null!==w.source.value&&""!==w.source.value){for(l.group=b,l.source=w.source.value,l.source_path=w.source_path,l.credential=w.credential,l.overwrite=w.overwrite,l.overwrite_vars=w.overwrite_vars,l.update_on_launch=w.update_on_launch,d=$("#s2id_group_source_regions").select2("data"),g=[],h=0;h<d.length;h++)g.push(d[h].id);if(l.source_regions=g.join(),"ec2"===w.source.value)try{if(i="json"===w.envParseType?JSON.parse(w.source_vars):jsyaml.load(w.source_vars),"object"!=typeof i)throw"failed to return an object!";l.source_vars=$.isEmptyObject(i)?"":JSON.stringify(i,void 0,"	")}catch(m){k=!0,w.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+m)}k||(e.setUrl(c),e.put(l).success(function(){w.$emit("SaveComplete",b,!1)}).error(function(a,c){w.$emit("SaveComplete",b,!0),j(w,a,c,u,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+c})}))}else w.$emit("SaveComplete",b,!1)}),w.cancelModal=function(){w.searchCleanup&&w.searchCleanup(),t()},w.formModalAction=function(){var a,b;n("start");try{if(w.formModalActionDisabled=!0,a="json"===w.parseType?JSON.parse(w.variables):jsyaml.load(w.variables),"object"!=typeof a)throw"failed to return an object!";b={name:w.name,description:w.description},d&&(b.inventory=d),b.variables=$.isEmptyObject(a)?"":JSON.stringify(a,void 0,"	"),e.setUrl(q),e.post(b).success(function(a){w.$emit("formSaveSuccess",a.id,k("inventory_sources")+a.id+"/")}).error(function(a,b){n("stop"),w.formModalActionDisabled=!1,j(w,a,b,u,{hdr:"Error!",msg:"Failed to add new group. POST returned status: "+b})})}catch(c){n("stop"),w.formModalActionDisabled=!1,f("Error","Error parsing group variables. Parser returned: "+c)}},w.sourceChange=function(){s({scope:w,form:g})},c=0,w.removeChoicesReady&&w.removeChoicesReady(),w.removeChoicesReady=w.$on("choicesReadyGroup",function(){c++,2===c&&($("#form-modal").modal("show"),n("stop"))}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),p({scope:w,variable:"source_type_options"}),n("start")}}]).factory("GroupsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","SetNodeName","ParseTypeChange","GetSourceTypeOptions","InventoryUpdate","LookUpInit","Empty","Wait","GetChoices","UpdateGroup","SourceChange","Find","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return function(a){var b,c=a.scope,d=a.group_id,i=a.tree_id,l=a.inventory_id,p=a.groups_reload,q=h,r=g,y=k("groups")+d+"/",z={},A=q.inject(r,{mode:"edit",modal:!0,related:!1,show_modal:!1});q.reset(),n({scope:A,variable:"source_type_options"}),A.formModalActionLabel="Save",A.formModalHeader="Group",A.formModalCancelShow=!0,A.source=r.fields.source["default"],A.parseType="yaml",A[r.fields.source_vars.parseTypeName]="yaml",A.sourcePathRequired=!1,m(A),m(A,"source_vars",r.fields.source_vars.parseTypeName),A.groupLoadedRemove&&A.groupLoadedRemove(),A.groupLoadedRemove=A.$on("groupLoaded",function(){A.variable_url?(e.setUrl(A.variable_url),e.get().success(function(a){A.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),s("stop")}).error(function(a,b){A.variables=null,s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group variables. GET returned status: "+b})})):A.variables="---",z.variables=A.variables,A.source_url&&(e.setUrl(A.source_url),e.get().success(function(a){var b,c,d,e,f,g,h,i,j;for(b in r.fields){if("checkbox_group"===b)for(c=0;c<r.fields[b].fields.length;c++)e=r.fields[b].fields[c],void 0!==a[e.name]&&(A[e.name]=a[e.name],z[e.name]=A[e.name]);if("source"===b){for(f=!1,c=0;c<A.source_type_options.length;c++)A.source_type_options[c].value===a.source&&(A.source=A.source_type_options[c],f=!0);A.groupUpdateHide=f&&""!==A.source.value?!1:!0,z.source=A.source}else if("update_interval"===b)for((""===a[b]||null===a[b]||void 0===a[b])&&(a[b]=0),c=0;c<A.update_interval_options.length;c++)A.update_interval_options[c].value===a[b]&&(A[b]=A.update_interval_options[c]);else"source_vars"===b?($.isEmptyObject(a.source_vars)||"{}"===a.source_vars||"null"===a.source_vars||""===a.source_vars?A.source_vars="---":(g=JSON.parse(a.source_vars),A.source_vars=jsyaml.safeDump(g)),z.source_vars=A.variables):a[b]&&(A[b]=a[b],z[b]=A[b]);r.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[r.fields[b].sourceModel]&&(A[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField],z[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField])}if(A.sourceChange(),a.source_regions){if("ec2"===a.source||"rax"===a.source){for(h="ec2"===a.source?A.ec2_regions:A.rax_regions,i=[],j=a.source_regions.split(","),c=0;c<j.length;c++)for(d=0;d<h.length;d++)j[c]===h[d].value&&i.push({id:h[d].value,text:h[d].label});z.source_regions=i,$("#s2id_group_source_regions").select2("data",i)}}else z.source_regions=[{id:"all",text:"All"}];A.group_update_url=a.related.update,s("stop")}).error(function(a,b){A.source="",s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve inventory source. GET status: "+b})}))}),A.removeChoicesComplete&&A.removeChoicesComplete(),A.removeChoicesComplete=A.$on("choicesCompleteGroup",function(){e.setUrl(y),e.get().success(function(a){for(var b in r.fields)a[b]&&(A[b]=a[b],z[b]=A[b]);A.variable_url=a.related.variable_data,A.source_url=a.related.inventory_source,$("#form-modal").modal("show"),A.$emit("groupLoaded")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group: "+y+". GET status: "+b})})}),b=0,A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReadyGroup",function(){b++,2===b&&A.$emit("choicesCompleteGroup")}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),s("start"),A.removeSaveComplete&&A.removeSaveComplete(),A.removeSaveComplete=A.$on("SaveComplete",function(a,b){if(!b){if(p)u({scope:c,group_id:d,properties:{name:A.name,description:A.description,has_inventory_sources:A.source&&A.source.value?!0:!1,source:A.source&&A.source.value?A.source.value:""}});else if(A.home_groups){var e=w({list:c.home_groups,key:"id",val:d});e&&(e.name=A.name,e.description=A.description)}A.searchCleanUp&&A.searchCleanup(),A.formModalActionDisabled=!1,$("#form-modal").modal("hide"),p&&c.selected_tree_id!==i?c.showHosts(i,d,!1):s("stop"),x()}}),A.removeFormSaveSuccess&&A.removeFormSaveSuccess(),A.removeFormSaveSuccess=A.$on("formSaveSuccess",function(){var a,b,c,g,h=!1,i={group:d,source:A.source&&A.source.value?A.source.value:"",source_path:A.source_path,credential:A.credential,overwrite:A.overwrite,overwrite_vars:A.overwrite_vars,update_on_launch:A.update_on_launch};for(a=$("#s2id_group_source_regions").select2("data"),b=[],c=0;c<a.length;c++)b.push(a[c].id);if(i.source_regions=b.join(),A.source&&"ec2"===A.source.value)try{if(g="json"===A.envParseType?JSON.parse(A.source_vars):jsyaml.load(A.source_vars),"object"!=typeof g)throw"failed to return an object!";i.source_vars=$.isEmptyObject(g)?"":JSON.stringify(g)}catch(k){h=!0,A.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+k)}h||(e.setUrl(A.source_url),e.put(i).success(function(){A.$emit("SaveComplete",!1)}).error(function(a,b){A.$emit("SaveComplete",!0),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+b})}))}),A.cancelModal=function(){A.searchCleanup&&A.searchCleanup(),x()},A.formModalAction=function(){s("start");try{var a,b,c;if(c="json"===A.parseType?JSON.parse(A.variables):jsyaml.load(A.variables),"object"!=typeof c)throw"failed to return an object!";b={};for(a in r.fields)b[a]=A[a];b.inventory=l,e.setUrl(y),e.put(b).success(function(){A.variables?(e.setUrl(A.variable_url),e.put(c).success(function(){A.$emit("formSaveSuccess")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group variables. PUT status: "+b})})):A.$emit("formSaveSuccess")}).error(function(a,b){s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group: "+d+". PUT status: "+b})})}catch(g){s("stop"),f("Error","Error parsing group variables. Parser returned: "+g)}},A.updateGroup=function(){""===A.source||null===A.source?f("Missing Configuration","The selected group is not configured for updates. You must first edit the group, provide Source settings, and then run an update.","alert-info"):"updating"===A.status?f("Update in Progress","The inventory update process is currently running for group <em>"+A.summary_fields.group.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):o({scope:A,group_id:d,url:A.group_update_url,group_name:A.name,group_source:A.source.value})},A.sourceChange=function(){v({scope:A,form:g})}}}]).factory("GroupsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","Wait","BuildTree","Find",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.scope,d=a.tree_id,f=a.inventory_id,g=n({list:c.groups,key:"id",val:d}),h=k("inventory")+f+"/groups/";b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){l("start")}),$("#prompt-modal").modal("hide"),e.setUrl(h),e.post({id:g.group_id,disassociate:1}).success(function(){$("#prompt-modal").off(),c.$emit("GroupDeleteCompleted")}).error(function(a,b){l("stop"),j(c,a,b,null,{hdr:"Error!",msg:"Call to "+h+" failed. POST returned status: "+b})})},i({hdr:"Delete Group",body:"<p>Are you sure you want to delete group <em>"+g.name+"?</p>",action:b,"class":"btn-danger"})}}]).factory("ShowUpdateStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","InventoryStatusForm","Wait","Empty","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){function b(a){var b,d;return b=a.match(/\n/g),d=b?b.length:1,d>c?c:d}var c,d,h,j,n,p,q,r=a.group_name,s=a.last_update,t=g,u=l,v=a.license_error;void 0===s||null===s||""===s?(m("stop"),f("Missing Configuration","The selected group is not configured for inventory sync. Edit the group and provide Source information.","alert-info")):(d='<div id="status-modal-dialog" title="'+r+'- Inventory Sync">\n<div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(d),h=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),j=$(document).width(),n=$("body").height(),j>1199?(p=675,q=750>n?n-20:750,c=18):1199>=j&&j>=768?(p=550,q=620>n?n-15:620,c=12):(p=j-20,q=500>n?n:500,c=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:p,height:q,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),o()},open:function(){m("stop")}}),e.setUrl(s),e.get().success(function(a){for(var c in u.fields)a[c]&&(h[c]="created"===c?k(new Date(a[c])):a[c]);h.license_error=v,h.status_rows=b(a.status),h.stdout_rows=b(a.result_stdout),h.traceback_rows=b(a.result_traceback),$("#status-modal-dialog").dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(h,a,b,null,{hdr:"Error!",msg:"Failed to retrieve last update: "+s+". GET status: "+b})}))}}]),angular.module("HostsHelper",["RestServices","Utilities","ListGenerator","HostListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","HostsHelper","InventoryHelper","RelatedSearchHelper","InventoryFormDefinition","SelectionHelper","HostGroupsFormDefinition"]).factory("SetEnabledMsg",[function(){return function(a){a.enabledToolTip=a.has_inventory_sources?a.enabled?"Host is available":"Host is not available":a.enabled?"Host is available. Click to toggle.":"Host is not available. Click to toggle."}}]).factory("SetHostStatus",["SetEnabledMsg",function(a){return function(b){b.activeFailuresLink="/#/hosts/"+b.id+"/job_host_summaries/?inventory="+b.inventory+"&host_name="+encodeURI(b.name),b.has_active_failures===!0?(b.badgeToolTip="Most recent job failed. Click to view jobs.",b.active_failures="failed"):b.has_active_failures===!1&&null===b.last_job?(b.has_active_failures="none",b.badgeToolTip="No job data available.",b.active_failures="n/a"):b.has_active_failures===!1&&null!==b.last_job&&(b.badgeToolTip="Most recent job successful. Click to view jobs.",b.active_failures="success"),b.enabled_flag=b.enabled,a(b)}}]).factory("SetStatus",["SetEnabledMsg","Empty",function(a,b){return function(c){function d(a){return a.length>25?a.substr(0,25)+"...":a}function e(a){var b,c,e;if(a.has_active_failures===!0||a.has_active_failures===!1&&null!==a.last_job)if(a.has_active_failures===!0?(a.badgeToolTip="Most recent job failed. Click to view jobs.",a.active_failures="failed"):(a.badgeToolTip="Most recent job successful. Click to view jobs.",a.active_failures="success"),a.summary_fields.recent_jobs.length>0){for(e=a.summary_fields.recent_jobs.sort(function(a,b){return-1*(a-b)}),h="Recent Jobs",g='<table class="table table-condensed host-flyout" style="width: 100%">\n',g+="<thead>\n",g+="<tr>\n",g+="<th>ID</td>\n",g+='<th class="text-center">Status</td>\n',g+="<th>View</th>\n",g+="<th>Name</td>\n",g+="</tr>\n",g+="</thead>\n",g+="<tbody>\n",b=0;b<e.length;b++)c=e[b],g+="<tr>\n",g+='<td><a href="/#/jobs/'+c.id+'">'+c.id+"</a></td>\n",g+='<td class="text-center"><a ng-click="showJobSummary('+c.id+')" aw-tool-tip="'+c.status.charAt(0).toUpperCase()+c.status.slice(1)+'. Click for details" data-placement="top"><i class="fa icon-job-'+c.status+'"></i></a></td>\n',g+='<td><a href="/#/jobs/'+c.id+"/job_events/?host="+encodeURI(a.name)+'">Events</a> <a href="/#/jobs/'+c.id+"/job_host_summaries/?host_name="+encodeURI(a.name)+'">Hosts</a></td>\n',g+='<td class="break">'+d(c.name)+"</td>\n",g+="</tr>\n";g+="</tbody>\n",g+="</table>\n"}else h="No job data",g="<p>No recent job data available for this host.</p>";else a.has_active_failures===!1&&null===a.last_job&&(a.has_active_failures="none",a.badgeToolTip="No job data available.",a.active_failures="n/a");a.job_status_html=g,a.job_status_title=h}var f,g,h,i=c.scope,j=c.host;if(b(j))for(f=0;f<i.hosts.length;f++)e(i.hosts[f]),a(i.hosts[f]);else e(j),a(j)}}]).factory("HostsReload",["$routeParams","Empty","InventoryHosts","GetBasePath","SearchInit","PaginateInit","Wait","SetHostStatus","SetStatus","ApplyEllipsis",function(a,b,c,d,e,f,g,h,i,j){return function(h){var k=h.scope,l=h.group_id,m=h.inventory_id,n=c,o=b(l)?d("inventory")+m+"/hosts/":d("groups")+l+"/all_hosts/";k.search_place_holder="Search "+k.selected_group_name,k.removePostRefresh&&k.removePostRefresh(),k.removePostRefresh=k.$on("PostRefresh",function(){for(var a=0;a<k.hosts.length;a++)k.hosts[a].enabled_flag=k.hosts[a].enabled;i({scope:k}),setTimeout(function(){j("#hosts_table .host-name a")},2500),g("stop"),k.$emit("HostReloadComplete")}),e({scope:k,set:"hosts",list:n,url:o}),f({scope:k,list:n,url:o}),a.host_name&&(k[n.iterator+"InputDisable"]=!1,k[n.iterator+"SearchValue"]=a.host_name,k[n.iterator+"SearchField"]="name",k[n.iterator+"SearchFieldLabel"]=n.fields.name.label,k[n.iterator+"SearchSelectValue"]=null),k.show_failures&&(k[n.iterator+"InputDisable"]=!0,k[n.iterator+"SearchValue"]="true",k[n.iterator+"SearchField"]="has_active_failures",k[n.iterator+"SearchFieldLabel"]=n.fields.has_active_failures.label,k[n.iterator+"SearchSelectValue"]={value:1}),k.search(n.iterator)
}}]).factory("InjectHosts",["GenerateList","InventoryHosts","HostsReload",function(a,b,c){return function(d){var e=d.scope,f=d.inventory_id,g=d.group_id,h=d.tree_id,i=a;i.inject(b,{scope:e,mode:"edit",id:"hosts-container",breadCrumbs:!1,searchSize:"col-lg-6 col-md-6 col-sm-6"}),c({scope:e,group_id:g,tree_id:h,inventory_id:f})}}]).factory("ToggleHostEnabled",["GetBasePath","Rest","Wait","ProcessErrors","Alert","Find","SetEnabledMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){a.enabled=a.enabled?!1:!0,a.enabled_flag=a.enabled,g(a)}var j,k=h.host_id,l=h.external_source,m=h.scope;l?e("Action Not Allowed","This host is part of a cloud inventory. It can only be disabled in the cloud. After disabling it, run an inventory sync to see the new status reflected here.","alert-info"):(c("start"),j=f({list:m.hosts,key:"id",val:k}),i(j),b.setUrl(a("hosts")+k+"/"),b.put(j).success(function(){c("stop")}).error(function(a,b){i(j),c("stop"),d(m,a,b,null,{hdr:"Error!",msg:"Failed to update host. PUT returned status: "+b})}))}}]).factory("HostsList",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostList","GenerateList","Prompt","SearchInit","PaginateInit","ProcessErrors","GetBasePath","HostsAdd","HostsReload","SelectionInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return function(a){var b,c,d=a.inventory_id,e=a.group_id,f=g,i=h;f.iterator="subhost",f.name="subhosts",c=i.inject(f,{id:"form-modal-body",mode:"select",breadCrumbs:!1,selectButton:!1}),b=m("inventory")+d+"/hosts/?not__groups__id="+c.group_id,c.formModalActionLabel="Select",c.formModalHeader="Add Existing Hosts",c.formModalCancelShow=!0,p({scope:c,list:f,url:m("groups")+e+"/hosts/"}),c.removeModalClosed&&c.removeModalClosed(),c.removeModalClosed=c.$on("modalClosed",function(){o(a)}),$(".popover").popover("hide"),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),$("#form-modal").modal({backdrop:"static",keyboard:!1}),j({scope:c,set:"subhosts",list:f,url:b}),k({scope:c,list:f,url:b,mode:"lookup"}),c.search(f.iterator),c.$$phase||c.$digest(),c.createHost=function(){$("#form-modal").modal("hide"),n({scope:a.scope,inventory_id:d,group_id:e})}}}]).factory("HostsCreate",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){var b=a.scope,c=b.inventory_id,d=b.selected_group_id,i=k("groups")+d+"/hosts/",p=g,q=h,r=q.inject(p,{mode:"add",modal:!0,related:!1}),s={};r.formModalActionLabel="Save",r.formModalHeader="Create New Host",r.formModalCancelShow=!0,r.parseType="yaml",m(r),r.removeHostsReload&&r.removeHostsReload(),r.removeHostsReload=r.$on("hostsReload",function(){l(a)}),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),q.reset(),s={},r.$$phase||r.$digest(),r.removeHostSaveComplete&&r.removeHostSaveComplete(),r.removeHostSaveComplete=r.$on("HostSaveComplete",function(){n("stop"),$("#form-modal").modal("hide"),l({scope:b,group_id:b.selected_group_id,tree_id:b.selected_tree_id,inventory_id:b.inventory_id}),o()}),r.formModalAction=function(){n("start");try{var a,b,d={};if(r.formModalActionDisabled=!0,b="json"===r.parseType?JSON.parse(r.variables):jsyaml.load(r.variables),"object"!=typeof b)throw"failed to return an object!";for(a in p.fields)"variables"!==a&&(d[a]=r[a]);d.inventory=c,d.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(i),e.post(d).success(function(){r.$emit("HostSaveComplete")}).error(function(a,b){n("stop"),r.formModalActionDisabled=!1,j(r,a,b,p,{hdr:"Error!",msg:"Failed to add new host. POST returned status: "+b})})}catch(g){n("stop"),r.formModalActionDisabled=!1,f("Error","Error parsing host variables. Parser returned: "+g)}},r.formReset=function(){q.reset()},r.cancelModal=function(){o()}}}]).factory("HostsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","Find","SetStatus","ApplyEllipsis","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(a){var b=a.scope,c=a.host_id,d=a.inventory_id,i=h,l=g,s=k("hosts")+c+"/",t=i.inject(l,{mode:"edit",modal:!0,related:!1,show_modal:!1}),u={},v={};i.reset(),t.formModalActionLabel="Save",t.formModalHeader="Host Properties",t.formModalCancelShow=!0,t.parseType="yaml",m(t),t.hostLoadedRemove&&t.hostLoadedRemove(),t.hostLoadedRemove=t.$on("hostLoaded",function(){t.variable_url?(e.setUrl(t.variable_url),e.get().success(function(a){t.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),n("stop"),$("#form-modal").modal("show")}).error(function(a,b){t.variables=null,j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host variables. GET returned status: "+b})})):(t.variables="---",n("stop"),$("#form-modal").modal("show")),u.variables=t.variables}),n("start"),e.setUrl(s),e.get().success(function(a){var b,c,d;for(c in l.fields)a[c]&&(t[c]=a[c],u[c]=t[c]);d=a.related;for(b in l.related)d[b]&&(v[b]={url:d[b],iterator:l.related[b].iterator});t.variable_url=a.related.variable_data,t.$emit("hostLoaded")}).error(function(a,b){j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host: "+c+". GET returned status: "+b})}),t.removeSaveCompleted&&t.removeSaveCompleted(),t.removeSaveCompleted=t.$on("saveCompleted",function(){var a=o({list:b.hosts,key:"id",val:c}),d=a.name;a.name=t.name,a.enabled=t.enabled,a.enabled_flag=t.enabled,p({scope:b,host:a}),d?setTimeout(function(){$('#hosts_table .host-name a[title="'+d+'"').attr("title",a.name),q("#hosts_table .host-name a"),n("stop"),$("#form-modal").modal("hide")},2e3):(n("stop"),$("#form-modal").modal("hide")),r()}),t.formModalAction=function(){n("start");try{var a,b,g={};if(b="json"===t.parseType?JSON.parse(t.variables):jsyaml.load(t.variables),"object"!=typeof b)throw"failed to return an object!";for(a in l.fields)g[a]=t[a];g.inventory=d,g.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(s),e.put(g).success(function(){t.$emit("saveCompleted")}).error(function(a,b){n("stop"),j(t,a,b,l,{hdr:"Error!",msg:"Failed to update host: "+c+". PUT returned status: "+b})})}catch(h){n("stop"),f("Error","Error parsing host variables. Parser returned: "+h)}},t.formReset=function(){i.reset();for(var a in u)t[a]=u[a];t.parseType="yaml"},t.cancelModal=function(){r()}}}]).factory("HostsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","Prompt","ProcessErrors","GetBasePath","HostsReload","Wait","Find",function(a,b,c,d,e,f,g,h,i,j,k,l){return function(a){var b,c,d=a.scope,f=a.host_id,j=a.host_name,m=null===d.selected_group_id?i("inventory")+d.inventory_id+"/hosts/":i("groups")+d.selected_group_id+"/hosts/",n=d.selected_tree_id?l({list:d.groups,key:"id",val:d.selected_tree_id}):null;d.removeHostsReload&&d.removeHostsReload(),d.removeHostsReload=d.$on("hostsReload",function(){d.showHosts(d.selected_tree_id,d.selected_group_id,!1)}),b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){k("start")}),$("#prompt-modal").modal("hide"),e.setUrl(m),e.post({id:f,disassociate:1}).success(function(){d.$emit("hostsReload")}).error(function(a,b){k("stop"),h(d,a,b,null,{hdr:"Error!",msg:"Attempt to delete "+j+" failed. POST returned status: "+b})})},c=n?"<p>Are you sure you want to delete host <em>"+j+"</em> from group <em>"+n.name+"</em>?</p>":"<p>Are you sure you want to delete host <em>"+j+"</em>?</p>",g({hdr:"Delete Host",body:c,action:b,"class":"btn-danger"})}}]).factory("EditHostGroups",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,l=a.host_id,n=a.inventory_id,o=g,p=[];for(c='<div class="row host-groups">\n',c+='<div class="col-lg-6">\n',c+="<label>Available Groups:</label>\n",c+='<select multiple class="form-control" name="available-groups" ng-model="selectedGroups" ng-change="leftChange()" ng-options="avail_group.name for avail_group in available_groups"></select>\n',c+="</div>\n",c+='<div class="col-lg-6">\n',c+="<label>Belongs to Groups:</label>\n",c+='<select multiple class="form-control" name="selected-groups" ng-model="assignedGroups" ng-change="rightChange()" ng-options="host_group.name for host_group in host_groups"></select>\n',c+="</div>\n",c+="</div>\n",c+='<div class="row host-group-buttons">\n',c+='<div class="col-lg-12">\n',c+='<button type="button" ng-click="moveLeft()" class="btn btn-sm btn-primary left-button" ng-disabled="leftButtonDisabled"><i class="icon-arrow-left"></i></button>\n',c+='<button type="button" ng-click="moveRight()" class="btn btn-sm btn-primary right-button" ng-disabled="rightButtonDisabled"><i class="icon-arrow-right"></i></button>\n',c+="<p>(move selected groups)</p>\n",c+="</div>\n",c+="</div>\n",d=j("hosts")+l+"/",f=o.inject(null,{mode:"edit",modal:!0,related:!1,html:c}),b=0;b<f.hosts.length;b++)f.hosts[b].id===l&&(f.host=f.hosts[b]);f.selectedGroups=null,f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionLabel="Save",f.formModalHeader=f.host.name+' - <span class="subtitle">Groups</span>',f.formModalCancelShow=!0,f.formModalActionDisabled=!0,$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),f.hostGroupChangeRemove&&f.hostGroupChangeRemove(),f.hostGroupChangeRemove=f.$on("hostGroupChange",function(){p.pop(),0===p.length&&(h=function(){setTimeout(function(){m("stop")},500)},k({scope:f,inventory_id:n,group_id:f.group_id,action:h}))}),f.formModalAction=function(){var a,b,c;for($("#form-modal").modal("hide"),m("start"),a=0;a<f.original_groups.length;a++){for(c=!1,b=0;b<f.host_groups.length;b++)f.original_groups[a].id===f.host_groups[b].id&&(c=!0);c||(p.push({group_id:f.original_groups[a].id,action:"delete"}),e.setUrl(j("groups")+f.original_groups[a].id+"/hosts/"),e.post({id:l,disassociate:1}).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to remove host from group "+f.original_groups[a].name+" failed. POST returned status: "+c})}))}for(a=0;a<f.host_groups.length;a++){for(c=!1,b=0;b<f.original_groups.length;b++)f.original_groups[b].id===f.host_groups[a].id&&(c=!0);c||(p.push({group_id:f.host_groups[a].id,action:"add"}),e.setUrl(j("groups")+f.host_groups[a].id+"/hosts/"),e.post(f.host).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to add host to group "+f.host_groups[a].name+" failed. POST returned status: "+c})}))}},f.leftChange=function(){null!==f.selectedGroups&&f.selectedGroups.length>0?(f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!1):f.rightButtonDisabled=!0},f.rightChange=function(){null!==f.assignedGroups&&f.assignedGroups.length>0?(f.selectedGroups=null,f.leftButtonDisabled=!1,f.rightButtonDisabled=!0):f.leftButtonDisabled=!0},f.moveLeft=function(){var a,b,c,d;for(a=0;a<f.assignedGroups.length;a++)for(b=0;b<f.host_groups.length;b++)if(f.host_groups[b].id===f.assignedGroups[a].id){f.host_groups.splice(b,1);break}for(a=0;a<f.assignedGroups.length;a++){for(c=!1,b=0;b<f.available_groups.length&&!c;b++)f.available_groups[b].id===f.assignedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.available_groups.length&&!d;b++)0===b&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b].name.toLowerCase()?(d=!0,f.available_groups.unshift(f.assignedGroups[a])):b+1<f.available_groups.length&&f.assignedGroups[a].name.toLowerCase()>f.available_groups[b].name.toLowerCase()&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b+1].name.toLowerCase()&&(d=!0,f.available_groups.splice(b+1,0,f.assignedGroups[a]));d||f.available_groups.push(f.assignedGroups[a])}}f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.moveRight=function(){var a,b,c,d;for(a=0;a<f.selectedGroups.length;a++)for(b=0;b<f.available_groups.length;b++)if(f.available_groups[b].id===f.selectedGroups[a].id){f.available_groups.splice(b,1);break}for(a=0;a<f.selectedGroups.length;a++){for(c=!1,b=0;b<f.host_groups.length&&!c;b++)f.host_groups[b].id===f.selectedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.host_groups.length&&!d;b++)0===b&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b].name.toLowerCase()?(d=!0,f.host_groups.unshift(f.selectedGroups[a])):b+1<f.host_groups.length&&f.selectedGroups[a].name.toLowerCase()>f.host_groups[b].name.toLowerCase()&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b+1].name.toLowerCase()&&(d=!0,f.host_groups.splice(b+1,0,f.selectedGroups[a]));d||f.host_groups.push(f.selectedGroups[a])}}f.selectedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.host_groups=[],f.original_groups=[],f.available_groups=[],e.setUrl(f.host.related.groups+"?order_by=name"),e.get().success(function(a){var b,c,d;for(b=0;b<a.results.length;b++)f.host_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description}),f.original_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description});for(b=0;b<f.inventory_groups.length;b++){for(d=!1,c=0;c<f.host_groups.length;c++)f.inventory_groups[b].id===f.host_groups[c].id&&(d=!0);d||f.available_groups.push(f.inventory_groups[b])}}).error(function(a,b){i(f,a,b,null,{hdr:"Error!",msg:"Failed to get current groups for host: "+l+". GET returned: "+b})}),f.removeHostsReload&&f.removeHostsReload(),f.removeHostsReload=f.$on("hostsReload",function(){k(a)}),f.$$phase||f.$digest()}}]),angular.module("JobSubmissionHelper",["RestServices","Utilities","CredentialFormDefinition","CredentialsListDefinition","LookUpHelper","ProjectFormDefinition","JobSubmissionHelper"]).factory("PromptPasswords",["CredentialForm","JobTemplateForm","$compile","Rest","$location","ProcessErrors","GetBasePath","Alert","Empty","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(a){function b(a){a?e.path("/"+v):"jobs"===v?q.refreshJob():e.path("/jobs")}function k(){var a=g("jobs")+q.job_id+"/";d.setUrl(a),d.destroy().success(function(){"credential"===t.name&&b(!0)}).error(function(b,c){f(q,b,c,null,{hdr:"Error!",msg:"Call to "+a+" failed. DELETE returned status: "+c})})}var l,m,n,o,p,q=a.scope,r=a.passwords,s=a.start_url,t=a.form,u="",v=e.path().replace(/^\//,"").split("/")[0],w=a.extra_html;if(q.cancelJob=function(){$("#password-modal").modal("hide"),"credential"===t.name?k():q.$emit("UpdateSubmitted","canceled")},q.startJob=function(){var a={},c=!1;$("#password-modal").modal("hide"),j("start"),$(".password-field").each(function(){a[$(this).attr("name")]=$(this).val(),""!==$(this).val()&&null!==$(this).val()&&(c=!0)}),i(r)||0===r.length||c?(d.setUrl(s),d.post(a).success(function(){q.$emit("UpdateSubmitted","started"),"credential"===t.name&&b(!1)}).error(function(a,b){j("stop"),f(q,a,b,null,{hdr:"Error!",msg:"POST to "+s+" failed with status: "+b})})):(j("stop"),h("No Passwords","Required password(s) not provided. The request was not submitted.","alert-info"),"credential"===t.name&&q.cancelJob())},r&&r.length>0){for(j("stop"),u+='<form class="form-horizontal" name="password_form" novalidate>\n',u+=w?w:"",o=0;o<r.length;o++)"credential"===t.name?t.fields[r[o]]?p=t:(h("Form Not Found","Could not locate form for: "+r[o],"alert-danger"),e("/#/jobs")):p=t,l=p.fields[r[o]],n=r[o],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="password-field form-control" ',u+="required ",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n",n=l.associated,l=p.fields[l.associated],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="form-control" ',u+="required ",u+=l.awPassMatch?'awpassmatch="'+l.associated+'" ':"",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',l.awPassMatch&&(u+='<span class="error" ng-show="password_form.'+n+'.$error.awpassmatch">Must match Password value</span>\n'),u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n";u+="</form>\n",m=angular.element(document.getElementById("password-body")),m.html(u),c(m.contents())(q),$("#password-modal").modal(),$("#password-modal").on("shown.bs.modal",function(){$("#password-body").find('input[type="password"]:first').focus()})}else q.startJob()}}]).factory("SubmitJob",["PromptPasswords","$compile","Rest","$location","GetBasePath","CredentialList","LookUpInit","CredentialForm","ProcessErrors","JobTemplateForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k){return function(b){function l(b){var e,f,g;m.credentialWatchRemove&&m.credentialWatchRemove(),e=(new Date).toISOString(),f=b.related.jobs?b.related.jobs:b.related.job_template+"jobs/",g=o?o:b.name,k("start"),c.setUrl(f),c.post({name:g+" "+e,description:b.description,job_template:b.id,inventory:b.inventory,project:b.project,playbook:b.playbook,credential:b.credential,forks:b.forks,limit:b.limit,verbosity:b.verbosity,extra_vars:b.extra_vars}).success(function(b){m.job_id=b.id,b.passwords_needed_to_start.length>0?a({scope:m,passwords:b.passwords_needed_to_start,start_url:b.related.start,form:h}):(c.setUrl(b.related.start),c.post().success(function(){k("stop");var a=d.path().replace(/^\//,"").split("/")[0];"jobs"===a?m.refresh():d.path("/jobs")}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to start job. POST returned status: "+b})}))}).error(function(a,b){k("stop"),i(m,a,b,null,{hdr:"Error!",msg:"Failed to create job. POST returned status: "+b})})}var m=b.scope,n=b.id,o=b.template?b.template:null,p=d.path().replace(/^\//,"").split("/")[0],q=e(p)+n+"/";k("start"),c.setUrl(q),c.get().success(function(a){m.credential="",""===a.credential||null===a.credential?(k("stop"),m.credentialWatchRemove&&m.credentialWatchRemove(),m.credentialWatchRemove=m.$watch("credential",function(b,c){b!==c&&""!==m.credential&&null!==m.credential&&void 0!==m.credential&&(a.credential=m.credential,l(a))}),g({scope:m,form:j,current_item:null,list:f,field:"credential",hdr:"Credential Required"}),m.lookUpCredential()):l(a)}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to get job template details. GET returned status: "+b})})}}]).factory("ProjectUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","ProjectsForm","Wait",function(a,b,c,d,e,f,g,h,i){return function(b){var d=b.scope,j=b.project_id,k=e("projects")+j+"/update/";d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(){i("stop"),g("Update Started","The request to start the SCM update process was submitted. To monitor the update status, refresh the page by clicking the <em>Refresh</em> button.","alert-info"),d.refresh()}),d.removeSCMSubmit&&d.removeSCMSubmit(),d.removeSCMSubmit=d.$on("SCMSubmit",function(b,c,e){a({scope:d,passwords:c,start_url:k,form:h,extra_html:e})}),i("start"),c.setUrl(k),c.get().success(function(a){var b,c;if(i("stop"),a.can_update){for(c="",b=0;b<d.projects.length;b++)if(d.projects[b].id===j){c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_url">SCM URL</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_url" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_url+'" ',c+="/>",c+="</div>\n",c+="</div>\n",d.projects[b].scm_username&&(c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_username">SCM Username</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_username" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_username+'" ',c+="/>",c+="</div>\n",c+="</div>\n");break}c+="</p>",d.$emit("SCMSubmit",a.passwords_needed_to_update,c)}else g("Permission Denied","You do not have access to update this project. Please contact your system administrator.","alert-danger")}).error(function(a,b){f(d,a,b,null,{hdr:"Error!",msg:"Failed to get project update details: "+k+" GET status: "+b})})}}]).factory("InventoryUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","GroupForm","BuildTree","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(b){var d=b.scope,e=b.url,i=b.group_id,k=b.tree_id;d.removeHostReloadComplete&&d.removeHostReloadComplete(),d.removeHostReloadComplete=d.$on("HostReloadComplete",function(){j("stop"),g("Update Started",'Your request to start the inventory sync process was submitted. Monitor progress by clicking the <i class="fa fa-refresh fa-lg"></i> button.',"alert-info"),d.removeHostReloadComplete&&d.removeHostReloadComplete()}),d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(a,b){"started"===b&&(d.refreshGroups?(d.selected_tree_id=k,d.selected_group_id=i,d.refreshGroups()):d.refresh&&d.refresh(),d.$emit("HostReloadComplete"))}),d.removeInventorySubmit&&d.removeInventorySubmit(),d.removeInventorySubmit=d.$on("InventorySubmit",function(b,c,f){a({scope:d,passwords:c,start_url:e,form:h,extra_html:f})}),j("start"),c.setUrl(e),c.get().success(function(a){a.can_update?d.$emit("InventorySubmit",a.passwords_needed_to_update):(j("stop"),g("Permission Denied","You do not have access to run the update. Please contact your system administrator.","alert-danger"))}).error(function(a,b){j("stop"),f(d,a,b,null,{hdr:"Error!",msg:"Failed to get inventory_source details. "+e+"GET status: "+b})})}}]),angular.module("JobsHelper",["Utilities","FormGenerator","JobSummaryDefinition","InventoryHelper"]).factory("JobStatusToolTip",[function(){return function(a){var b;switch(a){case"successful":case"success":b="There were no failed tasks.";break;case"failed":b="Some tasks encountered errors.";break;case"canceled":b="Stopped by user request.";break;case"new":b="In queue, waiting on task manager.";break;case"waiting":b="SCM Update or Inventory Update is executing.";break;case"pending":b="Not in queue, waiting on task manager.";break;case"running":b="Playbook tasks executing."}return b}}]).factory("ShowJobSummary",["Rest","Wait","GetBasePath","FormatDate","ProcessErrors","GenerateForm","JobSummary","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h){return function(i){function j(a){var b=a.match(/\n/g),c=b?b.length:1;return c>p?20:c}var k,l,m,n,o,p,q,r,s=i.job_id,t=f,u=g;r='<div id="status-modal-dialog" title="Job '+s+'"><div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(r),k=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),l=$(document).width(),m=$("body").height(),l>1199?(n=675,o=750>m?m-20:750,p=20):1199>=l&&l>=768?(n=550,o=620>m?m-15:620,p=15):(n=l-20,o=500>m?m:500,p=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:n,height:o,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),h()},open:function(){b("stop")}}),b("start"),q=c("jobs")+s+"/",a.setUrl(q),a.get().success(function(a){var b;k.id=a.id,k.name=a.name,k.status=a.status,k.result_stdout=a.result_stdout,k.result_traceback=a.result_traceback,k.stdout_rows=j(k.result_stdout),k.traceback_rows=j(k.result_traceback),b=new Date(a.created),k.created=d(b),$("#status-modal-dialog").dialog("open")}).error(function(a,b){e(k,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})}}]),angular.module("LookUpHelper",["RestServices","Utilities","SearchHelper","PaginationHelpers","ListGenerator","ApiLoader"]).factory("LookUpInit",["Alert","Rest","GenerateList","SearchInit","PaginateInit","GetBasePath","FormatDate","Empty",function(a,b,c,d,e,f,g,h){return function(b){var i,j,k,l,m=b.scope,n=b.form,o=b.list,p=b.field,q=b.postAction;i=b.url?b.url:f("inventories"===o.name?"inventory":o.name),j=o.iterator.charAt(0).toUpperCase()+o.iterator.substring(1),k=b.hdr?b.hdr:"Select "+j,l=/\/$/.test(i)?i+"?":i+"&",l+=n.fields[p].sourceField+"__iexact=:value",$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-url",l),$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-source",p),m["lookUp"+j]=function(){var b=c,f=b.inject(o,{mode:"lookup",hdr:k});$("#lookup-modal").on("hidden.bs.modal",function(){f.searchCleanup&&f.searchCleanup(),(""===m[p]||null===m[p])&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]="",m.$$phase||m.$digest())}),f.selectAction=function(){var c,d=!1;for(c=0;c<f[o.name].length;c++)"1"===f[o.name][c].checked&&(d=!0,m[p]=f[o.name][c].id,m[n.name+"_form"]&&n.fields[p]&&n.fields[p].sourceModel&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]=f[o.name][c][n.fields[p].sourceField],m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField].$setValidity("awlookup",!0)),m[n.name+"_form"]&&m[n.name+"_form"].$setDirty(),b.hide());d===!1?a("Missing Selection","Oops, you failed to make a selection. Click on a row to make your selection, and then click the Select button."):q&&q()},f["toggle_"+o.iterator]=function(a){var b;for(b=0;b<m[o.name].length;b++)f[o.name][b].id===a?(f[o.name][b].checked="1",f[o.name][b].success_class="success"):(f[o.name][b].checked="0",f[o.name][b].success_class="")},d({scope:f,set:o.name,list:o,url:i}),e({scope:f,list:o,url:i,mode:"lookup"}),f.lookupPostRefreshRemove&&f.lookupPostRefreshRemove(),f.lookupPostRefreshRemove=m.$on("PostRefresh",function(){var a,b;for(a in o.fields)if(o.fields[a].type&&"date"===o.fields[a].type)for(b=0;b<m[o.name].length;b++)m[o.name][b][a]=g(new Date(m[o.name][b][a]));if(""!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&null!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField])for(b=0;b<f[o.name].length;b++)if(f[o.name][b][n.fields[p].sourceField]===m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]){m[p]=f[o.name][b].id;break}h(m[p])||f["toggle_"+o.iterator](m[p])}),f.search(o.iterator)}}}]),angular.module("PaginationHelpers",["Utilities","RefreshHelper","RefreshRelatedHelper"]).factory("PageRangeSetup",["Empty",function(a){return function(b){var c,d,e,f=b.scope,g=b.count,h=b.next,i=b.previous,j=b.iterator;for(f[j+"_page"]=1,f[j+"_num_pages"]=Math.ceil(g/f[j+"_page_size"]),f[j+"_num_pages"]=f[j+"_num_pages"]<=0?1:f[j+"_num_pages"],f[j+"_total_rows"]=g,a(h)&&i?f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1:h&&a(i)?f[j+"_page"]=1:h&&i&&(f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1),f[j+"_page_range"]=[],d=f[j+"_page"]>5?f[j+"_page"]-5:1,e=f[j+"_page"]<6?10<=f[j+"_num_pages"]?10:f[j+"_num_pages"]:f[j+"_page"]+4<f[j+"_num_pages"]?f[j+"_page"]+4:f[j+"_num_pages"],c=d;e>=c;c++)f[j+"_page_range"].push(c)}}]).factory("RelatedPaginateInit",["RefreshRelated","$cookieStore","Wait",function(a,b,c){return function(d){var e,f=d.scope,g=d.relatedSets,h=d.pageSize?d.pageSize:10;for(e in g)f[g[e].iterator+"_url"]=g[e].url,f[g[e].iterator+"_page"]=0,f[g[e].iterator+"_page_size"]=h;f.getPage=function(b,d,e){var g=f[e+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=f[e+"SearchParams"]?"&"+f[e+"SearchParams"]+"&page_size="+f[e+"_page_size"]:"page_size="+f[e+"PageSize"],c("start"),a({scope:f,set:d,iterator:e,url:g})},f.pageIsActive=function(a,b){return a===f[b+"_page"]?"active":""},f.changePageSize=function(c,d){f[d+"_page"]=1;var e=f[d+"_url"];b.put(d+"_page_size",f[d+"_page_size"]),e=e.replace(/\/\?.*$/,"/"),e+=f[d+"SearchParams"]?"?"+f[d+"SearchParams"]+"&page_size="+f[d+"_page_size"]:"?page_size="+f[d+"_page_size"],a({scope:f,set:c,iterator:d,url:e})}}}]).factory("PaginateInit",["Refresh","$cookieStore","Wait",function(a,b,c){return function(b){var d=b.scope,e=b.list,f=b.iterator?b.iterator:e.iterator,g=b.mode?b.mode:null;d[f+"_page"]=b.page?b.page:1,d[f+"_url"]=b.url,d[f+"_mode"]=g,d[f+"_page_size"]=b.pageSize?b.pageSize:"lookup"===g?5:20,d.getPage=function(b,e,f){var g=d[f+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=d[f+"SearchParams"]?"&"+d[f+"SearchParams"]+"&page_size="+d[f+"_page_size"]:"page_size="+d[f+"PageSize"],c("start"),a({scope:d,set:e,iterator:f,url:g})},d.pageIsActive=function(a,b){return a===d[b+"_page"]?"active":""},d.changePageSize=function(b,e){d[e+"_page"]=0;var f=d[e+"_url"].replace(/\?page_size\=\d+/,""),g=/\/$/.test(f)?"?":"&";f+=d[e+"SearchParams"]?g+d[e+"SearchParams"]+"&page_size="+d[e+"_page_size"]:g+"page_size="+d[e+"_page_size"],c("start"),a({scope:d,set:b,iterator:e,url:f})}}}]),angular.module("ParseHelper",[]).factory("ParseTypeChange",[function(){return function(a,b,c){var d=b?b:"variables",e=c?c:"parseType";a.blockParseTypeWatch=!1,a.blockVariableDataWatch=!1,a["remove"+d+"Watch"]&&a["remove"+d+"Watch"](),a["remove"+d+"Watch"]=a.$watch(e,function(b,c){var e;if(b!==c)if("json"===b)if(a[d]&&!/^---$/.test(a[d]))try{e=jsyaml.load(a[d]),a[d]=JSON.stringify(e,null," ")}catch(f){}else a[d]="{}";else if(a[d]&&!/^\{\}$/.test(a[d]))try{e=JSON.parse(a[d]),a[d]=jsyaml.safeDump(e)}catch(f){}else a[d]="---"})}}]),angular.module("PermissionsHelper",[]).factory("PermissionCategoryChange",[function(){return function(a){var b=a.scope,c=a.reset;"Inventory"===b.category?(b.projectrequired=!1,b.permissionTypeHelp="<dl>\n<dt>Read</dt>\n<dd>Only allow the user or team to view the inventory.</dd>\n<dt>Write</dt>\n<dd>Allow the user or team to modify hosts and groups contained in the inventory, add new hosts and groups, and perform inventory sync operations.\n<dt>Admin</dt>\n<dd>Allow the user or team full access to the inventory. This includes reading, writing, deletion of the inventory and inventory sync operations.</dd>\n</dl>\n"):(b.projectrequired=!0,b.permissionTypeHelp="<dl>\n<dt>Run</dt>\n<dd>Allow the user or team to perform a live deployment of the project against the inventory. In Run mode modules will be executed, and changes to the inventory will occur.</dd>\n<dt>Check</dt>\n<dd>Only allow the user or team to deploy the project against the inventory as a dry-run operation. In Check mode, module operations will only be simulated. No changes will occur.</dd>\n</dl>\n"),c&&(b.permission_type="Inventory"===b.category?"read":"run")}}]),angular.module("ProjectPathHelper",["RestServices","Utilities"]).factory("GetProjectPath",["Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d){return function(a){function e(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].value);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].value===d[c]&&e.push(a[b]);return e}var f=a.scope,g=a.master;f.showMissingPlaybooksAlert=!1,b.setUrl(c("config")),b.get().success(function(a){var b,c=[];
for(b=0;b<a.project_local_paths.length;b++)c.push({label:a.project_local_paths[b],value:a.project_local_paths[b]});if(f.local_path&&c.push({label:f.local_path,value:f.local_path}),f.project_local_paths=e(c),f.local_path)for(b=0;f.project_local_paths.length;b++)if(f.project_local_paths[b].value===f.local_path){f.local_path=f.project_local_paths[b];break}f.base_dir=a.project_base_dir,g.local_path=f.local_path,g.base_dir=f.base_dir,0===c.length&&(f.showMissingPlaybooksAlert=!0)}).error(function(a,b){d(f,a,b,null,{hdr:"Error!",msg:"Failed to access API config. GET status: "+b})})}}]),angular.module("ProjectsHelper",["RestServices","Utilities","ProjectStatusDefinition","ProjectFormDefinition"]).factory("ProjectStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","ProjectStatusForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,j,n,o=a.project_id,p=a.last_update,q=g,r=l;m("start"),b='<div id="status-modal-dialog"><div id="form-container" style="width: 100%;"></div></div>\n',$("#projects-modal-container").empty().append(b),c=q.inject(r,{mode:"edit",id:"form-container",related:!1,breadCrumbs:!1}),q.reset(),d=$(document).width(),f=$("body").height(),d>1199?(h=675,j=750>f?f-20:750,n=20):1199>=d&&d>=768?(h=550,j=620>f?f-15:620,n=15):(h=d-20,j=500>f?f:500,n=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:h,height:j,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#projects-modal-container").empty()},open:function(){m("stop")}}),e.setUrl(p),e.get().success(function(a){var b,d=a;for(b in r.fields)d[b]?c[b]="created"===b?k(new Date(d[b])):d[b]:d.summary_fields.project[b]&&(c[b]=d.summary_fields.project[b]);$("#status-modal-dialog").dialog({title:d.summary_fields.project.name+" Status"}).dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(c,a,b,r,{hdr:"Error!",msg:"Failed to retrieve status of project: "+o+". GET status: "+b})})}}]),angular.module("SelectionHelper",["Utilities","RestServices"]).factory("SelectionInit",["Rest","Alert","ProcessErrors","ReturnToCaller","Wait",function(a,b,c,d,e){return function(b){var f,g=b.scope,h=b.list,i=b.url,j=b.returnToCaller;f=void 0!==b.selected?b.selected:[],g.formModalActionDisabled=!0,g.disableSelectBtn=!0,g["toggle_"+h.iterator]=function(a,b){var c,d,e;for(c=0;c<g[h.name].length;c++)if(g[h.name][c].id===a)if("0"===g[h.name][c].checked&&!b||1===g[h.name][c].checked&&b){for(g[h.name][c].checked="1",g[h.name][c].success_class="success",e=!1,d=0;d<f.length;d++)if(f[d].id===a){e=!0;break}e||f.push(g[h.name][c])}else for(g[h.name][c].checked="0",g[h.name][c].success_class="",d=0;d<f.length;d++)if(f[d].id===a){f.splice(d,1);break}f.length>0?(g.formModalActionDisabled=!1,g.disableSelectBtn=!1):(g.formModalActionDisabled=!0,g.disableSelectBtn=!0)},g.finishSelection=function(){function b(){f=[],void 0!==j?d(j):($("#form-modal").modal("hide"),g.$emit("modalClosed"))}function k(b){a.post(b).success(function(a,b){m.push({result:"success",data:a,status:b}),g.$emit("callFinished")}).error(function(a,b,c){m.push({result:"error",data:a,status:b,headers:c}),g.$emit("callFinished")})}a.setUrl(i);var l,m=[];if(g.formModalActionDisabled=!0,g.disableSelectBtn=!0,e("start"),g.callFinishedRemove&&g.callFinishedRemove(),g.callFinishedRemove=g.$on("callFinished",function(){var a,d=0;if(m.length===f.length){for(e("stop"),a=0;a<m.length;a++)"error"===m[a].result&&(c(g,m[a].data,m[a].status,null,{hdr:"POST Failure",msg:"Failed to add "+h.iterator+". POST returned status: "+m[a].status}),d++);0===d&&b()}}),f.length>0)for(l=0;l<f.length;l++)k(f[l]);else b()},g.formModalAction=g.finishSelection,g.SelectPostRefreshRemove&&g.SelectPostRefreshRemove(),g.SelectPostRefreshRemove=g.$on("PostRefresh",function(){var a,b,c;if(g[h.name])for(a=0;a<g[h.name].length;a++){for(c=!1,b=0;b<f.length;b++)if(f[b].id===g[h.name][a].id){c=!0;break}c?(g[h.name][a].checked="1",g[h.name][a].success_class="success"):(g[h.name][a].checked="0",g[h.name][a].success_class="")}})}}]),angular.module("UserHelper",["UserFormDefinition"]).factory("ResetForm",["UserForm",function(a){return function(){a.fields.first_name.readonly=!1,a.fields.first_name.editRequired=!0,a.fields.last_name.readonly=!1,a.fields.last_name.editRequired=!0,a.fields.email.readonly=!1,a.fields.email.editRequired=!0,a.fields.organization.awRequiredWhen={variable:"orgrequired",init:!0},a.fields.organization.readonly=!1,a.fields.username.awRequiredWhen={variable:"not_ldap_user",init:!0},a.fields.username.readonly=!1,a.fields.password.editRequired=!1,a.fields.password.addRrequired=!0}}]),angular.module("APIDefaults",["RestServices","Utilities"]).factory("GetAPIDefaults",["Alert","Rest","$rootScope",function(a,b,c){return function(a){function d(a){var b,d={};for(b in c.apiDefaults)if(b===a||b.iterator===a){d[b]=c.apiDefaults[b];break}return d}function e(){if($.isEmptyObject(g)&&5>h)h++,setTimeout(1e3,e());else if("success"===g.status)return d(a)}var f,g={},h=0;return null===c.apiDefaults||void 0===c.apiDefaults?(f="/api/v1/",b.setUrl(f),b.get().success(function(a){var b,d=a;for(b in d)switch(b){case"organizations":d[b].iterator="organization";break;case"jobs":d[b].iterator="job";break;case"users":d[b].iterator="user";break;case"teams":d[b].iterator="team";break;case"hosts":d[b].iterator="host";break;case"groups":d[b].iterator="group";break;case"projects":d[b].iterator="project";break;case"inventories":d[b].iterator="inventory"}c.apiDefaults=d,g={status:"success"}}).error(function(a,b){g={status:"error",msg:"Call to "+f+" failed. GET returned status: "+b}}),e()):d(a)}}]),angular.module("InventoryHelper",["RestServices","Utilities","OrganizationListDefinition","ListGenerator","AuthService","InventoryHelper","InventoryFormDefinition","ParseHelper","SearchHelper"]).factory("WatchInventoryWindowResize",["ApplyEllipsis",function(a){return function(){var b;$(window).resize(function(){clearTimeout(b),b=setTimeout(function(){$("#groups_table .name-column").each(function(){var a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%";$(this).find(".group-name").css({width:e})}),a("#groups_table .group-name a"),a("#hosts_table .host-name a")},100)})}}]).factory("SaveInventory",["InventoryForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i){return function(e){var f,h,j,k=e.scope,l=a,m=g("inventory");i("start");try{if(h="json"===k.inventoryParseType?JSON.parse(k.inventory_variables):jsyaml.load(k.inventory_variables),"object"!=typeof h)throw"failed to return an object!";j={};for(f in l.fields)"inventory_variables"!==f&&(l.fields[f].realName?j[l.fields[f].realName]=k[f]:j[f]=k[f]);b.setUrl(m+k.inventory_id+"/"),b.put(j).success(function(a){k.inventory_variables?(b.setUrl(a.related.variable_data),b.put(h).success(function(){i("stop"),k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory varaibles. PUT returned status: "+b})})):k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory. POST returned status: "+b})})}catch(n){i("stop"),c("Error","Error parsing inventory variables. Parser returned: "+n)}}}]).factory("EditInventoryProperties",["InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","SaveInventory","Wait","Store","SearchInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(n){var o,p=n.scope,q=n.inventory_id,r=b,s=a,t={},u=l("CurrentSearchParams");s.well=!1,o=r.inject(s,{mode:"edit",modal:!0,related:!1,modal_show:!1}),s.well=!0,i(o,"inventory_variables","inventoryParseType"),o.inventoryParseType="yaml",o.formModalActionLabel="Save",o.formModalCancelShow=!0,o.formModalInfo=!1,o.formModalHeader="Inventory Properties",k("start"),c.setUrl(h("inventory")+q+"/"),c.get().success(function(a){var b,c;for(b in s.fields){if("inventory_variables"===b){if($.isEmptyObject(a.variables)||"{}"===a.variables||"null"===a.variables||""===a.variables)o.inventory_variables="---";else try{c=JSON.parse(a.variables),o.inventory_variables=jsyaml.safeDump(c)}catch(e){d("Variable Parse Error","Attempted to parse variables for inventory: "+q+". Parse returned: "+e),console&&(console.log(e),console.log("data:"),console.log(a.variables)),o.inventory_variables="---"}t.inventory_variables=o.variables}else"inventory_name"===b?(o[b]=a.name,t[b]=o[b]):"inventory_description"===b?(o[b]=a.description,t[b]=o[b]):a[b]&&(o[b]=a[b],t[b]=o[b]);s.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[s.fields[b].sourceModel]&&(o[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField],t[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField])}f({scope:o,form:s,current_item:o.organization,list:g,field:"organization"}),k("stop"),$("#form-modal").modal("show")}).error(function(a,b){e(o,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+q+". GET returned: "+b})}),o.removeInventorySaved&&o.removeInventorySaved(),o.removeInventorySaved=o.$on("InventorySaved",function(){$("#form-modal").modal("hide"),o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1}),p.$emit("RefreshInventories")}),o.cancelModal=function(){o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1})},o.formModalAction=function(){p.inventory_id=q,p.inventory_name=o.inventory_name,j({scope:o})}}}]),angular.module("md5Helper",["RestServices","Utilities"]).factory("md5Setup",[function(){return function(a){var b=a.scope,c=a.master,d=a.check_field,e=a.default_val;b[d]=e,c[d]=e,b.genMD5=function(a){var c=new Date;b[a]=$.md5("AnsibleWorks"+c.getTime())},b.toggleCallback=function(a){"false"===b.allow_callbacks&&(b[a]="")},b.selectAll=function(a){$('input[name="'+a+'"]').focus().select()}}}]),angular.module("RefreshRelatedHelper",["RestServices","Utilities","PaginationHelpers"]).factory("RefreshRelated",["ProcessErrors","Rest","Wait","PageRangeSetup",function(a,b,c,d){return function(e){var f=e.scope,g=e.set,h=e.iterator,i=e.url;b.setUrl(i),b.get().success(function(a){d({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[g]=a.results,f[h+"Loading"]=!1,f[h+"HoldInput"]=!1,c("stop"),f.$emit("related"+g)}).error(function(b,c){a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RefreshHelper",["RestServices","Utilities","PaginationHelpers"]).factory("Refresh",["ProcessErrors","Rest","Wait","Empty","PageRangeSetup",function(a,b,c,d,e){return function(d){var f=d.scope,g=d.set,h=d.iterator,i=d.url;f.current_url=i,b.setUrl(i),b.get().success(function(a){var b,d;for(e({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[h+"Loading"]=!1,b=1;3>=b;b++)d=1===b?"":b,f[h+"HoldInput"+d]=!1;f[g]=a.results,window.scrollTo(0,0),c("stop"),f.$emit("PostRefresh")}).error(function(b,c){f[h+"HoldInput"]=!1,a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RelatedSearchHelper",["RestServices","Utilities","RefreshRelatedHelper"]).factory("RelatedSearchInit",["$timeout","Alert","Rest","RefreshRelated","Wait",function(a,b,c,d,e){return function(a){function b(a){var b,c,d,e;for(e in h.related)if("tree"!==h.related[e].type&&(void 0===a||a===h.related[e].iterator)){b=h.related[e].iterator;for(d in h.related[e].fields)if(h.related[e].fields[d].key){f[b+"SearchField"]=d,f[b+"SearchFieldLabel"]=h.related[e].fields[d].label;break}f[b+"SortOrder"]=null,f[b+"SearchType"]="icontains",f[b+"SearchTypeLabel"]="Contains",f[b+"SearchValue"]=null,f[b+"SelectShow"]=!1,f[b+"ShowStartBtn"]=!0,f[b+"HideAllStartBtn"]=!1,c=f[b+"SearchField"],!h.related[e].fields[c].searchType||"boolean"!==h.related[e].fields[c].searchType&&"select"!==h.related[e].fields[c].searchType||(f[b+"SelectShow"]=!0,f[b+"SearchSelectOpts"]=h.fields[c].searchOptions),h.related[e].fields[c].searchType&&"gtzero"===h.related[e].fields[c].searchType&&(f[b+"InputHide"]=!0)}}var c,f=a.scope,g=a.relatedSets,h=a.form;b(),f.resetSearch=function(a){b(a),f.search(a)},f.setSearchField=function(a,b,c){var d,e;for(e in h.related)h.related[e].iterator===a&&(d=h.related[e].fields[b]);f[a+"SearchFieldLabel"]=c,f[a+"SearchField"]=b,f[a+"SearchValue"]="",f[a+"SelectShow"]=!1,f[a+"InputHide"]=!1,f[a+"ShowStartBtn"]=!0,void 0!==d.searchType&&"gtzero"===d.searchType&&(f[a+"InputHide"]=!0,f[a+"ShowStartBtn"]=!1),void 0===d.searchType||"boolean"!==d.searchType&&"select"!==d.searchType||(f[a+"SelectShow"]=!0,f[a+"SearchSelectOpts"]=d.searchOptions),void 0!==d.searchType&&"int"===d.searchType&&(f[a+"SearchType"]="int"),f.search(a)},f.setSearchType=function(a,b,c){f[a+"SearchTypeLabel"]=c,f[a+"SearchType"]=b,f.search(a)},f.startSearch=function(a,b){13===a.keyCode&&f.search(b)},f.search=function(a){e("start"),f[a+"Loading"]=!0,f[a+"HoldInput"]=!0,f[a+"SearchValue"]&&(f[a+"ShowStartBtn"]=!1),"host"===a&&"has_active_failures"===f.hostSearchField&&(f.hostFailureFilter=f.hostSearchSelectValue&&1===f.hostSearchSelectValue.value?!0:!1);var b,i,j,k,l;for(i in g)if(g[i].iterator===a){j=i,k=g[i].url;for(b in h.related[i].fields)h.related[i].fields[b].key&&(l=h.related[i].fields[b].desc?"-"+b:b);break}l=null===f[a+"SortOrder"]?l:f[a+"SortOrder"],c=h.related[j].fields[f[a+"SearchField"]],f[a+"SelectShow"]===!1&&""!==f[a+"SearchValue"]&&void 0!==f[a+"SearchValue"]||f[a+"SelectShow"]&&f[a+"SearchSelectValue"]||c.searchType&&"gtzero"===c.searchType?(f[a+"SearchParams"]=c.sourceModel?c.sourceModel+"__"+c.sourceField+"__":c.searchField?c.searchField+"__":f[a+"SearchField"]+"__",f[a+"SearchParams"]+=!c.searchType||"int"!==c.searchType&&"boolean"!==c.searchType?c.searchType&&"gtzero"===c.searchType?"gt=0":f[a+"SearchType"]+"=":"int=",!c.searchType||"boolean"!==c.searchType&&"select"!==c.searchType?(void 0===c.searchType||"gtzero"===c.searchType)&&(f[a+"SearchParams"]+=encodeURI(f[a+"SearchValue"])):f[a+"SearchParams"]+=f[a+"SearchSelectValue"].value,f[a+"SearchParams"]+=l?"&order_by="+encodeURI(l):""):f[a+"SearchParams"]=l?"order_by="+encodeURI(l):"",f[a+"Page"]=0,k+=k.match(/\/$/)?"?":"&",k+=f[a+"SearchParams"],k+=f[a+"PageSize"]?"&page_size="+f[a+"PageSize"]:"",d({scope:f,set:j,iterator:a,url:k})},f.sort=function(a,b){var c,d,e,g;$("."+a+" .list-header").each(function(){if($(this).attr("id")!==a+"-"+b+"-header"){var c=$(this).find("i");c.attr("class","icon-sort")}}),d=$("#"+a+"-"+b+"-header i"),e="",d.hasClass("icon-sort")?(d.removeClass("icon-sort"),d.addClass("icon-sort-up")):d.hasClass("icon-sort-up")?(d.removeClass("icon-sort-up"),d.addClass("icon-sort-down"),e="-"):d.hasClass("icon-sort-down")&&(d.removeClass("icon-sort-down"),d.addClass("icon-sort-up"));for(g in h.related)h.related[g].iterator===a&&(c=h.related[g].fields[b].sourceModel?e+h.related[g].fields[b].sourceModel+"__"+h.related[g].fields[b].sourceField:e+b);f[a+"SortOrder"]=c,f.search(a)}}}]),angular.module("SearchHelper",["RestServices","Utilities","RefreshHelper"]).factory("SearchInit",["Alert","Rest","Refresh","$location","GetBasePath","Empty","$timeout","Wait","Store",function(a,b,c,d,e,f,g,h,i){return function(a){function b(a){var b,c,d,e;e=void 0===a||1===a?"":a,l[p+"SearchField"+e]="",l[p+"SearchFieldLabel"+e]="";for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&o.fields[c].key){o.fields[c].sourceModel?(d=o.fields[c].sourceModel+"__"+o.fields[c].sourceField,r=o.fields[c].desc?"-"+d:d):r=o.fields[c].desc?"-"+c:c,(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)&&(l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label);break}if(f(l[p+"SearchField"+e]))for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)){l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label;break}l[p+"SearchType"+e]="icontains",l[p+"SearchTypeLabel"+e]="Contains",l[p+"SearchParams"+e]="",l[p+"SearchValue"+e]="",l[p+"SelectShow"+e]=!1,l[p+"HideSearchType"+e]=!1,l[p+"InputDisable"+e]=!1,l[p+"ExtraParms"+e]="",l[p+"ShowStartBtn"+e]=!0,l[p+"HideAllStartBtn"+e]=!1,l[p+"SearchPlaceholder"+e]=o.fields[l[p+"SearchField"+e]]&&o.fields[l[p+"SearchField"+e]].searchPlaceholder?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]:o.fields[l[p+"SearchField"+e]].searchPlaceholder:"Search",l[p+"InputDisable"+e]=o.fields[l[p+"SearchField"+e]]&&"all"===o.fields[l[p+"SearchField"+e]].searchObject?!0:!1,b=l[p+"SearchField"+e],o.fields[b]&&(!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType||(l[p+"SelectShow"+e]=!0,l[p+"SearchSelectOpts"+e]=o.fields[b].searchOptions),o.fields[b].searchType&&"int"===o.fields[b].searchType&&(l[p+"HideSearchType"+e]=!0),o.fields[b].searchType&&"gtzero"===o.fields[b].searchType&&(l[p+"InputHide"+e]=!0))}var e,g,j,k,l=a.scope,m=a.set,n=a.url,o=a.list,p=a.iterator?a.iterator:o.iterator,q=a.setWidgets===!1?!1:!0,r=a.sort_order||"";if(q)for(e=o.searchWidgets?o.searchWidgets:1,g=1;e>=g;g++)j=1===g?"":g,$("#search-widget-container"+j)&&b(g);k={set:m,defaultUrl:n,list:o,iterator:p,sort_order:r},i("CurrentSearchParams",k),l.setSearchField=function(a,b,c,d){var e=void 0===d||1===d?"":d;l[a+"SearchFieldLabel"+e]=c,l[a+"SearchField"+e]=b,l[a+"SearchValue"+e]="",l[a+"SelectShow"+e]=!1,l[a+"HideSearchType"+e]=!1,l[a+"InputHide"+e]=!1,l[a+"SearchType"+e]="icontains",l[a+"InputDisable"+e]="all"===o.fields[b].searchObject?!0:!1,l[a+"ShowStartBtn"+e]=!0,l[a+"SearchPlaceholder"+e]=o.fields[l[a+"SearchField"+e]]&&o.fields[l[a+"SearchField"+e]].searchPlaceholder?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]:o.fields[l[a+"SearchField"+e]].searchPlaceholder:"Search",o.fields[b].searchType&&"gtzero"===o.fields[b].searchType?(l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1,l.search(a)):o.fields[b].searchSingleValue?(l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"SearchSelectValue"+e]="boolean"===o.fields[b].searchType&&"true"===o.fields[b].searchValue?{value:1}:"boolean"===o.fields[b].searchType&&"false"===o.fields[b].searchValue?{value:0}:{value:o.fields[b].searchValue},l[a+"ShowStartBtn"+e]=!1):"in"===o.fields[b].searchType?(l[a+"SearchType"+e]="in",l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1):!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType&&"select_or"!==o.fields[b].searchType?o.fields[b].searchType&&"int"===o.fields[b].searchType?l[a+"SearchType"+e]="int":o.fields[b].searchType&&"isnull"===o.fields[b].searchType&&(l[a+"SearchType"+e]="isnull",l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]="true",l[a+"ShowStartBtn"+e]=!1):(l[a+"SelectShow"+e]=!0,l[a+"SearchSelectOpts"+e]=o.fields[b].searchOptions),l.search(a)},l.resetSearch=function(a){var c,e=o.searchWidgets?o.searchWidgets:1;for(c=1;e>=c;c++)b(c);window.location="/#"+d.path(),l.search(a)},l.removeDoSearch&&l.removeDoSearch(),l.removeDoSearch=l.$on("doSearch",function(a,b,d,e){l[b+"Loading"]=void 0===e||e===!0?!0:!1;var f,g=n;l[b+"Page"]=d?parseInt(d)-1:0,l[b+"SearchParams"]&&(g+=/\/$/.test(g)?"?"+l[b+"SearchParams"]:"&"+l[b+"SearchParams"]),f=/\/$/.test(g)?"?":"&",g+=l[b+"_page_size"]?f+"page_size="+l[b+"_page_size"]:"",d&&(f=/\/$/.test(g)?"?":"&",g+=f+"page="+d),l[b+"ExtraParms"]&&(f=/\/$/.test(g)?"?":"&",g+=f+l[b+"ExtraParms"]),g=g.replace(/\&\&/,"&"),c({scope:l,set:m,iterator:b,url:g})}),l.removePrepareSearch&&l.removePrepareSearch(),l.removePrepareSearch=l.$on("prepareSearch",function(a,b,c,d,e){h("start"),l[b+"SearchParams"]="";var f,g,i=o.searchWidgets?o.searchWidgets:1;for(f=1;i>=f;f++)g=1===f?"":f,$("#search-widget-container"+g)&&o.fields[l[b+"SearchField"+g]]&&o.fields[l[b+"SearchField"+g]].searchObject&&("all"!==o.fields[l[b+"SearchField"+g]].searchObject?(l[b+"HideAllStartBtn"+g]=!1,l[b+"SearchValue"+g]?(l[b+"ShowStartBtn"+g]=!1,l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+g]].searchOnID?"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__id="+l[b+"SearchValue"+g]:"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__name__icontains="+l[b+"SearchValue"+g]):(l[b+"ShowStartBtn"+g]=!0,l[b+"SearchParams"]+="&"+o.fields[l[b+"SearchField"+g]].searchField+"="+o.fields[l[b+"SearchField"+g]].searchObject)):l[b+"HideAllStartBtn"+g]=!0);l.$emit("prepareSearch2",b,c,d,e)}),l.removePrepareSearch2&&l.removePrepareSearch2(),l.removePrepareSearch2=l.$on("prepareSearch2",function(a,b,c,d,e){var g,h,i=o.searchWidgets?o.searchWidgets:1;for(g=1;i>=g;g++)h=1===g?"":g,l[b+"HoldInput"+h]=!0,$("#search-widget-container"+h)&&o.fields[l[b+"SearchField"+h]]&&!o.fields[l[b+"SearchField"+h]].searchObject&&(l[b+"ShowStartBtn"+h]=l[b+"SearchValue"+h]?!1:!0,(!l[b+"SelectShow"+h]&&!f(l[b+"SearchValue"+h])||l[b+"SelectShow"+h]&&l[b+"SearchSelectValue"+h]||o.fields[l[b+"SearchField"+h]]&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+h]].searchField?"&"+o.fields[l[b+"SearchField"+h]].searchField+"__":o.fields[l[b+"SearchField"+h]].sourceModel?"&"+o.fields[l[b+"SearchField"+h]].sourceModel+"__"+o.fields[l[b+"SearchField"+h]].sourceField+"__":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?"&"+l[b+"SearchField"+h]+"__":"&"+l[b+"SearchField"+h]+"__",l[b+"SearchParams"]+=!o.fields[l[b+"SearchField"+h]].searchType||"int"!==o.fields[l[b+"SearchField"+h]].searchType&&"boolean"!==o.fields[l[b+"SearchField"+h]].searchType?o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType?"gt=0":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?l[b+"SearchType"+h]+"=":"iexact=":"int=",!o.fields[l[b+"SearchField"+h]].searchType||"boolean"!==o.fields[l[b+"SearchField"+h]].searchType&&"select"!==o.fields[l[b+"SearchField"+h]].searchType?(!o.fields[l[b+"SearchField"+h]].searchType||o.fields[l[b+"SearchField"+h]].searchType&&"or"!==o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"!==o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=encodeURI(l[b+"SearchValue"+h])):l[b+"SearchParams"]+=l[b+"SearchSelectValue"+h].value));("inventory"===b&&l.inventoryFailureFilter||"host"===b&&l.hostFailureFilter)&&(l[b+"SearchParams"]+="&has_active_failures=true"),r&&(l[b+"SearchParams"]+=l[b+"SearchParams"]?"&":"",l[b+"SearchParams"]+="order_by="+encodeURI(r)),l.$emit("doSearch",b,c,d,e)}),l.startSearch=function(a,b){13===a.keyCode&&l.search(b)},l.search=function(a,b,c){c=void 0===c?!0:!1,c&&(l[m]=[]),l.$emit("prepareSearch",a,b,c)},l.sort=function(a){$(".list-header").each(function(){if($(this).attr("id")!==a+"-header"){var b=$(this).find("i");b.attr("class","fa fa-sort")}});var b=$("#"+a+"-header i"),c="";b.hasClass("fa-sort")?(b.removeClass("fa-sort"),b.addClass("fa-sort-up")):b.hasClass("fa-sort-up")?(b.removeClass("fa-sort-up"),b.addClass("fa-sort-down"),c="-"):b.hasClass("fa-sort-down")&&(b.removeClass("fa-sort-down"),b.addClass("fa-sort-up")),r=o.fields[a].searchField?c+o.fields[a].searchField:o.fields[a].sortField?c+o.fields[a].sortField:o.fields[a].sourceModel?c+o.fields[a].sourceModel+"__"+o.fields[a].sourceField:c+a,l.search(o.iterator)},l.searchCleanup=function(){l.removeDoSearch(),l.removePrepareSearch(),l.removePrepareSearch2()}}}]),angular.module("TeamHelper",["RestServices","Utilities","OrganizationListDefinition","SearchHelper","PaginationHelpers","ListGenerator"]).factory("SetTeamListeners",["Alert","Rest",function(a,b){return function(a){var c=a.scope,d=a.set,e=a.iterator;c.$on("TeamResultFound",function(a,b,f){var g,h,i,j;if(f.length===b.length){for(i="organization",j="organization_name",g=0;g<b.length;g++)for(h=0;h<f.length;h++)b[g][i]===f[h].id&&(b[g][j]=f[h].value);c[e+"SearchSpin"]=!1,c[d]=b}}),c.$on("TeamRefreshFinished",function(a,d){function e(a){b.setUrl(a),b.get().success(function(a){h.push({id:a.id,value:a.name}),c.$emit("TeamResultFound",d,h)}).error(function(){h.push({id:"error"}),c.$emit("TeamResultFound",d,h)})}var f,g,h=[];for(f=0;f<d.length;f++)g="/api/v1/organizations/"+d[f].organization+"/",e(g)})}}]).factory("TeamLookUpOrganizationInit",["Alert","Rest","OrganizationList","GenerateList","SearchInit","PaginateInit",function(a,b,c,d,e,f){return function(b){var g=b.scope;g.lookUpOrganization=function(){var b=c,h=d,i=h.inject(b,{mode:"lookup",hdr:"Select Organization"}),j="/api/v1/organizations/";i.selectAction=function(){var c,d=!1;for(c=0;c<i[b.name].length;c++)"success"===i[b.iterator+"_"+i[b.name][c].id+"_class"]&&(d=!0,g.organization=i[b.name][c].id,g.organization_name=i[b.name][c].name,g.team_form.$setDirty(),h.hide());d===!1&&a("No Selection","Click on a row to select an Organization before clicking the Select button.")},i.toggle_organization=function(a){if(i[b.name])for(var c=0;c<i[b.name].length;c++)i[b.iterator+"_"+i[b.name][c].id+"_class"]="";null!==a&&void 0!==a&&(i[b.iterator+"_"+a+"_class"]="success")},e({scope:i,set:b.name,list:b,url:j}),f({scope:i,list:b,url:j,mode:"lookup"}),g.search(b.iterator),i.toggle_organization(g.organization)}}}]),angular.module("AdminListDefinition",[]).value("AdminList",{name:"admins",iterator:"admin",selectTitle:"Add Administrators",editTitle:"Admins",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p>",base:"users",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{},fieldActions:{}}),angular.module("CloudCredentialsListDefinition",[]).value("CloudCredentialList",{name:"cloudcredentials",iterator:"cloudcredential",selectTitle:"Add Cloud Credentials",editTitle:"Cloud Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},team:{label:"Team",ngBind:"credential.team_name",sourceModel:"team",sourceField:"name",excludeModal:!0},user:{label:"User",ngBind:"credential.user_username",sourceModel:"user",sourceField:"username",excludeModal:!0}},actions:{add:{mode:"all",ngClick:"addCredential()","class":"btn-sm",awToolTip:"Create a new credential"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash-o",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("CredentialsListDefinition",[]).value("CredentialList",{name:"credentials",iterator:"credential",selectTitle:"Add Credentials",editTitle:"Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},kind:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0}},actions:{add:{mode:"all",ngClick:"addCredential()",awToolTip:"Create a new credential"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("GroupListDefinition",[]).value("GroupList",{name:"groups",iterator:"group",selectTitle:"Copy Groups",editTitle:"Groups",index:!0,well:!1,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{help:{awPopOver:"Choose groups by clicking on each group you wish to add. Click the <em>Select</em> button to add the groups to the selected inventory group.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Adding Groups"}},fieldActions:{edit:{label:"Edit",ngClick:"editGroup(group.id)",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit group",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteGroup(group.id, group.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete group",dataPlacement:"top"}}}),angular.module("HomeGroupListDefinition",[]).value("HomeGroupList",{name:"home_groups",iterator:"group",editTitle:"Groups",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Group",ngClick:"editGroup(group.id, group.inventory)",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-6 ellipsis"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ /#/inventories/' + group.inventory + '/' }}"},source:{label:"Source",searchType:"select",searchOptions:[{name:"ec2",value:"ec2"},{name:"none",value:""},{name:"rax",value:"rax"}],sourceModel:"inventory_source",sourceField:"source",searchOnly:!0},has_external_source:{label:"Has external source?",searchType:"in",searchValue:"ec2,rax",searchOnly:!0,sourceModel:"inventory_source",sourceField:"source"},has_active_failures:{label:"Has failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},last_update_failed:{label:"Update failed?",searchType:"select",searchSingleValue:!0,searchValue:"failed",searchOnly:!0,sourceModel:"inventory_source",sourceField:"status"},id:{label:"ID",searchOnly:!0}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",awToolTip:"{{ group.status_tooltip }}",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",dataPlacement:"top",ngHref:"/#/inventories/{{ group.inventory }}/",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",ngShow:"(group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate(group.id)",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"(group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{label:"Edit",mode:"all",ngClick:"editGroup(group.id)",awToolTip:"Edit group",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HomeHostListDefinition",[]).value("HomeHostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Name",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-7 ellipsis",ngClick:"editHost(host.id, host.name)"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ '/#/inventories/' + host.inventory }}"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Has failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_inventory_sources:{label:"Has external source?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},id:{label:"ID",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{label:"Edit",ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"}},actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HostListDefinition",[]).value("HostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,well:!1,fields:{name:{key:!0,label:"Host Name",linkTo:"/inventories/{{ inventory_id }}/hosts/{{ host.id }}"},description:{label:"Description"}},actions:{help:{awPopOver:"Select hosts by clicking on each host you wish to add. Add the selected hosts to the group by clicking the <em>Select</em> button.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Selecting Hosts"}},fieldActions:{edit:{label:"Edit",ngClick:"editHost({{ host.id }})",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit host",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete host",dataPlacement:"top"}}}),angular.module("InventoriesListDefinition",[]).value("InventoryList",{name:"inventories",iterator:"inventory",selectTitle:"Add Inventories",editTitle:"Inventories",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},organization:{label:"Organization",ngBind:"inventory.summary_fields.organization.name",linkTo:"/#/organizations/{{ inventory.organization }}",sourceModel:"organization",sourceField:"name",excludeModal:!0},has_inventory_sources:{label:"Cloud sourced?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_active_failures:{label:"Failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},inventory_sources_with_failures:{label:"Sync failures?",searchType:"gtzero",searchValue:"true",searchOnly:!0}},actions:{add:{mode:"all",ngClick:"addInventory()",awToolTip:"Create a new inventory"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{status:{ngHref:"inventory.status_link",iconClass:"{{ 'fa fa-cloud icon-cloud-' + inventory.status_class }}",awToolTip:"{{ inventory.status_tip }}",dataPlacement:"top"},failed_hosts:{ngHref:"inventory.failed_hosts_link",iconClass:"{{ 'fa icon-failures-' + inventory.failed_hosts_class }}",awToolTip:"{{ inventory.failed_hosts_tip }}",dataPlacement:"top"},edit:{label:"Edit",ngClick:"editInventoryProperties(inventory.id)",awToolTip:"Edit inventory",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteInventory(inventory.id, inventory.names')",awToolTip:"Delete inventory",dataPlacement:"top"}}}),angular.module("InventoryGroupsDefinition",[]).value("InventoryGroups",{name:"groups",iterator:"group",editTitle:"{{ inventory_name }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,filterBy:"{ show: true }","class":"table-condensed table-no-border",fields:{name:{label:"Groups",key:!0,ngClick:"showHosts(group.id,group.group_id, false)",ngClass:"group.selected_class",hasChildren:!0,columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",nosort:!0,awDroppable:"{{ group.isDroppable }}",awDraggable:"{{ group.isDraggable }}",dataContainment:"#groups_table",dataTreeId:"{{ group.id }}",dataGroupId:"{{ group.group_id }}",dataType:"group"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createGroup()",awToolTip:"Create a new group"},properties:{mode:"all",awToolTip:"Edit inventory properties",ngClick:"editInventoryProperties()"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refreshGroups()"},stream:{ngClick:"showGroupActivity()",awToolTip:"View Activity Stream",mode:"all"},help:{mode:"all",awToolTip:"Get help building your inventory",ngClick:"showGroupHelp()",id:"inventory-summary-help"}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",ngShow:"group.id > 1",awToolTip:"{{ group.status_tooltip }}",dataTipWatch:"group.launch_tooltip",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",ngShow:"group.id > 1",dataPlacement:"top",ngClick:"showHosts(group.id, group.group_id, group.show_failures)",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",dataTipWatch:"group.launch_tooltip",ngShow:"group.id > 1 && (group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate({{ group.id }})",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"group.id > 1 && (group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{mode:"all",ngClick:"editGroup({{ group.group_id + ',' + group.id }})",awToolTip:"Edit group",ngShow:"group.id > 1",dataPlacement:"top"},"delete":{mode:"all",ngClick:"deleteGroup({{ group.id + ',' + group.group_id }})",awToolTip:"Delete group",ngShow:"group.id != 1",dataPlacement:"top"}}}),angular.module("InventoryHostsDefinition",[]).value("InventoryHosts",{name:"hosts",iterator:"host",editTitle:"{{ selected_group }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,"class":"table-condensed table-no-border",fields:{name:{key:!0,label:"Hosts",ngClick:"editHost(host.id)",searchPlaceholder:"search_place_holder",columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",dataHostId:"{{ host.id }}",dataType:"host",awDraggable:"true"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"},"delete":{ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash",awToolTip:"Delete host",dataPlacement:"top"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createHost()",ngHide:"selected_tree_id == 1",awToolTip:"Create a new host"},stream:{ngClick:"showHostActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("JobEventsListDefinition",[]).value("JobEventList",{name:"jobevents",iterator:"jobevent",editTitle:"Job Events",index:!1,hover:!0,hasChildren:!0,filterBy:"{ show: true }",navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",active:!0,icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{created:{label:"Created On",columnClass:"col-lg-1 col-md-1 hidden-sm hidden-xs",key:!0,nosort:!0,searchable:!1,link:!1},status:{label:"Status",showValue:!1,columnClass:"col-sm-1 col-xs-2 text-center",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}],nosort:!0,searchable:!1,ngClick:"viewJobEvent({{ jobevent.id }})",awToolTip:"{{ jobevent.statusBadgeToolTip }}",dataPlacement:"top",badgeIcon:"fa icon-job-{{ jobevent.status }}",badgePlacement:"left",badgeToolTip:"{{ jobevent.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgClick:"viewJobEvent({{ jobevent.id }})"},event_display:{label:"Event",hasChildren:!0,ngClick:"toggleChildren(jobevent.id, jobevent.related.children)",nosort:!0,searchable:!1,ngClass:"{{ jobevent.class }}",appendHTML:"jobevent.event_detail"},host:{label:"Host",ngBind:"jobevent.summary_fields.host.name",ngHref:"{{ jobevent.hostLink }}",searchField:"hosts__name",nosort:!0,searchOnly:!1,id:"job-event-host-header","class":"break",columnClass:"col-lg-2 hidden-sm hidden-xs"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{columnClass:"col-sm-1 col-xs-2",view:{label:"View",ngClick:"viewJobEvent(jobevent.id)",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("JobHostDefinition",[]).value("JobHostList",{name:"jobhosts",iterator:"jobhost",editTitle:"All summaries",index:!0,hover:!0,navigationLinks:{ngHide:"host_id !== null",details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",active:!0,icon:"icon-laptop"}},fields:{job:{label:"Job ID",ngClick:"showJob(jobhost.job)",columnShow:"host_id !== null",key:!0,desc:!0},host:{label:"Host",key:!0,sourceModel:"host",sourceField:"name",ngBind:"jobhost.host_name",ngHref:"jobhost.hostLinkTo"},status:{label:"Status",badgeNgHref:"{{ jobhost.statusLinkTo }}",badgeIcon:"fa icon-job-{{ jobhost.status }}",badgePlacement:"left",badgeToolTip:"{{ jobhost.statusBadgeToolTip }}",badgeTipPlacement:"top",ngHref:"{{ jobhost.statusLinkTo }}",awToolTip:"{{ jobhost.statusBadgeToolTip }}",dataPlacement:"top",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}]},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},ok:{label:"Success",searchable:!1},changed:{label:"Changed",searchable:!1},failures:{label:"Failure",searchable:!0,searchLabel:"Contains failed events?",searchType:"gtzero"},dark:{label:"Unreachable",searchable:!0,searchType:"gtzero",searchLabel:"Contains unreachable hosts?"},skipped:{label:"Skipped",searchable:!1}},actions:{help:{awPopOver:"<dl>\n<dt>Success</dt><dd>Tasks successfully executed on the host.</dd>\n<dt>Changed</dt><dd>Actions taken on the host.</dd>\n<dt>Failure</dt><dd>Tasks that failed on the host.</dd>\n<dt>Unreachable</dt><dd>Times the ansible server could not reach the host.</dd>\n<dt>Skipped</dt><dd>Tasks bypassed and not performed on the host due to prior task failure or the host being unreachable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Job Host Summary",id:"jobhost-help-button"},refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refresh()",ngShow:"host_id == null"}},fieldActions:{}}),angular.module("JobTemplatesListDefinition",[]).value("JobTemplateList",{name:"job_templates",iterator:"job_template",selectTitle:"Add Job Template",editTitle:"Job Templates",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addJobTemplate()",basePaths:["job_templates"],awToolTip:"Create a new template"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editJobTemplate(job_template.id)",icon:"icon-edit",awToolTip:"Edit template","class":"btn-default btn-xs",dataPlacement:"top"},submit:{label:"Launch",icon:"icon-rocket",mode:"all","class":"btn-xs btn-success",ngClick:"submitJob(job_template.id)",awToolTip:"Start a job using this template",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteJobTemplate(job_template.id, job_template.name)",icon:"icon-trash","class":"btn-danger btn-xs",awToolTip:"Delete template",dataPlacement:"top"}}}),angular.module("JobsListDefinition",[]).value("JobList",{name:"jobs",iterator:"job",editTitle:"Jobs",index:!1,hover:!0,"class":"jobs-table",fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},inventory:{label:"Inventory ID",searchType:"int",searchOnly:!0},created:{label:"Create On",link:!1,searchable:!1},job_template:{label:"Job Template",ngBind:"job.summary_fields.job_template.name",ngHref:"{{ '/#/job_templates/' + job.job_template }}",sourceModel:"job_template",sourceField:"name"},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{ job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{submit:{label:"Relaunch",icon:"icon-rocket",mode:"all",ngClick:"submitJob(job.id, job.summary_fields.job_template.name)",awToolTip:"Start the job",dataPlacement:"top"},cancel:{label:"Stop",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Cancel a running or pending job",ngShow:"job.status == 'pending' || job.status == 'running' || job.status == 'waiting'",dataPlacement:"top"},"delete":{label:"Delete",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Delete the job",ngShow:"job.status != 'pending' && job.status != 'running' && job.status != 'waiting'",dataPlacement:"top"},dropdown:{type:"DropDown",label:"View",icon:"fa-search-plus","class":"btn-default btn-xs",options:[{ngClick:"editJob(job.id, job.summary_fields.job_template.name)",label:"Status"},{ngClick:"viewEvents(job.id, job.summary_fields.job_template.name)",label:"Events",ngHide:"job.status == 'new'"},{ngClick:"viewSummary(job.id, job.summary_fields.job_template.name)",label:"Host Summary",ngHide:"job.status == 'new'"}]}}}),angular.module("OrganizationListDefinition",[]).value("OrganizationList",{name:"organizations",iterator:"organization",selectTitle:"Add Organizations",editTitle:"Organizations",hover:!0,index:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addOrganization()",awToolTip:"Create a new organization"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editOrganization(organization.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit organization",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteOrganization(organization.id, organization.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete organization",dataPlacement:"top"}}}),angular.module("PermissionListDefinition",[]).value("PermissionList",{name:"permissions",iterator:"permission",selectTitle:"Add Permission",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',editTitle:"Permissions",index:!0,well:!0,fields:{name:{key:!0,label:"Name",ngClick:"editPermission(permission.id)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},actions:{add:{mode:"all",ngClick:"addPermission()",awToolTip:"Add a new permission",ngShow:"PermissionAddAllowed"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editPermission(permission.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit permission",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deletePermission(permission.id, permission.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete permission",ngShow:"PermissionAddAllowed",dataPlacement:"top"}}}),angular.module("ProjectsListDefinition",[]).value("ProjectList",{name:"projects",iterator:"project",selectTitle:"Add Project",editTitle:"Projects",selectInstructions:"<p>Select existing projects by clicking each project or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new project by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",columnClass:"hidden-sm hidden-xs",excludeModal:!0},scm_type:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0},status:{label:"Status",ngClick:"showSCMStatus(project.id)",awToolTip:"View details of last SCM Update",dataPlacement:"top",badgeIcon:"{{ 'fa icon-failures-' + project.badge }}",badgePlacement:"left",searchType:"select",searchOptions:[],excludeModal:!0},last_updated:{label:"Last Updated",type:"date",excludeModal:!0,searchable:!1}},actions:{add:{mode:"all",ngClick:"addProject()",awToolTip:"Create a new project"},help:{awPopOver:"<dl>\n<dt>Updating</dt><dd>A source control update is in progress.</dd>\n<dt>Never Updated</dt><dd>This project has not yet been updated from source control.</dd>\n<dt>Failed</dt><dd>An error occurred during the most recent source control update, click the status text for more information.</dd>\n<dt>Successful</dt><dd>TThe latest source control update completed successfully.</dd>\n<dt>Missing</dt><dd>The previously configured local project directory is missing.</dd>\n<dt>N/A</dt><dd>The project is not linked to source control, so updates are not applicable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all",awToolTip:"Click for help",awTipPlacement:"top"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editProject(project.id)",awToolTip:"Edit project properties",dataPlacement:"top"},scm_update:{label:"Update",ngClick:"SCMUpdate(project.id)",awToolTip:"{{ project.scm_update_tooltip }}",ngClass:"project.scm_type_class",dataPlacement:"top"},cancel:{label:"Stop",ngClick:"cancelUpdate(project.id, project.name)",awToolTip:"Cancel a running SCM update process",ngShow:"project.status == 'updating'",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteProject(project.id, project.name)",awToolTip:"Permanently remove project from the database",ngShow:"project.status !== 'updating'",dataPlacement:"top"}}}),angular.module("StreamListDefinition",[]).value("StreamList",{name:"activities",iterator:"activity",editTitle:"Activity Stream",selectInstructions:"",index:!1,hover:!0,"class":"table-condensed",searchWidgets:3,fields:{timestamp:{label:"Event Time",key:!0,desc:!0,noLink:!0,searchable:!1},user:{label:"Initiated by",ngBindHtml:"activity.user",sourceModel:"actor",sourceField:"username",searchPlaceholder:"Username",searchWidget:1},description:{label:"Action",ngBindHtml:"activity.description",nosort:!0,searchable:!1,columnClass:"col-lg-7"},system_event:{label:"System event",searchOnly:!0,searchType:"isnull",sourceModel:"actor",sourceField:"username",searchWidget:1},all_objects:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All resources",searchWidget:2},credential_search:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Credential name",searchWidget:2,searchField:"object1"},group_search:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Group name",searchWidget:2,searchField:"object1"},host_search:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Host name",searchWidget:2,searchField:"object1"},inventory_search:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Inventory name",searchWidget:2,searchField:"object1"},job_template_search:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Job template name",searchWidget:2,searchField:"object1"},job_search:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:2,searchField:"object1"},organization_search:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Organization name",searchWidget:2,searchField:"object1"},project_search:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Project name",searchWidget:2,searchField:"object1"},user_search:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Primary username",searchWidget:2,searchField:"object1"},all_objects3:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All related resources",searchWidget:3,searchField:"object2"},credential_search3:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Related credential name",searchWidget:3,searchField:"object2"},group_search3:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Related group name",searchWidget:3,searchField:"object2"},host_search3:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Related host name",searchWidget:3,searchField:"object2"},inventory_search3:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Related inventory name",searchWidget:3,searchField:"object2"},job_search3:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:3,searchField:"object2"},job_template_search3:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Related job template name",searchWidget:3,searchField:"object2"},organization_search3:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Related organization name",searchWidget:3,searchField:"object2"},project_search3:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Related project name",searchWidget:3,searchField:"object2"},user_search3:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Related username",searchWidget:3,searchField:"object2"}},actions:{refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refreshStream()"},close:{mode:"all",awToolTip:"Close Activity Stream view",ngClick:"closeStream()"}},fieldActions:{view:{label:"View",ngClick:"showDetail(activity.id)",icon:"fa-zoom-in","class":"btn-default btn-xs",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("TeamsListDefinition",[]).value("TeamList",{name:"teams",iterator:"team",selectTitle:"Add Team",editTitle:"Teams",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"},organization:{label:"Organization",ngBind:"team.organization_name",sourceModel:"organization",sourceField:"name"}},actions:{add:{mode:"all",ngClick:"addTeam()",awToolTip:"Create a new team"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editTeam(team.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit team",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteTeam(team.id, team.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete team",dataPlacement:"top"}}}),angular.module("UserListDefinition",[]).value("UserList",{name:"users",iterator:"user",selectTitle:"Add Users",editTitle:"Users",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>When available, a brand new user can be created by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{add:{label:"Create New",mode:"all",ngClick:"addUser()",basePaths:["organizations","users"],"class":"btn-xs",awToolTip:"Create a new user"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editUser(user.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit user",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteUser(user.id, user.username)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete user",dataPlacement:"top"}}}),angular.module("InventorySyncStatusWidget",["RestServices","Utilities"]).factory("InventorySyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b=a.label,c=a.count,d=a.fail,e=a.link,f=a.fail_link,g="<tr>\n";
return g+='<td><a href="'+e+'"',g+="Hosts"===b||"Groups"===b?' class="pad-left-sm" ':"",g+=">"+b+"</a></td>\n",g+='<td class="',g+=d>0?"failed-column":"zero-column",g+=' text-right">',g+='<a href="'+f+'">'+d+"</a>",g+="</td>\n",g+='<td class="text-right">',g+='<a href="'+e+'">'+c+"</a>",g+="</td></tr>\n"}var d,e,f,g,h,i=a.scope,j=a.target,k=a.dashboard;if(d='<div class="panel panel-default">\n',d+='<div class="panel-heading">Inventory Sync Status</div>\n',d+='<div class="panel-body">\n',d+='<table class="table table-condensed table-hover">\n',d+="<thead>\n",d+="<tr>\n",d+='<th class="col-md-4 col-lg-3"></th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',d+="</tr>\n",d+="</thead>\n",d+="<tbody>\n",d+=c({label:"Inventories",count:k.inventories&&k.inventories.total_with_inventory_source?k.inventories.total_with_inventory_source:0,fail:k.inventories&&k.inventories.inventory_failed?k.inventories.inventory_failed:0,link:"/#/inventories/?has_inventory_sources=true",fail_link:"/#/inventories/?inventory_sources_with_failures=true"}),e=0,f=0,k.inventory_sources)for(h in k.inventory_sources)e+=k.inventory_sources[h].total?k.inventory_sources[h].total:0,f+=k.inventory_sources[h].failed?k.inventory_sources[h].failed:0;d+=c({label:"Groups",count:e,fail:f,link:"/#/home/groups/?has_external_source=true",fail_link:"/#/home/groups/?status=failed"});for(h in k.inventory_sources)k.inventory_sources[h].total&&(d+=c({label:k.inventory_sources[h].label,count:k.inventory_sources[h].total?k.inventory_sources[h].total:0,fail:k.inventory_sources[h].failed?k.inventory_sources[h].failed:0,link:"/#/home/groups/?source="+h,fail_link:"/#/home/groups/?status=failed&source="+h}));d+="</tbody>\n",d+="</table>\n",d+="</div>\n",d+="</div>\n",d+="</div>\n",g=angular.element(document.getElementById(j)),g.html(d),b(g)(i),i.$emit("WidgetLoaded")}}]),angular.module("JobStatusWidget",["RestServices","Utilities"]).factory("JobStatus",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'"',b+="Hosts"===c||"Groups"===c?' class="pad-left-sm" ':"",b+=">"+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e=a.scope,f=a.target,g=a.dashboard,h="";h='<div class="panel panel-default">\n',h+='<div class="panel-heading">Job Status</div>\n',h+='<div class="panel-body">\n',h+='<table class="table table-condensed table-hover">\n',h+="<thead>\n",h+="<tr>\n",h+='<th class="col-md-4 col-lg-3"></th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',h+="</tr>\n",h+="</thead>\n",h+="<tbody>\n",h+=c({label:"Jobs",link:"/#/jobs",count:g.jobs&&g.jobs.total?g.jobs.total:0,fail:g.jobs&&g.jobs.failed?g.jobs.failed:0,fail_link:"/#/jobs/?status=failed"}),h+=c({label:"Inventories",link:"/#/inventories",count:g.inventories&&g.inventories.total?g.inventories.total:0,fail:g.inventories&&g.inventories.job_failed?g.inventories.job_failed:0,fail_link:"/#/inventories/?has_active_failures=true"}),h+=c({label:"Groups",link:"/#/home/groups",count:g.groups&&g.groups.total?g.groups.total:0,fail:g.groups&&g.groups.job_failed?g.groups.job_failed:0,fail_link:"/#/home/groups/?has_active_failures=true"}),h+=c({label:"Hosts",link:"/#/home/hosts",count:g.hosts&&g.hosts.total?g.hosts.total:0,fail:g.hosts&&g.hosts.failed?g.hosts.failed:0,fail_link:"/#/home/hosts/?has_active_failures=true"}),h+="</tbody>\n",h+="</table>\n",h+="</div>\n",h+="</div>\n",h+="</div>\n",d=angular.element(document.getElementById(f)),d.html(h),b(d)(e),e.$emit("WidgetLoaded")}}]),angular.module("ObjectCountWidget",["RestServices","Utilities"]).factory("ObjectCount",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.count;return b+="<tr>\n",b+='<td class="capitalize"><a href="'+d+'"',b+="hosts"===c||"groups"===c?' class="pad-left-sm" ':"",b+=">"+c.replace(/\_/g," ")+"</a></td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+e+"</a>",b+="</td></tr>\n"}var d,e,f,g=a.scope,h=a.target,i=a.dashboard,j=["organizations","users","teams","credentials","projects","inventories","groups","hosts","job_templates","jobs"];for(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">System Summary</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-5 col-lg-4"></th>\n',e+='<th class="col-md-1 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",d=0;d<j.length;d++)e+=c({label:j[d],link:"/#/"+("hosts"===j[d]||"groups"===j[d]?"home/"+j[d]:j[d]),count:i[j[d]]&&i[j[d]].total?i[j[d]].total:0});e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",f=angular.element(document.getElementById(h)),f.html(e),b(f)(g),g.$emit("WidgetLoaded")}}]),angular.module("SCMSyncStatusWidget",["RestServices","Utilities"]).factory("SCMSyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'">'+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e,f,g,h,i,j=a.scope,k=a.target,l=a.dashboard;if(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">Project SCM Status</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-4 col-lg-3"></th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",f=0,l.scm_types)for(h in l.scm_types)f+=l.scm_types[h].total?l.scm_types[h].total:0;e+=c({label:"Projects",link:"/#/projects",count:f,fail:l.projects&&l.projects.failed?l.projects.failed:0,fail_link:"/#/projects/?status=failed"}),i=[];for(h in l.scm_types)i.push(h);for(i.sort(),d=0;d<i.length;d++)h=i[d],l.scm_types[h].total&&(e+=c({label:l.scm_types[h].label,link:"/#/projects/?scm_type="+h,count:l.scm_types[h].total?l.scm_types[h].total:0,fail:l.scm_types[h].failed?l.scm_types[h].failed:0,fail_link:"/#/projects/?scm_type="+h+"&status=failed"}));e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",e+="</div>\n",g=angular.element(document.getElementById(k)),g.html(e),b(g)(j),j.$emit("WidgetLoaded")}}]),angular.module("StreamWidget",["RestServices","Utilities","StreamListDefinition","SearchHelper","PaginationHelpers","RefreshHelper","ListGenerator","StreamWidget","AuthService"]).factory("setStreamHeight",[function(){return function(){var a=$("#stream-content").height(),b=parseInt($("#tab-content-container").css("min-height").replace(/px/,"")),c=a>b?a:b;$("#tab-content-container").css({"min-height":c})}}]).factory("ShowStream",["setStreamHeight","Authorization",function(a){return function(){var b=$("#stream-container");b.css({position:"absolute",top:0,left:0,width:"100%","min-height":"100%","background-color":"#FFF"}),a(),b.show("slide",{direction:"left"},{duration:500,queue:!1})}}]).factory("HideStream",["LoadBreadCrumbs",function(a){return function(){var b=$("#stream-container");b.hide("slide",{direction:"left"},{duration:500,queue:!1}),setTimeout(function(){b.detach(),b.empty(),b.unbind(),$("#tab-content-container").css({"min-height":0})},500),a()}}]).factory("StreamBreadCrumbs",["$rootScope","$location",function(a,b){return function(){a.breadcrumbs=[];var c,d,e,f,g=b.path().split("/");for(g.splice(0,1),e=0;e<g.length;e++){if(/^\d+/.test(g[e])){for(c="",d="",f=0;e>=f;f++)c+="/"+g[f];for(f=0;f<a.crumbCache.length;f++)if(a.crumbCache[f].path===c){d=a.crumbCache[f].title;break}d||(d=g[e-1].substr(0,g[e-1].length-1),d=d.charAt(0).toUpperCase()+d.slice(1),d="Inventorie"===d?"Inventory":d)}else{if(c="",d="",e>0)for(f=0;e>=f;f++)c+="/"+g[f];else c="/"+g[e];d=g[e],d=d.charAt(0).toUpperCase()+d.slice(1)}a.breadcrumbs.push({path:c,title:d,ngClick:"closeStream('"+c+"')"})}}}]).factory("FixUrl",[function(){return function(a){return a.replace(/\/api\/v1\//,"/#/")}}]).factory("BuildUrl",[function(){return function(a){var b="/#/";switch(a.base){case"group":case"host":b+="home/"+a.base+"s/?id="+a.id;break;case"inventory":b+="inventories/"+a.id+"/";break;default:b+=a.base+"s/"+a.id+"/"}return b}}]).factory("BuildDescription",["FixUrl","BuildUrl",function(a,b){return function(a){function c(a){return a.replace(/^_deleted_\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d+\+\d+:\d+_/,"")}var d,e,f,g,h,i,j,k;d=a.operation,d+=/e$/.test(a.operation)?"d ":"ed ",e=d,f=a.object1,g=a.object2,h=a.summary_fields[f]?a.summary_fields[f][0]:null,i=f===g?a.summary_fields[f][1]:a.summary_fields[g]?a.summary_fields[g][0]:null,("user"===f||"user"===g)&&(a.summary_fields.user[0].name=a.summary_fields.user[0].username),i&&i.name&&!/^_delete/.test(i.name)?(i.base=g,d+=g+' <a href="'+b(i)+'">'+i.name+"</a>"+("disassociate"===a.operation?" from ":" to "),e+=g+" "+i.name+("disassociate"===a.operation?" from ":" to ")):g&&(j="",i&&i.name&&(j=" "+c(i.name)),d+=g+j+("disassociate"===a.operation?" from ":" to "),e+=g+j+("disassociate"===a.operation?" from ":" to ")),h&&h.name&&!/^\_delete/.test(h.name)?(h.base=f,d+=f+' <a href="'+b(h)+'">'+h.name+"</a>",e+=f+" "+h.name):f&&(j="",k="",!h||!h.name||h&&h.name&&/^_delete/.test(h.name)?a.changes&&a.changes.name?"string"==typeof a.changes.name?(j=" "+a.changes.name,k=j):"object"==typeof a.changes.name&&Array.isArray(a.changes.name)&&(j=" "+a.changes.name[0],k=j):"job"===f&&h&&a.changes&&a.changes.job_template?"delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+" "+a.changes.job_template+"</a>",k=" "+h.id+" "+a.changes.job_template):(j=" "+h.id+" "+a.changes.job_template,k=j):"job"===f&&h&&("delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+"</a>",k=" "+h.id):(j=" "+h.id,k=j)):h&&h.name&&(j=" "+c(h.name),k=j),d+=f+j,e+=f+k),a.description=d,a.description_nolink=e}}]).factory("ShowDetail",["$rootScope","Rest","Alert","GenerateForm","ProcessErrors","GetBasePath","FormatDate","ActivityDetailForm","Empty","Find",function(a,b,c,d,e,f,g,h,i,j){return function(a){var b,c,e,f=a.activity_id,i=a.scope,k=d,l=h,m=j({list:i.activities,key:"id",val:f});m&&(m.changes_stringified=JSON.stringify(m.changes,null,"	"),b=m.changes_stringified.match(/\n/g),c=b?b.length:1,c=1>c?3:10,l.fields.changes.rows=10,e=k.inject(l,{mode:"edit",modal:!0,related:!1}),e.changes=m.changes_stringified,e.user=(m.summary_fields.actor?m.summary_fields.actor.username:"system")+" on "+g(new Date(m.timestamps)),e.operation=m.description_nolink,e.formModalAction=function(){$("#form-modal").modal("hide")},$("#form-modal").on("show.bs.modal",function(){$("#form-modal-body").css({width:"auto",height:"auto","max-height":"100%"})}),e.formModalActionLabel="OK",e.formModalCancelShow=!1,e.formModalInfo=!1,e.formModalHeader="Event "+m.id,e.$$phase||e.$digest())}}]).factory("Stream",["$rootScope","$location","Rest","GetBasePath","ProcessErrors","Wait","StreamList","SearchInit","PaginateInit","GenerateList","FormatDate","ShowStream","HideStream","BuildDescription","FixUrl","BuildUrl","ShowDetail","StreamBreadCrumbs","setStreamHeight","Find","Store",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return function(c){var e,f,o,v,w=g,x=d("activity_stream"),y=j,z=b.path().replace(/^\//,"").split("/")[0],A=c.scope,B=u("CurrentSearchParams"),C=c&&c.inventory_name?c.inventory_name:null,D=c&&c.url?c.url:null;a.flashMessage=null,D?x=D:"/home"!==b.path()&&(e="inventories"===z?"inventory":z.replace(/s$/,""),f=b.path().split("/"),f.splice(0,1),f.length>1&&/^\d+/.test(f[f.length-1])?(e=f[f.length-2],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?"+e+"__id="+f[f.length-1]):f.length>1?(e=f[f.length-1],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?or__object1="+e+"&or__object2="+e):x+="?or__object1="+e+"&or__object2="+e),$("#tab-content-container").append('<div id="stream-container"><div id="stream-content"></div></div><!-- Stream widget -->'),r(),C&&(o=t({list:a.breadcrumbs,key:"title",val:"{{ inventory_name }}"}),o&&(o.title=C)),l(),v=y.inject(w,{mode:"edit",id:"stream-content",searchSize:"col-lg-3",secondWidget:!0,activityStream:!0}),v.streamTitle=c&&c.title?c.title:null,v.closeStream=function(a){m(),v.searchCleanup&&v.searchCleanup(),B&&h({scope:A,set:B.set,list:B.list,url:B.defaultUrl,iterator:B.iterator,sort_order:B.sort_order,setWidgets:!1}),a&&b.path(a)},v.refreshStream=function(){v.search(w.iterator)},v.showDetail=function(a){q({scope:v,activity_id:a})},v.removeStreamPostRefresh&&v.removeStreamPostRefresh(),v.removeStreamPostRefresh=v.$on("PostRefresh",function(){var a,b,c,d,e,f;for(a=0;a<v.activities.length;a++)b=new Date(v.activities[a].timestamp),v.activities[a].timestamp=k(b),v.activities[a].user=v.activities[a].summary_fields.actor?'<a href="/#/users/'+v.activities[a].summary_fields.actor.id+'">'+v.activities[a].summary_fields.actor.username+"</a>":"system",d=/^\_delete/,e=v.activities[a].object1,f=v.activities[a].object2,e&&v.activities[a].summary_fields[e]&&v.activities[a].summary_fields[e].name?d.test(v.activities[a].summary_fields[e].name)?v.activities[a].objects=v.activities[a].summary_fields[e].name:(c=p(v.activities[a].summary_fields.object1),v.activities[a].objects='<a href="'+c+'">'+v.activities[a].summary_fields[e].name+"</a>"):v.activities[a].object1&&(v.activities[a].objects=v.activities[a].object1),f&&v.activities[a].summary_fields[f]&&v.activities[a].summary_fields[f].name?d.test(v.activities[a].summary_fields.object2.name)?v.activities[a].objects+=","+v.activities[a].summary_fields[f].name:(c=p(v.activities[a].summary_fields.object2),v.activities[a].objects+=', <a href="'+c+'">'+v.activities[a].summary_fields[f].name+"</a>"):v.activities[a].object2&&(v.activities[a].objects+=", "+v.activities[a].object2),n(v.activities[a]);setTimeout(function(){s()},500)}),h({scope:v,set:w.name,list:w,url:x}),i({scope:v,list:w,url:x}),v.search(w.iterator)}}]),angular.module("AuthService",["ngCookies","Utilities"]).factory("Authorization",["$http","$rootScope","$location","$cookieStore","GetBasePath",function(a,b,c,d,e){return{setToken:function(a,c){d.remove("token"),d.remove("token_expires"),d.remove("userLoggedIn"),d.put("token",a),d.put("token_expires",c),d.put("userLoggedIn",!0),d.put("sessionExpired",!1),b.token=a,b.userLoggedIn=!0,b.token_expires=c,b.sessionExpired=!1},isUserLoggedIn:function(){return void 0===b.userLoggedIn&&(b.userLoggedIn=d.get("userLoggedIn"),b.sessionExpired=d.get("sessionExpired")),b.userLoggedIn},getToken:function(){return b.token?b.token:d.get("token")},retrieveToken:function(b,c){return a({method:"POST",url:e("authtoken"),data:{username:b,password:c}})},logout:function(){var a=angular.element(document.getElementById("main-view")).scope();a.$destroy(),b.$destroy(),d.remove("accordions"),d.remove("token"),d.remove("token_expires"),d.remove("current_user"),d.remove("lastPath"),d.put("userLoggedIn",!1),d.put("sessionExpired",!1),d.remove("lastPath","/home"),b.current_user={},b.license_tested=void 0,b.userLoggedIn=!1,b.sessionExpired=!1,b.token=null,b.token_expires=null,b.lastPath="/home"},getLicense:function(){return a({method:"GET",url:e("config"),headers:{Authorization:"Token "+this.getToken()}})},setLicense:function(a){a.tested=!1,d.put("license",a)},licenseTested:function(){var a,c;return void 0!==b.license_tested?c=b.license_tested:(a=d.get("license"),c=a&&void 0!==a.tested?a.tested:!1),c},getUser:function(){return a({method:"GET",url:"/api/v1/me/",headers:{Authorization:"Token "+this.getToken()}})},setUserInfo:function(a){b.current_user=a.results[0],d.put("current_user",a.results[0])},restoreUserInfo:function(){b.current_user=d.get("current_user")},getUserInfo:function(a){var c;return b.current_user?b.current_user[a]:(this.restoreUserInfo(),c=d.get("current_user"),c[a])}}}]),angular.module("InventoryTree",["Utilities","RestServices","GroupsHelper","PromptDialog"]).factory("SortNodes",[function(){return function(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].name);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].name===d[c]&&e.push(a[b]);return e}}]).factory("BuildTree",["Rest","GetBasePath","ProcessErrors","SortNodes","Wait","GetSyncStatusMsg","GetHostsStatusMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){var b,c,e=[],f=d(a);for(b=0;b<f.length;b++)e.push(f[b].id);c={name:"All Hosts",id:1,group_id:null,parent:0,description:"",show:!0,ngicon:null,has_children:!1,related:{},selected_class:"",show_failures:!1,isDraggable:!1,isDroppable:!0,children:e},q.push(c)}function j(a,b,c){var e,h,i,k,n,o,s=d(a);for(e=0;e<s.length;e++){for(r++,k=f({status:s[e].summary_fields.inventory_source.status}),n=g({active_failures:s[e].hosts_with_active_failures,total_hosts:s[e].total_hosts,inventory_id:l,group_id:s[e].id}),i=[],h=0;h<s[e].children.length;h++)i.push(s[e].children[h].id);o={name:s[e].name,has_active_failures:s[e].has_active_failures,total_hosts:s[e].total_hosts,hosts_with_active_failures:s[e].hosts_with_active_failures,total_groups:s[e].total_groups,groups_with_active_failures:s[e].groups_with_active_failures,parent:b,has_children:s[e].children.length>0?!0:!1,has_inventory_sources:s[e].has_inventory_sources,id:r,source:s[e].summary_fields.inventory_source.source,group_id:s[e].id,event_level:c,children:i,ngicon:s[e].children.length>0?"fa fa-minus-square-o node-toggle":"fa fa-square-o node-no-toggle",ngclick:"toggle("+r+")",related:{children:s[e].children.length>0?s[e].related.children:"",inventory_source:s[e].related.inventory_source},status:s[e].summary_fields.inventory_source.status,status_class:k["class"],status_tooltip:k.tooltip,launch_tooltip:k.launch_tip,launch_class:k.launch_class,hosts_status_tip:n.tooltip,show_failures:n.failures,hosts_status_class:n["class"],selected_class:"",show:!0,isDraggable:!0,isDroppable:!0},q.push(o),p&&o.group_id===p&&(m.selected_tree_id=r,m.selected_group_id=o.group_id),s[e].children.length>0&&j(s[e].children,r,c+1)}}function k(){e("start"),a.setUrl(b("inventory")+l+"/"),a.get().success(function(a){m.$emit("buildAllGroups",a.name,a.related.tree,a.related.groups)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+l+". GET returned: "+b})})}var l=h.inventory_id,m=h.scope,n=h.refresh,o=h.emit,p=h.new_group_id,q=[],r=1;m.buildAllGroupsRemove&&m.buildAllGroupsRemove(),m.buildAllGroupsRemove=m.$on("buildAllGroups",function(b,d,f){a.setUrl(f),a.get().success(function(a){i(a),j(a,0,0),m.autoShowGroupHelp=0===a.length?!0:!1,n?(m.groups=q,m.$emit("GroupTreeRefreshed",d,q,o)):m.$emit("GroupTreeLoaded",d,q,o)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory tree for: "+l+". GET returned: "+b})})}),k()}}]).factory("UpdateGroup",["ApplyEllipsis","GetSyncStatusMsg","Empty",function(a,b,c){return function(d){var e,f,g,h,i,j=d.scope,k=d.group_id,l=d.properties;for(e=0;e<j.groups.length;e++){if(j.groups[e].group_id===k){g=j.groups[e];for(f in l)"name"===f&&(h=j.groups[e].name),"source"===f&&l[f]!==j.groups[e][f]&&(c(l[f])||"none"!==j.groups[e].status&&!c(j.groups[e].status)?l[f]||(j.groups[e].status="none"):j.groups[e].status="never updated",i=b({status:j.groups[e].status}),j.groups[e].status_class=i["class"],j.groups[e].status_tooltip=i.tooltip,j.groups[e].launch_tooltip=i.launch_tip,j.groups[e].launch_class=i.launch_class),j.groups[e][f]=l[f]}j.groups[e].id===j.selected_tree_id&&(j.selected_group_name=j.groups[e].name,j.search_place_holder="Search "+j.groups[e].name,j.hostSearchPlaceholder="Search "+j.groups[e].name)}h&&setTimeout(function(){$('#groups_table .group-name a[title="'+h+'"]').attr("title",l.name),a("#groups_table .group-name a")},2500)}}]).factory("SetNodeName",[function(){return function(a){var b=a.name,c=a.description,d=void 0!==a.group_id?a.group_id:null,e=void 0!==a.inventory_id?a.inventory_id:null;null!==d&&$("#inventory-tree").find('li [data-group-id="'+d+'"]').each(function(){$(this).attr("data-name",b),$(this).attr("data-description",c),$(this).find(".activate").first().text(b)}),null!==e&&$("#inventory-root-node").attr("data-name",b).attr("data-description",c).find(".activate").first().text(b)}}]).factory("CopyMoveGroup",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.groups,key:"id",val:b.inbound_tree_id}),m="";m+='<div id="copy-prompt-modal" class="modal fade">\n',m+='<div class="modal-dialog">\n',m+='<div class="modal-content">\n',m+='<div class="modal-header">\n',m+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',m+=1===k.id||0===l.parent?"<h3>Move Group</h3>\n":"<h3>Copy or Move?</h3>\n",m+="</div>\n",m+='<div class="modal-body">\n',1===k.id?m+="<p>Are you sure you want to move group "+l.name+" to the top level?</p>":0===l.parent?m+="<p>Are you sure you want to move group "+l.name+" from the top level and make it a child of "+k.name+"?</p>":(m+='<div class="text-center">\n',m+="<p>Would you like to copy or move group <em>"+l.name+"</em> to group <em>"+k.name+"</em>?</p>\n",m+='<div style="margin-top: 30px;">\n',m+='<a href="" ng-click="moveGroup()" class="btn btn-primary" style="margin-right: 15px;"><i class="fa fa-cut"></i> Move</a>\n',m+='<a href="" ng-click="copyGroup()" class="btn btn-primary"><i class="fa fa-copy"></i> Copy</a>\n',m+="</div>\n",m+="</div>\n"),m+="</div>\n",m+='<div class="modal-footer">\n',m+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">Cancel</a>\n',(1===k.id||0===l.parent)&&(m+='<a href="" data-target="#prompt-modal" ng-click="moveGroup()" class="btn btn-primary">Yes</a>\n'),m+="</div>\n",m+="</div><!-- modal-content -->\n",m+="</div><!-- modal-dialog -->\n",m+="</div><!-- modal -->\n",i=angular.element(document.getElementById("inventory-modal-container")),i.empty().append(m),a(i)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.moveGroup=function(){var a,b,i;$("#copy-prompt-modal").modal("hide"),e("start"),j.removeGroupRemove&&j.removeGroupRemove(),j.removeGroupRemove=j.$on("removeGroup",function(){l.parent>0?(i=d({list:j.groups,key:"id",val:l.parent}),a=h("base")+"groups/"+i.group_id+"/children/",f.setUrl(a),f.post({id:l.group_id,disassociate:1}).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to remove "+l.name+" from "+i.name+". POST returned status: "+b})})):j.$emit("GroupDeleteCompleted")}),a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id},f.setUrl(a),f.post(b).success(function(){j.$emit("removeGroup")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})},j.copyGroup=function(){$("#copy-prompt-modal").modal("hide"),e("start");var a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id};f.setUrl(a),f.post(b).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})}}}]).factory("CopyMoveHost",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var g,i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.hosts,key:"id",val:b.host_id}),m=!1,n="";if(l.summary_fields.all_groups)for(i=0;i<l.summary_fields.all_groups.length;i++)if(l.summary_fields.all_groups[i].id===k.group_id){m=!0;break}m?(n+='<div id="copy-alert-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" ng-hide="disableButtons" data-target="#copy-alert-modal"\n',n+='data-dismiss="modal" class="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Already in Group</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+='<div class="alert alert-info"><p>Host '+l.name+" is already in group "+k.name+".</p></div>\n",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#copy-alert-modal" data-dismiss="modal" class="btn btn-primary">OK</a>\n',n+="</div>\n",n+="</div>\n",n+="</div>\n",n+="</div>\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-alert-modal").modal({backdrop:"static",keyboard:!0,show:!0})):(n="",n+='<div id="copy-prompt-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Copy Host</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+="<p>Are you sure you want to copy host "+l.name+" to group "+k.name+"?</p>",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">No</a>\n',n+='<a href="" data-target="#prompt-modal" ng-click="copyHost()" class="btn btn-primary">Yes</a>\n',n+="</div>\n",n+="</div><!-- modal-content -->\n",n+="</div><!-- modal-dialog -->\n",n+="</div><!-- modal -->\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.copyHost=function(){$("#copy-prompt-modal").modal("hide"),e("start"),f.setUrl(h("groups")+k.group_id+"/hosts/"),f.post(l).success(function(){j.$emit("GroupTreeRefreshed")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+k.name+". POST returned status: "+b})})})}}]),angular.module("RestServices",["ngCookies","AuthService"]).factory("Rest",["$http","$rootScope","$cookieStore","$q","Authorization",function(a,b,c,d,e){return{headers:{},setUrl:function(a){this.url=a},checkExpired:function(){return b.sessionTimer.isExpired()},pReplace:function(){var a,b;for(a in this.params)b=new RegExp("\\:"+a,"gm"),b.test(this.url)&&(this.url=this.url.replace(b,this.params[a]),delete this.params[a])},createResponse:function(a,b){var c=d.reject({data:a,status:b});return c.success=function(a){return c.then(function(b){a(b.data,b.status)},null),c},c.error=function(a){return c.then(null,function(b){a(b.data,b.status)}),c},c},setHeader:function(a){for(var b in a)this.headers[b]=a[b]},get:function(b){b=b?b:{},this.params=b.params?b.params:null,this.pReplace();var c=this.checkExpired(),d=e.getToken();return c?this.createResponse({detail:"Token is expired"},401):d?(this.setHeader({Authorization:"Token "+d}),this.setHeader({"X-Auth-Token":"Token "+d}),a({method:"GET",url:this.url,headers:this.headers,params:this.params})):this.createResponse({detail:"Invalid token"},401)},post:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"POST",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},put:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"PUT",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},destroy:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"DELETE",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},options:function(){var b=e.getToken(),c=this.checkExpired();return c?this.createResponse({detail:"Token is expired"},401):b?(this.setHeader({Authorization:"Token "+b}),this.setHeader({"X-Auth-Token":"Token "+b}),a({method:"OPTIONS",url:this.url,headers:this.headers})):this.createResponse({detail:"Invalid token"},401)}}}]),angular.module("TimerService",["ngCookies","Utilities"]).factory("Timer",["$rootScope","$cookieStore","$location","GetBasePath","Empty",function(a,b){return{sessionTime:null,timeout:null,getSessionTime:function(){return this.sessionTime?this.sessionTime:b.get("sessionTime")},isExpired:function(){var a=this.getSessionTime(),b=(new Date).getTime();return 0>=a-b?!0:(this.moveForward(),!1)},expireSession:function(){this.sessionTime=0,a.sessionExpired=!0,b.put("sessionExpired",!0)},moveForward:function(){var c=(new Date).getTime()+1e3*$AnsibleConfig.session_timeout;this.sessionTime=c,b.put("sessionTime",c),a.sessionExpired=!1,b.put("sessionExpired",!1)},init:function(){return this.moveForward(),this}}}]),angular.module("Utilities",["RestServices","Utilities"]).factory("ClearScope",[function(){return function(a){var b,c=document.getElementById(a);c&&(b=angular.element(c).scope(),b.$destroy()),$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()});try{$("#help-modal").dialog("close")}catch(d){}$(window).unbind("resize")}}]).factory("Empty",[function(){return function(a){return null===a||void 0===a||""===a?!0:!1}}]).factory("ToggleClass",function(){return function(a,b){$(a)&&$(a).hasClass(b)?$(a).removeClass(b):$(a)&&$(a).addClass(b)}}).factory("Alert",["$rootScope",function(a){return function(b,c,d,e,f,g){f?(a.alertHeader2=b,a.alertBody2=c,a.alertClass2=d?d:"alert-danger",$("#alert-modal2").modal({show:!0,keyboard:!0,backdrop:"static"}),a.disableButtons2=g?!0:!1,e&&$("#alert-modal2").on("hidden",function(){e()}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal2").modal("hide"),e&&e())})):(a.alertHeader=b,a.alertBody=c,a.alertClass=d?d:"alert-danger",$("#alert-modal").modal({show:!0,keyboard:!0,backdrop:"static"}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal").modal("hide"),e&&e())}),a.disableButtons=g?!0:!1,e&&$("#alert-modal").on("hidden",function(){e()}))}}]).factory("ProcessErrors",["$rootScope","$cookieStore","$log","$location","Alert","Wait",function(a,b,c,d,e,f){return function(b,c,g,h,i){var j,k,l;if(f("stop"),$AnsibleConfig.debug_mode&&console&&(console.log("Debug status: "+g),console.log("Debug data: "),console.log(c)),403===g)l="The API responded with a 403 Access Denied error. ",l+=c.detail?"Detail: "+c.detail:"Please contact your system administrator.",e(i.hdr,l);else if(401===g&&c.detail&&"Token is expired"===c.detail||401===g&&c.detail&&"Invalid token"===c.detail)a.sessionTimer.expireSession(),d.url("/login");else if(c.non_field_errors)e("Error!",c.non_field_errors);else if(c.detail)e(i.hdr,i.msg+" "+c.detail);else if(c.__all__)e("Error!",c.__all__);else if(h){k=!1;for(j in h.fields)c[j]&&h.fields[j].tab&&$("#"+h.name+'_tabs a[href="#'+h.fields[j].tab+'"]').tab("show"),h.fields[j].realName&&c[h.fields[j].realName]&&(b[j+"_api_error"]=c[h.fields[j]][0],$('[name="'+h.fields[j].realName+'"]').addClass("ng-invalid"),k=!0),h.fields[j].sourceModel?c[j]&&(b[h.fields[j].sourceModel+"_"+h.fields[j].sourceField+"_api_error"]=c[j][0],$('[name="'+h.fields[j].sourceModel+"_"+h.fields[j].sourceField+'"]').addClass("ng-invalid"),k=!0):c[j]&&(b[j+"_api_error"]=c[j][0],$('[name="'+j+'"]').addClass("ng-invalid"),k=!0);
!k&&i&&e(i.hdr,i.msg)}else e(i.hdr,i.msg)}}]).factory("LoadBreadCrumbs",["$rootScope","$routeParams","$location","Empty",function(a,b,c,d){return function(b){function e(a){return a.toUpperCase()}function f(a){return"ies"===a?"y":""}var g,h,i,j,k,l,m,n;if(!d(b)){for(h=!1,j=0;j<a.crumbCache.length;j++)if(a.crumbCache[j].path===b.path){h=!0,a.crumbCache[j]=b;break}h||a.crumbCache.push(b)}if(k=c.path().replace(/^\//,"").split("/"),l="",a.breadcrumbs=[],k.length>1)for(j=0;j<k.length-1;j++){if(j>0&&k[j].match(/\d+/)){for(m=k[j-1],n=m.replace(/(ies$|s$)/,f),n=n.charAt(0).toUpperCase()+n.slice(1),h=!1,i=0;i<a.crumbCache.length;i++)if(a.crumbCache[i].path==="/"+m+"/"+k[j]){n=a.crumbCache[i].title,h=!0;break}a.breadcrumbs.push(h&&void 0!==a.crumbCache[i].altPath?{title:n,path:a.crumbCache[i].altPath}:{title:n,path:l+"/"+k[j]})}else/_/.test(k[j])&&(k[j]=k[j].replace(/(?:^|_)\S/g,e).replace(/_/g," ")),g=k[j].charAt(0).toUpperCase()+k[j].slice(1),a.breadcrumbs.push({title:g,path:l+"/"+k[j]});l+="/"+k[j]}}}]).factory("HelpDialog",["$rootScope","$location","Store",function(a,b,c){return function(a){function b(a){function g(a){var b="";return b+="<h4>"+a.intro+"</h4>\n",b+='<div class="img-container">\n',b+='<img src="'+$basePath+"img/help/"+a.img.src+'" >',b+="</div>\n",b+='<div class="help-box">'+a.box+"</div>",b+=f&&a.autoOffNotice?'<div class="help-auto-off"><label><input type="checkbox" name="auto-off-checkbox" id="auto-off-checkbox"> Do not show this message in the future</label></div>\n':""}var h,i,j,k,l=!1;e=a,j=d.story.width?d.story.width:510,k=d.story.height?d.story.height:600,i=$(document).width(),j=j>i?i:j;try{l=$("#help-modal").dialog("isOpen")}catch(m){}l?$("#help-modal").html(g(d.story.steps[e])):(h=[],d.story.steps.length>1&&(h.push({text:"Prev",click:function(a){e-1===0&&$(a.target).button("disable"),e-1<d.story.steps.length-1&&$(a.target).next().button("enable"),b(e-1)},disabled:!0}),h.push({text:"Next",click:function(a){e+1>0&&$(a.target).prev().button("enable"),e+1===d.story.steps.length-1&&$(a.target).button("disable"),b(e+1)}})),h.push({text:"Close",click:function(){$("#help-modal").dialog("close")}}),$("#help-modal").html(g(d.story.steps[e])).dialog({position:{my:"center top",at:"center top+150",of:"body"},title:d.story.hdr,width:j,height:k,buttons:h,closeOnEscape:!0,show:500,hide:500,resizable:!1,close:function(){$("#help-modal").empty()}}),$(".ui-dialog-buttonset button").each(function(){var a,b,c;c=$(this).text(),"Close"===c?(b="fa-times",a="btn btn-default",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Close')):"Prev"===c?(b="fa-chevron-left",a="btn btn-primary",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Prev')):(b="fa-chevron-right",a="btn btn-primary",$(this).attr({"class":a}).html('Next <i class="fa '+b+'"></i>').css({"margin-right":"20px"}))}),$('.ui-dialog[aria-describedby="help-modal"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$("#auto-off-checkbox").click(function(){$('input[name="auto-off-checkbox"]:checked').length?c("inventoryAutoHelp","off"):c("inventoryAutoHelp","on")}))}var d=a.defn,e=a.step,f=a.autoShow||!1;b(0)}}]).factory("ReturnToCaller",["$location","Empty",function(a,b){return function(c){var d,e=a.path().replace(/^\//,"").split("/"),f="";for(c=b(c)?e.length-1:c+1,d=0;c>d;d++)f+="/"+e[d];a.path(f)}}]).factory("FormatDate",["$filter",function(a){return function(b){return a("date")(b,"MM/dd/yy HH:mm:ss")}}]).factory("Wait",["$rootScope",function(a){return function(b){var c,d,e,f,g,h;"start"!==b||a.waiting?"stop"===b&&a.waiting&&$(".spinny, .overlay").fadeOut(400,function(){a.waiting=!1}):(a.waiting=!0,c=$(window).width(),d=$(window).height(),e=$(".spinny").width(),f=$(".spinny").height(),g=(c-e)/2,h=(d-f)/2,$(".overlay").css({width:$(document).width(),height:$(document).height()}).fadeIn(),$(".spinny").css({top:h,left:g}).fadeIn(400))}}]).factory("HideElement",[function(){return function(a,b){var c=$(a),d=c.css("width"),e=c.css("height"),f=c.position(),g=c.parent(),h=c.css("border-radius"),i=c.css("background-color"),j=c.css("margin"),k=c.css("padding");g.append('<div id="curtain-div" style="position: absolute;top: '+f.top+"px; left: "+f.left+"px; z-index: 1000; width: "+d+"; height: "+e+"; background-color: "+i+"; margin: "+j+"; padding: "+k+"; border-radius: "+h+'; opacity: .75; display: none; "></div>'),$("#curtain-div").show(0,b)}}]).factory("ShowElement",[function(){return function(){$("#curtain-div").fadeOut(500,function(){$(this).remove()})}}]).factory("GetChoices",["Rest","ProcessErrors",function(a,b){return function(c){var d=c.scope,e=c.url,f=c.field,g=c.variable,h=c.callback,i=c.choice_name;d[g]?d[g].length=0:d[g]=[],a.setUrl(e),a.options().success(function(a){var b,c;for(b=i?a.actions.GET[f][i]:a.actions.GET[f].choices,c=0;c<b.length;c++)d[g].push({label:b[c][1],value:b[c][0],name:b[c][1]});h&&d.$emit(h)}).error(function(a,c){b(d,a,c,null,{hdr:"Error!",msg:"Failed to get "+e+". GET status: "+c})})}}]).factory("Find",[function(){return function(a){var b,c=a.list,d=a.key,e=a.val,f=!1;if("object"==typeof c&&Array.isArray(c)){for(b=0;b<a.list.length;b++)if(c[b][d]===e){f=!0;break}return f?c[b]:null}return null}}]).factory("DebugForm",[function(){return function(a){var b,c=a.form,d=a.scope;for(b in c.fields)d[c.name+"_form"][b]&&console.log(b+" valid: "+d[c.name+"_form"][b].$valid),c.fields[b].sourceModel&&d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField]&&console.log(c.fields[b].sourceModel+"_"+c.fields[b].sourceField+" valid: "+d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField].$valid);console.log("form pristine: "+d[c.name+"_form"].$pristine),console.log("form valid: "+d[c.name+"_form"].$valid)}}]).factory("Store",["Empty",function(a){return function(b,c){if(a(c)){if(!a(b)){var d=localStorage[b];return a(d)?null:JSON.parse(d)}}else localStorage[b]=JSON.stringify(c)}}]).factory("ApplyEllipsis",[function(){return function(a){var b=$("#string-test");b.length||($("body").append('<div style="display:none;" id="string-test"></div>'),b=$("#string-test")),$(a).each(function(){var a,c,d,e,f,g=!0;$(this).attr("title")?(a=$(this).attr("title"),g=!1):a=$(this).text(),b.text(a),c=b.width(),d=$(this).parent().width(),c>d&&(g&&$(this).attr("title",a),e=c/a.length,f=c-d,a=a.substr(0,a.length-(Math.ceil(f/e)+3)),$(this).text(a+"...")),d>c&&!g&&(a=$(this).attr("title"),$(this).text(a))})}}]),angular.module("ApiLoader",["Utilities"]).factory("LoadBasePaths",["$http","$rootScope","Store","ProcessErrors",function(a,b,c,d){return function(){a.get("/api/").success(function(e){var f=e.current_version;a.get(f).success(function(a){a.base=f,b.defaultUrls=a,c("api",a)}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read "+f+". GET status: "+c})})}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read /api. GET status: "+c})})}}]).factory("GetBasePath",["$rootScope","Store","LoadBasePaths","Empty",function(a,b,c,d){return function(c){return d(a.defaultUrls)?b("api")?(a.defaultUrls=b("api"),a.defaultUrls[c]):"":a.defaultUrls[c]}}]),angular.module("AWDirectives",["RestServices","Utilities","AuthService","JobsHelper"]).directive("awpassmatch",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=c.awpassmatch,e=$('input[name="'+b+'"]').val();return a===e?(d.$setValidity("awpassmatch",!0),a):void d.$setValidity("awpassmatch",!1)})}}}).directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c=a.split(" "),e="";for(b=0;b<c.length;b++)e+=c[b].charAt(0).toUpperCase()+c[b].substr(1)+" ";return e=e.trim(),e!==a&&(d.$setViewValue(e),d.$render()),e})}}}).directive("integer",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){return d.$setValidity("min",!0),d.$setValidity("max",!0),/^\-?\d*$/.test(a)?(d.$setValidity("integer",!0),b.attr("min")&&(""===a||null===a||parseInt(a,10)<parseInt(b.attr("min"),10))?void d.$setValidity("min",!1):b.attr("max")&&parseInt(a,10)>parseInt(b.attr("max"),10)?void d.$setValidity("max",!1):a):void d.$setValidity("integer",!1)})}}}).directive("awRequiredWhen",function(){return{require:"ngModel",link:function(a,b,c,d){function e(){var e,f=b.val(),g=!0;!a[c.awRequiredWhen]||null!==b.attr("required")&&void 0!==b.attr("required")?a[c.awRequiredWhen]||(b.removeAttr("required"),$(b).hasClass("lookup")?(e=$(b).parent().parent().parent().find("label").first(),e.removeClass("prepend-asterisk")):$(b).parent().parent().find("label").first().removeClass("prepend-asterisk")):($(b).attr("required","required"),$(b).hasClass("lookup")?$(b).parent().parent().parent().find("label").first().addClass("prepend-asterisk"):$(b).parent().parent().find("label").first().addClass("prepend-asterisk")),!a[c.awRequiredWhen]||void 0!==f&&null!==f&&""!==f||(g=!1),d.$setValidity("required",g)}void 0!==c.awrequiredInit&&null!==c.awrequiredInit&&(a[c.awRequiredWhen]=c.awrequiredInit,e()),a.$watch(c.awRequiredWhen,function(){e()}),a.$watch($(b).attr("name"),function(){e()})}}}).directive("awPlaceholder",[function(){return{require:"ngModel",link:function(a,b,c){$(b).attr("placeholder",a[c.awPlaceholder]),a.$watch(c.awPlaceholder,function(a){$(b).attr("placeholder",a)})}}}]).directive("awlookup",["Rest",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(d){if(""!==d&&null!==d){var f=c.attr("data-url");f=f.replace(/\:value/,encodeURI(d)),b[c.attr("data-source")]=null,a.setUrl(f),a.get().then(function(a){var f=a.data.results;return f.length>0?(b[c.attr("data-source")]=f[0].id,b[c.attr("name")]=f[0].name,e.$setValidity("required",!0),e.$setValidity("awlookup",!0),d):(e.$setValidity("required",!0),void e.$setValidity("awlookup",!1))})}else e.$setValidity("awlookup",!0),b[c.attr("data-source")]=null})}}}]).directive("awValidUrl",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c,e=!0;""!==a&&(d.$setValidity("required",!0),b=/^(https|http|ssh)\:\/\//,c=/\@/g,(!b.test(a)||c.test(a))&&(e=!1)),d.$setValidity("awvalidurl",e)})}}}]).directive("awToolTip",function(){return function(a,b,c){var d,e=void 0!==c.delay&&null!==c.delay?c.delay:$AnsibleConfig.tooltip_delay;d=c.awTipPlacement?c.awTipPlacement:void 0!==c.placement&&null!==c.placement?c.placement:"left",$(b).on("hidden.bs.tooltip",function(){$(".tooltip").each(function(){$(this).remove()})}),$(b).tooltip({placement:d,delay:e,html:!0,title:c.awToolTip,container:"body"}),c.tipWatch&&a.$watch(c.tipWatch,function(a,c){a!==c&&$(b).tooltip("hide").attr("data-original-title",a).tooltip("fixTitle")})}}).directive("awPopOver",["$compile",function(a){return function(b,c,d){var e=void 0!==d.placement&&null!==d.placement?d.placement:"left",f=void 0!==d.title&&null!==d.title?d.title:"Help",g=void 0!==d.container?d.container:!1;$(c).popover({placement:e,delay:0,title:f,content:d.awPopOver,trigger:"manual",html:!0,container:g}),$(c).click(function(){var c=$(this).attr("id");$(".help-link, .help-link-white").each(function(){c!==$(this).attr("id")&&$(this).popover("hide")}),$(".popover").each(function(){$(this).remove()}),$(".tooltip").each(function(){$(this).hide()}),$(this).popover("toggle"),$(".popover").each(function(){a($(this))(b)})}),$(document).bind("keydown",function(a){27===a.keyCode&&($(c).popover("hide"),$(".popover").each(function(){$(this).remove()}))})}}]).directive("ngSlider",[function(){return{require:"ngModel",link:function(a,b,c,d){var e=b.attr("name");$("#"+e+"-slider").slider({value:0,step:1,min:b.attr("min"),max:b.attr("max"),slide:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.$$phase||a.$digest()}}),$("#"+e+"-number").change(function(){$("#"+e+"-slider").slider("value",parseInt($(this).val(),10))})}}}]).directive("awMultiSelect",[function(){return{require:"ngModel",link:function(a,b){$(b).multiselect({buttonClass:"btn-default, btn-mini",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,buttonText:function(a){if(0===a.length)return'None selected <b class="caret"></b>';if(a.length>3)return a.length+' selected  <b class="caret"></b>';var b="";return a.each(function(){b+=$(this).text()+", "}),b.substr(0,b.length-2)+' <b class="caret"></b>'}})}}}]).directive("ngSpinner",[function(){return{require:"ngModel",link:function(a,b,c,d){var e,f;e=b.attr("data-disabled"),f={value:0,step:1,min:b.attr("min"),max:b.attr("max"),numberFormat:"d",spin:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.job_templates_form.$dirty=!0,a.$$phase||a.$digest()}},e&&(f.disabled=!0),$(b).spinner(f)}}}]).directive("chkPass",[function(){return{require:"ngModel",link:function(a,b,c,d){$(b).keyup(function(){var c=!0,e=chkPass(b.val());b.val()&&(c=e>$AnsibleConfig.password_strength?!0:!1),d.$setValidity("complexity",c),a.$$phase||a.$digest()})}}}]).directive("awRefresh",["$rootScope",function(a){return{link:function(b){function c(){for(var a=""+b.refreshCnt;a.length<2;)a="0"+a;return"Refresh in "+a+" sec."}b.refreshCnt=$AnsibleConfig.refresh_rate,b.refreshMsg=c(),a.timer&&clearInterval(a.timer),a.timer=setInterval(function(){b.refreshCnt--,b.refreshCnt<=0&&(b.refresh(),b.refreshCnt=$AnsibleConfig.refresh_rate),b.refreshMsg=c(),b.$$phase||b.$digest()},1e3)}}}]).directive("awMultiselect",[function(){return{require:"^form",link:function(a,b,c,d){$(b).select2({multiple:!0,data:function(){if(a[c.awMultiselect]){var b,d=a[c.awMultiselect],e=[];for(b=0;b<d.length;b++)e.push({id:d[b].value,text:d[b].label});return{results:e}}return{results:{id:"",text:""}}}}),$(b).on("change",function(){d.$setDirty(),a.$$phase||a.$digest()})}}}]).directive("awDraggable",[function(){return function(a,b,c){if("true"===c.awDraggable){var d=c.containment;$(b).draggable({containment:d,scroll:!0,revert:"invalid",helper:"clone",start:function(a,b){b.helper.addClass("draggable-clone")},zIndex:100,cursorAt:{left:-1}})}}}]).directive("awDroppable",["Find",function(a){return function(b,c,d){var e;"true"===d.awDroppable&&$(c).droppable({accept:function(c){if("group"===c.attr("data-type")){if($(this).attr("data-group-id")===c.attr("data-group-id"))return!1;if(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)})){var d,f=parseInt(c.attr("data-group-id"),10),g=!1;for(d=0;d<e.children.length;d++)if(e.children[d]===f){g=!0;break}return g?!1:!0}return!1}return"host"===c.attr("data-type")?(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)}),e.id>1?!0:!1):!1},over:function(){$(this).addClass("droppable-hover")},out:function(){$(this).removeClass("droppable-hover")},drop:function(a,c){$(this).removeClass("droppable-hover"),"group"===c.draggable.attr("data-type")?b.$emit("CopyMoveGroup",parseInt(c.draggable.attr("data-tree-id"),10),parseInt($(this).attr("data-tree-id"),10)):"host"===c.draggable.attr("data-type")&&b.$emit("CopyMoveHost",parseInt($(this).attr("data-tree-id"),10),parseInt(c.draggable.attr("data-host-id"),10))},tolerance:"pointer"})}}]),angular.module("AWFilters",[]).filter("capitalize",[function(){return function(a){var b,c,d;if(a){for(b=a.replace(/\_/g," ").split(" "),c="",d=0;d<b.length;d++)c+=b[d].charAt(0).toUpperCase()+b[d].substr(1)+" ";return c.trim()}}}]),angular.module("FormGenerator",["GeneratorHelpers","ngCookies","Utilities"]).factory("GenerateForm",["$rootScope","$location","$cookieStore","$compile","SearchWidget","PaginateWidget","Attr","Icon","Column","NavigationLink","HelpCollapse","Button","DropDown","Empty","SelectIcon",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{setForm:function(a){this.form=a},attr:g,icon:h,accordion_count:0,scope:null,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},inject:function(a,b){var c,e,f,g;if(c=angular.element(document.getElementById(b.modal?b.modal_body_id?b.modal_body_id:"form-modal-body":b.id?b.id:"htmlTemplate")),this.mode=b.mode,this.modal=b.modal?!0:!1,this.setForm(a),c.html(b.html?b.html:this.build(b)),this.scope=b.scope?b.scope:c.scope(),d(c)(this.scope),!b.html){for(e in a.fields)this.scope[e]=null;for(f in a.related)this.scope[f]=null;(!b.modal&&b.related||this.form.forceListeners)&&this.addListeners(),"add"===b.mode&&this.applyDefaults()}$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize"),$('.form-control[required], input[type="radio"][required]').each(function(){var a,b;n($(this).attr("aw-required-when"))&&(a=$(this).parent().parent().find("label").first(),"radio"===$(this).attr("type")&&(a=$(this).parent().parent().parent().find("label").first()),a.length>0&&(b=a.children("span"),b.length>0&&!b.first().hasClass("prepend-asterisk")?b.first().addClass("prepend-asterisk"):b.length<=0&&!a.first().hasClass("prepend-asterisk")&&a.first().addClass("prepend-asterisk")))});try{$("#help-modal").empty().dialog("destroy")}catch(h){}return b.modal&&(this.scope.formModalActionDisabled=!1,this.scope.formModalInfo=!1,a&&(b.modal_title_id?this.scope[b.modal_title_id]="add"===b.mode?a.addTitle:a.editTitle:this.scope.formModalHeader="add"===b.mode?a.addTitle:a.editTitle),b.modal_selector?($(b.modal_selector).modal({show:!0,backdrop:"static",keyboard:!0}),$(b.modal_selector).on("shown.bs.modal",function(){$(b.modal_select+" input:first").focus()}),$(b.modal_selector).on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})):(g=b.show_modal===!1?!1:!0,$("#form-modal").modal({show:g,backdrop:"static",keyboard:!0}),$("#form-modal").on("shown.bs.modal",function(){$("#form-modal input:first").focus()}),$("#form-modal").on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})),$(document).bind("keydown",function(a){27===a.keyCode&&(b.modal_selector&&$(b.modal_selector).modal("hide"),$("#prompt-modal").modal("hide"),$("#form-modal").modal("hide"))})),this.scope.$$phase||this.scope.$digest(),this.scope},applyDefaults:function(){for(var a in this.form.fields)(this.form.fields[a]["default"]||0===this.form.fields[a]["default"])&&(this.scope[a]="select"===this.form.fields[a].type&&this.scope[a+"_options"]?this.scope[a+"_options"][this.form.fields[a]["default"]]:this.form.fields[a]["default"])},reset:function(){function a(a,b){if("checkbox_group"===a.type)for(var e=0;e<a.fields.length;e++)c[a.fields[e].name]="",c[a.fields[e].name+"_api_error"]="",c[d.name+"_form"][a.fields[e].name].$setValidity("apiError",!0);else c[b]="",c[b+"_api_error"]="";a.sourceModel&&(c[a.sourceModel+"_"+a.sourceField]="",c[a.sourceModel+"_"+a.sourceField+"_api_error"]="",c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),"lookup"===a.type&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&(c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setPristine(),c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setPristine(),c[d.name+"_form"][b].$setValidity("apiError",!0)),a.chkPass&&c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setValidity("complexity",!0),$("#progbar").css({width:0})),a.awPassMatch&&c[d.name+"_form"][b]&&c[d.name+"_form"][b].$setValidity("awpassmatch",!0),a.ask&&(c[b+"_ask"]=!1)}var b,c=this.scope,d=this.form;c[d.name+"_form"]&&c[d.name+"_form"].$setPristine();for(b in d.fields)a(d.fields[b],b);if(d.statusFields)for(b in d.statusFields)a(d.statusFields[b],b);"add"===this.mode&&this.applyDefaults()},addListeners:function(){this.modal?$(".jqui-accordion-modal").accordion({collapsible:!1,heightStyle:"content",active:0}):(this.scope.accordionToggle=function(a){$(a).collapse("toggle"),$(a+"-icon").hasClass("fa-minus")?$(a+"-icon").removeClass("fa-minus").addClass("fa-plus"):$(a+"-icon").removeClass("fa-plus").addClass("fa-minus")},$(".jqui-accordion").each(function(){var a,d,e,f=!1,g=c.get("accordions"),h=!1;if(g)for(a=$(this).attr("id"),d=b.path().replace(/^\//,"").split("/")[0],e=0;e<g.length&&h===!1;e++)g[e].base===d&&g[e].id===a&&(h=!0,f=g[e].active);h===!1&&"true"===$(this).attr("data-open")&&(f=0),$(this).accordion({collapsible:!0,heightStyle:"content",active:f,activate:function(){$(".jqui-accordion").each(function(){var a,d,e=$(this).accordion("option","active"),f=$(this).attr("id"),g=b.path().replace(/^\//,"").split("/")[0],h=c.get("accordions");for((null===h||void 0===h)&&(h=[]),d=!1,a=0;a<h.length&&d===!1;a++)h[a].base===g&&h[a].id===f&&(d=!0,h[a].active=e);d===!1&&h.push({base:g,id:f,active:e}),c.put("accordions",h)})}})}))},genID:function(){var a=new Date;return a.getTime()},headerField:function(a,b){var c="";return b.label&&(c+="<label>"+b.label+"</label>\n"),c+='<input type="text" name="'+a+'" ',c+='ng-model="'+a+'" ',c+=b["class"]?g(b,"class"):"",c+=" readonly />\n"},clearApiErrors:function(){for(var a in this.form.fields)this.form.fields[a].sourceModel?(this.scope[this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+"_api_error"]="",$('[name="'+this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+'"]').removeClass("ng-invalid")):this.form.fields[a].realName?(this.scope[this.form.fields[a].realName+"_api_error"]="",$('[name="'+this.form.fields[a].realName+'"]').removeClass("ng-invalid")):(this.scope[a+"_api_error"]="",$('[name="'+a+'"]').removeClass("ng-invalid"));this.scope.$$phase||this.scope.$digest()},button:l,navigationLink:j,buildHelpCollapse:function(a){var b,c="",d={};for(b=0;b<a.length;b++)d.hdr=a[b].hdr,d.content=a[b].content,d.idx=this.accordion_count++,d.show=a[b].show?a[b].show:null,d.bind=a[b].ngBind?a[b].ngBind:null,c+=k(d);return c},buildField:function(a,b,c,d){function e(){var a;return a=d.formFieldSize?d.formFieldSize:b.xtraWide?"col-lg-10":b.column?"col-lg-8":!d.formFieldSize&&c.modal?"col-lg-10":"col-lg-6"}function f(){var a;return a=d.formLabelSize?d.formLabelSize:b.column?"col-lg-4":!d.formLabelSize&&c.modal?"col-lg-2":"col-lg-2"}function i(a,b,c){var d="";return d+=a.id?g(a,"id"):'id="'+c.name+"_"+b+'" '}function j(a,b,c,d,e){var f="",h=void 0!==e&&e===!1?!1:!0;return h&&(f+='<label class="',f+=void 0===b.inline||b.inline===!0?"checkbox-inline":"",f+=b.labelClass?" "+b.labelClass:"",f+='">'),f+='<input type="checkbox" ',f+=g(b,"type"),f+='ng-model="'+c+'" ',f+='name="'+c+'" ',f+=b.ngChange?g(b,"ngChange"):"",f+='id="'+a.name+"_"+c+'_chbox" ',f+=void 0!==d?"_"+d:"",f+='class="',f+=b["class"]?b["class"]+" ":"",f+='"',f+=void 0!==b.trueValue?g(b,"trueValue"):"",f+=void 0!==b.falseValue?g(b,"falseValue"):"",f+=b.checked?"checked ":"",f+=b.readonly?"disabled ":"",f+=" > ",h&&(f+=b.label+" ",f+=b.awPopOver?g(b,"awPopOver",c):"",f+="</label>\n"),f}function l(){var c="";return(b.label||b.labelBind)&&(c+="<label ",c+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",(q||b.labelClass)&&(c+='class="',c+=b.labelClass?b.labelClass:"",c+=q?" "+f():"",c+='" '),c+=b.labelNGClass?'ng-class="'+b.labelNGClass+'" ':"",c+='for="'+a+'">',c+=b.icon?h(b.icon):"",c+='<span class="label-text">'+b.label+"</span>",c+=b.awPopOver&&!b.awPopOverRight?g(b,"awPopOver",a):"",c+="</label>\n"),c}var m,n,o,p="",q=this.form.horizontal?!0:!1;if("alertblock"===b.type&&(p+='<div class="row">\n',p+='<div class="',p+=c.modal||c.id?"col-lg-12":"col-lg-8 col-lg-offset-2",p+='">\n',p+='<div class="alert',p+=void 0===b.closeable||b.closeable===!0?" alert-dismissable":"",p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=">\n",p+=void 0===b.closeable||b.closeable===!0?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n':"",p+=b.alertTxt,p+="</div>\n",p+="</div>\n",p+="</div>\n"),"hidden"===b.type&&("edit"===c.mode&&b.includeOnEdit||"add"===c.mode&&b.includeOnAdd)&&(p+='<input type="hidden" ng-model="'+a+'" name="'+a+'" />'),!b.readonly||b.readonly&&"edit"===c.mode){if(p+='<div class="form-group" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=b.ngHide?this.attr(b,"ngHide"):"",p+=">\n",("text"===b.type||"password"===b.type||"email"===b.type)&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+=b.clear||b.genMD5?'<div class="input-group">\n':"",(null===b.control||void 0===b.control||b.control)&&(p+="<input ",p+=this.attr(b,"type"),p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.chkPass?"chk-pass ":"",p+=i(b,a,this.form),p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+='class="form-control',p+=b["class"]?" "+this.attr(b,"class"):"",p+='" ',p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+=b.awPassMatch?'awpassmatch="'+b.associated+'" ':"",p+=b.capitalize?"capitalize ":"",p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=void 0!==b.autocomplete?this.attr(b,"autocomplete"):"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=b.awValidUrl?"aw-valid-url ":"",p+=b.associated&&this.form.fields[b.associated].ask?'ng-disabled="'+b.associated+'_ask" ':"",p+=b.awMultiselect?'aw-multiselect="'+b.awMultiselect+'" ':"",p+=" >\n"),b.clear&&(p+='<span class="input-group-btn"><button type="button" ',p+='id="'+this.form.name+"_"+a+'_clear_btn" ',p+='class="btn btn-default" ng-click="clear(\''+a+"','"+b.associated+'\')" aw-tool-tip="Clear '+b.label+'" id="'+a+'-clear-btn" ',p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=' ><i class="fa fa-undo"></i></button>\n',p+="</span>\n</div>\n",b.ask&&(p+='<label class="checkbox-inline ask-checkbox" ',p+=b.askShow?'ng-show="'+b.askShow+'" ':"",p+=">",p+='<input type="checkbox" ng-model="'+a+'_ask" ng-change="ask(\''+a+"','"+b.associated+"')\" ",p+='id="'+this.form.name+"_"+a+'_ask_chbox" ',p+="> Ask at runtime?</label>")),b.genMD5&&(p+='<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="genMD5(\''+a+'\')" aw-tool-tip="Generate '+b.label+'" data-placement="top" id="'+this.form.name+"_"+a+'_gen_btn"><i class="fa fa-magic"></i></button></span>\n</div>\n'),("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),"email"===b.type&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.email">A valid email address is required!</div>\n'),b.awPassMatch&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.awpassmatch">Must match Password value</div>\n'),b.awValidUrl&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.awvalidurl\">URL must begin with ssh, http or https and may not contain '@'</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',b.chkPass&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.complexity">Password must be stronger</div>\n',p+='<div class="pw-progress">\n',p+='<div class="progress progress-striped">\n',p+='<div id="progbar" class="progress-bar" role="progress"></div>\n',p+="</div>\n",p+=k({hdr:"Password Complexity",content:'<p>A password with reasonable strength is required. As you type the password a progress bar will measure the strength. Sufficient strength is reached when the bar turns green.</p><p>Password strength is judged using the following:</p><ul class="pwddetails"><li>Minimum 8 characters in length</li>\n<li>Contains a sufficient combination of the following items:\n<ul>\n<li>UPPERCASE letters</li>\n<li>Numbers</li>\n<li>Symbols _!@#$%^&*()</li>\n</ul>\n</li>\n</ul>\n',idx:this.accordion_count++,show:null}),p+="</div><!-- pw-progress -->\n"),p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"textarea"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",("variables"===a||"extra_vars"===a||"inventory_variables"===a||"source_vars"===a)&&(p+='<div class="parse-selection" id="'+this.form.name+"_"+a+'_parse_type">Parse as: <input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="yaml"> <span class="parse-label">YAML</span>\n',p+='<input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="json"> <span class="parse-label">JSON</span>\n',p+="</div>\n"),p+="<textarea ",p+=b.rows?this.attr(b,"rows"):"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+="></textarea>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"select"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<select ",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=this.attr(b,"ngOptions"),p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.multiSelect?"multiple ":"",p+=b.readonly?"readonly ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=">\n",p+='<option value="">',p+=b.defaultOption?b.defaultOption:"Choose a "+b.label.toLowerCase(),p+="</option>\n",p+="</select>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"number"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<input ",p+=b.spinner?"":'type="text" ',p+='" value="'+b["default"]+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.slider?'ng-slider="'+a+'" ':"",p+=b.spinner?'ng-spinner="'+a+'" ':"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=i(b,a,this.form),p+=b.min||0===b.min?this.attr(b,"min"):"",p+=b.max?this.attr(b,"max"):"",p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.slider?'id="'+a+'-number"':b.id?this.attr(b,"id"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly?"readonly ":"",p+=b.integer?"integer ":"",p+=b.disabled?'data-disabled="true" ':"",p+=" >\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(void 0!==b.min||void 0!==b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be an integer between '+b.min+" and ",p+=void 0!==b.max?b.max:"unlimited",p+="</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"checkbox_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="checkbox-group" ',p+='id="'+this.form.name+"_"+a+'_chbox_group" ',p+=">\n",m=0;m<b.fields.length;m++)p+=j(this.form,b.fields[m],b.fields[m].name,m);
("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(b.min||b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be in range '+b.min+" to "+b.max+"</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox-group -->\n",p+="</div>\n"}if("checkbox"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="checkbox">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+=j(this.form,b,a,void 0,!1),p+=b.icon?h(b.icon):"",p+='<span class="label-text">'+b.label+"</span>",p+=b.awPopOver?this.attr(b,"awPopOver",a):"",p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox -->\n",q&&(p+="</div>\n")),"radio_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",m=0;m<b.options.length;m++)p+='<label class="radio-inline" ',p+=b.options[m].ngShow?this.attr(b.options[m],"ngShow"):"",p+=">",p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.options[m].value+'" ',p+='ng-model="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.ngDisabled?this.attr(b,"ngDisabled"):"",p+=" > "+b.options[m].label+"\n",p+="</label>\n";("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"}"radio"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="radio">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.value+'" ',p+='ng-model="'+b.ngModel+'" ',p+=b.ngChange?g(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+=b.ngDisabled?g(b,"ngDisabled"):"",p+=" > ",p+=b.label,p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- radio -->\n",q&&(p+="</div>\n")),"lookup"!==b.type||void 0!==b.excludeMode&&b.excludeMode===c.mode||(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="input-group">\n',p+='<span class="input-group-btn">\n',p+='<button type="button" class="lookup-btn btn btn-default" '+this.attr(b,"ngClick")+'><i class="fa fa-search"></i></button>\n',p+="</span>\n",p+='<input type="text" class="form-control input-medium lookup" ',p+='ng-model="'+b.sourceModel+"_"+b.sourceField+'" ',p+='name="'+b.sourceModel+"_"+b.sourceField+'" ',p+='class="form-control" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.id?this.attr(b,"id"):"",p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=" awlookup >\n",p+="</div>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.required">A value is required!</div>\n'),p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.awlookup">Value not found</div>\n',p+='<div class="error api-error" ng-bind="'+b.sourceModel+"_"+b.sourceField+'_api_error"></div>\n',p+="</div>\n"),"custom"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<div ",p+='id="'+d.name+"_"+a+'" ',p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+=">\n",p+=b.control,p+="</div>\n",p+="</div>\n"),p+="</div>\n"}return p},getActions:function(a){var b,c='<div class="list-actions">\n';for(b in this.form.actions)("all"===this.form.actions[b].mode||this.form.actions[b].mode===a.mode)&&(c+=this.button({btn:this.form.actions[b],action:b,toolbar:!0}));return c+="</div>\n"},breadCrumbs:function(a,c){var d,e,f="";if(f+='<div class="nav-path">\n',f+='<ul class="breadcrumb">\n',f+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',c){e=b.path().replace(/^\//,"").split("/"),2===e.length&&(f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n"),f+='<li class="active"> </li>\n',f+="</ul>\n",f+='<div class="dropdown">\n';for(d in c)if(c[d].active){f+='<a href="" class="toggle" ',f+='data-toggle="dropdown" ',f+=">"+c[d].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}f+='<ul class="dropdown-menu" role="menu">\n';for(d in c)f+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+c[d].href+'" ',f+=">",f+='<i class="fa fa-check" style="visibility: ',f+=c[d].active?"visible":"hidden",f+='"></i> ',f+=c[d].listLabel?c[d].listLabel:c[d].label,f+="</a></li>\n";f+="</ul>\n",f+="</div><!-- dropdown -->\n",f+="</div><!-- nav-path -->\n"}else f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n</ul>\n</div><!-- nav-path -->\n";return f},build:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p="";if(this.modal||void 0!==a.breadCrumbs&&a.breadCrumbs!==!0||(p+=this.form.navigationLinks?this.breadCrumbs(a,this.form.navigationLinks):this.breadCrumbs(a)),!this.modal&&this.form.statusFields){if(p+='<div class="well">\n',this.form.statusActions){p+='<div class="list-actions">\n';for(c in this.form.statusActions)b=this.form.statusActions[c],p+=this.button({btn:b,action:c,toolbar:!0});p+="</div>\n"}p+='<div class="form status-fields">\n';for(f in this.form.statusFields)g=this.form.statusFields[f],p+=this.buildField(f,g,a,this.form);p+="</div><!-- status fields -->\n",p+="</div><!-- well -->\n"}if(this.form.fieldsAsHeader){p+='<div class="well">\n',p+='<form class="form-inline" name="'+this.form.name+'_form" id="'+this.form.name+'_form" novalidate >\n';for(f in this.form.fields)g=this.form.fields[f],p+=this.headerField(f,g,a);p+="</form>\n",p+="</div>\n"}else{if(this.form.collapse&&this.form.collapseMode===a.mode&&(p+='<div id="'+this.form.name+'-collapse-0" ',p+=this.form.collapseOpen?'data-open="true" ':"",p+='class="jqui-accordion">\n',p+="<h3>"+this.form.collapseTitle+"</h3>\n",p+="<div>\n"),!this.modal&&this.has("well")&&(p+='<div class="well">\n'),!this.modal&&this.form.actions&&(p+=this.getActions(a)),!a.modal&&this.form.showTitle){if(p+='<div class="form-title">',p+="edit"===a.mode?this.form.editTitle:this.form.addTitle,this.has("titleActions")){p+='<div class="title-actions pull-right">\n';for(d in this.form.titleActions)p+=this.button({btn:this.form.titleActions[d],action:d,toolbar:!0});p+="</div>\n"}p+="</div>\n",p+='<hr class="form-title-hr">\n'}if(p+='<form class="',p+=this.form.horizontal?"form-horizontal":"",p+=this.form["class"]?" "+this.form["class"]:"",p+='" name="'+this.form.name+'_form" id="'+this.form.name+'_form" autocomplete="off" novalidate>\n',p+='<div ng-show="flashMessage != null && flashMessage != undefined" class="alert alert-info">{{ flashMessage }}</div>\n',this.form.twoColumns){p+='<div class="row">\n',p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],1===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 1 -->\n",p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],2===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 2 -->\n",p+="</div>\n"}else if(this.form.tabs){for(p+='<ul id="'+this.form.name+'_tabs" class="nav nav-tabs">\n',h=0;h<this.form.tabs.length;h++)k=this.form.tabs[h],p+="<li",0===h&&(p+=' class="active"'),p+='><a href="#'+k.name+'" data-toggle="tab">'+k.label+"</a></li>\n";for(p+="</ul>\n",p+='<div class="tab-content">\n',h=0;h<this.form.tabs.length;h++){k=this.form.tabs[h],p+='<div class="tab-pane',0===h&&(p+=" active"),p+='" id="'+k.name+'">\n';for(f in this.form.fields)this.form.fields[f].tab===k.name&&(p+=this.buildField(f,this.form.fields[f],a,this.form));p+="</div>\n"}p+="</div>\n"}else{i="",j="";for(f in this.form.fields)g=this.form.fields[f],a.modal&&g.excludeModal||(g.group&&g.group!==j&&(""!==j&&(p+="</div>\n"),p+='<div class="well">\n',p+="<h5>"+g.group+"</h5>\n",j=g.group),g.section&&g.section!==i&&(""!==i?p+="</div>\n":(p+="</div>\n",p+='<div id="'+this.form.name+'-collapse" class="jqui-accordion-modal">\n'),l=this.form[g.section+"Show"]?' ng-show="'+this.form[g.section+"Show"]+'"':"",p+="<h3"+l+">"+g.section+"</h3>\n",p+="<div"+l+">\n",i=g.section),p+=this.buildField(f,g,a,this.form));""!==i&&(p+="</div>\n</div>\n"),""!==j&&(p+="</div>\n")}if(!this.modal&&this.has("buttons")){this.form.twoColumns&&(p+='<div class="row">\n',p+='<div class="col-lg-12">\n',p+="<hr />\n"),p+='<div class="buttons" ',p+='id="'+this.form.name+'_controls" ',p+=">\n",this.form.horizontal&&(m=2,this.form.buttons.labelClass&&(m=parseInt(this.form.buttons.labelClass.replace(/[A-Z,a-z,-]/g,""))),n=12-m,p+='<div class="col-lg-offset-'+m+" col-lg-"+n+">\n");for(d in this.form.buttons)"object"==typeof this.form.buttons[d]&&(e=this.form.buttons[d],"save"===d&&(e.label="Save",e["class"]="btn-success"),"reset"===d&&(e.label="Reset",e["class"]="btn-default"),p+='<button type="button" ',p+='class="btn btn-sm',p+=e["class"]?" "+e["class"]:"",p+='" ',p+='id="'+this.form.name+"_"+d+'_btn" ',e.ngClick&&(p+=this.attr(e,"ngClick")),e.ngDisabled&&("reset"!==d?(p+='ng-disabled="'+this.form.name+"_form.$pristine || "+this.form.name+"_form.$invalid",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" '):(p+='ng-disabled="'+this.form.name+"_form.$pristine",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" ')),p+=">",p+=o({action:d}),p+=" "+e.label+"</button>\n");p+="</div><!-- buttons -->\n",this.form.horizontal&&(p+="</div>\n"),this.form.twoColumns&&(p+="</div>\n",p+="</div>\n")}p+="</form>\n",!this.modal&&this.has("well")&&(p+="</div>\n"),this.form.collapse&&this.form.collapseMode===a.mode&&(p+="</div>\n",p+="</div>\n")}return!this.modal&&a.related&&this.form.related&&(p+=this.buildCollections(a)),p},buildCollections:function(a){var b,c,d,g,h,j,k,l=1,m=this.form,n='<div id="'+this.form.name+"-collapse-"+l+'" class="jqui-accordion">\n';for(g in m.related)if("collection"===m.related[g].type){n+='<h3 class="'+g+'_collapse">'+m.related[g].title+"<h3>\n",n+="<div>\n",m.related[g].instructions&&(n+='<div class="alert alert-info alert-block">\n',n+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',n+="<strong>Hint: </strong>"+m.related[g].instructions+"\n",n+="</div>\n"),n+='<div class="well">\n',n+='<div class="row">\n',n+=e({iterator:m.related[g].iterator,template:m.related[g],mini:!0}),n+='<div class="col-lg-8">\n',n+='<div class="list-actions">\n';for(b in m.related[g].actions)h=m.related[g].actions[b],n+=this.button({btn:h,action:b,toolbar:!0});n+="</div>\n",n+="</div>\n",n+="</div><!-- row -->\n",n+='<div class="list">\n',n+='<table id="'+g+'_table" class="'+m.related[g].iterator+' table table-condensed table-hover">\n',n+="<thead>\n",n+="<tr>\n",n+=void 0===m.related[g].index||m.related[g].index!==!1?"<th>#</th>\n":"";for(d in m.related[g].fields)n+='<th class="list-header" id="'+m.related[g].iterator+"-"+d+'-header" ng-click="sort(\''+m.related[g].iterator+"', '"+d+"')\">"+m.related[g].fields[d].label,n+=' <i class="',n+=m.related[g].fields[d].key?m.related[g].fields[d].desc?"icon-sort-down":"icon-sort-up":"icon-sort",n+='"></i></a></th>\n';n+="<th></th>\n",n+="</tr>\n",n+="</thead>",n+="<tbody>\n",n+='<tr ng-repeat="'+m.related[g].iterator+" in "+g+'" >\n',(void 0===m.related[g].index||m.related[g].index!==!1)&&(n+="<td>{{ $index + (("+m.related[g].iterator+"_page - 1) * "+m.related[g].iterator+"_page_size) + 1 }}.</td>\n"),j=1,k=m.related[g].base?m.related[g].base:g,k=k.replace(/^\//,"");for(d in m.related[g].fields)j++,n+=i({list:m.related[g],fld:d,options:a,base:k});n+='<td class="actions">';for(b in m.related[g].fieldActions)c=m.related[g].fieldActions[b],n+="<a ",n+=c.href?'href="'+c.href+'" ':"",n+=c.ngClick?this.attr(c,"ngClick"):"",n+=c.ngHref?this.attr(c,"ngHref"):"",n+=c.ngShow?this.attr(c,"ngShow"):"",n+=">",n+=o({action:b}),n+=c.label?" "+c.label:"",n+="</a>";n+="</td>",n+="</tr>\n",n+='<tr class="info" ng-show="'+m.related[g].iterator+"Loading == false && ("+g+" == null || "+g+'.length == 0)">\n',n+='<td colspan="'+j+'"><div class="alert alert-info">No records matched your search.</div></td>\n',n+="</tr>\n",n+='<tr class="info" ng-show="'+m.related[g].iterator+'Loading == true">\n',n+='<td colspan="'+j+'"><div class="alert alert-info">Loading...</div></td>\n',n+="</tr>\n",n+="</tbody>\n",n+="</table>\n",n+="</div>\n",n+="</div>\n",n+=f({set:g,iterator:m.related[g].iterator,mini:!0}),n+="</div>\n",l++}return n+="</div>\n",n+="</div>\n"}}}]),angular.module("GeneratorHelpers",["GeneratorHelpers"]).factory("Attr",function(){return function(a,b,c){var d,e,f,g="string"==typeof a[b]?a[b].replace(/[\'\"]/g,"&quot;"):a[b];if(/^ng/.test(b))f="ng-"+b.replace(/^ng/,"").toLowerCase()+'="'+g+'" ';else if(/^data|^aw/.test(b)&&"awPopOver"!==b){for(e="",d=0;d<b.length;d++)e+=/[A-Z]/.test(b.charAt(d))?"-"+b.charAt(d).toLowerCase():b.charAt(d);f=e+'="'+g+'" '}else switch(b){case"trueValue":f='ng-true-value="'+g+'" ';break;case"falseValue":f='ng-false-value="'+g+'" ';break;case"awPopOver":f='<a id="awp-'+c+'" href="" aw-pop-over=\''+g+"' ",f+=a.dataPlacement?'data-placement="'+a.dataPlacement.replace(/[\'\"]/g,"&quot;")+'" ':"",f+=a.dataContainer?'data-container="'+a.dataContainer.replace(/[\'\"]/g,"&quot;")+'" ':"",f+='class="help-link" ',f+='><i class="fa fa-question-circle"></i></a> ';break;case"columnShow":f='ng-show="'+g+'" ';break;case"icon":f='<i class="fa fa-'+g,f+=a.iconSize?" "+a.iconSize:"",f+='"></i>';break;case"autocomplete":f='autocomplete="',f+=g?"true":"false",f+='" ';break;default:f=b+'="'+g+'" '}return f}}).factory("Icon",function(){return function(a){return'<i class="fa '+a+'"></i> '}}).factory("SelectIcon",["Icon",function(a){return function(b){var c,d=b.action,e=b.size;switch(d){case"help":c="fa-question-circle";break;case"add":case"create":c="fa-plus";break;case"edit":c="fa-pencil";break;case"delete":c="fa-trash-o";break;case"group_update":c="fa-exchange";break;case"scm_update":c="fa-cloud-download";break;case"cancel":c="fa-minus-circle";break;case"run":case"rerun":case"submit":c="fa-rocket";break;case"stream":c="fa-clock-o";break;case"refresh":c="fa-refresh";break;case"close":c="fa-arrow-left";break;case"save":c="fa-check-square-o";break;case"properties":c="fa-wrench";break;case"reset":c="fa-undo";break;case"view":c="fa-search-plus";break;case"sync_status":c="fa-cloud"}return c+=e?" "+e:"",a(c)}}]).factory("Button",["Attr","SelectIcon",function(a,b){return function(c){var d=c.btn,e=c.action,f=c.toolbar,g="";return f&&(d.class="btn-xs btn-primary",d.iconSize="fa-lg",delete d.label),g+='<button type="button" ',g+='class="btn',g+=d["class"]?" "+d["class"]:" btn-sm",g+=d.awPopOver?" help-link-white":"",g+='" ',g+=d.ngClick?a(d,"ngClick"):"",d.id?g+='id="'+d.id+'" ':e&&(g+='id="'+e+'_btn" '),g+=d.ngHide?a(d,"ngHide"):"",g+=d.awToolTip?a(d,"awToolTip"):"",g+=d.awToolTip&&void 0===d.dataPlacement?'data-placement="top" ':"",g+=d.awPopOver?'aw-pop-over="'+d.awPopOver.replace(/[\'\"]/g,"&quot;")+'" ':"",g+=d.dataPlacement?a(d,"dataPlacement"):"",g+=d.dataContainer?a(d,"dataContainer"):"",g+=d.dataTitle?a(d,"dataTitle"):"",g+=d.ngShow?a(d,"ngShow"):"",g+=d.ngHide?a(d,"ngHide"):"",g+=d.ngDisabled?a(d,"ngHide"):"",g+=d.ngClass?a(d,"ngClass"):"",g+=d.awTipPlacement?a(d,"awTipPlacement"):"",g+=" >",g+=d.img?'<img src="'+$basePath+"img/"+d.img+'" style="width: 12px; height: 12px;" >':"",g+=b({action:e,size:d.iconSize}),g+=d.label?" "+d.label:"",g+="</button> "}}]).factory("NavigationLink",["Attr","Icon",function(a,b){return function(c){var d="<a ";return d+=c.href?a(c,"href"):"",d+=c.ngClick?a(c,"ngClick"):"",d+=c.ngShow?a(c,"ngShow"):"",d+=">",d+=c.icon?b(c.icon):"",d+=c.label?c.label:"",d+="</a>\n"}}]).factory("DropDown",["Attr","Icon",function(a,b){return function(a){var c,d,e,f,g=a.list,h=a.fld;for(e=a.field?a.field:a.type?g[a.type][h]:g.fields[h],f=e.label.replace(/ /g,"_"),d=void 0===a.td||a.td!==!1?'<td class="'+h+'-column">\n':"",d+='<div class="dropdown">\n',d+='<a href="" class="toggle',d+='" ',d+=e.ngDisabled?'ng-disabled="'+e.ngDisabled+'" ':"",d+='data-toggle="dropdown" ',d+=">",d+=e.icon?b(e.icon):"",d+=e.label,d+=' <span class="caret"></span></a>\n',d+='<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu1">\n',c=0;c<e.options.length;c++)d+='<li role="presentation"><a role="menuitem" tabindex="-1" ',d+='ng-click="'+e.options[c].ngClick+'" ',d+=e.options[c].ngShow?'ng-show="'+e.options[c].ngShow+'" ':"",d+=e.options[c].ngHide?'ng-hide="'+e.options[c].ngHide+'" ':"",d+='href="">'+e.options[c].label+"</a></li>\n";return d+="</ul>\n",d+="</div>\n",d+=void 0===a.td||a.td!==!1?"</td>\n":""}}]).factory("BadgeCount",[function(){return function(a){var b,c=a.list,d=a.fld,e=c.fields[d];return b='<td class="'+d+"-column",b+=e.columnClass?" "+e.columnClass:"",b+='">\n',b+='<a ng-href="'+e.ngHref+'" aw-tool-tip="'+e.awToolTip+'"',b+=e.dataPlacement?' data-placement="'+e.dataPlacement+'"':"",b+=">",b+='<span class="badge',b+=e["class"]?" "+e["class"]:"",b+='">',b+="{{ "+c.iterator+"."+d+" }}",b+="</span>",b+=e.badgeLabel?" "+e.badgeLabel:"",b+="</a>\n",b+="</td>\n"}}]).factory("Badge",[function(){return function(a){var b,c="";if(a.badges)for(b=0;b<a.badges.length;b++)a.badges[b].toolTip&&(c+='<a href="" aw-tool-tip="'+a.badges[b].toolTip+'"',c+=a.badges[b].toolTipPlacement?' data-placement="'+a.badges[b].toolTipPlacement+'"':"",c+=a.badges[b].badgeShow?' ng-show="'+a.badges[b].badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badges[b].badgeShow?'ng-show="'+a.badges[b].badgeShow+'" ':"",c+=' class="field-badge '+a.badges[b].icon,c+=a.badges[b].badgeClass?" "+a.badges[b].badgeClass:"",c+='"></i>',a.badges[b].toolTip&&(c+="</a>"),c+="\n";else a.badgeToolTip&&(c+="<a ",c+=a.badgeNgHref?'ng-href="'+a.badgeNgHref+'" ':'href=""',c+=a.ngClick?'ng-click="'+a.ngClick+'" ':"",c+=' aw-tool-tip="'+a.badgeToolTip+'"',c+=a.badgeTipPlacement?' data-placement="'+a.badgeTipPlacement+'"':"",c+=a.badgeTipWatch?' data-tip-watch="'+a.badgeTipWatch+'"':"",c+=a.badgeShow?' ng-show="'+a.badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badgeShow?'ng-show="'+a.badgeShow+'" ':"",c+=' class="field-badge '+a.badgeIcon,c+=a.badgeClass?" "+a.badgeClass:"",c+='"></i>',a.badgeToolTip&&(c+="</a>"),c+="\n";return c}}]).factory("Breadcrumbs",["Attr",function(a){return function(b){var c,d,e=b.list,f=b.mode,g="";if(g+='<div class="nav-path">\n',g+='<ul class="breadcrumb" id="breadcrumb-list">\n',g+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',e.navigationLinks){d=e.navigationLinks,d.ngHide?(g+='<li class="active" ng-show="'+d.ngHide+'">',g+=e.editTitle,g+="</li>\n",g+='<li class="active" ng-hide="'+d.ngHide+'"> </li>\n'):(g+='<li class="active"> </li>\n',g+="</ul>\n"),g+='<div class="dropdown" ',g+=d.ngHide?a(d,"ngHide"):"",g+=">\n";for(c in d)if("object"==typeof d[c]&&d[c].active){g+='<a href="" class="toggle" ',g+='data-toggle="dropdown" ',g+=">"+d[c].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}g+='<ul class="dropdown-menu" role="menu">\n';for(c in d)"object"==typeof d[c]&&(g+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+d[c].href+'" ',g+=">",g+='<i class="fa fa-check" style="visibility: ',g+=d[c].active?"visible":"hidden",g+='"></i> ',g+=d[c].label,g+="</a></li>\n");g+="</ul>\n",g+="</div><!-- dropdown -->\n",g+="</div><!-- nav-path -->\n"}else g+='<li class="active">',g+="select"===f?e.selectTitle:e.editTitle,g+="</li>\n</ul>\n</div>\n";return g}}]).factory("Column",["Attr","Icon","DropDown","Badge","BadgeCount",function(a,b,c,d,e){return function(f){var g,h=f.list,i=f.fld,j=f.options,k=f.base,l=h.fields[i],m="";return void 0!==l.type&&"DropDown"===l.type?m=c(f):"badgeCount"===l.type?m=e(f):(m+='<td class="'+i+"-column",m+=l["class"]?" "+l["class"]:"",m+=l.columnClass?" "+l.columnClass:"",m+='" ',m+=l.ngClass?a(l,"ngClass"):"",m+="lookup"===j.mode||"select"===j.mode?' ng-click="toggle_'+h.iterator+"({{ "+h.iterator+'.id }})"':"",m+=l.columnShow?a(l,"columnShow"):"",m+=l.ngBindHtml?'ng-bind-html-unsafe="'+l.ngBindHtml+'" ':"",m+=">\n",m+=l.ngShow?"<span "+a(l,"ngShow")+">":"","lookup"!==j.mode&&(l.badges||l.badgeIcon&&l.badgePlacement&&"left"===l.badgePlacement)&&(m+=d(l)),h.hasChildren&&l.hasChildren&&(m+='<div class="level level-{{ '+h.iterator+'.event_level }}"><a href="" ng-click="{{ '+h.iterator+'.ngclick }}"> <i class="{{ '+h.iterator+'.ngicon }}"></i></a></div>'),"groups"===h.name&&(m+='<div class="group-name">'),"hosts"===h.name&&(m+='<div class="host-name">'),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(g=!1,l.linkTo?(m+='<a href="'+l.linkTo+'" ',g=!0):l.ngClick?(m+='<a href=""'+a(l,"ngClick")+" ",g=!0):l.ngHref?(m+='<a ng-href="'+l.ngHref+'" ',g=!0):(l.link||l.key&&(void 0===l.link||l.link))&&(m+='<a href="#/'+k+"/{{"+h.iterator+'.id }}" ',g=!0),l.awDroppable&&(m+=a(l,"awDroppable"),m+=l.dataAccept?a(l,"dataAccept"):""),l.awDraggable&&(m+=a(l,"awDraggable"),m+=l.dataContainment?a(l,"dataContainment"):"",m+=l.dataTreeId?a(l,"dataTreeId"):"",m+=l.dataGroupId?a(l,"dataGroupId"):"",m+=l.dataHostId?a(l,"dataHostId"):"",m+=l.dataType?a(l,"dataType"):""),l.awToolTip&&(m+=a(l,"awToolTip"),m+=l.dataPlacement?a(l,"dataPlacement"):"",m+=l.dataTipWatch?a(l,"dataTipWatch"):""),m+=g?">":""),l.ngShowIcon?m+='<i ng-show="'+l.ngShowIcon+'" class="'+l.icon+'"></i> ':l.icon&&(m+=b(l.icon)+" "),l.ngBindHtml||void 0!==l.showValue&&l.showValue!==!0||(m+=l.ngBind?"{{ "+l.ngBind+" }}":"{{"+h.iterator+"."+i+"}}"),l.text&&(m+=l.text),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(m+="</a>"),("hosts"===h.name||"groups"===h.name)&&(m+="</div>"),m+=l.ngShow?"</span>":"",m+=l.appendHTML?'<div ng-show="'+l.appendHTML+' !== null" ng-bind-html-unsafe="'+l.appendHTML+'" class="level-{{ '+h.iterator+'.event_level }}-detail" ></div>\n':"","lookup"!==j.mode&&l.badgeIcon&&l.badgePlacement&&"left"!==l.badgePlacement&&(m+=d(l))),m+="</td>\n"}}]).factory("HelpCollapse",function(){return function(a){var b=a.hdr,c=a.content,d=a.show,e=a.idx,f=a.bind,g="";return g+='<div class="panel-group collapsible-help" ',g+=d?'ng-show="'+d+'"':"",g+=">\n",g+='<div class="panel panel-default">\n',g+='<div class="panel-heading" ng-click="accordionToggle(\'#accordion'+e+"')\">\n",g+='<h4 class="panel-title">\n',g+=b,g+='<i class="fa fa-minus pull-right collapse-help-icon" id="accordion'+e+'-icon"></i>',g+="</h4>\n",g+="</div>\n",g+='<div id="accordion'+e+'" class="panel-collapse collapse in">\n',g+='<div class="panel-body" ',g+=f?'ng-bind-html-unsafe="'+f+'" ':"",g+=">\n",g+=f?"":c,g+="</div>\n",g+="</div>\n",g+="</div>\n",g+="</div>\n"}}).factory("SearchWidget",function(){return function(a){var b,c,d,e=a.iterator,f=a.template,g=a.mini,h="",i=a.searchWidgets?a.searchWidgets:1;for(c=1;i>=c;c++){d=1===c?"":c,h+='<div class="',h+=a.size?a.size:"col-lg-4 col-md-6 col-sm-12 col-xs-12",h+='" id="search-widget-container'+d+'">\n',h+='<div class="input-group',h+=g?" input-group-sm":" input-group-sm",h+='">\n',h+='<div class="input-group-btn dropdown">\n',h+='<button type="button" ',h+='id="search_field_ddown" ',h+='class="btn btn-default ',h+='dropdown-toggle" data-toggle="dropdown"',h+=">\n",h+='<span ng-bind="'+e+"SearchFieldLabel"+d+'"></span>\n',h+='<span class="caret"></span>\n',h+="</button>\n",h+='<ul class="dropdown-menu" id="'+e+"SearchDropdown"+d+'">\n';for(b in f.fields)void 0!==f.fields[b].searchable&&f.fields[b].searchable!==!0||(void 0!==f.fields[b].searchWidget&&1!==f.fields[b].searchWidget||1!==c)&&f.fields[b].searchWidget!==c||(h+='<li><a href="" ng-click="setSearchField(\''+e+"','",h+=b+"','",h+=f.fields[b].searchLabel?f.fields[b].searchLabel+"', "+c+')">'+f.fields[b].searchLabel+"</a></li>\n":f.fields[b].label.replace(/<br \/>/g," ")+"', "+c+')">'+f.fields[b].label.replace(/<br \/>/g," ")+"</a></li>\n");h+="</ul>\n",h+="</div><!-- input-group-btn -->\n",h+='<select id="search_value_select" ng-show="'+e+"SelectShow"+d+'" ng-model="'+e+"SearchSelectValue"+d+'" ng-change="search(\''+e+"')\" ",h+='ng-options="c.name for c in '+e+"SearchSelectOpts"+d+'" class="form-control search-select',h+='"></select>\n',h+='<input id="search_value_input" type="text" ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+'" class="form-control" ng-model="'+e+"SearchValue"+d+'" aw-placeholder="'+e+"SearchPlaceholder"+d+'" type="text" ng-disabled="'+e+"InputDisable"+d+" || "+e+"HoldInput"+d+'" ng-keypress="startSearch($event,\''+e+"')\">\n",h+='<div class="input-group-btn" ng-show="'+e+"SelectShow"+d+'" >\n',h+='<button type="button" class="btn btn-default btn-small" ng-click="resetSearch(\''+e+'\')" aw-tool-tip="Clear the search" data-placement="top"><i class="fa fa-times"></i></button>\n',h+="</div><!-- input-group-btn -->\n",h+="</div><!-- input-group -->\n",h+='<a class="search-reset-start" ng-click="resetSearch(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || "+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-times"></i></a>\n',h+='<a class="search-reset-start" ng-click="search(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || !"+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-search"></i></a>\n',h+="</div>\n"}return h}}).factory("PaginateWidget",[function(){return function(a){var b=a.iterator,c=a.set,d="";return d+="<!-- Paginate Widget -->\n",d+='<div class="row page-row">\n',d+='<div class="col-lg-8">\n',d+='<ul class="pagination" ng-hide="'+b+"Loading || "+b+'_num_pages <= 1">\n',d+='<li ng-hide="'+b+'_page -5 <= 1 "><a href ng-click="getPage(1,\''+c+"','"+b+'\')"><i class="fa fa-angle-double-left"></i></a></li>\n',d+='<li ng-hide="'+b+'_page -1 <= 0"><a href ng-click="getPage('+b+"_page - 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-left"></i></a></li>\n',d+='<li ng-repeat="page in '+b+'_page_range" ng-class="pageIsActive(page,\''+b+"')\"><a href ng-click=\"getPage(page,'"+c+"','"+b+"')\">{{ page }}</a></li>\n",d+='<li ng-hide="'+b+"_page + 1 > "+b+'_num_pages"><a href ng-click="getPage('+b+"_page + 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-right"></i></a></li>\n',d+='<li ng-hide="'+b+"_page +4 >= "+b+'_num_pages"><a href ng-click="getPage('+b+"_num_pages,'"+c+"','"+b+'\')"><i class="fa fa-angle-double-right"></i></a></li>\n',d+="</ul>\n",d+="</div>\n",d+='<div class="col-lg-4 col-md-4" ng-hide="'+b+"_mode == 'lookup'\">\n",d+='<div class="page-label">\n',d+="Page {{ "+b+"_page }} of {{ "+b+"_num_pages }} for {{ "+b+"_total_rows | number:0 }} "+c+".",d+="</div>\n",d+="</div>\n",d+="</div>\n"}}]),angular.module("License",["RestServices","Utilities","FormGenerator","PromptDialog","LicenseFormDefinition"]).factory("ViewLicense",["$location","$rootScope","GenerateForm","Rest","Alert","GetBasePath","ProcessErrors","FormatDate","Prompt","Empty","LicenseForm",function(a,b,c,d,e,f,g,h,i,j,k){return function(){var a,e=f("config"),l=c,m=angular.copy(k);d.setUrl(e),d.get().success(function(b){var c,d,e,f,g,k,n,o;for(c in m.fields)"time_remaining"!==c&&"license_status"!==c&&j(b.license_info[c])&&delete m.fields[c];(b.license_info.is_aws||j(b.license_info.license_date))&&(delete m.fields.license_date,delete m.fields.time_remaining),a=l.inject(m,{mode:"edit",modal:!0,related:!1}),l.reset(),a.formModalAction=function(){$("#form-modal").modal("hide")},a.formModalActionLabel="OK",a.formModalCancelShow=!1,a.formModalInfo="Purchase/Extend License",a.formModalHeader="Tower License",a.formModalInfoAction=function(){i({hdr:"Tower Licensing",body:'<p>Ansible Tower licenses can be purchased or extended by visiting <a id="license-link" href="http://www.ansible.com/ansible-pricing" target="_blank">the Ansible online store</a>. Would you like to purchase or extend your license now?</p>',"class":"btn-primary",action:function(){var a=$("#license-link").attr("href");window.open(a,"storeWindow")}})};for(c in m.fields)j(b.license_info[c])||(a[c]=b.license_info[c]);a.license_date&&(d=new Date(parseInt(a.license_date)),"1970"===d.getFullYear()&&(d=new Date(1e3*parseInt(a.license_date,10)),a.time_remaining=a.time_remaining+"000"),a.license_date=h(d),e=parseInt(a.time_remaining/864e5,10),f=a.time_remaining-864e5*e,g=parseInt(f/36e5,10),f-=36e5*g,k=parseInt(f/6e4,10),f-=6e4*k,n=parseInt(f/1e3,10),a.time_remaining=e+" days "+("0"+g).slice(-2)+":"+("0"+k).slice(-2)+":"+("0"+n).slice(-2)),a.free_instances_class=parseInt(a.free_instances)<=0?"field-failure":"field-success",o=b.license_info,void 0===o.valid_key||o.valid_key?void 0!==o.demo&&o.demo?(a.license_status="Demo",a.status_color="license-demo"):void 0!==o.date_expired&&o.date_expired?(a.license_status="Expired",a.status_color="license-expired"):void 0!==o.date_warning&&o.date_warning?(a.license_status="Expiration Warning",a.status_color="license-warning"):void 0!==o.free_instances&&parseInt(o.free_instances)<=0?(a.license_status="No available managed hosts",a.status_color="license-invalid"):(a.license_status="Valid",a.status_color="license-valid"):(a.license_status="Invalid",a.status_color="license-invalid")}).error(function(a,c){g(b,a,c,m,{hdr:"Error!",msg:"Failed to retrieve license. GET status: "+c})})}}]),angular.module("ListGenerator",["GeneratorHelpers"]).factory("GenerateList",["$location","$compile","$rootScope","SearchWidget","PaginateWidget","Attr","Icon","Column","DropDown","NavigationLink","Button","SelectIcon","Breadcrumbs",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{setList:function(a){this.list=a},attr:f,icon:g,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},hide:function(){$("#lookup-modal").modal("hide")},button:k,inject:function(a,c){var d;d=angular.element(document.getElementById("lookup"===c.mode?"lookup-modal-body":c.id?c.id:"htmlTemplate")),this.setList(a),d.html(this.build(c)),c.prepend&&d.prepend(c.prepend),c.append&&d.append(c.prepend),this.scope=c.scope?c.scope:d.scope(),b(d)(this.scope),this.scope[a.name]=null,this.scope[a.iterator]=null,$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize");try{$("#help-modal").empty().dialog("destroy")}catch(e){}return"lookup"===c.mode&&(this.scope.formModalActionDisabled=!1,this.scope.lookupHeader=c.hdr,$("#lookup-modal").modal({backdrop:"static",keyboard:!0}),$("#lookup-modal").unbind("hidden.bs.modal"),$(document).bind("keydown",function(a){27===a.keyCode&&$("#lookup-modal").modal("hide")})),this.scope},build:function(b){var c,g,j,k,n,o,p,q,r,s="",t=this.list;if(b.activityStream?(s+='<div class="nav-path">\n',s+='<ul class="breadcrumb">\n',s+='<li ng-repeat="crumb in breadcrumbs"><a href="" ng-click="{{ crumb.ngClick }}">{{ crumb.title }}</a></li>\n',s+='<li class="active">',s+=t.editTitle,s+="</li>\n</ul>\n</div>\n"):"lookup"===b.mode||void 0!==b.breadCrumbs&&!b.breadCrumbs||(s+=m({list:t,mode:b.mode})),"edit"===b.mode&&t.editInstructions&&(s+='<div class="alert alert-info alert-block">\n',s+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',s+="<strong>Hint: </strong>"+t.editInstructions+"\n",s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&!t.well||(s+='<div class="well">\n'),b.activityStream&&(s+='<div class="row">\n',s+='<div class="col-lg-12">\n',s+="<h5>{{ streamTitle }}</h5>\n",s+="</div>\n",s+="</div>\n"),s+='<div class="row">\n',"groups"!==t.name&&(s+=d(b.searchSize?{iterator:t.iterator,template:t,mini:!0,size:b.searchSize,searchWidgets:t.searchWidgets}:"summary"===b.mode?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-6"}:"lookup"===b.mode||void 0!==b.id?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-8"}:{iterator:t.iterator,template:t,mini:!0})),"lookup"!==b.mode){c=a.path().replace(/^\//,"").split("/")[0],s+='<div class="',"groups"===t.name?s+="col-lg-12":b.searchSize?(g=parseInt(b.searchSize.replace(/([A-Z]|[a-z]|\-)/g,"")),g=t.searchWidgets?t.searchWidgets*g:g,s+="col-lg-"+(12-g)):s+="summary"===b.mode?"col-lg-6":void 0!==b.id?"col-lg-4":"col-lg-8 col-md-6",s+='">\n',s+='<div class="list-actions">\n';
for(j in t.actions)("all"===t.actions[j].mode||t.actions[j].mode===b.mode)&&(void 0===t.actions[j].basePaths||t.actions[j].basePaths&&t.actions[j].basePaths.indexOf(c)>-1)&&(s+=this.button({btn:t.actions[j],action:j,toolbar:!0}));"select"===b.mode&&t.selectInstructions&&(k={awPopOver:t.selectInstructions,dataPlacement:"top",dataContainer:"body","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Help",iconSize:"fa-lg"},s+=this.button({btn:k,action:"help",toolbar:!0})),s+="</div><!-- list-acitons -->\n",s+="</div><!-- list-actions-column -->\n"}else s+='<div class="col-lg-7"></div>\n';s+="</div><!-- row -->\n","lookup"!==b.mode&&t.showTitle&&(s+='<div class="form-title">',s+="edit"===b.mode||"summary"===b.mode?t.editTitle:t.addTitle,s+="</div>\n"),s+='<table id="'+t.name+'_table" ',s+='class="table',s+=t["class"]?" "+t["class"]:"",s+="summary"===b.mode||"edit"===b.mode||"lookup"!==b.mode&&!b.id?"":" table-hover-inverse",s+=t.hover?" table-hover":"",s+="summary"===b.mode?" table-summary":"",s+='" ',s+=">\n",s+="<thead>\n",s+="<tr>\n",t.index&&(s+='<th class="col-lg-1 col-md-1 col-sm-1 hidden-xs">#</th>\n');for(n in t.fields)void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+='<th class="list-header',s+=t.fields[n].columnClass?" "+t.fields[n].columnClass:"",s+='" id="',s+=t.fields[n].id?t.fields[n].id:n+"-header",s+='"',s+=t.fields[n].columnShow?' ng-show="'+t.fields[n].columnShow+'" ':"",s+=void 0===t.fields[n].nosort||t.fields[n].nosort!==!0?"ng-click=\"sort('"+n+"')\"":"",s+=">",s+=t.fields[n].label,(void 0===t.fields[n].nosort||t.fields[n].nosort!==!0)&&(s+=' <i class="fa ',s+=t.fields[n].key?t.fields[n].desc?"fa-sort-down":"fa-sort-up":"fa-sort",s+='"></i></a>'),s+="</th>\n");"select"===b.mode||"lookup"===b.mode?s+="<th>Select</th>":"edit"===b.mode&&t.fieldActions&&(s+='<th class="actions-column',s+=t.fieldActions&&t.fieldActions.columnClass?" "+t.fieldActions.columnClass:"",s+='">Actions</th>\n'),s+="</tr>\n",s+="</thead>\n",s+="<tbody>\n",s+='<tr ng-class="'+t.iterator,s+="lookup"===b.mode||"select"===b.mode?".success_class":".active_class",s+='" ',s+='class="'+t.iterator+'_class" ng-repeat="'+t.iterator+" in "+t.name,s+=t.orderBy?" | orderBy:'"+t.orderBy+"'":"",s+=t.filterBy?" | filter: "+t.filterBy:"",s+='"',s+=">\n",t.index&&(s+='<td class="index-column hidden-xs">{{ $index + (('+t.iterator+"_page - 1) * "+t.iterator+"_page_size) + 1 }}.</td>\n"),o=2,c=t.base?t.base:t.name,c=c.replace(/^\//,"");for(n in t.fields)o++,void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+=h({list:t,fld:n,options:b,base:c}));if("select"===b.mode||"lookup"===b.mode)s+='<td><input type="checkbox" ng-model="'+t.iterator+'.checked" name="check_{{'+t.iterator+'.id }}" ng-click="toggle_'+t.iterator+"({{ "+t.iterator+'.id }}, true)" ng-true-value="1" ng-false-value="0" id="check_{{'+t.iterator+'.id}}" /></td>';else if(("edit"===b.mode||"summary"===b.mode)&&t.fieldActions){s+='<td class="actions">';for(p in t.fieldActions)if("columnClass"!==p)if(t.fieldActions[p].type&&"DropDown"===t.fieldActions[p].type)s+=i({list:t,fld:p,options:b,base:c,type:"fieldActions",td:!1});else{q=t.fieldActions[p],s+="<a ",s+=q.href?'href="'+q.href+'" ':"",s+=q.ngHref?'ng-href="'+q.ngHref+'" ':"",s+="cancel"===p?'class="cancel red-txt" ':"",s+=q.awPopOver?'aw-pop-over="'+q.awPopOver+'" ':"",s+=q.dataPlacement?f(q,"dataPlacement"):"",s+=q.dataTitle?f(q,"dataTitle"):"";for(r in q)"ngHref"!==r&&"href"!==r&&"label"!==r&&"icon"!==r&&"class"!==r&&"iconClass"!==r&&"dataPlacement"!==r&&"awPopOver"!==r&&"dataTitle"!==r&&(s+=f(q,r));s+=">",s+=q.iconClass?'<i class="'+q.iconClass+'"></i>':l({action:p}),s+=q.label?" "+t.fieldActions[p].label:"",s+="</a>"}s+="</td>"}return s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+"Loading == false && ("+t.name+" == null || "+t.name+'.length == 0)">\n',s+='<td colspan="'+o+'"><div class="alert alert-info">No records matched your search.</div></td>\n',s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+'Loading == true">\n',s+='<td colspan="'+o+'"><div class="alert alert-info">Loading...</div></td>\n',s+="</tr>\n",s+="</tbody>\n",s+="</table>\n","select"!==b.mode||void 0!==b.selectButton&&!b.selectButton||(s+='<div class="navigation-buttons">\n',s+=' <button class="btn btn-sm btn-primary pull-right" aw-tool-tip="Complete your selection" ng-click="finishSelection()" ng-disabled="disableSelectBtn"><i class="fa fa-check"></i> Select</button>\n',s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&t.well!==!0||(s+="</div>\n"),"groups"!==t.name&&(s+=e("lookup"===b.mode||b.id&&"form-modal-body"===b.id?{set:t.name,iterator:t.iterator}:{set:t.name,iterator:t.iterator})),s}}}]),angular.module("PromptDialog",["Utilities"]).factory("Prompt",[function(){return function(a){var b,c=angular.element(document.getElementById("prompt-modal")),d=c.scope();d.promptHeader=a.hdr,d.promptBody=a.body,d.promptAction=a.action,b=null===a["class"]||void 0===a["class"]?"btn-danger":a["class"],$("#prompt_action_btn").removeClass(b).addClass(b),$(c).modal({backdrop:"static",keyboard:!0,show:!0})}}]),String.prototype.strReverse=function(){var a,b="";for(a=0;a<this.length;a++)b=this.charAt(a)+b;return b};var nScore=0,$AnsibleConfig={tooltip_delay:{show:500,hide:100},debug_mode:!0,password_strength:45,session_timeout:1800};AdminsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","AdminList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","GetBasePath","SelectionInit"],Authenticate.$inject=["$cookieStore","$window","$scope","$rootScope","$location","Authorization","ToggleClass","Alert","Wait","Timer","Empty"],CredentialsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","CredentialList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","GetChoices","Wait","Stream"],CredentialsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","SearchInit","PaginateInit","LookUpInit","UserList","TeamList","GetBasePath","GetChoices","Empty","KindChange","OwnerChange","FormSave"],CredentialsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","Prompt","GetBasePath","GetChoices","KindChange","UserList","TeamList","LookUpInit","Empty","OwnerChange","FormSave","Stream","Wait"],Home.$inject=["$scope","$compile","$routeParams","$rootScope","$location","Wait","ObjectCount","JobStatus","InventorySyncStatus","SCMSyncStatus","ClearScope","Stream","Rest","GetBasePath","ProcessErrors","Button"],HomeGroups.$inject=["$location","$routeParams","HomeGroupList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","GetHostsStatusMsg","GetSyncStatusMsg","ViewUpdateStatus","Stream","GroupsEdit","Wait","Alert","Rest","Empty","InventoryUpdate","Find"],HomeHosts.$inject=["$location","$routeParams","HomeHostList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","SetStatus","ToggleHostEnabled","HostsEdit","Stream","Find","ShowJobSummary"],InventoriesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","InventoryList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Wait","Stream","EditInventoryProperties"],InventoriesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","LookUpInit","GetBasePath","ParseTypeChange","Wait"],InventoriesEdit.$inject=["$scope","$location","$routeParams","$compile","GenerateList","ClearScope","InventoryGroups","InventoryHosts","BuildTree","Wait","GetSyncStatusMsg","InjectHosts","HostsReload","GroupsAdd","GroupsEdit","GroupsDelete","Breadcrumbs","LoadBreadCrumbs","Empty","Rest","ProcessErrors","InventoryUpdate","Alert","ToggleChildren","ViewUpdateStatus","GroupsCancelUpdate","Find","HostsCreate","EditInventoryProperties","HostsEdit","HostsDelete","ToggleHostEnabled","CopyMoveGroup","CopyMoveHost","Stream","GetBasePath","ShowJobSummary","ApplyEllipsis","WatchInventoryWindowResize","HelpDialog","InventoryGroupsHelp","Store"],JobEventsList.$inject=["$filter","$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobEventList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","ToggleChildren","FormatDate","EventView","Refresh","Wait"],JobEventsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobEventsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","FormatDate","EventView","Wait"],JobHostSummaryList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobHostList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Refresh","JobStatusToolTip","Wait"],JobTemplatesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobTemplateList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","PromptPasswords","JobTemplateForm","CredentialList","LookUpInit","SubmitJob","Wait","Stream"],JobTemplatesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","InventoryList","CredentialList","ProjectList","LookUpInit","md5Setup","ParseTypeChange","Wait","Empty"],JobTemplatesEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","ParseTypeChange","JobStatusToolTip","FormatDate","Wait","Stream","Empty","Prompt"],JobsListCtrl.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","SubmitJob","FormatDate","Refresh","JobStatusToolTip","Empty","Wait"],JobsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","FormatDate","JobStatusToolTip","Wait"],OrganizationsList.$inject=["$routeParams","$scope","$rootScope","$location","$log","Rest","Alert","LoadBreadCrumbs","Prompt","GenerateList","OrganizationList","SearchInit","PaginateInit","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],OrganizationsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","Wait"],OrganizationsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","Wait","Stream"],PermissionsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","PermissionList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","CheckAccess","Wait"],PermissionsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],PermissionsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","Prompt","GetBasePath","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],ProjectsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","ProjectList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","ProjectUpdate","ProjectStatus","FormatDate","Refresh","Wait","Stream","GetChoices","Empty"],ProjectsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","LookUpInit","OrganizationList","CredentialList","GetChoices","DebugForm","Wait"],ProjectsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","Authorization","CredentialList","LookUpInit","GetChoices","Empty","DebugForm","Wait","Stream"],TeamsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","TeamList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","SetTeamListeners","GetBasePath","SelectionInit","Wait","Stream"],TeamsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","GetBasePath","LookUpInit","Wait"],TeamsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","LookUpInit","Prompt","GetBasePath","CheckAccess","OrganizationList","Wait","Stream"],UsersList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","UserList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],UsersAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","LookUpInit","OrganizationList","ResetForm","Wait"],UsersEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","GetBasePath","Prompt","CheckAccess","ResetForm","Wait","Stream"],angular.module("ActivityDetailDefinition",[]).value("ActivityDetailForm",{name:"activity",editTitle:"Activity Detail",well:!1,"class":"horizontal-narrow",formFieldSize:"col-lg-10",formLabelSize:"col-lg-2",fields:{user:{label:"Initiated by",type:"text",readonly:!0},operation:{label:"Action",type:"text",readonly:!0},changes:{label:"Changes",type:"textarea",ngHide:"!changes || changes =='' || changes == 'null'",readonly:!0}}}),angular.module("CredentialFormDefinition",[]).value("CredentialForm",{addTitle:"Create Credential",editTitle:"{{ name }}",name:"credential",well:!0,forceListeners:!0,actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"edit"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,autocomplete:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},owner:{label:"Does this credential belong to a team or user?",type:"radio_group",ngChange:"ownerChange()",options:[{label:"User",value:"user",selected:!0},{label:"Team",value:"team"}],awPopOver:"<p>A credential must be associated with either a user or a team. Choosing a user allows only the selected user access to the credential. Choosing a team shares the credential with all team members.</p>",dataTitle:"Owner",dataPlacement:"right",dataContainer:"body"},user:{label:"User that owns this credential",type:"lookup",sourceModel:"user",sourceField:"username",ngClick:"lookUpUser()",ngShow:"owner == 'user'",awRequiredWhen:{variable:"user_required",init:"false"}},team:{label:"Team that owns this credential",type:"lookup",sourceModel:"team",sourceField:"name",ngClick:"lookUpTeam()",ngShow:"owner == 'team'",awRequiredWhen:{variable:"team_required",init:"false"}},kind:{label:"Type",excludeModal:!0,type:"select",ngOptions:"kind.label for kind in credential_kind_options",ngChange:"kindChange()",addRequired:!0,editRequired:!0,helpCollapse:[{hdr:"Select a Credential Type",content:"<dl>\n<dt>AWS</dt>\n<dd>Access keys for Amazon Web Services used for inventory management or deployment.</dd>\n<dt>Machine</dt>\n<dd>Authentication for remote machine access. This can include SSH keys, usernames, passwords, and sudo information. Machine credentials are used when submitting jobs to run playbooks against remote hosts.</dd><dt>Rackspace</dt>\n<dd>Access information for Rackspace Cloud used for inventory management or deployment.</dd>\n<dt>SCM</dt>\n<dd>Used to check out and synchronize playbook repositories with a remote source control management system such as Git, Subversion (svn), or Mercurial (hg). These credentials are used on the Projects tab.</dd>\n</dl>\n"}]},access_key:{label:"Access Key",type:"text",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,apiField:"username"},secret_key:{label:"Secret Key",type:"password",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},username:{labelBind:"usernameLabel",type:"text",ngShow:"kind.value && kind.value !== 'aws'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1},api_key:{label:"API Key",type:"password",ngShow:"kind.value == 'rax'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},password:{label:"Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",ask:!1,clear:!1,associated:"password_confirm",autocomplete:!1},password_confirm:{label:"Confirm Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},ssh_password:{label:"SSH Password",type:"password",ngShow:"kind.value == 'ssh'",ngChange:"clearPWConfirm('ssh_password_confirm')",addRequired:!1,editRequired:!1,ask:!0,clear:!0,associated:"ssh_password_confirm",autocomplete:!1},ssh_password_confirm:{label:"Confirm SSH Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_password",autocomplete:!1},ssh_key_data:{labelBind:"sshKeyDataLabel",type:"textarea",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,"class":"ssh-key-field",rows:10},ssh_key_unlock:{label:"Key Password",type:"password",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('ssh_key_unlock_confirm')",associated:"ssh_key_unlock_confirm",ask:!0,askShow:"kind.value == 'ssh'",clear:!0},ssh_key_unlock_confirm:{label:"Confirm Key Password",type:"password",ngShow:"kind.value == 'ssh'  || kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_key_unlock"},sudo_username:{label:"Sudo Username",type:"text",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,autocomplete:!1},sudo_password:{label:"Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('sudo_password_confirm')",ask:!0,clear:!0,associated:"sudo_password_confirm",autocomplete:!1},sudo_password_confirm:{label:"Confirm Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"sudo_password",autocomplete:!1}},buttons:{save:{label:"Save",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("GroupFormDefinition",[]).value("GroupForm",{addTitle:"Create Group",editTitle:"Edit Group",showTitle:!0,cancelButton:!1,name:"group",well:!0,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",tabs:[{name:"properties",label:"Properties"},{name:"source",label:"Source"}],fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,tab:"properties"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,tab:"properties"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",dataTitle:"Group Variables",dataPlacement:"right",awPopOver:'<p>Variables defined here apply to all child groups and hosts.</p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"properties"},source:{label:"Source",type:"select",ngOptions:"source.label for source in source_type_options",ngChange:"sourceChange()",addRequired:!1,editRequired:!1,tab:"source"},source_path:{label:"Script Path",ngShow:"source && source.value == 'file'",type:"text",awRequiredWhen:{variable:"sourcePathRequired",init:"false"},tab:"source"},credential:{label:"Cloud Credential",type:"lookup",ngShow:"source && source.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,tab:"source"},source_regions:{label:"Regions",type:"text",ngShow:"source && (source.value == 'rax' || source.value == 'ec2')",addRequired:!1,editRequired:!1,awMultiselect:"source_region_choices",dataTitle:"Source Regions",dataPlacement:"right",awPopOver:"<p>Click on the regions field to see a list of regions for your cloud provider. You can select multiple regions, or choose <em>All</em> to include all regions. Tower will only be updated with Hosts associated with the selected regions.</p>",dataContainer:"body",tab:"source"},source_vars:{label:"Source Variables",ngShow:"source && (source.value == 'file' || source.value == 'ec2')",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",parseTypeName:"envParseType",dataTitle:"Source Variables",dataPlacement:"right",awPopOver:'<p>Override variables found in ec2.ini and used by the inventory update script. For a detailed description of these variables <a href="https://github.com/ansible/ansible/blob/devel/plugins/inventory/ec2.ini" target="_blank">view ec2.ini in the Ansible github repo.</a></p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"source"},checkbox_group:{label:"Update Options",type:"checkbox_group",ngShow:"source && (source.value !== '' && source.value !== null)",tab:"source",fields:[{name:"overwrite",label:"Overwrite",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>When checked all child groups and hosts not found on the remote source will be deleted from the local inventory.</p><p>Unchecked any local child hosts and groups not found on the external source will remain untouched by the inventory update process.</p>",dataTitle:"Overwrite",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"overwrite_vars",label:"Overwrite Variables",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>If checked, all variables for child groups and hosts will be removed and replaced by those found on the external source.</p><p>When not checked a merge will be performed, combining local variables with those found on the external source.</p>",dataTitle:"Overwrite Variables",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"update_on_launch",label:"Update on Launch",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this inventory, refresh the inventory from the selected source before executing job tasks.</p>",dataTitle:"Update on Launch",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{labelClass:"col-lg-3",controlClass:"col-lg-5",save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostGroupsFormDefinition",[]).value("HostGroupsForm",{editTitle:"Host Groups",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{groups:{label:"Groups",type:"select",multiple:!0,ngOptions:"group.name for group in inventory_groups",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostFormDefinition",[]).value("HostForm",{addTitle:"Create Host",editTitle:"{{ name }}",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{name:{label:"Host Name",type:"text",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},enabled:{label:"Enabled?",type:"checkbox",addRequired:!1,editRequired:!1,"default":!0,awPopOver:"<p>Indicates if a host is available and should be included in running jobs.</p><p>For hosts that are part of an external inventory, this flag cannot be changed. It will be set by the inventory sync process.</p>",dataTitle:"Host Enabled",dataPlacement:"right",dataContainer:"#form-modal .modal-content",ngDisabled:"has_inventory_sources == true"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"class":"modal-input-xlarge","default":"---",awPopOver:'<p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Host Variables",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},inventory:{type:"hidden",includeOnEdit:!0,includeOnAdd:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("InventoryFormDefinition",[]).value("InventoryForm",{addTitle:"Create Inventory",editTitle:"{{ inventory_name | capitalize }}",name:"inventory",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{inventory_name:{realName:"name",label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},inventory_description:{realName:"description",label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"}},inventory_variables:{realName:"variables",label:"Variables",type:"textarea","class":"span12",addRequired:!1,editRequird:!1,parseTypeName:"inventoryParseType",rows:6,"default":"---",awPopOver:'<p>Enter inventory variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Inventory Variables",dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("JobEventDataDefinition",[]).value("JobEventDataForm",{editTitle:"{{ id }} - {{ event_display }}",name:"job_events",well:!1,"class":"horizontal-narrow",fields:{event_data:{label:!1,type:"textarea",readonly:!0,rows:18,"class":"modal-input-xxlarge"}}}),angular.module("JobEventsFormDefinition",[]).value("JobEventsForm",{name:"job_events",well:!1,forceListeners:!0,fields:{status:{labelClass:"job-{{ status }}",type:"custom",section:"Event",control:'<div class="job-event-status job-{{ status }}"><i class="fa icon-job-{{ status }}"></i> {{ status }}</div>'},id:{label:"ID",type:"text",readonly:!0,section:"Event","class":"span1"},created:{label:"Created On",type:"text",section:"Event",readonly:!0},host:{label:"Host",type:"text",readonly:!0,section:"Event",ngShow:"host !== ''"},play:{label:"Play",type:"text",readonly:!0,section:"Event",ngShow:"play !== ''"},task:{label:"Task",type:"text",readonly:!0,section:"Event",ngShow:"task !== ''"},rc:{label:"Return Code",type:"text",readonly:!0,section:"Results","class":"span1",ngShow:"rc !== ''"},msg:{label:"Msg",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"msg !== ''",rows:10},stdout:{label:"Std Out",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stdout !== ''",rows:10},stderr:{label:"Std Err",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stderr !== ''",rows:10},results:{label:"Results",type:"textarea",section:"Results",readonly:!0,"class":"nowrap",ngShow:"results !== ''",rows:10},start:{label:"Start",type:"text",readonly:!0,section:"Timing",ngShow:"start !== ''"},traceback:{label:!1,type:"textarea",readonly:!0,section:"Traceback","class":"nowrap",ngShow:"traceback !== ''",rows:10},end:{label:"End",type:"text",readonly:!0,section:"Timing",ngShow:"end !== ''"},delta:{label:"Elapsed",type:"text",readonly:!0,section:"Timing",ngShow:"delta !== ''"},module_name:{label:"Name",type:"text",readonly:!0,section:"Module",ngShow:"module_name !== ''"},module_args:{label:"Args",type:"text",readonly:!0,section:"Module",ngShow:"module_args !== ''"}}}),angular.module("JobSummaryDefinition",[]).value("JobSummary",{editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!1,fields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space resizable",ngShow:'result_stdout != ""'},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space resizable",ngShow:'result_traceback != ""'}}}),angular.module("JobTemplateFormDefinition",[]).value("JobTemplateForm",{addTitle:"Create Job Templates",editTitle:"{{ name }}",name:"job_templates",twoColumns:!0,well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body"},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"},column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"true"},column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",awRequiredWhen:{variable:"playbookrequired",init:"true"},column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Machine Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCloudcredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"default":"0",addRequired:!1,editRequired:!1,"class":"input-small",column:1,awPopOver:'<p>The number of parallel or simultaneous processes to use while executing the playbook. 0 signifies the default value from the <a href="http://docs.ansible.com/intro_configuration.html#the-ansible-configuration-file"  target="_blank">ansible configuration file</a>.</p>',dataTitle:"Forks",dataPlacement:"right",dataContainer:"body"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see <a href="http://docs.ansible.com/intro_patterns.html" target="_blank">the Patters top at docs.ansible.com</a>.</p>',dataTitle:"Limit",dataPlacement:"right",dataContainer:"body"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,"default":"---",column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataPlacement:"right",dataContainer:"body"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataPlacement:"right",dataContainer:"body"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting the Tower server using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{jobs:{type:"collection",title:"Jobs",iterator:"job",index:!1,open:!1,actions:{reset:{dataPlacement:"top",icon:"icon-undo",mode:"all","class":"btn-xs btn-primary",awToolTip:"Reset the search filter",ngClick:"resetSearch('job')",iconSize:"large"}},fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},created:{label:"Date",link:!1,searchable:!1},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{}} job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},fieldActions:{edit:{label:"View",ngClick:"edit('jobs', job.id, job.name)",icon:"icon-zoom-in"}}}}}),angular.module("JobFormDefinition",[]).value("JobForm",{addTitle:"Create Job",editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!0,collapse:!0,collapseMode:"edit",collapseTitle:"Job Template",twoColumns:!0,navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",active:!0,ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{name:{label:"Job Template",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":"run",addRequired:!0,editRequired:!0,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body",column:1},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpInventory()",column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpProject()",column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"class":"input-small","default":"0",addRequired:!1,editRequired:!1,column:1,disabled:!0,awPopOver:"<p>The number of parallel or simultaneous processes to use while executing the playbook.</p>",dataContainer:"body",dataTitle:"Forks",dataPlacement:"right"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see the <a href="http://ansible.cc/docs/patterns.html#selecting-targets" target="_blank">Selecting Targets section</a> under Inventory and Patterns  in the Ansible documentation.</p>',dataContainer:"body",dataTitle:"Limit",dataPlacement:"right"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataContainer:"body",dataPlacement:"right"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataContainer:"body",dataPlacement:"right"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')","class":"span12",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting Tower using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{label:"Save",icon:"icon-ok","class":"btn-success",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",label:"Reset",icon:"icon-undo","class":"btn btn-default",ngDisabled:!0}},statusFields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space",ngShow:"result_stdout != ''"},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space",ngShow:"result_traceback != ''"}},statusActions:{refresh:{dataPlacement:"top",icon:"icon-refresh",iconSize:"large",mode:"all","class":"btn-xs btn-primary",awToolTip:"Refresh the page",ngClick:"refresh()"}}}),angular.module("LicenseFormDefinition",[]).value("LicenseForm",{name:"license",well:!1,forceListeners:!0,fields:{license_status:{type:"custom",control:'<div class="license-status" ng-class="status_color"><i class="fa fa-circle"></i> {{ license_status }}</span></div>',readonly:!0,section:"License"},license_key:{label:"Key",type:"textarea","class":"modal-input-xlarge",readonly:!0,section:"License"},license_date:{label:"Expires On",type:"text",readonly:!0,section:"License"},time_remaining:{label:"Time Left",type:"text",readonly:!0,section:"License"},available_instances:{label:"Available",type:"text",readonly:!0,section:"Managed Hosts"},current_instances:{label:"Used",type:"text",readonly:!0,section:"Managed Hosts"},free_instances:{label:"Remaining",type:"text",readonly:!0,section:"Managed Hosts",controlNGClass:"free_instances_class",labelNGClass:"free_instances_class"},company_name:{label:"Company",type:"text",readonly:!0,section:"Contact Info"},contact_name:{label:"Contact",type:"text",readonly:!0,section:"Contact Info"},contact_email:{label:"Contact Email",type:"text",readonly:!0,section:"Contact Info"}}}),angular.module("OrganizationFormDefinition",[]).value("OrganizationForm",{addTitle:"Create Organization",editTitle:"{{ name }}",name:"organization",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",label:"Add",icon:"icon-plus",awToolTip:"Add a new user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit","class":"btn-default",awToolTip:"Edit user"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove user"}}},admins:{type:"collection",title:"Administrators",iterator:"admin",open:!1,base:"/users",actions:{add:{ngClick:"add('admins')",icon:"icon-plus",label:"Add",awToolTip:"Add new administrator"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', admin.id, admin.username)",icon:"icon-edit",awToolTip:"Edit administrator","class":"btn-default"},"delete":{label:"Delete",ngClick:"delete('admins', admin.id, admin.username, 'administrators')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove administrator"}}}}}),angular.module("PermissionFormDefinition",[]).value("PermissionsForm",{addTitle:"Add Permission",editTitle:"{{ name }}",name:"permission",well:!0,forceListeners:!0,stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"},fields:{category:{label:"Permission Type",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Inventory",value:"Inventory",selected:!0},{label:"Deployment",value:"Deploy"}],ngChange:"selectCategory()"},name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},user:{label:"User",type:"hidden"},team:{label:"Team",type:"hidden"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngShow:"category == 'Deploy'",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"false"}},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"}},permission_type:{label:"Permission",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Read",value:"read",ngShow:"category == 'Inventory'"},{label:"Write",value:"write",ngShow:"category == 'Inventory'"},{label:"Admin",value:"admin",ngShow:"category == 'Inventory'"},{label:"Run",value:"run",ngShow:"category == 'Deploy'"},{label:"Check",value:"check",ngShow:"category == 'Deploy'"}],helpCollapse:[{hdr:"Permission",ngBind:"permissionTypeHelp"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("ProjectStatusDefinition",[]).value("ProjectStatusForm",{name:"project_update",editTitle:"SCM Status",well:!1,"class":"horizontal-narrow",fields:{created:{label:"Created",type:"text",readonly:!0},status:{label:"Status",type:"text",readonly:!0},result_stdout:{label:"Std Out",type:"textarea",ngShow:"result_stdout","class":"mono-space",readonly:!0,rows:15},result_traceback:{label:"Traceback",type:"textarea",ngShow:"result_traceback","class":"mono-space",readonly:!0,rows:15}}}),angular.module("ProjectFormDefinition",[]).value("ProjectsForm",{addTitle:"Create Project",editTitle:"{{ name }}",name:"project",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",addRequired:!0,editRequired:!1,excludeMode:"edit",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"},awPopOver:"<p>A project must have at least one organization. Pick one organization now to create the project, and then after the project is created you can add additional organizations.</p><p>Only super users and organization administrators are allowed to make changes to projects. Associating one or more organizations to a project determins which organizations admins have access to modify the project.",dataTitle:"Organization",dataContainer:"body",dataPlacement:"right"},scm_type:{label:"SCM Type",type:"select",ngOptions:"type.label for type in scm_type_options",ngChange:"scmChange()",addRequired:!0,editRequired:!0},missing_path_alert:{type:"alertblock","class":"alert-info",ngShow:"showMissingPlaybooksAlert && scm_type.value == ''",alertTxt:'<p class="text-justify"><strong>WARNING:</strong> There are no unassigned playbook directories in the base project path {{ base_dir }}. Either the projects directory is empty, or all of the contents are already assigned to other projects. New projects can be checked out from source control by changing the SCM type option rather than specifying checkout paths manually. To continue with manual setup, log into the Tower host and ensure content is present in a subdirectory under {{ base_dir }}. Run "chown -R awx" on the content directory to ensure Tower can read the playbooks.</p>',closeable:!1},base_dir:{label:"Project Base Path",type:"textarea",showonly:!0,ngShow:"scm_type.value == ''",awPopOver:"<p>Base path used for locating playbooks. Directories found inside this path will be listed in the playbook directory drop-down. Together the base path and selected playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Base Path",dataContainer:"body",dataPlacement:"right"},local_path:{label:"Playbook Directory",type:"select",id:"local-path-select",ngOptions:"path.label for path in project_local_paths",awRequiredWhen:{variable:"pathRequired",init:!1},ngShow:"scm_type.value == '' && !showMissingPlaybooksAlert",awPopOver:"<p>Select from the list of directories found in the base path.Together the base path and the playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Path",dataContainer:"body",dataPlacement:"right"},scm_url:{label:"SCM URL",type:"text",ngShow:"scm_type && scm_type.value !== ''",awRequiredWhen:{variable:"scmRequired",init:!1},helpCollapse:[{hdr:"GIT URLs",content:'<p>Example URLs for GIT SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible.git</li><li>git@github.com:ansible/ansible.git</li><li>git://servername.example.com/ansible.git</li></ul><p><strong>Note:</strong> If using SSH protocol for GitHub or Bitbucket, enter in the SSH key only, do not enter a username (other than git). Additionally, GitHub and Bitbucket do not support password authentication when using SSH protocol. GIT read only protocol (git://) does not use username or password information.',show:"scm_type.value == 'git'"},{hdr:"SVN URLs",content:'<p>Example URLs for Subversion SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible</li><li>svn://servername.example.com/path</li><li>svn+ssh://servername.example.com/path</li></ul>',show:"scm_type.value == 'svn'"},{hdr:"Mercurial URLs",content:'<p>Example URLs for Mercurial SCM include:</p><ul class="no-bullets"><li>https://bitbucket.org/username/project</li><li>ssh://hg@bitbucket.org/username/project</li><li>ssh://server.example.com/path</li></ul><p><strong>Note:</strong> Mercurial does not support password authentication for SSH. If applicable, add the username, password and key below. Do not put the username and key in the URL. If using Bitbucket and SSH, do not supply your Bitbucket username.',show:"scm_type.value == 'hg'"}]},scm_branch:{labelBind:"scmBranchLabel",type:"text",ngShow:"scm_type && scm_type.value !== ''",addRequired:!1,editRequired:!1},credential:{label:"SCM Credential",type:"lookup",ngShow:"scm_type && scm_type.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1},checkbox_group:{label:"SCM Update Options",type:"checkbox_group",ngShow:"scm_type && scm_type.value !== ''",fields:[{name:"scm_clean",label:"Clean",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Remove any local modifications prior to performing an update.</p>",dataTitle:"SCM Clean",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_delete_on_update",label:"Delete on Update",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Delete the local repository in its entirety prior to performing an update.</p><p>Depending on the size of the repository this may significantly increase the amount of time required to complete an update.</p>",dataTitle:"SCM Delete",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_update_on_launch",label:"Update on Launch",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this project, perform an update to the local repository prior to starting the job.</p>",dataTitle:"SCM Update",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{add:{ngClick:"add('organizations')",icon:"icon-plus",label:"Add",awToolTip:"Add an organization"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('organizations', organization.id, organization.name)",icon:"icon-edit",awToolTip:"Edit the organization","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('organizations', organization.id, organization.name, 'organizations')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the organization"}}}}}),angular.module("TeamFormDefinition",[]).value("TeamForm",{addTitle:"Create Team",editTitle:"{{ name }}",name:"team",well:!0,collapse:!0,collapseTitle:"Team Settings",collapseMode:"edit",collapseOpen:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"teamrequired",init:"true"}}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",add:"Add a new credential"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Modify the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{add:{ngClick:"add('projects')",icon:"icon-plus",label:"Add"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('projects', project.id, project.name)",icon:"icon-edit",awToolTip:"Modify the project","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('projects', project.id, project.name, 'projects')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the project"}}},users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",icon:"icon-plus",label:"Add",awToolTip:"Add a user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit",awToolTip:"Edit user","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-terash","class":"btn-danger",awToolTip:"Remove user"}}}}}),angular.module("UserFormDefinition",[]).value("UserForm",{addTitle:"Create User",editTitle:"{{ username }}",name:"user",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{first_name:{label:"First Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},last_name:{label:"Last Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},email:{label:"Email",type:"email",addRequired:!0,editRequired:!0,autocomplete:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",excludeMode:"edit",awRequiredWhen:{variable:"orgrequired",init:!0}},username:{label:"Username",type:"text",awRequiredWhen:{variable:"not_ldap_user",init:!0},autocomplete:!1},password:{label:"Password",type:"password",ngShow:"ldap_user == false",addRequired:!0,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",autocomplete:!1,chkPass:!0},password_confirm:{label:"Confirm Password",type:"password",ngShow:"ldap_user == false",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},is_superuser:{label:"Superuser (User has full system administration privileges.)",type:"checkbox",trueValue:"true",falseValue:"false","default":"false",ngShow:"current_user['is_superuser'] == true"},ldap_user:{label:"Created by LDAP",type:"checkbox",readonly:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",awToolTip:"Add a credential for this user"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Edit the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},admin_of_organizations:{type:"collection",title:"Admin of Organizations",iterator:"adminof",open:!1,base:"/organizations",actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},teams:{type:"collection",title:"Teams",iterator:"team",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}}}}),angular.module("InventoryGroupsHelpDefinition",[]).value("InventoryGroupsHelp",{story:{hdr:"Building your inventory",width:510,height:560,steps:[{intro:"Start by creating a group:",img:{src:"groups001.png",maxWidth:338,maxHeight:222},box:'Click <i class="fa fa-plus"></i> on the groups list (the left side of the page) to add a new group.',autoOffNotice:!0},{intro:"Enter group properties:",img:{src:"groups002.png",maxWidth:443,maxHeight:251},box:'Enter the group name, a description and any inventory variables. Variables can be entered using either JSON or YAML syntax. For more on inventory variables, see <a href="http://docs.ansible.com/intro_inventory.html" target="_blank"> docs.ansible.com/intro_inventory.html</a>'},{intro:"Cloud inventory: select cloud source",img:{src:"groups003.png",maxWidth:412,maxHeight:215},box:'For a cloud inventory, choose the cloud provider from the list and select your credentials. If you have not already setup credentials for the provider, you will need to do that first on the <a href="/#/credentials" target="_blank">Credentials</a> tab.'},{intro:"Cloud inventory: synchronize Tower with the cloud",img:{src:"groups004.png",maxWidth:261,maxHeight:221},box:'To pull the cloud inventory into Tower, initiate an inventory sync by clicking <i class="fa fa-exchange"></i>.'},{intro:"Groups can have subgroups:",img:{src:"groups005.png",maxWidth:430,maxHeight:206},box:'<div class="text-left">First, select a group. Then click <i class="fa fa-plus"></i> to create a new group. The new group will be added to the selected group.</div>'},{intro:"Copy or move groups:",img:{src:"groups006.png",maxWidth:263,maxHeight:211},box:'<div class="text-left">Copy or move a group by dragging and dropping its name onto another group name. A dialog will appear asking if the group should be coppied or moved.</div>'},{intro:"Adding hosts:",img:{src:"groups007.png",maxWidth:466,maxHeight:178},box:'<div class="text-left"><p>First, select a Group. Then click <i class="fa fa-plus"></i> on the hosts list (the right side of the page) to create a host. The new host will be part of the selected group.</p><p>Note hosts cannot be added to the All Hosts group.</p></div>'}]}}),angular.module("AccessHelper",["RestServices","Utilities","ngCookies"]).factory("CheckAccess",["$rootScope","Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d,e){return function(b){var d=a.current_user,f=b.scope;
d.is_superuser?f.PermissionAddAllowed=!0:d.related.admin_of_organizations&&(c.setUrl(d.related.admin_of_organizations),c.get().success(function(a){f.PermissionAddAllowed=a.results.length>0?!0:!1}).error(function(a,b){e(f,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.admin_of_organizations+" failed. DELETE returned status: "+b})}))}}]).factory("CheckLicense",["$rootScope","$cookieStore","Alert","$location","Authorization",function(a,b,c,d,e){return function(){var d,f,g="success",h=b.get("license"),i='<p>To purchase a license or extend an existing license <a href="http://www.ansible.com/ansible-pricing" target="_blank"><strong>visit the Ansible online store</strong></a>, or visit <strong><a href="https://support.ansible.com" target="_blank">support.ansible.com</a></strong> for assistance.</p>';h&&!e.licenseTested()&&(h.tested=!0,b.remove("license"),b.put("license",h),a.license_tested=!0,void 0!==h.valid_key&&h.valid_key===!1?(g="alert-danger",d="License Error",f="<p>There is a problem with the /etc/awx/license file on your Tower server. Check to make sure Tower can access the file.</p>"+i,c(d,f,g,null,!1,!0)):void 0!==h.demo&&h.demo===!0&&(g="alert-info",d="Tower Demo",f="<p>Thank you for trying Ansible Tower. You can use this edition to manage up to 10 hosts free.</p>"+i,c(d,f,g)),void 0!==h.date_expired&&h.date_expired===!0?(g="alert-info",d="License Expired",f="<p>Your Ansible Tower License has expired and is no longer compliant. You can continue, but you will be unable to add any additional hosts.</p>"+i,c(d,f,g)):void 0!==h.date_warning&&h.date_warning===!0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license is about to expire!</p>"+i,c(d,f,g)),void 0!==h.free_instances&&parseInt(h.free_instances)<=0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license has reached capacity for the number of managed hosts allowed. You will not be able to add any additional hosts.</p>"+i,c(d,f,g,null,!0)))}}]),angular.module("ChildrenHelper",["RestServices","Utilities"]).factory("ToggleChildren",[function(){return function(a){function b(a){var b;for(i[a].ngicon="fa fa-minus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!0)}function c(a){var b;for(i[a].ngicon="fa fa-plus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!1,i[b].related.children&&c(b))}var d,e,f=a.scope,g=a.list,h=a.id,i=f[g.name],j=!1;for(d=0;d<i.length&&j===!1;d++)i[d].id===h&&(e=d,j=!0);/plus-square-o/.test(i[e].ngicon)?b(e):/minus-square-o/.test(i[e].ngicon)&&c(e)}}]),angular.module("CredentialsHelper",["Utilities"]).factory("KindChange",["Empty",function(a){return function(b){var c,d,e=b.scope,f=b.reset;if(e.usernameLabel="Username",e.aws_required=!1,e.rackspace_required=!1,e.sshKeyDataLabel="SSH Private Key",!a(e.kind))switch(e.kind.value){case"aws":e.aws_required=!0;break;case"rax":e.rackspace_required=!0;break;case"ssh":e.usernameLabel="SSH Username";break;case"scm":e.sshKeyDataLabel="SCM Private Key"}f&&(e.access_key=null,e.secret_key=null,e.api_key=null,e.username=null,e.password=null,e.password_confirm=null,e.ssh_key_data=null,e.ssh_key_unlock=null,e.ssh_key_unlock_confirm=null,e.sudo_username=null,e.sudo_password=null,e.sudo_password_confirm=null),c=$("#credential_kind").parent().find(".panel-collapse").first(),d=c.attr("id"),a(e.kind)||""===e.kind.value?$("#"+d+"-icon").hasClass("icon-plus")&&e.accordionToggle("#"+d):$("#"+d+"-icon").hasClass("icon-minus")&&e.accordionToggle("#"+d)}}]).factory("OwnerChange",[function(){return function(a){var b=a.scope,c=b.owner;"team"===c?(b.team_required=!0,b.user_required=!1,b.user=null,b.user_username=null):(b.team_required=!1,b.user_required=!0,b.team=null,b.team_name=null)}}]).factory("FormSave",["$location","Alert","Rest","ProcessErrors","Empty","GetBasePath","CredentialForm","ReturnToCaller","Wait",function(a,b,c,d,e,f,g,h,i){return function(j){var k,l,m=j.scope,n=j.mode,o=g,p={};for(k in o.fields)"access_key"!==k&&"secret_key"!==k&&"ssh_username"!==k&&"ssh_password"!==k&&(p[k]=null===m[k]?"":m[k]);switch(e(m.team)?(p.user=m.user,p.team=""):(p.team=m.team,p.user=""),p.kind=m.kind.value,p.kind){case"ssh":p.password=m.ssh_password;break;case"aws":p.username=m.access_key,p.password=m.secret_key;break;case"rax":p.password=m.api_key}e(p.team)&&e(p.user)?b("Missing User or Team","You must provide either a User or a Team. If this credential will only be accessed by a specific user, select a User. To allow a team of users to access this credential, select a Team.","alert-danger"):(i("start"),"add"===n?(l=e(p.team)?f("users")+p.user+"/credentials/":f("teams")+p.team+"/credentials/",c.setUrl(l),c.post(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to create new Credential. POST status: "+b})})):(l=f("credentials")+m.id+"/",c.setUrl(l),c.put(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to update Credential. PUT status: "+b})})))}}]),angular.module("EventsHelper",["RestServices","Utilities","JobEventDataDefinition","JobEventsFormDefinition"]).factory("EventView",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","JobEventDataForm","Empty","JobEventsForm",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.event_id,d=g,f=angular.copy(n),h=j("base")+"job_events/"+c+"/";e.setUrl(h),e.get().success(function(a){var c,e,h,i,j,n;if($.isEmptyObject(a.event_data)||!a.event_data.res||"string"==typeof a.event_data.res)for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"results":case"module_name":case"module_args":case"rc":delete f.fields[h]}($.isEmptyObject(a.event_data)||!a.event_data.res||"string"!=typeof a.event_data.res)&&delete f.fields.traceback;for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"rc":a.event_data&&a.event_data.res&&m(a.event_data.res[h])?delete f.fields[h]:"textarea"===f.fields[h].type&&(e=a.event_data.res[h].match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i);break;case"results":if(a.event_data&&a.event_data.res&&void 0===a.event_data.res[h])delete f.fields[h];else if(Array.isArray(a.event_data.res[h])&&0!==a.event_data.res[h].length){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""===j?delete f.fields[h]:(e=j.match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i)}else delete f.fields[h];break;case"module_name":case"module_args":a.event_data&&a.event_data.res&&(void 0===a.event_data.res.invocation||void 0===a.event_data.res.invocation[h])&&delete f.fields[h]}b=d.inject(f,{mode:"edit",modal:!0,related:!1}),d.reset(),b.formModalAction=function(){$("#form-modal").modal("hide")},b.formModalActionLabel="OK",b.formModalCancelShow=!1,b.formModalInfo="View JSON",$("#form-modal .btn-success").removeClass("btn-success").addClass("btn-none"),$("#form-modal").addClass("skinny-modal"),b.formModalHeader=a.event_display.replace(/^\u00a0*/g,""),b.formModalInfoAction=function(){var b=g,c=b.inject(l,{mode:"edit",modal:!0,related:!1,modal_selector:"#form-modal2",modal_body_id:"form-modal2-body",modal_title_id:"formModal2Header"});b.reset(),c.formModal2Header=a.event_display.replace(/^\u00a0*/g,""),c.event_data=JSON.stringify(a.event_data,null,"	"),c.formModal2ActionLabel="OK",c.formModal2CancelShow=!1,c.formModal2Info=!1,c.formModalInfo="View JSON",c.formModal2Action=function(){$("#form-modal2").modal("hide")},$("#form-modal2 .btn-success").removeClass("btn-success").addClass("btn-none")},"string"==typeof a.event_data.res&&(b.traceback=a.event_data.res);for(h in f.fields)switch(h){case"status":b.status=a.failed?"error":a.changed?"changed":"success";break;case"created":n=new Date(a.created),b.created=k(n);break;case"host":a.summary_fields&&a.summary_fields.host&&(b.host=a.summary_fields.host.name);break;case"id":case"task":case"play":b[h]=a[h];break;case"start":case"end":a.event_data&&a.event_data.res&&!m(a.event_data.res[h])&&(b[h]=a.event_data.res[h]);break;case"results":if(Array.isArray(a.event_data.res[h])&&a.event_data.res[h].length>0){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""!==j&&(b[h]=j)}break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[h]&&(b[h]=a.event_data.res[h]);break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(b[h]=a.event_data.res.invocation[h])}b.$$phase||b.$digest()}).error(function(a,d){$("#form-modal").modal("hide"),i(b,a,d,f,{hdr:"Error!",msg:"Failed to retrieve event: "+c+". GET status: "+d})})}}]),angular.module("GroupsHelper",["RestServices","Utilities","ListGenerator","GroupListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","GroupsHelper","InventoryHelper","SelectionHelper","JobSubmissionHelper","RefreshHelper","PromptDialog","CredentialsListDefinition","InventoryTree"]).factory("GetSourceTypeOptions",["Rest","ProcessErrors","GetBasePath",function(a,b,c){return function(d){var e=d.scope,f=d.variable;void 0===e[f]&&(e[f]=[],a.setUrl(c("inventory_sources")),a.options().success(function(a){var b,c=a.actions.GET.source.choices;for(b=0;b<c.length;b++)"file"!==c[b][0]&&e[f].push({label:""===c[b][0]?"Manual":c[b][1],value:c[b][0]})}).error(function(a,c){b(e,a,c,null,{hdr:"Error!",msg:"Failed to retrieve options for inventory_sources.source. OPTIONS status: "+c})}))}}]).factory("ViewUpdateStatus",["Rest","ProcessErrors","GetBasePath","ShowUpdateStatus","Alert","Wait","Empty","Find",function(a,b,c,d,e,f,g,h){return function(c){var i=c.scope,j=c.tree_id,k=c.group_id,l=h({list:i.groups,key:"id",val:j});l&&(g(l.source)?e("Missing Configuration","The selected group is not configured for inventory sync. You must first edit the group, provide Source settings, and then run the sync process.","alert-info"):g(l.status)||"never updated"===l.status?e("No Status Available",'An inventory sync has not been performed for the selected group. Start the process by clicking the <i class="fa fa-exchange"></i> button.',"alert-info"):(f("start"),a.setUrl(l.related.inventory_source),a.get().success(function(a){var b=a.related.current_update?a.related.current_update:a.related.last_update;d({group_name:a.summary_fields.group.name,last_update:b,license_error:a.summary_fields.last_update&&a.summary_fields.last_update.license_error?!0:!1,tree_id:j,group_id:k,parent_scope:i})}).error(function(a,c){f("stop"),b(i,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+l.related.inventory_source+" POST returned status: "+c})})))}}]).factory("GetHostsStatusMsg",[function(){return function(a){var b,c,d,e=a.active_failures,f=a.total_hosts;return e>0?(b=f+(1===f?" host":" hosts")+". "+e+" with failed jobs.",d="true",c=!0):(c=!1,0===f?(b="Group contains 0 hosts.",d="na"):(b=f+(1===f?" host":" hosts")+". No job failures",d="false")),{tooltip:b,failures:c,"class":d}}}]).factory("GetSyncStatusMsg",[function(){return function(a){var b,c,d,e=a.status,f="",g="Start sync process";switch(b=e,c="icon-cloud-"+b,e){case"never updated":b="never",c="icon-cloud-na disabled",d='Sync not performed. Click <i class="fa fa-exchange"></i> to start it now.';break;case"none":case"":f="btn-disabled",b="n/a",c="icon-cloud-na disabled",d='Cloud source not configured. Click <i class="fa fa-pencil"></i> to update.',g=d;break;case"failed":d="Sync failed. Click to view log.";break;case"successful":d="Sync completed. Click to view log.";break;case"updating":d="Sync running"}return{"class":c,tooltip:d,status:b,launch_class:f,launch_tip:g}}}]).factory("SourceChange",["GetBasePath","CredentialList","LookUpInit","Empty",function(a,b,c,d){return function(e){var f,g,h=e.scope,i=e.form;d(h.source)||("file"===h.source.value?h.sourcePathRequired=!0:(h.sourcePathRequired=!1,h.source_path="",h[i.name+"_form"].source_path.$setValidity("required",!0)),"rax"===h.source.value?(h.source_region_choices=h.rax_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])):"ec2"===h.source.value&&(h.source_region_choices=h.ec2_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])),("rax"===h.source.value||"ec2"===h.source.value)&&(f="rax"===h.source.value?"rax":"aws",g=a("credentials")+"?cloud=true&kind="+f,c({url:g,scope:h,form:i,list:b,field:"credential"})))}}]).factory("GroupsCancelUpdate",["Rest","ProcessErrors","Alert","Wait","Find",function(a,b,c,d,e){return function(f){var g,h=f.scope,i=f.tree_id;h.removeCancelUpdate&&h.removeCancelUpdate(),h.removeCancelUpdate=h.$on("CancelUpdate",function(e,f){a.setUrl(f),a.post().success(function(){d("stop"),c("Inventory Sync Cancelled",'Your request to cancel the sync process was submitted to the task manger. Click the <i class="fa fa-refresh fa-lg"></i> button to monitor the status.',"alert-info")}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+f+" failed. POST status: "+c})})}),h.removeCheckCancel&&h.removeCheckCancel(),h.removeCheckCancel=h.$on("CheckCancel",function(e,f,g){var i=g?g:f;i+="cancel/",a.setUrl(i),a.get().success(function(a){a.can_cancel?h.$emit("CancelUpdate",i):(d("stop"),c("Cancel Inventory Sync",'Either you do not have access or the sync process completed.<br /> Click the <i class="fa fa-refresh fa-lg"></i> button to view the latest status.',"alert-info"))}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+i+" failed. GET status: "+c})})}),g=e({list:h.groups,key:"id",val:i}),h.selected_tree_id=g.id,h.selected_group_id=g.group_id,!g||"updating"!==g.status&&"pending"!==g.status?c("Cancel Inventory Sync",'The sync process completed. Click the <i class="fa fa-refresh fa-lg"></i> to view the latest status.',"alert-info"):(d("start"),a.setUrl(g.related.inventory_source),a.get().success(function(a){h.$emit("CheckCancel",a.related.last_update,a.related.current_update)}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+g.related.inventory_source+" failed. GET status: "+c})}))}}]).factory("GroupsAdd",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","ParseTypeChange","GroupsEdit","Wait","GetChoices","GetSourceTypeOptions","LookUpInit","BuildTree","SourceChange","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return function(b){var c,d=b.inventory_id,i=void 0!==b.group_id?b.group_id:null,m=b.scope,q=null!==i?k("groups")+i+"/children/":k("inventory")+d+"/groups/",u=g,v=h,w=v.inject(u,{mode:"add",modal:!0,related:!1,show_modal:!1});$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),w.formModalActionLabel="Save",w.formModalCancelShow=!0,w.parseType="yaml",w.source=null,l(w),v.reset(),w.removeAddTreeRefreshed&&w.removeAddTreeRefreshed(),w.removeAddTreeRefreshed=w.$on("GroupTreeRefreshed",function(){a.formModalHeader=null,a.formModalCancleShow=null,a.formModalActionLabel=null,n("stop"),$("#form-modal").modal("hide"),w.removeAddTreeRefreshed()}),w.removeSaveComplete&&w.removeSaveComplete(),w.removeSaveComplete=w.$on("SaveComplete",function(a,b,c){c||(w.searchCleanup&&w.searchCleanup(),w.formModalActionDisabled=!1,r({scope:m,inventory_id:d,refresh:!0,new_group_id:b}),t())}),w.removeFormSaveSuccess&&w.removeFormSaveSuccess(),w.removeFormSaveSuccess=w.$on("formSaveSuccess",function(a,b,c){var d,g,h,i,k=!1,l={};if(null!==w.source.value&&""!==w.source.value){for(l.group=b,l.source=w.source.value,l.source_path=w.source_path,l.credential=w.credential,l.overwrite=w.overwrite,l.overwrite_vars=w.overwrite_vars,l.update_on_launch=w.update_on_launch,d=$("#s2id_group_source_regions").select2("data"),g=[],h=0;h<d.length;h++)g.push(d[h].id);if(l.source_regions=g.join(),"ec2"===w.source.value)try{if(i="json"===w.envParseType?JSON.parse(w.source_vars):jsyaml.load(w.source_vars),"object"!=typeof i)throw"failed to return an object!";l.source_vars=$.isEmptyObject(i)?"":JSON.stringify(i,void 0,"	")}catch(m){k=!0,w.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+m)}k||(e.setUrl(c),e.put(l).success(function(){w.$emit("SaveComplete",b,!1)}).error(function(a,c){w.$emit("SaveComplete",b,!0),j(w,a,c,u,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+c})}))}else w.$emit("SaveComplete",b,!1)}),w.cancelModal=function(){w.searchCleanup&&w.searchCleanup(),t()},w.formModalAction=function(){var a,b;n("start");try{if(w.formModalActionDisabled=!0,a="json"===w.parseType?JSON.parse(w.variables):jsyaml.load(w.variables),"object"!=typeof a)throw"failed to return an object!";b={name:w.name,description:w.description},d&&(b.inventory=d),b.variables=$.isEmptyObject(a)?"":JSON.stringify(a,void 0,"	"),e.setUrl(q),e.post(b).success(function(a){w.$emit("formSaveSuccess",a.id,k("inventory_sources")+a.id+"/")}).error(function(a,b){n("stop"),w.formModalActionDisabled=!1,j(w,a,b,u,{hdr:"Error!",msg:"Failed to add new group. POST returned status: "+b})})}catch(c){n("stop"),w.formModalActionDisabled=!1,f("Error","Error parsing group variables. Parser returned: "+c)}},w.sourceChange=function(){s({scope:w,form:g})},c=0,w.removeChoicesReady&&w.removeChoicesReady(),w.removeChoicesReady=w.$on("choicesReadyGroup",function(){c++,2===c&&($("#form-modal").modal("show"),n("stop"))}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),p({scope:w,variable:"source_type_options"}),n("start")}}]).factory("GroupsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","SetNodeName","ParseTypeChange","GetSourceTypeOptions","InventoryUpdate","LookUpInit","Empty","Wait","GetChoices","UpdateGroup","SourceChange","Find","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return function(a){var b,c=a.scope,d=a.group_id,i=a.tree_id,l=a.inventory_id,p=a.groups_reload,q=h,r=g,y=k("groups")+d+"/",z={},A=q.inject(r,{mode:"edit",modal:!0,related:!1,show_modal:!1});q.reset(),n({scope:A,variable:"source_type_options"}),A.formModalActionLabel="Save",A.formModalHeader="Group",A.formModalCancelShow=!0,A.source=r.fields.source["default"],A.parseType="yaml",A[r.fields.source_vars.parseTypeName]="yaml",A.sourcePathRequired=!1,m(A),m(A,"source_vars",r.fields.source_vars.parseTypeName),A.groupLoadedRemove&&A.groupLoadedRemove(),A.groupLoadedRemove=A.$on("groupLoaded",function(){A.variable_url?(e.setUrl(A.variable_url),e.get().success(function(a){A.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),s("stop")}).error(function(a,b){A.variables=null,s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group variables. GET returned status: "+b})})):A.variables="---",z.variables=A.variables,A.source_url&&(e.setUrl(A.source_url),e.get().success(function(a){var b,c,d,e,f,g,h,i,j;for(b in r.fields){if("checkbox_group"===b)for(c=0;c<r.fields[b].fields.length;c++)e=r.fields[b].fields[c],void 0!==a[e.name]&&(A[e.name]=a[e.name],z[e.name]=A[e.name]);if("source"===b){for(f=!1,c=0;c<A.source_type_options.length;c++)A.source_type_options[c].value===a.source&&(A.source=A.source_type_options[c],f=!0);A.groupUpdateHide=f&&""!==A.source.value?!1:!0,z.source=A.source}else if("update_interval"===b)for((""===a[b]||null===a[b]||void 0===a[b])&&(a[b]=0),c=0;c<A.update_interval_options.length;c++)A.update_interval_options[c].value===a[b]&&(A[b]=A.update_interval_options[c]);else"source_vars"===b?($.isEmptyObject(a.source_vars)||"{}"===a.source_vars||"null"===a.source_vars||""===a.source_vars?A.source_vars="---":(g=JSON.parse(a.source_vars),A.source_vars=jsyaml.safeDump(g)),z.source_vars=A.variables):a[b]&&(A[b]=a[b],z[b]=A[b]);r.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[r.fields[b].sourceModel]&&(A[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField],z[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField])}if(A.sourceChange(),a.source_regions){if("ec2"===a.source||"rax"===a.source){for(h="ec2"===a.source?A.ec2_regions:A.rax_regions,i=[],j=a.source_regions.split(","),c=0;c<j.length;c++)for(d=0;d<h.length;d++)j[c]===h[d].value&&i.push({id:h[d].value,text:h[d].label});z.source_regions=i,$("#s2id_group_source_regions").select2("data",i)}}else z.source_regions=[{id:"all",text:"All"}];A.group_update_url=a.related.update,s("stop")}).error(function(a,b){A.source="",s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve inventory source. GET status: "+b})}))}),A.removeChoicesComplete&&A.removeChoicesComplete(),A.removeChoicesComplete=A.$on("choicesCompleteGroup",function(){e.setUrl(y),e.get().success(function(a){for(var b in r.fields)a[b]&&(A[b]=a[b],z[b]=A[b]);A.variable_url=a.related.variable_data,A.source_url=a.related.inventory_source,$("#form-modal").modal("show"),A.$emit("groupLoaded")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group: "+y+". GET status: "+b})})}),b=0,A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReadyGroup",function(){b++,2===b&&A.$emit("choicesCompleteGroup")}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),s("start"),A.removeSaveComplete&&A.removeSaveComplete(),A.removeSaveComplete=A.$on("SaveComplete",function(a,b){if(!b){if(p)u({scope:c,group_id:d,properties:{name:A.name,description:A.description,has_inventory_sources:A.source&&A.source.value?!0:!1,source:A.source&&A.source.value?A.source.value:""}});else if(A.home_groups){var e=w({list:c.home_groups,key:"id",val:d});e&&(e.name=A.name,e.description=A.description)}A.searchCleanUp&&A.searchCleanup(),A.formModalActionDisabled=!1,$("#form-modal").modal("hide"),p&&c.selected_tree_id!==i?c.showHosts(i,d,!1):s("stop"),x()}}),A.removeFormSaveSuccess&&A.removeFormSaveSuccess(),A.removeFormSaveSuccess=A.$on("formSaveSuccess",function(){var a,b,c,g,h=!1,i={group:d,source:A.source&&A.source.value?A.source.value:"",source_path:A.source_path,credential:A.credential,overwrite:A.overwrite,overwrite_vars:A.overwrite_vars,update_on_launch:A.update_on_launch};for(a=$("#s2id_group_source_regions").select2("data"),b=[],c=0;c<a.length;c++)b.push(a[c].id);if(i.source_regions=b.join(),A.source&&"ec2"===A.source.value)try{if(g="json"===A.envParseType?JSON.parse(A.source_vars):jsyaml.load(A.source_vars),"object"!=typeof g)throw"failed to return an object!";i.source_vars=$.isEmptyObject(g)?"":JSON.stringify(g)}catch(k){h=!0,A.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+k)}h||(e.setUrl(A.source_url),e.put(i).success(function(){A.$emit("SaveComplete",!1)}).error(function(a,b){A.$emit("SaveComplete",!0),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+b})}))}),A.cancelModal=function(){A.searchCleanup&&A.searchCleanup(),x()},A.formModalAction=function(){s("start");try{var a,b,c;if(c="json"===A.parseType?JSON.parse(A.variables):jsyaml.load(A.variables),"object"!=typeof c)throw"failed to return an object!";b={};for(a in r.fields)b[a]=A[a];b.inventory=l,e.setUrl(y),e.put(b).success(function(){A.variables?(e.setUrl(A.variable_url),e.put(c).success(function(){A.$emit("formSaveSuccess")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group variables. PUT status: "+b})})):A.$emit("formSaveSuccess")}).error(function(a,b){s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group: "+d+". PUT status: "+b})})}catch(g){s("stop"),f("Error","Error parsing group variables. Parser returned: "+g)}},A.updateGroup=function(){""===A.source||null===A.source?f("Missing Configuration","The selected group is not configured for updates. You must first edit the group, provide Source settings, and then run an update.","alert-info"):"updating"===A.status?f("Update in Progress","The inventory update process is currently running for group <em>"+A.summary_fields.group.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):o({scope:A,group_id:d,url:A.group_update_url,group_name:A.name,group_source:A.source.value})},A.sourceChange=function(){v({scope:A,form:g})}}}]).factory("GroupsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","Wait","BuildTree","Find",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.scope,d=a.tree_id,f=a.inventory_id,g=n({list:c.groups,key:"id",val:d}),h=k("inventory")+f+"/groups/";b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){l("start")}),$("#prompt-modal").modal("hide"),e.setUrl(h),e.post({id:g.group_id,disassociate:1}).success(function(){$("#prompt-modal").off(),c.$emit("GroupDeleteCompleted")}).error(function(a,b){l("stop"),j(c,a,b,null,{hdr:"Error!",msg:"Call to "+h+" failed. POST returned status: "+b})})},i({hdr:"Delete Group",body:"<p>Are you sure you want to delete group <em>"+g.name+"?</p>",action:b,"class":"btn-danger"})}}]).factory("ShowUpdateStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","InventoryStatusForm","Wait","Empty","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){function b(a){var b,d;return b=a.match(/\n/g),d=b?b.length:1,d>c?c:d}var c,d,h,j,n,p,q,r=a.group_name,s=a.last_update,t=g,u=l,v=a.license_error;void 0===s||null===s||""===s?(m("stop"),f("Missing Configuration","The selected group is not configured for inventory sync. Edit the group and provide Source information.","alert-info")):(d='<div id="status-modal-dialog" title="'+r+'- Inventory Sync">\n<div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(d),h=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),j=$(document).width(),n=$("body").height(),j>1199?(p=675,q=750>n?n-20:750,c=18):1199>=j&&j>=768?(p=550,q=620>n?n-15:620,c=12):(p=j-20,q=500>n?n:500,c=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:p,height:q,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),o()},open:function(){m("stop")}}),e.setUrl(s),e.get().success(function(a){for(var c in u.fields)a[c]&&(h[c]="created"===c?k(new Date(a[c])):a[c]);h.license_error=v,h.status_rows=b(a.status),h.stdout_rows=b(a.result_stdout),h.traceback_rows=b(a.result_traceback),$("#status-modal-dialog").dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(h,a,b,null,{hdr:"Error!",msg:"Failed to retrieve last update: "+s+". GET status: "+b})}))}}]),angular.module("HostsHelper",["RestServices","Utilities","ListGenerator","HostListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","HostsHelper","InventoryHelper","RelatedSearchHelper","InventoryFormDefinition","SelectionHelper","HostGroupsFormDefinition"]).factory("SetEnabledMsg",[function(){return function(a){a.enabledToolTip=a.has_inventory_sources?a.enabled?"Host is available":"Host is not available":a.enabled?"Host is available. Click to toggle.":"Host is not available. Click to toggle."}}]).factory("SetHostStatus",["SetEnabledMsg",function(a){return function(b){b.activeFailuresLink="/#/hosts/"+b.id+"/job_host_summaries/?inventory="+b.inventory+"&host_name="+encodeURI(b.name),b.has_active_failures===!0?(b.badgeToolTip="Most recent job failed. Click to view jobs.",b.active_failures="failed"):b.has_active_failures===!1&&null===b.last_job?(b.has_active_failures="none",b.badgeToolTip="No job data available.",b.active_failures="n/a"):b.has_active_failures===!1&&null!==b.last_job&&(b.badgeToolTip="Most recent job successful. Click to view jobs.",b.active_failures="success"),b.enabled_flag=b.enabled,a(b)}}]).factory("SetStatus",["SetEnabledMsg","Empty",function(a,b){return function(c){function d(a){return a.length>25?a.substr(0,25)+"...":a}function e(a){var b,c,e;if(a.has_active_failures===!0||a.has_active_failures===!1&&null!==a.last_job)if(a.has_active_failures===!0?(a.badgeToolTip="Most recent job failed. Click to view jobs.",a.active_failures="failed"):(a.badgeToolTip="Most recent job successful. Click to view jobs.",a.active_failures="success"),a.summary_fields.recent_jobs.length>0){for(e=a.summary_fields.recent_jobs.sort(function(a,b){return-1*(a-b)}),h="Recent Jobs",g='<table class="table table-condensed host-flyout" style="width: 100%">\n',g+="<thead>\n",g+="<tr>\n",g+="<th>ID</td>\n",g+='<th class="text-center">Status</td>\n',g+="<th>View</th>\n",g+="<th>Name</td>\n",g+="</tr>\n",g+="</thead>\n",g+="<tbody>\n",b=0;b<e.length;b++)c=e[b],g+="<tr>\n",g+='<td><a href="/#/jobs/'+c.id+'">'+c.id+"</a></td>\n",g+='<td class="text-center"><a ng-click="showJobSummary('+c.id+')" aw-tool-tip="'+c.status.charAt(0).toUpperCase()+c.status.slice(1)+'. Click for details" data-placement="top"><i class="fa icon-job-'+c.status+'"></i></a></td>\n',g+='<td><a href="/#/jobs/'+c.id+"/job_events/?host="+encodeURI(a.name)+'">Events</a> <a href="/#/jobs/'+c.id+"/job_host_summaries/?host_name="+encodeURI(a.name)+'">Hosts</a></td>\n',g+='<td class="break">'+d(c.name)+"</td>\n",g+="</tr>\n";g+="</tbody>\n",g+="</table>\n"}else h="No job data",g="<p>No recent job data available for this host.</p>";else a.has_active_failures===!1&&null===a.last_job&&(a.has_active_failures="none",a.badgeToolTip="No job data available.",a.active_failures="n/a");a.job_status_html=g,a.job_status_title=h}var f,g,h,i=c.scope,j=c.host;if(b(j))for(f=0;f<i.hosts.length;f++)e(i.hosts[f]),a(i.hosts[f]);else e(j),a(j)}}]).factory("HostsReload",["$routeParams","Empty","InventoryHosts","GetBasePath","SearchInit","PaginateInit","Wait","SetHostStatus","SetStatus","ApplyEllipsis",function(a,b,c,d,e,f,g,h,i,j){return function(h){var k=h.scope,l=h.group_id,m=h.inventory_id,n=c,o=b(l)?d("inventory")+m+"/hosts/":d("groups")+l+"/all_hosts/";k.search_place_holder="Search "+k.selected_group_name,k.removePostRefresh&&k.removePostRefresh(),k.removePostRefresh=k.$on("PostRefresh",function(){for(var a=0;a<k.hosts.length;a++)k.hosts[a].enabled_flag=k.hosts[a].enabled;i({scope:k}),setTimeout(function(){j("#hosts_table .host-name a")},2500),g("stop"),k.$emit("HostReloadComplete")}),e({scope:k,set:"hosts",list:n,url:o}),f({scope:k,list:n,url:o}),a.host_name&&(k[n.iterator+"InputDisable"]=!1,k[n.iterator+"SearchValue"]=a.host_name,k[n.iterator+"SearchField"]="name",k[n.iterator+"SearchFieldLabel"]=n.fields.name.label,k[n.iterator+"SearchSelectValue"]=null),k.show_failures&&(k[n.iterator+"InputDisable"]=!0,k[n.iterator+"SearchValue"]="true",k[n.iterator+"SearchField"]="has_active_failures",k[n.iterator+"SearchFieldLabel"]=n.fields.has_active_failures.label,k[n.iterator+"SearchSelectValue"]={value:1}),k.search(n.iterator)
}}]).factory("InjectHosts",["GenerateList","InventoryHosts","HostsReload",function(a,b,c){return function(d){var e=d.scope,f=d.inventory_id,g=d.group_id,h=d.tree_id,i=a;i.inject(b,{scope:e,mode:"edit",id:"hosts-container",breadCrumbs:!1,searchSize:"col-lg-6 col-md-6 col-sm-6"}),c({scope:e,group_id:g,tree_id:h,inventory_id:f})}}]).factory("ToggleHostEnabled",["GetBasePath","Rest","Wait","ProcessErrors","Alert","Find","SetEnabledMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){a.enabled=a.enabled?!1:!0,a.enabled_flag=a.enabled,g(a)}var j,k=h.host_id,l=h.external_source,m=h.scope;l?e("Action Not Allowed","This host is part of a cloud inventory. It can only be disabled in the cloud. After disabling it, run an inventory sync to see the new status reflected here.","alert-info"):(c("start"),j=f({list:m.hosts,key:"id",val:k}),i(j),b.setUrl(a("hosts")+k+"/"),b.put(j).success(function(){c("stop")}).error(function(a,b){i(j),c("stop"),d(m,a,b,null,{hdr:"Error!",msg:"Failed to update host. PUT returned status: "+b})}))}}]).factory("HostsList",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostList","GenerateList","Prompt","SearchInit","PaginateInit","ProcessErrors","GetBasePath","HostsAdd","HostsReload","SelectionInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return function(a){var b,c,d=a.inventory_id,e=a.group_id,f=g,i=h;f.iterator="subhost",f.name="subhosts",c=i.inject(f,{id:"form-modal-body",mode:"select",breadCrumbs:!1,selectButton:!1}),b=m("inventory")+d+"/hosts/?not__groups__id="+c.group_id,c.formModalActionLabel="Select",c.formModalHeader="Add Existing Hosts",c.formModalCancelShow=!0,p({scope:c,list:f,url:m("groups")+e+"/hosts/"}),c.removeModalClosed&&c.removeModalClosed(),c.removeModalClosed=c.$on("modalClosed",function(){o(a)}),$(".popover").popover("hide"),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),$("#form-modal").modal({backdrop:"static",keyboard:!1}),j({scope:c,set:"subhosts",list:f,url:b}),k({scope:c,list:f,url:b,mode:"lookup"}),c.search(f.iterator),c.$$phase||c.$digest(),c.createHost=function(){$("#form-modal").modal("hide"),n({scope:a.scope,inventory_id:d,group_id:e})}}}]).factory("HostsCreate",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){var b=a.scope,c=b.inventory_id,d=b.selected_group_id,i=k("groups")+d+"/hosts/",p=g,q=h,r=q.inject(p,{mode:"add",modal:!0,related:!1}),s={};r.formModalActionLabel="Save",r.formModalHeader="Create New Host",r.formModalCancelShow=!0,r.parseType="yaml",m(r),r.removeHostsReload&&r.removeHostsReload(),r.removeHostsReload=r.$on("hostsReload",function(){l(a)}),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),q.reset(),s={},r.$$phase||r.$digest(),r.removeHostSaveComplete&&r.removeHostSaveComplete(),r.removeHostSaveComplete=r.$on("HostSaveComplete",function(){n("stop"),$("#form-modal").modal("hide"),l({scope:b,group_id:b.selected_group_id,tree_id:b.selected_tree_id,inventory_id:b.inventory_id}),o()}),r.formModalAction=function(){n("start");try{var a,b,d={};if(r.formModalActionDisabled=!0,b="json"===r.parseType?JSON.parse(r.variables):jsyaml.load(r.variables),"object"!=typeof b)throw"failed to return an object!";for(a in p.fields)"variables"!==a&&(d[a]=r[a]);d.inventory=c,d.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(i),e.post(d).success(function(){r.$emit("HostSaveComplete")}).error(function(a,b){n("stop"),r.formModalActionDisabled=!1,j(r,a,b,p,{hdr:"Error!",msg:"Failed to add new host. POST returned status: "+b})})}catch(g){n("stop"),r.formModalActionDisabled=!1,f("Error","Error parsing host variables. Parser returned: "+g)}},r.formReset=function(){q.reset()},r.cancelModal=function(){o()}}}]).factory("HostsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","Find","SetStatus","ApplyEllipsis","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(a){var b=a.scope,c=a.host_id,d=a.inventory_id,i=h,l=g,s=k("hosts")+c+"/",t=i.inject(l,{mode:"edit",modal:!0,related:!1,show_modal:!1}),u={},v={};i.reset(),t.formModalActionLabel="Save",t.formModalHeader="Host Properties",t.formModalCancelShow=!0,t.parseType="yaml",m(t),t.hostLoadedRemove&&t.hostLoadedRemove(),t.hostLoadedRemove=t.$on("hostLoaded",function(){t.variable_url?(e.setUrl(t.variable_url),e.get().success(function(a){t.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),n("stop"),$("#form-modal").modal("show")}).error(function(a,b){t.variables=null,j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host variables. GET returned status: "+b})})):(t.variables="---",n("stop"),$("#form-modal").modal("show")),u.variables=t.variables}),n("start"),e.setUrl(s),e.get().success(function(a){var b,c,d;for(c in l.fields)a[c]&&(t[c]=a[c],u[c]=t[c]);d=a.related;for(b in l.related)d[b]&&(v[b]={url:d[b],iterator:l.related[b].iterator});t.variable_url=a.related.variable_data,t.$emit("hostLoaded")}).error(function(a,b){j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host: "+c+". GET returned status: "+b})}),t.removeSaveCompleted&&t.removeSaveCompleted(),t.removeSaveCompleted=t.$on("saveCompleted",function(){var a=o({list:b.hosts,key:"id",val:c}),d=a.name;a.name=t.name,a.enabled=t.enabled,a.enabled_flag=t.enabled,p({scope:b,host:a}),d?setTimeout(function(){$('#hosts_table .host-name a[title="'+d+'"').attr("title",a.name),q("#hosts_table .host-name a"),n("stop"),$("#form-modal").modal("hide")},2e3):(n("stop"),$("#form-modal").modal("hide")),r()}),t.formModalAction=function(){n("start");try{var a,b,g={};if(b="json"===t.parseType?JSON.parse(t.variables):jsyaml.load(t.variables),"object"!=typeof b)throw"failed to return an object!";for(a in l.fields)g[a]=t[a];g.inventory=d,g.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(s),e.put(g).success(function(){t.$emit("saveCompleted")}).error(function(a,b){n("stop"),j(t,a,b,l,{hdr:"Error!",msg:"Failed to update host: "+c+". PUT returned status: "+b})})}catch(h){n("stop"),f("Error","Error parsing host variables. Parser returned: "+h)}},t.formReset=function(){i.reset();for(var a in u)t[a]=u[a];t.parseType="yaml"},t.cancelModal=function(){r()}}}]).factory("HostsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","Prompt","ProcessErrors","GetBasePath","HostsReload","Wait","Find",function(a,b,c,d,e,f,g,h,i,j,k,l){return function(a){var b,c,d=a.scope,f=a.host_id,j=a.host_name,m=null===d.selected_group_id?i("inventory")+d.inventory_id+"/hosts/":i("groups")+d.selected_group_id+"/hosts/",n=d.selected_tree_id?l({list:d.groups,key:"id",val:d.selected_tree_id}):null;d.removeHostsReload&&d.removeHostsReload(),d.removeHostsReload=d.$on("hostsReload",function(){d.showHosts(d.selected_tree_id,d.selected_group_id,!1)}),b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){k("start")}),$("#prompt-modal").modal("hide"),e.setUrl(m),e.post({id:f,disassociate:1}).success(function(){d.$emit("hostsReload")}).error(function(a,b){k("stop"),h(d,a,b,null,{hdr:"Error!",msg:"Attempt to delete "+j+" failed. POST returned status: "+b})})},c=n?"<p>Are you sure you want to delete host <em>"+j+"</em> from group <em>"+n.name+"</em>?</p>":"<p>Are you sure you want to delete host <em>"+j+"</em>?</p>",g({hdr:"Delete Host",body:c,action:b,"class":"btn-danger"})}}]).factory("EditHostGroups",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,l=a.host_id,n=a.inventory_id,o=g,p=[];for(c='<div class="row host-groups">\n',c+='<div class="col-lg-6">\n',c+="<label>Available Groups:</label>\n",c+='<select multiple class="form-control" name="available-groups" ng-model="selectedGroups" ng-change="leftChange()" ng-options="avail_group.name for avail_group in available_groups"></select>\n',c+="</div>\n",c+='<div class="col-lg-6">\n',c+="<label>Belongs to Groups:</label>\n",c+='<select multiple class="form-control" name="selected-groups" ng-model="assignedGroups" ng-change="rightChange()" ng-options="host_group.name for host_group in host_groups"></select>\n',c+="</div>\n",c+="</div>\n",c+='<div class="row host-group-buttons">\n',c+='<div class="col-lg-12">\n',c+='<button type="button" ng-click="moveLeft()" class="btn btn-sm btn-primary left-button" ng-disabled="leftButtonDisabled"><i class="icon-arrow-left"></i></button>\n',c+='<button type="button" ng-click="moveRight()" class="btn btn-sm btn-primary right-button" ng-disabled="rightButtonDisabled"><i class="icon-arrow-right"></i></button>\n',c+="<p>(move selected groups)</p>\n",c+="</div>\n",c+="</div>\n",d=j("hosts")+l+"/",f=o.inject(null,{mode:"edit",modal:!0,related:!1,html:c}),b=0;b<f.hosts.length;b++)f.hosts[b].id===l&&(f.host=f.hosts[b]);f.selectedGroups=null,f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionLabel="Save",f.formModalHeader=f.host.name+' - <span class="subtitle">Groups</span>',f.formModalCancelShow=!0,f.formModalActionDisabled=!0,$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),f.hostGroupChangeRemove&&f.hostGroupChangeRemove(),f.hostGroupChangeRemove=f.$on("hostGroupChange",function(){p.pop(),0===p.length&&(h=function(){setTimeout(function(){m("stop")},500)},k({scope:f,inventory_id:n,group_id:f.group_id,action:h}))}),f.formModalAction=function(){var a,b,c;for($("#form-modal").modal("hide"),m("start"),a=0;a<f.original_groups.length;a++){for(c=!1,b=0;b<f.host_groups.length;b++)f.original_groups[a].id===f.host_groups[b].id&&(c=!0);c||(p.push({group_id:f.original_groups[a].id,action:"delete"}),e.setUrl(j("groups")+f.original_groups[a].id+"/hosts/"),e.post({id:l,disassociate:1}).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to remove host from group "+f.original_groups[a].name+" failed. POST returned status: "+c})}))}for(a=0;a<f.host_groups.length;a++){for(c=!1,b=0;b<f.original_groups.length;b++)f.original_groups[b].id===f.host_groups[a].id&&(c=!0);c||(p.push({group_id:f.host_groups[a].id,action:"add"}),e.setUrl(j("groups")+f.host_groups[a].id+"/hosts/"),e.post(f.host).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to add host to group "+f.host_groups[a].name+" failed. POST returned status: "+c})}))}},f.leftChange=function(){null!==f.selectedGroups&&f.selectedGroups.length>0?(f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!1):f.rightButtonDisabled=!0},f.rightChange=function(){null!==f.assignedGroups&&f.assignedGroups.length>0?(f.selectedGroups=null,f.leftButtonDisabled=!1,f.rightButtonDisabled=!0):f.leftButtonDisabled=!0},f.moveLeft=function(){var a,b,c,d;for(a=0;a<f.assignedGroups.length;a++)for(b=0;b<f.host_groups.length;b++)if(f.host_groups[b].id===f.assignedGroups[a].id){f.host_groups.splice(b,1);break}for(a=0;a<f.assignedGroups.length;a++){for(c=!1,b=0;b<f.available_groups.length&&!c;b++)f.available_groups[b].id===f.assignedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.available_groups.length&&!d;b++)0===b&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b].name.toLowerCase()?(d=!0,f.available_groups.unshift(f.assignedGroups[a])):b+1<f.available_groups.length&&f.assignedGroups[a].name.toLowerCase()>f.available_groups[b].name.toLowerCase()&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b+1].name.toLowerCase()&&(d=!0,f.available_groups.splice(b+1,0,f.assignedGroups[a]));d||f.available_groups.push(f.assignedGroups[a])}}f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.moveRight=function(){var a,b,c,d;for(a=0;a<f.selectedGroups.length;a++)for(b=0;b<f.available_groups.length;b++)if(f.available_groups[b].id===f.selectedGroups[a].id){f.available_groups.splice(b,1);break}for(a=0;a<f.selectedGroups.length;a++){for(c=!1,b=0;b<f.host_groups.length&&!c;b++)f.host_groups[b].id===f.selectedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.host_groups.length&&!d;b++)0===b&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b].name.toLowerCase()?(d=!0,f.host_groups.unshift(f.selectedGroups[a])):b+1<f.host_groups.length&&f.selectedGroups[a].name.toLowerCase()>f.host_groups[b].name.toLowerCase()&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b+1].name.toLowerCase()&&(d=!0,f.host_groups.splice(b+1,0,f.selectedGroups[a]));d||f.host_groups.push(f.selectedGroups[a])}}f.selectedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.host_groups=[],f.original_groups=[],f.available_groups=[],e.setUrl(f.host.related.groups+"?order_by=name"),e.get().success(function(a){var b,c,d;for(b=0;b<a.results.length;b++)f.host_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description}),f.original_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description});for(b=0;b<f.inventory_groups.length;b++){for(d=!1,c=0;c<f.host_groups.length;c++)f.inventory_groups[b].id===f.host_groups[c].id&&(d=!0);d||f.available_groups.push(f.inventory_groups[b])}}).error(function(a,b){i(f,a,b,null,{hdr:"Error!",msg:"Failed to get current groups for host: "+l+". GET returned: "+b})}),f.removeHostsReload&&f.removeHostsReload(),f.removeHostsReload=f.$on("hostsReload",function(){k(a)}),f.$$phase||f.$digest()}}]),angular.module("JobSubmissionHelper",["RestServices","Utilities","CredentialFormDefinition","CredentialsListDefinition","LookUpHelper","ProjectFormDefinition","JobSubmissionHelper"]).factory("PromptPasswords",["CredentialForm","JobTemplateForm","$compile","Rest","$location","ProcessErrors","GetBasePath","Alert","Empty","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(a){function b(a){a?e.path("/"+v):"jobs"===v?q.refreshJob():e.path("/jobs")}function k(){var a=g("jobs")+q.job_id+"/";d.setUrl(a),d.destroy().success(function(){"credential"===t.name&&b(!0)}).error(function(b,c){f(q,b,c,null,{hdr:"Error!",msg:"Call to "+a+" failed. DELETE returned status: "+c})})}var l,m,n,o,p,q=a.scope,r=a.passwords,s=a.start_url,t=a.form,u="",v=e.path().replace(/^\//,"").split("/")[0],w=a.extra_html;if(q.cancelJob=function(){$("#password-modal").modal("hide"),"credential"===t.name?k():q.$emit("UpdateSubmitted","canceled")},q.startJob=function(){var a={},c=!1;$("#password-modal").modal("hide"),j("start"),$(".password-field").each(function(){a[$(this).attr("name")]=$(this).val(),""!==$(this).val()&&null!==$(this).val()&&(c=!0)}),i(r)||0===r.length||c?(d.setUrl(s),d.post(a).success(function(){q.$emit("UpdateSubmitted","started"),"credential"===t.name&&b(!1)}).error(function(a,b){j("stop"),f(q,a,b,null,{hdr:"Error!",msg:"POST to "+s+" failed with status: "+b})})):(j("stop"),h("No Passwords","Required password(s) not provided. The request was not submitted.","alert-info"),"credential"===t.name&&q.cancelJob())},r&&r.length>0){for(j("stop"),u+='<form class="form-horizontal" name="password_form" novalidate>\n',u+=w?w:"",o=0;o<r.length;o++)"credential"===t.name?t.fields[r[o]]?p=t:(h("Form Not Found","Could not locate form for: "+r[o],"alert-danger"),e("/#/jobs")):p=t,l=p.fields[r[o]],n=r[o],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="password-field form-control" ',u+="required ",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n",n=l.associated,l=p.fields[l.associated],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="form-control" ',u+="required ",u+=l.awPassMatch?'awpassmatch="'+l.associated+'" ':"",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',l.awPassMatch&&(u+='<span class="error" ng-show="password_form.'+n+'.$error.awpassmatch">Must match Password value</span>\n'),u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n";u+="</form>\n",m=angular.element(document.getElementById("password-body")),m.html(u),c(m.contents())(q),$("#password-modal").modal(),$("#password-modal").on("shown.bs.modal",function(){$("#password-body").find('input[type="password"]:first').focus()})}else q.startJob()}}]).factory("SubmitJob",["PromptPasswords","$compile","Rest","$location","GetBasePath","CredentialList","LookUpInit","CredentialForm","ProcessErrors","JobTemplateForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k){return function(b){function l(b){var e,f,g;m.credentialWatchRemove&&m.credentialWatchRemove(),e=(new Date).toISOString(),f=b.related.jobs?b.related.jobs:b.related.job_template+"jobs/",g=o?o:b.name,k("start"),c.setUrl(f),c.post({name:g+" "+e,description:b.description,job_template:b.id,inventory:b.inventory,project:b.project,playbook:b.playbook,credential:b.credential,forks:b.forks,limit:b.limit,verbosity:b.verbosity,extra_vars:b.extra_vars}).success(function(b){m.job_id=b.id,b.passwords_needed_to_start.length>0?a({scope:m,passwords:b.passwords_needed_to_start,start_url:b.related.start,form:h}):(c.setUrl(b.related.start),c.post().success(function(){k("stop");var a=d.path().replace(/^\//,"").split("/")[0];"jobs"===a?m.refresh():d.path("/jobs")}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to start job. POST returned status: "+b})}))}).error(function(a,b){k("stop"),i(m,a,b,null,{hdr:"Error!",msg:"Failed to create job. POST returned status: "+b})})}var m=b.scope,n=b.id,o=b.template?b.template:null,p=d.path().replace(/^\//,"").split("/")[0],q=e(p)+n+"/";k("start"),c.setUrl(q),c.get().success(function(a){m.credential="",""===a.credential||null===a.credential?(k("stop"),m.credentialWatchRemove&&m.credentialWatchRemove(),m.credentialWatchRemove=m.$watch("credential",function(b,c){b!==c&&""!==m.credential&&null!==m.credential&&void 0!==m.credential&&(a.credential=m.credential,l(a))}),g({scope:m,form:j,current_item:null,list:f,field:"credential",hdr:"Credential Required"}),m.lookUpCredential()):l(a)}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to get job template details. GET returned status: "+b})})}}]).factory("ProjectUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","ProjectsForm","Wait",function(a,b,c,d,e,f,g,h,i){return function(b){var d=b.scope,j=b.project_id,k=e("projects")+j+"/update/";d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(){i("stop"),g("Update Started","The request to start the SCM update process was submitted. To monitor the update status, refresh the page by clicking the <em>Refresh</em> button.","alert-info"),d.refresh()}),d.removeSCMSubmit&&d.removeSCMSubmit(),d.removeSCMSubmit=d.$on("SCMSubmit",function(b,c,e){a({scope:d,passwords:c,start_url:k,form:h,extra_html:e})}),i("start"),c.setUrl(k),c.get().success(function(a){var b,c;if(i("stop"),a.can_update){for(c="",b=0;b<d.projects.length;b++)if(d.projects[b].id===j){c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_url">SCM URL</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_url" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_url+'" ',c+="/>",c+="</div>\n",c+="</div>\n",d.projects[b].scm_username&&(c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_username">SCM Username</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_username" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_username+'" ',c+="/>",c+="</div>\n",c+="</div>\n");break}c+="</p>",d.$emit("SCMSubmit",a.passwords_needed_to_update,c)}else g("Permission Denied","You do not have access to update this project. Please contact your system administrator.","alert-danger")}).error(function(a,b){f(d,a,b,null,{hdr:"Error!",msg:"Failed to get project update details: "+k+" GET status: "+b})})}}]).factory("InventoryUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","GroupForm","BuildTree","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(b){var d=b.scope,e=b.url,i=b.group_id,k=b.tree_id;d.removeHostReloadComplete&&d.removeHostReloadComplete(),d.removeHostReloadComplete=d.$on("HostReloadComplete",function(){j("stop"),g("Update Started",'Your request to start the inventory sync process was submitted. Monitor progress by clicking the <i class="fa fa-refresh fa-lg"></i> button.',"alert-info"),d.removeHostReloadComplete&&d.removeHostReloadComplete()}),d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(a,b){"started"===b&&(d.refreshGroups?(d.selected_tree_id=k,d.selected_group_id=i,d.refreshGroups()):d.refresh&&d.refresh(),d.$emit("HostReloadComplete"))}),d.removeInventorySubmit&&d.removeInventorySubmit(),d.removeInventorySubmit=d.$on("InventorySubmit",function(b,c,f){a({scope:d,passwords:c,start_url:e,form:h,extra_html:f})}),j("start"),c.setUrl(e),c.get().success(function(a){a.can_update?d.$emit("InventorySubmit",a.passwords_needed_to_update):(j("stop"),g("Permission Denied","You do not have access to run the update. Please contact your system administrator.","alert-danger"))}).error(function(a,b){j("stop"),f(d,a,b,null,{hdr:"Error!",msg:"Failed to get inventory_source details. "+e+"GET status: "+b})})}}]),angular.module("JobsHelper",["Utilities","FormGenerator","JobSummaryDefinition","InventoryHelper"]).factory("JobStatusToolTip",[function(){return function(a){var b;switch(a){case"successful":case"success":b="There were no failed tasks.";break;case"failed":b="Some tasks encountered errors.";break;case"canceled":b="Stopped by user request.";break;case"new":b="In queue, waiting on task manager.";break;case"waiting":b="SCM Update or Inventory Update is executing.";break;case"pending":b="Not in queue, waiting on task manager.";break;case"running":b="Playbook tasks executing."}return b}}]).factory("ShowJobSummary",["Rest","Wait","GetBasePath","FormatDate","ProcessErrors","GenerateForm","JobSummary","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h){return function(i){function j(a){var b=a.match(/\n/g),c=b?b.length:1;return c>p?20:c}var k,l,m,n,o,p,q,r,s=i.job_id,t=f,u=g;r='<div id="status-modal-dialog" title="Job '+s+'"><div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(r),k=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),l=$(document).width(),m=$("body").height(),l>1199?(n=675,o=750>m?m-20:750,p=20):1199>=l&&l>=768?(n=550,o=620>m?m-15:620,p=15):(n=l-20,o=500>m?m:500,p=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:n,height:o,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),h()},open:function(){b("stop")}}),b("start"),q=c("jobs")+s+"/",a.setUrl(q),a.get().success(function(a){var b;k.id=a.id,k.name=a.name,k.status=a.status,k.result_stdout=a.result_stdout,k.result_traceback=a.result_traceback,k.stdout_rows=j(k.result_stdout),k.traceback_rows=j(k.result_traceback),b=new Date(a.created),k.created=d(b),$("#status-modal-dialog").dialog("open")}).error(function(a,b){e(k,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})}}]),angular.module("LookUpHelper",["RestServices","Utilities","SearchHelper","PaginationHelpers","ListGenerator","ApiLoader"]).factory("LookUpInit",["Alert","Rest","GenerateList","SearchInit","PaginateInit","GetBasePath","FormatDate","Empty",function(a,b,c,d,e,f,g,h){return function(b){var i,j,k,l,m=b.scope,n=b.form,o=b.list,p=b.field,q=b.postAction;i=b.url?b.url:f("inventories"===o.name?"inventory":o.name),j=o.iterator.charAt(0).toUpperCase()+o.iterator.substring(1),k=b.hdr?b.hdr:"Select "+j,l=/\/$/.test(i)?i+"?":i+"&",l+=n.fields[p].sourceField+"__iexact=:value",$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-url",l),$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-source",p),m["lookUp"+j]=function(){var b=c,f=b.inject(o,{mode:"lookup",hdr:k});$("#lookup-modal").on("hidden.bs.modal",function(){f.searchCleanup&&f.searchCleanup(),(""===m[p]||null===m[p])&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]="",m.$$phase||m.$digest())}),f.selectAction=function(){var c,d=!1;for(c=0;c<f[o.name].length;c++)"1"===f[o.name][c].checked&&(d=!0,m[p]=f[o.name][c].id,m[n.name+"_form"]&&n.fields[p]&&n.fields[p].sourceModel&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]=f[o.name][c][n.fields[p].sourceField],m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField].$setValidity("awlookup",!0)),m[n.name+"_form"]&&m[n.name+"_form"].$setDirty(),b.hide());d===!1?a("Missing Selection","Oops, you failed to make a selection. Click on a row to make your selection, and then click the Select button."):q&&q()},f["toggle_"+o.iterator]=function(a){var b;for(b=0;b<m[o.name].length;b++)f[o.name][b].id===a?(f[o.name][b].checked="1",f[o.name][b].success_class="success"):(f[o.name][b].checked="0",f[o.name][b].success_class="")},d({scope:f,set:o.name,list:o,url:i}),e({scope:f,list:o,url:i,mode:"lookup"}),f.lookupPostRefreshRemove&&f.lookupPostRefreshRemove(),f.lookupPostRefreshRemove=m.$on("PostRefresh",function(){var a,b;for(a in o.fields)if(o.fields[a].type&&"date"===o.fields[a].type)for(b=0;b<m[o.name].length;b++)m[o.name][b][a]=g(new Date(m[o.name][b][a]));if(""!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&null!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField])for(b=0;b<f[o.name].length;b++)if(f[o.name][b][n.fields[p].sourceField]===m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]){m[p]=f[o.name][b].id;break}h(m[p])||f["toggle_"+o.iterator](m[p])}),f.search(o.iterator)}}}]),angular.module("PaginationHelpers",["Utilities","RefreshHelper","RefreshRelatedHelper"]).factory("PageRangeSetup",["Empty",function(a){return function(b){var c,d,e,f=b.scope,g=b.count,h=b.next,i=b.previous,j=b.iterator;for(f[j+"_page"]=1,f[j+"_num_pages"]=Math.ceil(g/f[j+"_page_size"]),f[j+"_num_pages"]=f[j+"_num_pages"]<=0?1:f[j+"_num_pages"],f[j+"_total_rows"]=g,a(h)&&i?f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1:h&&a(i)?f[j+"_page"]=1:h&&i&&(f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1),f[j+"_page_range"]=[],d=f[j+"_page"]>5?f[j+"_page"]-5:1,e=f[j+"_page"]<6?10<=f[j+"_num_pages"]?10:f[j+"_num_pages"]:f[j+"_page"]+4<f[j+"_num_pages"]?f[j+"_page"]+4:f[j+"_num_pages"],c=d;e>=c;c++)f[j+"_page_range"].push(c)}}]).factory("RelatedPaginateInit",["RefreshRelated","$cookieStore","Wait",function(a,b,c){return function(d){var e,f=d.scope,g=d.relatedSets,h=d.pageSize?d.pageSize:10;for(e in g)f[g[e].iterator+"_url"]=g[e].url,f[g[e].iterator+"_page"]=0,f[g[e].iterator+"_page_size"]=h;f.getPage=function(b,d,e){var g=f[e+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=f[e+"SearchParams"]?"&"+f[e+"SearchParams"]+"&page_size="+f[e+"_page_size"]:"page_size="+f[e+"PageSize"],c("start"),a({scope:f,set:d,iterator:e,url:g})},f.pageIsActive=function(a,b){return a===f[b+"_page"]?"active":""},f.changePageSize=function(c,d){f[d+"_page"]=1;var e=f[d+"_url"];b.put(d+"_page_size",f[d+"_page_size"]),e=e.replace(/\/\?.*$/,"/"),e+=f[d+"SearchParams"]?"?"+f[d+"SearchParams"]+"&page_size="+f[d+"_page_size"]:"?page_size="+f[d+"_page_size"],a({scope:f,set:c,iterator:d,url:e})}}}]).factory("PaginateInit",["Refresh","$cookieStore","Wait",function(a,b,c){return function(b){var d=b.scope,e=b.list,f=b.iterator?b.iterator:e.iterator,g=b.mode?b.mode:null;d[f+"_page"]=b.page?b.page:1,d[f+"_url"]=b.url,d[f+"_mode"]=g,d[f+"_page_size"]=b.pageSize?b.pageSize:"lookup"===g?5:20,d.getPage=function(b,e,f){var g=d[f+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=d[f+"SearchParams"]?"&"+d[f+"SearchParams"]+"&page_size="+d[f+"_page_size"]:"page_size="+d[f+"PageSize"],c("start"),a({scope:d,set:e,iterator:f,url:g})},d.pageIsActive=function(a,b){return a===d[b+"_page"]?"active":""},d.changePageSize=function(b,e){d[e+"_page"]=0;var f=d[e+"_url"].replace(/\?page_size\=\d+/,""),g=/\/$/.test(f)?"?":"&";f+=d[e+"SearchParams"]?g+d[e+"SearchParams"]+"&page_size="+d[e+"_page_size"]:g+"page_size="+d[e+"_page_size"],c("start"),a({scope:d,set:b,iterator:e,url:f})}}}]),angular.module("ParseHelper",[]).factory("ParseTypeChange",[function(){return function(a,b,c){var d=b?b:"variables",e=c?c:"parseType";a.blockParseTypeWatch=!1,a.blockVariableDataWatch=!1,a["remove"+d+"Watch"]&&a["remove"+d+"Watch"](),a["remove"+d+"Watch"]=a.$watch(e,function(b,c){var e;if(b!==c)if("json"===b)if(a[d]&&!/^---$/.test(a[d]))try{e=jsyaml.load(a[d]),a[d]=JSON.stringify(e,null," ")}catch(f){}else a[d]="{}";else if(a[d]&&!/^\{\}$/.test(a[d]))try{e=JSON.parse(a[d]),a[d]=jsyaml.safeDump(e)}catch(f){}else a[d]="---"})}}]),angular.module("PermissionsHelper",[]).factory("PermissionCategoryChange",[function(){return function(a){var b=a.scope,c=a.reset;"Inventory"===b.category?(b.projectrequired=!1,b.permissionTypeHelp="<dl>\n<dt>Read</dt>\n<dd>Only allow the user or team to view the inventory.</dd>\n<dt>Write</dt>\n<dd>Allow the user or team to modify hosts and groups contained in the inventory, add new hosts and groups, and perform inventory sync operations.\n<dt>Admin</dt>\n<dd>Allow the user or team full access to the inventory. This includes reading, writing, deletion of the inventory and inventory sync operations.</dd>\n</dl>\n"):(b.projectrequired=!0,b.permissionTypeHelp="<dl>\n<dt>Run</dt>\n<dd>Allow the user or team to perform a live deployment of the project against the inventory. In Run mode modules will be executed, and changes to the inventory will occur.</dd>\n<dt>Check</dt>\n<dd>Only allow the user or team to deploy the project against the inventory as a dry-run operation. In Check mode, module operations will only be simulated. No changes will occur.</dd>\n</dl>\n"),c&&(b.permission_type="Inventory"===b.category?"read":"run")}}]),angular.module("ProjectPathHelper",["RestServices","Utilities"]).factory("GetProjectPath",["Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d){return function(a){function e(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].value);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].value===d[c]&&e.push(a[b]);return e}var f=a.scope,g=a.master;f.showMissingPlaybooksAlert=!1,b.setUrl(c("config")),b.get().success(function(a){var b,c=[];
for(b=0;b<a.project_local_paths.length;b++)c.push({label:a.project_local_paths[b],value:a.project_local_paths[b]});if(f.local_path&&c.push({label:f.local_path,value:f.local_path}),f.project_local_paths=e(c),f.local_path)for(b=0;f.project_local_paths.length;b++)if(f.project_local_paths[b].value===f.local_path){f.local_path=f.project_local_paths[b];break}f.base_dir=a.project_base_dir,g.local_path=f.local_path,g.base_dir=f.base_dir,0===c.length&&(f.showMissingPlaybooksAlert=!0)}).error(function(a,b){d(f,a,b,null,{hdr:"Error!",msg:"Failed to access API config. GET status: "+b})})}}]),angular.module("ProjectsHelper",["RestServices","Utilities","ProjectStatusDefinition","ProjectFormDefinition"]).factory("ProjectStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","ProjectStatusForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,j,n,o=a.project_id,p=a.last_update,q=g,r=l;m("start"),b='<div id="status-modal-dialog"><div id="form-container" style="width: 100%;"></div></div>\n',$("#projects-modal-container").empty().append(b),c=q.inject(r,{mode:"edit",id:"form-container",related:!1,breadCrumbs:!1}),q.reset(),d=$(document).width(),f=$("body").height(),d>1199?(h=675,j=750>f?f-20:750,n=20):1199>=d&&d>=768?(h=550,j=620>f?f-15:620,n=15):(h=d-20,j=500>f?f:500,n=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:h,height:j,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#projects-modal-container").empty()},open:function(){m("stop")}}),e.setUrl(p),e.get().success(function(a){var b,d=a;for(b in r.fields)d[b]?c[b]="created"===b?k(new Date(d[b])):d[b]:d.summary_fields.project[b]&&(c[b]=d.summary_fields.project[b]);$("#status-modal-dialog").dialog({title:d.summary_fields.project.name+" Status"}).dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(c,a,b,r,{hdr:"Error!",msg:"Failed to retrieve status of project: "+o+". GET status: "+b})})}}]),angular.module("SelectionHelper",["Utilities","RestServices"]).factory("SelectionInit",["Rest","Alert","ProcessErrors","ReturnToCaller","Wait",function(a,b,c,d,e){return function(b){var f,g=b.scope,h=b.list,i=b.url,j=b.returnToCaller;f=void 0!==b.selected?b.selected:[],g.formModalActionDisabled=!0,g.disableSelectBtn=!0,g["toggle_"+h.iterator]=function(a,b){var c,d,e;for(c=0;c<g[h.name].length;c++)if(g[h.name][c].id===a)if("0"===g[h.name][c].checked&&!b||1===g[h.name][c].checked&&b){for(g[h.name][c].checked="1",g[h.name][c].success_class="success",e=!1,d=0;d<f.length;d++)if(f[d].id===a){e=!0;break}e||f.push(g[h.name][c])}else for(g[h.name][c].checked="0",g[h.name][c].success_class="",d=0;d<f.length;d++)if(f[d].id===a){f.splice(d,1);break}f.length>0?(g.formModalActionDisabled=!1,g.disableSelectBtn=!1):(g.formModalActionDisabled=!0,g.disableSelectBtn=!0)},g.finishSelection=function(){function b(){f=[],void 0!==j?d(j):($("#form-modal").modal("hide"),g.$emit("modalClosed"))}function k(b){a.post(b).success(function(a,b){m.push({result:"success",data:a,status:b}),g.$emit("callFinished")}).error(function(a,b,c){m.push({result:"error",data:a,status:b,headers:c}),g.$emit("callFinished")})}a.setUrl(i);var l,m=[];if(g.formModalActionDisabled=!0,g.disableSelectBtn=!0,e("start"),g.callFinishedRemove&&g.callFinishedRemove(),g.callFinishedRemove=g.$on("callFinished",function(){var a,d=0;if(m.length===f.length){for(e("stop"),a=0;a<m.length;a++)"error"===m[a].result&&(c(g,m[a].data,m[a].status,null,{hdr:"POST Failure",msg:"Failed to add "+h.iterator+". POST returned status: "+m[a].status}),d++);0===d&&b()}}),f.length>0)for(l=0;l<f.length;l++)k(f[l]);else b()},g.formModalAction=g.finishSelection,g.SelectPostRefreshRemove&&g.SelectPostRefreshRemove(),g.SelectPostRefreshRemove=g.$on("PostRefresh",function(){var a,b,c;if(g[h.name])for(a=0;a<g[h.name].length;a++){for(c=!1,b=0;b<f.length;b++)if(f[b].id===g[h.name][a].id){c=!0;break}c?(g[h.name][a].checked="1",g[h.name][a].success_class="success"):(g[h.name][a].checked="0",g[h.name][a].success_class="")}})}}]),angular.module("UserHelper",["UserFormDefinition"]).factory("ResetForm",["UserForm",function(a){return function(){a.fields.first_name.readonly=!1,a.fields.first_name.editRequired=!0,a.fields.last_name.readonly=!1,a.fields.last_name.editRequired=!0,a.fields.email.readonly=!1,a.fields.email.editRequired=!0,a.fields.organization.awRequiredWhen={variable:"orgrequired",init:!0},a.fields.organization.readonly=!1,a.fields.username.awRequiredWhen={variable:"not_ldap_user",init:!0},a.fields.username.readonly=!1,a.fields.password.editRequired=!1,a.fields.password.addRrequired=!0}}]),angular.module("APIDefaults",["RestServices","Utilities"]).factory("GetAPIDefaults",["Alert","Rest","$rootScope",function(a,b,c){return function(a){function d(a){var b,d={};for(b in c.apiDefaults)if(b===a||b.iterator===a){d[b]=c.apiDefaults[b];break}return d}function e(){if($.isEmptyObject(g)&&5>h)h++,setTimeout(1e3,e());else if("success"===g.status)return d(a)}var f,g={},h=0;return null===c.apiDefaults||void 0===c.apiDefaults?(f="/api/v1/",b.setUrl(f),b.get().success(function(a){var b,d=a;for(b in d)switch(b){case"organizations":d[b].iterator="organization";break;case"jobs":d[b].iterator="job";break;case"users":d[b].iterator="user";break;case"teams":d[b].iterator="team";break;case"hosts":d[b].iterator="host";break;case"groups":d[b].iterator="group";break;case"projects":d[b].iterator="project";break;case"inventories":d[b].iterator="inventory"}c.apiDefaults=d,g={status:"success"}}).error(function(a,b){g={status:"error",msg:"Call to "+f+" failed. GET returned status: "+b}}),e()):d(a)}}]),angular.module("InventoryHelper",["RestServices","Utilities","OrganizationListDefinition","ListGenerator","AuthService","InventoryHelper","InventoryFormDefinition","ParseHelper","SearchHelper"]).factory("WatchInventoryWindowResize",["ApplyEllipsis",function(a){return function(){var b;$(window).resize(function(){clearTimeout(b),b=setTimeout(function(){$("#groups_table .name-column").each(function(){var a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%";$(this).find(".group-name").css({width:e})}),a("#groups_table .group-name a"),a("#hosts_table .host-name a")},100)})}}]).factory("SaveInventory",["InventoryForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i){return function(e){var f,h,j,k=e.scope,l=a,m=g("inventory");i("start");try{if(h="json"===k.inventoryParseType?JSON.parse(k.inventory_variables):jsyaml.load(k.inventory_variables),"object"!=typeof h)throw"failed to return an object!";j={};for(f in l.fields)"inventory_variables"!==f&&(l.fields[f].realName?j[l.fields[f].realName]=k[f]:j[f]=k[f]);b.setUrl(m+k.inventory_id+"/"),b.put(j).success(function(a){k.inventory_variables?(b.setUrl(a.related.variable_data),b.put(h).success(function(){i("stop"),k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory varaibles. PUT returned status: "+b})})):k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory. POST returned status: "+b})})}catch(n){i("stop"),c("Error","Error parsing inventory variables. Parser returned: "+n)}}}]).factory("EditInventoryProperties",["InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","SaveInventory","Wait","Store","SearchInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(n){var o,p=n.scope,q=n.inventory_id,r=b,s=a,t={},u=l("CurrentSearchParams");s.well=!1,o=r.inject(s,{mode:"edit",modal:!0,related:!1,modal_show:!1}),s.well=!0,i(o,"inventory_variables","inventoryParseType"),o.inventoryParseType="yaml",o.formModalActionLabel="Save",o.formModalCancelShow=!0,o.formModalInfo=!1,o.formModalHeader="Inventory Properties",k("start"),c.setUrl(h("inventory")+q+"/"),c.get().success(function(a){var b,c;for(b in s.fields){if("inventory_variables"===b){if($.isEmptyObject(a.variables)||"{}"===a.variables||"null"===a.variables||""===a.variables)o.inventory_variables="---";else try{c=JSON.parse(a.variables),o.inventory_variables=jsyaml.safeDump(c)}catch(e){d("Variable Parse Error","Attempted to parse variables for inventory: "+q+". Parse returned: "+e),console&&(console.log(e),console.log("data:"),console.log(a.variables)),o.inventory_variables="---"}t.inventory_variables=o.variables}else"inventory_name"===b?(o[b]=a.name,t[b]=o[b]):"inventory_description"===b?(o[b]=a.description,t[b]=o[b]):a[b]&&(o[b]=a[b],t[b]=o[b]);s.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[s.fields[b].sourceModel]&&(o[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField],t[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField])}f({scope:o,form:s,current_item:o.organization,list:g,field:"organization"}),k("stop"),$("#form-modal").modal("show")}).error(function(a,b){e(o,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+q+". GET returned: "+b})}),o.removeInventorySaved&&o.removeInventorySaved(),o.removeInventorySaved=o.$on("InventorySaved",function(){$("#form-modal").modal("hide"),o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1}),p.$emit("RefreshInventories")}),o.cancelModal=function(){o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1})},o.formModalAction=function(){p.inventory_id=q,p.inventory_name=o.inventory_name,j({scope:o})}}}]),angular.module("md5Helper",["RestServices","Utilities"]).factory("md5Setup",[function(){return function(a){var b=a.scope,c=a.master,d=a.check_field,e=a.default_val;b[d]=e,c[d]=e,b.genMD5=function(a){var c=new Date;b[a]=$.md5("AnsibleWorks"+c.getTime())},b.toggleCallback=function(a){"false"===b.allow_callbacks&&(b[a]="")},b.selectAll=function(a){$('input[name="'+a+'"]').focus().select()}}}]),angular.module("RefreshRelatedHelper",["RestServices","Utilities","PaginationHelpers"]).factory("RefreshRelated",["ProcessErrors","Rest","Wait","PageRangeSetup",function(a,b,c,d){return function(e){var f=e.scope,g=e.set,h=e.iterator,i=e.url;b.setUrl(i),b.get().success(function(a){d({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[g]=a.results,f[h+"Loading"]=!1,f[h+"HoldInput"]=!1,c("stop"),f.$emit("related"+g)}).error(function(b,c){a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RefreshHelper",["RestServices","Utilities","PaginationHelpers"]).factory("Refresh",["ProcessErrors","Rest","Wait","Empty","PageRangeSetup",function(a,b,c,d,e){return function(d){var f=d.scope,g=d.set,h=d.iterator,i=d.url;f.current_url=i,b.setUrl(i),b.get().success(function(a){var b,d;for(e({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[h+"Loading"]=!1,b=1;3>=b;b++)d=1===b?"":b,f[h+"HoldInput"+d]=!1;f[g]=a.results,window.scrollTo(0,0),c("stop"),f.$emit("PostRefresh")}).error(function(b,c){f[h+"HoldInput"]=!1,a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RelatedSearchHelper",["RestServices","Utilities","RefreshRelatedHelper"]).factory("RelatedSearchInit",["$timeout","Alert","Rest","RefreshRelated","Wait",function(a,b,c,d,e){return function(a){function b(a){var b,c,d,e;for(e in h.related)if("tree"!==h.related[e].type&&(void 0===a||a===h.related[e].iterator)){b=h.related[e].iterator;for(d in h.related[e].fields)if(h.related[e].fields[d].key){f[b+"SearchField"]=d,f[b+"SearchFieldLabel"]=h.related[e].fields[d].label;break}f[b+"SortOrder"]=null,f[b+"SearchType"]="icontains",f[b+"SearchTypeLabel"]="Contains",f[b+"SearchValue"]=null,f[b+"SelectShow"]=!1,f[b+"ShowStartBtn"]=!0,f[b+"HideAllStartBtn"]=!1,c=f[b+"SearchField"],!h.related[e].fields[c].searchType||"boolean"!==h.related[e].fields[c].searchType&&"select"!==h.related[e].fields[c].searchType||(f[b+"SelectShow"]=!0,f[b+"SearchSelectOpts"]=h.fields[c].searchOptions),h.related[e].fields[c].searchType&&"gtzero"===h.related[e].fields[c].searchType&&(f[b+"InputHide"]=!0)}}var c,f=a.scope,g=a.relatedSets,h=a.form;b(),f.resetSearch=function(a){b(a),f.search(a)},f.setSearchField=function(a,b,c){var d,e;for(e in h.related)h.related[e].iterator===a&&(d=h.related[e].fields[b]);f[a+"SearchFieldLabel"]=c,f[a+"SearchField"]=b,f[a+"SearchValue"]="",f[a+"SelectShow"]=!1,f[a+"InputHide"]=!1,f[a+"ShowStartBtn"]=!0,void 0!==d.searchType&&"gtzero"===d.searchType&&(f[a+"InputHide"]=!0,f[a+"ShowStartBtn"]=!1),void 0===d.searchType||"boolean"!==d.searchType&&"select"!==d.searchType||(f[a+"SelectShow"]=!0,f[a+"SearchSelectOpts"]=d.searchOptions),void 0!==d.searchType&&"int"===d.searchType&&(f[a+"SearchType"]="int"),f.search(a)},f.setSearchType=function(a,b,c){f[a+"SearchTypeLabel"]=c,f[a+"SearchType"]=b,f.search(a)},f.startSearch=function(a,b){13===a.keyCode&&f.search(b)},f.search=function(a){e("start"),f[a+"Loading"]=!0,f[a+"HoldInput"]=!0,f[a+"SearchValue"]&&(f[a+"ShowStartBtn"]=!1),"host"===a&&"has_active_failures"===f.hostSearchField&&(f.hostFailureFilter=f.hostSearchSelectValue&&1===f.hostSearchSelectValue.value?!0:!1);var b,i,j,k,l;for(i in g)if(g[i].iterator===a){j=i,k=g[i].url;for(b in h.related[i].fields)h.related[i].fields[b].key&&(l=h.related[i].fields[b].desc?"-"+b:b);break}l=null===f[a+"SortOrder"]?l:f[a+"SortOrder"],c=h.related[j].fields[f[a+"SearchField"]],f[a+"SelectShow"]===!1&&""!==f[a+"SearchValue"]&&void 0!==f[a+"SearchValue"]||f[a+"SelectShow"]&&f[a+"SearchSelectValue"]||c.searchType&&"gtzero"===c.searchType?(f[a+"SearchParams"]=c.sourceModel?c.sourceModel+"__"+c.sourceField+"__":c.searchField?c.searchField+"__":f[a+"SearchField"]+"__",f[a+"SearchParams"]+=!c.searchType||"int"!==c.searchType&&"boolean"!==c.searchType?c.searchType&&"gtzero"===c.searchType?"gt=0":f[a+"SearchType"]+"=":"int=",!c.searchType||"boolean"!==c.searchType&&"select"!==c.searchType?(void 0===c.searchType||"gtzero"===c.searchType)&&(f[a+"SearchParams"]+=encodeURI(f[a+"SearchValue"])):f[a+"SearchParams"]+=f[a+"SearchSelectValue"].value,f[a+"SearchParams"]+=l?"&order_by="+encodeURI(l):""):f[a+"SearchParams"]=l?"order_by="+encodeURI(l):"",f[a+"Page"]=0,k+=k.match(/\/$/)?"?":"&",k+=f[a+"SearchParams"],k+=f[a+"PageSize"]?"&page_size="+f[a+"PageSize"]:"",d({scope:f,set:j,iterator:a,url:k})},f.sort=function(a,b){var c,d,e,g;$("."+a+" .list-header").each(function(){if($(this).attr("id")!==a+"-"+b+"-header"){var c=$(this).find("i");c.attr("class","icon-sort")}}),d=$("#"+a+"-"+b+"-header i"),e="",d.hasClass("icon-sort")?(d.removeClass("icon-sort"),d.addClass("icon-sort-up")):d.hasClass("icon-sort-up")?(d.removeClass("icon-sort-up"),d.addClass("icon-sort-down"),e="-"):d.hasClass("icon-sort-down")&&(d.removeClass("icon-sort-down"),d.addClass("icon-sort-up"));for(g in h.related)h.related[g].iterator===a&&(c=h.related[g].fields[b].sourceModel?e+h.related[g].fields[b].sourceModel+"__"+h.related[g].fields[b].sourceField:e+b);f[a+"SortOrder"]=c,f.search(a)}}}]),angular.module("SearchHelper",["RestServices","Utilities","RefreshHelper"]).factory("SearchInit",["Alert","Rest","Refresh","$location","GetBasePath","Empty","$timeout","Wait","Store",function(a,b,c,d,e,f,g,h,i){return function(a){function b(a){var b,c,d,e;e=void 0===a||1===a?"":a,l[p+"SearchField"+e]="",l[p+"SearchFieldLabel"+e]="";for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&o.fields[c].key){o.fields[c].sourceModel?(d=o.fields[c].sourceModel+"__"+o.fields[c].sourceField,r=o.fields[c].desc?"-"+d:d):r=o.fields[c].desc?"-"+c:c,(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)&&(l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label);break}if(f(l[p+"SearchField"+e]))for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)){l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label;break}l[p+"SearchType"+e]="icontains",l[p+"SearchTypeLabel"+e]="Contains",l[p+"SearchParams"+e]="",l[p+"SearchValue"+e]="",l[p+"SelectShow"+e]=!1,l[p+"HideSearchType"+e]=!1,l[p+"InputDisable"+e]=!1,l[p+"ExtraParms"+e]="",l[p+"ShowStartBtn"+e]=!0,l[p+"HideAllStartBtn"+e]=!1,l[p+"SearchPlaceholder"+e]=o.fields[l[p+"SearchField"+e]]&&o.fields[l[p+"SearchField"+e]].searchPlaceholder?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]:o.fields[l[p+"SearchField"+e]].searchPlaceholder:"Search",l[p+"InputDisable"+e]=o.fields[l[p+"SearchField"+e]]&&"all"===o.fields[l[p+"SearchField"+e]].searchObject?!0:!1,b=l[p+"SearchField"+e],o.fields[b]&&(!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType||(l[p+"SelectShow"+e]=!0,l[p+"SearchSelectOpts"+e]=o.fields[b].searchOptions),o.fields[b].searchType&&"int"===o.fields[b].searchType&&(l[p+"HideSearchType"+e]=!0),o.fields[b].searchType&&"gtzero"===o.fields[b].searchType&&(l[p+"InputHide"+e]=!0))}var e,g,j,k,l=a.scope,m=a.set,n=a.url,o=a.list,p=a.iterator?a.iterator:o.iterator,q=a.setWidgets===!1?!1:!0,r=a.sort_order||"";if(q)for(e=o.searchWidgets?o.searchWidgets:1,g=1;e>=g;g++)j=1===g?"":g,$("#search-widget-container"+j)&&b(g);k={set:m,defaultUrl:n,list:o,iterator:p,sort_order:r},i("CurrentSearchParams",k),l.setSearchField=function(a,b,c,d){var e=void 0===d||1===d?"":d;l[a+"SearchFieldLabel"+e]=c,l[a+"SearchField"+e]=b,l[a+"SearchValue"+e]="",l[a+"SelectShow"+e]=!1,l[a+"HideSearchType"+e]=!1,l[a+"InputHide"+e]=!1,l[a+"SearchType"+e]="icontains",l[a+"InputDisable"+e]="all"===o.fields[b].searchObject?!0:!1,l[a+"ShowStartBtn"+e]=!0,l[a+"SearchPlaceholder"+e]=o.fields[l[a+"SearchField"+e]]&&o.fields[l[a+"SearchField"+e]].searchPlaceholder?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]:o.fields[l[a+"SearchField"+e]].searchPlaceholder:"Search",o.fields[b].searchType&&"gtzero"===o.fields[b].searchType?(l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1,l.search(a)):o.fields[b].searchSingleValue?(l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"SearchSelectValue"+e]="boolean"===o.fields[b].searchType&&"true"===o.fields[b].searchValue?{value:1}:"boolean"===o.fields[b].searchType&&"false"===o.fields[b].searchValue?{value:0}:{value:o.fields[b].searchValue},l[a+"ShowStartBtn"+e]=!1):"in"===o.fields[b].searchType?(l[a+"SearchType"+e]="in",l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1):!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType&&"select_or"!==o.fields[b].searchType?o.fields[b].searchType&&"int"===o.fields[b].searchType?l[a+"SearchType"+e]="int":o.fields[b].searchType&&"isnull"===o.fields[b].searchType&&(l[a+"SearchType"+e]="isnull",l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]="true",l[a+"ShowStartBtn"+e]=!1):(l[a+"SelectShow"+e]=!0,l[a+"SearchSelectOpts"+e]=o.fields[b].searchOptions),l.search(a)},l.resetSearch=function(a){var c,e=o.searchWidgets?o.searchWidgets:1;for(c=1;e>=c;c++)b(c);window.location="/#"+d.path(),l.search(a)},l.removeDoSearch&&l.removeDoSearch(),l.removeDoSearch=l.$on("doSearch",function(a,b,d,e){l[b+"Loading"]=void 0===e||e===!0?!0:!1;var f,g=n;l[b+"Page"]=d?parseInt(d)-1:0,l[b+"SearchParams"]&&(g+=/\/$/.test(g)?"?"+l[b+"SearchParams"]:"&"+l[b+"SearchParams"]),f=/\/$/.test(g)?"?":"&",g+=l[b+"_page_size"]?f+"page_size="+l[b+"_page_size"]:"",d&&(f=/\/$/.test(g)?"?":"&",g+=f+"page="+d),l[b+"ExtraParms"]&&(f=/\/$/.test(g)?"?":"&",g+=f+l[b+"ExtraParms"]),g=g.replace(/\&\&/,"&"),c({scope:l,set:m,iterator:b,url:g})}),l.removePrepareSearch&&l.removePrepareSearch(),l.removePrepareSearch=l.$on("prepareSearch",function(a,b,c,d,e){h("start"),l[b+"SearchParams"]="";var f,g,i=o.searchWidgets?o.searchWidgets:1;for(f=1;i>=f;f++)g=1===f?"":f,$("#search-widget-container"+g)&&o.fields[l[b+"SearchField"+g]]&&o.fields[l[b+"SearchField"+g]].searchObject&&("all"!==o.fields[l[b+"SearchField"+g]].searchObject?(l[b+"HideAllStartBtn"+g]=!1,l[b+"SearchValue"+g]?(l[b+"ShowStartBtn"+g]=!1,l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+g]].searchOnID?"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__id="+l[b+"SearchValue"+g]:"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__name__icontains="+l[b+"SearchValue"+g]):(l[b+"ShowStartBtn"+g]=!0,l[b+"SearchParams"]+="&"+o.fields[l[b+"SearchField"+g]].searchField+"="+o.fields[l[b+"SearchField"+g]].searchObject)):l[b+"HideAllStartBtn"+g]=!0);l.$emit("prepareSearch2",b,c,d,e)}),l.removePrepareSearch2&&l.removePrepareSearch2(),l.removePrepareSearch2=l.$on("prepareSearch2",function(a,b,c,d,e){var g,h,i=o.searchWidgets?o.searchWidgets:1;for(g=1;i>=g;g++)h=1===g?"":g,l[b+"HoldInput"+h]=!0,$("#search-widget-container"+h)&&o.fields[l[b+"SearchField"+h]]&&!o.fields[l[b+"SearchField"+h]].searchObject&&(l[b+"ShowStartBtn"+h]=l[b+"SearchValue"+h]?!1:!0,(!l[b+"SelectShow"+h]&&!f(l[b+"SearchValue"+h])||l[b+"SelectShow"+h]&&l[b+"SearchSelectValue"+h]||o.fields[l[b+"SearchField"+h]]&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+h]].searchField?"&"+o.fields[l[b+"SearchField"+h]].searchField+"__":o.fields[l[b+"SearchField"+h]].sourceModel?"&"+o.fields[l[b+"SearchField"+h]].sourceModel+"__"+o.fields[l[b+"SearchField"+h]].sourceField+"__":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?"&"+l[b+"SearchField"+h]+"__":"&"+l[b+"SearchField"+h]+"__",l[b+"SearchParams"]+=!o.fields[l[b+"SearchField"+h]].searchType||"int"!==o.fields[l[b+"SearchField"+h]].searchType&&"boolean"!==o.fields[l[b+"SearchField"+h]].searchType?o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType?"gt=0":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?l[b+"SearchType"+h]+"=":"iexact=":"int=",!o.fields[l[b+"SearchField"+h]].searchType||"boolean"!==o.fields[l[b+"SearchField"+h]].searchType&&"select"!==o.fields[l[b+"SearchField"+h]].searchType?(!o.fields[l[b+"SearchField"+h]].searchType||o.fields[l[b+"SearchField"+h]].searchType&&"or"!==o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"!==o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=encodeURI(l[b+"SearchValue"+h])):l[b+"SearchParams"]+=l[b+"SearchSelectValue"+h].value));("inventory"===b&&l.inventoryFailureFilter||"host"===b&&l.hostFailureFilter)&&(l[b+"SearchParams"]+="&has_active_failures=true"),r&&(l[b+"SearchParams"]+=l[b+"SearchParams"]?"&":"",l[b+"SearchParams"]+="order_by="+encodeURI(r)),l.$emit("doSearch",b,c,d,e)}),l.startSearch=function(a,b){13===a.keyCode&&l.search(b)},l.search=function(a,b,c){c=void 0===c?!0:!1,c&&(l[m]=[]),l.$emit("prepareSearch",a,b,c)},l.sort=function(a){$(".list-header").each(function(){if($(this).attr("id")!==a+"-header"){var b=$(this).find("i");b.attr("class","fa fa-sort")}});var b=$("#"+a+"-header i"),c="";b.hasClass("fa-sort")?(b.removeClass("fa-sort"),b.addClass("fa-sort-up")):b.hasClass("fa-sort-up")?(b.removeClass("fa-sort-up"),b.addClass("fa-sort-down"),c="-"):b.hasClass("fa-sort-down")&&(b.removeClass("fa-sort-down"),b.addClass("fa-sort-up")),r=o.fields[a].searchField?c+o.fields[a].searchField:o.fields[a].sortField?c+o.fields[a].sortField:o.fields[a].sourceModel?c+o.fields[a].sourceModel+"__"+o.fields[a].sourceField:c+a,l.search(o.iterator)},l.searchCleanup=function(){l.removeDoSearch(),l.removePrepareSearch(),l.removePrepareSearch2()}}}]),angular.module("TeamHelper",["RestServices","Utilities","OrganizationListDefinition","SearchHelper","PaginationHelpers","ListGenerator"]).factory("SetTeamListeners",["Alert","Rest",function(a,b){return function(a){var c=a.scope,d=a.set,e=a.iterator;c.$on("TeamResultFound",function(a,b,f){var g,h,i,j;if(f.length===b.length){for(i="organization",j="organization_name",g=0;g<b.length;g++)for(h=0;h<f.length;h++)b[g][i]===f[h].id&&(b[g][j]=f[h].value);c[e+"SearchSpin"]=!1,c[d]=b}}),c.$on("TeamRefreshFinished",function(a,d){function e(a){b.setUrl(a),b.get().success(function(a){h.push({id:a.id,value:a.name}),c.$emit("TeamResultFound",d,h)}).error(function(){h.push({id:"error"}),c.$emit("TeamResultFound",d,h)})}var f,g,h=[];for(f=0;f<d.length;f++)g="/api/v1/organizations/"+d[f].organization+"/",e(g)})}}]).factory("TeamLookUpOrganizationInit",["Alert","Rest","OrganizationList","GenerateList","SearchInit","PaginateInit",function(a,b,c,d,e,f){return function(b){var g=b.scope;g.lookUpOrganization=function(){var b=c,h=d,i=h.inject(b,{mode:"lookup",hdr:"Select Organization"}),j="/api/v1/organizations/";i.selectAction=function(){var c,d=!1;for(c=0;c<i[b.name].length;c++)"success"===i[b.iterator+"_"+i[b.name][c].id+"_class"]&&(d=!0,g.organization=i[b.name][c].id,g.organization_name=i[b.name][c].name,g.team_form.$setDirty(),h.hide());d===!1&&a("No Selection","Click on a row to select an Organization before clicking the Select button.")},i.toggle_organization=function(a){if(i[b.name])for(var c=0;c<i[b.name].length;c++)i[b.iterator+"_"+i[b.name][c].id+"_class"]="";null!==a&&void 0!==a&&(i[b.iterator+"_"+a+"_class"]="success")},e({scope:i,set:b.name,list:b,url:j}),f({scope:i,list:b,url:j,mode:"lookup"}),g.search(b.iterator),i.toggle_organization(g.organization)}}}]),angular.module("AdminListDefinition",[]).value("AdminList",{name:"admins",iterator:"admin",selectTitle:"Add Administrators",editTitle:"Admins",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p>",base:"users",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{},fieldActions:{}}),angular.module("CloudCredentialsListDefinition",[]).value("CloudCredentialList",{name:"cloudcredentials",iterator:"cloudcredential",selectTitle:"Add Cloud Credentials",editTitle:"Cloud Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},team:{label:"Team",ngBind:"credential.team_name",sourceModel:"team",sourceField:"name",excludeModal:!0},user:{label:"User",ngBind:"credential.user_username",sourceModel:"user",sourceField:"username",excludeModal:!0}},actions:{add:{mode:"all",ngClick:"addCredential()","class":"btn-sm",awToolTip:"Create a new credential"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash-o",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("CredentialsListDefinition",[]).value("CredentialList",{name:"credentials",iterator:"credential",selectTitle:"Add Credentials",editTitle:"Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},kind:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0}},actions:{add:{mode:"all",ngClick:"addCredential()",awToolTip:"Create a new credential"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("GroupListDefinition",[]).value("GroupList",{name:"groups",iterator:"group",selectTitle:"Copy Groups",editTitle:"Groups",index:!0,well:!1,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{help:{awPopOver:"Choose groups by clicking on each group you wish to add. Click the <em>Select</em> button to add the groups to the selected inventory group.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Adding Groups"}},fieldActions:{edit:{label:"Edit",ngClick:"editGroup(group.id)",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit group",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteGroup(group.id, group.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete group",dataPlacement:"top"}}}),angular.module("HomeGroupListDefinition",[]).value("HomeGroupList",{name:"home_groups",iterator:"group",editTitle:"Groups",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Group",ngClick:"editGroup(group.id, group.inventory)",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-6 ellipsis"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ /#/inventories/' + group.inventory + '/' }}"},source:{label:"Source",searchType:"select",searchOptions:[{name:"ec2",value:"ec2"},{name:"none",value:""},{name:"rax",value:"rax"}],sourceModel:"inventory_source",sourceField:"source",searchOnly:!0},has_external_source:{label:"Has external source?",searchType:"in",searchValue:"ec2,rax",searchOnly:!0,sourceModel:"inventory_source",sourceField:"source"},has_active_failures:{label:"Has failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},last_update_failed:{label:"Update failed?",searchType:"select",searchSingleValue:!0,searchValue:"failed",searchOnly:!0,sourceModel:"inventory_source",sourceField:"status"},id:{label:"ID",searchOnly:!0}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",awToolTip:"{{ group.status_tooltip }}",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",dataPlacement:"top",ngHref:"/#/inventories/{{ group.inventory }}/",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",ngShow:"(group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate(group.id)",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"(group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{label:"Edit",mode:"all",ngClick:"editGroup(group.id)",awToolTip:"Edit group",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HomeHostListDefinition",[]).value("HomeHostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Name",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-7 ellipsis",ngClick:"editHost(host.id, host.name)"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ '/#/inventories/' + host.inventory }}"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Has failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_inventory_sources:{label:"Has external source?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},id:{label:"ID",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{label:"Edit",ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"}},actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HostListDefinition",[]).value("HostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,well:!1,fields:{name:{key:!0,label:"Host Name",linkTo:"/inventories/{{ inventory_id }}/hosts/{{ host.id }}"},description:{label:"Description"}},actions:{help:{awPopOver:"Select hosts by clicking on each host you wish to add. Add the selected hosts to the group by clicking the <em>Select</em> button.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Selecting Hosts"}},fieldActions:{edit:{label:"Edit",ngClick:"editHost({{ host.id }})",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit host",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete host",dataPlacement:"top"}}}),angular.module("InventoriesListDefinition",[]).value("InventoryList",{name:"inventories",iterator:"inventory",selectTitle:"Add Inventories",editTitle:"Inventories",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},organization:{label:"Organization",ngBind:"inventory.summary_fields.organization.name",linkTo:"/#/organizations/{{ inventory.organization }}",sourceModel:"organization",sourceField:"name",excludeModal:!0},has_inventory_sources:{label:"Cloud sourced?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_active_failures:{label:"Failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},inventory_sources_with_failures:{label:"Sync failures?",searchType:"gtzero",searchValue:"true",searchOnly:!0}},actions:{add:{mode:"all",ngClick:"addInventory()",awToolTip:"Create a new inventory"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{status:{ngHref:"inventory.status_link",iconClass:"{{ 'fa fa-cloud icon-cloud-' + inventory.status_class }}",awToolTip:"{{ inventory.status_tip }}",dataPlacement:"top"},failed_hosts:{ngHref:"inventory.failed_hosts_link",iconClass:"{{ 'fa icon-failures-' + inventory.failed_hosts_class }}",awToolTip:"{{ inventory.failed_hosts_tip }}",dataPlacement:"top"},edit:{label:"Edit",ngClick:"editInventoryProperties(inventory.id)",awToolTip:"Edit inventory",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteInventory(inventory.id, inventory.names')",awToolTip:"Delete inventory",dataPlacement:"top"}}}),angular.module("InventoryGroupsDefinition",[]).value("InventoryGroups",{name:"groups",iterator:"group",editTitle:"{{ inventory_name }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,filterBy:"{ show: true }","class":"table-condensed table-no-border",fields:{name:{label:"Groups",key:!0,ngClick:"showHosts(group.id,group.group_id, false)",ngClass:"group.selected_class",hasChildren:!0,columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",nosort:!0,awDroppable:"{{ group.isDroppable }}",awDraggable:"{{ group.isDraggable }}",dataContainment:"#groups_table",dataTreeId:"{{ group.id }}",dataGroupId:"{{ group.group_id }}",dataType:"group"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createGroup()",awToolTip:"Create a new group"},properties:{mode:"all",awToolTip:"Edit inventory properties",ngClick:"editInventoryProperties()"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refreshGroups()"},stream:{ngClick:"showGroupActivity()",awToolTip:"View Activity Stream",mode:"all"},help:{mode:"all",awToolTip:"Get help building your inventory",ngClick:"showGroupHelp()",id:"inventory-summary-help"}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",ngShow:"group.id > 1",awToolTip:"{{ group.status_tooltip }}",dataTipWatch:"group.launch_tooltip",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",ngShow:"group.id > 1",dataPlacement:"top",ngClick:"showHosts(group.id, group.group_id, group.show_failures)",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",dataTipWatch:"group.launch_tooltip",ngShow:"group.id > 1 && (group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate({{ group.id }})",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"group.id > 1 && (group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{mode:"all",ngClick:"editGroup({{ group.group_id + ',' + group.id }})",awToolTip:"Edit group",ngShow:"group.id > 1",dataPlacement:"top"},"delete":{mode:"all",ngClick:"deleteGroup({{ group.id + ',' + group.group_id }})",awToolTip:"Delete group",ngShow:"group.id != 1",dataPlacement:"top"}}}),angular.module("InventoryHostsDefinition",[]).value("InventoryHosts",{name:"hosts",iterator:"host",editTitle:"{{ selected_group }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,"class":"table-condensed table-no-border",fields:{name:{key:!0,label:"Hosts",ngClick:"editHost(host.id)",searchPlaceholder:"search_place_holder",columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",dataHostId:"{{ host.id }}",dataType:"host",awDraggable:"true"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"},"delete":{ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash",awToolTip:"Delete host",dataPlacement:"top"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createHost()",ngHide:"selected_tree_id == 1",awToolTip:"Create a new host"},stream:{ngClick:"showHostActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("JobEventsListDefinition",[]).value("JobEventList",{name:"jobevents",iterator:"jobevent",editTitle:"Job Events",index:!1,hover:!0,hasChildren:!0,filterBy:"{ show: true }",navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",active:!0,icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{created:{label:"Created On",columnClass:"col-lg-1 col-md-1 hidden-sm hidden-xs",key:!0,nosort:!0,searchable:!1,link:!1},status:{label:"Status",showValue:!1,columnClass:"col-sm-1 col-xs-2 text-center",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}],nosort:!0,searchable:!1,ngClick:"viewJobEvent({{ jobevent.id }})",awToolTip:"{{ jobevent.statusBadgeToolTip }}",dataPlacement:"top",badgeIcon:"fa icon-job-{{ jobevent.status }}",badgePlacement:"left",badgeToolTip:"{{ jobevent.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgClick:"viewJobEvent({{ jobevent.id }})"},event_display:{label:"Event",hasChildren:!0,ngClick:"toggleChildren(jobevent.id, jobevent.related.children)",nosort:!0,searchable:!1,ngClass:"{{ jobevent.class }}",appendHTML:"jobevent.event_detail"},host:{label:"Host",ngBind:"jobevent.summary_fields.host.name",ngHref:"{{ jobevent.hostLink }}",searchField:"hosts__name",nosort:!0,searchOnly:!1,id:"job-event-host-header","class":"break",columnClass:"col-lg-2 hidden-sm hidden-xs"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{columnClass:"col-sm-1 col-xs-2",view:{label:"View",ngClick:"viewJobEvent(jobevent.id)",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("JobHostDefinition",[]).value("JobHostList",{name:"jobhosts",iterator:"jobhost",editTitle:"All summaries",index:!0,hover:!0,navigationLinks:{ngHide:"host_id !== null",details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",active:!0,icon:"icon-laptop"}},fields:{job:{label:"Job ID",ngClick:"showJob(jobhost.job)",columnShow:"host_id !== null",key:!0,desc:!0},host:{label:"Host",key:!0,sourceModel:"host",sourceField:"name",ngBind:"jobhost.host_name",ngHref:"jobhost.hostLinkTo"},status:{label:"Status",badgeNgHref:"{{ jobhost.statusLinkTo }}",badgeIcon:"fa icon-job-{{ jobhost.status }}",badgePlacement:"left",badgeToolTip:"{{ jobhost.statusBadgeToolTip }}",badgeTipPlacement:"top",ngHref:"{{ jobhost.statusLinkTo }}",awToolTip:"{{ jobhost.statusBadgeToolTip }}",dataPlacement:"top",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}]},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},ok:{label:"Success",searchable:!1},changed:{label:"Changed",searchable:!1},failures:{label:"Failure",searchable:!0,searchLabel:"Contains failed events?",searchType:"gtzero"},dark:{label:"Unreachable",searchable:!0,searchType:"gtzero",searchLabel:"Contains unreachable hosts?"},skipped:{label:"Skipped",searchable:!1}},actions:{help:{awPopOver:"<dl>\n<dt>Success</dt><dd>Tasks successfully executed on the host.</dd>\n<dt>Changed</dt><dd>Actions taken on the host.</dd>\n<dt>Failure</dt><dd>Tasks that failed on the host.</dd>\n<dt>Unreachable</dt><dd>Times the ansible server could not reach the host.</dd>\n<dt>Skipped</dt><dd>Tasks bypassed and not performed on the host due to prior task failure or the host being unreachable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Job Host Summary",id:"jobhost-help-button"},refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refresh()",ngShow:"host_id == null"}},fieldActions:{}}),angular.module("JobTemplatesListDefinition",[]).value("JobTemplateList",{name:"job_templates",iterator:"job_template",selectTitle:"Add Job Template",editTitle:"Job Templates",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addJobTemplate()",basePaths:["job_templates"],awToolTip:"Create a new template"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editJobTemplate(job_template.id)",icon:"icon-edit",awToolTip:"Edit template","class":"btn-default btn-xs",dataPlacement:"top"},submit:{label:"Launch",icon:"icon-rocket",mode:"all","class":"btn-xs btn-success",ngClick:"submitJob(job_template.id)",awToolTip:"Start a job using this template",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteJobTemplate(job_template.id, job_template.name)",icon:"icon-trash","class":"btn-danger btn-xs",awToolTip:"Delete template",dataPlacement:"top"}}}),angular.module("JobsListDefinition",[]).value("JobList",{name:"jobs",iterator:"job",editTitle:"Jobs",index:!1,hover:!0,"class":"jobs-table",fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},inventory:{label:"Inventory ID",searchType:"int",searchOnly:!0},created:{label:"Create On",link:!1,searchable:!1},job_template:{label:"Job Template",ngBind:"job.summary_fields.job_template.name",ngHref:"{{ '/#/job_templates/' + job.job_template }}",sourceModel:"job_template",sourceField:"name"},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{ job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{submit:{label:"Relaunch",icon:"icon-rocket",mode:"all",ngClick:"submitJob(job.id, job.summary_fields.job_template.name)",awToolTip:"Start the job",dataPlacement:"top"},cancel:{label:"Stop",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Cancel a running or pending job",ngShow:"job.status == 'pending' || job.status == 'running' || job.status == 'waiting'",dataPlacement:"top"},"delete":{label:"Delete",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Delete the job",ngShow:"job.status != 'pending' && job.status != 'running' && job.status != 'waiting'",dataPlacement:"top"},dropdown:{type:"DropDown",label:"View",icon:"fa-search-plus","class":"btn-default btn-xs",options:[{ngClick:"editJob(job.id, job.summary_fields.job_template.name)",label:"Status"},{ngClick:"viewEvents(job.id, job.summary_fields.job_template.name)",label:"Events",ngHide:"job.status == 'new'"},{ngClick:"viewSummary(job.id, job.summary_fields.job_template.name)",label:"Host Summary",ngHide:"job.status == 'new'"}]}}}),angular.module("OrganizationListDefinition",[]).value("OrganizationList",{name:"organizations",iterator:"organization",selectTitle:"Add Organizations",editTitle:"Organizations",hover:!0,index:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addOrganization()",awToolTip:"Create a new organization"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editOrganization(organization.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit organization",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteOrganization(organization.id, organization.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete organization",dataPlacement:"top"}}}),angular.module("PermissionListDefinition",[]).value("PermissionList",{name:"permissions",iterator:"permission",selectTitle:"Add Permission",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',editTitle:"Permissions",index:!0,well:!0,fields:{name:{key:!0,label:"Name",ngClick:"editPermission(permission.id)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},actions:{add:{mode:"all",ngClick:"addPermission()",awToolTip:"Add a new permission",ngShow:"PermissionAddAllowed"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editPermission(permission.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit permission",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deletePermission(permission.id, permission.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete permission",ngShow:"PermissionAddAllowed",dataPlacement:"top"}}}),angular.module("ProjectsListDefinition",[]).value("ProjectList",{name:"projects",iterator:"project",selectTitle:"Add Project",editTitle:"Projects",selectInstructions:"<p>Select existing projects by clicking each project or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new project by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",columnClass:"hidden-sm hidden-xs",excludeModal:!0},scm_type:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0},status:{label:"Status",ngClick:"showSCMStatus(project.id)",awToolTip:"View details of last SCM Update",dataPlacement:"top",badgeIcon:"{{ 'fa icon-failures-' + project.badge }}",badgePlacement:"left",searchType:"select",searchOptions:[],excludeModal:!0},last_updated:{label:"Last Updated",type:"date",excludeModal:!0,searchable:!1}},actions:{add:{mode:"all",ngClick:"addProject()",awToolTip:"Create a new project"},help:{awPopOver:"<dl>\n<dt>Updating</dt><dd>A source control update is in progress.</dd>\n<dt>Never Updated</dt><dd>This project has not yet been updated from source control.</dd>\n<dt>Failed</dt><dd>An error occurred during the most recent source control update, click the status text for more information.</dd>\n<dt>Successful</dt><dd>TThe latest source control update completed successfully.</dd>\n<dt>Missing</dt><dd>The previously configured local project directory is missing.</dd>\n<dt>N/A</dt><dd>The project is not linked to source control, so updates are not applicable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all",awToolTip:"Click for help",awTipPlacement:"top"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editProject(project.id)",awToolTip:"Edit project properties",dataPlacement:"top"},scm_update:{label:"Update",ngClick:"SCMUpdate(project.id)",awToolTip:"{{ project.scm_update_tooltip }}",ngClass:"project.scm_type_class",dataPlacement:"top"},cancel:{label:"Stop",ngClick:"cancelUpdate(project.id, project.name)",awToolTip:"Cancel a running SCM update process",ngShow:"project.status == 'updating'",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteProject(project.id, project.name)",awToolTip:"Permanently remove project from the database",ngShow:"project.status !== 'updating'",dataPlacement:"top"}}}),angular.module("StreamListDefinition",[]).value("StreamList",{name:"activities",iterator:"activity",editTitle:"Activity Stream",selectInstructions:"",index:!1,hover:!0,"class":"table-condensed",searchWidgets:3,fields:{timestamp:{label:"Event Time",key:!0,desc:!0,noLink:!0,searchable:!1},user:{label:"Initiated by",ngBindHtml:"activity.user",sourceModel:"actor",sourceField:"username",searchPlaceholder:"Username",searchWidget:1},description:{label:"Action",ngBindHtml:"activity.description",nosort:!0,searchable:!1,columnClass:"col-lg-7"},system_event:{label:"System event",searchOnly:!0,searchType:"isnull",sourceModel:"actor",sourceField:"username",searchWidget:1},all_objects:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All resources",searchWidget:2},credential_search:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Credential name",searchWidget:2,searchField:"object1"},group_search:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Group name",searchWidget:2,searchField:"object1"},host_search:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Host name",searchWidget:2,searchField:"object1"},inventory_search:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Inventory name",searchWidget:2,searchField:"object1"},job_template_search:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Job template name",searchWidget:2,searchField:"object1"},job_search:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:2,searchField:"object1"},organization_search:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Organization name",searchWidget:2,searchField:"object1"},project_search:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Project name",searchWidget:2,searchField:"object1"},user_search:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Primary username",searchWidget:2,searchField:"object1"},all_objects3:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All related resources",searchWidget:3,searchField:"object2"},credential_search3:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Related credential name",searchWidget:3,searchField:"object2"},group_search3:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Related group name",searchWidget:3,searchField:"object2"},host_search3:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Related host name",searchWidget:3,searchField:"object2"},inventory_search3:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Related inventory name",searchWidget:3,searchField:"object2"},job_search3:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:3,searchField:"object2"},job_template_search3:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Related job template name",searchWidget:3,searchField:"object2"},organization_search3:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Related organization name",searchWidget:3,searchField:"object2"},project_search3:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Related project name",searchWidget:3,searchField:"object2"},user_search3:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Related username",searchWidget:3,searchField:"object2"}},actions:{refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refreshStream()"},close:{mode:"all",awToolTip:"Close Activity Stream view",ngClick:"closeStream()"}},fieldActions:{view:{label:"View",ngClick:"showDetail(activity.id)",icon:"fa-zoom-in","class":"btn-default btn-xs",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("TeamsListDefinition",[]).value("TeamList",{name:"teams",iterator:"team",selectTitle:"Add Team",editTitle:"Teams",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"},organization:{label:"Organization",ngBind:"team.organization_name",sourceModel:"organization",sourceField:"name"}},actions:{add:{mode:"all",ngClick:"addTeam()",awToolTip:"Create a new team"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editTeam(team.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit team",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteTeam(team.id, team.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete team",dataPlacement:"top"}}}),angular.module("UserListDefinition",[]).value("UserList",{name:"users",iterator:"user",selectTitle:"Add Users",editTitle:"Users",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>When available, a brand new user can be created by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{add:{label:"Create New",mode:"all",ngClick:"addUser()",basePaths:["organizations","users"],"class":"btn-xs",awToolTip:"Create a new user"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editUser(user.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit user",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteUser(user.id, user.username)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete user",dataPlacement:"top"}}}),angular.module("InventorySyncStatusWidget",["RestServices","Utilities"]).factory("InventorySyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b=a.label,c=a.count,d=a.fail,e=a.link,f=a.fail_link,g="<tr>\n";
return g+='<td><a href="'+e+'"',g+="Hosts"===b||"Groups"===b?' class="pad-left-sm" ':"",g+=">"+b+"</a></td>\n",g+='<td class="',g+=d>0?"failed-column":"zero-column",g+=' text-right">',g+='<a href="'+f+'">'+d+"</a>",g+="</td>\n",g+='<td class="text-right">',g+='<a href="'+e+'">'+c+"</a>",g+="</td></tr>\n"}var d,e,f,g,h,i=a.scope,j=a.target,k=a.dashboard;if(d='<div class="panel panel-default">\n',d+='<div class="panel-heading">Inventory Sync Status</div>\n',d+='<div class="panel-body">\n',d+='<table class="table table-condensed table-hover">\n',d+="<thead>\n",d+="<tr>\n",d+='<th class="col-md-4 col-lg-3"></th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',d+="</tr>\n",d+="</thead>\n",d+="<tbody>\n",d+=c({label:"Inventories",count:k.inventories&&k.inventories.total_with_inventory_source?k.inventories.total_with_inventory_source:0,fail:k.inventories&&k.inventories.inventory_failed?k.inventories.inventory_failed:0,link:"/#/inventories/?has_inventory_sources=true",fail_link:"/#/inventories/?inventory_sources_with_failures=true"}),e=0,f=0,k.inventory_sources)for(h in k.inventory_sources)e+=k.inventory_sources[h].total?k.inventory_sources[h].total:0,f+=k.inventory_sources[h].failed?k.inventory_sources[h].failed:0;d+=c({label:"Groups",count:e,fail:f,link:"/#/home/groups/?has_external_source=true",fail_link:"/#/home/groups/?status=failed"});for(h in k.inventory_sources)k.inventory_sources[h].total&&(d+=c({label:k.inventory_sources[h].label,count:k.inventory_sources[h].total?k.inventory_sources[h].total:0,fail:k.inventory_sources[h].failed?k.inventory_sources[h].failed:0,link:"/#/home/groups/?source="+h,fail_link:"/#/home/groups/?status=failed&source="+h}));d+="</tbody>\n",d+="</table>\n",d+="</div>\n",d+="</div>\n",d+="</div>\n",g=angular.element(document.getElementById(j)),g.html(d),b(g)(i),i.$emit("WidgetLoaded")}}]),angular.module("JobStatusWidget",["RestServices","Utilities"]).factory("JobStatus",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'"',b+="Hosts"===c||"Groups"===c?' class="pad-left-sm" ':"",b+=">"+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e=a.scope,f=a.target,g=a.dashboard,h="";h='<div class="panel panel-default">\n',h+='<div class="panel-heading">Job Status</div>\n',h+='<div class="panel-body">\n',h+='<table class="table table-condensed table-hover">\n',h+="<thead>\n",h+="<tr>\n",h+='<th class="col-md-4 col-lg-3"></th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',h+="</tr>\n",h+="</thead>\n",h+="<tbody>\n",h+=c({label:"Jobs",link:"/#/jobs",count:g.jobs&&g.jobs.total?g.jobs.total:0,fail:g.jobs&&g.jobs.failed?g.jobs.failed:0,fail_link:"/#/jobs/?status=failed"}),h+=c({label:"Inventories",link:"/#/inventories",count:g.inventories&&g.inventories.total?g.inventories.total:0,fail:g.inventories&&g.inventories.job_failed?g.inventories.job_failed:0,fail_link:"/#/inventories/?has_active_failures=true"}),h+=c({label:"Groups",link:"/#/home/groups",count:g.groups&&g.groups.total?g.groups.total:0,fail:g.groups&&g.groups.job_failed?g.groups.job_failed:0,fail_link:"/#/home/groups/?has_active_failures=true"}),h+=c({label:"Hosts",link:"/#/home/hosts",count:g.hosts&&g.hosts.total?g.hosts.total:0,fail:g.hosts&&g.hosts.failed?g.hosts.failed:0,fail_link:"/#/home/hosts/?has_active_failures=true"}),h+="</tbody>\n",h+="</table>\n",h+="</div>\n",h+="</div>\n",h+="</div>\n",d=angular.element(document.getElementById(f)),d.html(h),b(d)(e),e.$emit("WidgetLoaded")}}]),angular.module("ObjectCountWidget",["RestServices","Utilities"]).factory("ObjectCount",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.count;return b+="<tr>\n",b+='<td class="capitalize"><a href="'+d+'"',b+="hosts"===c||"groups"===c?' class="pad-left-sm" ':"",b+=">"+c.replace(/\_/g," ")+"</a></td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+e+"</a>",b+="</td></tr>\n"}var d,e,f,g=a.scope,h=a.target,i=a.dashboard,j=["organizations","users","teams","credentials","projects","inventories","groups","hosts","job_templates","jobs"];for(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">System Summary</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-5 col-lg-4"></th>\n',e+='<th class="col-md-1 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",d=0;d<j.length;d++)e+=c({label:j[d],link:"/#/"+("hosts"===j[d]||"groups"===j[d]?"home/"+j[d]:j[d]),count:i[j[d]]&&i[j[d]].total?i[j[d]].total:0});e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",f=angular.element(document.getElementById(h)),f.html(e),b(f)(g),g.$emit("WidgetLoaded")}}]),angular.module("SCMSyncStatusWidget",["RestServices","Utilities"]).factory("SCMSyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'">'+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e,f,g,h,i,j=a.scope,k=a.target,l=a.dashboard;if(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">Project SCM Status</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-4 col-lg-3"></th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",f=0,l.scm_types)for(h in l.scm_types)f+=l.scm_types[h].total?l.scm_types[h].total:0;e+=c({label:"Projects",link:"/#/projects",count:f,fail:l.projects&&l.projects.failed?l.projects.failed:0,fail_link:"/#/projects/?status=failed"}),i=[];for(h in l.scm_types)i.push(h);for(i.sort(),d=0;d<i.length;d++)h=i[d],l.scm_types[h].total&&(e+=c({label:l.scm_types[h].label,link:"/#/projects/?scm_type="+h,count:l.scm_types[h].total?l.scm_types[h].total:0,fail:l.scm_types[h].failed?l.scm_types[h].failed:0,fail_link:"/#/projects/?scm_type="+h+"&status=failed"}));e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",e+="</div>\n",g=angular.element(document.getElementById(k)),g.html(e),b(g)(j),j.$emit("WidgetLoaded")}}]),angular.module("StreamWidget",["RestServices","Utilities","StreamListDefinition","SearchHelper","PaginationHelpers","RefreshHelper","ListGenerator","StreamWidget","AuthService"]).factory("setStreamHeight",[function(){return function(){var a=$("#stream-content").height(),b=parseInt($("#tab-content-container").css("min-height").replace(/px/,"")),c=a>b?a:b;$("#tab-content-container").css({"min-height":c})}}]).factory("ShowStream",["setStreamHeight","Authorization",function(a){return function(){var b=$("#stream-container");b.css({position:"absolute",top:0,left:0,width:"100%","min-height":"100%","background-color":"#FFF"}),a(),b.show("slide",{direction:"left"},{duration:500,queue:!1})}}]).factory("HideStream",["LoadBreadCrumbs",function(a){return function(){var b=$("#stream-container");b.hide("slide",{direction:"left"},{duration:500,queue:!1}),setTimeout(function(){b.detach(),b.empty(),b.unbind(),$("#tab-content-container").css({"min-height":0})},500),a()}}]).factory("StreamBreadCrumbs",["$rootScope","$location",function(a,b){return function(){a.breadcrumbs=[];var c,d,e,f,g=b.path().split("/");for(g.splice(0,1),e=0;e<g.length;e++){if(/^\d+/.test(g[e])){for(c="",d="",f=0;e>=f;f++)c+="/"+g[f];for(f=0;f<a.crumbCache.length;f++)if(a.crumbCache[f].path===c){d=a.crumbCache[f].title;break}d||(d=g[e-1].substr(0,g[e-1].length-1),d=d.charAt(0).toUpperCase()+d.slice(1),d="Inventorie"===d?"Inventory":d)}else{if(c="",d="",e>0)for(f=0;e>=f;f++)c+="/"+g[f];else c="/"+g[e];d=g[e],d=d.charAt(0).toUpperCase()+d.slice(1)}a.breadcrumbs.push({path:c,title:d,ngClick:"closeStream('"+c+"')"})}}}]).factory("FixUrl",[function(){return function(a){return a.replace(/\/api\/v1\//,"/#/")}}]).factory("BuildUrl",[function(){return function(a){var b="/#/";switch(a.base){case"group":case"host":b+="home/"+a.base+"s/?id="+a.id;break;case"inventory":b+="inventories/"+a.id+"/";break;default:b+=a.base+"s/"+a.id+"/"}return b}}]).factory("BuildDescription",["FixUrl","BuildUrl",function(a,b){return function(a){function c(a){return a.replace(/^_deleted_\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d+\+\d+:\d+_/,"")}var d,e,f,g,h,i,j,k;d=a.operation,d+=/e$/.test(a.operation)?"d ":"ed ",e=d,f=a.object1,g=a.object2,h=a.summary_fields[f]?a.summary_fields[f][0]:null,i=f===g?a.summary_fields[f][1]:a.summary_fields[g]?a.summary_fields[g][0]:null,("user"===f||"user"===g)&&(a.summary_fields.user[0].name=a.summary_fields.user[0].username),i&&i.name&&!/^_delete/.test(i.name)?(i.base=g,d+=g+' <a href="'+b(i)+'">'+i.name+"</a>"+("disassociate"===a.operation?" from ":" to "),e+=g+" "+i.name+("disassociate"===a.operation?" from ":" to ")):g&&(j="",i&&i.name&&(j=" "+c(i.name)),d+=g+j+("disassociate"===a.operation?" from ":" to "),e+=g+j+("disassociate"===a.operation?" from ":" to ")),h&&h.name&&!/^\_delete/.test(h.name)?(h.base=f,d+=f+' <a href="'+b(h)+'">'+h.name+"</a>",e+=f+" "+h.name):f&&(j="",k="",!h||!h.name||h&&h.name&&/^_delete/.test(h.name)?a.changes&&a.changes.name?"string"==typeof a.changes.name?(j=" "+a.changes.name,k=j):"object"==typeof a.changes.name&&Array.isArray(a.changes.name)&&(j=" "+a.changes.name[0],k=j):"job"===f&&h&&a.changes&&a.changes.job_template?"delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+" "+a.changes.job_template+"</a>",k=" "+h.id+" "+a.changes.job_template):(j=" "+h.id+" "+a.changes.job_template,k=j):"job"===f&&h&&("delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+"</a>",k=" "+h.id):(j=" "+h.id,k=j)):h&&h.name&&(j=" "+c(h.name),k=j),d+=f+j,e+=f+k),a.description=d,a.description_nolink=e}}]).factory("ShowDetail",["$rootScope","Rest","Alert","GenerateForm","ProcessErrors","GetBasePath","FormatDate","ActivityDetailForm","Empty","Find",function(a,b,c,d,e,f,g,h,i,j){return function(a){var b,c,e,f=a.activity_id,i=a.scope,k=d,l=h,m=j({list:i.activities,key:"id",val:f});m&&(m.changes_stringified=JSON.stringify(m.changes,null,"	"),b=m.changes_stringified.match(/\n/g),c=b?b.length:1,c=1>c?3:10,l.fields.changes.rows=10,e=k.inject(l,{mode:"edit",modal:!0,related:!1}),e.changes=m.changes_stringified,e.user=(m.summary_fields.actor?m.summary_fields.actor.username:"system")+" on "+g(new Date(m.timestamps)),e.operation=m.description_nolink,e.formModalAction=function(){$("#form-modal").modal("hide")},$("#form-modal").on("show.bs.modal",function(){$("#form-modal-body").css({width:"auto",height:"auto","max-height":"100%"})}),e.formModalActionLabel="OK",e.formModalCancelShow=!1,e.formModalInfo=!1,e.formModalHeader="Event "+m.id,e.$$phase||e.$digest())}}]).factory("Stream",["$rootScope","$location","Rest","GetBasePath","ProcessErrors","Wait","StreamList","SearchInit","PaginateInit","GenerateList","FormatDate","ShowStream","HideStream","BuildDescription","FixUrl","BuildUrl","ShowDetail","StreamBreadCrumbs","setStreamHeight","Find","Store",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return function(c){var e,f,o,v,w=g,x=d("activity_stream"),y=j,z=b.path().replace(/^\//,"").split("/")[0],A=c.scope,B=u("CurrentSearchParams"),C=c&&c.inventory_name?c.inventory_name:null,D=c&&c.url?c.url:null;a.flashMessage=null,D?x=D:"/home"!==b.path()&&(e="inventories"===z?"inventory":z.replace(/s$/,""),f=b.path().split("/"),f.splice(0,1),f.length>1&&/^\d+/.test(f[f.length-1])?(e=f[f.length-2],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?"+e+"__id="+f[f.length-1]):f.length>1?(e=f[f.length-1],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?or__object1="+e+"&or__object2="+e):x+="?or__object1="+e+"&or__object2="+e),$("#tab-content-container").append('<div id="stream-container"><div id="stream-content"></div></div><!-- Stream widget -->'),r(),C&&(o=t({list:a.breadcrumbs,key:"title",val:"{{ inventory_name }}"}),o&&(o.title=C)),l(),v=y.inject(w,{mode:"edit",id:"stream-content",searchSize:"col-lg-3",secondWidget:!0,activityStream:!0}),v.streamTitle=c&&c.title?c.title:null,v.closeStream=function(a){m(),v.searchCleanup&&v.searchCleanup(),B&&h({scope:A,set:B.set,list:B.list,url:B.defaultUrl,iterator:B.iterator,sort_order:B.sort_order,setWidgets:!1}),a&&b.path(a)},v.refreshStream=function(){v.search(w.iterator)},v.showDetail=function(a){q({scope:v,activity_id:a})},v.removeStreamPostRefresh&&v.removeStreamPostRefresh(),v.removeStreamPostRefresh=v.$on("PostRefresh",function(){var a,b,c,d,e,f;for(a=0;a<v.activities.length;a++)b=new Date(v.activities[a].timestamp),v.activities[a].timestamp=k(b),v.activities[a].user=v.activities[a].summary_fields.actor?'<a href="/#/users/'+v.activities[a].summary_fields.actor.id+'">'+v.activities[a].summary_fields.actor.username+"</a>":"system",d=/^\_delete/,e=v.activities[a].object1,f=v.activities[a].object2,e&&v.activities[a].summary_fields[e]&&v.activities[a].summary_fields[e].name?d.test(v.activities[a].summary_fields[e].name)?v.activities[a].objects=v.activities[a].summary_fields[e].name:(c=p(v.activities[a].summary_fields.object1),v.activities[a].objects='<a href="'+c+'">'+v.activities[a].summary_fields[e].name+"</a>"):v.activities[a].object1&&(v.activities[a].objects=v.activities[a].object1),f&&v.activities[a].summary_fields[f]&&v.activities[a].summary_fields[f].name?d.test(v.activities[a].summary_fields.object2.name)?v.activities[a].objects+=","+v.activities[a].summary_fields[f].name:(c=p(v.activities[a].summary_fields.object2),v.activities[a].objects+=', <a href="'+c+'">'+v.activities[a].summary_fields[f].name+"</a>"):v.activities[a].object2&&(v.activities[a].objects+=", "+v.activities[a].object2),n(v.activities[a]);setTimeout(function(){s()},500)}),h({scope:v,set:w.name,list:w,url:x}),i({scope:v,list:w,url:x}),v.search(w.iterator)}}]),angular.module("AuthService",["ngCookies","Utilities"]).factory("Authorization",["$http","$rootScope","$location","$cookieStore","GetBasePath",function(a,b,c,d,e){return{setToken:function(a,c){d.remove("token"),d.remove("token_expires"),d.remove("userLoggedIn"),d.put("token",a),d.put("token_expires",c),d.put("userLoggedIn",!0),d.put("sessionExpired",!1),b.token=a,b.userLoggedIn=!0,b.token_expires=c,b.sessionExpired=!1},isUserLoggedIn:function(){return void 0===b.userLoggedIn&&(b.userLoggedIn=d.get("userLoggedIn"),b.sessionExpired=d.get("sessionExpired")),b.userLoggedIn},getToken:function(){return b.token?b.token:d.get("token")},retrieveToken:function(b,c){return a({method:"POST",url:e("authtoken"),data:{username:b,password:c}})},logout:function(){var a=angular.element(document.getElementById("main-view")).scope();a.$destroy(),b.$destroy(),d.remove("accordions"),d.remove("token"),d.remove("token_expires"),d.remove("current_user"),d.remove("lastPath"),d.put("userLoggedIn",!1),d.put("sessionExpired",!1),d.remove("lastPath","/home"),b.current_user={},b.license_tested=void 0,b.userLoggedIn=!1,b.sessionExpired=!1,b.token=null,b.token_expires=null,b.lastPath="/home"},getLicense:function(){return a({method:"GET",url:e("config"),headers:{Authorization:"Token "+this.getToken()}})},setLicense:function(a){a.tested=!1,d.put("license",a)},licenseTested:function(){var a,c;return void 0!==b.license_tested?c=b.license_tested:(a=d.get("license"),c=a&&void 0!==a.tested?a.tested:!1),c},getUser:function(){return a({method:"GET",url:"/api/v1/me/",headers:{Authorization:"Token "+this.getToken()}})},setUserInfo:function(a){b.current_user=a.results[0],d.put("current_user",a.results[0])},restoreUserInfo:function(){b.current_user=d.get("current_user")},getUserInfo:function(a){var c;return b.current_user?b.current_user[a]:(this.restoreUserInfo(),c=d.get("current_user"),c[a])}}}]),angular.module("InventoryTree",["Utilities","RestServices","GroupsHelper","PromptDialog"]).factory("SortNodes",[function(){return function(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].name);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].name===d[c]&&e.push(a[b]);return e}}]).factory("BuildTree",["Rest","GetBasePath","ProcessErrors","SortNodes","Wait","GetSyncStatusMsg","GetHostsStatusMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){var b,c,e=[],f=d(a);for(b=0;b<f.length;b++)e.push(f[b].id);c={name:"All Hosts",id:1,group_id:null,parent:0,description:"",show:!0,ngicon:null,has_children:!1,related:{},selected_class:"",show_failures:!1,isDraggable:!1,isDroppable:!0,children:e},q.push(c)}function j(a,b,c){var e,h,i,k,n,o,s=d(a);for(e=0;e<s.length;e++){for(r++,k=f({status:s[e].summary_fields.inventory_source.status}),n=g({active_failures:s[e].hosts_with_active_failures,total_hosts:s[e].total_hosts,inventory_id:l,group_id:s[e].id}),i=[],h=0;h<s[e].children.length;h++)i.push(s[e].children[h].id);o={name:s[e].name,has_active_failures:s[e].has_active_failures,total_hosts:s[e].total_hosts,hosts_with_active_failures:s[e].hosts_with_active_failures,total_groups:s[e].total_groups,groups_with_active_failures:s[e].groups_with_active_failures,parent:b,has_children:s[e].children.length>0?!0:!1,has_inventory_sources:s[e].has_inventory_sources,id:r,source:s[e].summary_fields.inventory_source.source,group_id:s[e].id,event_level:c,children:i,ngicon:s[e].children.length>0?"fa fa-minus-square-o node-toggle":"fa fa-square-o node-no-toggle",ngclick:"toggle("+r+")",related:{children:s[e].children.length>0?s[e].related.children:"",inventory_source:s[e].related.inventory_source},status:s[e].summary_fields.inventory_source.status,status_class:k["class"],status_tooltip:k.tooltip,launch_tooltip:k.launch_tip,launch_class:k.launch_class,hosts_status_tip:n.tooltip,show_failures:n.failures,hosts_status_class:n["class"],selected_class:"",show:!0,isDraggable:!0,isDroppable:!0},q.push(o),p&&o.group_id===p&&(m.selected_tree_id=r,m.selected_group_id=o.group_id),s[e].children.length>0&&j(s[e].children,r,c+1)}}function k(){e("start"),a.setUrl(b("inventory")+l+"/"),a.get().success(function(a){m.$emit("buildAllGroups",a.name,a.related.tree,a.related.groups)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+l+". GET returned: "+b})})}var l=h.inventory_id,m=h.scope,n=h.refresh,o=h.emit,p=h.new_group_id,q=[],r=1;m.buildAllGroupsRemove&&m.buildAllGroupsRemove(),m.buildAllGroupsRemove=m.$on("buildAllGroups",function(b,d,f){a.setUrl(f),a.get().success(function(a){i(a),j(a,0,0),m.autoShowGroupHelp=0===a.length?!0:!1,n?(m.groups=q,m.$emit("GroupTreeRefreshed",d,q,o)):m.$emit("GroupTreeLoaded",d,q,o)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory tree for: "+l+". GET returned: "+b})})}),k()}}]).factory("UpdateGroup",["ApplyEllipsis","GetSyncStatusMsg","Empty",function(a,b,c){return function(d){var e,f,g,h,i,j=d.scope,k=d.group_id,l=d.properties;for(e=0;e<j.groups.length;e++){if(j.groups[e].group_id===k){g=j.groups[e];for(f in l)"name"===f&&(h=j.groups[e].name),"source"===f&&l[f]!==j.groups[e][f]&&(c(l[f])||"none"!==j.groups[e].status&&!c(j.groups[e].status)?l[f]||(j.groups[e].status="none"):j.groups[e].status="never updated",i=b({status:j.groups[e].status}),j.groups[e].status_class=i["class"],j.groups[e].status_tooltip=i.tooltip,j.groups[e].launch_tooltip=i.launch_tip,j.groups[e].launch_class=i.launch_class),j.groups[e][f]=l[f]}j.groups[e].id===j.selected_tree_id&&(j.selected_group_name=j.groups[e].name,j.search_place_holder="Search "+j.groups[e].name,j.hostSearchPlaceholder="Search "+j.groups[e].name)}h&&setTimeout(function(){$('#groups_table .group-name a[title="'+h+'"]').attr("title",l.name),a("#groups_table .group-name a")},2500)}}]).factory("SetNodeName",[function(){return function(a){var b=a.name,c=a.description,d=void 0!==a.group_id?a.group_id:null,e=void 0!==a.inventory_id?a.inventory_id:null;null!==d&&$("#inventory-tree").find('li [data-group-id="'+d+'"]').each(function(){$(this).attr("data-name",b),$(this).attr("data-description",c),$(this).find(".activate").first().text(b)}),null!==e&&$("#inventory-root-node").attr("data-name",b).attr("data-description",c).find(".activate").first().text(b)}}]).factory("CopyMoveGroup",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.groups,key:"id",val:b.inbound_tree_id}),m="";m+='<div id="copy-prompt-modal" class="modal fade">\n',m+='<div class="modal-dialog">\n',m+='<div class="modal-content">\n',m+='<div class="modal-header">\n',m+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',m+=1===k.id||0===l.parent?"<h3>Move Group</h3>\n":"<h3>Copy or Move?</h3>\n",m+="</div>\n",m+='<div class="modal-body">\n',1===k.id?m+="<p>Are you sure you want to move group "+l.name+" to the top level?</p>":0===l.parent?m+="<p>Are you sure you want to move group "+l.name+" from the top level and make it a child of "+k.name+"?</p>":(m+='<div class="text-center">\n',m+="<p>Would you like to copy or move group <em>"+l.name+"</em> to group <em>"+k.name+"</em>?</p>\n",m+='<div style="margin-top: 30px;">\n',m+='<a href="" ng-click="moveGroup()" class="btn btn-primary" style="margin-right: 15px;"><i class="fa fa-cut"></i> Move</a>\n',m+='<a href="" ng-click="copyGroup()" class="btn btn-primary"><i class="fa fa-copy"></i> Copy</a>\n',m+="</div>\n",m+="</div>\n"),m+="</div>\n",m+='<div class="modal-footer">\n',m+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">Cancel</a>\n',(1===k.id||0===l.parent)&&(m+='<a href="" data-target="#prompt-modal" ng-click="moveGroup()" class="btn btn-primary">Yes</a>\n'),m+="</div>\n",m+="</div><!-- modal-content -->\n",m+="</div><!-- modal-dialog -->\n",m+="</div><!-- modal -->\n",i=angular.element(document.getElementById("inventory-modal-container")),i.empty().append(m),a(i)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.moveGroup=function(){var a,b,i;$("#copy-prompt-modal").modal("hide"),e("start"),j.removeGroupRemove&&j.removeGroupRemove(),j.removeGroupRemove=j.$on("removeGroup",function(){l.parent>0?(i=d({list:j.groups,key:"id",val:l.parent}),a=h("base")+"groups/"+i.group_id+"/children/",f.setUrl(a),f.post({id:l.group_id,disassociate:1}).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to remove "+l.name+" from "+i.name+". POST returned status: "+b})})):j.$emit("GroupDeleteCompleted")}),a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id},f.setUrl(a),f.post(b).success(function(){j.$emit("removeGroup")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})},j.copyGroup=function(){$("#copy-prompt-modal").modal("hide"),e("start");var a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id};f.setUrl(a),f.post(b).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})}}}]).factory("CopyMoveHost",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var g,i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.hosts,key:"id",val:b.host_id}),m=!1,n="";if(l.summary_fields.all_groups)for(i=0;i<l.summary_fields.all_groups.length;i++)if(l.summary_fields.all_groups[i].id===k.group_id){m=!0;break}m?(n+='<div id="copy-alert-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" ng-hide="disableButtons" data-target="#copy-alert-modal"\n',n+='data-dismiss="modal" class="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Already in Group</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+='<div class="alert alert-info"><p>Host '+l.name+" is already in group "+k.name+".</p></div>\n",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#copy-alert-modal" data-dismiss="modal" class="btn btn-primary">OK</a>\n',n+="</div>\n",n+="</div>\n",n+="</div>\n",n+="</div>\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-alert-modal").modal({backdrop:"static",keyboard:!0,show:!0})):(n="",n+='<div id="copy-prompt-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Copy Host</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+="<p>Are you sure you want to copy host "+l.name+" to group "+k.name+"?</p>",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">No</a>\n',n+='<a href="" data-target="#prompt-modal" ng-click="copyHost()" class="btn btn-primary">Yes</a>\n',n+="</div>\n",n+="</div><!-- modal-content -->\n",n+="</div><!-- modal-dialog -->\n",n+="</div><!-- modal -->\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.copyHost=function(){$("#copy-prompt-modal").modal("hide"),e("start"),f.setUrl(h("groups")+k.group_id+"/hosts/"),f.post(l).success(function(){j.$emit("GroupTreeRefreshed")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+k.name+". POST returned status: "+b})})})}}]),angular.module("RestServices",["ngCookies","AuthService"]).factory("Rest",["$http","$rootScope","$cookieStore","$q","Authorization",function(a,b,c,d,e){return{headers:{},setUrl:function(a){this.url=a},checkExpired:function(){return b.sessionTimer.isExpired()},pReplace:function(){var a,b;for(a in this.params)b=new RegExp("\\:"+a,"gm"),b.test(this.url)&&(this.url=this.url.replace(b,this.params[a]),delete this.params[a])},createResponse:function(a,b){var c=d.reject({data:a,status:b});return c.success=function(a){return c.then(function(b){a(b.data,b.status)},null),c},c.error=function(a){return c.then(null,function(b){a(b.data,b.status)}),c},c},setHeader:function(a){for(var b in a)this.headers[b]=a[b]},get:function(b){b=b?b:{},this.params=b.params?b.params:null,this.pReplace();var c=this.checkExpired(),d=e.getToken();return c?this.createResponse({detail:"Token is expired"},401):d?(this.setHeader({Authorization:"Token "+d}),this.setHeader({"X-Auth-Token":"Token "+d}),a({method:"GET",url:this.url,headers:this.headers,params:this.params})):this.createResponse({detail:"Invalid token"},401)},post:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"POST",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},put:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"PUT",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},destroy:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"DELETE",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},options:function(){var b=e.getToken(),c=this.checkExpired();return c?this.createResponse({detail:"Token is expired"},401):b?(this.setHeader({Authorization:"Token "+b}),this.setHeader({"X-Auth-Token":"Token "+b}),a({method:"OPTIONS",url:this.url,headers:this.headers})):this.createResponse({detail:"Invalid token"},401)}}}]),angular.module("TimerService",["ngCookies","Utilities"]).factory("Timer",["$rootScope","$cookieStore","$location","GetBasePath","Empty",function(a,b){return{sessionTime:null,timeout:null,getSessionTime:function(){return this.sessionTime?this.sessionTime:b.get("sessionTime")},isExpired:function(){var a=this.getSessionTime(),b=(new Date).getTime();return 0>=a-b?!0:(this.moveForward(),!1)},expireSession:function(){this.sessionTime=0,a.sessionExpired=!0,b.put("sessionExpired",!0)},moveForward:function(){var c=(new Date).getTime()+1e3*$AnsibleConfig.session_timeout;this.sessionTime=c,b.put("sessionTime",c),a.sessionExpired=!1,b.put("sessionExpired",!1)},init:function(){return this.moveForward(),this}}}]),angular.module("Utilities",["RestServices","Utilities"]).factory("ClearScope",[function(){return function(a){var b,c=document.getElementById(a);c&&(b=angular.element(c).scope(),b.$destroy()),$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()});try{$("#help-modal").dialog("close")}catch(d){}$(window).unbind("resize")}}]).factory("Empty",[function(){return function(a){return null===a||void 0===a||""===a?!0:!1}}]).factory("ToggleClass",function(){return function(a,b){$(a)&&$(a).hasClass(b)?$(a).removeClass(b):$(a)&&$(a).addClass(b)}}).factory("Alert",["$rootScope",function(a){return function(b,c,d,e,f,g){f?(a.alertHeader2=b,a.alertBody2=c,a.alertClass2=d?d:"alert-danger",$("#alert-modal2").modal({show:!0,keyboard:!0,backdrop:"static"}),a.disableButtons2=g?!0:!1,e&&$("#alert-modal2").on("hidden",function(){e()}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal2").modal("hide"),e&&e())})):(a.alertHeader=b,a.alertBody=c,a.alertClass=d?d:"alert-danger",$("#alert-modal").modal({show:!0,keyboard:!0,backdrop:"static"}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal").modal("hide"),e&&e())}),a.disableButtons=g?!0:!1,e&&$("#alert-modal").on("hidden",function(){e()}))}}]).factory("ProcessErrors",["$rootScope","$cookieStore","$log","$location","Alert","Wait",function(a,b,c,d,e,f){return function(b,c,g,h,i){var j,k,l;if(f("stop"),$AnsibleConfig.debug_mode&&console&&(console.log("Debug status: "+g),console.log("Debug data: "),console.log(c)),403===g)l="The API responded with a 403 Access Denied error. ",l+=c.detail?"Detail: "+c.detail:"Please contact your system administrator.",e(i.hdr,l);else if(401===g&&c.detail&&"Token is expired"===c.detail||401===g&&c.detail&&"Invalid token"===c.detail)a.sessionTimer.expireSession(),d.url("/login");else if(c.non_field_errors)e("Error!",c.non_field_errors);else if(c.detail)e(i.hdr,i.msg+" "+c.detail);else if(c.__all__)e("Error!",c.__all__);else if(h){k=!1;for(j in h.fields)c[j]&&h.fields[j].tab&&$("#"+h.name+'_tabs a[href="#'+h.fields[j].tab+'"]').tab("show"),h.fields[j].realName&&c[h.fields[j].realName]&&(b[j+"_api_error"]=c[h.fields[j]][0],$('[name="'+h.fields[j].realName+'"]').addClass("ng-invalid"),k=!0),h.fields[j].sourceModel?c[j]&&(b[h.fields[j].sourceModel+"_"+h.fields[j].sourceField+"_api_error"]=c[j][0],$('[name="'+h.fields[j].sourceModel+"_"+h.fields[j].sourceField+'"]').addClass("ng-invalid"),k=!0):c[j]&&(b[j+"_api_error"]=c[j][0],$('[name="'+j+'"]').addClass("ng-invalid"),k=!0);
!k&&i&&e(i.hdr,i.msg)}else e(i.hdr,i.msg)}}]).factory("LoadBreadCrumbs",["$rootScope","$routeParams","$location","Empty",function(a,b,c,d){return function(b){function e(a){return a.toUpperCase()}function f(a){return"ies"===a?"y":""}var g,h,i,j,k,l,m,n;if(!d(b)){for(h=!1,j=0;j<a.crumbCache.length;j++)if(a.crumbCache[j].path===b.path){h=!0,a.crumbCache[j]=b;break}h||a.crumbCache.push(b)}if(k=c.path().replace(/^\//,"").split("/"),l="",a.breadcrumbs=[],k.length>1)for(j=0;j<k.length-1;j++){if(j>0&&k[j].match(/\d+/)){for(m=k[j-1],n=m.replace(/(ies$|s$)/,f),n=n.charAt(0).toUpperCase()+n.slice(1),h=!1,i=0;i<a.crumbCache.length;i++)if(a.crumbCache[i].path==="/"+m+"/"+k[j]){n=a.crumbCache[i].title,h=!0;break}a.breadcrumbs.push(h&&void 0!==a.crumbCache[i].altPath?{title:n,path:a.crumbCache[i].altPath}:{title:n,path:l+"/"+k[j]})}else/_/.test(k[j])&&(k[j]=k[j].replace(/(?:^|_)\S/g,e).replace(/_/g," ")),g=k[j].charAt(0).toUpperCase()+k[j].slice(1),a.breadcrumbs.push({title:g,path:l+"/"+k[j]});l+="/"+k[j]}}}]).factory("HelpDialog",["$rootScope","$location","Store",function(a,b,c){return function(a){function b(a){function g(a){var b="";return b+="<h4>"+a.intro+"</h4>\n",b+='<div class="img-container">\n',b+='<img src="'+$basePath+"img/help/"+a.img.src+'" >',b+="</div>\n",b+='<div class="help-box">'+a.box+"</div>",b+=f&&a.autoOffNotice?'<div class="help-auto-off"><label><input type="checkbox" name="auto-off-checkbox" id="auto-off-checkbox"> Do not show this message in the future</label></div>\n':""}var h,i,j,k,l=!1;e=a,j=d.story.width?d.story.width:510,k=d.story.height?d.story.height:600,i=$(document).width(),j=j>i?i:j;try{l=$("#help-modal").dialog("isOpen")}catch(m){}l?$("#help-modal").html(g(d.story.steps[e])):(h=[],d.story.steps.length>1&&(h.push({text:"Prev",click:function(a){e-1===0&&$(a.target).button("disable"),e-1<d.story.steps.length-1&&$(a.target).next().button("enable"),b(e-1)},disabled:!0}),h.push({text:"Next",click:function(a){e+1>0&&$(a.target).prev().button("enable"),e+1===d.story.steps.length-1&&$(a.target).button("disable"),b(e+1)}})),h.push({text:"Close",click:function(){$("#help-modal").dialog("close")}}),$("#help-modal").html(g(d.story.steps[e])).dialog({position:{my:"center top",at:"center top+150",of:"body"},title:d.story.hdr,width:j,height:k,buttons:h,closeOnEscape:!0,show:500,hide:500,resizable:!1,close:function(){$("#help-modal").empty()}}),$(".ui-dialog-buttonset button").each(function(){var a,b,c;c=$(this).text(),"Close"===c?(b="fa-times",a="btn btn-default",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Close')):"Prev"===c?(b="fa-chevron-left",a="btn btn-primary",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Prev')):(b="fa-chevron-right",a="btn btn-primary",$(this).attr({"class":a}).html('Next <i class="fa '+b+'"></i>').css({"margin-right":"20px"}))}),$('.ui-dialog[aria-describedby="help-modal"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$("#auto-off-checkbox").click(function(){$('input[name="auto-off-checkbox"]:checked').length?c("inventoryAutoHelp","off"):c("inventoryAutoHelp","on")}))}var d=a.defn,e=a.step,f=a.autoShow||!1;b(0)}}]).factory("ReturnToCaller",["$location","Empty",function(a,b){return function(c){var d,e=a.path().replace(/^\//,"").split("/"),f="";for(c=b(c)?e.length-1:c+1,d=0;c>d;d++)f+="/"+e[d];a.path(f)}}]).factory("FormatDate",["$filter",function(a){return function(b){return a("date")(b,"MM/dd/yy HH:mm:ss")}}]).factory("Wait",["$rootScope",function(a){return function(b){var c,d,e,f,g,h;"start"!==b||a.waiting?"stop"===b&&a.waiting&&$(".spinny, .overlay").fadeOut(400,function(){a.waiting=!1}):(a.waiting=!0,c=$(window).width(),d=$(window).height(),e=$(".spinny").width(),f=$(".spinny").height(),g=(c-e)/2,h=(d-f)/2,$(".overlay").css({width:$(document).width(),height:$(document).height()}).fadeIn(),$(".spinny").css({top:h,left:g}).fadeIn(400))}}]).factory("HideElement",[function(){return function(a,b){var c=$(a),d=c.css("width"),e=c.css("height"),f=c.position(),g=c.parent(),h=c.css("border-radius"),i=c.css("background-color"),j=c.css("margin"),k=c.css("padding");g.append('<div id="curtain-div" style="position: absolute;top: '+f.top+"px; left: "+f.left+"px; z-index: 1000; width: "+d+"; height: "+e+"; background-color: "+i+"; margin: "+j+"; padding: "+k+"; border-radius: "+h+'; opacity: .75; display: none; "></div>'),$("#curtain-div").show(0,b)}}]).factory("ShowElement",[function(){return function(){$("#curtain-div").fadeOut(500,function(){$(this).remove()})}}]).factory("GetChoices",["Rest","ProcessErrors",function(a,b){return function(c){var d=c.scope,e=c.url,f=c.field,g=c.variable,h=c.callback,i=c.choice_name;d[g]?d[g].length=0:d[g]=[],a.setUrl(e),a.options().success(function(a){var b,c;for(b=i?a.actions.GET[f][i]:a.actions.GET[f].choices,c=0;c<b.length;c++)d[g].push({label:b[c][1],value:b[c][0],name:b[c][1]});h&&d.$emit(h)}).error(function(a,c){b(d,a,c,null,{hdr:"Error!",msg:"Failed to get "+e+". GET status: "+c})})}}]).factory("Find",[function(){return function(a){var b,c=a.list,d=a.key,e=a.val,f=!1;if("object"==typeof c&&Array.isArray(c)){for(b=0;b<a.list.length;b++)if(c[b][d]===e){f=!0;break}return f?c[b]:null}return null}}]).factory("DebugForm",[function(){return function(a){var b,c=a.form,d=a.scope;for(b in c.fields)d[c.name+"_form"][b]&&console.log(b+" valid: "+d[c.name+"_form"][b].$valid),c.fields[b].sourceModel&&d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField]&&console.log(c.fields[b].sourceModel+"_"+c.fields[b].sourceField+" valid: "+d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField].$valid);console.log("form pristine: "+d[c.name+"_form"].$pristine),console.log("form valid: "+d[c.name+"_form"].$valid)}}]).factory("Store",["Empty",function(a){return function(b,c){if(a(c)){if(!a(b)){var d=localStorage[b];return a(d)?null:JSON.parse(d)}}else localStorage[b]=JSON.stringify(c)}}]).factory("ApplyEllipsis",[function(){return function(a){var b=$("#string-test");b.length||($("body").append('<div style="display:none;" id="string-test"></div>'),b=$("#string-test")),$(a).each(function(){var a,c,d,e,f,g=!0;$(this).attr("title")?(a=$(this).attr("title"),g=!1):a=$(this).text(),b.text(a),c=b.width(),d=$(this).parent().width(),c>d&&(g&&$(this).attr("title",a),e=c/a.length,f=c-d,a=a.substr(0,a.length-(Math.ceil(f/e)+3)),$(this).text(a+"...")),d>c&&!g&&(a=$(this).attr("title"),$(this).text(a))})}}]),angular.module("ApiLoader",["Utilities"]).factory("LoadBasePaths",["$http","$rootScope","Store","ProcessErrors",function(a,b,c,d){return function(){a.get("/api/").success(function(e){var f=e.current_version;a.get(f).success(function(a){a.base=f,b.defaultUrls=a,c("api",a)}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read "+f+". GET status: "+c})})}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read /api. GET status: "+c})})}}]).factory("GetBasePath",["$rootScope","Store","LoadBasePaths","Empty",function(a,b,c,d){return function(c){return d(a.defaultUrls)?b("api")?(a.defaultUrls=b("api"),a.defaultUrls[c]):"":a.defaultUrls[c]}}]),angular.module("AWDirectives",["RestServices","Utilities","AuthService","JobsHelper"]).directive("awpassmatch",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=c.awpassmatch,e=$('input[name="'+b+'"]').val();return a===e?(d.$setValidity("awpassmatch",!0),a):void d.$setValidity("awpassmatch",!1)})}}}).directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c=a.split(" "),e="";for(b=0;b<c.length;b++)e+=c[b].charAt(0).toUpperCase()+c[b].substr(1)+" ";return e=e.trim(),e!==a&&(d.$setViewValue(e),d.$render()),e})}}}).directive("integer",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){return d.$setValidity("min",!0),d.$setValidity("max",!0),/^\-?\d*$/.test(a)?(d.$setValidity("integer",!0),b.attr("min")&&(""===a||null===a||parseInt(a,10)<parseInt(b.attr("min"),10))?void d.$setValidity("min",!1):b.attr("max")&&parseInt(a,10)>parseInt(b.attr("max"),10)?void d.$setValidity("max",!1):a):void d.$setValidity("integer",!1)})}}}).directive("awRequiredWhen",function(){return{require:"ngModel",link:function(a,b,c,d){function e(){var e,f=b.val(),g=!0;!a[c.awRequiredWhen]||null!==b.attr("required")&&void 0!==b.attr("required")?a[c.awRequiredWhen]||(b.removeAttr("required"),$(b).hasClass("lookup")?(e=$(b).parent().parent().parent().find("label").first(),e.removeClass("prepend-asterisk")):$(b).parent().parent().find("label").first().removeClass("prepend-asterisk")):($(b).attr("required","required"),$(b).hasClass("lookup")?$(b).parent().parent().parent().find("label").first().addClass("prepend-asterisk"):$(b).parent().parent().find("label").first().addClass("prepend-asterisk")),!a[c.awRequiredWhen]||void 0!==f&&null!==f&&""!==f||(g=!1),d.$setValidity("required",g)}void 0!==c.awrequiredInit&&null!==c.awrequiredInit&&(a[c.awRequiredWhen]=c.awrequiredInit,e()),a.$watch(c.awRequiredWhen,function(){e()}),a.$watch($(b).attr("name"),function(){e()})}}}).directive("awPlaceholder",[function(){return{require:"ngModel",link:function(a,b,c){$(b).attr("placeholder",a[c.awPlaceholder]),a.$watch(c.awPlaceholder,function(a){$(b).attr("placeholder",a)})}}}]).directive("awlookup",["Rest",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(d){if(""!==d&&null!==d){var f=c.attr("data-url");f=f.replace(/\:value/,encodeURI(d)),b[c.attr("data-source")]=null,a.setUrl(f),a.get().then(function(a){var f=a.data.results;return f.length>0?(b[c.attr("data-source")]=f[0].id,b[c.attr("name")]=f[0].name,e.$setValidity("required",!0),e.$setValidity("awlookup",!0),d):(e.$setValidity("required",!0),void e.$setValidity("awlookup",!1))})}else e.$setValidity("awlookup",!0),b[c.attr("data-source")]=null})}}}]).directive("awValidUrl",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c,e=!0;""!==a&&(d.$setValidity("required",!0),b=/^(https|http|ssh)\:\/\//,c=/\@/g,(!b.test(a)||c.test(a))&&(e=!1)),d.$setValidity("awvalidurl",e)})}}}]).directive("awToolTip",function(){return function(a,b,c){var d,e=void 0!==c.delay&&null!==c.delay?c.delay:$AnsibleConfig.tooltip_delay;d=c.awTipPlacement?c.awTipPlacement:void 0!==c.placement&&null!==c.placement?c.placement:"left",$(b).on("hidden.bs.tooltip",function(){$(".tooltip").each(function(){$(this).remove()})}),$(b).tooltip({placement:d,delay:e,html:!0,title:c.awToolTip,container:"body"}),c.tipWatch&&a.$watch(c.tipWatch,function(a,c){a!==c&&$(b).tooltip("hide").attr("data-original-title",a).tooltip("fixTitle")})}}).directive("awPopOver",["$compile",function(a){return function(b,c,d){var e=void 0!==d.placement&&null!==d.placement?d.placement:"left",f=void 0!==d.title&&null!==d.title?d.title:"Help",g=void 0!==d.container?d.container:!1;$(c).popover({placement:e,delay:0,title:f,content:d.awPopOver,trigger:"manual",html:!0,container:g}),$(c).click(function(){var c=$(this).attr("id");$(".help-link, .help-link-white").each(function(){c!==$(this).attr("id")&&$(this).popover("hide")}),$(".popover").each(function(){$(this).remove()}),$(".tooltip").each(function(){$(this).hide()}),$(this).popover("toggle"),$(".popover").each(function(){a($(this))(b)})}),$(document).bind("keydown",function(a){27===a.keyCode&&($(c).popover("hide"),$(".popover").each(function(){$(this).remove()}))})}}]).directive("ngSlider",[function(){return{require:"ngModel",link:function(a,b,c,d){var e=b.attr("name");$("#"+e+"-slider").slider({value:0,step:1,min:b.attr("min"),max:b.attr("max"),slide:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.$$phase||a.$digest()}}),$("#"+e+"-number").change(function(){$("#"+e+"-slider").slider("value",parseInt($(this).val(),10))})}}}]).directive("awMultiSelect",[function(){return{require:"ngModel",link:function(a,b){$(b).multiselect({buttonClass:"btn-default, btn-mini",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,buttonText:function(a){if(0===a.length)return'None selected <b class="caret"></b>';if(a.length>3)return a.length+' selected  <b class="caret"></b>';var b="";return a.each(function(){b+=$(this).text()+", "}),b.substr(0,b.length-2)+' <b class="caret"></b>'}})}}}]).directive("ngSpinner",[function(){return{require:"ngModel",link:function(a,b,c,d){var e,f;e=b.attr("data-disabled"),f={value:0,step:1,min:b.attr("min"),max:b.attr("max"),numberFormat:"d",spin:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.job_templates_form.$dirty=!0,a.$$phase||a.$digest()}},e&&(f.disabled=!0),$(b).spinner(f)}}}]).directive("chkPass",[function(){return{require:"ngModel",link:function(a,b,c,d){$(b).keyup(function(){var c=!0,e=chkPass(b.val());b.val()&&(c=e>$AnsibleConfig.password_strength?!0:!1),d.$setValidity("complexity",c),a.$$phase||a.$digest()})}}}]).directive("awRefresh",["$rootScope",function(a){return{link:function(b){function c(){for(var a=""+b.refreshCnt;a.length<2;)a="0"+a;return"Refresh in "+a+" sec."}b.refreshCnt=$AnsibleConfig.refresh_rate,b.refreshMsg=c(),a.timer&&clearInterval(a.timer),a.timer=setInterval(function(){b.refreshCnt--,b.refreshCnt<=0&&(b.refresh(),b.refreshCnt=$AnsibleConfig.refresh_rate),b.refreshMsg=c(),b.$$phase||b.$digest()},1e3)}}}]).directive("awMultiselect",[function(){return{require:"^form",link:function(a,b,c,d){$(b).select2({multiple:!0,data:function(){if(a[c.awMultiselect]){var b,d=a[c.awMultiselect],e=[];for(b=0;b<d.length;b++)e.push({id:d[b].value,text:d[b].label});return{results:e}}return{results:{id:"",text:""}}}}),$(b).on("change",function(){d.$setDirty(),a.$$phase||a.$digest()})}}}]).directive("awDraggable",[function(){return function(a,b,c){if("true"===c.awDraggable){var d=c.containment;$(b).draggable({containment:d,scroll:!0,revert:"invalid",helper:"clone",start:function(a,b){b.helper.addClass("draggable-clone")},zIndex:100,cursorAt:{left:-1}})}}}]).directive("awDroppable",["Find",function(a){return function(b,c,d){var e;"true"===d.awDroppable&&$(c).droppable({accept:function(c){if("group"===c.attr("data-type")){if($(this).attr("data-group-id")===c.attr("data-group-id"))return!1;if(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)})){var d,f=parseInt(c.attr("data-group-id"),10),g=!1;for(d=0;d<e.children.length;d++)if(e.children[d]===f){g=!0;break}return g?!1:!0}return!1}return"host"===c.attr("data-type")?(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)}),e.id>1?!0:!1):!1},over:function(){$(this).addClass("droppable-hover")},out:function(){$(this).removeClass("droppable-hover")},drop:function(a,c){$(this).removeClass("droppable-hover"),"group"===c.draggable.attr("data-type")?b.$emit("CopyMoveGroup",parseInt(c.draggable.attr("data-tree-id"),10),parseInt($(this).attr("data-tree-id"),10)):"host"===c.draggable.attr("data-type")&&b.$emit("CopyMoveHost",parseInt($(this).attr("data-tree-id"),10),parseInt(c.draggable.attr("data-host-id"),10))},tolerance:"pointer"})}}]),angular.module("AWFilters",[]).filter("capitalize",[function(){return function(a){var b,c,d;if(a){for(b=a.replace(/\_/g," ").split(" "),c="",d=0;d<b.length;d++)c+=b[d].charAt(0).toUpperCase()+b[d].substr(1)+" ";return c.trim()}}}]),angular.module("FormGenerator",["GeneratorHelpers","ngCookies","Utilities"]).factory("GenerateForm",["$rootScope","$location","$cookieStore","$compile","SearchWidget","PaginateWidget","Attr","Icon","Column","NavigationLink","HelpCollapse","Button","DropDown","Empty","SelectIcon",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{setForm:function(a){this.form=a},attr:g,icon:h,accordion_count:0,scope:null,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},inject:function(a,b){var c,e,f,g;if(c=angular.element(document.getElementById(b.modal?b.modal_body_id?b.modal_body_id:"form-modal-body":b.id?b.id:"htmlTemplate")),this.mode=b.mode,this.modal=b.modal?!0:!1,this.setForm(a),c.html(b.html?b.html:this.build(b)),this.scope=b.scope?b.scope:c.scope(),d(c)(this.scope),!b.html){for(e in a.fields)this.scope[e]=null;for(f in a.related)this.scope[f]=null;(!b.modal&&b.related||this.form.forceListeners)&&this.addListeners(),"add"===b.mode&&this.applyDefaults()}$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize"),$('.form-control[required], input[type="radio"][required]').each(function(){var a,b;n($(this).attr("aw-required-when"))&&(a=$(this).parent().parent().find("label").first(),"radio"===$(this).attr("type")&&(a=$(this).parent().parent().parent().find("label").first()),a.length>0&&(b=a.children("span"),b.length>0&&!b.first().hasClass("prepend-asterisk")?b.first().addClass("prepend-asterisk"):b.length<=0&&!a.first().hasClass("prepend-asterisk")&&a.first().addClass("prepend-asterisk")))});try{$("#help-modal").empty().dialog("destroy")}catch(h){}return b.modal&&(this.scope.formModalActionDisabled=!1,this.scope.formModalInfo=!1,a&&(b.modal_title_id?this.scope[b.modal_title_id]="add"===b.mode?a.addTitle:a.editTitle:this.scope.formModalHeader="add"===b.mode?a.addTitle:a.editTitle),b.modal_selector?($(b.modal_selector).modal({show:!0,backdrop:"static",keyboard:!0}),$(b.modal_selector).on("shown.bs.modal",function(){$(b.modal_select+" input:first").focus()}),$(b.modal_selector).on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})):(g=b.show_modal===!1?!1:!0,$("#form-modal").modal({show:g,backdrop:"static",keyboard:!0}),$("#form-modal").on("shown.bs.modal",function(){$("#form-modal input:first").focus()}),$("#form-modal").on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})),$(document).bind("keydown",function(a){27===a.keyCode&&(b.modal_selector&&$(b.modal_selector).modal("hide"),$("#prompt-modal").modal("hide"),$("#form-modal").modal("hide"))})),this.scope.$$phase||this.scope.$digest(),this.scope},applyDefaults:function(){for(var a in this.form.fields)(this.form.fields[a]["default"]||0===this.form.fields[a]["default"])&&(this.scope[a]="select"===this.form.fields[a].type&&this.scope[a+"_options"]?this.scope[a+"_options"][this.form.fields[a]["default"]]:this.form.fields[a]["default"])},reset:function(){function a(a,b){if("checkbox_group"===a.type)for(var e=0;e<a.fields.length;e++)c[a.fields[e].name]="",c[a.fields[e].name+"_api_error"]="",c[d.name+"_form"][a.fields[e].name].$setValidity("apiError",!0);else c[b]="",c[b+"_api_error"]="";a.sourceModel&&(c[a.sourceModel+"_"+a.sourceField]="",c[a.sourceModel+"_"+a.sourceField+"_api_error"]="",c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),"lookup"===a.type&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&(c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setPristine(),c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setPristine(),c[d.name+"_form"][b].$setValidity("apiError",!0)),a.chkPass&&c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setValidity("complexity",!0),$("#progbar").css({width:0})),a.awPassMatch&&c[d.name+"_form"][b]&&c[d.name+"_form"][b].$setValidity("awpassmatch",!0),a.ask&&(c[b+"_ask"]=!1)}var b,c=this.scope,d=this.form;c[d.name+"_form"]&&c[d.name+"_form"].$setPristine();for(b in d.fields)a(d.fields[b],b);if(d.statusFields)for(b in d.statusFields)a(d.statusFields[b],b);"add"===this.mode&&this.applyDefaults()},addListeners:function(){this.modal?$(".jqui-accordion-modal").accordion({collapsible:!1,heightStyle:"content",active:0}):(this.scope.accordionToggle=function(a){$(a).collapse("toggle"),$(a+"-icon").hasClass("fa-minus")?$(a+"-icon").removeClass("fa-minus").addClass("fa-plus"):$(a+"-icon").removeClass("fa-plus").addClass("fa-minus")},$(".jqui-accordion").each(function(){var a,d,e,f=!1,g=c.get("accordions"),h=!1;if(g)for(a=$(this).attr("id"),d=b.path().replace(/^\//,"").split("/")[0],e=0;e<g.length&&h===!1;e++)g[e].base===d&&g[e].id===a&&(h=!0,f=g[e].active);h===!1&&"true"===$(this).attr("data-open")&&(f=0),$(this).accordion({collapsible:!0,heightStyle:"content",active:f,activate:function(){$(".jqui-accordion").each(function(){var a,d,e=$(this).accordion("option","active"),f=$(this).attr("id"),g=b.path().replace(/^\//,"").split("/")[0],h=c.get("accordions");for((null===h||void 0===h)&&(h=[]),d=!1,a=0;a<h.length&&d===!1;a++)h[a].base===g&&h[a].id===f&&(d=!0,h[a].active=e);d===!1&&h.push({base:g,id:f,active:e}),c.put("accordions",h)})}})}))},genID:function(){var a=new Date;return a.getTime()},headerField:function(a,b){var c="";return b.label&&(c+="<label>"+b.label+"</label>\n"),c+='<input type="text" name="'+a+'" ',c+='ng-model="'+a+'" ',c+=b["class"]?g(b,"class"):"",c+=" readonly />\n"},clearApiErrors:function(){for(var a in this.form.fields)this.form.fields[a].sourceModel?(this.scope[this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+"_api_error"]="",$('[name="'+this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+'"]').removeClass("ng-invalid")):this.form.fields[a].realName?(this.scope[this.form.fields[a].realName+"_api_error"]="",$('[name="'+this.form.fields[a].realName+'"]').removeClass("ng-invalid")):(this.scope[a+"_api_error"]="",$('[name="'+a+'"]').removeClass("ng-invalid"));this.scope.$$phase||this.scope.$digest()},button:l,navigationLink:j,buildHelpCollapse:function(a){var b,c="",d={};for(b=0;b<a.length;b++)d.hdr=a[b].hdr,d.content=a[b].content,d.idx=this.accordion_count++,d.show=a[b].show?a[b].show:null,d.bind=a[b].ngBind?a[b].ngBind:null,c+=k(d);return c},buildField:function(a,b,c,d){function e(){var a;return a=d.formFieldSize?d.formFieldSize:b.xtraWide?"col-lg-10":b.column?"col-lg-8":!d.formFieldSize&&c.modal?"col-lg-10":"col-lg-6"}function f(){var a;return a=d.formLabelSize?d.formLabelSize:b.column?"col-lg-4":!d.formLabelSize&&c.modal?"col-lg-2":"col-lg-2"}function i(a,b,c){var d="";return d+=a.id?g(a,"id"):'id="'+c.name+"_"+b+'" '}function j(a,b,c,d,e){var f="",h=void 0!==e&&e===!1?!1:!0;return h&&(f+='<label class="',f+=void 0===b.inline||b.inline===!0?"checkbox-inline":"",f+=b.labelClass?" "+b.labelClass:"",f+='">'),f+='<input type="checkbox" ',f+=g(b,"type"),f+='ng-model="'+c+'" ',f+='name="'+c+'" ',f+=b.ngChange?g(b,"ngChange"):"",f+='id="'+a.name+"_"+c+'_chbox" ',f+=void 0!==d?"_"+d:"",f+='class="',f+=b["class"]?b["class"]+" ":"",f+='"',f+=void 0!==b.trueValue?g(b,"trueValue"):"",f+=void 0!==b.falseValue?g(b,"falseValue"):"",f+=b.checked?"checked ":"",f+=b.readonly?"disabled ":"",f+=" > ",h&&(f+=b.label+" ",f+=b.awPopOver?g(b,"awPopOver",c):"",f+="</label>\n"),f}function l(){var c="";return(b.label||b.labelBind)&&(c+="<label ",c+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",(q||b.labelClass)&&(c+='class="',c+=b.labelClass?b.labelClass:"",c+=q?" "+f():"",c+='" '),c+=b.labelNGClass?'ng-class="'+b.labelNGClass+'" ':"",c+='for="'+a+'">',c+=b.icon?h(b.icon):"",c+='<span class="label-text">'+b.label+"</span>",c+=b.awPopOver&&!b.awPopOverRight?g(b,"awPopOver",a):"",c+="</label>\n"),c}var m,n,o,p="",q=this.form.horizontal?!0:!1;if("alertblock"===b.type&&(p+='<div class="row">\n',p+='<div class="',p+=c.modal||c.id?"col-lg-12":"col-lg-8 col-lg-offset-2",p+='">\n',p+='<div class="alert',p+=void 0===b.closeable||b.closeable===!0?" alert-dismissable":"",p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=">\n",p+=void 0===b.closeable||b.closeable===!0?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n':"",p+=b.alertTxt,p+="</div>\n",p+="</div>\n",p+="</div>\n"),"hidden"===b.type&&("edit"===c.mode&&b.includeOnEdit||"add"===c.mode&&b.includeOnAdd)&&(p+='<input type="hidden" ng-model="'+a+'" name="'+a+'" />'),!b.readonly||b.readonly&&"edit"===c.mode){if(p+='<div class="form-group" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=b.ngHide?this.attr(b,"ngHide"):"",p+=">\n",("text"===b.type||"password"===b.type||"email"===b.type)&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+=b.clear||b.genMD5?'<div class="input-group">\n':"",(null===b.control||void 0===b.control||b.control)&&(p+="<input ",p+=this.attr(b,"type"),p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.chkPass?"chk-pass ":"",p+=i(b,a,this.form),p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+='class="form-control',p+=b["class"]?" "+this.attr(b,"class"):"",p+='" ',p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+=b.awPassMatch?'awpassmatch="'+b.associated+'" ':"",p+=b.capitalize?"capitalize ":"",p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=void 0!==b.autocomplete?this.attr(b,"autocomplete"):"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=b.awValidUrl?"aw-valid-url ":"",p+=b.associated&&this.form.fields[b.associated].ask?'ng-disabled="'+b.associated+'_ask" ':"",p+=b.awMultiselect?'aw-multiselect="'+b.awMultiselect+'" ':"",p+=" >\n"),b.clear&&(p+='<span class="input-group-btn"><button type="button" ',p+='id="'+this.form.name+"_"+a+'_clear_btn" ',p+='class="btn btn-default" ng-click="clear(\''+a+"','"+b.associated+'\')" aw-tool-tip="Clear '+b.label+'" id="'+a+'-clear-btn" ',p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=' ><i class="fa fa-undo"></i></button>\n',p+="</span>\n</div>\n",b.ask&&(p+='<label class="checkbox-inline ask-checkbox" ',p+=b.askShow?'ng-show="'+b.askShow+'" ':"",p+=">",p+='<input type="checkbox" ng-model="'+a+'_ask" ng-change="ask(\''+a+"','"+b.associated+"')\" ",p+='id="'+this.form.name+"_"+a+'_ask_chbox" ',p+="> Ask at runtime?</label>")),b.genMD5&&(p+='<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="genMD5(\''+a+'\')" aw-tool-tip="Generate '+b.label+'" data-placement="top" id="'+this.form.name+"_"+a+'_gen_btn"><i class="fa fa-magic"></i></button></span>\n</div>\n'),("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),"email"===b.type&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.email">A valid email address is required!</div>\n'),b.awPassMatch&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.awpassmatch">Must match Password value</div>\n'),b.awValidUrl&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.awvalidurl\">URL must begin with ssh, http or https and may not contain '@'</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',b.chkPass&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.complexity">Password must be stronger</div>\n',p+='<div class="pw-progress">\n',p+='<div class="progress progress-striped">\n',p+='<div id="progbar" class="progress-bar" role="progress"></div>\n',p+="</div>\n",p+=k({hdr:"Password Complexity",content:'<p>A password with reasonable strength is required. As you type the password a progress bar will measure the strength. Sufficient strength is reached when the bar turns green.</p><p>Password strength is judged using the following:</p><ul class="pwddetails"><li>Minimum 8 characters in length</li>\n<li>Contains a sufficient combination of the following items:\n<ul>\n<li>UPPERCASE letters</li>\n<li>Numbers</li>\n<li>Symbols _!@#$%^&*()</li>\n</ul>\n</li>\n</ul>\n',idx:this.accordion_count++,show:null}),p+="</div><!-- pw-progress -->\n"),p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"textarea"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",("variables"===a||"extra_vars"===a||"inventory_variables"===a||"source_vars"===a)&&(p+='<div class="parse-selection" id="'+this.form.name+"_"+a+'_parse_type">Parse as: <input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="yaml"> <span class="parse-label">YAML</span>\n',p+='<input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="json"> <span class="parse-label">JSON</span>\n',p+="</div>\n"),p+="<textarea ",p+=b.rows?this.attr(b,"rows"):"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+="></textarea>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"select"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<select ",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=this.attr(b,"ngOptions"),p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.multiSelect?"multiple ":"",p+=b.readonly?"readonly ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=">\n",p+='<option value="">',p+=b.defaultOption?b.defaultOption:"Choose a "+b.label.toLowerCase(),p+="</option>\n",p+="</select>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"number"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<input ",p+=b.spinner?"":'type="text" ',p+='" value="'+b["default"]+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.slider?'ng-slider="'+a+'" ':"",p+=b.spinner?'ng-spinner="'+a+'" ':"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=i(b,a,this.form),p+=b.min||0===b.min?this.attr(b,"min"):"",p+=b.max?this.attr(b,"max"):"",p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.slider?'id="'+a+'-number"':b.id?this.attr(b,"id"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly?"readonly ":"",p+=b.integer?"integer ":"",p+=b.disabled?'data-disabled="true" ':"",p+=" >\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(void 0!==b.min||void 0!==b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be an integer between '+b.min+" and ",p+=void 0!==b.max?b.max:"unlimited",p+="</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"checkbox_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="checkbox-group" ',p+='id="'+this.form.name+"_"+a+'_chbox_group" ',p+=">\n",m=0;m<b.fields.length;m++)p+=j(this.form,b.fields[m],b.fields[m].name,m);
("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(b.min||b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be in range '+b.min+" to "+b.max+"</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox-group -->\n",p+="</div>\n"}if("checkbox"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="checkbox">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+=j(this.form,b,a,void 0,!1),p+=b.icon?h(b.icon):"",p+='<span class="label-text">'+b.label+"</span>",p+=b.awPopOver?this.attr(b,"awPopOver",a):"",p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox -->\n",q&&(p+="</div>\n")),"radio_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",m=0;m<b.options.length;m++)p+='<label class="radio-inline" ',p+=b.options[m].ngShow?this.attr(b.options[m],"ngShow"):"",p+=">",p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.options[m].value+'" ',p+='ng-model="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.ngDisabled?this.attr(b,"ngDisabled"):"",p+=" > "+b.options[m].label+"\n",p+="</label>\n";("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"}"radio"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="radio">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.value+'" ',p+='ng-model="'+b.ngModel+'" ',p+=b.ngChange?g(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+=b.ngDisabled?g(b,"ngDisabled"):"",p+=" > ",p+=b.label,p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- radio -->\n",q&&(p+="</div>\n")),"lookup"!==b.type||void 0!==b.excludeMode&&b.excludeMode===c.mode||(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="input-group">\n',p+='<span class="input-group-btn">\n',p+='<button type="button" class="lookup-btn btn btn-default" '+this.attr(b,"ngClick")+'><i class="fa fa-search"></i></button>\n',p+="</span>\n",p+='<input type="text" class="form-control input-medium lookup" ',p+='ng-model="'+b.sourceModel+"_"+b.sourceField+'" ',p+='name="'+b.sourceModel+"_"+b.sourceField+'" ',p+='class="form-control" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.id?this.attr(b,"id"):"",p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=" awlookup >\n",p+="</div>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.required">A value is required!</div>\n'),p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.awlookup">Value not found</div>\n',p+='<div class="error api-error" ng-bind="'+b.sourceModel+"_"+b.sourceField+'_api_error"></div>\n',p+="</div>\n"),"custom"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<div ",p+='id="'+d.name+"_"+a+'" ',p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+=">\n",p+=b.control,p+="</div>\n",p+="</div>\n"),p+="</div>\n"}return p},getActions:function(a){var b,c='<div class="list-actions">\n';for(b in this.form.actions)("all"===this.form.actions[b].mode||this.form.actions[b].mode===a.mode)&&(c+=this.button({btn:this.form.actions[b],action:b,toolbar:!0}));return c+="</div>\n"},breadCrumbs:function(a,c){var d,e,f="";if(f+='<div class="nav-path">\n',f+='<ul class="breadcrumb">\n',f+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',c){e=b.path().replace(/^\//,"").split("/"),2===e.length&&(f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n"),f+='<li class="active"> </li>\n',f+="</ul>\n",f+='<div class="dropdown">\n';for(d in c)if(c[d].active){f+='<a href="" class="toggle" ',f+='data-toggle="dropdown" ',f+=">"+c[d].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}f+='<ul class="dropdown-menu" role="menu">\n';for(d in c)f+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+c[d].href+'" ',f+=">",f+='<i class="fa fa-check" style="visibility: ',f+=c[d].active?"visible":"hidden",f+='"></i> ',f+=c[d].listLabel?c[d].listLabel:c[d].label,f+="</a></li>\n";f+="</ul>\n",f+="</div><!-- dropdown -->\n",f+="</div><!-- nav-path -->\n"}else f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n</ul>\n</div><!-- nav-path -->\n";return f},build:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p="";if(this.modal||void 0!==a.breadCrumbs&&a.breadCrumbs!==!0||(p+=this.form.navigationLinks?this.breadCrumbs(a,this.form.navigationLinks):this.breadCrumbs(a)),!this.modal&&this.form.statusFields){if(p+='<div class="well">\n',this.form.statusActions){p+='<div class="list-actions">\n';for(c in this.form.statusActions)b=this.form.statusActions[c],p+=this.button({btn:b,action:c,toolbar:!0});p+="</div>\n"}p+='<div class="form status-fields">\n';for(f in this.form.statusFields)g=this.form.statusFields[f],p+=this.buildField(f,g,a,this.form);p+="</div><!-- status fields -->\n",p+="</div><!-- well -->\n"}if(this.form.fieldsAsHeader){p+='<div class="well">\n',p+='<form class="form-inline" name="'+this.form.name+'_form" id="'+this.form.name+'_form" novalidate >\n';for(f in this.form.fields)g=this.form.fields[f],p+=this.headerField(f,g,a);p+="</form>\n",p+="</div>\n"}else{if(this.form.collapse&&this.form.collapseMode===a.mode&&(p+='<div id="'+this.form.name+'-collapse-0" ',p+=this.form.collapseOpen?'data-open="true" ':"",p+='class="jqui-accordion">\n',p+="<h3>"+this.form.collapseTitle+"</h3>\n",p+="<div>\n"),!this.modal&&this.has("well")&&(p+='<div class="well">\n'),!this.modal&&this.form.actions&&(p+=this.getActions(a)),!a.modal&&this.form.showTitle){if(p+='<div class="form-title">',p+="edit"===a.mode?this.form.editTitle:this.form.addTitle,this.has("titleActions")){p+='<div class="title-actions pull-right">\n';for(d in this.form.titleActions)p+=this.button({btn:this.form.titleActions[d],action:d,toolbar:!0});p+="</div>\n"}p+="</div>\n",p+='<hr class="form-title-hr">\n'}if(p+='<form class="',p+=this.form.horizontal?"form-horizontal":"",p+=this.form["class"]?" "+this.form["class"]:"",p+='" name="'+this.form.name+'_form" id="'+this.form.name+'_form" autocomplete="off" novalidate>\n',p+='<div ng-show="flashMessage != null && flashMessage != undefined" class="alert alert-info">{{ flashMessage }}</div>\n',this.form.twoColumns){p+='<div class="row">\n',p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],1===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 1 -->\n",p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],2===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 2 -->\n",p+="</div>\n"}else if(this.form.tabs){for(p+='<ul id="'+this.form.name+'_tabs" class="nav nav-tabs">\n',h=0;h<this.form.tabs.length;h++)k=this.form.tabs[h],p+="<li",0===h&&(p+=' class="active"'),p+='><a href="#'+k.name+'" data-toggle="tab">'+k.label+"</a></li>\n";for(p+="</ul>\n",p+='<div class="tab-content">\n',h=0;h<this.form.tabs.length;h++){k=this.form.tabs[h],p+='<div class="tab-pane',0===h&&(p+=" active"),p+='" id="'+k.name+'">\n';for(f in this.form.fields)this.form.fields[f].tab===k.name&&(p+=this.buildField(f,this.form.fields[f],a,this.form));p+="</div>\n"}p+="</div>\n"}else{i="",j="";for(f in this.form.fields)g=this.form.fields[f],a.modal&&g.excludeModal||(g.group&&g.group!==j&&(""!==j&&(p+="</div>\n"),p+='<div class="well">\n',p+="<h5>"+g.group+"</h5>\n",j=g.group),g.section&&g.section!==i&&(""!==i?p+="</div>\n":(p+="</div>\n",p+='<div id="'+this.form.name+'-collapse" class="jqui-accordion-modal">\n'),l=this.form[g.section+"Show"]?' ng-show="'+this.form[g.section+"Show"]+'"':"",p+="<h3"+l+">"+g.section+"</h3>\n",p+="<div"+l+">\n",i=g.section),p+=this.buildField(f,g,a,this.form));""!==i&&(p+="</div>\n</div>\n"),""!==j&&(p+="</div>\n")}if(!this.modal&&this.has("buttons")){this.form.twoColumns&&(p+='<div class="row">\n',p+='<div class="col-lg-12">\n',p+="<hr />\n"),p+='<div class="buttons" ',p+='id="'+this.form.name+'_controls" ',p+=">\n",this.form.horizontal&&(m=2,this.form.buttons.labelClass&&(m=parseInt(this.form.buttons.labelClass.replace(/[A-Z,a-z,-]/g,""))),n=12-m,p+='<div class="col-lg-offset-'+m+" col-lg-"+n+">\n");for(d in this.form.buttons)"object"==typeof this.form.buttons[d]&&(e=this.form.buttons[d],"save"===d&&(e.label="Save",e["class"]="btn-success"),"reset"===d&&(e.label="Reset",e["class"]="btn-default"),p+='<button type="button" ',p+='class="btn btn-sm',p+=e["class"]?" "+e["class"]:"",p+='" ',p+='id="'+this.form.name+"_"+d+'_btn" ',e.ngClick&&(p+=this.attr(e,"ngClick")),e.ngDisabled&&("reset"!==d?(p+='ng-disabled="'+this.form.name+"_form.$pristine || "+this.form.name+"_form.$invalid",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" '):(p+='ng-disabled="'+this.form.name+"_form.$pristine",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" ')),p+=">",p+=o({action:d}),p+=" "+e.label+"</button>\n");p+="</div><!-- buttons -->\n",this.form.horizontal&&(p+="</div>\n"),this.form.twoColumns&&(p+="</div>\n",p+="</div>\n")}p+="</form>\n",!this.modal&&this.has("well")&&(p+="</div>\n"),this.form.collapse&&this.form.collapseMode===a.mode&&(p+="</div>\n",p+="</div>\n")}return!this.modal&&a.related&&this.form.related&&(p+=this.buildCollections(a)),p},buildCollections:function(a){var b,c,d,g,h,j,k,l=1,m=this.form,n='<div id="'+this.form.name+"-collapse-"+l+'" class="jqui-accordion">\n';for(g in m.related)if("collection"===m.related[g].type){n+='<h3 class="'+g+'_collapse">'+m.related[g].title+"<h3>\n",n+="<div>\n",m.related[g].instructions&&(n+='<div class="alert alert-info alert-block">\n',n+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',n+="<strong>Hint: </strong>"+m.related[g].instructions+"\n",n+="</div>\n"),n+='<div class="well">\n',n+='<div class="row">\n',n+=e({iterator:m.related[g].iterator,template:m.related[g],mini:!0}),n+='<div class="col-lg-8">\n',n+='<div class="list-actions">\n';for(b in m.related[g].actions)h=m.related[g].actions[b],n+=this.button({btn:h,action:b,toolbar:!0});n+="</div>\n",n+="</div>\n",n+="</div><!-- row -->\n",n+='<div class="list">\n',n+='<table id="'+g+'_table" class="'+m.related[g].iterator+' table table-condensed table-hover">\n',n+="<thead>\n",n+="<tr>\n",n+=void 0===m.related[g].index||m.related[g].index!==!1?"<th>#</th>\n":"";for(d in m.related[g].fields)n+='<th class="list-header" id="'+m.related[g].iterator+"-"+d+'-header" ng-click="sort(\''+m.related[g].iterator+"', '"+d+"')\">"+m.related[g].fields[d].label,n+=' <i class="',n+=m.related[g].fields[d].key?m.related[g].fields[d].desc?"icon-sort-down":"icon-sort-up":"icon-sort",n+='"></i></a></th>\n';n+="<th></th>\n",n+="</tr>\n",n+="</thead>",n+="<tbody>\n",n+='<tr ng-repeat="'+m.related[g].iterator+" in "+g+'" >\n',(void 0===m.related[g].index||m.related[g].index!==!1)&&(n+="<td>{{ $index + (("+m.related[g].iterator+"_page - 1) * "+m.related[g].iterator+"_page_size) + 1 }}.</td>\n"),j=1,k=m.related[g].base?m.related[g].base:g,k=k.replace(/^\//,"");for(d in m.related[g].fields)j++,n+=i({list:m.related[g],fld:d,options:a,base:k});n+='<td class="actions">';for(b in m.related[g].fieldActions)c=m.related[g].fieldActions[b],n+="<a ",n+=c.href?'href="'+c.href+'" ':"",n+=c.ngClick?this.attr(c,"ngClick"):"",n+=c.ngHref?this.attr(c,"ngHref"):"",n+=c.ngShow?this.attr(c,"ngShow"):"",n+=">",n+=o({action:b}),n+=c.label?" "+c.label:"",n+="</a>";n+="</td>",n+="</tr>\n",n+='<tr class="info" ng-show="'+m.related[g].iterator+"Loading == false && ("+g+" == null || "+g+'.length == 0)">\n',n+='<td colspan="'+j+'"><div class="alert alert-info">No records matched your search.</div></td>\n',n+="</tr>\n",n+='<tr class="info" ng-show="'+m.related[g].iterator+'Loading == true">\n',n+='<td colspan="'+j+'"><div class="alert alert-info">Loading...</div></td>\n',n+="</tr>\n",n+="</tbody>\n",n+="</table>\n",n+="</div>\n",n+="</div>\n",n+=f({set:g,iterator:m.related[g].iterator,mini:!0}),n+="</div>\n",l++}return n+="</div>\n",n+="</div>\n"}}}]),angular.module("GeneratorHelpers",["GeneratorHelpers"]).factory("Attr",function(){return function(a,b,c){var d,e,f,g="string"==typeof a[b]?a[b].replace(/[\'\"]/g,"&quot;"):a[b];if(/^ng/.test(b))f="ng-"+b.replace(/^ng/,"").toLowerCase()+'="'+g+'" ';else if(/^data|^aw/.test(b)&&"awPopOver"!==b){for(e="",d=0;d<b.length;d++)e+=/[A-Z]/.test(b.charAt(d))?"-"+b.charAt(d).toLowerCase():b.charAt(d);f=e+'="'+g+'" '}else switch(b){case"trueValue":f='ng-true-value="'+g+'" ';break;case"falseValue":f='ng-false-value="'+g+'" ';break;case"awPopOver":f='<a id="awp-'+c+'" href="" aw-pop-over=\''+g+"' ",f+=a.dataPlacement?'data-placement="'+a.dataPlacement.replace(/[\'\"]/g,"&quot;")+'" ':"",f+=a.dataContainer?'data-container="'+a.dataContainer.replace(/[\'\"]/g,"&quot;")+'" ':"",f+='class="help-link" ',f+='><i class="fa fa-question-circle"></i></a> ';break;case"columnShow":f='ng-show="'+g+'" ';break;case"icon":f='<i class="fa fa-'+g,f+=a.iconSize?" "+a.iconSize:"",f+='"></i>';break;case"autocomplete":f='autocomplete="',f+=g?"true":"false",f+='" ';break;default:f=b+'="'+g+'" '}return f}}).factory("Icon",function(){return function(a){return'<i class="fa '+a+'"></i> '}}).factory("SelectIcon",["Icon",function(a){return function(b){var c,d=b.action,e=b.size;switch(d){case"help":c="fa-question-circle";break;case"add":case"create":c="fa-plus";break;case"edit":c="fa-pencil";break;case"delete":c="fa-trash-o";break;case"group_update":c="fa-exchange";break;case"scm_update":c="fa-cloud-download";break;case"cancel":c="fa-minus-circle";break;case"run":case"rerun":case"submit":c="fa-rocket";break;case"stream":c="fa-clock-o";break;case"refresh":c="fa-refresh";break;case"close":c="fa-arrow-left";break;case"save":c="fa-check-square-o";break;case"properties":c="fa-wrench";break;case"reset":c="fa-undo";break;case"view":c="fa-search-plus";break;case"sync_status":c="fa-cloud"}return c+=e?" "+e:"",a(c)}}]).factory("Button",["Attr","SelectIcon",function(a,b){return function(c){var d=c.btn,e=c.action,f=c.toolbar,g="";return f&&(d.class="btn-xs btn-primary",d.iconSize="fa-lg",delete d.label),g+='<button type="button" ',g+='class="btn',g+=d["class"]?" "+d["class"]:" btn-sm",g+=d.awPopOver?" help-link-white":"",g+='" ',g+=d.ngClick?a(d,"ngClick"):"",d.id?g+='id="'+d.id+'" ':e&&(g+='id="'+e+'_btn" '),g+=d.ngHide?a(d,"ngHide"):"",g+=d.awToolTip?a(d,"awToolTip"):"",g+=d.awToolTip&&void 0===d.dataPlacement?'data-placement="top" ':"",g+=d.awPopOver?'aw-pop-over="'+d.awPopOver.replace(/[\'\"]/g,"&quot;")+'" ':"",g+=d.dataPlacement?a(d,"dataPlacement"):"",g+=d.dataContainer?a(d,"dataContainer"):"",g+=d.dataTitle?a(d,"dataTitle"):"",g+=d.ngShow?a(d,"ngShow"):"",g+=d.ngHide?a(d,"ngHide"):"",g+=d.ngDisabled?a(d,"ngHide"):"",g+=d.ngClass?a(d,"ngClass"):"",g+=d.awTipPlacement?a(d,"awTipPlacement"):"",g+=" >",g+=d.img?'<img src="'+$basePath+"img/"+d.img+'" style="width: 12px; height: 12px;" >':"",g+=b({action:e,size:d.iconSize}),g+=d.label?" "+d.label:"",g+="</button> "}}]).factory("NavigationLink",["Attr","Icon",function(a,b){return function(c){var d="<a ";return d+=c.href?a(c,"href"):"",d+=c.ngClick?a(c,"ngClick"):"",d+=c.ngShow?a(c,"ngShow"):"",d+=">",d+=c.icon?b(c.icon):"",d+=c.label?c.label:"",d+="</a>\n"}}]).factory("DropDown",["Attr","Icon",function(a,b){return function(a){var c,d,e,f,g=a.list,h=a.fld;for(e=a.field?a.field:a.type?g[a.type][h]:g.fields[h],f=e.label.replace(/ /g,"_"),d=void 0===a.td||a.td!==!1?'<td class="'+h+'-column">\n':"",d+='<div class="dropdown">\n',d+='<a href="" class="toggle',d+='" ',d+=e.ngDisabled?'ng-disabled="'+e.ngDisabled+'" ':"",d+='data-toggle="dropdown" ',d+=">",d+=e.icon?b(e.icon):"",d+=e.label,d+=' <span class="caret"></span></a>\n',d+='<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu1">\n',c=0;c<e.options.length;c++)d+='<li role="presentation"><a role="menuitem" tabindex="-1" ',d+='ng-click="'+e.options[c].ngClick+'" ',d+=e.options[c].ngShow?'ng-show="'+e.options[c].ngShow+'" ':"",d+=e.options[c].ngHide?'ng-hide="'+e.options[c].ngHide+'" ':"",d+='href="">'+e.options[c].label+"</a></li>\n";return d+="</ul>\n",d+="</div>\n",d+=void 0===a.td||a.td!==!1?"</td>\n":""}}]).factory("BadgeCount",[function(){return function(a){var b,c=a.list,d=a.fld,e=c.fields[d];return b='<td class="'+d+"-column",b+=e.columnClass?" "+e.columnClass:"",b+='">\n',b+='<a ng-href="'+e.ngHref+'" aw-tool-tip="'+e.awToolTip+'"',b+=e.dataPlacement?' data-placement="'+e.dataPlacement+'"':"",b+=">",b+='<span class="badge',b+=e["class"]?" "+e["class"]:"",b+='">',b+="{{ "+c.iterator+"."+d+" }}",b+="</span>",b+=e.badgeLabel?" "+e.badgeLabel:"",b+="</a>\n",b+="</td>\n"}}]).factory("Badge",[function(){return function(a){var b,c="";if(a.badges)for(b=0;b<a.badges.length;b++)a.badges[b].toolTip&&(c+='<a href="" aw-tool-tip="'+a.badges[b].toolTip+'"',c+=a.badges[b].toolTipPlacement?' data-placement="'+a.badges[b].toolTipPlacement+'"':"",c+=a.badges[b].badgeShow?' ng-show="'+a.badges[b].badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badges[b].badgeShow?'ng-show="'+a.badges[b].badgeShow+'" ':"",c+=' class="field-badge '+a.badges[b].icon,c+=a.badges[b].badgeClass?" "+a.badges[b].badgeClass:"",c+='"></i>',a.badges[b].toolTip&&(c+="</a>"),c+="\n";else a.badgeToolTip&&(c+="<a ",c+=a.badgeNgHref?'ng-href="'+a.badgeNgHref+'" ':'href=""',c+=a.ngClick?'ng-click="'+a.ngClick+'" ':"",c+=' aw-tool-tip="'+a.badgeToolTip+'"',c+=a.badgeTipPlacement?' data-placement="'+a.badgeTipPlacement+'"':"",c+=a.badgeTipWatch?' data-tip-watch="'+a.badgeTipWatch+'"':"",c+=a.badgeShow?' ng-show="'+a.badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badgeShow?'ng-show="'+a.badgeShow+'" ':"",c+=' class="field-badge '+a.badgeIcon,c+=a.badgeClass?" "+a.badgeClass:"",c+='"></i>',a.badgeToolTip&&(c+="</a>"),c+="\n";return c}}]).factory("Breadcrumbs",["Attr",function(a){return function(b){var c,d,e=b.list,f=b.mode,g="";if(g+='<div class="nav-path">\n',g+='<ul class="breadcrumb" id="breadcrumb-list">\n',g+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',e.navigationLinks){d=e.navigationLinks,d.ngHide?(g+='<li class="active" ng-show="'+d.ngHide+'">',g+=e.editTitle,g+="</li>\n",g+='<li class="active" ng-hide="'+d.ngHide+'"> </li>\n'):(g+='<li class="active"> </li>\n',g+="</ul>\n"),g+='<div class="dropdown" ',g+=d.ngHide?a(d,"ngHide"):"",g+=">\n";for(c in d)if("object"==typeof d[c]&&d[c].active){g+='<a href="" class="toggle" ',g+='data-toggle="dropdown" ',g+=">"+d[c].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}g+='<ul class="dropdown-menu" role="menu">\n';for(c in d)"object"==typeof d[c]&&(g+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+d[c].href+'" ',g+=">",g+='<i class="fa fa-check" style="visibility: ',g+=d[c].active?"visible":"hidden",g+='"></i> ',g+=d[c].label,g+="</a></li>\n");g+="</ul>\n",g+="</div><!-- dropdown -->\n",g+="</div><!-- nav-path -->\n"}else g+='<li class="active">',g+="select"===f?e.selectTitle:e.editTitle,g+="</li>\n</ul>\n</div>\n";return g}}]).factory("Column",["Attr","Icon","DropDown","Badge","BadgeCount",function(a,b,c,d,e){return function(f){var g,h=f.list,i=f.fld,j=f.options,k=f.base,l=h.fields[i],m="";return void 0!==l.type&&"DropDown"===l.type?m=c(f):"badgeCount"===l.type?m=e(f):(m+='<td class="'+i+"-column",m+=l["class"]?" "+l["class"]:"",m+=l.columnClass?" "+l.columnClass:"",m+='" ',m+=l.ngClass?a(l,"ngClass"):"",m+="lookup"===j.mode||"select"===j.mode?' ng-click="toggle_'+h.iterator+"({{ "+h.iterator+'.id }})"':"",m+=l.columnShow?a(l,"columnShow"):"",m+=l.ngBindHtml?'ng-bind-html-unsafe="'+l.ngBindHtml+'" ':"",m+=">\n",m+=l.ngShow?"<span "+a(l,"ngShow")+">":"","lookup"!==j.mode&&(l.badges||l.badgeIcon&&l.badgePlacement&&"left"===l.badgePlacement)&&(m+=d(l)),h.hasChildren&&l.hasChildren&&(m+='<div class="level level-{{ '+h.iterator+'.event_level }}"><a href="" ng-click="{{ '+h.iterator+'.ngclick }}"> <i class="{{ '+h.iterator+'.ngicon }}"></i></a></div>'),"groups"===h.name&&(m+='<div class="group-name">'),"hosts"===h.name&&(m+='<div class="host-name">'),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(g=!1,l.linkTo?(m+='<a href="'+l.linkTo+'" ',g=!0):l.ngClick?(m+='<a href=""'+a(l,"ngClick")+" ",g=!0):l.ngHref?(m+='<a ng-href="'+l.ngHref+'" ',g=!0):(l.link||l.key&&(void 0===l.link||l.link))&&(m+='<a href="#/'+k+"/{{"+h.iterator+'.id }}" ',g=!0),l.awDroppable&&(m+=a(l,"awDroppable"),m+=l.dataAccept?a(l,"dataAccept"):""),l.awDraggable&&(m+=a(l,"awDraggable"),m+=l.dataContainment?a(l,"dataContainment"):"",m+=l.dataTreeId?a(l,"dataTreeId"):"",m+=l.dataGroupId?a(l,"dataGroupId"):"",m+=l.dataHostId?a(l,"dataHostId"):"",m+=l.dataType?a(l,"dataType"):""),l.awToolTip&&(m+=a(l,"awToolTip"),m+=l.dataPlacement?a(l,"dataPlacement"):"",m+=l.dataTipWatch?a(l,"dataTipWatch"):""),m+=g?">":""),l.ngShowIcon?m+='<i ng-show="'+l.ngShowIcon+'" class="'+l.icon+'"></i> ':l.icon&&(m+=b(l.icon)+" "),l.ngBindHtml||void 0!==l.showValue&&l.showValue!==!0||(m+=l.ngBind?"{{ "+l.ngBind+" }}":"{{"+h.iterator+"."+i+"}}"),l.text&&(m+=l.text),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(m+="</a>"),("hosts"===h.name||"groups"===h.name)&&(m+="</div>"),m+=l.ngShow?"</span>":"",m+=l.appendHTML?'<div ng-show="'+l.appendHTML+' !== null" ng-bind-html-unsafe="'+l.appendHTML+'" class="level-{{ '+h.iterator+'.event_level }}-detail" ></div>\n':"","lookup"!==j.mode&&l.badgeIcon&&l.badgePlacement&&"left"!==l.badgePlacement&&(m+=d(l))),m+="</td>\n"}}]).factory("HelpCollapse",function(){return function(a){var b=a.hdr,c=a.content,d=a.show,e=a.idx,f=a.bind,g="";return g+='<div class="panel-group collapsible-help" ',g+=d?'ng-show="'+d+'"':"",g+=">\n",g+='<div class="panel panel-default">\n',g+='<div class="panel-heading" ng-click="accordionToggle(\'#accordion'+e+"')\">\n",g+='<h4 class="panel-title">\n',g+=b,g+='<i class="fa fa-minus pull-right collapse-help-icon" id="accordion'+e+'-icon"></i>',g+="</h4>\n",g+="</div>\n",g+='<div id="accordion'+e+'" class="panel-collapse collapse in">\n',g+='<div class="panel-body" ',g+=f?'ng-bind-html-unsafe="'+f+'" ':"",g+=">\n",g+=f?"":c,g+="</div>\n",g+="</div>\n",g+="</div>\n",g+="</div>\n"}}).factory("SearchWidget",function(){return function(a){var b,c,d,e=a.iterator,f=a.template,g=a.mini,h="",i=a.searchWidgets?a.searchWidgets:1;for(c=1;i>=c;c++){d=1===c?"":c,h+='<div class="',h+=a.size?a.size:"col-lg-4 col-md-6 col-sm-12 col-xs-12",h+='" id="search-widget-container'+d+'">\n',h+='<div class="input-group',h+=g?" input-group-sm":" input-group-sm",h+='">\n',h+='<div class="input-group-btn dropdown">\n',h+='<button type="button" ',h+='id="search_field_ddown" ',h+='class="btn btn-default ',h+='dropdown-toggle" data-toggle="dropdown"',h+=">\n",h+='<span ng-bind="'+e+"SearchFieldLabel"+d+'"></span>\n',h+='<span class="caret"></span>\n',h+="</button>\n",h+='<ul class="dropdown-menu" id="'+e+"SearchDropdown"+d+'">\n';for(b in f.fields)void 0!==f.fields[b].searchable&&f.fields[b].searchable!==!0||(void 0!==f.fields[b].searchWidget&&1!==f.fields[b].searchWidget||1!==c)&&f.fields[b].searchWidget!==c||(h+='<li><a href="" ng-click="setSearchField(\''+e+"','",h+=b+"','",h+=f.fields[b].searchLabel?f.fields[b].searchLabel+"', "+c+')">'+f.fields[b].searchLabel+"</a></li>\n":f.fields[b].label.replace(/<br \/>/g," ")+"', "+c+')">'+f.fields[b].label.replace(/<br \/>/g," ")+"</a></li>\n");h+="</ul>\n",h+="</div><!-- input-group-btn -->\n",h+='<select id="search_value_select" ng-show="'+e+"SelectShow"+d+'" ng-model="'+e+"SearchSelectValue"+d+'" ng-change="search(\''+e+"')\" ",h+='ng-options="c.name for c in '+e+"SearchSelectOpts"+d+'" class="form-control search-select',h+='"></select>\n',h+='<input id="search_value_input" type="text" ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+'" class="form-control" ng-model="'+e+"SearchValue"+d+'" aw-placeholder="'+e+"SearchPlaceholder"+d+'" type="text" ng-disabled="'+e+"InputDisable"+d+" || "+e+"HoldInput"+d+'" ng-keypress="startSearch($event,\''+e+"')\">\n",h+='<div class="input-group-btn" ng-show="'+e+"SelectShow"+d+'" >\n',h+='<button type="button" class="btn btn-default btn-small" ng-click="resetSearch(\''+e+'\')" aw-tool-tip="Clear the search" data-placement="top"><i class="fa fa-times"></i></button>\n',h+="</div><!-- input-group-btn -->\n",h+="</div><!-- input-group -->\n",h+='<a class="search-reset-start" ng-click="resetSearch(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || "+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-times"></i></a>\n',h+='<a class="search-reset-start" ng-click="search(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || !"+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-search"></i></a>\n',h+="</div>\n"}return h}}).factory("PaginateWidget",[function(){return function(a){var b=a.iterator,c=a.set,d="";return d+="<!-- Paginate Widget -->\n",d+='<div class="row page-row">\n',d+='<div class="col-lg-8">\n',d+='<ul class="pagination" ng-hide="'+b+"Loading || "+b+'_num_pages <= 1">\n',d+='<li ng-hide="'+b+'_page -5 <= 1 "><a href ng-click="getPage(1,\''+c+"','"+b+'\')"><i class="fa fa-angle-double-left"></i></a></li>\n',d+='<li ng-hide="'+b+'_page -1 <= 0"><a href ng-click="getPage('+b+"_page - 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-left"></i></a></li>\n',d+='<li ng-repeat="page in '+b+'_page_range" ng-class="pageIsActive(page,\''+b+"')\"><a href ng-click=\"getPage(page,'"+c+"','"+b+"')\">{{ page }}</a></li>\n",d+='<li ng-hide="'+b+"_page + 1 > "+b+'_num_pages"><a href ng-click="getPage('+b+"_page + 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-right"></i></a></li>\n',d+='<li ng-hide="'+b+"_page +4 >= "+b+'_num_pages"><a href ng-click="getPage('+b+"_num_pages,'"+c+"','"+b+'\')"><i class="fa fa-angle-double-right"></i></a></li>\n',d+="</ul>\n",d+="</div>\n",d+='<div class="col-lg-4 col-md-4" ng-hide="'+b+"_mode == 'lookup'\">\n",d+='<div class="page-label">\n',d+="Page {{ "+b+"_page }} of {{ "+b+"_num_pages }} for {{ "+b+"_total_rows | number:0 }} "+c+".",d+="</div>\n",d+="</div>\n",d+="</div>\n"}}]),angular.module("License",["RestServices","Utilities","FormGenerator","PromptDialog","LicenseFormDefinition"]).factory("ViewLicense",["$location","$rootScope","GenerateForm","Rest","Alert","GetBasePath","ProcessErrors","FormatDate","Prompt","Empty","LicenseForm",function(a,b,c,d,e,f,g,h,i,j,k){return function(){var a,e=f("config"),l=c,m=angular.copy(k);d.setUrl(e),d.get().success(function(b){var c,d,e,f,g,k,n,o;for(c in m.fields)"time_remaining"!==c&&"license_status"!==c&&j(b.license_info[c])&&delete m.fields[c];(b.license_info.is_aws||j(b.license_info.license_date))&&(delete m.fields.license_date,delete m.fields.time_remaining),a=l.inject(m,{mode:"edit",modal:!0,related:!1}),l.reset(),a.formModalAction=function(){$("#form-modal").modal("hide")},a.formModalActionLabel="OK",a.formModalCancelShow=!1,a.formModalInfo="Purchase/Extend License",a.formModalHeader="Tower License",a.formModalInfoAction=function(){i({hdr:"Tower Licensing",body:'<p>Ansible Tower licenses can be purchased or extended by visiting <a id="license-link" href="http://www.ansible.com/ansible-pricing" target="_blank">the Ansible online store</a>. Would you like to purchase or extend your license now?</p>',"class":"btn-primary",action:function(){var a=$("#license-link").attr("href");window.open(a,"storeWindow")}})};for(c in m.fields)j(b.license_info[c])||(a[c]=b.license_info[c]);a.license_date&&(d=new Date(parseInt(a.license_date)),"1970"===d.getFullYear()&&(d=new Date(1e3*parseInt(a.license_date,10)),a.time_remaining=a.time_remaining+"000"),a.license_date=h(d),e=parseInt(a.time_remaining/864e5,10),f=a.time_remaining-864e5*e,g=parseInt(f/36e5,10),f-=36e5*g,k=parseInt(f/6e4,10),f-=6e4*k,n=parseInt(f/1e3,10),a.time_remaining=e+" days "+("0"+g).slice(-2)+":"+("0"+k).slice(-2)+":"+("0"+n).slice(-2)),a.free_instances_class=parseInt(a.free_instances)<=0?"field-failure":"field-success",o=b.license_info,void 0===o.valid_key||o.valid_key?void 0!==o.demo&&o.demo?(a.license_status="Demo",a.status_color="license-demo"):void 0!==o.date_expired&&o.date_expired?(a.license_status="Expired",a.status_color="license-expired"):void 0!==o.date_warning&&o.date_warning?(a.license_status="Expiration Warning",a.status_color="license-warning"):void 0!==o.free_instances&&parseInt(o.free_instances)<=0?(a.license_status="No available managed hosts",a.status_color="license-invalid"):(a.license_status="Valid",a.status_color="license-valid"):(a.license_status="Invalid",a.status_color="license-invalid")}).error(function(a,c){g(b,a,c,m,{hdr:"Error!",msg:"Failed to retrieve license. GET status: "+c})})}}]),angular.module("ListGenerator",["GeneratorHelpers"]).factory("GenerateList",["$location","$compile","$rootScope","SearchWidget","PaginateWidget","Attr","Icon","Column","DropDown","NavigationLink","Button","SelectIcon","Breadcrumbs",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{setList:function(a){this.list=a},attr:f,icon:g,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},hide:function(){$("#lookup-modal").modal("hide")},button:k,inject:function(a,c){var d;d=angular.element(document.getElementById("lookup"===c.mode?"lookup-modal-body":c.id?c.id:"htmlTemplate")),this.setList(a),d.html(this.build(c)),c.prepend&&d.prepend(c.prepend),c.append&&d.append(c.prepend),this.scope=c.scope?c.scope:d.scope(),b(d)(this.scope),this.scope[a.name]=null,this.scope[a.iterator]=null,$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize");try{$("#help-modal").empty().dialog("destroy")}catch(e){}return"lookup"===c.mode&&(this.scope.formModalActionDisabled=!1,this.scope.lookupHeader=c.hdr,$("#lookup-modal").modal({backdrop:"static",keyboard:!0}),$("#lookup-modal").unbind("hidden.bs.modal"),$(document).bind("keydown",function(a){27===a.keyCode&&$("#lookup-modal").modal("hide")})),this.scope},build:function(b){var c,g,j,k,n,o,p,q,r,s="",t=this.list;if(b.activityStream?(s+='<div class="nav-path">\n',s+='<ul class="breadcrumb">\n',s+='<li ng-repeat="crumb in breadcrumbs"><a href="" ng-click="{{ crumb.ngClick }}">{{ crumb.title }}</a></li>\n',s+='<li class="active">',s+=t.editTitle,s+="</li>\n</ul>\n</div>\n"):"lookup"===b.mode||void 0!==b.breadCrumbs&&!b.breadCrumbs||(s+=m({list:t,mode:b.mode})),"edit"===b.mode&&t.editInstructions&&(s+='<div class="alert alert-info alert-block">\n',s+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',s+="<strong>Hint: </strong>"+t.editInstructions+"\n",s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&!t.well||(s+='<div class="well">\n'),b.activityStream&&(s+='<div class="row">\n',s+='<div class="col-lg-12">\n',s+="<h5>{{ streamTitle }}</h5>\n",s+="</div>\n",s+="</div>\n"),s+='<div class="row">\n',"groups"!==t.name&&(s+=d(b.searchSize?{iterator:t.iterator,template:t,mini:!0,size:b.searchSize,searchWidgets:t.searchWidgets}:"summary"===b.mode?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-6"}:"lookup"===b.mode||void 0!==b.id?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-8"}:{iterator:t.iterator,template:t,mini:!0})),"lookup"!==b.mode){c=a.path().replace(/^\//,"").split("/")[0],s+='<div class="',"groups"===t.name?s+="col-lg-12":b.searchSize?(g=parseInt(b.searchSize.replace(/([A-Z]|[a-z]|\-)/g,"")),g=t.searchWidgets?t.searchWidgets*g:g,s+="col-lg-"+(12-g)):s+="summary"===b.mode?"col-lg-6":void 0!==b.id?"col-lg-4":"col-lg-8 col-md-6",s+='">\n',s+='<div class="list-actions">\n';
for(j in t.actions)("all"===t.actions[j].mode||t.actions[j].mode===b.mode)&&(void 0===t.actions[j].basePaths||t.actions[j].basePaths&&t.actions[j].basePaths.indexOf(c)>-1)&&(s+=this.button({btn:t.actions[j],action:j,toolbar:!0}));"select"===b.mode&&t.selectInstructions&&(k={awPopOver:t.selectInstructions,dataPlacement:"top",dataContainer:"body","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Help",iconSize:"fa-lg"},s+=this.button({btn:k,action:"help",toolbar:!0})),s+="</div><!-- list-acitons -->\n",s+="</div><!-- list-actions-column -->\n"}else s+='<div class="col-lg-7"></div>\n';s+="</div><!-- row -->\n","lookup"!==b.mode&&t.showTitle&&(s+='<div class="form-title">',s+="edit"===b.mode||"summary"===b.mode?t.editTitle:t.addTitle,s+="</div>\n"),s+='<table id="'+t.name+'_table" ',s+='class="table',s+=t["class"]?" "+t["class"]:"",s+="summary"===b.mode||"edit"===b.mode||"lookup"!==b.mode&&!b.id?"":" table-hover-inverse",s+=t.hover?" table-hover":"",s+="summary"===b.mode?" table-summary":"",s+='" ',s+=">\n",s+="<thead>\n",s+="<tr>\n",t.index&&(s+='<th class="col-lg-1 col-md-1 col-sm-1 hidden-xs">#</th>\n');for(n in t.fields)void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+='<th class="list-header',s+=t.fields[n].columnClass?" "+t.fields[n].columnClass:"",s+='" id="',s+=t.fields[n].id?t.fields[n].id:n+"-header",s+='"',s+=t.fields[n].columnShow?' ng-show="'+t.fields[n].columnShow+'" ':"",s+=void 0===t.fields[n].nosort||t.fields[n].nosort!==!0?"ng-click=\"sort('"+n+"')\"":"",s+=">",s+=t.fields[n].label,(void 0===t.fields[n].nosort||t.fields[n].nosort!==!0)&&(s+=' <i class="fa ',s+=t.fields[n].key?t.fields[n].desc?"fa-sort-down":"fa-sort-up":"fa-sort",s+='"></i></a>'),s+="</th>\n");"select"===b.mode||"lookup"===b.mode?s+="<th>Select</th>":"edit"===b.mode&&t.fieldActions&&(s+='<th class="actions-column',s+=t.fieldActions&&t.fieldActions.columnClass?" "+t.fieldActions.columnClass:"",s+='">Actions</th>\n'),s+="</tr>\n",s+="</thead>\n",s+="<tbody>\n",s+='<tr ng-class="'+t.iterator,s+="lookup"===b.mode||"select"===b.mode?".success_class":".active_class",s+='" ',s+='class="'+t.iterator+'_class" ng-repeat="'+t.iterator+" in "+t.name,s+=t.orderBy?" | orderBy:'"+t.orderBy+"'":"",s+=t.filterBy?" | filter: "+t.filterBy:"",s+='"',s+=">\n",t.index&&(s+='<td class="index-column hidden-xs">{{ $index + (('+t.iterator+"_page - 1) * "+t.iterator+"_page_size) + 1 }}.</td>\n"),o=2,c=t.base?t.base:t.name,c=c.replace(/^\//,"");for(n in t.fields)o++,void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+=h({list:t,fld:n,options:b,base:c}));if("select"===b.mode||"lookup"===b.mode)s+='<td><input type="checkbox" ng-model="'+t.iterator+'.checked" name="check_{{'+t.iterator+'.id }}" ng-click="toggle_'+t.iterator+"({{ "+t.iterator+'.id }}, true)" ng-true-value="1" ng-false-value="0" id="check_{{'+t.iterator+'.id}}" /></td>';else if(("edit"===b.mode||"summary"===b.mode)&&t.fieldActions){s+='<td class="actions">';for(p in t.fieldActions)if("columnClass"!==p)if(t.fieldActions[p].type&&"DropDown"===t.fieldActions[p].type)s+=i({list:t,fld:p,options:b,base:c,type:"fieldActions",td:!1});else{q=t.fieldActions[p],s+="<a ",s+=q.href?'href="'+q.href+'" ':"",s+=q.ngHref?'ng-href="'+q.ngHref+'" ':"",s+="cancel"===p?'class="cancel red-txt" ':"",s+=q.awPopOver?'aw-pop-over="'+q.awPopOver+'" ':"",s+=q.dataPlacement?f(q,"dataPlacement"):"",s+=q.dataTitle?f(q,"dataTitle"):"";for(r in q)"ngHref"!==r&&"href"!==r&&"label"!==r&&"icon"!==r&&"class"!==r&&"iconClass"!==r&&"dataPlacement"!==r&&"awPopOver"!==r&&"dataTitle"!==r&&(s+=f(q,r));s+=">",s+=q.iconClass?'<i class="'+q.iconClass+'"></i>':l({action:p}),s+=q.label?" "+t.fieldActions[p].label:"",s+="</a>"}s+="</td>"}return s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+"Loading == false && ("+t.name+" == null || "+t.name+'.length == 0)">\n',s+='<td colspan="'+o+'"><div class="alert alert-info">No records matched your search.</div></td>\n',s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+'Loading == true">\n',s+='<td colspan="'+o+'"><div class="alert alert-info">Loading...</div></td>\n',s+="</tr>\n",s+="</tbody>\n",s+="</table>\n","select"!==b.mode||void 0!==b.selectButton&&!b.selectButton||(s+='<div class="navigation-buttons">\n',s+=' <button class="btn btn-sm btn-primary pull-right" aw-tool-tip="Complete your selection" ng-click="finishSelection()" ng-disabled="disableSelectBtn"><i class="fa fa-check"></i> Select</button>\n',s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&t.well!==!0||(s+="</div>\n"),"groups"!==t.name&&(s+=e("lookup"===b.mode||b.id&&"form-modal-body"===b.id?{set:t.name,iterator:t.iterator}:{set:t.name,iterator:t.iterator})),s}}}]),angular.module("PromptDialog",["Utilities"]).factory("Prompt",[function(){return function(a){var b,c=angular.element(document.getElementById("prompt-modal")),d=c.scope();d.promptHeader=a.hdr,d.promptBody=a.body,d.promptAction=a.action,b=null===a["class"]||void 0===a["class"]?"btn-danger":a["class"],$("#prompt_action_btn").removeClass(b).addClass(b),$(c).modal({backdrop:"static",keyboard:!0,show:!0})}}]),String.prototype.strReverse=function(){var a,b="";for(a=0;a<this.length;a++)b=this.charAt(a)+b;return b};var nScore=0,$AnsibleConfig={tooltip_delay:{show:500,hide:100},debug_mode:!0,password_strength:45,session_timeout:1800};AdminsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","AdminList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","GetBasePath","SelectionInit"],Authenticate.$inject=["$cookieStore","$window","$scope","$rootScope","$location","Authorization","ToggleClass","Alert","Wait","Timer","Empty"],CredentialsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","CredentialList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","GetChoices","Wait","Stream"],CredentialsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","SearchInit","PaginateInit","LookUpInit","UserList","TeamList","GetBasePath","GetChoices","Empty","KindChange","OwnerChange","FormSave"],CredentialsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","CredentialForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","Prompt","GetBasePath","GetChoices","KindChange","UserList","TeamList","LookUpInit","Empty","OwnerChange","FormSave","Stream","Wait"],Home.$inject=["$scope","$compile","$routeParams","$rootScope","$location","Wait","ObjectCount","JobStatus","InventorySyncStatus","SCMSyncStatus","ClearScope","Stream","Rest","GetBasePath","ProcessErrors","Button"],HomeGroups.$inject=["$location","$routeParams","HomeGroupList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","GetHostsStatusMsg","GetSyncStatusMsg","ViewUpdateStatus","Stream","GroupsEdit","Wait","Alert","Rest","Empty","InventoryUpdate","Find"],HomeHosts.$inject=["$location","$routeParams","HomeHostList","GenerateList","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","SearchInit","PaginateInit","FormatDate","SetStatus","ToggleHostEnabled","HostsEdit","Stream","Find","ShowJobSummary"],InventoriesList.$inject=["$scope","$root $scope","$location","$log","$routeParams","Rest","Alert","InventoryList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","Clear $scope","ProcessErrors","GetBasePath","Wait","Stream","EditInventoryProperties"],InventoriesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","LookUpInit","GetBasePath","ParseTypeChange","Wait"],InventoriesEdit.$inject=["$scope","$location","$routeParams","$compile","GenerateList","ClearScope","InventoryGroups","InventoryHosts","BuildTree","Wait","GetSyncStatusMsg","InjectHosts","HostsReload","GroupsAdd","GroupsEdit","GroupsDelete","Breadcrumbs","LoadBreadCrumbs","Empty","Rest","ProcessErrors","InventoryUpdate","Alert","ToggleChildren","ViewUpdateStatus","GroupsCancelUpdate","Find","HostsCreate","EditInventoryProperties","HostsEdit","HostsDelete","ToggleHostEnabled","CopyMoveGroup","CopyMoveHost","Stream","GetBasePath","ShowJobSummary","ApplyEllipsis","WatchInventoryWindowResize","HelpDialog","InventoryGroupsHelp","Store"],JobEventsList.$inject=["$filter","$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobEventList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","ToggleChildren","FormatDate","EventView","Refresh","Wait"],JobEventsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobEventsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","FormatDate","EventView","Wait"],JobHostSummaryList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobHostList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","Refresh","JobStatusToolTip","Wait"],JobTemplatesList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobTemplateList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","PromptPasswords","JobTemplateForm","CredentialList","LookUpInit","SubmitJob","Wait","Stream"],JobTemplatesAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","InventoryList","CredentialList","ProjectList","LookUpInit","md5Setup","ParseTypeChange","Wait","Empty"],JobTemplatesEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobTemplateForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","ParseTypeChange","JobStatusToolTip","FormatDate","Wait","Stream","Empty","Prompt"],JobsListCtrl.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","JobList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","LookUpInit","SubmitJob","FormatDate","Refresh","JobStatusToolTip","Empty","Wait"],JobsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","JobForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","InventoryList","CredentialList","ProjectList","LookUpInit","PromptPasswords","GetBasePath","md5Setup","FormatDate","JobStatusToolTip","Wait"],OrganizationsList.$inject=["$routeParams","$scope","$rootScope","$location","$log","Rest","Alert","LoadBreadCrumbs","Prompt","GenerateList","OrganizationList","SearchInit","PaginateInit","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],OrganizationsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","Wait"],OrganizationsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","OrganizationForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","Wait","Stream"],PermissionsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","PermissionList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","CheckAccess","Wait"],PermissionsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],PermissionsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","PermissionsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","Prompt","GetBasePath","InventoryList","ProjectList","LookUpInit","CheckAccess","Wait","PermissionCategoryChange"],ProjectsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","ProjectList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","ProjectUpdate","ProjectStatus","FormatDate","Refresh","Wait","Stream","GetChoices","Empty"],ProjectsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","LookUpInit","OrganizationList","CredentialList","GetChoices","DebugForm","Wait"],ProjectsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","ProjectsForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","Prompt","ClearScope","GetBasePath","ReturnToCaller","GetProjectPath","Authorization","CredentialList","LookUpInit","GetChoices","Empty","DebugForm","Wait","Stream"],TeamsList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","TeamList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","SetTeamListeners","GetBasePath","SelectionInit","Wait","Stream"],TeamsAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GenerateList","OrganizationList","SearchInit","PaginateInit","GetBasePath","LookUpInit","Wait"],TeamsEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","TeamForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","LookUpInit","Prompt","GetBasePath","CheckAccess","OrganizationList","Wait","Stream"],UsersList.$inject=["$scope","$rootScope","$location","$log","$routeParams","Rest","Alert","UserList","GenerateList","LoadBreadCrumbs","Prompt","SearchInit","PaginateInit","ReturnToCaller","ClearScope","ProcessErrors","GetBasePath","SelectionInit","Wait","Stream"],UsersAdd.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","ReturnToCaller","ClearScope","GetBasePath","LookUpInit","OrganizationList","ResetForm","Wait"],UsersEdit.$inject=["$scope","$rootScope","$compile","$location","$log","$routeParams","UserForm","GenerateForm","Rest","Alert","ProcessErrors","LoadBreadCrumbs","RelatedSearchInit","RelatedPaginateInit","ReturnToCaller","ClearScope","GetBasePath","Prompt","CheckAccess","ResetForm","Wait","Stream"],angular.module("ActivityDetailDefinition",[]).value("ActivityDetailForm",{name:"activity",editTitle:"Activity Detail",well:!1,"class":"horizontal-narrow",formFieldSize:"col-lg-10",formLabelSize:"col-lg-2",fields:{user:{label:"Initiated by",type:"text",readonly:!0},operation:{label:"Action",type:"text",readonly:!0},changes:{label:"Changes",type:"textarea",ngHide:"!changes || changes =='' || changes == 'null'",readonly:!0}}}),angular.module("CredentialFormDefinition",[]).value("CredentialForm",{addTitle:"Create Credential",editTitle:"{{ name }}",name:"credential",well:!0,forceListeners:!0,actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"edit"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,autocomplete:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},owner:{label:"Does this credential belong to a team or user?",type:"radio_group",ngChange:"ownerChange()",options:[{label:"User",value:"user",selected:!0},{label:"Team",value:"team"}],awPopOver:"<p>A credential must be associated with either a user or a team. Choosing a user allows only the selected user access to the credential. Choosing a team shares the credential with all team members.</p>",dataTitle:"Owner",dataPlacement:"right",dataContainer:"body"},user:{label:"User that owns this credential",type:"lookup",sourceModel:"user",sourceField:"username",ngClick:"lookUpUser()",ngShow:"owner == 'user'",awRequiredWhen:{variable:"user_required",init:"false"}},team:{label:"Team that owns this credential",type:"lookup",sourceModel:"team",sourceField:"name",ngClick:"lookUpTeam()",ngShow:"owner == 'team'",awRequiredWhen:{variable:"team_required",init:"false"}},kind:{label:"Type",excludeModal:!0,type:"select",ngOptions:"kind.label for kind in credential_kind_options",ngChange:"kindChange()",addRequired:!0,editRequired:!0,helpCollapse:[{hdr:"Select a Credential Type",content:"<dl>\n<dt>AWS</dt>\n<dd>Access keys for Amazon Web Services used for inventory management or deployment.</dd>\n<dt>Machine</dt>\n<dd>Authentication for remote machine access. This can include SSH keys, usernames, passwords, and sudo information. Machine credentials are used when submitting jobs to run playbooks against remote hosts.</dd><dt>Rackspace</dt>\n<dd>Access information for Rackspace Cloud used for inventory management or deployment.</dd>\n<dt>SCM</dt>\n<dd>Used to check out and synchronize playbook repositories with a remote source control management system such as Git, Subversion (svn), or Mercurial (hg). These credentials are used on the Projects tab.</dd>\n</dl>\n"}]},access_key:{label:"Access Key",type:"text",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,apiField:"username"},secret_key:{label:"Secret Key",type:"password",ngShow:"kind.value == 'aws'",awRequiredWhen:{variable:"aws_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},username:{labelBind:"usernameLabel",type:"text",ngShow:"kind.value && kind.value !== 'aws'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1},api_key:{label:"API Key",type:"password",ngShow:"kind.value == 'rax'",awRequiredWhen:{variable:"rackspace_required",init:!1},autocomplete:!1,ask:!1,clear:!1,apiField:"passwowrd"},password:{label:"Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",ask:!1,clear:!1,associated:"password_confirm",autocomplete:!1},password_confirm:{label:"Confirm Password",type:"password",ngShow:"kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},ssh_password:{label:"SSH Password",type:"password",ngShow:"kind.value == 'ssh'",ngChange:"clearPWConfirm('ssh_password_confirm')",addRequired:!1,editRequired:!1,ask:!0,clear:!0,associated:"ssh_password_confirm",autocomplete:!1},ssh_password_confirm:{label:"Confirm SSH Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_password",autocomplete:!1},ssh_key_data:{labelBind:"sshKeyDataLabel",type:"textarea",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,"class":"ssh-key-field",rows:10},ssh_key_unlock:{label:"Key Password",type:"password",ngShow:"kind.value == 'ssh' || kind.value == 'scm'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('ssh_key_unlock_confirm')",associated:"ssh_key_unlock_confirm",ask:!0,askShow:"kind.value == 'ssh'",clear:!0},ssh_key_unlock_confirm:{label:"Confirm Key Password",type:"password",ngShow:"kind.value == 'ssh'  || kind.value == 'scm'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"ssh_key_unlock"},sudo_username:{label:"Sudo Username",type:"text",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,autocomplete:!1},sudo_password:{label:"Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,ngChange:"clearPWConfirm('sudo_password_confirm')",ask:!0,clear:!0,associated:"sudo_password_confirm",autocomplete:!1},sudo_password_confirm:{label:"Confirm Sudo Password",type:"password",ngShow:"kind.value == 'ssh'",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"sudo_password",autocomplete:!1}},buttons:{save:{label:"Save",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("GroupFormDefinition",[]).value("GroupForm",{addTitle:"Create Group",editTitle:"Edit Group",showTitle:!0,cancelButton:!1,name:"group",well:!0,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",tabs:[{name:"properties",label:"Properties"},{name:"source",label:"Source"}],fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,tab:"properties"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,tab:"properties"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",dataTitle:"Group Variables",dataPlacement:"right",awPopOver:'<p>Variables defined here apply to all child groups and hosts.</p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"properties"},source:{label:"Source",type:"select",ngOptions:"source.label for source in source_type_options",ngChange:"sourceChange()",addRequired:!1,editRequired:!1,tab:"source"},source_path:{label:"Script Path",ngShow:"source && source.value == 'file'",type:"text",awRequiredWhen:{variable:"sourcePathRequired",init:"false"},tab:"source"},credential:{label:"Cloud Credential",type:"lookup",ngShow:"source && source.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,tab:"source"},source_regions:{label:"Regions",type:"text",ngShow:"source && (source.value == 'rax' || source.value == 'ec2')",addRequired:!1,editRequired:!1,awMultiselect:"source_region_choices",dataTitle:"Source Regions",dataPlacement:"right",awPopOver:"<p>Click on the regions field to see a list of regions for your cloud provider. You can select multiple regions, or choose <em>All</em> to include all regions. Tower will only be updated with Hosts associated with the selected regions.</p>",dataContainer:"body",tab:"source"},source_vars:{label:"Source Variables",ngShow:"source && (source.value == 'file' || source.value == 'ec2')",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"default":"---",parseTypeName:"envParseType",dataTitle:"Source Variables",dataPlacement:"right",awPopOver:'<p>Override variables found in ec2.ini and used by the inventory update script. For a detailed description of these variables <a href="https://github.com/ansible/ansible/blob/devel/plugins/inventory/ec2.ini" target="_blank">view ec2.ini in the Ansible github repo.</a></p><p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataContainer:"body",tab:"source"},checkbox_group:{label:"Update Options",type:"checkbox_group",ngShow:"source && (source.value !== '' && source.value !== null)",tab:"source",fields:[{name:"overwrite",label:"Overwrite",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>When checked all child groups and hosts not found on the remote source will be deleted from the local inventory.</p><p>Unchecked any local child hosts and groups not found on the external source will remain untouched by the inventory update process.</p>",dataTitle:"Overwrite",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"overwrite_vars",label:"Overwrite Variables",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>If checked, all variables for child groups and hosts will be removed and replaced by those found on the external source.</p><p>When not checked a merge will be performed, combining local variables with those found on the external source.</p>",dataTitle:"Overwrite Variables",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"update_on_launch",label:"Update on Launch",type:"checkbox",ngShow:"source.value !== '' && source.value !== null",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this inventory, refresh the inventory from the selected source before executing job tasks.</p>",dataTitle:"Update on Launch",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{labelClass:"col-lg-3",controlClass:"col-lg-5",save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostGroupsFormDefinition",[]).value("HostGroupsForm",{editTitle:"Host Groups",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{groups:{label:"Groups",type:"select",multiple:!0,ngOptions:"group.name for group in inventory_groups",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("HostFormDefinition",[]).value("HostForm",{addTitle:"Create Host",editTitle:"{{ name }}",name:"host",well:!1,formLabelSize:"col-lg-3",formFieldSize:"col-lg-9",fields:{name:{label:"Host Name",type:"text",addRequired:!0,editRequired:!0,awPopOver:"<p>Provide a host name, ip address, or ip address:port. Examples include:</p><blockquote>myserver.domain.com<br/>127.0.0.1<br />10.1.0.140:25<br />server.example.com:25</blockquote>",dataTitle:"Host Name",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},enabled:{label:"Enabled?",type:"checkbox",addRequired:!1,editRequired:!1,"default":!0,awPopOver:"<p>Indicates if a host is available and should be included in running jobs.</p><p>For hosts that are part of an external inventory, this flag cannot be changed. It will be set by the inventory sync process.</p>",dataTitle:"Host Enabled",dataPlacement:"right",dataContainer:"#form-modal .modal-content",ngDisabled:"has_inventory_sources == true"},variables:{label:"Variables",type:"textarea",addRequired:!1,editRequird:!1,rows:6,"class":"modal-input-xlarge","default":"---",awPopOver:'<p>Enter variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Host Variables",dataPlacement:"right",dataContainer:"#form-modal .modal-content"},inventory:{type:"hidden",includeOnEdit:!0,includeOnAdd:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("InventoryFormDefinition",[]).value("InventoryForm",{addTitle:"Create Inventory",editTitle:"{{ inventory_name | capitalize }}",name:"inventory",well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{inventory_name:{realName:"name",label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},inventory_description:{realName:"description",label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"}},inventory_variables:{realName:"variables",label:"Variables",type:"textarea","class":"span12",addRequired:!1,editRequird:!1,parseTypeName:"inventoryParseType",rows:6,"default":"---",awPopOver:'<p>Enter inventory variables using either JSON or YAML syntax. Use the radio button to toggle between the two.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n<p>View JSON examples at <a href="http://www.json.org" target="_blank">www.json.org</a></p><p>View YAML examples at <a href="http://docs.ansible.com/YAMLSyntax.html" target="_blank">docs.ansible.com</a></p>',dataTitle:"Inventory Variables",dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("JobEventDataDefinition",[]).value("JobEventDataForm",{editTitle:"{{ id }} - {{ event_display }}",name:"job_events",well:!1,"class":"horizontal-narrow",fields:{event_data:{label:!1,type:"textarea",readonly:!0,rows:18,"class":"modal-input-xxlarge"}}}),angular.module("JobEventsFormDefinition",[]).value("JobEventsForm",{name:"job_events",well:!1,forceListeners:!0,fields:{status:{labelClass:"job-{{ status }}",type:"custom",section:"Event",control:'<div class="job-event-status job-{{ status }}"><i class="fa icon-job-{{ status }}"></i> {{ status }}</div>'},id:{label:"ID",type:"text",readonly:!0,section:"Event","class":"span1"},created:{label:"Created On",type:"text",section:"Event",readonly:!0},host:{label:"Host",type:"text",readonly:!0,section:"Event",ngShow:"host !== ''"},play:{label:"Play",type:"text",readonly:!0,section:"Event",ngShow:"play !== ''"},task:{label:"Task",type:"text",readonly:!0,section:"Event",ngShow:"task !== ''"},rc:{label:"Return Code",type:"text",readonly:!0,section:"Results","class":"span1",ngShow:"rc !== ''"},msg:{label:"Msg",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"msg !== ''",rows:10},stdout:{label:"Std Out",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stdout !== ''",rows:10},stderr:{label:"Std Err",type:"textarea",readonly:!0,section:"Results","class":"nowrap",ngShow:"stderr !== ''",rows:10},results:{label:"Results",type:"textarea",section:"Results",readonly:!0,"class":"nowrap",ngShow:"results !== ''",rows:10},start:{label:"Start",type:"text",readonly:!0,section:"Timing",ngShow:"start !== ''"},traceback:{label:!1,type:"textarea",readonly:!0,section:"Traceback","class":"nowrap",ngShow:"traceback !== ''",rows:10},end:{label:"End",type:"text",readonly:!0,section:"Timing",ngShow:"end !== ''"},delta:{label:"Elapsed",type:"text",readonly:!0,section:"Timing",ngShow:"delta !== ''"},module_name:{label:"Name",type:"text",readonly:!0,section:"Module",ngShow:"module_name !== ''"},module_args:{label:"Args",type:"text",readonly:!0,section:"Module",ngShow:"module_args !== ''"}}}),angular.module("JobSummaryDefinition",[]).value("JobSummary",{editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!1,fields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space resizable",ngShow:'result_stdout != ""'},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space resizable",ngShow:'result_traceback != ""'}}}),angular.module("JobTemplateFormDefinition",[]).value("JobTemplateForm",{addTitle:"Create Job Templates",editTitle:"{{ name }}",name:"job_templates",twoColumns:!0,well:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body"},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"},column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"true"},column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",awRequiredWhen:{variable:"playbookrequired",init:"true"},column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Machine Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCloudcredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"default":"0",addRequired:!1,editRequired:!1,"class":"input-small",column:1,awPopOver:'<p>The number of parallel or simultaneous processes to use while executing the playbook. 0 signifies the default value from the <a href="http://docs.ansible.com/intro_configuration.html#the-ansible-configuration-file"  target="_blank">ansible configuration file</a>.</p>',dataTitle:"Forks",dataPlacement:"right",dataContainer:"body"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see <a href="http://docs.ansible.com/intro_patterns.html" target="_blank">the Patters top at docs.ansible.com</a>.</p>',dataTitle:"Limit",dataPlacement:"right",dataContainer:"body"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,"default":"---",column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataPlacement:"right",dataContainer:"body"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataPlacement:"right",dataContainer:"body"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataTitle:"Callback URL",dataContainer:"body"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting the Tower server using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{jobs:{type:"collection",title:"Jobs",iterator:"job",index:!1,open:!1,actions:{reset:{dataPlacement:"top",icon:"icon-undo",mode:"all","class":"btn-xs btn-primary",awToolTip:"Reset the search filter",ngClick:"resetSearch('job')",iconSize:"large"}},fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},created:{label:"Date",link:!1,searchable:!1},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{}} job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},fieldActions:{edit:{label:"View",ngClick:"edit('jobs', job.id, job.name)",icon:"icon-zoom-in"}}}}}),angular.module("JobFormDefinition",[]).value("JobForm",{addTitle:"Create Job",editTitle:"{{ id }} - {{ name }}",name:"jobs",well:!0,collapse:!0,collapseMode:"edit",collapseTitle:"Job Template",twoColumns:!0,navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",active:!0,ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{name:{label:"Job Template",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1,column:1},job_type:{label:"Job Type",type:"select",ngOptions:"type.label for type in job_type_options","default":"run",addRequired:!0,editRequired:!0,awPopOver:"<p>When this template is submitted as a job, setting the type to <em>run</em> will execute the playbook, running tasks  on the selected hosts.</p> <p>Setting the type to <em>check</em> will not execute the playbook. Instead, ansible will check playbook  syntax, test environment setup and report problems.</p>",dataTitle:"Job Type",dataPlacement:"right",dataContainer:"body",column:1},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpInventory()",column:1,awPopOver:"<p>Select the inventory containing the hosts you want this job to manage.</p>",dataTitle:"Inventory",dataPlacement:"right",dataContainer:"body"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",addRequired:!0,editRequired:!0,ngClick:"lookUpProject()",column:1,awPopOver:"<p>Select the project containing the playbook you want this job to execute.</p>",dataTitle:"Project",dataPlacement:"right",dataContainer:"body"},playbook:{label:"Playbook",type:"select",ngOptions:"book for book in playbook_options",id:"playbook-select",addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Select the playbook to be executed by this job.</p>",dataTitle:"Playbook",dataPlacement:"right",dataContainer:"body"},credential:{label:"Credential",type:"lookup",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Select the credential you want the job to use when accessing the remote hosts. Choose the credential containing  the username and SSH key or password that Ansbile will need to log into the remote hosts.</p>",dataTitle:"Credential",dataPlacement:"right",dataContainer:"body"},cloud_credential:{label:"Cloud Credential",type:"lookup",sourceModel:"cloud_credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1,column:1,awPopOver:"<p>Selecting an optional cloud credential in the job template will pass along the access credentials to the running playbook, allowing provisioning into the cloud without manually passing parameters to the included modules.</p>",dataTitle:"Cloud Credential",dataPlacement:"right",dataContainer:"body"},forks:{label:"Forks",id:"forks-number",type:"number",integer:!0,min:0,spinner:!0,"class":"input-small","default":"0",addRequired:!1,editRequired:!1,column:1,disabled:!0,awPopOver:"<p>The number of parallel or simultaneous processes to use while executing the playbook.</p>",dataContainer:"body",dataTitle:"Forks",dataPlacement:"right"},limit:{label:"Limit",type:"text",addRequired:!1,editRequired:!1,column:1,awPopOver:'<p>Provide a host pattern to further constrain the list of hosts that will be managed or affected by the playbook. Multiple patterns can be separated by &#59; &#58; or &#44;</p><p>For more information and examples see the <a href="http://ansible.cc/docs/patterns.html#selecting-targets" target="_blank">Selecting Targets section</a> under Inventory and Patterns  in the Ansible documentation.</p>',dataContainer:"body",dataTitle:"Limit",dataPlacement:"right"},verbosity:{label:"Verbosity",type:"select",ngOptions:"v.label for v in verbosity_options","default":0,addRequired:!0,editRequired:!0,column:1,awPopOver:"<p>Control the level of output ansible will produce as the playbook executes.</p>",dataTitle:"Verbosity",dataPlacement:"right",dataContainer:"body"},variables:{label:"Extra Variables",type:"textarea",rows:6,"class":"span12",addRequired:!1,editRequired:!1,column:2,awPopOver:'<p>Pass extra command line variables to the playbook. This is the -e or --extra-vars command line parameter for ansible-playbook. Provide key/value pairs using either YAML or JSON.</p>JSON:<br />\n<blockquote>{<br />"somevar": "somevalue",<br />"password": "magic"<br /> }</blockquote>\nYAML:<br />\n<blockquote>---<br />somevar: somevalue<br />password: magic<br /></blockquote>\n',dataTitle:"Extra Variables",dataContainer:"body",dataPlacement:"right"},job_tags:{label:"Job Tags",type:"textarea",rows:1,addRequired:!1,editRequired:!1,"class":"span12",column:2,awPopOver:"<p>Provide a comma separated list of tags.</p>\n<p>Tags are useful when you have a large playbook, and you want to run a specific part of a play or task.</p><p>For example, you might have a task consisiting of a long list of actions. Tag values can be assigned to each action. Suppose the actions have been assigned tag values of &quot;configuration&quot;, &quot;packages&quot; and &quot;install&quot;.</p><p>If you just want to run the &quot;configuration&quot; and &quot;packages&quot; actions, you would enter the following here in the Job Tags field:</p>\n<blockquote>configuration,packages</blockquote>\n",dataTitle:"Job Tags",dataContainer:"body",dataPlacement:"right"},allow_callbacks:{label:"Allow Callbacks",type:"checkbox",addRequired:!1,editRequird:!1,trueValue:"true",falseValue:"false",ngChange:"toggleCallback('host_config_key')","class":"span12",column:2,awPopOver:'<p>Create a callback URL a host can use to contact Tower and request a configuration update using the job template.  The URL will look like the following:</p>\n<p class="code-breakable">http://your.server.com:999/api/v1/job_templates/1/callback/</p><p>The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},callback_url:{label:"Callback URL",type:"text",addRequired:!1,editRequired:!1,readonly:!0,column:2,required:!1,"class":"span12",awPopOver:'<p>Using this URL a host can contact Tower and request a configuration update using the job template. The request from the host must be a POST. Here is an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n<p>Note the requesting host must be defined in your inventory. If ansible fails to locate the host either by name or IP address in one of your defined inventories, the request will be denied.</p><p>Successful requests will result in an entry on the Jobs tab, where the results and history can be viewed.</p>',dataPlacement:"right",dataContainer:"body",dataTitle:"Callback URL"},host_config_key:{label:"Host Config Key",type:"text",ngShow:"allow_callbacks",genMD5:!0,column:2,awPopOver:'<p>When contacting Tower using the callback URL, the calling host must authenticate by including this key in the POST data of the request. Here\'s an example using curl:</p>\n<p class="code-breakable">curl --data "host_config_key=5a8ec154832b780b9bdef1061764ae5a" http://your.server.com:999/api/v1/job_templates/1/callback/</p>\n',dataPlacement:"right",dataContainer:"body"}},buttons:{save:{label:"Save",icon:"icon-ok","class":"btn-success",ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",label:"Reset",icon:"icon-undo","class":"btn btn-default",ngDisabled:!0}},statusFields:{status:{type:"custom",control:'<div class="job-detail-status"><span style="padding-right: 15px; font-weight: bold;">Status</span> <i class="fa icon-job-{{ status }}"></i> {{ status }}</div>',readonly:!0},created:{label:"Created On",type:"text",readonly:!0},result_stdout:{label:"Standard Out",type:"textarea",readonly:!0,xtraWide:!0,rows:"{{ stdout_rows }}","class":"nowrap mono-space",ngShow:"result_stdout != ''"},result_traceback:{label:"Traceback",type:"textarea",xtraWide:!0,readonly:!0,rows:"{{ traceback_rows }}","class":"nowrap mono-space",ngShow:"result_traceback != ''"}},statusActions:{refresh:{dataPlacement:"top",icon:"icon-refresh",iconSize:"large",mode:"all","class":"btn-xs btn-primary",awToolTip:"Refresh the page",ngClick:"refresh()"}}}),angular.module("LicenseFormDefinition",[]).value("LicenseForm",{name:"license",well:!1,forceListeners:!0,fields:{license_status:{type:"custom",control:'<div class="license-status" ng-class="status_color"><i class="fa fa-circle"></i> {{ license_status }}</span></div>',readonly:!0,section:"License"},license_key:{label:"Key",type:"textarea","class":"modal-input-xlarge",readonly:!0,section:"License"},license_date:{label:"Expires On",type:"text",readonly:!0,section:"License"},time_remaining:{label:"Time Left",type:"text",readonly:!0,section:"License"},available_instances:{label:"Available",type:"text",readonly:!0,section:"Managed Hosts"},current_instances:{label:"Used",type:"text",readonly:!0,section:"Managed Hosts"},free_instances:{label:"Remaining",type:"text",readonly:!0,section:"Managed Hosts",controlNGClass:"free_instances_class",labelNGClass:"free_instances_class"},company_name:{label:"Company",type:"text",readonly:!0,section:"Contact Info"},contact_name:{label:"Contact",type:"text",readonly:!0,section:"Contact Info"},contact_email:{label:"Contact Email",type:"text",readonly:!0,section:"Contact Info"}}}),angular.module("OrganizationFormDefinition",[]).value("OrganizationForm",{addTitle:"Create Organization",editTitle:"{{ name }}",name:"organization",well:!1,collapse:!0,collapseTitle:"Properties",collapseMode:"edit",collapseOpen:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",label:"Add",icon:"icon-plus",awToolTip:"Add a new user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit","class":"btn-default",awToolTip:"Edit user"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove user"}}},admins:{type:"collection",title:"Administrators",iterator:"admin",open:!1,base:"/users",actions:{add:{ngClick:"add('admins')",icon:"icon-plus",label:"Add",awToolTip:"Add new administrator"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', admin.id, admin.username)",icon:"icon-edit",awToolTip:"Edit administrator","class":"btn-default"},"delete":{label:"Delete",ngClick:"delete('admins', admin.id, admin.username, 'administrators')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove administrator"}}}}}),angular.module("PermissionFormDefinition",[]).value("PermissionsForm",{addTitle:"Add Permission",editTitle:"{{ name }}",name:"permission",well:!0,forceListeners:!0,stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"},fields:{category:{label:"Permission Type",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Inventory",value:"Inventory",selected:!0},{label:"Deployment",value:"Deploy"}],ngChange:"selectCategory()"},name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},user:{label:"User",type:"hidden"},team:{label:"Team",type:"hidden"},project:{label:"Project",type:"lookup",sourceModel:"project",sourceField:"name",ngShow:"category == 'Deploy'",ngClick:"lookUpProject()",awRequiredWhen:{variable:"projectrequired",init:"false"}},inventory:{label:"Inventory",type:"lookup",sourceModel:"inventory",sourceField:"name",ngClick:"lookUpInventory()",awRequiredWhen:{variable:"inventoryrequired",init:"true"}},permission_type:{label:"Permission",labelClass:"prepend-asterisk",type:"radio_group",options:[{label:"Read",value:"read",ngShow:"category == 'Inventory'"},{label:"Write",value:"write",ngShow:"category == 'Inventory'"},{label:"Admin",value:"admin",ngShow:"category == 'Inventory'"},{label:"Run",value:"run",ngShow:"category == 'Deploy'"},{label:"Check",value:"check",ngShow:"category == 'Deploy'"}],helpCollapse:[{hdr:"Permission",ngBind:"permissionTypeHelp"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{}}),angular.module("ProjectStatusDefinition",[]).value("ProjectStatusForm",{name:"project_update",editTitle:"SCM Status",well:!1,"class":"horizontal-narrow",fields:{created:{label:"Created",type:"text",readonly:!0},status:{label:"Status",type:"text",readonly:!0},result_stdout:{label:"Std Out",type:"textarea",ngShow:"result_stdout","class":"mono-space",readonly:!0,rows:15},result_traceback:{label:"Traceback",type:"textarea",ngShow:"result_traceback","class":"mono-space",readonly:!0,rows:15}}}),angular.module("ProjectFormDefinition",[]).value("ProjectsForm",{addTitle:"Create Project",editTitle:"{{ name }}",name:"project",well:!0,forceListeners:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",addRequired:!0,editRequired:!1,excludeMode:"edit",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"organizationrequired",init:"true"},awPopOver:"<p>A project must have at least one organization. Pick one organization now to create the project, and then after the project is created you can add additional organizations.</p><p>Only super users and organization administrators are allowed to make changes to projects. Associating one or more organizations to a project determins which organizations admins have access to modify the project.",dataTitle:"Organization",dataContainer:"body",dataPlacement:"right"},scm_type:{label:"SCM Type",type:"select",ngOptions:"type.label for type in scm_type_options",ngChange:"scmChange()",addRequired:!0,editRequired:!0},missing_path_alert:{type:"alertblock","class":"alert-info",ngShow:"showMissingPlaybooksAlert && scm_type.value == ''",alertTxt:'<p class="text-justify"><strong>WARNING:</strong> There are no unassigned playbook directories in the base project path {{ base_dir }}. Either the projects directory is empty, or all of the contents are already assigned to other projects. New projects can be checked out from source control by changing the SCM type option rather than specifying checkout paths manually. To continue with manual setup, log into the Tower host and ensure content is present in a subdirectory under {{ base_dir }}. Run "chown -R awx" on the content directory to ensure Tower can read the playbooks.</p>',closeable:!1},base_dir:{label:"Project Base Path",type:"textarea",showonly:!0,ngShow:"scm_type.value == ''",awPopOver:"<p>Base path used for locating playbooks. Directories found inside this path will be listed in the playbook directory drop-down. Together the base path and selected playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Base Path",dataContainer:"body",dataPlacement:"right"},local_path:{label:"Playbook Directory",type:"select",id:"local-path-select",ngOptions:"path.label for path in project_local_paths",awRequiredWhen:{variable:"pathRequired",init:!1},ngShow:"scm_type.value == '' && !showMissingPlaybooksAlert",awPopOver:"<p>Select from the list of directories found in the base path.Together the base path and the playbook directory provide the full path used to locate playbooks.</p><p>Use PROJECTS_ROOT in your environment settings file to determine the base path value.</p>",dataTitle:"Project Path",dataContainer:"body",dataPlacement:"right"},scm_url:{label:"SCM URL",type:"text",ngShow:"scm_type && scm_type.value !== ''",awRequiredWhen:{variable:"scmRequired",init:!1},helpCollapse:[{hdr:"GIT URLs",content:'<p>Example URLs for GIT SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible.git</li><li>git@github.com:ansible/ansible.git</li><li>git://servername.example.com/ansible.git</li></ul><p><strong>Note:</strong> If using SSH protocol for GitHub or Bitbucket, enter in the SSH key only, do not enter a username (other than git). Additionally, GitHub and Bitbucket do not support password authentication when using SSH protocol. GIT read only protocol (git://) does not use username or password information.',show:"scm_type.value == 'git'"},{hdr:"SVN URLs",content:'<p>Example URLs for Subversion SCM include:</p><ul class="no-bullets"><li>https://github.com/ansible/ansible</li><li>svn://servername.example.com/path</li><li>svn+ssh://servername.example.com/path</li></ul>',show:"scm_type.value == 'svn'"},{hdr:"Mercurial URLs",content:'<p>Example URLs for Mercurial SCM include:</p><ul class="no-bullets"><li>https://bitbucket.org/username/project</li><li>ssh://hg@bitbucket.org/username/project</li><li>ssh://server.example.com/path</li></ul><p><strong>Note:</strong> Mercurial does not support password authentication for SSH. If applicable, add the username, password and key below. Do not put the username and key in the URL. If using Bitbucket and SSH, do not supply your Bitbucket username.',show:"scm_type.value == 'hg'"}]},scm_branch:{labelBind:"scmBranchLabel",type:"text",ngShow:"scm_type && scm_type.value !== ''",addRequired:!1,editRequired:!1},credential:{label:"SCM Credential",type:"lookup",ngShow:"scm_type && scm_type.value !== ''",sourceModel:"credential",sourceField:"name",ngClick:"lookUpCredential()",addRequired:!1,editRequired:!1},checkbox_group:{label:"SCM Update Options",type:"checkbox_group",ngShow:"scm_type && scm_type.value !== ''",fields:[{name:"scm_clean",label:"Clean",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Remove any local modifications prior to performing an update.</p>",dataTitle:"SCM Clean",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_delete_on_update",label:"Delete on Update",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Delete the local repository in its entirety prior to performing an update.</p><p>Depending on the size of the repository this may significantly increase the amount of time required to complete an update.</p>",dataTitle:"SCM Delete",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"},{name:"scm_update_on_launch",label:"Update on Launch",type:"checkbox",addRequired:!1,editRequired:!1,awPopOver:"<p>Each time a job runs using this project, perform an update to the local repository prior to starting the job.</p>",dataTitle:"SCM Update",dataContainer:"body",dataPlacement:"right",labelClass:"checkbox-options"}]}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{add:{ngClick:"add('organizations')",icon:"icon-plus",label:"Add",awToolTip:"Add an organization"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('organizations', organization.id, organization.name)",icon:"icon-edit",awToolTip:"Edit the organization","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('organizations', organization.id, organization.name, 'organizations')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the organization"}}}}}),angular.module("TeamFormDefinition",[]).value("TeamForm",{addTitle:"Create Team",editTitle:"{{ name }}",name:"team",well:!1,collapse:!0,collapseTitle:"Properties",collapseMode:"edit",collapseOpen:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{name:{label:"Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!1},description:{label:"Description",type:"text",addRequired:!1,editRequired:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",awRequiredWhen:{variable:"teamrequired",init:"true"}}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",add:"Add a new credential"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Modify the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{add:{ngClick:"add('projects')",icon:"icon-plus",label:"Add"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('projects', project.id, project.name)",icon:"icon-edit",awToolTip:"Modify the project","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('projects', project.id, project.name, 'projects')",icon:"icon-trash","class":"btn-danger",awToolTip:"Remove the project"}}},users:{type:"collection",title:"Users",iterator:"user",open:!1,actions:{add:{ngClick:"add('users')",icon:"icon-plus",label:"Add",awToolTip:"Add a user"}},fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('users', user.id, user.username)",icon:"icon-edit",awToolTip:"Edit user","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('users', user.id, user.username, 'users')",icon:"icon-terash","class":"btn-danger",awToolTip:"Remove user"}}}}}),angular.module("UserFormDefinition",[]).value("UserForm",{addTitle:"Create User",editTitle:"{{ username }}",name:"user",well:!1,forceListeners:!0,collapse:!0,collapseTitle:"Properties",collapseMode:"edit",collapseOpen:!0,actions:{stream:{"class":"btn-primary btn-xs activity-btn",ngClick:"showActivity()",awToolTip:"View Activity Stream",dataPlacement:"top",icon:"icon-comments-alt",mode:"edit",iconSize:"large"}},fields:{first_name:{label:"First Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},last_name:{label:"Last Name",type:"text",addRequired:!0,editRequired:!0,capitalize:!0},email:{label:"Email",type:"email",addRequired:!0,editRequired:!0,autocomplete:!1},organization:{label:"Organization",type:"lookup",sourceModel:"organization",sourceField:"name",ngClick:"lookUpOrganization()",excludeMode:"edit",awRequiredWhen:{variable:"orgrequired",init:!0}},username:{label:"Username",type:"text",awRequiredWhen:{variable:"not_ldap_user",init:!0},autocomplete:!1},password:{label:"Password",type:"password",ngShow:"ldap_user == false",addRequired:!0,editRequired:!1,ngChange:"clearPWConfirm('password_confirm')",autocomplete:!1,chkPass:!0},password_confirm:{label:"Confirm Password",type:"password",ngShow:"ldap_user == false",addRequired:!1,editRequired:!1,awPassMatch:!0,associated:"password",autocomplete:!1},is_superuser:{label:"Superuser (User has full system administration privileges.)",type:"checkbox",trueValue:"true",falseValue:"false","default":"false",ngShow:"current_user['is_superuser'] == true"},ldap_user:{label:"Created by LDAP",type:"checkbox",readonly:!0}},buttons:{save:{ngClick:"formSave()",ngDisabled:!0},reset:{ngClick:"formReset()",ngDisabled:!0}},related:{credentials:{type:"collection",title:"Credentials",iterator:"credential",open:!1,actions:{add:{ngClick:"add('credentials')",icon:"icon-plus",label:"Add",awToolTip:"Add a credential for this user"}},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('credentials', credential.id, credential.name)",icon:"icon-edit",awToolTip:"Edit the credential","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('credentials', credential.id, credential.name, 'credentials')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the credential"}}},permissions:{type:"collection",title:"Permissions",iterator:"permission",open:!1,actions:{add:{ngClick:"add('permissions')",icon:"icon-plus",label:"Add",awToolTip:"Add a permission for this user",ngShow:"PermissionAddAllowed"}},fields:{name:{key:!0,label:"Name",ngClick:"edit('permissions', permission.id, permission.name)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},fieldActions:{edit:{label:"Edit",ngClick:"edit('permissions', permission.id, permission.name)",icon:"icon-edit",awToolTip:"Edit the permission","class":"btn btn-default"},"delete":{label:"Delete",ngClick:"delete('permissions', permission.id, permission.name, 'permissions')",icon:"icon-trash","class":"btn-danger",awToolTip:"Delete the permission",ngShow:"PermissionAddAllowed"}}},admin_of_organizations:{type:"collection",title:"Admin of Organizations",iterator:"adminof",open:!1,base:"/organizations",actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},organizations:{type:"collection",title:"Organizations",iterator:"organization",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},teams:{type:"collection",title:"Teams",iterator:"team",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}},projects:{type:"collection",title:"Projects",iterator:"project",open:!1,actions:{},fields:{name:{key:!0,label:"Name"},description:{label:"Description"}}}}}),angular.module("InventoryGroupsHelpDefinition",[]).value("InventoryGroupsHelp",{story:{hdr:"Building your inventory",width:510,height:560,steps:[{intro:"Start by creating a group:",img:{src:"groups001.png",maxWidth:338,maxHeight:222},box:'Click <i class="fa fa-plus"></i> on the groups list (the left side of the page) to add a new group.',autoOffNotice:!0},{intro:"Enter group properties:",img:{src:"groups002.png",maxWidth:443,maxHeight:251},box:'Enter the group name, a description and any inventory variables. Variables can be entered using either JSON or YAML syntax. For more on inventory variables, see <a href="http://docs.ansible.com/intro_inventory.html" target="_blank"> docs.ansible.com/intro_inventory.html</a>'},{intro:"Cloud inventory: select cloud source",img:{src:"groups003.png",maxWidth:412,maxHeight:215},box:'For a cloud inventory, choose the cloud provider from the list and select your credentials. If you have not already setup credentials for the provider, you will need to do that first on the <a href="/#/credentials" target="_blank">Credentials</a> tab.'},{intro:"Cloud inventory: synchronize Tower with the cloud",img:{src:"groups004.png",maxWidth:261,maxHeight:221},box:'To pull the cloud inventory into Tower, initiate an inventory sync by clicking <i class="fa fa-exchange"></i>.'},{intro:"Groups can have subgroups:",img:{src:"groups005.png",maxWidth:430,maxHeight:206},box:'<div class="text-left">First, select a group. Then click <i class="fa fa-plus"></i> to create a new group. The new group will be added to the selected group.</div>'},{intro:"Copy or move groups:",img:{src:"groups006.png",maxWidth:263,maxHeight:211},box:'<div class="text-left">Copy or move a group by dragging and dropping its name onto another group name. A dialog will appear asking if the group should be coppied or moved.</div>'},{intro:"Adding hosts:",img:{src:"groups007.png",maxWidth:466,maxHeight:178},box:'<div class="text-left"><p>First, select a Group. Then click <i class="fa fa-plus"></i> on the hosts list (the right side of the page) to create a host. The new host will be part of the selected group.</p><p>Note hosts cannot be added to the All Hosts group.</p></div>'}]}}),angular.module("AccessHelper",["RestServices","Utilities","ngCookies"]).factory("CheckAccess",["$rootScope","Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d,e){return function(b){var d=a.current_user,f=b.scope;
d.is_superuser?f.PermissionAddAllowed=!0:d.related.admin_of_organizations&&(c.setUrl(d.related.admin_of_organizations),c.get().success(function(a){f.PermissionAddAllowed=a.results.length>0?!0:!1}).error(function(a,b){e(f,a,b,null,{hdr:"Error!",msg:"Call to "+d.related.admin_of_organizations+" failed. DELETE returned status: "+b})}))}}]).factory("CheckLicense",["$rootScope","$cookieStore","Alert","$location","Authorization",function(a,b,c,d,e){return function(){var d,f,g="success",h=b.get("license"),i='<p>To purchase a license or extend an existing license <a href="http://www.ansible.com/ansible-pricing" target="_blank"><strong>visit the Ansible online store</strong></a>, or visit <strong><a href="https://support.ansible.com" target="_blank">support.ansible.com</a></strong> for assistance.</p>';h&&!e.licenseTested()&&(h.tested=!0,b.remove("license"),b.put("license",h),a.license_tested=!0,void 0!==h.valid_key&&h.valid_key===!1?(g="alert-danger",d="License Error",f="<p>There is a problem with the /etc/awx/license file on your Tower server. Check to make sure Tower can access the file.</p>"+i,c(d,f,g,null,!1,!0)):void 0!==h.demo&&h.demo===!0&&(g="alert-info",d="Tower Demo",f="<p>Thank you for trying Ansible Tower. You can use this edition to manage up to 10 hosts free.</p>"+i,c(d,f,g)),void 0!==h.date_expired&&h.date_expired===!0?(g="alert-info",d="License Expired",f="<p>Your Ansible Tower License has expired and is no longer compliant. You can continue, but you will be unable to add any additional hosts.</p>"+i,c(d,f,g)):void 0!==h.date_warning&&h.date_warning===!0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license is about to expire!</p>"+i,c(d,f,g)),void 0!==h.free_instances&&parseInt(h.free_instances)<=0&&(g="alert-info",d="License Warning",f="<p>Your Ansible Tower license has reached capacity for the number of managed hosts allowed. You will not be able to add any additional hosts.</p>"+i,c(d,f,g,null,!0)))}}]),angular.module("ChildrenHelper",["RestServices","Utilities"]).factory("ToggleChildren",[function(){return function(a){function b(a){var b;for(i[a].ngicon="fa fa-minus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!0)}function c(a){var b;for(i[a].ngicon="fa fa-plus-square-o node-toggle",b=a+1;b<i.length;b++)i[b].parent===i[a].id&&(i[b].show=!1,i[b].related.children&&c(b))}var d,e,f=a.scope,g=a.list,h=a.id,i=f[g.name],j=!1;for(d=0;d<i.length&&j===!1;d++)i[d].id===h&&(e=d,j=!0);/plus-square-o/.test(i[e].ngicon)?b(e):/minus-square-o/.test(i[e].ngicon)&&c(e)}}]),angular.module("CredentialsHelper",["Utilities"]).factory("KindChange",["Empty",function(a){return function(b){var c,d,e=b.scope,f=b.reset;if(e.usernameLabel="Username",e.aws_required=!1,e.rackspace_required=!1,e.sshKeyDataLabel="SSH Private Key",!a(e.kind))switch(e.kind.value){case"aws":e.aws_required=!0;break;case"rax":e.rackspace_required=!0;break;case"ssh":e.usernameLabel="SSH Username";break;case"scm":e.sshKeyDataLabel="SCM Private Key"}f&&(e.access_key=null,e.secret_key=null,e.api_key=null,e.username=null,e.password=null,e.password_confirm=null,e.ssh_key_data=null,e.ssh_key_unlock=null,e.ssh_key_unlock_confirm=null,e.sudo_username=null,e.sudo_password=null,e.sudo_password_confirm=null),c=$("#credential_kind").parent().find(".panel-collapse").first(),d=c.attr("id"),a(e.kind)||""===e.kind.value?$("#"+d+"-icon").hasClass("icon-plus")&&e.accordionToggle("#"+d):$("#"+d+"-icon").hasClass("icon-minus")&&e.accordionToggle("#"+d)}}]).factory("OwnerChange",[function(){return function(a){var b=a.scope,c=b.owner;"team"===c?(b.team_required=!0,b.user_required=!1,b.user=null,b.user_username=null):(b.team_required=!1,b.user_required=!0,b.team=null,b.team_name=null)}}]).factory("FormSave",["$location","Alert","Rest","ProcessErrors","Empty","GetBasePath","CredentialForm","ReturnToCaller","Wait",function(a,b,c,d,e,f,g,h,i){return function(j){var k,l,m=j.scope,n=j.mode,o=g,p={};for(k in o.fields)"access_key"!==k&&"secret_key"!==k&&"ssh_username"!==k&&"ssh_password"!==k&&(p[k]=null===m[k]?"":m[k]);switch(e(m.team)?(p.user=m.user,p.team=""):(p.team=m.team,p.user=""),p.kind=m.kind.value,p.kind){case"ssh":p.password=m.ssh_password;break;case"aws":p.username=m.access_key,p.password=m.secret_key;break;case"rax":p.password=m.api_key}e(p.team)&&e(p.user)?b("Missing User or Team","You must provide either a User or a Team. If this credential will only be accessed by a specific user, select a User. To allow a team of users to access this credential, select a Team.","alert-danger"):(i("start"),"add"===n?(l=e(p.team)?f("users")+p.user+"/credentials/":f("teams")+p.team+"/credentials/",c.setUrl(l),c.post(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to create new Credential. POST status: "+b})})):(l=f("credentials")+m.id+"/",c.setUrl(l),c.put(p).success(function(){i("stop");var b=a.path().replace(/^\//,"").split("/")[0];"credentials"===b&&h(),h(1)}).error(function(a,b){i("stop"),d(m,a,b,o,{hdr:"Error!",msg:"Failed to update Credential. PUT status: "+b})})))}}]),angular.module("EventsHelper",["RestServices","Utilities","JobEventDataDefinition","JobEventsFormDefinition"]).factory("EventView",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","JobEventDataForm","Empty","JobEventsForm",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.event_id,d=g,f=angular.copy(n),h=j("base")+"job_events/"+c+"/";e.setUrl(h),e.get().success(function(a){var c,e,h,i,j,n;if($.isEmptyObject(a.event_data)||!a.event_data.res||"string"==typeof a.event_data.res)for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"results":case"module_name":case"module_args":case"rc":delete f.fields[h]}($.isEmptyObject(a.event_data)||!a.event_data.res||"string"!=typeof a.event_data.res)&&delete f.fields.traceback;for(h in f.fields)switch(h){case"start":case"end":case"delta":case"msg":case"stdout":case"stderr":case"msg":case"rc":a.event_data&&a.event_data.res&&m(a.event_data.res[h])?delete f.fields[h]:"textarea"===f.fields[h].type&&(e=a.event_data.res[h].match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i);break;case"results":if(a.event_data&&a.event_data.res&&void 0===a.event_data.res[h])delete f.fields[h];else if(Array.isArray(a.event_data.res[h])&&0!==a.event_data.res[h].length){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""===j?delete f.fields[h]:(e=j.match(/\n/g),i=e?e.length:1,i=i>10?10:i,i=3>i?3:i,f.fields[h].rows=i)}else delete f.fields[h];break;case"module_name":case"module_args":a.event_data&&a.event_data.res&&(void 0===a.event_data.res.invocation||void 0===a.event_data.res.invocation[h])&&delete f.fields[h]}b=d.inject(f,{mode:"edit",modal:!0,related:!1}),d.reset(),b.formModalAction=function(){$("#form-modal").modal("hide")},b.formModalActionLabel="OK",b.formModalCancelShow=!1,b.formModalInfo="View JSON",$("#form-modal .btn-success").removeClass("btn-success").addClass("btn-none"),$("#form-modal").addClass("skinny-modal"),b.formModalHeader=a.event_display.replace(/^\u00a0*/g,""),b.formModalInfoAction=function(){var b=g,c=b.inject(l,{mode:"edit",modal:!0,related:!1,modal_selector:"#form-modal2",modal_body_id:"form-modal2-body",modal_title_id:"formModal2Header"});b.reset(),c.formModal2Header=a.event_display.replace(/^\u00a0*/g,""),c.event_data=JSON.stringify(a.event_data,null,"	"),c.formModal2ActionLabel="OK",c.formModal2CancelShow=!1,c.formModal2Info=!1,c.formModalInfo="View JSON",c.formModal2Action=function(){$("#form-modal2").modal("hide")},$("#form-modal2 .btn-success").removeClass("btn-success").addClass("btn-none")},"string"==typeof a.event_data.res&&(b.traceback=a.event_data.res);for(h in f.fields)switch(h){case"status":b.status=a.failed?"error":a.changed?"changed":"success";break;case"created":n=new Date(a.created),b.created=k(n);break;case"host":a.summary_fields&&a.summary_fields.host&&(b.host=a.summary_fields.host.name);break;case"id":case"task":case"play":b[h]=a[h];break;case"start":case"end":a.event_data&&a.event_data.res&&!m(a.event_data.res[h])&&(b[h]=a.event_data.res[h]);break;case"results":if(Array.isArray(a.event_data.res[h])&&a.event_data.res[h].length>0){for(j="",c=0;c<a.event_data.res[h].length;c++)j+=a.event_data.res[h][c];""!==j&&(b[h]=j)}break;case"msg":case"stdout":case"stderr":case"delta":case"rc":a.event_data&&a.event_data.res&&void 0!==a.event_data.res[h]&&(b[h]=a.event_data.res[h]);break;case"module_name":case"module_args":a.event_data.res&&a.event_data.res.invocation&&(b[h]=a.event_data.res.invocation[h])}b.$$phase||b.$digest()}).error(function(a,d){$("#form-modal").modal("hide"),i(b,a,d,f,{hdr:"Error!",msg:"Failed to retrieve event: "+c+". GET status: "+d})})}}]),angular.module("GroupsHelper",["RestServices","Utilities","ListGenerator","GroupListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","GroupsHelper","InventoryHelper","SelectionHelper","JobSubmissionHelper","RefreshHelper","PromptDialog","CredentialsListDefinition","InventoryTree"]).factory("GetSourceTypeOptions",["Rest","ProcessErrors","GetBasePath",function(a,b,c){return function(d){var e=d.scope,f=d.variable;void 0===e[f]&&(e[f]=[],a.setUrl(c("inventory_sources")),a.options().success(function(a){var b,c=a.actions.GET.source.choices;for(b=0;b<c.length;b++)"file"!==c[b][0]&&e[f].push({label:""===c[b][0]?"Manual":c[b][1],value:c[b][0]})}).error(function(a,c){b(e,a,c,null,{hdr:"Error!",msg:"Failed to retrieve options for inventory_sources.source. OPTIONS status: "+c})}))}}]).factory("ViewUpdateStatus",["Rest","ProcessErrors","GetBasePath","ShowUpdateStatus","Alert","Wait","Empty","Find",function(a,b,c,d,e,f,g,h){return function(c){var i=c.scope,j=c.tree_id,k=c.group_id,l=h({list:i.groups,key:"id",val:j});l&&(g(l.source)?e("Missing Configuration","The selected group is not configured for inventory sync. You must first edit the group, provide Source settings, and then run the sync process.","alert-info"):g(l.status)||"never updated"===l.status?e("No Status Available",'An inventory sync has not been performed for the selected group. Start the process by clicking the <i class="fa fa-exchange"></i> button.',"alert-info"):(f("start"),a.setUrl(l.related.inventory_source),a.get().success(function(a){var b=a.related.current_update?a.related.current_update:a.related.last_update;d({group_name:a.summary_fields.group.name,last_update:b,license_error:a.summary_fields.last_update&&a.summary_fields.last_update.license_error?!0:!1,tree_id:j,group_id:k,parent_scope:i})}).error(function(a,c){f("stop"),b(i,a,c,null,{hdr:"Error!",msg:"Failed to retrieve inventory source: "+l.related.inventory_source+" POST returned status: "+c})})))}}]).factory("GetHostsStatusMsg",[function(){return function(a){var b,c,d,e=a.active_failures,f=a.total_hosts;return e>0?(b=f+(1===f?" host":" hosts")+". "+e+" with failed jobs.",d="true",c=!0):(c=!1,0===f?(b="Group contains 0 hosts.",d="na"):(b=f+(1===f?" host":" hosts")+". No job failures",d="false")),{tooltip:b,failures:c,"class":d}}}]).factory("GetSyncStatusMsg",[function(){return function(a){var b,c,d,e=a.status,f="",g="Start sync process";switch(b=e,c="icon-cloud-"+b,e){case"never updated":b="never",c="icon-cloud-na disabled",d='Sync not performed. Click <i class="fa fa-exchange"></i> to start it now.';break;case"none":case"":f="btn-disabled",b="n/a",c="icon-cloud-na disabled",d='Cloud source not configured. Click <i class="fa fa-pencil"></i> to update.',g=d;break;case"failed":d="Sync failed. Click to view log.";break;case"successful":d="Sync completed. Click to view log.";break;case"updating":d="Sync running"}return{"class":c,tooltip:d,status:b,launch_class:f,launch_tip:g}}}]).factory("SourceChange",["GetBasePath","CredentialList","LookUpInit","Empty",function(a,b,c,d){return function(e){var f,g,h=e.scope,i=e.form;d(h.source)||("file"===h.source.value?h.sourcePathRequired=!0:(h.sourcePathRequired=!1,h.source_path="",h[i.name+"_form"].source_path.$setValidity("required",!0)),"rax"===h.source.value?(h.source_region_choices=h.rax_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])):"ec2"===h.source.value&&(h.source_region_choices=h.ec2_regions,$("#s2id_group_source_regions").select2("data",[{id:"all",text:"All"}])),("rax"===h.source.value||"ec2"===h.source.value)&&(f="rax"===h.source.value?"rax":"aws",g=a("credentials")+"?cloud=true&kind="+f,c({url:g,scope:h,form:i,list:b,field:"credential"})))}}]).factory("GroupsCancelUpdate",["Rest","ProcessErrors","Alert","Wait","Find",function(a,b,c,d,e){return function(f){var g,h=f.scope,i=f.tree_id;h.removeCancelUpdate&&h.removeCancelUpdate(),h.removeCancelUpdate=h.$on("CancelUpdate",function(e,f){a.setUrl(f),a.post().success(function(){d("stop"),c("Inventory Sync Cancelled",'Your request to cancel the sync process was submitted to the task manger. Click the <i class="fa fa-refresh fa-lg"></i> button to monitor the status.',"alert-info")}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+f+" failed. POST status: "+c})})}),h.removeCheckCancel&&h.removeCheckCancel(),h.removeCheckCancel=h.$on("CheckCancel",function(e,f,g){var i=g?g:f;i+="cancel/",a.setUrl(i),a.get().success(function(a){a.can_cancel?h.$emit("CancelUpdate",i):(d("stop"),c("Cancel Inventory Sync",'Either you do not have access or the sync process completed.<br /> Click the <i class="fa fa-refresh fa-lg"></i> button to view the latest status.',"alert-info"))}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+i+" failed. GET status: "+c})})}),g=e({list:h.groups,key:"id",val:i}),h.selected_tree_id=g.id,h.selected_group_id=g.group_id,!g||"updating"!==g.status&&"pending"!==g.status?c("Cancel Inventory Sync",'The sync process completed. Click the <i class="fa fa-refresh fa-lg"></i> to view the latest status.',"alert-info"):(d("start"),a.setUrl(g.related.inventory_source),a.get().success(function(a){h.$emit("CheckCancel",a.related.last_update,a.related.current_update)}).error(function(a,c){d("stop"),b(h,a,c,null,{hdr:"Error!",msg:"Call to "+g.related.inventory_source+" failed. GET status: "+c})}))}}]).factory("GroupsAdd",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","ParseTypeChange","GroupsEdit","Wait","GetChoices","GetSourceTypeOptions","LookUpInit","BuildTree","SourceChange","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return function(b){var c,d=b.inventory_id,i=void 0!==b.group_id?b.group_id:null,m=b.scope,q=null!==i?k("groups")+i+"/children/":k("inventory")+d+"/groups/",u=g,v=h,w=v.inject(u,{mode:"add",modal:!0,related:!1,show_modal:!1});$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),w.formModalActionLabel="Save",w.formModalCancelShow=!0,w.parseType="yaml",w.source=null,l(w),v.reset(),w.removeAddTreeRefreshed&&w.removeAddTreeRefreshed(),w.removeAddTreeRefreshed=w.$on("GroupTreeRefreshed",function(){a.formModalHeader=null,a.formModalCancleShow=null,a.formModalActionLabel=null,n("stop"),$("#form-modal").modal("hide"),w.removeAddTreeRefreshed()}),w.removeSaveComplete&&w.removeSaveComplete(),w.removeSaveComplete=w.$on("SaveComplete",function(a,b,c){c||(w.searchCleanup&&w.searchCleanup(),w.formModalActionDisabled=!1,r({scope:m,inventory_id:d,refresh:!0,new_group_id:b}),t())}),w.removeFormSaveSuccess&&w.removeFormSaveSuccess(),w.removeFormSaveSuccess=w.$on("formSaveSuccess",function(a,b,c){var d,g,h,i,k=!1,l={};if(null!==w.source.value&&""!==w.source.value){for(l.group=b,l.source=w.source.value,l.source_path=w.source_path,l.credential=w.credential,l.overwrite=w.overwrite,l.overwrite_vars=w.overwrite_vars,l.update_on_launch=w.update_on_launch,d=$("#s2id_group_source_regions").select2("data"),g=[],h=0;h<d.length;h++)g.push(d[h].id);if(l.source_regions=g.join(),"ec2"===w.source.value)try{if(i="json"===w.envParseType?JSON.parse(w.source_vars):jsyaml.load(w.source_vars),"object"!=typeof i)throw"failed to return an object!";l.source_vars=$.isEmptyObject(i)?"":JSON.stringify(i,void 0,"	")}catch(m){k=!0,w.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+m)}k||(e.setUrl(c),e.put(l).success(function(){w.$emit("SaveComplete",b,!1)}).error(function(a,c){w.$emit("SaveComplete",b,!0),j(w,a,c,u,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+c})}))}else w.$emit("SaveComplete",b,!1)}),w.cancelModal=function(){w.searchCleanup&&w.searchCleanup(),t()},w.formModalAction=function(){var a,b;n("start");try{if(w.formModalActionDisabled=!0,a="json"===w.parseType?JSON.parse(w.variables):jsyaml.load(w.variables),"object"!=typeof a)throw"failed to return an object!";b={name:w.name,description:w.description},d&&(b.inventory=d),b.variables=$.isEmptyObject(a)?"":JSON.stringify(a,void 0,"	"),e.setUrl(q),e.post(b).success(function(a){w.$emit("formSaveSuccess",a.id,k("inventory_sources")+a.id+"/")}).error(function(a,b){n("stop"),w.formModalActionDisabled=!1,j(w,a,b,u,{hdr:"Error!",msg:"Failed to add new group. POST returned status: "+b})})}catch(c){n("stop"),w.formModalActionDisabled=!1,f("Error","Error parsing group variables. Parser returned: "+c)}},w.sourceChange=function(){s({scope:w,form:g})},c=0,w.removeChoicesReady&&w.removeChoicesReady(),w.removeChoicesReady=w.$on("choicesReadyGroup",function(){c++,2===c&&($("#form-modal").modal("show"),n("stop"))}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),o({scope:w,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),p({scope:w,variable:"source_type_options"}),n("start")}}]).factory("GroupsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","SetNodeName","ParseTypeChange","GetSourceTypeOptions","InventoryUpdate","LookUpInit","Empty","Wait","GetChoices","UpdateGroup","SourceChange","Find","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return function(a){var b,c=a.scope,d=a.group_id,i=a.tree_id,l=a.inventory_id,p=a.groups_reload,q=h,r=g,y=k("groups")+d+"/",z={},A=q.inject(r,{mode:"edit",modal:!0,related:!1,show_modal:!1});q.reset(),n({scope:A,variable:"source_type_options"}),A.formModalActionLabel="Save",A.formModalHeader="Group",A.formModalCancelShow=!0,A.source=r.fields.source["default"],A.parseType="yaml",A[r.fields.source_vars.parseTypeName]="yaml",A.sourcePathRequired=!1,m(A),m(A,"source_vars",r.fields.source_vars.parseTypeName),A.groupLoadedRemove&&A.groupLoadedRemove(),A.groupLoadedRemove=A.$on("groupLoaded",function(){A.variable_url?(e.setUrl(A.variable_url),e.get().success(function(a){A.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),s("stop")}).error(function(a,b){A.variables=null,s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group variables. GET returned status: "+b})})):A.variables="---",z.variables=A.variables,A.source_url&&(e.setUrl(A.source_url),e.get().success(function(a){var b,c,d,e,f,g,h,i,j;for(b in r.fields){if("checkbox_group"===b)for(c=0;c<r.fields[b].fields.length;c++)e=r.fields[b].fields[c],void 0!==a[e.name]&&(A[e.name]=a[e.name],z[e.name]=A[e.name]);if("source"===b){for(f=!1,c=0;c<A.source_type_options.length;c++)A.source_type_options[c].value===a.source&&(A.source=A.source_type_options[c],f=!0);A.groupUpdateHide=f&&""!==A.source.value?!1:!0,z.source=A.source}else if("update_interval"===b)for((""===a[b]||null===a[b]||void 0===a[b])&&(a[b]=0),c=0;c<A.update_interval_options.length;c++)A.update_interval_options[c].value===a[b]&&(A[b]=A.update_interval_options[c]);else"source_vars"===b?($.isEmptyObject(a.source_vars)||"{}"===a.source_vars||"null"===a.source_vars||""===a.source_vars?A.source_vars="---":(g=JSON.parse(a.source_vars),A.source_vars=jsyaml.safeDump(g)),z.source_vars=A.variables):a[b]&&(A[b]=a[b],z[b]=A[b]);r.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[r.fields[b].sourceModel]&&(A[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField],z[r.fields[b].sourceModel+"_"+r.fields[b].sourceField]=a.summary_fields[r.fields[b].sourceModel][r.fields[b].sourceField])}if(A.sourceChange(),a.source_regions){if("ec2"===a.source||"rax"===a.source){for(h="ec2"===a.source?A.ec2_regions:A.rax_regions,i=[],j=a.source_regions.split(","),c=0;c<j.length;c++)for(d=0;d<h.length;d++)j[c]===h[d].value&&i.push({id:h[d].value,text:h[d].label});z.source_regions=i,$("#s2id_group_source_regions").select2("data",i)}}else z.source_regions=[{id:"all",text:"All"}];A.group_update_url=a.related.update,s("stop")}).error(function(a,b){A.source="",s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve inventory source. GET status: "+b})}))}),A.removeChoicesComplete&&A.removeChoicesComplete(),A.removeChoicesComplete=A.$on("choicesCompleteGroup",function(){e.setUrl(y),e.get().success(function(a){for(var b in r.fields)a[b]&&(A[b]=a[b],z[b]=A[b]);A.variable_url=a.related.variable_data,A.source_url=a.related.inventory_source,$("#form-modal").modal("show"),A.$emit("groupLoaded")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to retrieve group: "+y+". GET status: "+b})})}),b=0,A.removeChoicesReady&&A.removeChoicesReady(),A.removeChoicesReady=A.$on("choicesReadyGroup",function(){b++,2===b&&A.$emit("choicesCompleteGroup")}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"rax_regions",choice_name:"rax_region_choices",callback:"choicesReadyGroup"}),t({scope:A,url:k("inventory_sources"),field:"source_regions",variable:"ec2_regions",choice_name:"ec2_region_choices",callback:"choicesReadyGroup"}),s("start"),A.removeSaveComplete&&A.removeSaveComplete(),A.removeSaveComplete=A.$on("SaveComplete",function(a,b){if(!b){if(p)u({scope:c,group_id:d,properties:{name:A.name,description:A.description,has_inventory_sources:A.source&&A.source.value?!0:!1,source:A.source&&A.source.value?A.source.value:""}});else if(A.home_groups){var e=w({list:c.home_groups,key:"id",val:d});e&&(e.name=A.name,e.description=A.description)}A.searchCleanUp&&A.searchCleanup(),A.formModalActionDisabled=!1,$("#form-modal").modal("hide"),p&&c.selected_tree_id!==i?c.showHosts(i,d,!1):s("stop"),x()}}),A.removeFormSaveSuccess&&A.removeFormSaveSuccess(),A.removeFormSaveSuccess=A.$on("formSaveSuccess",function(){var a,b,c,g,h=!1,i={group:d,source:A.source&&A.source.value?A.source.value:"",source_path:A.source_path,credential:A.credential,overwrite:A.overwrite,overwrite_vars:A.overwrite_vars,update_on_launch:A.update_on_launch};for(a=$("#s2id_group_source_regions").select2("data"),b=[],c=0;c<a.length;c++)b.push(a[c].id);if(i.source_regions=b.join(),A.source&&"ec2"===A.source.value)try{if(g="json"===A.envParseType?JSON.parse(A.source_vars):jsyaml.load(A.source_vars),"object"!=typeof g)throw"failed to return an object!";i.source_vars=$.isEmptyObject(g)?"":JSON.stringify(g)}catch(k){h=!0,A.$emit("SaveComplete",!0),f("Error","Error parsing extra variables. Parser returned: "+k)}h||(e.setUrl(A.source_url),e.put(i).success(function(){A.$emit("SaveComplete",!1)}).error(function(a,b){A.$emit("SaveComplete",!0),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group inventory source. PUT status: "+b})}))}),A.cancelModal=function(){A.searchCleanup&&A.searchCleanup(),x()},A.formModalAction=function(){s("start");try{var a,b,c;if(c="json"===A.parseType?JSON.parse(A.variables):jsyaml.load(A.variables),"object"!=typeof c)throw"failed to return an object!";b={};for(a in r.fields)b[a]=A[a];b.inventory=l,e.setUrl(y),e.put(b).success(function(){A.variables?(e.setUrl(A.variable_url),e.put(c).success(function(){A.$emit("formSaveSuccess")}).error(function(a,b){j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group variables. PUT status: "+b})})):A.$emit("formSaveSuccess")}).error(function(a,b){s("stop"),j(A,a,b,r,{hdr:"Error!",msg:"Failed to update group: "+d+". PUT status: "+b})})}catch(g){s("stop"),f("Error","Error parsing group variables. Parser returned: "+g)}},A.updateGroup=function(){""===A.source||null===A.source?f("Missing Configuration","The selected group is not configured for updates. You must first edit the group, provide Source settings, and then run an update.","alert-info"):"updating"===A.status?f("Update in Progress","The inventory update process is currently running for group <em>"+A.summary_fields.group.name+"</em>. Use the Refresh button to monitor the status.","alert-info"):o({scope:A,group_id:d,url:A.group_update_url,group_name:A.name,group_source:A.source.value})},A.sourceChange=function(){v({scope:A,form:g})}}}]).factory("GroupsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","GroupForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","Wait","BuildTree","Find",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return function(a){var b,c=a.scope,d=a.tree_id,f=a.inventory_id,g=n({list:c.groups,key:"id",val:d}),h=k("inventory")+f+"/groups/";b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){l("start")}),$("#prompt-modal").modal("hide"),e.setUrl(h),e.post({id:g.group_id,disassociate:1}).success(function(){$("#prompt-modal").off(),c.$emit("GroupDeleteCompleted")}).error(function(a,b){l("stop"),j(c,a,b,null,{hdr:"Error!",msg:"Call to "+h+" failed. POST returned status: "+b})})},i({hdr:"Delete Group",body:"<p>Are you sure you want to delete group <em>"+g.name+"?</p>",action:b,"class":"btn-danger"})}}]).factory("ShowUpdateStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","InventoryStatusForm","Wait","Empty","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){function b(a){var b,d;return b=a.match(/\n/g),d=b?b.length:1,d>c?c:d}var c,d,h,j,n,p,q,r=a.group_name,s=a.last_update,t=g,u=l,v=a.license_error;void 0===s||null===s||""===s?(m("stop"),f("Missing Configuration","The selected group is not configured for inventory sync. Edit the group and provide Source information.","alert-info")):(d='<div id="status-modal-dialog" title="'+r+'- Inventory Sync">\n<div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(d),h=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),j=$(document).width(),n=$("body").height(),j>1199?(p=675,q=750>n?n-20:750,c=18):1199>=j&&j>=768?(p=550,q=620>n?n-15:620,c=12):(p=j-20,q=500>n?n:500,c=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:p,height:q,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),o()},open:function(){m("stop")}}),e.setUrl(s),e.get().success(function(a){for(var c in u.fields)a[c]&&(h[c]="created"===c?k(new Date(a[c])):a[c]);h.license_error=v,h.status_rows=b(a.status),h.stdout_rows=b(a.result_stdout),h.traceback_rows=b(a.result_traceback),$("#status-modal-dialog").dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(h,a,b,null,{hdr:"Error!",msg:"Failed to retrieve last update: "+s+". GET status: "+b})}))}}]),angular.module("HostsHelper",["RestServices","Utilities","ListGenerator","HostListDefinition","SearchHelper","PaginationHelpers","ListGenerator","AuthService","HostsHelper","InventoryHelper","RelatedSearchHelper","InventoryFormDefinition","SelectionHelper","HostGroupsFormDefinition"]).factory("SetEnabledMsg",[function(){return function(a){a.enabledToolTip=a.has_inventory_sources?a.enabled?"Host is available":"Host is not available":a.enabled?"Host is available. Click to toggle.":"Host is not available. Click to toggle."}}]).factory("SetHostStatus",["SetEnabledMsg",function(a){return function(b){b.activeFailuresLink="/#/hosts/"+b.id+"/job_host_summaries/?inventory="+b.inventory+"&host_name="+encodeURI(b.name),b.has_active_failures===!0?(b.badgeToolTip="Most recent job failed. Click to view jobs.",b.active_failures="failed"):b.has_active_failures===!1&&null===b.last_job?(b.has_active_failures="none",b.badgeToolTip="No job data available.",b.active_failures="n/a"):b.has_active_failures===!1&&null!==b.last_job&&(b.badgeToolTip="Most recent job successful. Click to view jobs.",b.active_failures="success"),b.enabled_flag=b.enabled,a(b)}}]).factory("SetStatus",["SetEnabledMsg","Empty",function(a,b){return function(c){function d(a){return a.length>25?a.substr(0,25)+"...":a}function e(a){var b,c,e;if(a.has_active_failures===!0||a.has_active_failures===!1&&null!==a.last_job)if(a.has_active_failures===!0?(a.badgeToolTip="Most recent job failed. Click to view jobs.",a.active_failures="failed"):(a.badgeToolTip="Most recent job successful. Click to view jobs.",a.active_failures="success"),a.summary_fields.recent_jobs.length>0){for(e=a.summary_fields.recent_jobs.sort(function(a,b){return-1*(a-b)}),h="Recent Jobs",g='<table class="table table-condensed host-flyout" style="width: 100%">\n',g+="<thead>\n",g+="<tr>\n",g+="<th>ID</td>\n",g+='<th class="text-center">Status</td>\n',g+="<th>View</th>\n",g+="<th>Name</td>\n",g+="</tr>\n",g+="</thead>\n",g+="<tbody>\n",b=0;b<e.length;b++)c=e[b],g+="<tr>\n",g+='<td><a href="/#/jobs/'+c.id+'">'+c.id+"</a></td>\n",g+='<td class="text-center"><a ng-click="showJobSummary('+c.id+')" aw-tool-tip="'+c.status.charAt(0).toUpperCase()+c.status.slice(1)+'. Click for details" data-placement="top"><i class="fa icon-job-'+c.status+'"></i></a></td>\n',g+='<td><a href="/#/jobs/'+c.id+"/job_events/?host="+encodeURI(a.name)+'">Events</a> <a href="/#/jobs/'+c.id+"/job_host_summaries/?host_name="+encodeURI(a.name)+'">Hosts</a></td>\n',g+='<td class="break">'+d(c.name)+"</td>\n",g+="</tr>\n";g+="</tbody>\n",g+="</table>\n"}else h="No job data",g="<p>No recent job data available for this host.</p>";else a.has_active_failures===!1&&null===a.last_job&&(a.has_active_failures="none",a.badgeToolTip="No job data available.",a.active_failures="n/a");a.job_status_html=g,a.job_status_title=h}var f,g,h,i=c.scope,j=c.host;if(b(j))for(f=0;f<i.hosts.length;f++)e(i.hosts[f]),a(i.hosts[f]);else e(j),a(j)}}]).factory("HostsReload",["$routeParams","Empty","InventoryHosts","GetBasePath","SearchInit","PaginateInit","Wait","SetHostStatus","SetStatus","ApplyEllipsis",function(a,b,c,d,e,f,g,h,i,j){return function(h){var k=h.scope,l=h.group_id,m=h.inventory_id,n=c,o=b(l)?d("inventory")+m+"/hosts/":d("groups")+l+"/all_hosts/";k.search_place_holder="Search "+k.selected_group_name,k.removePostRefresh&&k.removePostRefresh(),k.removePostRefresh=k.$on("PostRefresh",function(){for(var a=0;a<k.hosts.length;a++)k.hosts[a].enabled_flag=k.hosts[a].enabled;i({scope:k}),setTimeout(function(){j("#hosts_table .host-name a")},2500),g("stop"),k.$emit("HostReloadComplete")}),e({scope:k,set:"hosts",list:n,url:o}),f({scope:k,list:n,url:o}),a.host_name&&(k[n.iterator+"InputDisable"]=!1,k[n.iterator+"SearchValue"]=a.host_name,k[n.iterator+"SearchField"]="name",k[n.iterator+"SearchFieldLabel"]=n.fields.name.label,k[n.iterator+"SearchSelectValue"]=null),k.show_failures&&(k[n.iterator+"InputDisable"]=!0,k[n.iterator+"SearchValue"]="true",k[n.iterator+"SearchField"]="has_active_failures",k[n.iterator+"SearchFieldLabel"]=n.fields.has_active_failures.label,k[n.iterator+"SearchSelectValue"]={value:1}),k.search(n.iterator)
}}]).factory("InjectHosts",["GenerateList","InventoryHosts","HostsReload",function(a,b,c){return function(d){var e=d.scope,f=d.inventory_id,g=d.group_id,h=d.tree_id,i=a;i.inject(b,{scope:e,mode:"edit",id:"hosts-container",breadCrumbs:!1,searchSize:"col-lg-6 col-md-6 col-sm-6"}),c({scope:e,group_id:g,tree_id:h,inventory_id:f})}}]).factory("ToggleHostEnabled",["GetBasePath","Rest","Wait","ProcessErrors","Alert","Find","SetEnabledMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){a.enabled=a.enabled?!1:!0,a.enabled_flag=a.enabled,g(a)}var j,k=h.host_id,l=h.external_source,m=h.scope;l?e("Action Not Allowed","This host is part of a cloud inventory. It can only be disabled in the cloud. After disabling it, run an inventory sync to see the new status reflected here.","alert-info"):(c("start"),j=f({list:m.hosts,key:"id",val:k}),i(j),b.setUrl(a("hosts")+k+"/"),b.put(j).success(function(){c("stop")}).error(function(a,b){i(j),c("stop"),d(m,a,b,null,{hdr:"Error!",msg:"Failed to update host. PUT returned status: "+b})}))}}]).factory("HostsList",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostList","GenerateList","Prompt","SearchInit","PaginateInit","ProcessErrors","GetBasePath","HostsAdd","HostsReload","SelectionInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return function(a){var b,c,d=a.inventory_id,e=a.group_id,f=g,i=h;f.iterator="subhost",f.name="subhosts",c=i.inject(f,{id:"form-modal-body",mode:"select",breadCrumbs:!1,selectButton:!1}),b=m("inventory")+d+"/hosts/?not__groups__id="+c.group_id,c.formModalActionLabel="Select",c.formModalHeader="Add Existing Hosts",c.formModalCancelShow=!0,p({scope:c,list:f,url:m("groups")+e+"/hosts/"}),c.removeModalClosed&&c.removeModalClosed(),c.removeModalClosed=c.$on("modalClosed",function(){o(a)}),$(".popover").popover("hide"),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),$("#form-modal").modal({backdrop:"static",keyboard:!1}),j({scope:c,set:"subhosts",list:f,url:b}),k({scope:c,list:f,url:b,mode:"lookup"}),c.search(f.iterator),c.$$phase||c.$digest(),c.createHost=function(){$("#form-modal").modal("hide"),n({scope:a.scope,inventory_id:d,group_id:e})}}}]).factory("HostsCreate",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return function(a){var b=a.scope,c=b.inventory_id,d=b.selected_group_id,i=k("groups")+d+"/hosts/",p=g,q=h,r=q.inject(p,{mode:"add",modal:!0,related:!1}),s={};r.formModalActionLabel="Save",r.formModalHeader="Create New Host",r.formModalCancelShow=!0,r.parseType="yaml",m(r),r.removeHostsReload&&r.removeHostsReload(),r.removeHostsReload=r.$on("hostsReload",function(){l(a)}),$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),q.reset(),s={},r.$$phase||r.$digest(),r.removeHostSaveComplete&&r.removeHostSaveComplete(),r.removeHostSaveComplete=r.$on("HostSaveComplete",function(){n("stop"),$("#form-modal").modal("hide"),l({scope:b,group_id:b.selected_group_id,tree_id:b.selected_tree_id,inventory_id:b.inventory_id}),o()}),r.formModalAction=function(){n("start");try{var a,b,d={};if(r.formModalActionDisabled=!0,b="json"===r.parseType?JSON.parse(r.variables):jsyaml.load(r.variables),"object"!=typeof b)throw"failed to return an object!";for(a in p.fields)"variables"!==a&&(d[a]=r[a]);d.inventory=c,d.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(i),e.post(d).success(function(){r.$emit("HostSaveComplete")}).error(function(a,b){n("stop"),r.formModalActionDisabled=!1,j(r,a,b,p,{hdr:"Error!",msg:"Failed to add new host. POST returned status: "+b})})}catch(g){n("stop"),r.formModalActionDisabled=!1,f("Error","Error parsing host variables. Parser returned: "+g)}},r.formReset=function(){q.reset()},r.cancelModal=function(){o()}}}]).factory("HostsEdit",["$rootScope","$location","$log","$routeParams","Rest","Alert","HostForm","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait","Find","SetStatus","ApplyEllipsis","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(a){var b=a.scope,c=a.host_id,d=a.inventory_id,i=h,l=g,s=k("hosts")+c+"/",t=i.inject(l,{mode:"edit",modal:!0,related:!1,show_modal:!1}),u={},v={};i.reset(),t.formModalActionLabel="Save",t.formModalHeader="Host Properties",t.formModalCancelShow=!0,t.parseType="yaml",m(t),t.hostLoadedRemove&&t.hostLoadedRemove(),t.hostLoadedRemove=t.$on("hostLoaded",function(){t.variable_url?(e.setUrl(t.variable_url),e.get().success(function(a){t.variables=$.isEmptyObject(a)?"---":jsyaml.safeDump(a),n("stop"),$("#form-modal").modal("show")}).error(function(a,b){t.variables=null,j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host variables. GET returned status: "+b})})):(t.variables="---",n("stop"),$("#form-modal").modal("show")),u.variables=t.variables}),n("start"),e.setUrl(s),e.get().success(function(a){var b,c,d;for(c in l.fields)a[c]&&(t[c]=a[c],u[c]=t[c]);d=a.related;for(b in l.related)d[b]&&(v[b]={url:d[b],iterator:l.related[b].iterator});t.variable_url=a.related.variable_data,t.$emit("hostLoaded")}).error(function(a,b){j(t,a,b,l,{hdr:"Error!",msg:"Failed to retrieve host: "+c+". GET returned status: "+b})}),t.removeSaveCompleted&&t.removeSaveCompleted(),t.removeSaveCompleted=t.$on("saveCompleted",function(){var a=o({list:b.hosts,key:"id",val:c}),d=a.name;a.name=t.name,a.enabled=t.enabled,a.enabled_flag=t.enabled,p({scope:b,host:a}),d?setTimeout(function(){$('#hosts_table .host-name a[title="'+d+'"').attr("title",a.name),q("#hosts_table .host-name a"),n("stop"),$("#form-modal").modal("hide")},2e3):(n("stop"),$("#form-modal").modal("hide")),r()}),t.formModalAction=function(){n("start");try{var a,b,g={};if(b="json"===t.parseType?JSON.parse(t.variables):jsyaml.load(t.variables),"object"!=typeof b)throw"failed to return an object!";for(a in l.fields)g[a]=t[a];g.inventory=d,g.variables=$.isEmptyObject(b)?"":JSON.stringify(b,void 0,"	"),e.setUrl(s),e.put(g).success(function(){t.$emit("saveCompleted")}).error(function(a,b){n("stop"),j(t,a,b,l,{hdr:"Error!",msg:"Failed to update host: "+c+". PUT returned status: "+b})})}catch(h){n("stop"),f("Error","Error parsing host variables. Parser returned: "+h)}},t.formReset=function(){i.reset();for(var a in u)t[a]=u[a];t.parseType="yaml"},t.cancelModal=function(){r()}}}]).factory("HostsDelete",["$rootScope","$location","$log","$routeParams","Rest","Alert","Prompt","ProcessErrors","GetBasePath","HostsReload","Wait","Find",function(a,b,c,d,e,f,g,h,i,j,k,l){return function(a){var b,c,d=a.scope,f=a.host_id,j=a.host_name,m=null===d.selected_group_id?i("inventory")+d.inventory_id+"/hosts/":i("groups")+d.selected_group_id+"/hosts/",n=d.selected_tree_id?l({list:d.groups,key:"id",val:d.selected_tree_id}):null;d.removeHostsReload&&d.removeHostsReload(),d.removeHostsReload=d.$on("hostsReload",function(){d.showHosts(d.selected_tree_id,d.selected_group_id,!1)}),b=function(){$("#prompt-modal").on("hidden.bs.modal",function(){k("start")}),$("#prompt-modal").modal("hide"),e.setUrl(m),e.post({id:f,disassociate:1}).success(function(){d.$emit("hostsReload")}).error(function(a,b){k("stop"),h(d,a,b,null,{hdr:"Error!",msg:"Attempt to delete "+j+" failed. POST returned status: "+b})})},c=n?"<p>Are you sure you want to delete host <em>"+j+"</em> from group <em>"+n.name+"</em>?</p>":"<p>Are you sure you want to delete host <em>"+j+"</em>?</p>",g({hdr:"Delete Host",body:c,action:b,"class":"btn-danger"})}}]).factory("EditHostGroups",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","HostsReload","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,l=a.host_id,n=a.inventory_id,o=g,p=[];for(c='<div class="row host-groups">\n',c+='<div class="col-lg-6">\n',c+="<label>Available Groups:</label>\n",c+='<select multiple class="form-control" name="available-groups" ng-model="selectedGroups" ng-change="leftChange()" ng-options="avail_group.name for avail_group in available_groups"></select>\n',c+="</div>\n",c+='<div class="col-lg-6">\n',c+="<label>Belongs to Groups:</label>\n",c+='<select multiple class="form-control" name="selected-groups" ng-model="assignedGroups" ng-change="rightChange()" ng-options="host_group.name for host_group in host_groups"></select>\n',c+="</div>\n",c+="</div>\n",c+='<div class="row host-group-buttons">\n',c+='<div class="col-lg-12">\n',c+='<button type="button" ng-click="moveLeft()" class="btn btn-sm btn-primary left-button" ng-disabled="leftButtonDisabled"><i class="icon-arrow-left"></i></button>\n',c+='<button type="button" ng-click="moveRight()" class="btn btn-sm btn-primary right-button" ng-disabled="rightButtonDisabled"><i class="icon-arrow-right"></i></button>\n',c+="<p>(move selected groups)</p>\n",c+="</div>\n",c+="</div>\n",d=j("hosts")+l+"/",f=o.inject(null,{mode:"edit",modal:!0,related:!1,html:c}),b=0;b<f.hosts.length;b++)f.hosts[b].id===l&&(f.host=f.hosts[b]);f.selectedGroups=null,f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionLabel="Save",f.formModalHeader=f.host.name+' - <span class="subtitle">Groups</span>',f.formModalCancelShow=!0,f.formModalActionDisabled=!0,$("#form-modal .btn-none").removeClass("btn-none").addClass("btn-success"),f.hostGroupChangeRemove&&f.hostGroupChangeRemove(),f.hostGroupChangeRemove=f.$on("hostGroupChange",function(){p.pop(),0===p.length&&(h=function(){setTimeout(function(){m("stop")},500)},k({scope:f,inventory_id:n,group_id:f.group_id,action:h}))}),f.formModalAction=function(){var a,b,c;for($("#form-modal").modal("hide"),m("start"),a=0;a<f.original_groups.length;a++){for(c=!1,b=0;b<f.host_groups.length;b++)f.original_groups[a].id===f.host_groups[b].id&&(c=!0);c||(p.push({group_id:f.original_groups[a].id,action:"delete"}),e.setUrl(j("groups")+f.original_groups[a].id+"/hosts/"),e.post({id:l,disassociate:1}).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to remove host from group "+f.original_groups[a].name+" failed. POST returned status: "+c})}))}for(a=0;a<f.host_groups.length;a++){for(c=!1,b=0;b<f.original_groups.length;b++)f.original_groups[b].id===f.host_groups[a].id&&(c=!0);c||(p.push({group_id:f.host_groups[a].id,action:"add"}),e.setUrl(j("groups")+f.host_groups[a].id+"/hosts/"),e.post(f.host).success(function(){f.$emit("hostGroupChange")}).error(function(b,c){f.$emit("hostGroupChange"),i(f,b,c,null,{hdr:"Error!",msg:"Attempt to add host to group "+f.host_groups[a].name+" failed. POST returned status: "+c})}))}},f.leftChange=function(){null!==f.selectedGroups&&f.selectedGroups.length>0?(f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!1):f.rightButtonDisabled=!0},f.rightChange=function(){null!==f.assignedGroups&&f.assignedGroups.length>0?(f.selectedGroups=null,f.leftButtonDisabled=!1,f.rightButtonDisabled=!0):f.leftButtonDisabled=!0},f.moveLeft=function(){var a,b,c,d;for(a=0;a<f.assignedGroups.length;a++)for(b=0;b<f.host_groups.length;b++)if(f.host_groups[b].id===f.assignedGroups[a].id){f.host_groups.splice(b,1);break}for(a=0;a<f.assignedGroups.length;a++){for(c=!1,b=0;b<f.available_groups.length&&!c;b++)f.available_groups[b].id===f.assignedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.available_groups.length&&!d;b++)0===b&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b].name.toLowerCase()?(d=!0,f.available_groups.unshift(f.assignedGroups[a])):b+1<f.available_groups.length&&f.assignedGroups[a].name.toLowerCase()>f.available_groups[b].name.toLowerCase()&&f.assignedGroups[a].name.toLowerCase()<f.available_groups[b+1].name.toLowerCase()&&(d=!0,f.available_groups.splice(b+1,0,f.assignedGroups[a]));d||f.available_groups.push(f.assignedGroups[a])}}f.assignedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.moveRight=function(){var a,b,c,d;for(a=0;a<f.selectedGroups.length;a++)for(b=0;b<f.available_groups.length;b++)if(f.available_groups[b].id===f.selectedGroups[a].id){f.available_groups.splice(b,1);break}for(a=0;a<f.selectedGroups.length;a++){for(c=!1,b=0;b<f.host_groups.length&&!c;b++)f.host_groups[b].id===f.selectedGroups[a].id&&(c=!0);if(!c){for(d=!1,b=0;b<f.host_groups.length&&!d;b++)0===b&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b].name.toLowerCase()?(d=!0,f.host_groups.unshift(f.selectedGroups[a])):b+1<f.host_groups.length&&f.selectedGroups[a].name.toLowerCase()>f.host_groups[b].name.toLowerCase()&&f.selectedGroups[a].name.toLowerCase()<f.host_groups[b+1].name.toLowerCase()&&(d=!0,f.host_groups.splice(b+1,0,f.selectedGroups[a]));d||f.host_groups.push(f.selectedGroups[a])}}f.selectedGroups=null,f.leftButtonDisabled=!0,f.rightButtonDisabled=!0,f.formModalActionDisabled=!1},f.host_groups=[],f.original_groups=[],f.available_groups=[],e.setUrl(f.host.related.groups+"?order_by=name"),e.get().success(function(a){var b,c,d;for(b=0;b<a.results.length;b++)f.host_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description}),f.original_groups.push({id:a.results[b].id,name:a.results[b].name,description:a.results[b].description});for(b=0;b<f.inventory_groups.length;b++){for(d=!1,c=0;c<f.host_groups.length;c++)f.inventory_groups[b].id===f.host_groups[c].id&&(d=!0);d||f.available_groups.push(f.inventory_groups[b])}}).error(function(a,b){i(f,a,b,null,{hdr:"Error!",msg:"Failed to get current groups for host: "+l+". GET returned: "+b})}),f.removeHostsReload&&f.removeHostsReload(),f.removeHostsReload=f.$on("hostsReload",function(){k(a)}),f.$$phase||f.$digest()}}]),angular.module("JobSubmissionHelper",["RestServices","Utilities","CredentialFormDefinition","CredentialsListDefinition","LookUpHelper","ProjectFormDefinition","JobSubmissionHelper"]).factory("PromptPasswords",["CredentialForm","JobTemplateForm","$compile","Rest","$location","ProcessErrors","GetBasePath","Alert","Empty","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(a){function b(a){a?e.path("/"+v):"jobs"===v?q.refreshJob():e.path("/jobs")}function k(){var a=g("jobs")+q.job_id+"/";d.setUrl(a),d.destroy().success(function(){"credential"===t.name&&b(!0)}).error(function(b,c){f(q,b,c,null,{hdr:"Error!",msg:"Call to "+a+" failed. DELETE returned status: "+c})})}var l,m,n,o,p,q=a.scope,r=a.passwords,s=a.start_url,t=a.form,u="",v=e.path().replace(/^\//,"").split("/")[0],w=a.extra_html;if(q.cancelJob=function(){$("#password-modal").modal("hide"),"credential"===t.name?k():q.$emit("UpdateSubmitted","canceled")},q.startJob=function(){var a={},c=!1;$("#password-modal").modal("hide"),j("start"),$(".password-field").each(function(){a[$(this).attr("name")]=$(this).val(),""!==$(this).val()&&null!==$(this).val()&&(c=!0)}),i(r)||0===r.length||c?(d.setUrl(s),d.post(a).success(function(){q.$emit("UpdateSubmitted","started"),"credential"===t.name&&b(!1)}).error(function(a,b){j("stop"),f(q,a,b,null,{hdr:"Error!",msg:"POST to "+s+" failed with status: "+b})})):(j("stop"),h("No Passwords","Required password(s) not provided. The request was not submitted.","alert-info"),"credential"===t.name&&q.cancelJob())},r&&r.length>0){for(j("stop"),u+='<form class="form-horizontal" name="password_form" novalidate>\n',u+=w?w:"",o=0;o<r.length;o++)"credential"===t.name?t.fields[r[o]]?p=t:(h("Form Not Found","Could not locate form for: "+r[o],"alert-danger"),e("/#/jobs")):p=t,l=p.fields[r[o]],n=r[o],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="password-field form-control" ',u+="required ",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n",n=l.associated,l=p.fields[l.associated],q[n]="",u+='<div class="form-group">\n',u+='<label class="control-label col-lg-3 normal-weight" for="'+n+'">* ',u+=l.labelBind?q[l.labelBind]:l.label,u+="</label>\n",u+='<div class="col-lg-9">\n',u+='<input type="password" ',u+='ng-model="'+n+'" ',u+='name="'+n+'" ',u+='class="form-control" ',u+="required ",u+=l.awPassMatch?'awpassmatch="'+l.associated+'" ':"",u+="/>",u+="<br />\n",u+='<span class="error" ng-show="password_form.'+n+".$dirty && password_form."+n+'.$error.required">A value is required!</span>\n',l.awPassMatch&&(u+='<span class="error" ng-show="password_form.'+n+'.$error.awpassmatch">Must match Password value</span>\n'),u+='<span class="error api-error" ng-bind="'+n+'_api_error"></span>\n',u+="</div>\n",u+="</div>\n";u+="</form>\n",m=angular.element(document.getElementById("password-body")),m.html(u),c(m.contents())(q),$("#password-modal").modal(),$("#password-modal").on("shown.bs.modal",function(){$("#password-body").find('input[type="password"]:first').focus()})}else q.startJob()}}]).factory("SubmitJob",["PromptPasswords","$compile","Rest","$location","GetBasePath","CredentialList","LookUpInit","CredentialForm","ProcessErrors","JobTemplateForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k){return function(b){function l(b){var e,f,g;m.credentialWatchRemove&&m.credentialWatchRemove(),e=(new Date).toISOString(),f=b.related.jobs?b.related.jobs:b.related.job_template+"jobs/",g=o?o:b.name,k("start"),c.setUrl(f),c.post({name:g+" "+e,description:b.description,job_template:b.id,inventory:b.inventory,project:b.project,playbook:b.playbook,credential:b.credential,forks:b.forks,limit:b.limit,verbosity:b.verbosity,extra_vars:b.extra_vars}).success(function(b){m.job_id=b.id,b.passwords_needed_to_start.length>0?a({scope:m,passwords:b.passwords_needed_to_start,start_url:b.related.start,form:h}):(c.setUrl(b.related.start),c.post().success(function(){k("stop");var a=d.path().replace(/^\//,"").split("/")[0];"jobs"===a?m.refresh():d.path("/jobs")}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to start job. POST returned status: "+b})}))}).error(function(a,b){k("stop"),i(m,a,b,null,{hdr:"Error!",msg:"Failed to create job. POST returned status: "+b})})}var m=b.scope,n=b.id,o=b.template?b.template:null,p=d.path().replace(/^\//,"").split("/")[0],q=e(p)+n+"/";k("start"),c.setUrl(q),c.get().success(function(a){m.credential="",""===a.credential||null===a.credential?(k("stop"),m.credentialWatchRemove&&m.credentialWatchRemove(),m.credentialWatchRemove=m.$watch("credential",function(b,c){b!==c&&""!==m.credential&&null!==m.credential&&void 0!==m.credential&&(a.credential=m.credential,l(a))}),g({scope:m,form:j,current_item:null,list:f,field:"credential",hdr:"Credential Required"}),m.lookUpCredential()):l(a)}).error(function(a,b){i(m,a,b,null,{hdr:"Error!",msg:"Failed to get job template details. GET returned status: "+b})})}}]).factory("ProjectUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","ProjectsForm","Wait",function(a,b,c,d,e,f,g,h,i){return function(b){var d=b.scope,j=b.project_id,k=e("projects")+j+"/update/";d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(){i("stop"),g("Update Started","The request to start the SCM update process was submitted. To monitor the update status, refresh the page by clicking the <em>Refresh</em> button.","alert-info"),d.refresh()}),d.removeSCMSubmit&&d.removeSCMSubmit(),d.removeSCMSubmit=d.$on("SCMSubmit",function(b,c,e){a({scope:d,passwords:c,start_url:k,form:h,extra_html:e})}),i("start"),c.setUrl(k),c.get().success(function(a){var b,c;if(i("stop"),a.can_update){for(c="",b=0;b<d.projects.length;b++)if(d.projects[b].id===j){c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_url">SCM URL</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_url" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_url+'" ',c+="/>",c+="</div>\n",c+="</div>\n",d.projects[b].scm_username&&(c+='<div class="form-group">\n',c+='<label class="control-label col-lg-3 normal-weight" for="scm_username">SCM Username</label>\n',c+='<div class="col-lg-9">\n',c+='<input type="text" readonly',c+=' name="scm_username" ',c+='class="form-control" ',c+='value="'+d.projects[b].scm_username+'" ',c+="/>",c+="</div>\n",c+="</div>\n");break}c+="</p>",d.$emit("SCMSubmit",a.passwords_needed_to_update,c)}else g("Permission Denied","You do not have access to update this project. Please contact your system administrator.","alert-danger")}).error(function(a,b){f(d,a,b,null,{hdr:"Error!",msg:"Failed to get project update details: "+k+" GET status: "+b})})}}]).factory("InventoryUpdate",["PromptPasswords","$compile","Rest","$location","GetBasePath","ProcessErrors","Alert","GroupForm","BuildTree","Wait",function(a,b,c,d,e,f,g,h,i,j){return function(b){var d=b.scope,e=b.url,i=b.group_id,k=b.tree_id;d.removeHostReloadComplete&&d.removeHostReloadComplete(),d.removeHostReloadComplete=d.$on("HostReloadComplete",function(){j("stop"),g("Update Started",'Your request to start the inventory sync process was submitted. Monitor progress by clicking the <i class="fa fa-refresh fa-lg"></i> button.',"alert-info"),d.removeHostReloadComplete&&d.removeHostReloadComplete()}),d.removeUpdateSubmitted&&d.removeUpdateSubmitted(),d.removeUpdateSubmitted=d.$on("UpdateSubmitted",function(a,b){"started"===b&&(d.refreshGroups?(d.selected_tree_id=k,d.selected_group_id=i,d.refreshGroups()):d.refresh&&d.refresh(),d.$emit("HostReloadComplete"))}),d.removeInventorySubmit&&d.removeInventorySubmit(),d.removeInventorySubmit=d.$on("InventorySubmit",function(b,c,f){a({scope:d,passwords:c,start_url:e,form:h,extra_html:f})}),j("start"),c.setUrl(e),c.get().success(function(a){a.can_update?d.$emit("InventorySubmit",a.passwords_needed_to_update):(j("stop"),g("Permission Denied","You do not have access to run the update. Please contact your system administrator.","alert-danger"))}).error(function(a,b){j("stop"),f(d,a,b,null,{hdr:"Error!",msg:"Failed to get inventory_source details. "+e+"GET status: "+b})})}}]),angular.module("JobsHelper",["Utilities","FormGenerator","JobSummaryDefinition","InventoryHelper"]).factory("JobStatusToolTip",[function(){return function(a){var b;switch(a){case"successful":case"success":b="There were no failed tasks.";break;case"failed":b="Some tasks encountered errors.";break;case"canceled":b="Stopped by user request.";break;case"new":b="In queue, waiting on task manager.";break;case"waiting":b="SCM Update or Inventory Update is executing.";break;case"pending":b="Not in queue, waiting on task manager.";break;case"running":b="Playbook tasks executing."}return b}}]).factory("ShowJobSummary",["Rest","Wait","GetBasePath","FormatDate","ProcessErrors","GenerateForm","JobSummary","WatchInventoryWindowResize",function(a,b,c,d,e,f,g,h){return function(i){function j(a){var b=a.match(/\n/g),c=b?b.length:1;return c>p?20:c}var k,l,m,n,o,p,q,r,s=i.job_id,t=f,u=g;r='<div id="status-modal-dialog" title="Job '+s+'"><div id="form-container" style="width: 100%;"></div></div>\n',$("#inventory-modal-container").empty().append(r),k=t.inject(u,{mode:"edit",id:"form-container",breadCrumbs:!1,related:!1}),l=$(document).width(),m=$("body").height(),l>1199?(n=675,o=750>m?m-20:750,p=20):1199>=l&&l>=768?(n=550,o=620>m?m-15:620,p=15):(n=l-20,o=500>m?m:500,p=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:n,height:o,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#inventory-modal-container").empty(),h()},open:function(){b("stop")}}),b("start"),q=c("jobs")+s+"/",a.setUrl(q),a.get().success(function(a){var b;k.id=a.id,k.name=a.name,k.status=a.status,k.result_stdout=a.result_stdout,k.result_traceback=a.result_traceback,k.stdout_rows=j(k.result_stdout),k.traceback_rows=j(k.result_traceback),b=new Date(a.created),k.created=d(b),$("#status-modal-dialog").dialog("open")}).error(function(a,b){e(k,a,b,null,{hdr:"Error!",msg:"Attempt to load job failed. GET returned status: "+b})})}}]),angular.module("LookUpHelper",["RestServices","Utilities","SearchHelper","PaginationHelpers","ListGenerator","ApiLoader"]).factory("LookUpInit",["Alert","Rest","GenerateList","SearchInit","PaginateInit","GetBasePath","FormatDate","Empty",function(a,b,c,d,e,f,g,h){return function(b){var i,j,k,l,m=b.scope,n=b.form,o=b.list,p=b.field,q=b.postAction;i=b.url?b.url:f("inventories"===o.name?"inventory":o.name),j=o.iterator.charAt(0).toUpperCase()+o.iterator.substring(1),k=b.hdr?b.hdr:"Select "+j,l=/\/$/.test(i)?i+"?":i+"&",l+=n.fields[p].sourceField+"__iexact=:value",$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-url",l),$('input[name="'+n.fields[p].sourceModel+"_"+n.fields[p].sourceField+'"]').attr("data-source",p),m["lookUp"+j]=function(){var b=c,f=b.inject(o,{mode:"lookup",hdr:k});$("#lookup-modal").on("hidden.bs.modal",function(){f.searchCleanup&&f.searchCleanup(),(""===m[p]||null===m[p])&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]="",m.$$phase||m.$digest())}),f.selectAction=function(){var c,d=!1;for(c=0;c<f[o.name].length;c++)"1"===f[o.name][c].checked&&(d=!0,m[p]=f[o.name][c].id,m[n.name+"_form"]&&n.fields[p]&&n.fields[p].sourceModel&&(m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]=f[o.name][c][n.fields[p].sourceField],m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&m[n.name+"_form"][n.fields[p].sourceModel+"_"+n.fields[p].sourceField].$setValidity("awlookup",!0)),m[n.name+"_form"]&&m[n.name+"_form"].$setDirty(),b.hide());d===!1?a("Missing Selection","Oops, you failed to make a selection. Click on a row to make your selection, and then click the Select button."):q&&q()},f["toggle_"+o.iterator]=function(a){var b;for(b=0;b<m[o.name].length;b++)f[o.name][b].id===a?(f[o.name][b].checked="1",f[o.name][b].success_class="success"):(f[o.name][b].checked="0",f[o.name][b].success_class="")},d({scope:f,set:o.name,list:o,url:i}),e({scope:f,list:o,url:i,mode:"lookup"}),f.lookupPostRefreshRemove&&f.lookupPostRefreshRemove(),f.lookupPostRefreshRemove=m.$on("PostRefresh",function(){var a,b;for(a in o.fields)if(o.fields[a].type&&"date"===o.fields[a].type)for(b=0;b<m[o.name].length;b++)m[o.name][b][a]=g(new Date(m[o.name][b][a]));if(""!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]&&null!==m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField])for(b=0;b<f[o.name].length;b++)if(f[o.name][b][n.fields[p].sourceField]===m[n.fields[p].sourceModel+"_"+n.fields[p].sourceField]){m[p]=f[o.name][b].id;break}h(m[p])||f["toggle_"+o.iterator](m[p])}),f.search(o.iterator)}}}]),angular.module("PaginationHelpers",["Utilities","RefreshHelper","RefreshRelatedHelper"]).factory("PageRangeSetup",["Empty",function(a){return function(b){var c,d,e,f=b.scope,g=b.count,h=b.next,i=b.previous,j=b.iterator;for(f[j+"_page"]=1,f[j+"_num_pages"]=Math.ceil(g/f[j+"_page_size"]),f[j+"_num_pages"]=f[j+"_num_pages"]<=0?1:f[j+"_num_pages"],f[j+"_total_rows"]=g,a(h)&&i?f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1:h&&a(i)?f[j+"_page"]=1:h&&i&&(f[j+"_page"]=parseInt(i.match(/page=\d+/)[0].replace(/page=/,""))+1),f[j+"_page_range"]=[],d=f[j+"_page"]>5?f[j+"_page"]-5:1,e=f[j+"_page"]<6?10<=f[j+"_num_pages"]?10:f[j+"_num_pages"]:f[j+"_page"]+4<f[j+"_num_pages"]?f[j+"_page"]+4:f[j+"_num_pages"],c=d;e>=c;c++)f[j+"_page_range"].push(c)}}]).factory("RelatedPaginateInit",["RefreshRelated","$cookieStore","Wait",function(a,b,c){return function(d){var e,f=d.scope,g=d.relatedSets,h=d.pageSize?d.pageSize:10;for(e in g)f[g[e].iterator+"_url"]=g[e].url,f[g[e].iterator+"_page"]=0,f[g[e].iterator+"_page_size"]=h;f.getPage=function(b,d,e){var g=f[e+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=f[e+"SearchParams"]?"&"+f[e+"SearchParams"]+"&page_size="+f[e+"_page_size"]:"page_size="+f[e+"PageSize"],c("start"),a({scope:f,set:d,iterator:e,url:g})},f.pageIsActive=function(a,b){return a===f[b+"_page"]?"active":""},f.changePageSize=function(c,d){f[d+"_page"]=1;var e=f[d+"_url"];b.put(d+"_page_size",f[d+"_page_size"]),e=e.replace(/\/\?.*$/,"/"),e+=f[d+"SearchParams"]?"?"+f[d+"SearchParams"]+"&page_size="+f[d+"_page_size"]:"?page_size="+f[d+"_page_size"],a({scope:f,set:c,iterator:d,url:e})}}}]).factory("PaginateInit",["Refresh","$cookieStore","Wait",function(a,b,c){return function(b){var d=b.scope,e=b.list,f=b.iterator?b.iterator:e.iterator,g=b.mode?b.mode:null;d[f+"_page"]=b.page?b.page:1,d[f+"_url"]=b.url,d[f+"_mode"]=g,d[f+"_page_size"]=b.pageSize?b.pageSize:"lookup"===g?5:20,d.getPage=function(b,e,f){var g=d[f+"_url"].replace(/.page\=\d+/,""),h=/\/$/.test(g)?"?":"&";g+=h+"page="+b,g+=d[f+"SearchParams"]?"&"+d[f+"SearchParams"]+"&page_size="+d[f+"_page_size"]:"page_size="+d[f+"PageSize"],c("start"),a({scope:d,set:e,iterator:f,url:g})},d.pageIsActive=function(a,b){return a===d[b+"_page"]?"active":""},d.changePageSize=function(b,e){d[e+"_page"]=0;var f=d[e+"_url"].replace(/\?page_size\=\d+/,""),g=/\/$/.test(f)?"?":"&";f+=d[e+"SearchParams"]?g+d[e+"SearchParams"]+"&page_size="+d[e+"_page_size"]:g+"page_size="+d[e+"_page_size"],c("start"),a({scope:d,set:b,iterator:e,url:f})}}}]),angular.module("ParseHelper",[]).factory("ParseTypeChange",[function(){return function(a,b,c){var d=b?b:"variables",e=c?c:"parseType";a.blockParseTypeWatch=!1,a.blockVariableDataWatch=!1,a["remove"+d+"Watch"]&&a["remove"+d+"Watch"](),a["remove"+d+"Watch"]=a.$watch(e,function(b,c){var e;if(b!==c)if("json"===b)if(a[d]&&!/^---$/.test(a[d]))try{e=jsyaml.load(a[d]),a[d]=JSON.stringify(e,null," ")}catch(f){}else a[d]="{}";else if(a[d]&&!/^\{\}$/.test(a[d]))try{e=JSON.parse(a[d]),a[d]=jsyaml.safeDump(e)}catch(f){}else a[d]="---"})}}]),angular.module("PermissionsHelper",[]).factory("PermissionCategoryChange",[function(){return function(a){var b=a.scope,c=a.reset;"Inventory"===b.category?(b.projectrequired=!1,b.permissionTypeHelp="<dl>\n<dt>Read</dt>\n<dd>Only allow the user or team to view the inventory.</dd>\n<dt>Write</dt>\n<dd>Allow the user or team to modify hosts and groups contained in the inventory, add new hosts and groups, and perform inventory sync operations.\n<dt>Admin</dt>\n<dd>Allow the user or team full access to the inventory. This includes reading, writing, deletion of the inventory and inventory sync operations.</dd>\n</dl>\n"):(b.projectrequired=!0,b.permissionTypeHelp="<dl>\n<dt>Run</dt>\n<dd>Allow the user or team to perform a live deployment of the project against the inventory. In Run mode modules will be executed, and changes to the inventory will occur.</dd>\n<dt>Check</dt>\n<dd>Only allow the user or team to deploy the project against the inventory as a dry-run operation. In Check mode, module operations will only be simulated. No changes will occur.</dd>\n</dl>\n"),c&&(b.permission_type="Inventory"===b.category?"read":"run")}}]),angular.module("ProjectPathHelper",["RestServices","Utilities"]).factory("GetProjectPath",["Alert","Rest","GetBasePath","ProcessErrors",function(a,b,c,d){return function(a){function e(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].value);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].value===d[c]&&e.push(a[b]);return e}var f=a.scope,g=a.master;f.showMissingPlaybooksAlert=!1,b.setUrl(c("config")),b.get().success(function(a){var b,c=[];
for(b=0;b<a.project_local_paths.length;b++)c.push({label:a.project_local_paths[b],value:a.project_local_paths[b]});if(f.local_path&&c.push({label:f.local_path,value:f.local_path}),f.project_local_paths=e(c),f.local_path)for(b=0;f.project_local_paths.length;b++)if(f.project_local_paths[b].value===f.local_path){f.local_path=f.project_local_paths[b];break}f.base_dir=a.project_base_dir,g.local_path=f.local_path,g.base_dir=f.base_dir,0===c.length&&(f.showMissingPlaybooksAlert=!0)}).error(function(a,b){d(f,a,b,null,{hdr:"Error!",msg:"Failed to access API config. GET status: "+b})})}}]),angular.module("ProjectsHelper",["RestServices","Utilities","ProjectStatusDefinition","ProjectFormDefinition"]).factory("ProjectStatus",["$rootScope","$location","$log","$routeParams","Rest","Alert","GenerateForm","Prompt","ProcessErrors","GetBasePath","FormatDate","ProjectStatusForm","Wait",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(a){var b,c,d,f,h,j,n,o=a.project_id,p=a.last_update,q=g,r=l;m("start"),b='<div id="status-modal-dialog"><div id="form-container" style="width: 100%;"></div></div>\n',$("#projects-modal-container").empty().append(b),c=q.inject(r,{mode:"edit",id:"form-container",related:!1,breadCrumbs:!1}),q.reset(),d=$(document).width(),f=$("body").height(),d>1199?(h=675,j=750>f?f-20:750,n=20):1199>=d&&d>=768?(h=550,j=620>f?f-15:620,n=15):(h=d-20,j=500>f?f:500,n=10),$("#status-modal-dialog").dialog({buttons:{OK:function(){$(this).dialog("close")}},modal:!0,width:h,height:j,autoOpen:!1,create:function(){$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$('.ui-dialog[aria-describedby="status-modal-dialog"]').find(".ui-dialog-buttonset button:first").attr({"class":"btn btn-primary"})},resizeStop:function(){var a=$('.ui-dialog[aria-describedby="status-modal-dialog"]'),b=a.find("#status-modal-dialog");b.width(a.width()-28)},close:function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$("#status-modal-dialog").dialog("destroy"),$("#projects-modal-container").empty()},open:function(){m("stop")}}),e.setUrl(p),e.get().success(function(a){var b,d=a;for(b in r.fields)d[b]?c[b]="created"===b?k(new Date(d[b])):d[b]:d.summary_fields.project[b]&&(c[b]=d.summary_fields.project[b]);$("#status-modal-dialog").dialog({title:d.summary_fields.project.name+" Status"}).dialog("open")}).error(function(a,b){$("#form-modal").modal("hide"),i(c,a,b,r,{hdr:"Error!",msg:"Failed to retrieve status of project: "+o+". GET status: "+b})})}}]),angular.module("SelectionHelper",["Utilities","RestServices"]).factory("SelectionInit",["Rest","Alert","ProcessErrors","ReturnToCaller","Wait",function(a,b,c,d,e){return function(b){var f,g=b.scope,h=b.list,i=b.url,j=b.returnToCaller;f=void 0!==b.selected?b.selected:[],g.formModalActionDisabled=!0,g.disableSelectBtn=!0,g["toggle_"+h.iterator]=function(a,b){var c,d,e;for(c=0;c<g[h.name].length;c++)if(g[h.name][c].id===a)if("0"===g[h.name][c].checked&&!b||1===g[h.name][c].checked&&b){for(g[h.name][c].checked="1",g[h.name][c].success_class="success",e=!1,d=0;d<f.length;d++)if(f[d].id===a){e=!0;break}e||f.push(g[h.name][c])}else for(g[h.name][c].checked="0",g[h.name][c].success_class="",d=0;d<f.length;d++)if(f[d].id===a){f.splice(d,1);break}f.length>0?(g.formModalActionDisabled=!1,g.disableSelectBtn=!1):(g.formModalActionDisabled=!0,g.disableSelectBtn=!0)},g.finishSelection=function(){function b(){f=[],void 0!==j?d(j):($("#form-modal").modal("hide"),g.$emit("modalClosed"))}function k(b){a.post(b).success(function(a,b){m.push({result:"success",data:a,status:b}),g.$emit("callFinished")}).error(function(a,b,c){m.push({result:"error",data:a,status:b,headers:c}),g.$emit("callFinished")})}a.setUrl(i);var l,m=[];if(g.formModalActionDisabled=!0,g.disableSelectBtn=!0,e("start"),g.callFinishedRemove&&g.callFinishedRemove(),g.callFinishedRemove=g.$on("callFinished",function(){var a,d=0;if(m.length===f.length){for(e("stop"),a=0;a<m.length;a++)"error"===m[a].result&&(c(g,m[a].data,m[a].status,null,{hdr:"POST Failure",msg:"Failed to add "+h.iterator+". POST returned status: "+m[a].status}),d++);0===d&&b()}}),f.length>0)for(l=0;l<f.length;l++)k(f[l]);else b()},g.formModalAction=g.finishSelection,g.SelectPostRefreshRemove&&g.SelectPostRefreshRemove(),g.SelectPostRefreshRemove=g.$on("PostRefresh",function(){var a,b,c;if(g[h.name])for(a=0;a<g[h.name].length;a++){for(c=!1,b=0;b<f.length;b++)if(f[b].id===g[h.name][a].id){c=!0;break}c?(g[h.name][a].checked="1",g[h.name][a].success_class="success"):(g[h.name][a].checked="0",g[h.name][a].success_class="")}})}}]),angular.module("UserHelper",["UserFormDefinition"]).factory("ResetForm",["UserForm",function(a){return function(){a.fields.first_name.readonly=!1,a.fields.first_name.editRequired=!0,a.fields.last_name.readonly=!1,a.fields.last_name.editRequired=!0,a.fields.email.readonly=!1,a.fields.email.editRequired=!0,a.fields.organization.awRequiredWhen={variable:"orgrequired",init:!0},a.fields.organization.readonly=!1,a.fields.username.awRequiredWhen={variable:"not_ldap_user",init:!0},a.fields.username.readonly=!1,a.fields.password.editRequired=!1,a.fields.password.addRrequired=!0}}]),angular.module("APIDefaults",["RestServices","Utilities"]).factory("GetAPIDefaults",["Alert","Rest","$rootScope",function(a,b,c){return function(a){function d(a){var b,d={};for(b in c.apiDefaults)if(b===a||b.iterator===a){d[b]=c.apiDefaults[b];break}return d}function e(){if($.isEmptyObject(g)&&5>h)h++,setTimeout(1e3,e());else if("success"===g.status)return d(a)}var f,g={},h=0;return null===c.apiDefaults||void 0===c.apiDefaults?(f="/api/v1/",b.setUrl(f),b.get().success(function(a){var b,d=a;for(b in d)switch(b){case"organizations":d[b].iterator="organization";break;case"jobs":d[b].iterator="job";break;case"users":d[b].iterator="user";break;case"teams":d[b].iterator="team";break;case"hosts":d[b].iterator="host";break;case"groups":d[b].iterator="group";break;case"projects":d[b].iterator="project";break;case"inventories":d[b].iterator="inventory"}c.apiDefaults=d,g={status:"success"}}).error(function(a,b){g={status:"error",msg:"Call to "+f+" failed. GET returned status: "+b}}),e()):d(a)}}]),angular.module("InventoryHelper",["RestServices","Utilities","OrganizationListDefinition","ListGenerator","AuthService","InventoryHelper","InventoryFormDefinition","ParseHelper","SearchHelper"]).factory("WatchInventoryWindowResize",["ApplyEllipsis",function(a){return function(){var b;$(window).resize(function(){clearTimeout(b),b=setTimeout(function(){$("#groups_table .name-column").each(function(){var a=$(this).width(),b=$(this).find(".level").width(),c=parseInt($(this).find(".level").css("padding-left").replace(/px/,"")),d=b+c,e=100-Math.ceil(d/a*100)+"%";$(this).find(".group-name").css({width:e})}),a("#groups_table .group-name a"),a("#hosts_table .host-name a")},100)})}}]).factory("SaveInventory",["InventoryForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","Wait",function(a,b,c,d,e,f,g,h,i){return function(e){var f,h,j,k=e.scope,l=a,m=g("inventory");i("start");try{if(h="json"===k.inventoryParseType?JSON.parse(k.inventory_variables):jsyaml.load(k.inventory_variables),"object"!=typeof h)throw"failed to return an object!";j={};for(f in l.fields)"inventory_variables"!==f&&(l.fields[f].realName?j[l.fields[f].realName]=k[f]:j[f]=k[f]);b.setUrl(m+k.inventory_id+"/"),b.put(j).success(function(a){k.inventory_variables?(b.setUrl(a.related.variable_data),b.put(h).success(function(){i("stop"),k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory varaibles. PUT returned status: "+b})})):k.$emit("InventorySaved")}).error(function(a,b){d(k,a,b,l,{hdr:"Error!",msg:"Failed to update inventory. POST returned status: "+b})})}catch(n){i("stop"),c("Error","Error parsing inventory variables. Parser returned: "+n)}}}]).factory("EditInventoryProperties",["InventoryForm","GenerateForm","Rest","Alert","ProcessErrors","LookUpInit","OrganizationList","GetBasePath","ParseTypeChange","SaveInventory","Wait","Store","SearchInit",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return function(n){var o,p=n.scope,q=n.inventory_id,r=b,s=a,t={},u=l("CurrentSearchParams");s.well=!1,o=r.inject(s,{mode:"edit",modal:!0,related:!1,modal_show:!1}),s.well=!0,i(o,"inventory_variables","inventoryParseType"),o.inventoryParseType="yaml",o.formModalActionLabel="Save",o.formModalCancelShow=!0,o.formModalInfo=!1,o.formModalHeader="Inventory Properties",k("start"),c.setUrl(h("inventory")+q+"/"),c.get().success(function(a){var b,c;for(b in s.fields){if("inventory_variables"===b){if($.isEmptyObject(a.variables)||"{}"===a.variables||"null"===a.variables||""===a.variables)o.inventory_variables="---";else try{c=JSON.parse(a.variables),o.inventory_variables=jsyaml.safeDump(c)}catch(e){d("Variable Parse Error","Attempted to parse variables for inventory: "+q+". Parse returned: "+e),console&&(console.log(e),console.log("data:"),console.log(a.variables)),o.inventory_variables="---"}t.inventory_variables=o.variables}else"inventory_name"===b?(o[b]=a.name,t[b]=o[b]):"inventory_description"===b?(o[b]=a.description,t[b]=o[b]):a[b]&&(o[b]=a[b],t[b]=o[b]);s.fields[b].sourceModel&&a.summary_fields&&a.summary_fields[s.fields[b].sourceModel]&&(o[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField],t[s.fields[b].sourceModel+"_"+s.fields[b].sourceField]=a.summary_fields[s.fields[b].sourceModel][s.fields[b].sourceField])}f({scope:o,form:s,current_item:o.organization,list:g,field:"organization"}),k("stop"),$("#form-modal").modal("show")}).error(function(a,b){e(o,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+q+". GET returned: "+b})}),o.removeInventorySaved&&o.removeInventorySaved(),o.removeInventorySaved=o.$on("InventorySaved",function(){$("#form-modal").modal("hide"),o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1}),p.$emit("RefreshInventories")}),o.cancelModal=function(){o.searchCleanp&&o.searchCleanup(),m({scope:p,set:u.set,list:u.list,url:u.defaultUrl,iterator:u.iterator,sort_order:u.sort_order,setWidgets:!1})},o.formModalAction=function(){p.inventory_id=q,p.inventory_name=o.inventory_name,j({scope:o})}}}]),angular.module("md5Helper",["RestServices","Utilities"]).factory("md5Setup",[function(){return function(a){var b=a.scope,c=a.master,d=a.check_field,e=a.default_val;b[d]=e,c[d]=e,b.genMD5=function(a){var c=new Date;b[a]=$.md5("AnsibleWorks"+c.getTime())},b.toggleCallback=function(a){"false"===b.allow_callbacks&&(b[a]="")},b.selectAll=function(a){$('input[name="'+a+'"]').focus().select()}}}]),angular.module("RefreshRelatedHelper",["RestServices","Utilities","PaginationHelpers"]).factory("RefreshRelated",["ProcessErrors","Rest","Wait","PageRangeSetup",function(a,b,c,d){return function(e){var f=e.scope,g=e.set,h=e.iterator,i=e.url;b.setUrl(i),b.get().success(function(a){d({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[g]=a.results,f[h+"Loading"]=!1,f[h+"HoldInput"]=!1,c("stop"),f.$emit("related"+g)}).error(function(b,c){a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RefreshHelper",["RestServices","Utilities","PaginationHelpers"]).factory("Refresh",["ProcessErrors","Rest","Wait","Empty","PageRangeSetup",function(a,b,c,d,e){return function(d){var f=d.scope,g=d.set,h=d.iterator,i=d.url;f.current_url=i,b.setUrl(i),b.get().success(function(a){var b,d;for(e({scope:f,count:a.count,next:a.next,previous:a.previous,iterator:h}),f[h+"Loading"]=!1,b=1;3>=b;b++)d=1===b?"":b,f[h+"HoldInput"+d]=!1;f[g]=a.results,window.scrollTo(0,0),c("stop"),f.$emit("PostRefresh")}).error(function(b,c){f[h+"HoldInput"]=!1,a(f,b,c,null,{hdr:"Error!",msg:"Failed to retrieve "+g+". GET returned status: "+c})})}}]),angular.module("RelatedSearchHelper",["RestServices","Utilities","RefreshRelatedHelper"]).factory("RelatedSearchInit",["$timeout","Alert","Rest","RefreshRelated","Wait",function(a,b,c,d,e){return function(a){function b(a){var b,c,d,e;for(e in h.related)if("tree"!==h.related[e].type&&(void 0===a||a===h.related[e].iterator)){b=h.related[e].iterator;for(d in h.related[e].fields)if(h.related[e].fields[d].key){f[b+"SearchField"]=d,f[b+"SearchFieldLabel"]=h.related[e].fields[d].label;break}f[b+"SortOrder"]=null,f[b+"SearchType"]="icontains",f[b+"SearchTypeLabel"]="Contains",f[b+"SearchValue"]=null,f[b+"SelectShow"]=!1,f[b+"ShowStartBtn"]=!0,f[b+"HideAllStartBtn"]=!1,c=f[b+"SearchField"],!h.related[e].fields[c].searchType||"boolean"!==h.related[e].fields[c].searchType&&"select"!==h.related[e].fields[c].searchType||(f[b+"SelectShow"]=!0,f[b+"SearchSelectOpts"]=h.fields[c].searchOptions),h.related[e].fields[c].searchType&&"gtzero"===h.related[e].fields[c].searchType&&(f[b+"InputHide"]=!0)}}var c,f=a.scope,g=a.relatedSets,h=a.form;b(),f.resetSearch=function(a){b(a),f.search(a)},f.setSearchField=function(a,b,c){var d,e;for(e in h.related)h.related[e].iterator===a&&(d=h.related[e].fields[b]);f[a+"SearchFieldLabel"]=c,f[a+"SearchField"]=b,f[a+"SearchValue"]="",f[a+"SelectShow"]=!1,f[a+"InputHide"]=!1,f[a+"ShowStartBtn"]=!0,void 0!==d.searchType&&"gtzero"===d.searchType&&(f[a+"InputHide"]=!0,f[a+"ShowStartBtn"]=!1),void 0===d.searchType||"boolean"!==d.searchType&&"select"!==d.searchType||(f[a+"SelectShow"]=!0,f[a+"SearchSelectOpts"]=d.searchOptions),void 0!==d.searchType&&"int"===d.searchType&&(f[a+"SearchType"]="int"),f.search(a)},f.setSearchType=function(a,b,c){f[a+"SearchTypeLabel"]=c,f[a+"SearchType"]=b,f.search(a)},f.startSearch=function(a,b){13===a.keyCode&&f.search(b)},f.search=function(a){e("start"),f[a+"Loading"]=!0,f[a+"HoldInput"]=!0,f[a+"SearchValue"]&&(f[a+"ShowStartBtn"]=!1),"host"===a&&"has_active_failures"===f.hostSearchField&&(f.hostFailureFilter=f.hostSearchSelectValue&&1===f.hostSearchSelectValue.value?!0:!1);var b,i,j,k,l;for(i in g)if(g[i].iterator===a){j=i,k=g[i].url;for(b in h.related[i].fields)h.related[i].fields[b].key&&(l=h.related[i].fields[b].desc?"-"+b:b);break}l=null===f[a+"SortOrder"]?l:f[a+"SortOrder"],c=h.related[j].fields[f[a+"SearchField"]],f[a+"SelectShow"]===!1&&""!==f[a+"SearchValue"]&&void 0!==f[a+"SearchValue"]||f[a+"SelectShow"]&&f[a+"SearchSelectValue"]||c.searchType&&"gtzero"===c.searchType?(f[a+"SearchParams"]=c.sourceModel?c.sourceModel+"__"+c.sourceField+"__":c.searchField?c.searchField+"__":f[a+"SearchField"]+"__",f[a+"SearchParams"]+=!c.searchType||"int"!==c.searchType&&"boolean"!==c.searchType?c.searchType&&"gtzero"===c.searchType?"gt=0":f[a+"SearchType"]+"=":"int=",!c.searchType||"boolean"!==c.searchType&&"select"!==c.searchType?(void 0===c.searchType||"gtzero"===c.searchType)&&(f[a+"SearchParams"]+=encodeURI(f[a+"SearchValue"])):f[a+"SearchParams"]+=f[a+"SearchSelectValue"].value,f[a+"SearchParams"]+=l?"&order_by="+encodeURI(l):""):f[a+"SearchParams"]=l?"order_by="+encodeURI(l):"",f[a+"Page"]=0,k+=k.match(/\/$/)?"?":"&",k+=f[a+"SearchParams"],k+=f[a+"PageSize"]?"&page_size="+f[a+"PageSize"]:"",d({scope:f,set:j,iterator:a,url:k})},f.sort=function(a,b){var c,d,e,g;$("."+a+" .list-header").each(function(){if($(this).attr("id")!==a+"-"+b+"-header"){var c=$(this).find("i");c.attr("class","icon-sort")}}),d=$("#"+a+"-"+b+"-header i"),e="",d.hasClass("icon-sort")?(d.removeClass("icon-sort"),d.addClass("icon-sort-up")):d.hasClass("icon-sort-up")?(d.removeClass("icon-sort-up"),d.addClass("icon-sort-down"),e="-"):d.hasClass("icon-sort-down")&&(d.removeClass("icon-sort-down"),d.addClass("icon-sort-up"));for(g in h.related)h.related[g].iterator===a&&(c=h.related[g].fields[b].sourceModel?e+h.related[g].fields[b].sourceModel+"__"+h.related[g].fields[b].sourceField:e+b);f[a+"SortOrder"]=c,f.search(a)}}}]),angular.module("SearchHelper",["RestServices","Utilities","RefreshHelper"]).factory("SearchInit",["Alert","Rest","Refresh","$location","GetBasePath","Empty","$timeout","Wait","Store",function(a,b,c,d,e,f,g,h,i){return function(a){function b(a){var b,c,d,e;e=void 0===a||1===a?"":a,l[p+"SearchField"+e]="",l[p+"SearchFieldLabel"+e]="";for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&o.fields[c].key){o.fields[c].sourceModel?(d=o.fields[c].sourceModel+"__"+o.fields[c].sourceField,r=o.fields[c].desc?"-"+d:d):r=o.fields[c].desc?"-"+c:c,(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)&&(l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label);break}if(f(l[p+"SearchField"+e]))for(c in o.fields)if((void 0===o.fields[c].searchWidget&&1===a||o.fields[c].searchWidget===a)&&(void 0===o.fields[c].searchable||o.fields[c].searchable===!0)){l[p+"SearchField"+e]=c,l[p+"SearchFieldLabel"+e]=o.fields[c].label;break}l[p+"SearchType"+e]="icontains",l[p+"SearchTypeLabel"+e]="Contains",l[p+"SearchParams"+e]="",l[p+"SearchValue"+e]="",l[p+"SelectShow"+e]=!1,l[p+"HideSearchType"+e]=!1,l[p+"InputDisable"+e]=!1,l[p+"ExtraParms"+e]="",l[p+"ShowStartBtn"+e]=!0,l[p+"HideAllStartBtn"+e]=!1,l[p+"SearchPlaceholder"+e]=o.fields[l[p+"SearchField"+e]]&&o.fields[l[p+"SearchField"+e]].searchPlaceholder?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[p+"SearchField"+e]].searchPlaceholder]:o.fields[l[p+"SearchField"+e]].searchPlaceholder:"Search",l[p+"InputDisable"+e]=o.fields[l[p+"SearchField"+e]]&&"all"===o.fields[l[p+"SearchField"+e]].searchObject?!0:!1,b=l[p+"SearchField"+e],o.fields[b]&&(!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType||(l[p+"SelectShow"+e]=!0,l[p+"SearchSelectOpts"+e]=o.fields[b].searchOptions),o.fields[b].searchType&&"int"===o.fields[b].searchType&&(l[p+"HideSearchType"+e]=!0),o.fields[b].searchType&&"gtzero"===o.fields[b].searchType&&(l[p+"InputHide"+e]=!0))}var e,g,j,k,l=a.scope,m=a.set,n=a.url,o=a.list,p=a.iterator?a.iterator:o.iterator,q=a.setWidgets===!1?!1:!0,r=a.sort_order||"";if(q)for(e=o.searchWidgets?o.searchWidgets:1,g=1;e>=g;g++)j=1===g?"":g,$("#search-widget-container"+j)&&b(g);k={set:m,defaultUrl:n,list:o,iterator:p,sort_order:r},i("CurrentSearchParams",k),l.setSearchField=function(a,b,c,d){var e=void 0===d||1===d?"":d;l[a+"SearchFieldLabel"+e]=c,l[a+"SearchField"+e]=b,l[a+"SearchValue"+e]="",l[a+"SelectShow"+e]=!1,l[a+"HideSearchType"+e]=!1,l[a+"InputHide"+e]=!1,l[a+"SearchType"+e]="icontains",l[a+"InputDisable"+e]="all"===o.fields[b].searchObject?!0:!1,l[a+"ShowStartBtn"+e]=!0,l[a+"SearchPlaceholder"+e]=o.fields[l[a+"SearchField"+e]]&&o.fields[l[a+"SearchField"+e]].searchPlaceholder?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]?l[o.fields[l[a+"SearchField"+e]].searchPlaceholder]:o.fields[l[a+"SearchField"+e]].searchPlaceholder:"Search",o.fields[b].searchType&&"gtzero"===o.fields[b].searchType?(l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1,l.search(a)):o.fields[b].searchSingleValue?(l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"SearchSelectValue"+e]="boolean"===o.fields[b].searchType&&"true"===o.fields[b].searchValue?{value:1}:"boolean"===o.fields[b].searchType&&"false"===o.fields[b].searchValue?{value:0}:{value:o.fields[b].searchValue},l[a+"ShowStartBtn"+e]=!1):"in"===o.fields[b].searchType?(l[a+"SearchType"+e]="in",l[a+"SearchValue"+e]=o.fields[b].searchValue,l[a+"InputDisable"+e]=!0,l[a+"ShowStartBtn"+e]=!1):!o.fields[b].searchType||"boolean"!==o.fields[b].searchType&&"select"!==o.fields[b].searchType&&"select_or"!==o.fields[b].searchType?o.fields[b].searchType&&"int"===o.fields[b].searchType?l[a+"SearchType"+e]="int":o.fields[b].searchType&&"isnull"===o.fields[b].searchType&&(l[a+"SearchType"+e]="isnull",l[a+"InputDisable"+e]=!0,l[a+"SearchValue"+e]="true",l[a+"ShowStartBtn"+e]=!1):(l[a+"SelectShow"+e]=!0,l[a+"SearchSelectOpts"+e]=o.fields[b].searchOptions),l.search(a)},l.resetSearch=function(a){var c,e=o.searchWidgets?o.searchWidgets:1;for(c=1;e>=c;c++)b(c);window.location="/#"+d.path(),l.search(a)},l.removeDoSearch&&l.removeDoSearch(),l.removeDoSearch=l.$on("doSearch",function(a,b,d,e){l[b+"Loading"]=void 0===e||e===!0?!0:!1;var f,g=n;l[b+"Page"]=d?parseInt(d)-1:0,l[b+"SearchParams"]&&(g+=/\/$/.test(g)?"?"+l[b+"SearchParams"]:"&"+l[b+"SearchParams"]),f=/\/$/.test(g)?"?":"&",g+=l[b+"_page_size"]?f+"page_size="+l[b+"_page_size"]:"",d&&(f=/\/$/.test(g)?"?":"&",g+=f+"page="+d),l[b+"ExtraParms"]&&(f=/\/$/.test(g)?"?":"&",g+=f+l[b+"ExtraParms"]),g=g.replace(/\&\&/,"&"),c({scope:l,set:m,iterator:b,url:g})}),l.removePrepareSearch&&l.removePrepareSearch(),l.removePrepareSearch=l.$on("prepareSearch",function(a,b,c,d,e){h("start"),l[b+"SearchParams"]="";var f,g,i=o.searchWidgets?o.searchWidgets:1;for(f=1;i>=f;f++)g=1===f?"":f,$("#search-widget-container"+g)&&o.fields[l[b+"SearchField"+g]]&&o.fields[l[b+"SearchField"+g]].searchObject&&("all"!==o.fields[l[b+"SearchField"+g]].searchObject?(l[b+"HideAllStartBtn"+g]=!1,l[b+"SearchValue"+g]?(l[b+"ShowStartBtn"+g]=!1,l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+g]].searchOnID?"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__id="+l[b+"SearchValue"+g]:"&"+o.fields[l[b+"SearchField"+g]].searchObject+"__name__icontains="+l[b+"SearchValue"+g]):(l[b+"ShowStartBtn"+g]=!0,l[b+"SearchParams"]+="&"+o.fields[l[b+"SearchField"+g]].searchField+"="+o.fields[l[b+"SearchField"+g]].searchObject)):l[b+"HideAllStartBtn"+g]=!0);l.$emit("prepareSearch2",b,c,d,e)}),l.removePrepareSearch2&&l.removePrepareSearch2(),l.removePrepareSearch2=l.$on("prepareSearch2",function(a,b,c,d,e){var g,h,i=o.searchWidgets?o.searchWidgets:1;for(g=1;i>=g;g++)h=1===g?"":g,l[b+"HoldInput"+h]=!0,$("#search-widget-container"+h)&&o.fields[l[b+"SearchField"+h]]&&!o.fields[l[b+"SearchField"+h]].searchObject&&(l[b+"ShowStartBtn"+h]=l[b+"SearchValue"+h]?!1:!0,(!l[b+"SelectShow"+h]&&!f(l[b+"SearchValue"+h])||l[b+"SelectShow"+h]&&l[b+"SearchSelectValue"+h]||o.fields[l[b+"SearchField"+h]]&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=o.fields[l[b+"SearchField"+h]].searchField?"&"+o.fields[l[b+"SearchField"+h]].searchField+"__":o.fields[l[b+"SearchField"+h]].sourceModel?"&"+o.fields[l[b+"SearchField"+h]].sourceModel+"__"+o.fields[l[b+"SearchField"+h]].sourceField+"__":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?"&"+l[b+"SearchField"+h]+"__":"&"+l[b+"SearchField"+h]+"__",l[b+"SearchParams"]+=!o.fields[l[b+"SearchField"+h]].searchType||"int"!==o.fields[l[b+"SearchField"+h]].searchType&&"boolean"!==o.fields[l[b+"SearchField"+h]].searchType?o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"===o.fields[l[b+"SearchField"+h]].searchType?"gt=0":"select"!==o.fields[l[b+"SearchField"+h]].searchType||""!==l[b+"SearchSelectValue"+h].value&&null!==l[b+"SearchSelectValue"+h].value?l[b+"SearchType"+h]+"=":"iexact=":"int=",!o.fields[l[b+"SearchField"+h]].searchType||"boolean"!==o.fields[l[b+"SearchField"+h]].searchType&&"select"!==o.fields[l[b+"SearchField"+h]].searchType?(!o.fields[l[b+"SearchField"+h]].searchType||o.fields[l[b+"SearchField"+h]].searchType&&"or"!==o.fields[l[b+"SearchField"+h]].searchType&&"gtzero"!==o.fields[l[b+"SearchField"+h]].searchType)&&(l[b+"SearchParams"]+=encodeURI(l[b+"SearchValue"+h])):l[b+"SearchParams"]+=l[b+"SearchSelectValue"+h].value));("inventory"===b&&l.inventoryFailureFilter||"host"===b&&l.hostFailureFilter)&&(l[b+"SearchParams"]+="&has_active_failures=true"),r&&(l[b+"SearchParams"]+=l[b+"SearchParams"]?"&":"",l[b+"SearchParams"]+="order_by="+encodeURI(r)),l.$emit("doSearch",b,c,d,e)}),l.startSearch=function(a,b){13===a.keyCode&&l.search(b)},l.search=function(a,b,c){c=void 0===c?!0:!1,c&&(l[m]=[]),l.$emit("prepareSearch",a,b,c)},l.sort=function(a){$(".list-header").each(function(){if($(this).attr("id")!==a+"-header"){var b=$(this).find("i");b.attr("class","fa fa-sort")}});var b=$("#"+a+"-header i"),c="";b.hasClass("fa-sort")?(b.removeClass("fa-sort"),b.addClass("fa-sort-up")):b.hasClass("fa-sort-up")?(b.removeClass("fa-sort-up"),b.addClass("fa-sort-down"),c="-"):b.hasClass("fa-sort-down")&&(b.removeClass("fa-sort-down"),b.addClass("fa-sort-up")),r=o.fields[a].searchField?c+o.fields[a].searchField:o.fields[a].sortField?c+o.fields[a].sortField:o.fields[a].sourceModel?c+o.fields[a].sourceModel+"__"+o.fields[a].sourceField:c+a,l.search(o.iterator)},l.searchCleanup=function(){l.removeDoSearch(),l.removePrepareSearch(),l.removePrepareSearch2()}}}]),angular.module("TeamHelper",["RestServices","Utilities","OrganizationListDefinition","SearchHelper","PaginationHelpers","ListGenerator"]).factory("SetTeamListeners",["Alert","Rest",function(a,b){return function(a){var c=a.scope,d=a.set,e=a.iterator;c.$on("TeamResultFound",function(a,b,f){var g,h,i,j;if(f.length===b.length){for(i="organization",j="organization_name",g=0;g<b.length;g++)for(h=0;h<f.length;h++)b[g][i]===f[h].id&&(b[g][j]=f[h].value);c[e+"SearchSpin"]=!1,c[d]=b}}),c.$on("TeamRefreshFinished",function(a,d){function e(a){b.setUrl(a),b.get().success(function(a){h.push({id:a.id,value:a.name}),c.$emit("TeamResultFound",d,h)}).error(function(){h.push({id:"error"}),c.$emit("TeamResultFound",d,h)})}var f,g,h=[];for(f=0;f<d.length;f++)g="/api/v1/organizations/"+d[f].organization+"/",e(g)})}}]).factory("TeamLookUpOrganizationInit",["Alert","Rest","OrganizationList","GenerateList","SearchInit","PaginateInit",function(a,b,c,d,e,f){return function(b){var g=b.scope;g.lookUpOrganization=function(){var b=c,h=d,i=h.inject(b,{mode:"lookup",hdr:"Select Organization"}),j="/api/v1/organizations/";i.selectAction=function(){var c,d=!1;for(c=0;c<i[b.name].length;c++)"success"===i[b.iterator+"_"+i[b.name][c].id+"_class"]&&(d=!0,g.organization=i[b.name][c].id,g.organization_name=i[b.name][c].name,g.team_form.$setDirty(),h.hide());d===!1&&a("No Selection","Click on a row to select an Organization before clicking the Select button.")},i.toggle_organization=function(a){if(i[b.name])for(var c=0;c<i[b.name].length;c++)i[b.iterator+"_"+i[b.name][c].id+"_class"]="";null!==a&&void 0!==a&&(i[b.iterator+"_"+a+"_class"]="success")},e({scope:i,set:b.name,list:b,url:j}),f({scope:i,list:b,url:j,mode:"lookup"}),g.search(b.iterator),i.toggle_organization(g.organization)}}}]),angular.module("AdminListDefinition",[]).value("AdminList",{name:"admins",iterator:"admin",selectTitle:"Add Administrators",editTitle:"Admins",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p>",base:"users",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{},fieldActions:{}}),angular.module("CloudCredentialsListDefinition",[]).value("CloudCredentialList",{name:"cloudcredentials",iterator:"cloudcredential",selectTitle:"Add Cloud Credentials",editTitle:"Cloud Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},team:{label:"Team",ngBind:"credential.team_name",sourceModel:"team",sourceField:"name",excludeModal:!0},user:{label:"User",ngBind:"credential.user_username",sourceModel:"user",sourceField:"username",excludeModal:!0}},actions:{add:{mode:"all",ngClick:"addCredential()","class":"btn-sm",awToolTip:"Create a new credential"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash-o",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("CredentialsListDefinition",[]).value("CredentialList",{name:"credentials",iterator:"credential",selectTitle:"Add Credentials",editTitle:"Credentials",selectInstructions:"<p>Select existing credentials by clicking each credential or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new credential by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",excludeModal:!1},kind:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0}},actions:{add:{mode:"all",ngClick:"addCredential()",awToolTip:"Create a new credential"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{ngClick:"editCredential(credential.id)",icon:"fa-edit",label:"Edit","class":"btn-sm",awToolTip:"Edit credential",dataPlacement:"top"},"delete":{ngClick:"deleteCredential(credential.id, credential.name)",icon:"fa-trash",label:"Delete","class":"btn-sm",awToolTip:"Delete credential",dataPlacement:"top"}}}),angular.module("GroupListDefinition",[]).value("GroupList",{name:"groups",iterator:"group",selectTitle:"Copy Groups",editTitle:"Groups",index:!0,well:!1,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{help:{awPopOver:"Choose groups by clicking on each group you wish to add. Click the <em>Select</em> button to add the groups to the selected inventory group.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Adding Groups"}},fieldActions:{edit:{label:"Edit",ngClick:"editGroup(group.id)",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit group",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteGroup(group.id, group.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete group",dataPlacement:"top"}}}),angular.module("HomeGroupListDefinition",[]).value("HomeGroupList",{name:"home_groups",iterator:"group",editTitle:"Groups",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Group",ngClick:"editGroup(group.id, group.inventory)",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-6 ellipsis"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ /#/inventories/' + group.inventory + '/' }}"},source:{label:"Source",searchType:"select",searchOptions:[{name:"ec2",value:"ec2"},{name:"none",value:""},{name:"rax",value:"rax"}],sourceModel:"inventory_source",sourceField:"source",searchOnly:!0},has_external_source:{label:"Has external source?",searchType:"in",searchValue:"ec2,rax",searchOnly:!0,sourceModel:"inventory_source",sourceField:"source"},has_active_failures:{label:"Has failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},last_update_failed:{label:"Update failed?",searchType:"select",searchSingleValue:!0,searchValue:"failed",searchOnly:!0,sourceModel:"inventory_source",sourceField:"status"},id:{label:"ID",searchOnly:!0}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",awToolTip:"{{ group.status_tooltip }}",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",dataPlacement:"top",ngHref:"/#/inventories/{{ group.inventory }}/",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",ngShow:"(group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate(group.id)",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"(group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{label:"Edit",mode:"all",ngClick:"editGroup(group.id)",awToolTip:"Edit group",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HomeHostListDefinition",[]).value("HomeHostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,hover:!0,well:!0,fields:{name:{key:!0,label:"Name",columnClass:"col-lg-4 col-md3 col-sm-3 col-xs-7 ellipsis",ngClick:"editHost(host.id, host.name)"},inventory_name:{label:"Inventory",sourceModel:"inventory",sourceField:"name",columnClass:"col-lg-3 col-md2 col-sm-2 hidden-xs elllipsis",linkTo:"{{ '/#/inventories/' + host.inventory }}"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Has failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_inventory_sources:{label:"Has external source?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},id:{label:"ID",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{label:"Edit",ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"}},actions:{stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("HostListDefinition",[]).value("HostList",{name:"hosts",iterator:"host",selectTitle:"Add Existing Hosts",editTitle:"Hosts",index:!0,well:!1,fields:{name:{key:!0,label:"Host Name",linkTo:"/inventories/{{ inventory_id }}/hosts/{{ host.id }}"},description:{label:"Description"}},actions:{help:{awPopOver:"Select hosts by clicking on each host you wish to add. Add the selected hosts to the group by clicking the <em>Select</em> button.",dataContainer:"#form-modal .modal-content",mode:"all",awToolTip:"Click for help",dataTitle:"Selecting Hosts"}},fieldActions:{edit:{label:"Edit",ngClick:"editHost({{ host.id }})",icon:"icon-edit","class":"btn-xs",awToolTip:"Edit host",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash","class":"btn-xs",awToolTip:"Delete host",dataPlacement:"top"}}}),angular.module("InventoriesListDefinition",[]).value("InventoryList",{name:"inventories",iterator:"inventory",selectTitle:"Add Inventories",editTitle:"Inventories",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},organization:{label:"Organization",ngBind:"inventory.summary_fields.organization.name",linkTo:"/#/organizations/{{ inventory.organization }}",sourceModel:"organization",sourceField:"name",excludeModal:!0},has_inventory_sources:{label:"Cloud sourced?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},has_active_failures:{label:"Failed hosts?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0},inventory_sources_with_failures:{label:"Sync failures?",searchType:"gtzero",searchValue:"true",searchOnly:!0}},actions:{add:{mode:"all",ngClick:"addInventory()",awToolTip:"Create a new inventory"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{status:{ngHref:"inventory.status_link",iconClass:"{{ 'fa fa-cloud icon-cloud-' + inventory.status_class }}",awToolTip:"{{ inventory.status_tip }}",dataPlacement:"top"},failed_hosts:{ngHref:"inventory.failed_hosts_link",iconClass:"{{ 'fa icon-failures-' + inventory.failed_hosts_class }}",awToolTip:"{{ inventory.failed_hosts_tip }}",dataPlacement:"top"},edit:{label:"Edit",ngClick:"editInventoryProperties(inventory.id)",awToolTip:"Edit inventory",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteInventory(inventory.id, inventory.names')",awToolTip:"Delete inventory",dataPlacement:"top"}}}),angular.module("InventoryGroupsDefinition",[]).value("InventoryGroups",{name:"groups",iterator:"group",editTitle:"{{ inventory_name }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,filterBy:"{ show: true }","class":"table-condensed table-no-border",fields:{name:{label:"Groups",key:!0,ngClick:"showHosts(group.id,group.group_id, false)",ngClass:"group.selected_class",hasChildren:!0,columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",nosort:!0,awDroppable:"{{ group.isDroppable }}",awDraggable:"{{ group.isDraggable }}",dataContainment:"#groups_table",dataTreeId:"{{ group.id }}",dataGroupId:"{{ group.group_id }}",dataType:"group"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createGroup()",awToolTip:"Create a new group"},properties:{mode:"all",awToolTip:"Edit inventory properties",ngClick:"editInventoryProperties()"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refreshGroups()"},stream:{ngClick:"showGroupActivity()",awToolTip:"View Activity Stream",mode:"all"},help:{mode:"all",awToolTip:"Get help building your inventory",ngClick:"showGroupHelp()",id:"inventory-summary-help"}},fieldActions:{sync_status:{mode:"all",ngClick:"viewUpdateStatus(group.id, group.group_id)",ngShow:"group.id > 1",awToolTip:"{{ group.status_tooltip }}",dataTipWatch:"group.launch_tooltip",ngClass:"group.status_class",dataPlacement:"top"},failed_hosts:{mode:"all",awToolTip:"{{ group.hosts_status_tip }}",ngShow:"group.id > 1",dataPlacement:"top",ngClick:"showHosts(group.id, group.group_id, group.show_failures)",iconClass:"{{ 'fa icon-failures-' + group.hosts_status_class }}"},group_update:{mode:"all",ngClick:"updateGroup(group.id)",awToolTip:"{{ group.launch_tooltip }}",dataTipWatch:"group.launch_tooltip",ngShow:"group.id > 1 && (group.status !== 'running' && group.status !== 'pending' && group.status !== 'updating')",ngClass:"group.launch_class",dataPlacement:"top"},cancel:{mode:"all",ngClick:"cancelUpdate({{ group.id }})",awToolTip:"Cancel sync process","class":"red-txt",ngShow:"group.id > 1 && (group.status == 'running' || group.status == 'pending' || group.status == 'updating')",dataPlacement:"top"},edit:{mode:"all",ngClick:"editGroup({{ group.group_id + ',' + group.id }})",awToolTip:"Edit group",ngShow:"group.id > 1",dataPlacement:"top"},"delete":{mode:"all",ngClick:"deleteGroup({{ group.id + ',' + group.group_id }})",awToolTip:"Delete group",ngShow:"group.id != 1",dataPlacement:"top"}}}),angular.module("InventoryHostsDefinition",[]).value("InventoryHosts",{name:"hosts",iterator:"host",editTitle:"{{ selected_group }}",showTitle:!1,well:!0,index:!1,hover:!1,hasChildren:!0,"class":"table-condensed table-no-border",fields:{name:{key:!0,label:"Hosts",ngClick:"editHost(host.id)",searchPlaceholder:"search_place_holder",columnClass:"col-lg-9 col-md-9 col-sm-7 col-xs-7",dataHostId:"{{ host.id }}",dataType:"host",awDraggable:"true"},enabled:{label:"Disabled?",searchSingleValue:!0,searchType:"boolean",searchValue:"false",searchOnly:!0},has_active_failures:{label:"Failed jobs?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0}},fieldActions:{enabled_flag:{iconClass:"{{ 'fa icon-enabled-' + host.enabled }}",dataPlacement:"top",awToolTip:"{{ host.enabledToolTip }}",dataTipWatch:"host.enabledToolTip",ngClick:"toggleHostEnabled(host.id, host.has_inventory_sources)"},active_failures:{awPopOver:"{{ host.job_status_html }}",dataTitle:"{{ host.job_status_title }}",awToolTip:"{{ host.badgeToolTip }}",awTipPlacement:"top",dataPlacement:"left",iconClass:"{{ 'fa icon-failures-' + host.has_active_failures }}"},edit:{ngClick:"editHost(host.id)",icon:"icon-edit",awToolTip:"Edit host",dataPlacement:"top"},"delete":{ngClick:"deleteHost(host.id, host.name)",icon:"icon-trash",awToolTip:"Delete host",dataPlacement:"top"}},actions:{columnClass:"col-lg-3 col-md-3 col-sm-5 col-xs-5",create:{mode:"all",ngClick:"createHost()",ngHide:"selected_tree_id == 1",awToolTip:"Create a new host"},stream:{ngClick:"showHostActivity()",awToolTip:"View Activity Stream",mode:"all"}}}),angular.module("JobEventsListDefinition",[]).value("JobEventList",{name:"jobevents",iterator:"jobevent",editTitle:"Job Events",index:!1,hover:!0,hasChildren:!0,filterBy:"{ show: true }",navigationLinks:{details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",active:!0,icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",icon:"icon-laptop"}},fields:{created:{label:"Created On",columnClass:"col-lg-1 col-md-1 hidden-sm hidden-xs",key:!0,nosort:!0,searchable:!1,link:!1},status:{label:"Status",showValue:!1,columnClass:"col-sm-1 col-xs-2 text-center",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}],nosort:!0,searchable:!1,ngClick:"viewJobEvent({{ jobevent.id }})",awToolTip:"{{ jobevent.statusBadgeToolTip }}",dataPlacement:"top",badgeIcon:"fa icon-job-{{ jobevent.status }}",badgePlacement:"left",badgeToolTip:"{{ jobevent.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgClick:"viewJobEvent({{ jobevent.id }})"},event_display:{label:"Event",hasChildren:!0,ngClick:"toggleChildren(jobevent.id, jobevent.related.children)",nosort:!0,searchable:!1,ngClass:"{{ jobevent.class }}",appendHTML:"jobevent.event_detail"},host:{label:"Host",ngBind:"jobevent.summary_fields.host.name",ngHref:"{{ jobevent.hostLink }}",searchField:"hosts__name",nosort:!0,searchOnly:!1,id:"job-event-host-header","class":"break",columnClass:"col-lg-2 hidden-sm hidden-xs"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{columnClass:"col-sm-1 col-xs-2",view:{label:"View",ngClick:"viewJobEvent(jobevent.id)",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("JobHostDefinition",[]).value("JobHostList",{name:"jobhosts",iterator:"jobhost",editTitle:"All summaries",index:!0,hover:!0,navigationLinks:{ngHide:"host_id !== null",details:{href:"/#/jobs/{{ job_id }}",label:"Status",icon:"icon-zoom-in",ngShow:"job_id !== null"},events:{href:"/#/jobs/{{ job_id }}/job_events",label:"Events",icon:"icon-list-ul"},hosts:{href:"/#/jobs/{{ job_id }}/job_host_summaries",label:"Host Summary",active:!0,icon:"icon-laptop"}},fields:{job:{label:"Job ID",ngClick:"showJob(jobhost.job)",columnShow:"host_id !== null",key:!0,desc:!0},host:{label:"Host",key:!0,sourceModel:"host",sourceField:"name",ngBind:"jobhost.host_name",ngHref:"jobhost.hostLinkTo"},status:{label:"Status",badgeNgHref:"{{ jobhost.statusLinkTo }}",badgeIcon:"fa icon-job-{{ jobhost.status }}",badgePlacement:"left",badgeToolTip:"{{ jobhost.statusBadgeToolTip }}",badgeTipPlacement:"top",ngHref:"{{ jobhost.statusLinkTo }}",awToolTip:"{{ jobhost.statusBadgeToolTip }}",dataPlacement:"top",searchField:"failed",searchType:"boolean",searchOptions:[{name:"success",value:0},{name:"error",value:1}]},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},ok:{label:"Success",searchable:!1},changed:{label:"Changed",searchable:!1},failures:{label:"Failure",searchable:!0,searchLabel:"Contains failed events?",searchType:"gtzero"},dark:{label:"Unreachable",searchable:!0,searchType:"gtzero",searchLabel:"Contains unreachable hosts?"},skipped:{label:"Skipped",searchable:!1}},actions:{help:{awPopOver:"<dl>\n<dt>Success</dt><dd>Tasks successfully executed on the host.</dd>\n<dt>Changed</dt><dd>Actions taken on the host.</dd>\n<dt>Failure</dt><dd>Tasks that failed on the host.</dd>\n<dt>Unreachable</dt><dd>Times the ansible server could not reach the host.</dd>\n<dt>Skipped</dt><dd>Tasks bypassed and not performed on the host due to prior task failure or the host being unreachable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Job Host Summary",id:"jobhost-help-button"},refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refresh()",ngShow:"host_id == null"}},fieldActions:{}}),angular.module("JobTemplatesListDefinition",[]).value("JobTemplateList",{name:"job_templates",iterator:"job_template",selectTitle:"Add Job Template",editTitle:"Job Templates",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addJobTemplate()",basePaths:["job_templates"],awToolTip:"Create a new template"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",icon:"icon-comments-alt",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editJobTemplate(job_template.id)",icon:"icon-edit",awToolTip:"Edit template","class":"btn-default btn-xs",dataPlacement:"top"},submit:{label:"Launch",icon:"icon-rocket",mode:"all","class":"btn-xs btn-success",ngClick:"submitJob(job_template.id)",awToolTip:"Start a job using this template",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteJobTemplate(job_template.id, job_template.name)",icon:"icon-trash","class":"btn-danger btn-xs",awToolTip:"Delete template",dataPlacement:"top"}}}),angular.module("JobsListDefinition",[]).value("JobList",{name:"jobs",iterator:"job",editTitle:"Jobs",index:!1,hover:!0,"class":"jobs-table",fields:{id:{label:"Job ID",key:!0,desc:!0,searchType:"int"},inventory:{label:"Inventory ID",searchType:"int",searchOnly:!0},created:{label:"Create On",link:!1,searchable:!1},job_template:{label:"Job Template",ngBind:"job.summary_fields.job_template.name",ngHref:"{{ '/#/job_templates/' + job.job_template }}",sourceModel:"job_template",sourceField:"name"},failed:{label:"Job failed?",searchSingleValue:!0,searchType:"boolean",searchValue:"true",searchOnly:!0,nosort:!0},status:{label:"Status","class":"job-{{ job.status }}",searchType:"select",linkTo:"{{ job.statusLinkTo }}",searchOptions:[{name:"new",value:"new"},{name:"waiting",value:"waiting"},{name:"pending",value:"pending"},{name:"running",value:"running"},{name:"successful",value:"successful"},{name:"error",value:"error"},{name:"failed",value:"failed"},{name:"canceled",value:"canceled"}],badgeIcon:"fa icon-job-{{ job.status }}",badgePlacement:"left",badgeToolTip:"{{ job.statusBadgeToolTip }}",badgeTipPlacement:"top",badgeNgHref:"{{ job.statusLinkTo }}",awToolTip:"{{ job.statusBadgeToolTip }}",dataPlacement:"top"}},actions:{refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"}},fieldActions:{submit:{label:"Relaunch",icon:"icon-rocket",mode:"all",ngClick:"submitJob(job.id, job.summary_fields.job_template.name)",awToolTip:"Start the job",dataPlacement:"top"},cancel:{label:"Stop",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Cancel a running or pending job",ngShow:"job.status == 'pending' || job.status == 'running' || job.status == 'waiting'",dataPlacement:"top"},"delete":{label:"Delete",mode:"all",ngClick:"deleteJob(job.id)",awToolTip:"Delete the job",ngShow:"job.status != 'pending' && job.status != 'running' && job.status != 'waiting'",dataPlacement:"top"},dropdown:{type:"DropDown",label:"View",icon:"fa-search-plus","class":"btn-default btn-xs",options:[{ngClick:"editJob(job.id, job.summary_fields.job_template.name)",label:"Status"},{ngClick:"viewEvents(job.id, job.summary_fields.job_template.name)",label:"Events",ngHide:"job.status == 'new'"},{ngClick:"viewSummary(job.id, job.summary_fields.job_template.name)",label:"Host Summary",ngHide:"job.status == 'new'"}]}}}),angular.module("OrganizationListDefinition",[]).value("OrganizationList",{name:"organizations",iterator:"organization",selectTitle:"Add Organizations",editTitle:"Organizations",hover:!0,index:!1,fields:{name:{key:!0,label:"Name"},description:{label:"Description"}},actions:{add:{mode:"all",ngClick:"addOrganization()",awToolTip:"Create a new organization"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{}}),angular.module("PermissionListDefinition",[]).value("PermissionList",{name:"permissions",iterator:"permission",selectTitle:"Add Permission",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',editTitle:"Permissions",index:!0,well:!0,fields:{name:{key:!0,label:"Name",ngClick:"editPermission(permission.id)"},inventory:{label:"Inventory",sourceModel:"inventory",sourceField:"name",ngBind:"permission.summary_fields.inventory.name"},project:{label:"Project",sourceModel:"project",sourceField:"name",ngBind:"permission.summary_fields.project.name"},permission_type:{label:"Permission"}},actions:{add:{mode:"all",ngClick:"addPermission()",awToolTip:"Add a new permission",ngShow:"PermissionAddAllowed"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editPermission(permission.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit permission",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deletePermission(permission.id, permission.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete permission",ngShow:"PermissionAddAllowed",dataPlacement:"top"}}}),angular.module("ProjectsListDefinition",[]).value("ProjectList",{name:"projects",iterator:"project",selectTitle:"Add Project",editTitle:"Projects",selectInstructions:"<p>Select existing projects by clicking each project or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>Create a brand new project by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description",columnClass:"hidden-sm hidden-xs",excludeModal:!0},scm_type:{label:"Type",searchType:"select",searchOptions:[],excludeModal:!0,nosort:!0},status:{label:"Status",ngClick:"showSCMStatus(project.id)",awToolTip:"View details of last SCM Update",dataPlacement:"top",badgeIcon:"{{ 'fa icon-failures-' + project.badge }}",badgePlacement:"left",searchType:"select",searchOptions:[],excludeModal:!0},last_updated:{label:"Last Updated",type:"date",excludeModal:!0,searchable:!1}},actions:{add:{mode:"all",ngClick:"addProject()",awToolTip:"Create a new project"},help:{awPopOver:"<dl>\n<dt>Updating</dt><dd>A source control update is in progress.</dd>\n<dt>Never Updated</dt><dd>This project has not yet been updated from source control.</dd>\n<dt>Failed</dt><dd>An error occurred during the most recent source control update, click the status text for more information.</dd>\n<dt>Successful</dt><dd>TThe latest source control update completed successfully.</dd>\n<dt>Missing</dt><dd>The previously configured local project directory is missing.</dd>\n<dt>N/A</dt><dd>The project is not linked to source control, so updates are not applicable.</dd>\n</dl>\n",dataPlacement:"left",dataContainer:"body",mode:"all",awToolTip:"Click for help",awTipPlacement:"top"},refresh:{mode:"all",awToolTip:"Refresh the page",ngClick:"refresh()"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editProject(project.id)",awToolTip:"Edit project properties",dataPlacement:"top"},scm_update:{label:"Update",ngClick:"SCMUpdate(project.id)",awToolTip:"{{ project.scm_update_tooltip }}",ngClass:"project.scm_type_class",dataPlacement:"top"},cancel:{label:"Stop",ngClick:"cancelUpdate(project.id, project.name)",awToolTip:"Cancel a running SCM update process",ngShow:"project.status == 'updating'",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteProject(project.id, project.name)",awToolTip:"Permanently remove project from the database",ngShow:"project.status !== 'updating'",dataPlacement:"top"}}}),angular.module("StreamListDefinition",[]).value("StreamList",{name:"activities",iterator:"activity",editTitle:"Activity Stream",selectInstructions:"",index:!1,hover:!0,"class":"table-condensed",searchWidgets:3,fields:{timestamp:{label:"Event Time",key:!0,desc:!0,noLink:!0,searchable:!1},user:{label:"Initiated by",ngBindHtml:"activity.user",sourceModel:"actor",sourceField:"username",searchPlaceholder:"Username",searchWidget:1},description:{label:"Action",ngBindHtml:"activity.description",nosort:!0,searchable:!1,columnClass:"col-lg-7"},system_event:{label:"System event",searchOnly:!0,searchType:"isnull",sourceModel:"actor",sourceField:"username",searchWidget:1},all_objects:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All resources",searchWidget:2},credential_search:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Credential name",searchWidget:2,searchField:"object1"},group_search:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Group name",searchWidget:2,searchField:"object1"},host_search:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Host name",searchWidget:2,searchField:"object1"},inventory_search:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Inventory name",searchWidget:2,searchField:"object1"},job_template_search:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Job template name",searchWidget:2,searchField:"object1"},job_search:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:2,searchField:"object1"},organization_search:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Organization name",searchWidget:2,searchField:"object1"},project_search:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Project name",searchWidget:2,searchField:"object1"},user_search:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Primary username",searchWidget:2,searchField:"object1"},all_objects3:{label:"All",searchOnly:!0,searchObject:"all",searchPlaceholder:"All related resources",searchWidget:3,searchField:"object2"},credential_search3:{label:"Credential",searchOnly:!0,searchObject:"credential",searchPlaceholder:"Related credential name",searchWidget:3,searchField:"object2"},group_search3:{label:"Group",searchOnly:!0,searchObject:"group",searchPlaceholder:"Related group name",searchWidget:3,searchField:"object2"},host_search3:{label:"Host",searchOnly:!0,searchObject:"host",searchPlaceholder:"Related host name",searchWidget:3,searchField:"object2"},inventory_search3:{label:"Inventory",searchOnly:!0,searchObject:"inventory",searchPlaceholder:"Related inventory name",searchWidget:3,searchField:"object2"},job_search3:{label:"Job",searchOnly:!0,searchObject:"job",searchPlaceholder:"Job id",searchOnID:!0,searchWidget:3,searchField:"object2"},job_template_search3:{label:"Job Template",searchOnly:!0,searchObject:"job_template",searchPlaceholder:"Related job template name",searchWidget:3,searchField:"object2"},organization_search3:{label:"Organization",searchOnly:!0,searchObject:"organization",searchPlaceholder:"Related organization name",searchWidget:3,searchField:"object2"},project_search3:{label:"Project",searchOnly:!0,searchObject:"project",searchPlaceholder:"Related project name",searchWidget:3,searchField:"object2"},user_search3:{label:"User",searchOnly:!0,searchObject:"user",searchPlaceholder:"Related username",searchWidget:3,searchField:"object2"}},actions:{refresh:{mode:"all","class":"btn-xs",awToolTip:"Refresh the page",ngClick:"refreshStream()"},close:{mode:"all",awToolTip:"Close Activity Stream view",ngClick:"closeStream()"}},fieldActions:{view:{label:"View",ngClick:"showDetail(activity.id)",icon:"fa-zoom-in","class":"btn-default btn-xs",awToolTip:"View event details",dataPlacement:"top"}}}),angular.module("TeamsListDefinition",[]).value("TeamList",{name:"teams",iterator:"team",selectTitle:"Add Team",editTitle:"Teams",selectInstructions:'Click on a row to select it, and click Finished when done. Use the green <i class="icon-plus"></i> button to create a new row.',index:!0,hover:!0,fields:{name:{key:!0,label:"Name"},description:{label:"Description"},organization:{label:"Organization",ngBind:"team.organization_name",sourceModel:"organization",sourceField:"name"}},actions:{add:{mode:"all",ngClick:"addTeam()",awToolTip:"Create a new team"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editTeam(team.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit team",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteTeam(team.id, team.name)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete team",dataPlacement:"top"}}}),angular.module("UserListDefinition",[]).value("UserList",{name:"users",iterator:"user",selectTitle:"Add Users",editTitle:"Users",selectInstructions:"<p>Select existing users by clicking each user or checking the related checkbox. When finished, click the blue <em>Select</em> button, located bottom right.</p> <p>When available, a brand new user can be created by clicking the green <em>Create New</em> button.</p>",index:!0,hover:!0,fields:{username:{key:!0,label:"Username"},first_name:{label:"First Name"},last_name:{label:"Last Name"}},actions:{add:{label:"Create New",mode:"all",ngClick:"addUser()",basePaths:["organizations","users"],"class":"btn-xs",awToolTip:"Create a new user"},stream:{ngClick:"showActivity()",awToolTip:"View Activity Stream",mode:"all"}},fieldActions:{edit:{label:"Edit",ngClick:"editUser(user.id)",icon:"icon-edit","class":"btn-xs btn-default",awToolTip:"Edit user",dataPlacement:"top"},"delete":{label:"Delete",ngClick:"deleteUser(user.id, user.username)",icon:"icon-trash","class":"btn-xs btn-danger",awToolTip:"Delete user",dataPlacement:"top"}}}),angular.module("InventorySyncStatusWidget",["RestServices","Utilities"]).factory("InventorySyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b=a.label,c=a.count,d=a.fail,e=a.link,f=a.fail_link,g="<tr>\n";
return g+='<td><a href="'+e+'"',g+="Hosts"===b||"Groups"===b?' class="pad-left-sm" ':"",g+=">"+b+"</a></td>\n",g+='<td class="',g+=d>0?"failed-column":"zero-column",g+=' text-right">',g+='<a href="'+f+'">'+d+"</a>",g+="</td>\n",g+='<td class="text-right">',g+='<a href="'+e+'">'+c+"</a>",g+="</td></tr>\n"}var d,e,f,g,h,i=a.scope,j=a.target,k=a.dashboard;if(d='<div class="panel panel-default">\n',d+='<div class="panel-heading">Inventory Sync Status</div>\n',d+='<div class="panel-body">\n',d+='<table class="table table-condensed table-hover">\n',d+="<thead>\n",d+="<tr>\n",d+='<th class="col-md-4 col-lg-3"></th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',d+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',d+="</tr>\n",d+="</thead>\n",d+="<tbody>\n",d+=c({label:"Inventories",count:k.inventories&&k.inventories.total_with_inventory_source?k.inventories.total_with_inventory_source:0,fail:k.inventories&&k.inventories.inventory_failed?k.inventories.inventory_failed:0,link:"/#/inventories/?has_inventory_sources=true",fail_link:"/#/inventories/?inventory_sources_with_failures=true"}),e=0,f=0,k.inventory_sources)for(h in k.inventory_sources)e+=k.inventory_sources[h].total?k.inventory_sources[h].total:0,f+=k.inventory_sources[h].failed?k.inventory_sources[h].failed:0;d+=c({label:"Groups",count:e,fail:f,link:"/#/home/groups/?has_external_source=true",fail_link:"/#/home/groups/?status=failed"});for(h in k.inventory_sources)k.inventory_sources[h].total&&(d+=c({label:k.inventory_sources[h].label,count:k.inventory_sources[h].total?k.inventory_sources[h].total:0,fail:k.inventory_sources[h].failed?k.inventory_sources[h].failed:0,link:"/#/home/groups/?source="+h,fail_link:"/#/home/groups/?status=failed&source="+h}));d+="</tbody>\n",d+="</table>\n",d+="</div>\n",d+="</div>\n",d+="</div>\n",g=angular.element(document.getElementById(j)),g.html(d),b(g)(i),i.$emit("WidgetLoaded")}}]),angular.module("JobStatusWidget",["RestServices","Utilities"]).factory("JobStatus",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'"',b+="Hosts"===c||"Groups"===c?' class="pad-left-sm" ':"",b+=">"+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e=a.scope,f=a.target,g=a.dashboard,h="";h='<div class="panel panel-default">\n',h+='<div class="panel-heading">Job Status</div>\n',h+='<div class="panel-body">\n',h+='<table class="table table-condensed table-hover">\n',h+="<thead>\n",h+="<tr>\n",h+='<th class="col-md-4 col-lg-3"></th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',h+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',h+="</tr>\n",h+="</thead>\n",h+="<tbody>\n",h+=c({label:"Jobs",link:"/#/jobs",count:g.jobs&&g.jobs.total?g.jobs.total:0,fail:g.jobs&&g.jobs.failed?g.jobs.failed:0,fail_link:"/#/jobs/?status=failed"}),h+=c({label:"Inventories",link:"/#/inventories",count:g.inventories&&g.inventories.total?g.inventories.total:0,fail:g.inventories&&g.inventories.job_failed?g.inventories.job_failed:0,fail_link:"/#/inventories/?has_active_failures=true"}),h+=c({label:"Groups",link:"/#/home/groups",count:g.groups&&g.groups.total?g.groups.total:0,fail:g.groups&&g.groups.job_failed?g.groups.job_failed:0,fail_link:"/#/home/groups/?has_active_failures=true"}),h+=c({label:"Hosts",link:"/#/home/hosts",count:g.hosts&&g.hosts.total?g.hosts.total:0,fail:g.hosts&&g.hosts.failed?g.hosts.failed:0,fail_link:"/#/home/hosts/?has_active_failures=true"}),h+="</tbody>\n",h+="</table>\n",h+="</div>\n",h+="</div>\n",h+="</div>\n",d=angular.element(document.getElementById(f)),d.html(h),b(d)(e),e.$emit("WidgetLoaded")}}]),angular.module("ObjectCountWidget",["RestServices","Utilities"]).factory("ObjectCount",["$rootScope","$compile","Rest","GetBasePath","ProcessErrors","Wait",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.count;return b+="<tr>\n",b+='<td class="capitalize"><a href="'+d+'"',b+="hosts"===c||"groups"===c?' class="pad-left-sm" ':"",b+=">"+c.replace(/\_/g," ")+"</a></td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+e+"</a>",b+="</td></tr>\n"}var d,e,f,g=a.scope,h=a.target,i=a.dashboard,j=["organizations","users","teams","credentials","projects","inventories","groups","hosts","job_templates","jobs"];for(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">System Summary</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-5 col-lg-4"></th>\n',e+='<th class="col-md-1 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",d=0;d<j.length;d++)e+=c({label:j[d],link:"/#/"+("hosts"===j[d]||"groups"===j[d]?"home/"+j[d]:j[d]),count:i[j[d]]&&i[j[d]].total?i[j[d]].total:0});e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",f=angular.element(document.getElementById(h)),f.html(e),b(f)(g),g.$emit("WidgetLoaded")}}]),angular.module("SCMSyncStatusWidget",["RestServices","Utilities"]).factory("SCMSyncStatus",["$rootScope","$compile",function(a,b){return function(a){function c(a){var b="",c=a.label,d=a.link,e=a.fail_link,f=a.count,g=a.fail;return b+="<tr>\n",b+='<td><a href="'+d+'">'+c+"</a></td>\n",b+='<td class="',b+=g>0?"failed-column":"zero-column",b+=' text-right">',b+='<a href="'+e+'">'+g+"</a>",b+="</td>\n",b+='<td class="text-right">',b+='<a href="'+d+'" >'+f+"</a>",b+="</td></tr>\n"}var d,e,f,g,h,i,j=a.scope,k=a.target,l=a.dashboard;if(e='<div class="panel panel-default">\n',e+='<div class="panel-heading">Project SCM Status</div>\n',e+='<div class="panel-body">\n',e+='<table class="table table-condensed table-hover">\n',e+="<thead>\n",e+="<tr>\n",e+='<th class="col-md-4 col-lg-3"></th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Failed</th>\n',e+='<th class="col-md-2 col-lg-1 text-right">Total</th>\n',e+="</tr>\n",e+="</thead>\n",e+="<tbody>\n",f=0,l.scm_types)for(h in l.scm_types)f+=l.scm_types[h].total?l.scm_types[h].total:0;e+=c({label:"Projects",link:"/#/projects",count:f,fail:l.projects&&l.projects.failed?l.projects.failed:0,fail_link:"/#/projects/?status=failed"}),i=[];for(h in l.scm_types)i.push(h);for(i.sort(),d=0;d<i.length;d++)h=i[d],l.scm_types[h].total&&(e+=c({label:l.scm_types[h].label,link:"/#/projects/?scm_type="+h,count:l.scm_types[h].total?l.scm_types[h].total:0,fail:l.scm_types[h].failed?l.scm_types[h].failed:0,fail_link:"/#/projects/?scm_type="+h+"&status=failed"}));e+="</tbody>\n",e+="</table>\n",e+="</div>\n",e+="</div>\n",e+="</div>\n",g=angular.element(document.getElementById(k)),g.html(e),b(g)(j),j.$emit("WidgetLoaded")}}]),angular.module("StreamWidget",["RestServices","Utilities","StreamListDefinition","SearchHelper","PaginationHelpers","RefreshHelper","ListGenerator","StreamWidget","AuthService"]).factory("setStreamHeight",[function(){return function(){var a=$("#stream-content").height(),b=parseInt($("#tab-content-container").css("min-height").replace(/px/,"")),c=a>b?a:b;$("#tab-content-container").css({"min-height":c})}}]).factory("ShowStream",["setStreamHeight","Authorization",function(a){return function(){var b=$("#stream-container");b.css({position:"absolute",top:0,left:0,width:"100%","min-height":"100%","background-color":"#FFF"}),a(),b.show("slide",{direction:"left"},{duration:500,queue:!1})}}]).factory("HideStream",["LoadBreadCrumbs",function(a){return function(){var b=$("#stream-container");b.hide("slide",{direction:"left"},{duration:500,queue:!1}),setTimeout(function(){b.detach(),b.empty(),b.unbind(),$("#tab-content-container").css({"min-height":0})},500),a()}}]).factory("StreamBreadCrumbs",["$rootScope","$location",function(a,b){return function(){a.breadcrumbs=[];var c,d,e,f,g=b.path().split("/");for(g.splice(0,1),e=0;e<g.length;e++){if(/^\d+/.test(g[e])){for(c="",d="",f=0;e>=f;f++)c+="/"+g[f];for(f=0;f<a.crumbCache.length;f++)if(a.crumbCache[f].path===c){d=a.crumbCache[f].title;break}d||(d=g[e-1].substr(0,g[e-1].length-1),d=d.charAt(0).toUpperCase()+d.slice(1),d="Inventorie"===d?"Inventory":d)}else{if(c="",d="",e>0)for(f=0;e>=f;f++)c+="/"+g[f];else c="/"+g[e];d=g[e],d=d.charAt(0).toUpperCase()+d.slice(1)}a.breadcrumbs.push({path:c,title:d})}}}]).factory("FixUrl",[function(){return function(a){return a.replace(/\/api\/v1\//,"/#/")}}]).factory("BuildUrl",[function(){return function(a){var b="/#/";switch(a.base){case"group":case"host":b+="home/"+a.base+"s/?id="+a.id;break;case"inventory":b+="inventories/"+a.id+"/";break;default:b+=a.base+"s/"+a.id+"/"}return b}}]).factory("BuildDescription",["FixUrl","BuildUrl",function(a,b){return function(a){function c(a){return a.replace(/^_deleted_\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d+\+\d+:\d+_/,"")}var d,e,f,g,h,i,j,k;d=a.operation,d+=/e$/.test(a.operation)?"d ":"ed ",e=d,f=a.object1,g=a.object2,h=a.summary_fields[f]?a.summary_fields[f][0]:null,i=f===g?a.summary_fields[f][1]:a.summary_fields[g]?a.summary_fields[g][0]:null,("user"===f||"user"===g)&&(a.summary_fields.user[0].name=a.summary_fields.user[0].username),i&&i.name&&!/^_delete/.test(i.name)?(i.base=g,d+=g+' <a href="'+b(i)+'">'+i.name+"</a>"+("disassociate"===a.operation?" from ":" to "),e+=g+" "+i.name+("disassociate"===a.operation?" from ":" to ")):g&&(j="",i&&i.name&&(j=" "+c(i.name)),d+=g+j+("disassociate"===a.operation?" from ":" to "),e+=g+j+("disassociate"===a.operation?" from ":" to ")),h&&h.name&&!/^\_delete/.test(h.name)?(h.base=f,d+=f+' <a href="'+b(h)+'">'+h.name+"</a>",e+=f+" "+h.name):f&&(j="",k="",!h||!h.name||h&&h.name&&/^_delete/.test(h.name)?a.changes&&a.changes.name?"string"==typeof a.changes.name?(j=" "+a.changes.name,k=j):"object"==typeof a.changes.name&&Array.isArray(a.changes.name)&&(j=" "+a.changes.name[0],k=j):"job"===f&&h&&a.changes&&a.changes.job_template?"delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+" "+a.changes.job_template+"</a>",k=" "+h.id+" "+a.changes.job_template):(j=" "+h.id+" "+a.changes.job_template,k=j):"job"===f&&h&&("delete"!==a.operation?(h.base=f,j=' <a href="'+b(h)+'">'+h.id+"</a>",k=" "+h.id):(j=" "+h.id,k=j)):h&&h.name&&(j=" "+c(h.name),k=j),d+=f+j,e+=f+k),a.description=d,a.description_nolink=e}}]).factory("ShowDetail",["$rootScope","Rest","Alert","GenerateForm","ProcessErrors","GetBasePath","FormatDate","ActivityDetailForm","Empty","Find",function(a,b,c,d,e,f,g,h,i,j){return function(a){var b,c,e,f=a.activity_id,i=a.scope,k=d,l=h,m=j({list:i.activities,key:"id",val:f});m&&(m.changes_stringified=JSON.stringify(m.changes,null,"	"),b=m.changes_stringified.match(/\n/g),c=b?b.length:1,c=1>c?3:10,l.fields.changes.rows=10,e=k.inject(l,{mode:"edit",modal:!0,related:!1}),e.changes=m.changes_stringified,e.user=(m.summary_fields.actor?m.summary_fields.actor.username:"system")+" on "+g(new Date(m.timestamps)),e.operation=m.description_nolink,e.formModalAction=function(){$("#form-modal").modal("hide")},$("#form-modal").on("show.bs.modal",function(){$("#form-modal-body").css({width:"auto",height:"auto","max-height":"100%"})}),e.formModalActionLabel="OK",e.formModalCancelShow=!1,e.formModalInfo=!1,e.formModalHeader="Event "+m.id,e.$$phase||e.$digest())}}]).factory("Stream",["$rootScope","$location","Rest","GetBasePath","ProcessErrors","Wait","StreamList","SearchInit","PaginateInit","GenerateList","FormatDate","ShowStream","HideStream","BuildDescription","FixUrl","BuildUrl","ShowDetail","StreamBreadCrumbs","setStreamHeight","Find","Store",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){return function(c){var e,f,o,v,w=g,x=d("activity_stream"),y=j,z=b.path().replace(/^\//,"").split("/")[0],A=c.scope,B=u("CurrentSearchParams"),C=c&&c.inventory_name?c.inventory_name:null,D=c&&c.url?c.url:null;a.flashMessage=null,D?x=D:"/home"!==b.path()&&(e="inventories"===z?"inventory":z.replace(/s$/,""),f=b.path().split("/"),f.splice(0,1),f.length>1&&/^\d+/.test(f[f.length-1])?(e=f[f.length-2],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?"+e+"__id="+f[f.length-1]):f.length>1?(e=f[f.length-1],e="inventories"===e?"inventory":e.replace(/s$/,""),x+="?or__object1="+e+"&or__object2="+e):x+="?or__object1="+e+"&or__object2="+e),$("#tab-content-container").append('<div id="stream-container"><div id="stream-content"></div></div><!-- Stream widget -->'),r(),C&&(o=t({list:a.breadcrumbs,key:"title",val:"{{ inventory_name }}"}),o&&(o.title=C)),l(),v=y.inject(w,{mode:"edit",id:"stream-content",searchSize:"col-lg-3",secondWidget:!0,activityStream:!0}),v.streamTitle=c&&c.title?c.title:null,v.closeStream=function(a){m(),v.searchCleanup&&v.searchCleanup(),B&&h({scope:A,set:B.set,list:B.list,url:B.defaultUrl,iterator:B.iterator,sort_order:B.sort_order,setWidgets:!1}),a&&b.path(a)},v.refreshStream=function(){v.search(w.iterator)},v.showDetail=function(a){q({scope:v,activity_id:a})},v.removeStreamPostRefresh&&v.removeStreamPostRefresh(),v.removeStreamPostRefresh=v.$on("PostRefresh",function(){var a,b,c,d,e,f;for(a=0;a<v.activities.length;a++)b=new Date(v.activities[a].timestamp),v.activities[a].timestamp=k(b),v.activities[a].user=v.activities[a].summary_fields.actor?'<a href="/#/users/'+v.activities[a].summary_fields.actor.id+'">'+v.activities[a].summary_fields.actor.username+"</a>":"system",d=/^\_delete/,e=v.activities[a].object1,f=v.activities[a].object2,e&&v.activities[a].summary_fields[e]&&v.activities[a].summary_fields[e].name?d.test(v.activities[a].summary_fields[e].name)?v.activities[a].objects=v.activities[a].summary_fields[e].name:(c=p(v.activities[a].summary_fields.object1),v.activities[a].objects='<a href="'+c+'">'+v.activities[a].summary_fields[e].name+"</a>"):v.activities[a].object1&&(v.activities[a].objects=v.activities[a].object1),f&&v.activities[a].summary_fields[f]&&v.activities[a].summary_fields[f].name?d.test(v.activities[a].summary_fields.object2.name)?v.activities[a].objects+=","+v.activities[a].summary_fields[f].name:(c=p(v.activities[a].summary_fields.object2),v.activities[a].objects+=', <a href="'+c+'">'+v.activities[a].summary_fields[f].name+"</a>"):v.activities[a].object2&&(v.activities[a].objects+=", "+v.activities[a].object2),n(v.activities[a]);setTimeout(function(){s()},500)}),h({scope:v,set:w.name,list:w,url:x}),i({scope:v,list:w,url:x}),v.search(w.iterator)}}]),angular.module("AuthService",["ngCookies","Utilities"]).factory("Authorization",["$http","$rootScope","$location","$cookieStore","GetBasePath",function(a,b,c,d,e){return{setToken:function(a,c){d.remove("token"),d.remove("token_expires"),d.remove("userLoggedIn"),d.put("token",a),d.put("token_expires",c),d.put("userLoggedIn",!0),d.put("sessionExpired",!1),b.token=a,b.userLoggedIn=!0,b.token_expires=c,b.sessionExpired=!1},isUserLoggedIn:function(){return void 0===b.userLoggedIn&&(b.userLoggedIn=d.get("userLoggedIn"),b.sessionExpired=d.get("sessionExpired")),b.userLoggedIn},getToken:function(){return b.token?b.token:d.get("token")},retrieveToken:function(b,c){return a({method:"POST",url:e("authtoken"),data:{username:b,password:c}})},logout:function(){var a=angular.element(document.getElementById("main-view")).scope();a.$destroy(),b.$destroy(),d.remove("accordions"),d.remove("token"),d.remove("token_expires"),d.remove("current_user"),d.remove("lastPath"),d.put("userLoggedIn",!1),d.put("sessionExpired",!1),d.remove("lastPath","/home"),b.current_user={},b.license_tested=void 0,b.userLoggedIn=!1,b.sessionExpired=!1,b.token=null,b.token_expires=null,b.lastPath="/home"},getLicense:function(){return a({method:"GET",url:e("config"),headers:{Authorization:"Token "+this.getToken()}})},setLicense:function(a){a.tested=!1,d.put("license",a)},licenseTested:function(){var a,c;return void 0!==b.license_tested?c=b.license_tested:(a=d.get("license"),c=a&&void 0!==a.tested?a.tested:!1),c},getUser:function(){return a({method:"GET",url:"/api/v1/me/",headers:{Authorization:"Token "+this.getToken()}})},setUserInfo:function(a){b.current_user=a.results[0],d.put("current_user",a.results[0])},restoreUserInfo:function(){b.current_user=d.get("current_user")},getUserInfo:function(a){var c;return b.current_user?b.current_user[a]:(this.restoreUserInfo(),c=d.get("current_user"),c[a])}}}]),angular.module("InventoryTree",["Utilities","RestServices","GroupsHelper","PromptDialog"]).factory("SortNodes",[function(){return function(a){var b,c,d=[],e=[];for(b=0;b<a.length;b++)d.push(a[b].name);for(d.sort(),c=0;c<d.length;c++)for(b=0;b<a.length;b++)a[b].name===d[c]&&e.push(a[b]);return e}}]).factory("BuildTree",["Rest","GetBasePath","ProcessErrors","SortNodes","Wait","GetSyncStatusMsg","GetHostsStatusMsg",function(a,b,c,d,e,f,g){return function(h){function i(a){var b,c,e=[],f=d(a);for(b=0;b<f.length;b++)e.push(f[b].id);c={name:"All Hosts",id:1,group_id:null,parent:0,description:"",show:!0,ngicon:null,has_children:!1,related:{},selected_class:"",show_failures:!1,isDraggable:!1,isDroppable:!0,children:e},q.push(c)}function j(a,b,c){var e,h,i,k,n,o,s=d(a);for(e=0;e<s.length;e++){for(r++,k=f({status:s[e].summary_fields.inventory_source.status}),n=g({active_failures:s[e].hosts_with_active_failures,total_hosts:s[e].total_hosts,inventory_id:l,group_id:s[e].id}),i=[],h=0;h<s[e].children.length;h++)i.push(s[e].children[h].id);o={name:s[e].name,has_active_failures:s[e].has_active_failures,total_hosts:s[e].total_hosts,hosts_with_active_failures:s[e].hosts_with_active_failures,total_groups:s[e].total_groups,groups_with_active_failures:s[e].groups_with_active_failures,parent:b,has_children:s[e].children.length>0?!0:!1,has_inventory_sources:s[e].has_inventory_sources,id:r,source:s[e].summary_fields.inventory_source.source,group_id:s[e].id,event_level:c,children:i,ngicon:s[e].children.length>0?"fa fa-minus-square-o node-toggle":"fa fa-square-o node-no-toggle",ngclick:"toggle("+r+")",related:{children:s[e].children.length>0?s[e].related.children:"",inventory_source:s[e].related.inventory_source},status:s[e].summary_fields.inventory_source.status,status_class:k["class"],status_tooltip:k.tooltip,launch_tooltip:k.launch_tip,launch_class:k.launch_class,hosts_status_tip:n.tooltip,show_failures:n.failures,hosts_status_class:n["class"],selected_class:"",show:!0,isDraggable:!0,isDroppable:!0},q.push(o),p&&o.group_id===p&&(m.selected_tree_id=r,m.selected_group_id=o.group_id),s[e].children.length>0&&j(s[e].children,r,c+1)}}function k(){e("start"),a.setUrl(b("inventory")+l+"/"),a.get().success(function(a){m.$emit("buildAllGroups",a.name,a.related.tree,a.related.groups)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory: "+l+". GET returned: "+b})})}var l=h.inventory_id,m=h.scope,n=h.refresh,o=h.emit,p=h.new_group_id,q=[],r=1;m.buildAllGroupsRemove&&m.buildAllGroupsRemove(),m.buildAllGroupsRemove=m.$on("buildAllGroups",function(b,d,f){a.setUrl(f),a.get().success(function(a){i(a),j(a,0,0),m.autoShowGroupHelp=0===a.length?!0:!1,n?(m.groups=q,m.$emit("GroupTreeRefreshed",d,q,o)):m.$emit("GroupTreeLoaded",d,q,o)}).error(function(a,b){e("stop"),c(m,a,b,null,{hdr:"Error!",msg:"Failed to get inventory tree for: "+l+". GET returned: "+b})})}),k()}}]).factory("UpdateGroup",["ApplyEllipsis","GetSyncStatusMsg","Empty",function(a,b,c){return function(d){var e,f,g,h,i,j=d.scope,k=d.group_id,l=d.properties;for(e=0;e<j.groups.length;e++){if(j.groups[e].group_id===k){g=j.groups[e];for(f in l)"name"===f&&(h=j.groups[e].name),"source"===f&&l[f]!==j.groups[e][f]&&(c(l[f])||"none"!==j.groups[e].status&&!c(j.groups[e].status)?l[f]||(j.groups[e].status="none"):j.groups[e].status="never updated",i=b({status:j.groups[e].status}),j.groups[e].status_class=i["class"],j.groups[e].status_tooltip=i.tooltip,j.groups[e].launch_tooltip=i.launch_tip,j.groups[e].launch_class=i.launch_class),j.groups[e][f]=l[f]}j.groups[e].id===j.selected_tree_id&&(j.selected_group_name=j.groups[e].name,j.search_place_holder="Search "+j.groups[e].name,j.hostSearchPlaceholder="Search "+j.groups[e].name)}h&&setTimeout(function(){$('#groups_table .group-name a[title="'+h+'"]').attr("title",l.name),a("#groups_table .group-name a")},2500)}}]).factory("SetNodeName",[function(){return function(a){var b=a.name,c=a.description,d=void 0!==a.group_id?a.group_id:null,e=void 0!==a.inventory_id?a.inventory_id:null;null!==d&&$("#inventory-tree").find('li [data-group-id="'+d+'"]').each(function(){$(this).attr("data-name",b),$(this).attr("data-description",c),$(this).find(".activate").first().text(b)}),null!==e&&$("#inventory-root-node").attr("data-name",b).attr("data-description",c).find(".activate").first().text(b)}}]).factory("CopyMoveGroup",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.groups,key:"id",val:b.inbound_tree_id}),m="";m+='<div id="copy-prompt-modal" class="modal fade">\n',m+='<div class="modal-dialog">\n',m+='<div class="modal-content">\n',m+='<div class="modal-header">\n',m+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',m+=1===k.id||0===l.parent?"<h3>Move Group</h3>\n":"<h3>Copy or Move?</h3>\n",m+="</div>\n",m+='<div class="modal-body">\n',1===k.id?m+="<p>Are you sure you want to move group "+l.name+" to the top level?</p>":0===l.parent?m+="<p>Are you sure you want to move group "+l.name+" from the top level and make it a child of "+k.name+"?</p>":(m+='<div class="text-center">\n',m+="<p>Would you like to copy or move group <em>"+l.name+"</em> to group <em>"+k.name+"</em>?</p>\n",m+='<div style="margin-top: 30px;">\n',m+='<a href="" ng-click="moveGroup()" class="btn btn-primary" style="margin-right: 15px;"><i class="fa fa-cut"></i> Move</a>\n',m+='<a href="" ng-click="copyGroup()" class="btn btn-primary"><i class="fa fa-copy"></i> Copy</a>\n',m+="</div>\n",m+="</div>\n"),m+="</div>\n",m+='<div class="modal-footer">\n',m+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">Cancel</a>\n',(1===k.id||0===l.parent)&&(m+='<a href="" data-target="#prompt-modal" ng-click="moveGroup()" class="btn btn-primary">Yes</a>\n'),m+="</div>\n",m+="</div><!-- modal-content -->\n",m+="</div><!-- modal-dialog -->\n",m+="</div><!-- modal -->\n",i=angular.element(document.getElementById("inventory-modal-container")),i.empty().append(m),a(i)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.moveGroup=function(){var a,b,i;$("#copy-prompt-modal").modal("hide"),e("start"),j.removeGroupRemove&&j.removeGroupRemove(),j.removeGroupRemove=j.$on("removeGroup",function(){l.parent>0?(i=d({list:j.groups,key:"id",val:l.parent}),a=h("base")+"groups/"+i.group_id+"/children/",f.setUrl(a),f.post({id:l.group_id,disassociate:1}).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to remove "+l.name+" from "+i.name+". POST returned status: "+b})})):j.$emit("GroupDeleteCompleted")}),a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id},f.setUrl(a),f.post(b).success(function(){j.$emit("removeGroup")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})},j.copyGroup=function(){$("#copy-prompt-modal").modal("hide"),e("start");var a=g(k.group_id)?h("inventory")+j.inventory_id+"/groups/":h("base")+"groups/"+k.group_id+"/children/",b={id:l.group_id,name:l.name,description:l.description,inventory:j.inventory_id};f.setUrl(a),f.post(b).success(function(){j.$emit("GroupDeleteCompleted")}).error(function(a,b){var d=g(k.group_id)?"inventory":k.name;e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+d+". POST returned status: "+b})})}}}]).factory("CopyMoveHost",["$compile","Alert","ProcessErrors","Find","Wait","Rest","Empty","GetBasePath",function(a,b,c,d,e,f,g,h){return function(b){var g,i,j=b.scope,k=d({list:j.groups,key:"id",val:b.target_tree_id}),l=d({list:j.hosts,key:"id",val:b.host_id}),m=!1,n="";if(l.summary_fields.all_groups)for(i=0;i<l.summary_fields.all_groups.length;i++)if(l.summary_fields.all_groups[i].id===k.group_id){m=!0;break}m?(n+='<div id="copy-alert-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" ng-hide="disableButtons" data-target="#copy-alert-modal"\n',n+='data-dismiss="modal" class="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Already in Group</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+='<div class="alert alert-info"><p>Host '+l.name+" is already in group "+k.name+".</p></div>\n",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#copy-alert-modal" data-dismiss="modal" class="btn btn-primary">OK</a>\n',n+="</div>\n",n+="</div>\n",n+="</div>\n",n+="</div>\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-alert-modal").modal({backdrop:"static",keyboard:!0,show:!0})):(n="",n+='<div id="copy-prompt-modal" class="modal fade">\n',n+='<div class="modal-dialog">\n',n+='<div class="modal-content">\n',n+='<div class="modal-header">\n',n+='<button type="button" class="close" data-target="#copy-prompt-modal" data-dismiss="modal" aria-hidden="true">&times;</button>\n',n+="<h3>Copy Host</h3>\n",n+="</div>\n",n+='<div class="modal-body">\n',n+="<p>Are you sure you want to copy host "+l.name+" to group "+k.name+"?</p>",n+="</div>\n",n+='<div class="modal-footer">\n',n+='<a href="#" data-target="#prompt-modal" data-dismiss="modal" class="btn btn-default">No</a>\n',n+='<a href="" data-target="#prompt-modal" ng-click="copyHost()" class="btn btn-primary">Yes</a>\n',n+="</div>\n",n+="</div><!-- modal-content -->\n",n+="</div><!-- modal-dialog -->\n",n+="</div><!-- modal -->\n",g=angular.element(document.getElementById("inventory-modal-container")),g.empty().append(n),a(g)(j),$("#copy-prompt-modal").modal({backdrop:"static",keyboard:!0,show:!0}),j.copyHost=function(){$("#copy-prompt-modal").modal("hide"),e("start"),f.setUrl(h("groups")+k.group_id+"/hosts/"),f.post(l).success(function(){j.$emit("GroupTreeRefreshed")}).error(function(a,b){e("stop"),c(j,a,b,null,{hdr:"Error!",msg:"Failed to add "+l.name+" to "+k.name+". POST returned status: "+b})})})}}]),angular.module("RestServices",["ngCookies","AuthService"]).factory("Rest",["$http","$rootScope","$cookieStore","$q","Authorization",function(a,b,c,d,e){return{headers:{},setUrl:function(a){this.url=a},checkExpired:function(){return b.sessionTimer.isExpired()},pReplace:function(){var a,b;for(a in this.params)b=new RegExp("\\:"+a,"gm"),b.test(this.url)&&(this.url=this.url.replace(b,this.params[a]),delete this.params[a])},createResponse:function(a,b){var c=d.reject({data:a,status:b});return c.success=function(a){return c.then(function(b){a(b.data,b.status)},null),c},c.error=function(a){return c.then(null,function(b){a(b.data,b.status)}),c},c},setHeader:function(a){for(var b in a)this.headers[b]=a[b]},get:function(b){b=b?b:{},this.params=b.params?b.params:null,this.pReplace();var c=this.checkExpired(),d=e.getToken();return c?this.createResponse({detail:"Token is expired"},401):d?(this.setHeader({Authorization:"Token "+d}),this.setHeader({"X-Auth-Token":"Token "+d}),a({method:"GET",url:this.url,headers:this.headers,params:this.params})):this.createResponse({detail:"Invalid token"},401)},post:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"POST",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},put:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"PUT",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},destroy:function(b){var c=e.getToken(),d=this.checkExpired();return d?this.createResponse({detail:"Token is expired"},401):c?(this.setHeader({Authorization:"Token "+c}),this.setHeader({"X-Auth-Token":"Token "+c}),a({method:"DELETE",url:this.url,headers:this.headers,data:b})):this.createResponse({detail:"Invalid token"},401)},options:function(){var b=e.getToken(),c=this.checkExpired();return c?this.createResponse({detail:"Token is expired"},401):b?(this.setHeader({Authorization:"Token "+b}),this.setHeader({"X-Auth-Token":"Token "+b}),a({method:"OPTIONS",url:this.url,headers:this.headers})):this.createResponse({detail:"Invalid token"},401)}}}]),angular.module("TimerService",["ngCookies","Utilities"]).factory("Timer",["$rootScope","$cookieStore","$location","GetBasePath","Empty",function(a,b){return{sessionTime:null,timeout:null,getSessionTime:function(){return this.sessionTime?this.sessionTime:b.get("sessionTime")},isExpired:function(){var a=this.getSessionTime(),b=(new Date).getTime();return 0>=a-b?!0:(this.moveForward(),!1)},expireSession:function(){this.sessionTime=0,a.sessionExpired=!0,b.put("sessionExpired",!0)},moveForward:function(){var c=(new Date).getTime()+1e3*$AnsibleConfig.session_timeout;this.sessionTime=c,b.put("sessionTime",c),a.sessionExpired=!1,b.put("sessionExpired",!1)},init:function(){return this.moveForward(),this}}}]),angular.module("Utilities",["RestServices","Utilities"]).factory("ClearScope",[function(){return function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()});try{$("#help-modal").dialog("close")}catch(a){}$(window).unbind("resize")}}]).factory("Empty",[function(){return function(a){return null===a||void 0===a||""===a?!0:!1}}]).factory("ToggleClass",function(){return function(a,b){$(a)&&$(a).hasClass(b)?$(a).removeClass(b):$(a)&&$(a).addClass(b)}}).factory("Alert",["$rootScope",function(a){return function(b,c,d,e,f,g){f?(a.alertHeader2=b,a.alertBody2=c,a.alertClass2=d?d:"alert-danger",$("#alert-modal2").modal({show:!0,keyboard:!0,backdrop:"static"}),a.disableButtons2=g?!0:!1,e&&$("#alert-modal2").on("hidden",function(){e()}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal2").modal("hide"),e&&e())})):(a.alertHeader=b,a.alertBody=c,a.alertClass=d?d:"alert-danger",$("#alert-modal").modal({show:!0,keyboard:!0,backdrop:"static"}),$(document).bind("keydown",function(a){27===a.keyCode&&($("#alert-modal").modal("hide"),e&&e())}),a.disableButtons=g?!0:!1,e&&$("#alert-modal").on("hidden",function(){e()}))}}]).factory("ProcessErrors",["$rootScope","$cookieStore","$log","$location","Alert","Wait",function(a,b,c,d,e,f){return function(b,c,g,h,i){var j,k,l;if(f("stop"),$AnsibleConfig.debug_mode&&console&&(console.log("Debug status: "+g),console.log("Debug data: "),console.log(c)),403===g)l="The API responded with a 403 Access Denied error. ",l+=c.detail?"Detail: "+c.detail:"Please contact your system administrator.",e(i.hdr,l);else if(401===g&&c.detail&&"Token is expired"===c.detail||401===g&&c.detail&&"Invalid token"===c.detail)a.sessionTimer.expireSession(),d.url("/login");else if(c.non_field_errors)e("Error!",c.non_field_errors);else if(c.detail)e(i.hdr,i.msg+" "+c.detail);else if(c.__all__)e("Error!",c.__all__);else if(h){k=!1;for(j in h.fields)c[j]&&h.fields[j].tab&&$("#"+h.name+'_tabs a[href="#'+h.fields[j].tab+'"]').tab("show"),h.fields[j].realName&&c[h.fields[j].realName]&&(b[j+"_api_error"]=c[h.fields[j]][0],$('[name="'+h.fields[j].realName+'"]').addClass("ng-invalid"),k=!0),h.fields[j].sourceModel?c[j]&&(b[h.fields[j].sourceModel+"_"+h.fields[j].sourceField+"_api_error"]=c[j][0],$('[name="'+h.fields[j].sourceModel+"_"+h.fields[j].sourceField+'"]').addClass("ng-invalid"),k=!0):c[j]&&(b[j+"_api_error"]=c[j][0],$('[name="'+j+'"]').addClass("ng-invalid"),k=!0);
!k&&i&&e(i.hdr,i.msg)}else e(i.hdr,i.msg)}}]).factory("LoadBreadCrumbs",["$rootScope","$routeParams","$location","Empty",function(a,b,c,d){return function(b){function e(a){return a.toUpperCase()}function f(a){return"ies"===a?"y":""}var g,h,i,j,k,l,m,n;if(!d(b)){for(h=!1,j=0;j<a.crumbCache.length;j++)if(a.crumbCache[j].path===b.path){h=!0,a.crumbCache[j]=b;break}h||a.crumbCache.push(b)}if(k=c.path().replace(/^\//,"").split("/"),l="",a.breadcrumbs=[],k.length>1)for(j=0;j<k.length-1;j++){if(j>0&&k[j].match(/\d+/)){for(m=k[j-1],n=m.replace(/(ies$|s$)/,f),n=n.charAt(0).toUpperCase()+n.slice(1),h=!1,i=0;i<a.crumbCache.length;i++)if(a.crumbCache[i].path==="/"+m+"/"+k[j]){n=a.crumbCache[i].title,h=!0;break}a.breadcrumbs.push(h&&void 0!==a.crumbCache[i].altPath?{title:n,path:a.crumbCache[i].altPath}:{title:n,path:l+"/"+k[j]})}else/_/.test(k[j])&&(k[j]=k[j].replace(/(?:^|_)\S/g,e).replace(/_/g," ")),g=k[j].charAt(0).toUpperCase()+k[j].slice(1),a.breadcrumbs.push({title:g,path:l+"/"+k[j]});l+="/"+k[j]}}}]).factory("HelpDialog",["$rootScope","$location","Store",function(a,b,c){return function(a){function b(a){function g(a){var b="";return b+="<h4>"+a.intro+"</h4>\n",b+='<div class="img-container">\n',b+='<img src="'+$basePath+"img/help/"+a.img.src+'" >',b+="</div>\n",b+='<div class="help-box">'+a.box+"</div>",b+=f&&a.autoOffNotice?'<div class="help-auto-off"><label><input type="checkbox" name="auto-off-checkbox" id="auto-off-checkbox"> Do not show this message in the future</label></div>\n':""}var h,i,j,k,l=!1;e=a,j=d.story.width?d.story.width:510,k=d.story.height?d.story.height:600,i=$(document).width(),j=j>i?i:j;try{l=$("#help-modal").dialog("isOpen")}catch(m){}l?$("#help-modal").html(g(d.story.steps[e])):(h=[],d.story.steps.length>1&&(h.push({text:"Prev",click:function(a){e-1===0&&$(a.target).button("disable"),e-1<d.story.steps.length-1&&$(a.target).next().button("enable"),b(e-1)},disabled:!0}),h.push({text:"Next",click:function(a){e+1>0&&$(a.target).prev().button("enable"),e+1===d.story.steps.length-1&&$(a.target).button("disable"),b(e+1)}})),h.push({text:"Close",click:function(){$("#help-modal").dialog("close")}}),$("#help-modal").html(g(d.story.steps[e])).dialog({position:{my:"center top",at:"center top+150",of:"body"},title:d.story.hdr,width:j,height:k,buttons:h,closeOnEscape:!0,show:500,hide:500,resizable:!1,close:function(){$("#help-modal").empty()}}),$(".ui-dialog-buttonset button").each(function(){var a,b,c;c=$(this).text(),"Close"===c?(b="fa-times",a="btn btn-default",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Close')):"Prev"===c?(b="fa-chevron-left",a="btn btn-primary",$(this).attr({"class":a}).html('<i class="fa '+b+'"></i> Prev')):(b="fa-chevron-right",a="btn btn-primary",$(this).attr({"class":a}).html('Next <i class="fa '+b+'"></i>').css({"margin-right":"20px"}))}),$('.ui-dialog[aria-describedby="help-modal"]').find(".ui-dialog-titlebar button").empty().attr({"class":"close"}).text("x"),$("#auto-off-checkbox").click(function(){$('input[name="auto-off-checkbox"]:checked').length?c("inventoryAutoHelp","off"):c("inventoryAutoHelp","on")}))}var d=a.defn,e=a.step,f=a.autoShow||!1;b(0)}}]).factory("ReturnToCaller",["$location","Empty",function(a,b){return function(c){var d,e=a.path().replace(/^\//,"").split("/"),f="";for(c=b(c)?e.length-1:c+1,d=0;c>d;d++)f+="/"+e[d];a.path(f)}}]).factory("FormatDate",["$filter",function(a){return function(b){return a("date")(b,"MM/dd/yy HH:mm:ss")}}]).factory("Wait",["$rootScope",function(a){return function(b){var c,d,e,f,g,h;"start"!==b||a.waiting?"stop"===b&&a.waiting&&$(".spinny, .overlay").fadeOut(400,function(){a.waiting=!1}):(a.waiting=!0,c=$(window).width(),d=$(window).height(),e=$(".spinny").width(),f=$(".spinny").height(),g=(c-e)/2,h=(d-f)/2,$(".overlay").css({width:$(document).width(),height:$(document).height()}).fadeIn(),$(".spinny").css({top:h,left:g}).fadeIn(400))}}]).factory("HideElement",[function(){return function(a,b){var c=$(a),d=c.css("width"),e=c.css("height"),f=c.position(),g=c.parent(),h=c.css("border-radius"),i=c.css("background-color"),j=c.css("margin"),k=c.css("padding");g.append('<div id="curtain-div" style="position: absolute;top: '+f.top+"px; left: "+f.left+"px; z-index: 1000; width: "+d+"; height: "+e+"; background-color: "+i+"; margin: "+j+"; padding: "+k+"; border-radius: "+h+'; opacity: .75; display: none; "></div>'),$("#curtain-div").show(0,b)}}]).factory("ShowElement",[function(){return function(){$("#curtain-div").fadeOut(500,function(){$(this).remove()})}}]).factory("GetChoices",["Rest","ProcessErrors",function(a,b){return function(c){var d=c.scope,e=c.url,f=c.field,g=c.variable,h=c.callback,i=c.choice_name;d[g]?d[g].length=0:d[g]=[],a.setUrl(e),a.options().success(function(a){var b,c;for(b=i?a.actions.GET[f][i]:a.actions.GET[f].choices,c=0;c<b.length;c++)d[g].push({label:b[c][1],value:b[c][0],name:b[c][1]});h&&d.$emit(h)}).error(function(a,c){b(d,a,c,null,{hdr:"Error!",msg:"Failed to get "+e+". GET status: "+c})})}}]).factory("Find",[function(){return function(a){var b,c=a.list,d=a.key,e=a.val,f=!1;if("object"==typeof c&&Array.isArray(c)){for(b=0;b<a.list.length;b++)if(c[b][d]===e){f=!0;break}return f?c[b]:null}return null}}]).factory("DebugForm",[function(){return function(a){var b,c=a.form,d=a.scope;for(b in c.fields)d[c.name+"_form"][b]&&console.log(b+" valid: "+d[c.name+"_form"][b].$valid),c.fields[b].sourceModel&&d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField]&&console.log(c.fields[b].sourceModel+"_"+c.fields[b].sourceField+" valid: "+d[c.name+"_form"][c.fields[b].sourceModel+"_"+c.fields[b].sourceField].$valid);console.log("form pristine: "+d[c.name+"_form"].$pristine),console.log("form valid: "+d[c.name+"_form"].$valid)}}]).factory("Store",["Empty",function(a){return function(b,c){if(a(c)){if(!a(b)){var d=localStorage[b];return a(d)?null:JSON.parse(d)}}else localStorage[b]=JSON.stringify(c)}}]).factory("ApplyEllipsis",[function(){return function(a){var b=$("#string-test");b.length||($("body").append('<div style="display:none;" id="string-test"></div>'),b=$("#string-test")),$(a).each(function(){var a,c,d,e,f,g=!0;$(this).attr("title")?(a=$(this).attr("title"),g=!1):a=$(this).text(),b.text(a),c=b.width(),d=$(this).parent().width(),c>d&&(g&&$(this).attr("title",a),e=c/a.length,f=c-d,a=a.substr(0,a.length-(Math.ceil(f/e)+3)),$(this).text(a+"...")),d>c&&!g&&(a=$(this).attr("title"),$(this).text(a))})}}]),angular.module("ApiLoader",["Utilities"]).factory("LoadBasePaths",["$http","$rootScope","Store","ProcessErrors",function(a,b,c,d){return function(){a.get("/api/").success(function(e){var f=e.current_version;a.get(f).success(function(a){a.base=f,b.defaultUrls=a,c("api",a)}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read "+f+". GET status: "+c})})}).error(function(a,c){b.defaultUrls={status:"error"},d(null,a,c,null,{hdr:"Error",msg:"Failed to read /api. GET status: "+c})})}}]).factory("GetBasePath",["$rootScope","Store","LoadBasePaths","Empty",function(a,b,c,d){return function(c){return d(a.defaultUrls)?b("api")?(a.defaultUrls=b("api"),a.defaultUrls[c]):"":a.defaultUrls[c]}}]),angular.module("AWDirectives",["RestServices","Utilities","AuthService","JobsHelper"]).directive("awpassmatch",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=c.awpassmatch,e=$('input[name="'+b+'"]').val();return a===e?(d.$setValidity("awpassmatch",!0),a):void d.$setValidity("awpassmatch",!1)})}}}).directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c=a.split(" "),e="";for(b=0;b<c.length;b++)e+=c[b].charAt(0).toUpperCase()+c[b].substr(1)+" ";return e=e.trim(),e!==a&&(d.$setViewValue(e),d.$render()),e})}}}).directive("integer",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){return d.$setValidity("min",!0),d.$setValidity("max",!0),/^\-?\d*$/.test(a)?(d.$setValidity("integer",!0),b.attr("min")&&(""===a||null===a||parseInt(a,10)<parseInt(b.attr("min"),10))?void d.$setValidity("min",!1):b.attr("max")&&parseInt(a,10)>parseInt(b.attr("max"),10)?void d.$setValidity("max",!1):a):void d.$setValidity("integer",!1)})}}}).directive("awRequiredWhen",function(){return{require:"ngModel",link:function(a,b,c,d){function e(){var e,f=b.val(),g=!0;!a[c.awRequiredWhen]||null!==b.attr("required")&&void 0!==b.attr("required")?a[c.awRequiredWhen]||(b.removeAttr("required"),$(b).hasClass("lookup")?(e=$(b).parent().parent().parent().find("label").first(),e.removeClass("prepend-asterisk")):$(b).parent().parent().find("label").first().removeClass("prepend-asterisk")):($(b).attr("required","required"),$(b).hasClass("lookup")?$(b).parent().parent().parent().find("label").first().addClass("prepend-asterisk"):$(b).parent().parent().find("label").first().addClass("prepend-asterisk")),!a[c.awRequiredWhen]||void 0!==f&&null!==f&&""!==f||(g=!1),d.$setValidity("required",g)}void 0!==c.awrequiredInit&&null!==c.awrequiredInit&&(a[c.awRequiredWhen]=c.awrequiredInit,e()),a.$watch(c.awRequiredWhen,function(){e()}),a.$watch($(b).attr("name"),function(){e()})}}}).directive("awPlaceholder",[function(){return{require:"ngModel",link:function(a,b,c){$(b).attr("placeholder",a[c.awPlaceholder]),a.$watch(c.awPlaceholder,function(a){$(b).attr("placeholder",a)})}}}]).directive("awlookup",["Rest",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(d){if(""!==d&&null!==d){var f=c.attr("data-url");f=f.replace(/\:value/,encodeURI(d)),b[c.attr("data-source")]=null,a.setUrl(f),a.get().then(function(a){var f=a.data.results;return f.length>0?(b[c.attr("data-source")]=f[0].id,b[c.attr("name")]=f[0].name,e.$setValidity("required",!0),e.$setValidity("awlookup",!0),d):(e.$setValidity("required",!0),void e.$setValidity("awlookup",!1))})}else e.$setValidity("awlookup",!0),b[c.attr("data-source")]=null})}}}]).directive("awValidUrl",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b,c,e=!0;""!==a&&(d.$setValidity("required",!0),b=/^(https|http|ssh)\:\/\//,c=/\@/g,(!b.test(a)||c.test(a))&&(e=!1)),d.$setValidity("awvalidurl",e)})}}}]).directive("awToolTip",function(){return function(a,b,c){var d,e=void 0!==c.delay&&null!==c.delay?c.delay:$AnsibleConfig.tooltip_delay;d=c.awTipPlacement?c.awTipPlacement:void 0!==c.placement&&null!==c.placement?c.placement:"left",$(b).on("hidden.bs.tooltip",function(){$(".tooltip").each(function(){$(this).remove()})}),$(b).tooltip({placement:d,delay:e,html:!0,title:c.awToolTip,container:"body"}),c.tipWatch&&a.$watch(c.tipWatch,function(a,c){a!==c&&$(b).tooltip("hide").attr("data-original-title",a).tooltip("fixTitle")})}}).directive("awPopOver",["$compile",function(a){return function(b,c,d){var e=void 0!==d.placement&&null!==d.placement?d.placement:"left",f=void 0!==d.title&&null!==d.title?d.title:"Help",g=void 0!==d.container?d.container:!1;$(c).popover({placement:e,delay:0,title:f,content:d.awPopOver,trigger:"manual",html:!0,container:g}),$(c).click(function(){var c=$(this).attr("id");$(".help-link, .help-link-white").each(function(){c!==$(this).attr("id")&&$(this).popover("hide")}),$(".popover").each(function(){$(this).remove()}),$(".tooltip").each(function(){$(this).hide()}),$(this).popover("toggle"),$(".popover").each(function(){a($(this))(b)})}),$(document).bind("keydown",function(a){27===a.keyCode&&($(c).popover("hide"),$(".popover").each(function(){$(this).remove()}))})}}]).directive("ngSlider",[function(){return{require:"ngModel",link:function(a,b,c,d){var e=b.attr("name");$("#"+e+"-slider").slider({value:0,step:1,min:b.attr("min"),max:b.attr("max"),slide:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.$$phase||a.$digest()}}),$("#"+e+"-number").change(function(){$("#"+e+"-slider").slider("value",parseInt($(this).val(),10))})}}}]).directive("awMultiSelect",[function(){return{require:"ngModel",link:function(a,b){$(b).multiselect({buttonClass:"btn-default, btn-mini",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,buttonText:function(a){if(0===a.length)return'None selected <b class="caret"></b>';if(a.length>3)return a.length+' selected  <b class="caret"></b>';var b="";return a.each(function(){b+=$(this).text()+", "}),b.substr(0,b.length-2)+' <b class="caret"></b>'}})}}}]).directive("ngSpinner",[function(){return{require:"ngModel",link:function(a,b,c,d){var e,f;e=b.attr("data-disabled"),f={value:0,step:1,min:b.attr("min"),max:b.attr("max"),numberFormat:"d",spin:function(b,c){d.$setViewValue(c.value),d.$setValidity("required",!0),d.$setValidity("min",!0),d.$setValidity("max",!0),d.$dirty=!0,d.$render(),a.job_templates_form.$dirty=!0,a.$$phase||a.$digest()}},e&&(f.disabled=!0),$(b).spinner(f)}}}]).directive("chkPass",[function(){return{require:"ngModel",link:function(a,b,c,d){$(b).keyup(function(){var c=!0,e=chkPass(b.val());b.val()&&(c=e>$AnsibleConfig.password_strength?!0:!1),d.$setValidity("complexity",c),a.$$phase||a.$digest()})}}}]).directive("awRefresh",["$rootScope",function(a){return{link:function(b){function c(){for(var a=""+b.refreshCnt;a.length<2;)a="0"+a;return"Refresh in "+a+" sec."}b.refreshCnt=$AnsibleConfig.refresh_rate,b.refreshMsg=c(),a.timer&&clearInterval(a.timer),a.timer=setInterval(function(){b.refreshCnt--,b.refreshCnt<=0&&(b.refresh(),b.refreshCnt=$AnsibleConfig.refresh_rate),b.refreshMsg=c(),b.$$phase||b.$digest()},1e3)}}}]).directive("awMultiselect",[function(){return{require:"^form",link:function(a,b,c,d){$(b).select2({multiple:!0,data:function(){if(a[c.awMultiselect]){var b,d=a[c.awMultiselect],e=[];for(b=0;b<d.length;b++)e.push({id:d[b].value,text:d[b].label});return{results:e}}return{results:{id:"",text:""}}}}),$(b).on("change",function(){d.$setDirty(),a.$$phase||a.$digest()})}}}]).directive("awDraggable",[function(){return function(a,b,c){if("true"===c.awDraggable){var d=c.containment;$(b).draggable({containment:d,scroll:!0,revert:"invalid",helper:"clone",start:function(a,b){b.helper.addClass("draggable-clone")},zIndex:100,cursorAt:{left:-1}})}}}]).directive("awDroppable",["Find",function(a){return function(b,c,d){var e;"true"===d.awDroppable&&$(c).droppable({accept:function(c){if("group"===c.attr("data-type")){if($(this).attr("data-group-id")===c.attr("data-group-id"))return!1;if(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)})){var d,f=parseInt(c.attr("data-group-id"),10),g=!1;for(d=0;d<e.children.length;d++)if(e.children[d]===f){g=!0;break}return g?!1:!0}return!1}return"host"===c.attr("data-type")?(e=a({list:b.groups,key:"id",val:parseInt($(this).attr("data-tree-id"),10)}),e.id>1?!0:!1):!1},over:function(){$(this).addClass("droppable-hover")},out:function(){$(this).removeClass("droppable-hover")},drop:function(a,c){$(this).removeClass("droppable-hover"),"group"===c.draggable.attr("data-type")?b.$emit("CopyMoveGroup",parseInt(c.draggable.attr("data-tree-id"),10),parseInt($(this).attr("data-tree-id"),10)):"host"===c.draggable.attr("data-type")&&b.$emit("CopyMoveHost",parseInt($(this).attr("data-tree-id"),10),parseInt(c.draggable.attr("data-host-id"),10))},tolerance:"pointer"})}}]),angular.module("AWFilters",[]).filter("capitalize",[function(){return function(a){var b,c,d;if(a){for(b=a.replace(/\_/g," ").split(" "),c="",d=0;d<b.length;d++)c+=b[d].charAt(0).toUpperCase()+b[d].substr(1)+" ";return c.trim()}}}]),angular.module("FormGenerator",["GeneratorHelpers","ngCookies","Utilities"]).factory("GenerateForm",["$rootScope","$location","$cookieStore","$compile","SearchWidget","PaginateWidget","Attr","Icon","Column","NavigationLink","HelpCollapse","Button","DropDown","Empty","SelectIcon",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{setForm:function(a){this.form=a},attr:g,icon:h,accordion_count:0,scope:null,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},inject:function(a,b){var c,e,f,g;if(c=angular.element(b.modal?b.modal_body_id?document.getElementById(b.modal_body_id):document.getElementById("form-modal-body"):b.id?document.getElementById(b.id):document.getElementById("htmlTemplate")),this.mode=b.mode,this.modal=b.modal?!0:!1,this.setForm(a),c.html(b.html?b.html:this.build(b)),this.scope=b.scope?b.scope:c.scope(),d(c)(this.scope),!b.html){for(e in a.fields)this.scope[e]=null;for(f in a.related)this.scope[f]=null;(!b.modal&&b.related||this.form.forceListeners)&&this.addListeners(),"add"===b.mode&&this.applyDefaults()}$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize"),$('.form-control[required], input[type="radio"][required]').each(function(){var a,b;n($(this).attr("aw-required-when"))&&(a=$(this).parent().parent().find("label").first(),"radio"===$(this).attr("type")&&(a=$(this).parent().parent().parent().find("label").first()),a.length>0&&(b=a.children("span"),b.length>0&&!b.first().hasClass("prepend-asterisk")?b.first().addClass("prepend-asterisk"):b.length<=0&&!a.first().hasClass("prepend-asterisk")&&a.first().addClass("prepend-asterisk")))});try{$("#help-modal").empty().dialog("destroy")}catch(h){}return b.modal&&(this.scope.formModalActionDisabled=!1,this.scope.formModalInfo=!1,a&&(b.modal_title_id?this.scope[b.modal_title_id]="add"===b.mode?a.addTitle:a.editTitle:this.scope.formModalHeader="add"===b.mode?a.addTitle:a.editTitle),b.modal_selector?($(b.modal_selector).modal({show:!0,backdrop:"static",keyboard:!0}),$(b.modal_selector).on("shown.bs.modal",function(){$(b.modal_select+" input:first").focus()}),$(b.modal_selector).on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})):(g=b.show_modal===!1?!1:!0,$("#form-modal").modal({show:g,backdrop:"static",keyboard:!0}),$("#form-modal").on("shown.bs.modal",function(){$("#form-modal input:first").focus()}),$("#form-modal").on("hidden.bs.modal",function(){$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()})})),$(document).bind("keydown",function(a){27===a.keyCode&&(b.modal_selector&&$(b.modal_selector).modal("hide"),$("#prompt-modal").modal("hide"),$("#form-modal").modal("hide"))})),this.scope.$$phase||this.scope.$digest(),this.scope},applyDefaults:function(){for(var a in this.form.fields)(this.form.fields[a]["default"]||0===this.form.fields[a]["default"])&&(this.scope[a]="select"===this.form.fields[a].type&&this.scope[a+"_options"]?this.scope[a+"_options"][this.form.fields[a]["default"]]:this.form.fields[a]["default"])},reset:function(){function a(a,b){if("checkbox_group"===a.type)for(var e=0;e<a.fields.length;e++)c[a.fields[e].name]="",c[a.fields[e].name+"_api_error"]="",c[d.name+"_form"][a.fields[e].name].$setValidity("apiError",!0);else c[b]="",c[b+"_api_error"]="";a.sourceModel&&(c[a.sourceModel+"_"+a.sourceField]="",c[a.sourceModel+"_"+a.sourceField+"_api_error"]="",c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),"lookup"===a.type&&c[d.name+"_form"][a.sourceModel+"_"+a.sourceField]&&(c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setPristine(),c[d.name+"_form"][a.sourceModel+"_"+a.sourceField].$setValidity("apiError",!0)),c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setPristine(),c[d.name+"_form"][b].$setValidity("apiError",!0)),a.chkPass&&c[d.name+"_form"][b]&&(c[d.name+"_form"][b].$setValidity("complexity",!0),$("#progbar").css({width:0})),a.awPassMatch&&c[d.name+"_form"][b]&&c[d.name+"_form"][b].$setValidity("awpassmatch",!0),a.ask&&(c[b+"_ask"]=!1)}var b,c=this.scope,d=this.form;c[d.name+"_form"]&&c[d.name+"_form"].$setPristine();for(b in d.fields)a(d.fields[b],b);if(d.statusFields)for(b in d.statusFields)a(d.statusFields[b],b);"add"===this.mode&&this.applyDefaults()},addListeners:function(){this.modal?$(".jqui-accordion-modal").accordion({collapsible:!1,heightStyle:"content",active:0}):(this.scope.accordionToggle=function(a){$(a).collapse("toggle"),$(a+"-icon").hasClass("fa-minus")?$(a+"-icon").removeClass("fa-minus").addClass("fa-plus"):$(a+"-icon").removeClass("fa-plus").addClass("fa-minus")},$(".jqui-accordion").each(function(){var a,d,e,f=!1,g=c.get("accordions"),h=!1;if(g)for(a=$(this).attr("id"),d=b.path().replace(/^\//,"").split("/")[0],e=0;e<g.length&&h===!1;e++)g[e].base===d&&g[e].id===a&&(h=!0,f=g[e].active);h===!1&&"true"===$(this).attr("data-open")&&(f=0),$(this).accordion({collapsible:!1,heightStyle:"content",active:f,activate:function(){$(".jqui-accordion").each(function(){var a,d,e=$(this).accordion("option","active"),f=$(this).attr("id"),g=b.path().replace(/^\//,"").split("/")[0],h=c.get("accordions");for((null===h||void 0===h)&&(h=[]),d=!1,a=0;a<h.length&&d===!1;a++)h[a].base===g&&h[a].id===f&&(d=!0,h[a].active=e);d===!1&&h.push({base:g,id:f,active:e}),c.put("accordions",h)})}})}))},genID:function(){var a=new Date;return a.getTime()},headerField:function(a,b){var c="";return b.label&&(c+="<label>"+b.label+"</label>\n"),c+='<input type="text" name="'+a+'" ',c+='ng-model="'+a+'" ',c+=b["class"]?g(b,"class"):"",c+=" readonly />\n"},clearApiErrors:function(){for(var a in this.form.fields)this.form.fields[a].sourceModel?(this.scope[this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+"_api_error"]="",$('[name="'+this.form.fields[a].sourceModel+"_"+this.form.fields[a].sourceField+'"]').removeClass("ng-invalid")):this.form.fields[a].realName?(this.scope[this.form.fields[a].realName+"_api_error"]="",$('[name="'+this.form.fields[a].realName+'"]').removeClass("ng-invalid")):(this.scope[a+"_api_error"]="",$('[name="'+a+'"]').removeClass("ng-invalid"));this.scope.$$phase||this.scope.$digest()},button:l,navigationLink:j,buildHelpCollapse:function(a){var b,c="",d={};for(b=0;b<a.length;b++)d.hdr=a[b].hdr,d.content=a[b].content,d.idx=this.accordion_count++,d.show=a[b].show?a[b].show:null,d.bind=a[b].ngBind?a[b].ngBind:null,c+=k(d);return c},buildField:function(a,b,c,d){function e(){var a;return a=d.formFieldSize?d.formFieldSize:b.xtraWide?"col-lg-10":b.column?"col-lg-8":!d.formFieldSize&&c.modal?"col-lg-10":"col-lg-6"}function f(){var a;return a=d.formLabelSize?d.formLabelSize:b.column?"col-lg-4":!d.formLabelSize&&c.modal?"col-lg-2":"col-lg-2"}function i(a,b,c){var d="";return d+=a.id?g(a,"id"):'id="'+c.name+"_"+b+'" '}function j(a,b,c,d,e){var f="",h=void 0!==e&&e===!1?!1:!0;return h&&(f+='<label class="',f+=void 0===b.inline||b.inline===!0?"checkbox-inline":"",f+=b.labelClass?" "+b.labelClass:"",f+='">'),f+='<input type="checkbox" ',f+=g(b,"type"),f+='ng-model="'+c+'" ',f+='name="'+c+'" ',f+=b.ngChange?g(b,"ngChange"):"",f+='id="'+a.name+"_"+c+'_chbox" ',f+=void 0!==d?"_"+d:"",f+='class="',f+=b["class"]?b["class"]+" ":"",f+='"',f+=void 0!==b.trueValue?g(b,"trueValue"):"",f+=void 0!==b.falseValue?g(b,"falseValue"):"",f+=b.checked?"checked ":"",f+=b.readonly?"disabled ":"",f+=" > ",h&&(f+=b.label+" ",f+=b.awPopOver?g(b,"awPopOver",c):"",f+="</label>\n"),f}function l(){var c="";return(b.label||b.labelBind)&&(c+="<label ",c+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",(q||b.labelClass)&&(c+='class="',c+=b.labelClass?b.labelClass:"",c+=q?" "+f():"",c+='" '),c+=b.labelNGClass?'ng-class="'+b.labelNGClass+'" ':"",c+='for="'+a+'">',c+=b.icon?h(b.icon):"",c+='<span class="label-text">'+b.label+"</span>",c+=b.awPopOver&&!b.awPopOverRight?g(b,"awPopOver",a):"",c+="</label>\n"),c}var m,n,o,p="",q=this.form.horizontal?!0:!1;if("alertblock"===b.type&&(p+='<div class="row">\n',p+='<div class="',p+=c.modal||c.id?"col-lg-12":"col-lg-8 col-lg-offset-2",p+='">\n',p+='<div class="alert',p+=void 0===b.closeable||b.closeable===!0?" alert-dismissable":"",p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=">\n",p+=void 0===b.closeable||b.closeable===!0?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n':"",p+=b.alertTxt,p+="</div>\n",p+="</div>\n",p+="</div>\n"),"hidden"===b.type&&("edit"===c.mode&&b.includeOnEdit||"add"===c.mode&&b.includeOnAdd)&&(p+='<input type="hidden" ng-model="'+a+'" name="'+a+'" />'),!b.readonly||b.readonly&&"edit"===c.mode){if(p+='<div class="form-group" ',p+=b.ngShow?this.attr(b,"ngShow"):"",p+=b.ngHide?this.attr(b,"ngHide"):"",p+=">\n",("text"===b.type||"password"===b.type||"email"===b.type)&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+=b.clear||b.genMD5?'<div class="input-group">\n':"",(null===b.control||void 0===b.control||b.control)&&(p+="<input ",p+=this.attr(b,"type"),p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.chkPass?"chk-pass ":"",p+=i(b,a,this.form),p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+='class="form-control',p+=b["class"]?" "+this.attr(b,"class"):"",p+='" ',p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+=b.awPassMatch?'awpassmatch="'+b.associated+'" ':"",p+=b.capitalize?"capitalize ":"",p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=void 0!==b.autocomplete?this.attr(b,"autocomplete"):"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=b.awValidUrl?"aw-valid-url ":"",p+=b.associated&&this.form.fields[b.associated].ask?'ng-disabled="'+b.associated+'_ask" ':"",p+=b.awMultiselect?'aw-multiselect="'+b.awMultiselect+'" ':"",p+=" >\n"),b.clear&&(p+='<span class="input-group-btn"><button type="button" ',p+='id="'+this.form.name+"_"+a+'_clear_btn" ',p+='class="btn btn-default" ng-click="clear(\''+a+"','"+b.associated+'\')" aw-tool-tip="Clear '+b.label+'" id="'+a+'-clear-btn" ',p+=b.ask?'ng-disabled="'+a+'_ask" ':"",p+=' ><i class="fa fa-undo"></i></button>\n',p+="</span>\n</div>\n",b.ask&&(p+='<label class="checkbox-inline ask-checkbox" ',p+=b.askShow?'ng-show="'+b.askShow+'" ':"",p+=">",p+='<input type="checkbox" ng-model="'+a+'_ask" ng-change="ask(\''+a+"','"+b.associated+"')\" ",p+='id="'+this.form.name+"_"+a+'_ask_chbox" ',p+="> Ask at runtime?</label>")),b.genMD5&&(p+='<span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="genMD5(\''+a+'\')" aw-tool-tip="Generate '+b.label+'" data-placement="top" id="'+this.form.name+"_"+a+'_gen_btn"><i class="fa fa-magic"></i></button></span>\n</div>\n'),("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),"email"===b.type&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.email">A valid email address is required!</div>\n'),b.awPassMatch&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.awpassmatch">Must match Password value</div>\n'),b.awValidUrl&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.awvalidurl\">URL must begin with ssh, http or https and may not contain '@'</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',b.chkPass&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.complexity">Password must be stronger</div>\n',p+='<div class="pw-progress">\n',p+='<div class="progress progress-striped">\n',p+='<div id="progbar" class="progress-bar" role="progress"></div>\n',p+="</div>\n",p+=k({hdr:"Password Complexity",content:'<p>A password with reasonable strength is required. As you type the password a progress bar will measure the strength. Sufficient strength is reached when the bar turns green.</p><p>Password strength is judged using the following:</p><ul class="pwddetails"><li>Minimum 8 characters in length</li>\n<li>Contains a sufficient combination of the following items:\n<ul>\n<li>UPPERCASE letters</li>\n<li>Numbers</li>\n<li>Symbols _!@#$%^&*()</li>\n</ul>\n</li>\n</ul>\n',idx:this.accordion_count++,show:null}),p+="</div><!-- pw-progress -->\n"),p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"textarea"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",("variables"===a||"extra_vars"===a||"inventory_variables"===a||"source_vars"===a)&&(p+='<div class="parse-selection" id="'+this.form.name+"_"+a+'_parse_type">Parse as: <input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="yaml"> <span class="parse-label">YAML</span>\n',p+='<input type="radio" ng-model="',p+=b.parseTypeName?b.parseTypeName:"parseType",p+='" value="json"> <span class="parse-label">JSON</span>\n',p+="</div>\n"),p+="<textarea ",p+=b.rows?this.attr(b,"rows"):"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly||b.showonly?"readonly ":"",p+="></textarea>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"select"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<select ",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=this.attr(b,"ngOptions"),p+=b.ngChange?this.attr(b,"ngChange"):"",p+=i(b,a,this.form),p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.multiSelect?"multiple ":"",p+=b.readonly?"readonly ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=">\n",p+='<option value="">',p+=b.defaultOption?b.defaultOption:"Choose a "+b.label.toLowerCase(),p+="</option>\n",p+="</select>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"),"number"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<input ",p+=b.spinner?"":'type="text" ',p+='" value="'+b["default"]+'" ',p+='class="form-control',p+=b["class"]?" "+b["class"]:"",p+='" ',p+=b.slider?'ng-slider="'+a+'" ':"",p+=b.spinner?'ng-spinner="'+a+'" ':"",p+='ng-model="'+a+'" ',p+='name="'+a+'" ',p+=i(b,a,this.form),p+=b.min||0===b.min?this.attr(b,"min"):"",p+=b.max?this.attr(b,"max"):"",p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.slider?'id="'+a+'-number"':b.id?this.attr(b,"id"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.readonly?"readonly ":"",p+=b.integer?"integer ":"",p+=b.disabled?'data-disabled="true" ':"",p+=" >\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(void 0!==b.min||void 0!==b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be an integer between '+b.min+" and ",p+=void 0!==b.max?b.max:"unlimited",p+="</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div>\n"),"checkbox_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="checkbox-group" ',p+='id="'+this.form.name+"_"+a+'_chbox_group" ',p+=">\n",m=0;m<b.fields.length;m++)p+=j(this.form,b.fields[m],b.fields[m].name,m);
("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),b.integer&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+'.$error.integer">Must be an integer value</div>\n'),(b.min||b.max)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$error.min || "+this.form.name+"_form."+a+'.$error.max">Must be in range '+b.min+" to "+b.max+"</div>\n"),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox-group -->\n",p+="</div>\n"}if("checkbox"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="checkbox">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+=j(this.form,b,a,void 0,!1),p+=b.icon?h(b.icon):"",p+='<span class="label-text">'+b.label+"</span>",p+=b.awPopOver?this.attr(b,"awPopOver",a):"",p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- checkbox -->\n",q&&(p+="</div>\n")),"radio_group"===b.type){for(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",m=0;m<b.options.length;m++)p+='<label class="radio-inline" ',p+=b.options[m].ngShow?this.attr(b.options[m],"ngShow"):"",p+=">",p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.options[m].value+'" ',p+='ng-model="'+a+'" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+="add"===c.mode&&b.addRequired?"required ":"",p+=b.ngDisabled?this.attr(b,"ngDisabled"):"",p+=" > "+b.options[m].label+"\n",p+="</label>\n";("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+a+".$dirty && "+this.form.name+"_form."+a+'.$error.required">A value is required!</div>\n'),p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+=b.helpCollapse?this.buildHelpCollapse(b.helpCollapse):"",p+="</div>\n"}"radio"===b.type&&(q&&(n=e(),o=12-parseInt(n.replace(/[A-Z,a-z,-]/g,""),10),p+='<div class="'+n+" col-lg-offset-"+o+'">\n'),p+='<div class="radio">\n',p+="<label ",p+=b.labelBind?'ng-bind="'+b.labelBind+'" ':"",p+='for="'+a+'">',p+='<input type="radio" ',p+='name="'+a+'" ',p+='value="'+b.value+'" ',p+='ng-model="'+b.ngModel+'" ',p+=b.ngChange?g(b,"ngChange"):"",p+=b.readonly?"disabled ":"",p+=b.ngDisabled?g(b,"ngDisabled"):"",p+=" > ",p+=b.label,p+="</label>\n",p+='<div class="error api-error" ng-bind="'+a+'_api_error"></div>\n',p+="</div><!-- radio -->\n",q&&(p+="</div>\n")),"lookup"!==b.type||void 0!==b.excludeMode&&b.excludeMode===c.mode||(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+='<div class="input-group">\n',p+='<span class="input-group-btn">\n',p+='<button type="button" class="lookup-btn btn btn-default" '+this.attr(b,"ngClick")+'><i class="fa fa-search"></i></button>\n',p+="</span>\n",p+='<input type="text" class="form-control input-medium lookup" ',p+='ng-model="'+b.sourceModel+"_"+b.sourceField+'" ',p+='name="'+b.sourceModel+"_"+b.sourceField+'" ',p+='class="form-control" ',p+=b.ngChange?this.attr(b,"ngChange"):"",p+=b.id?this.attr(b,"id"):"",p+=b.placeholder?this.attr(b,"placeholder"):"",p+="edit"===c.mode&&b.editRequired?"required ":"",p+=b.awRequiredWhen?'data-awrequired-init="'+b.awRequiredWhen.init+'" aw-required-when="'+b.awRequiredWhen.variable+'" ':"",p+=" awlookup >\n",p+="</div>\n",("add"===c.mode&&b.addRequired||"edit"===c.mode&&b.editRequired||b.awRequiredWhen)&&(p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.required">A value is required!</div>\n'),p+='<div class="error" ng-show="'+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+".$dirty && "+this.form.name+"_form."+b.sourceModel+"_"+b.sourceField+'.$error.awlookup">Value not found</div>\n',p+='<div class="error api-error" ng-bind="'+b.sourceModel+"_"+b.sourceField+'_api_error"></div>\n',p+="</div>\n"),"custom"===b.type&&(p+=l(),p+="<div ",p+=q?'class="'+e()+'"':"",p+=">\n",p+="<div ",p+='id="'+d.name+"_"+a+'" ',p+=b.controlNGClass?'ng-class="'+b.controlNGClass+'" ':"",p+=">\n",p+=b.control,p+="</div>\n",p+="</div>\n"),p+="</div>\n"}return p},getActions:function(a){var b,c='<div class="list-actions">\n';for(b in this.form.actions)("all"===this.form.actions[b].mode||this.form.actions[b].mode===a.mode)&&(c+=this.button({btn:this.form.actions[b],action:b,toolbar:!0}));return c+="</div>\n"},breadCrumbs:function(a,c){var d,e,f="";if(f+='<div class="nav-path">\n',f+='<ul class="breadcrumb">\n',f+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',c){e=b.path().replace(/^\//,"").split("/"),2===e.length&&(f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n"),f+='<li class="active"> </li>\n',f+="</ul>\n",f+='<div class="dropdown">\n';for(d in c)if(c[d].active){f+='<a href="" class="toggle" ',f+='data-toggle="dropdown" ',f+=">"+c[d].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}f+='<ul class="dropdown-menu" role="menu">\n';for(d in c)f+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+c[d].href+'" ',f+=">",f+='<i class="fa fa-check" style="visibility: ',f+=c[d].active?"visible":"hidden",f+='"></i> ',f+=c[d].listLabel?c[d].listLabel:c[d].label,f+="</a></li>\n";f+="</ul>\n",f+="</div><!-- dropdown -->\n",f+="</div><!-- nav-path -->\n"}else f+='<li class="active">',f+="edit"===a.mode?this.form.editTitle:this.form.addTitle,f+="</li>\n</ul>\n</div><!-- nav-path -->\n";return f},build:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p="";if(this.modal||void 0!==a.breadCrumbs&&a.breadCrumbs!==!0||(p+=this.form.navigationLinks?this.breadCrumbs(a,this.form.navigationLinks):this.breadCrumbs(a)),!this.modal&&this.form.statusFields){if(p+='<div class="well">\n',this.form.statusActions){p+='<div class="list-actions">\n';for(c in this.form.statusActions)b=this.form.statusActions[c],p+=this.button({btn:b,action:c,toolbar:!0});p+="</div>\n"}p+='<div class="form status-fields">\n';for(f in this.form.statusFields)g=this.form.statusFields[f],p+=this.buildField(f,g,a,this.form);p+="</div><!-- status fields -->\n",p+="</div><!-- well -->\n"}if(this.form.fieldsAsHeader){p+='<div class="well">\n',p+='<form class="form-inline" name="'+this.form.name+'_form" id="'+this.form.name+'_form" novalidate >\n';for(f in this.form.fields)g=this.form.fields[f],p+=this.headerField(f,g,a);p+="</form>\n",p+="</div>\n"}else{if(this.form.collapse&&this.form.collapseMode===a.mode&&(p+='<div id="'+this.form.name+'-collapse-0" ',p+=this.form.collapseOpen?'data-open="true" ':"",p+='class="jqui-accordion">\n',p+="<h3>"+this.form.collapseTitle+"</h3>\n",p+="<div>\n",a.collapseAlreadyStarted=!0),!this.modal&&this.has("well")&&(p+='<div class="well">\n'),!this.modal&&this.form.actions&&(p+=this.getActions(a)),!a.modal&&this.form.showTitle){if(p+='<div class="form-title">',p+="edit"===a.mode?this.form.editTitle:this.form.addTitle,this.has("titleActions")){p+='<div class="title-actions pull-right">\n';for(d in this.form.titleActions)p+=this.button({btn:this.form.titleActions[d],action:d,toolbar:!0});p+="</div>\n"}p+="</div>\n",p+='<hr class="form-title-hr">\n'}if(p+='<form class="',p+=this.form.horizontal?"form-horizontal":"",p+=this.form["class"]?" "+this.form["class"]:"",p+='" name="'+this.form.name+'_form" id="'+this.form.name+'_form" autocomplete="off" novalidate>\n',p+='<div ng-show="flashMessage != null && flashMessage != undefined" class="alert alert-info">{{ flashMessage }}</div>\n',this.form.twoColumns){p+='<div class="row">\n',p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],1===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 1 -->\n",p+='<div class="col-lg-6">\n';for(f in this.form.fields)g=this.form.fields[f],2===g.column&&(p+=this.buildField(f,g,a,this.form));p+="</div><!-- column 2 -->\n",p+="</div>\n"}else if(this.form.tabs){for(p+='<ul id="'+this.form.name+'_tabs" class="nav nav-tabs">\n',h=0;h<this.form.tabs.length;h++)k=this.form.tabs[h],p+="<li",0===h&&(p+=' class="active"'),p+='><a href="#'+k.name+'" data-toggle="tab">'+k.label+"</a></li>\n";for(p+="</ul>\n",p+='<div class="tab-content">\n',h=0;h<this.form.tabs.length;h++){k=this.form.tabs[h],p+='<div class="tab-pane',0===h&&(p+=" active"),p+='" id="'+k.name+'">\n';for(f in this.form.fields)this.form.fields[f].tab===k.name&&(p+=this.buildField(f,this.form.fields[f],a,this.form));p+="</div>\n"}p+="</div>\n"}else{i="",j="";for(f in this.form.fields)g=this.form.fields[f],a.modal&&g.excludeModal||(g.group&&g.group!==j&&(""!==j&&(p+="</div>\n"),p+='<div class="well">\n',p+="<h5>"+g.group+"</h5>\n",j=g.group),g.section&&g.section!==i&&(""!==i?p+="</div>\n":(p+="</div>\n",p+='<div id="'+this.form.name+'-collapse" class="jqui-accordion-modal">\n'),l=this.form[g.section+"Show"]?' ng-show="'+this.form[g.section+"Show"]+'"':"",p+="<h3"+l+">"+g.section+"</h3>\n",p+="<div"+l+">\n",i=g.section),p+=this.buildField(f,g,a,this.form));""!==i&&(p+="</div>\n</div>\n"),""!==j&&(p+="</div>\n")}if(!this.modal&&this.has("buttons")){this.form.twoColumns&&(p+='<div class="row">\n',p+='<div class="col-lg-12">\n',p+="<hr />\n"),p+='<div class="buttons" ',p+='id="'+this.form.name+'_controls" ',p+=">\n",this.form.horizontal&&(m=2,this.form.buttons.labelClass&&(m=parseInt(this.form.buttons.labelClass.replace(/[A-Z,a-z,-]/g,""))),n=12-m,p+='<div class="col-lg-offset-'+m+" col-lg-"+n+">\n");for(d in this.form.buttons)"object"==typeof this.form.buttons[d]&&(e=this.form.buttons[d],"save"===d&&(e.label="Save",e["class"]="btn-success"),"reset"===d&&(e.label="Reset",e["class"]="btn-default"),p+='<button type="button" ',p+='class="btn btn-sm',p+=e["class"]?" "+e["class"]:"",p+='" ',p+='id="'+this.form.name+"_"+d+'_btn" ',e.ngClick&&(p+=this.attr(e,"ngClick")),e.ngDisabled&&("reset"!==d?(p+='ng-disabled="'+this.form.name+"_form.$pristine || "+this.form.name+"_form.$invalid",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" '):(p+='ng-disabled="'+this.form.name+"_form.$pristine",p+=this.form.allowReadonly?" || "+this.form.name+"ReadOnly == true":"",p+='" ')),p+=">",p+=o({action:d}),p+=" "+e.label+"</button>\n");p+="</div><!-- buttons -->\n",this.form.horizontal&&(p+="</div>\n"),this.form.twoColumns&&(p+="</div>\n",p+="</div>\n")}p+="</form>\n",!this.modal&&this.has("well")&&(p+="</div>\n"),this.form.collapse&&this.form.collapseMode===a.mode&&(p+="</div>\n")}return!this.modal&&a.related&&this.form.related&&(p+=this.buildCollections(a)),p},buildCollections:function(a){var b,c,d,g,h,j,k,l,m=1,n=this.form;b=a.collapseAlreadyStarted?"":'<div id="'+this.form.name+"-collapse-"+m+'" class="jqui-accordion">\n';for(h in n.related)if("collection"===n.related[h].type){b+='<h3 class="'+h+'_collapse">'+n.related[h].title+"<h3>\n",b+="<div>\n",n.related[h].instructions&&(b+='<div class="alert alert-info alert-block">\n',b+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',b+="<strong>Hint: </strong>"+n.related[h].instructions+"\n",b+="</div>\n"),b+='<div class="row">\n',b+=e({iterator:n.related[h].iterator,template:n.related[h],mini:!0}),b+='<div class="col-lg-8">\n',b+='<div class="list-actions">\n';for(c in n.related[h].actions)j=n.related[h].actions[c],b+=this.button({btn:j,action:c,toolbar:!0});b+="</div>\n",b+="</div>\n",b+="</div><!-- row -->\n",b+='<div class="list">\n',b+='<table id="'+h+'_table" class="'+n.related[h].iterator+' table table-condensed table-hover">\n',b+="<thead>\n",b+="<tr>\n",b+=void 0===n.related[h].index||n.related[h].index!==!1?"<th>#</th>\n":"";for(g in n.related[h].fields)b+='<th class="list-header" id="'+n.related[h].iterator+"-"+g+'-header" ng-click="sort(\''+n.related[h].iterator+"', '"+g+"')\">"+n.related[h].fields[g].label,b+=' <i class="',b+=n.related[h].fields[g].key?n.related[h].fields[g].desc?"icon-sort-down":"icon-sort-up":"icon-sort",b+='"></i></a></th>\n';b+="<th></th>\n",b+="</tr>\n",b+="</thead>",b+="<tbody>\n",b+='<tr ng-repeat="'+n.related[h].iterator+" in "+h+'" >\n',(void 0===n.related[h].index||n.related[h].index!==!1)&&(b+="<td>{{ $index + (("+n.related[h].iterator+"_page - 1) * "+n.related[h].iterator+"_page_size) + 1 }}.</td>\n"),k=1,l=n.related[h].base?n.related[h].base:h,l=l.replace(/^\//,"");for(g in n.related[h].fields)k++,b+=i({list:n.related[h],fld:g,options:a,base:l});b+='<td class="actions">';for(c in n.related[h].fieldActions)d=n.related[h].fieldActions[c],b+="<a ",b+=d.href?'href="'+d.href+'" ':"",b+=d.ngClick?this.attr(d,"ngClick"):"",b+=d.ngHref?this.attr(d,"ngHref"):"",b+=d.ngShow?this.attr(d,"ngShow"):"",b+=">",b+=o({action:c}),b+=d.label?" "+d.label:"",b+="</a>";b+="</td>",b+="</tr>\n",b+='<tr class="loading-info" ng-show="'+n.related[h].iterator+"Loading == false && ("+h+" == null || "+h+'.length == 0)">\n',b+='<td colspan="'+k+'"><div class="loading-info">No records matched your search.</div></td>\n',b+="</tr>\n",b+='<tr ng-show="'+n.related[h].iterator+'Loading == true">\n',b+='<td colspan="'+k+'"><div class="loading-info">Loading...</div></td>\n',b+="</tr>\n",b+="</tbody>\n",b+="</table>\n",b+="</div>\n",b+=f({set:h,iterator:n.related[h].iterator,mini:!0}),b+="</div>\n",m++}return b+="</div>\n",b+="</div>\n"}}}]),angular.module("GeneratorHelpers",["GeneratorHelpers"]).factory("Attr",function(){return function(a,b,c){var d,e,f,g="string"==typeof a[b]?a[b].replace(/[\'\"]/g,"&quot;"):a[b];if(/^ng/.test(b))f="ng-"+b.replace(/^ng/,"").toLowerCase()+'="'+g+'" ';else if(/^data|^aw/.test(b)&&"awPopOver"!==b){for(e="",d=0;d<b.length;d++)e+=/[A-Z]/.test(b.charAt(d))?"-"+b.charAt(d).toLowerCase():b.charAt(d);f=e+'="'+g+'" '}else switch(b){case"trueValue":f='ng-true-value="'+g+'" ';break;case"falseValue":f='ng-false-value="'+g+'" ';break;case"awPopOver":f='<a id="awp-'+c+'" href="" aw-pop-over=\''+g+"' ",f+=a.dataPlacement?'data-placement="'+a.dataPlacement.replace(/[\'\"]/g,"&quot;")+'" ':"",f+=a.dataContainer?'data-container="'+a.dataContainer.replace(/[\'\"]/g,"&quot;")+'" ':"",f+='class="help-link" ',f+='><i class="fa fa-question-circle"></i></a> ';break;case"columnShow":f='ng-show="'+g+'" ';break;case"icon":f='<i class="fa fa-'+g,f+=a.iconSize?" "+a.iconSize:"",f+='"></i>';break;case"autocomplete":f='autocomplete="',f+=g?"true":"false",f+='" ';break;default:f=b+'="'+g+'" '}return f}}).factory("Icon",function(){return function(a){return'<i class="fa '+a+'"></i> '}}).factory("SelectIcon",["Icon",function(a){return function(b){var c,d=b.action,e=b.size;switch(d){case"help":c="fa-question-circle";break;case"add":case"create":c="fa-plus";break;case"edit":c="fa-pencil";break;case"delete":c="fa-trash-o";break;case"group_update":c="fa-exchange";break;case"scm_update":c="fa-cloud-download";break;case"cancel":c="fa-minus-circle";break;case"run":case"rerun":case"submit":c="fa-rocket";break;case"stream":c="fa-clock-o";break;case"refresh":c="fa-refresh";break;case"close":c="fa-arrow-left";break;case"save":c="fa-check-square-o";break;case"properties":c="fa-wrench";break;case"reset":c="fa-undo";break;case"view":c="fa-search-plus";break;case"sync_status":c="fa-cloud"}return c+=e?" "+e:"",a(c)}}]).factory("Button",["Attr","SelectIcon",function(a,b){return function(c){var d=c.btn,e=c.action,f=c.toolbar,g="";return f&&(d.class="btn-xs btn-primary",d.iconSize="fa-lg",delete d.label),g+='<button type="button" ',g+='class="btn',g+=d["class"]?" "+d["class"]:" btn-sm",g+=d.awPopOver?" help-link-white":"",g+='" ',g+=d.ngClick?a(d,"ngClick"):"",d.id?g+='id="'+d.id+'" ':e&&(g+='id="'+e+'_btn" '),g+=d.ngHide?a(d,"ngHide"):"",g+=d.awToolTip?a(d,"awToolTip"):"",g+=d.awToolTip&&void 0===d.dataPlacement?'data-placement="top" ':"",g+=d.awPopOver?'aw-pop-over="'+d.awPopOver.replace(/[\'\"]/g,"&quot;")+'" ':"",g+=d.dataPlacement?a(d,"dataPlacement"):"",g+=d.dataContainer?a(d,"dataContainer"):"",g+=d.dataTitle?a(d,"dataTitle"):"",g+=d.ngShow?a(d,"ngShow"):"",g+=d.ngHide?a(d,"ngHide"):"",g+=d.ngDisabled?a(d,"ngHide"):"",g+=d.ngClass?a(d,"ngClass"):"",g+=d.awTipPlacement?a(d,"awTipPlacement"):"",g+=" >",g+=d.img?'<img src="'+$basePath+"img/"+d.img+'" style="width: 12px; height: 12px;" >':"",g+=b({action:e,size:d.iconSize}),g+=d.label?" "+d.label:"",g+="</button> "}}]).factory("NavigationLink",["Attr","Icon",function(a,b){return function(c){var d="<a ";return d+=c.href?a(c,"href"):"",d+=c.ngClick?a(c,"ngClick"):"",d+=c.ngShow?a(c,"ngShow"):"",d+=">",d+=c.icon?b(c.icon):"",d+=c.label?c.label:"",d+="</a>\n"}}]).factory("DropDown",["Attr","Icon",function(a,b){return function(a){var c,d,e,f,g=a.list,h=a.fld;for(e=a.field?a.field:a.type?g[a.type][h]:g.fields[h],f=e.label.replace(/ /g,"_"),d=void 0===a.td||a.td!==!1?'<td class="'+h+'-column">\n':"",d+='<div class="dropdown">\n',d+='<a href="" class="toggle',d+='" ',d+=e.ngDisabled?'ng-disabled="'+e.ngDisabled+'" ':"",d+='data-toggle="dropdown" ',d+=">",d+=e.icon?b(e.icon):"",d+=e.label,d+=' <span class="caret"></span></a>\n',d+='<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dropdownMenu1">\n',c=0;c<e.options.length;c++)d+='<li role="presentation"><a role="menuitem" tabindex="-1" ',d+='ng-click="'+e.options[c].ngClick+'" ',d+=e.options[c].ngShow?'ng-show="'+e.options[c].ngShow+'" ':"",d+=e.options[c].ngHide?'ng-hide="'+e.options[c].ngHide+'" ':"",d+='href="">'+e.options[c].label+"</a></li>\n";return d+="</ul>\n",d+="</div>\n",d+=void 0===a.td||a.td!==!1?"</td>\n":""}}]).factory("BadgeCount",[function(){return function(a){var b,c=a.list,d=a.fld,e=c.fields[d];return b='<td class="'+d+"-column",b+=e.columnClass?" "+e.columnClass:"",b+='">\n',b+='<a ng-href="'+e.ngHref+'" aw-tool-tip="'+e.awToolTip+'"',b+=e.dataPlacement?' data-placement="'+e.dataPlacement+'"':"",b+=">",b+='<span class="badge',b+=e["class"]?" "+e["class"]:"",b+='">',b+="{{ "+c.iterator+"."+d+" }}",b+="</span>",b+=e.badgeLabel?" "+e.badgeLabel:"",b+="</a>\n",b+="</td>\n"}}]).factory("Badge",[function(){return function(a){var b,c="";if(a.badges)for(b=0;b<a.badges.length;b++)a.badges[b].toolTip&&(c+='<a href="" aw-tool-tip="'+a.badges[b].toolTip+'"',c+=a.badges[b].toolTipPlacement?' data-placement="'+a.badges[b].toolTipPlacement+'"':"",c+=a.badges[b].badgeShow?' ng-show="'+a.badges[b].badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badges[b].badgeShow?'ng-show="'+a.badges[b].badgeShow+'" ':"",c+=' class="field-badge '+a.badges[b].icon,c+=a.badges[b].badgeClass?" "+a.badges[b].badgeClass:"",c+='"></i>',a.badges[b].toolTip&&(c+="</a>"),c+="\n";else a.badgeToolTip&&(c+="<a ",c+=a.badgeNgHref?'ng-href="'+a.badgeNgHref+'" ':'href=""',c+=a.ngClick?'ng-click="'+a.ngClick+'" ':"",c+=' aw-tool-tip="'+a.badgeToolTip+'"',c+=a.badgeTipPlacement?' data-placement="'+a.badgeTipPlacement+'"':"",c+=a.badgeTipWatch?' data-tip-watch="'+a.badgeTipWatch+'"':"",c+=a.badgeShow?' ng-show="'+a.badgeShow+'"':"",c+=">"),c+="<i ",c+=a.badgeShow?'ng-show="'+a.badgeShow+'" ':"",c+=' class="field-badge '+a.badgeIcon,c+=a.badgeClass?" "+a.badgeClass:"",c+='"></i>',a.badgeToolTip&&(c+="</a>"),c+="\n";return c}}]).factory("Breadcrumbs",["Attr",function(a){return function(b){var c,d,e=b.list,f=b.mode,g="";if(g+='<div class="nav-path">\n',g+='<ul class="breadcrumb" id="breadcrumb-list">\n',g+='<li ng-repeat="crumb in breadcrumbs"><a href="{{ \'#\' + crumb.path }}">{{ crumb.title }}</a></li>\n',e.navigationLinks){d=e.navigationLinks,d.ngHide?(g+='<li class="active" ng-show="'+d.ngHide+'">',g+=e.editTitle,g+="</li>\n",g+='<li class="active" ng-hide="'+d.ngHide+'"> </li>\n'):(g+='<li class="active"> </li>\n',g+="</ul>\n"),g+='<div class="dropdown" ',g+=d.ngHide?a(d,"ngHide"):"",g+=">\n";for(c in d)if("object"==typeof d[c]&&d[c].active){g+='<a href="" class="toggle" ',g+='data-toggle="dropdown" ',g+=">"+d[c].label+' <i class="fa fa-chevron-circle-down crumb-icon"></i></a>';break}g+='<ul class="dropdown-menu" role="menu">\n';for(c in d)"object"==typeof d[c]&&(g+='<li role="presentation"><a role="menuitem" tabindex="-1" href="'+d[c].href+'" ',g+=">",g+='<i class="fa fa-check" style="visibility: ',g+=d[c].active?"visible":"hidden",g+='"></i> ',g+=d[c].label,g+="</a></li>\n");g+="</ul>\n",g+="</div><!-- dropdown -->\n",g+="</div><!-- nav-path -->\n"}else g+='<li class="active">',g+="select"===f?e.selectTitle:e.editTitle,g+="</li>\n</ul>\n</div>\n";return g}}]).factory("Column",["Attr","Icon","DropDown","Badge","BadgeCount",function(a,b,c,d,e){return function(f){var g,h=f.list,i=f.fld,j=f.options,k=f.base,l=h.fields[i],m="";return void 0!==l.type&&"DropDown"===l.type?m=c(f):"badgeCount"===l.type?m=e(f):(m+='<td class="'+i+"-column",m+=l["class"]?" "+l["class"]:"",m+=l.columnClass?" "+l.columnClass:"",m+='" ',m+=l.ngClass?a(l,"ngClass"):"",m+="lookup"===j.mode||"select"===j.mode?' ng-click="toggle_'+h.iterator+"({{ "+h.iterator+'.id }})"':"",m+=l.columnShow?a(l,"columnShow"):"",m+=l.ngBindHtml?'ng-bind-html="'+l.ngBindHtml+'" ':"",m+=">\n",m+=l.ngShow?"<span "+a(l,"ngShow")+">":"","lookup"!==j.mode&&(l.badges||l.badgeIcon&&l.badgePlacement&&"left"===l.badgePlacement)&&(m+=d(l)),h.hasChildren&&l.hasChildren&&(m+='<div class="level level-{{ '+h.iterator+'.event_level }}"><a href="" ng-click="{{ '+h.iterator+'.ngclick }}"> <i class="{{ '+h.iterator+'.ngicon }}"></i></a></div>'),"groups"===h.name&&(m+='<div class="group-name">'),"hosts"===h.name&&(m+='<div class="host-name">'),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(g=!1,l.linkTo?(m+='<a href="'+l.linkTo+'" ',g=!0):l.ngClick?(m+='<a href=""'+a(l,"ngClick")+" ",g=!0):l.ngHref?(m+='<a ng-href="'+l.ngHref+'" ',g=!0):(l.link||l.key&&(void 0===l.link||l.link))&&(m+='<a href="#/'+k+"/{{"+h.iterator+'.id }}" ',g=!0),l.awDroppable&&(m+=a(l,"awDroppable"),m+=l.dataAccept?a(l,"dataAccept"):""),l.awDraggable&&(m+=a(l,"awDraggable"),m+=l.dataContainment?a(l,"dataContainment"):"",m+=l.dataTreeId?a(l,"dataTreeId"):"",m+=l.dataGroupId?a(l,"dataGroupId"):"",m+=l.dataHostId?a(l,"dataHostId"):"",m+=l.dataType?a(l,"dataType"):""),l.awToolTip&&(m+=a(l,"awToolTip"),m+=l.dataPlacement?a(l,"dataPlacement"):"",m+=l.dataTipWatch?a(l,"dataTipWatch"):""),m+=g?">":""),l.ngShowIcon?m+='<i ng-show="'+l.ngShowIcon+'" class="'+l.icon+'"></i> ':l.icon&&(m+=b(l.icon)+" "),l.ngBindHtml||void 0!==l.showValue&&l.showValue!==!0||(m+=l.ngBind?"{{ "+l.ngBind+" }}":"{{"+h.iterator+"."+i+"}}"),l.text&&(m+=l.text),!(l.key||l.link||l.linkTo||l.ngClick||l.ngHref)||"lookup"===j.mode||"select"===j.mode||l.noLink||l.ngBindHtml||(m+="</a>"),("hosts"===h.name||"groups"===h.name)&&(m+="</div>"),m+=l.ngShow?"</span>":"",m+=l.appendHTML?'<div ng-show="'+l.appendHTML+' !== null" ng-bind-html-unsafe="'+l.appendHTML+'" class="level-{{ '+h.iterator+'.event_level }}-detail" ></div>\n':"","lookup"!==j.mode&&l.badgeIcon&&l.badgePlacement&&"left"!==l.badgePlacement&&(m+=d(l))),m+="</td>\n"}}]).factory("HelpCollapse",function(){return function(a){var b=a.hdr,c=a.content,d=a.show,e=a.idx,f=a.bind,g="";return g+='<div class="panel-group collapsible-help" ',g+=d?'ng-show="'+d+'"':"",g+=">\n",g+='<div class="panel panel-default">\n',g+='<div class="panel-heading" ng-click="accordionToggle(\'#accordion'+e+"')\">\n",g+='<h4 class="panel-title">\n',g+=b,g+='<i class="fa fa-minus pull-right collapse-help-icon" id="accordion'+e+'-icon"></i>',g+="</h4>\n",g+="</div>\n",g+='<div id="accordion'+e+'" class="panel-collapse collapse in">\n',g+='<div class="panel-body" ',g+=f?'ng-bind-html-unsafe="'+f+'" ':"",g+=">\n",g+=f?"":c,g+="</div>\n",g+="</div>\n",g+="</div>\n",g+="</div>\n"}}).factory("SearchWidget",function(){return function(a){var b,c,d,e=a.iterator,f=a.template,g=a.mini,h="",i=a.searchWidgets?a.searchWidgets:1;for(c=1;i>=c;c++){d=1===c?"":c,h+='<div class="',h+=a.size?a.size:"col-lg-4 col-md-6 col-sm-12 col-xs-12",h+='" id="search-widget-container'+d+'">\n',h+='<div class="input-group',h+=g?" input-group-sm":" input-group-sm",h+='">\n',h+='<div class="input-group-btn dropdown">\n',h+='<button type="button" ',h+='id="search_field_ddown" ',h+='class="btn btn-default ',h+='dropdown-toggle" data-toggle="dropdown"',h+=">\n",h+='<span ng-bind="'+e+"SearchFieldLabel"+d+'"></span>\n',h+='<span class="caret"></span>\n',h+="</button>\n",h+='<ul class="dropdown-menu" id="'+e+"SearchDropdown"+d+'">\n';for(b in f.fields)void 0!==f.fields[b].searchable&&f.fields[b].searchable!==!0||(void 0!==f.fields[b].searchWidget&&1!==f.fields[b].searchWidget||1!==c)&&f.fields[b].searchWidget!==c||(h+='<li><a href="" ng-click="setSearchField(\''+e+"','",h+=b+"','",h+=f.fields[b].searchLabel?f.fields[b].searchLabel+"', "+c+')">'+f.fields[b].searchLabel+"</a></li>\n":f.fields[b].label.replace(/<br \/>/g," ")+"', "+c+')">'+f.fields[b].label.replace(/<br \/>/g," ")+"</a></li>\n");h+="</ul>\n",h+="</div><!-- input-group-btn -->\n",h+='<select id="search_value_select" ng-show="'+e+"SelectShow"+d+'" ng-model="'+e+"SearchSelectValue"+d+'" ng-change="search(\''+e+"')\" ",h+='ng-options="c.name for c in '+e+"SearchSelectOpts"+d+'" class="form-control search-select',h+='"></select>\n',h+='<input id="search_value_input" type="text" ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+'" class="form-control" ng-model="'+e+"SearchValue"+d+'" aw-placeholder="'+e+"SearchPlaceholder"+d+'" type="text" ng-disabled="'+e+"InputDisable"+d+" || "+e+"HoldInput"+d+'" ng-keypress="startSearch($event,\''+e+"')\">\n",h+='<div class="input-group-btn" ng-show="'+e+"SelectShow"+d+'" >\n',h+='<button type="button" class="btn btn-default btn-small" ng-click="resetSearch(\''+e+'\')" aw-tool-tip="Clear the search" data-placement="top"><i class="fa fa-times"></i></button>\n',h+="</div><!-- input-group-btn -->\n",h+="</div><!-- input-group -->\n",h+='<a class="search-reset-start" ng-click="resetSearch(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || "+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-times"></i></a>\n',h+='<a class="search-reset-start" ng-click="search(\''+e+'\')"ng-hide="'+e+"SelectShow"+d+" || "+e+"InputHide"+d+" || !"+e+"ShowStartBtn"+d+" || "+e+"HoldInput"+d+" || "+e+"HideAllStartBtn"+d+'"><i class="fa fa-search"></i></a>\n',h+="</div>\n"}return h}}).factory("PaginateWidget",[function(){return function(a){var b=a.iterator,c=a.set,d="";return d+="<!-- Paginate Widget -->\n",d+='<div class="row page-row">\n',d+='<div class="col-lg-8">\n',d+='<ul class="pagination" ng-hide="'+b+"Loading || "+b+'_num_pages <= 1">\n',d+='<li ng-hide="'+b+'_page -5 <= 1 "><a href ng-click="getPage(1,\''+c+"','"+b+'\')"><i class="fa fa-angle-double-left"></i></a></li>\n',d+='<li ng-hide="'+b+'_page -1 <= 0"><a href ng-click="getPage('+b+"_page - 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-left"></i></a></li>\n',d+='<li ng-repeat="page in '+b+'_page_range" ng-class="pageIsActive(page,\''+b+"')\"><a href ng-click=\"getPage(page,'"+c+"','"+b+"')\">{{ page }}</a></li>\n",d+='<li ng-hide="'+b+"_page + 1 > "+b+'_num_pages"><a href ng-click="getPage('+b+"_page + 1,'"+c+"','"+b+'\')"><i class="fa fa-angle-right"></i></a></li>\n',d+='<li ng-hide="'+b+"_page +4 >= "+b+'_num_pages"><a href ng-click="getPage('+b+"_num_pages,'"+c+"','"+b+'\')"><i class="fa fa-angle-double-right"></i></a></li>\n',d+="</ul>\n",d+="</div>\n",d+='<div class="col-lg-4 col-md-4" ng-hide="'+b+"_mode == 'lookup'\">\n",d+='<div class="page-label">\n',d+="Page {{ "+b+"_page }} of {{ "+b+"_num_pages }} for {{ "+b+"_total_rows | number:0 }} "+c+".",d+="</div>\n",d+="</div>\n",d+="</div>\n"}}]),angular.module("License",["RestServices","Utilities","FormGenerator","PromptDialog","LicenseFormDefinition"]).factory("ViewLicense",["$location","$rootScope","GenerateForm","Rest","Alert","GetBasePath","ProcessErrors","FormatDate","Prompt","Empty","LicenseForm",function(a,b,c,d,e,f,g,h,i,j,k){return function(){var a,e=f("config"),l=c,m=angular.copy(k);d.setUrl(e),d.get().success(function(b){var c,d,e,f,g,k,n,o;for(c in m.fields)"time_remaining"!==c&&"license_status"!==c&&j(b.license_info[c])&&delete m.fields[c];(b.license_info.is_aws||j(b.license_info.license_date))&&(delete m.fields.license_date,delete m.fields.time_remaining),a=l.inject(m,{mode:"edit",modal:!0,related:!1}),l.reset(),a.formModalAction=function(){$("#form-modal").modal("hide")},a.formModalActionLabel="OK",a.formModalCancelShow=!1,a.formModalInfo="Purchase/Extend License",a.formModalHeader="Tower License",a.formModalInfoAction=function(){i({hdr:"Tower Licensing",body:'<p>Ansible Tower licenses can be purchased or extended by visiting <a id="license-link" href="http://www.ansible.com/ansible-pricing" target="_blank">the Ansible online store</a>. Would you like to purchase or extend your license now?</p>',"class":"btn-primary",action:function(){var a=$("#license-link").attr("href");window.open(a,"storeWindow")}})};for(c in m.fields)j(b.license_info[c])||(a[c]=b.license_info[c]);a.license_date&&(d=new Date(parseInt(a.license_date)),"1970"===d.getFullYear()&&(d=new Date(1e3*parseInt(a.license_date,10)),a.time_remaining=a.time_remaining+"000"),a.license_date=h(d),e=parseInt(a.time_remaining/864e5,10),f=a.time_remaining-864e5*e,g=parseInt(f/36e5,10),f-=36e5*g,k=parseInt(f/6e4,10),f-=6e4*k,n=parseInt(f/1e3,10),a.time_remaining=e+" days "+("0"+g).slice(-2)+":"+("0"+k).slice(-2)+":"+("0"+n).slice(-2)),a.free_instances_class=parseInt(a.free_instances)<=0?"field-failure":"field-success",o=b.license_info,void 0===o.valid_key||o.valid_key?void 0!==o.demo&&o.demo?(a.license_status="Demo",a.status_color="license-demo"):void 0!==o.date_expired&&o.date_expired?(a.license_status="Expired",a.status_color="license-expired"):void 0!==o.date_warning&&o.date_warning?(a.license_status="Expiration Warning",a.status_color="license-warning"):void 0!==o.free_instances&&parseInt(o.free_instances)<=0?(a.license_status="No available managed hosts",a.status_color="license-invalid"):(a.license_status="Valid",a.status_color="license-valid"):(a.license_status="Invalid",a.status_color="license-invalid")}).error(function(a,c){g(b,a,c,m,{hdr:"Error!",msg:"Failed to retrieve license. GET status: "+c})})}}]),angular.module("ListGenerator",["GeneratorHelpers"]).factory("GenerateList",["$location","$compile","$rootScope","SearchWidget","PaginateWidget","Attr","Icon","Column","DropDown","NavigationLink","Button","SelectIcon","Breadcrumbs",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{setList:function(a){this.list=a},attr:f,icon:g,has:function(a){return this.form[a]&&null!==this.form[a]&&void 0!==this.form[a]?!0:!1},hide:function(){$("#lookup-modal").modal("hide")},button:k,inject:function(a,c){var d;d=angular.element("lookup"===c.mode?document.getElementById("lookup-modal-body"):c.id?document.getElementById(c.id):document.getElementById("htmlTemplate")),this.setList(a),d.html(this.build(c)),c.prepend&&d.prepend(c.prepend),c.append&&d.append(c.append),this.scope=c.scope?c.scope:d.scope(),b(d)(this.scope),this.scope[a.iterator]=[],$(".tooltip").each(function(){$(this).remove()}),$(".popover").each(function(){$(this).remove()}),$(window).unbind("resize");try{$("#help-modal").empty().dialog("destroy")}catch(e){}return"lookup"===c.mode&&(this.scope.formModalActionDisabled=!1,this.scope.lookupHeader=c.hdr,$("#lookup-modal").modal({backdrop:"static",keyboard:!0}),$("#lookup-modal").unbind("hidden.bs.modal"),$(document).bind("keydown",function(a){27===a.keyCode&&$("#lookup-modal").modal("hide")})),this.scope},build:function(b){var c,g,j,k,n,o,p,q,r,s="",t=this.list;if(b.activityStream?(s+='<div class="nav-path">\n',s+='<ul class="breadcrumb">\n',s+='<li ng-repeat="crumb in breadcrumbs"><a href="" ng-click="closeStream(crumb.path)">{{ crumb.title }}</a></li>\n',s+='<li class="active">',s+=t.editTitle,s+="</li>\n</ul>\n</div>\n"):"lookup"===b.mode||void 0!==b.breadCrumbs&&!b.breadCrumbs||(s+=m({list:t,mode:b.mode})),"edit"===b.mode&&t.editInstructions&&(s+='<div class="alert alert-info alert-block">\n',s+='<button type="button" class="close" data-dismiss="alert">&times;</button>\n',s+="<strong>Hint: </strong>"+t.editInstructions+"\n",s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&!t.well||(s+='<div class="well">\n'),b.activityStream&&(s+='<div class="row">\n',s+='<div class="col-lg-12">\n',s+="<h5>{{ streamTitle }}</h5>\n",s+="</div>\n",s+="</div>\n"),s+='<div class="row">\n',"groups"!==t.name&&(s+=d(b.searchSize?{iterator:t.iterator,template:t,mini:!0,size:b.searchSize,searchWidgets:t.searchWidgets}:"summary"===b.mode?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-6"}:"lookup"===b.mode||void 0!==b.id?{iterator:t.iterator,template:t,mini:!0,size:"col-lg-8"}:{iterator:t.iterator,template:t,mini:!0})),"lookup"!==b.mode){c=a.path().replace(/^\//,"").split("/")[0],s+='<div class="',"groups"===t.name?s+="col-lg-12":b.searchSize?(g=parseInt(b.searchSize.replace(/([A-Z]|[a-z]|\-)/g,"")),g=t.searchWidgets?t.searchWidgets*g:g,s+="col-lg-"+(12-g)):s+="summary"===b.mode?"col-lg-6":void 0!==b.id?"col-lg-4":"col-lg-8 col-md-6",s+='">\n',s+='<div class="list-actions">\n';
for(j in t.actions)("all"===t.actions[j].mode||t.actions[j].mode===b.mode)&&(void 0===t.actions[j].basePaths||t.actions[j].basePaths&&t.actions[j].basePaths.indexOf(c)>-1)&&(s+=this.button({btn:t.actions[j],action:j,toolbar:!0}));"select"===b.mode&&t.selectInstructions&&(k={awPopOver:t.selectInstructions,dataPlacement:"top",dataContainer:"body","class":"btn-xs btn-help",awToolTip:"Click for help",dataTitle:"Help",iconSize:"fa-lg"},s+=this.button({btn:k,action:"help",toolbar:!0})),s+="</div><!-- list-acitons -->\n",s+="</div><!-- list-actions-column -->\n"}else s+='<div class="col-lg-7"></div>\n';s+="</div><!-- row -->\n","lookup"!==b.mode&&t.showTitle&&(s+='<div class="form-title">',s+="edit"===b.mode||"summary"===b.mode?t.editTitle:t.addTitle,s+="</div>\n"),s+='<table id="'+t.name+'_table" ',s+='class="table',s+=t["class"]?" "+t["class"]:"",s+="summary"===b.mode||"edit"===b.mode||"lookup"!==b.mode&&!b.id?"":" table-hover-inverse",s+=t.hover?" table-hover":"",s+="summary"===b.mode?" table-summary":"",s+='" ',s+=">\n",s+="<thead>\n",s+="<tr>\n",t.index&&(s+='<th class="col-lg-1 col-md-1 col-sm-1 hidden-xs">#</th>\n');for(n in t.fields)void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+='<th class="list-header',s+=t.fields[n].columnClass?" "+t.fields[n].columnClass:"",s+='" id="',s+=t.fields[n].id?t.fields[n].id:n+"-header",s+='"',s+=t.fields[n].columnShow?' ng-show="'+t.fields[n].columnShow+'" ':"",s+=void 0===t.fields[n].nosort||t.fields[n].nosort!==!0?" ng-click=\"sort('"+n+"')\"":"",s+=">",s+=t.fields[n].label,(void 0===t.fields[n].nosort||t.fields[n].nosort!==!0)&&(s+=' <i class="fa ',s+=t.fields[n].key?t.fields[n].desc?"fa-sort-down":"fa-sort-up":"fa-sort",s+='"></i></a>'),s+="</th>\n");"select"===b.mode||"lookup"===b.mode?s+="<th>Select</th>":"edit"===b.mode&&t.fieldActions&&(s+='<th class="actions-column',s+=t.fieldActions&&t.fieldActions.columnClass?" "+t.fieldActions.columnClass:"",s+='">Actions</th>\n'),s+="</tr>\n",s+="</thead>\n",s+="<tbody>\n",s+='<tr ng-class="'+t.iterator,s+="lookup"===b.mode||"select"===b.mode?".success_class":".active_class",s+='" ',s+='class="'+t.iterator+'_class" ',s+='ng-repeat="'+t.iterator+" in "+t.name,s+=t.orderBy?" | orderBy:'"+t.orderBy+"'":"",s+=t.filterBy?" | filter: "+t.filterBy:"",s+='">\n',t.index&&(s+='<td class="index-column hidden-xs">{{ $index + (('+t.iterator+"_page - 1) * "+t.iterator+"_page_size) + 1 }}.</td>\n"),o=2,c=t.base?t.base:t.name,c=c.replace(/^\//,"");for(n in t.fields)o++,void 0!==t.fields[n].searchOnly&&t.fields[n].searchOnly!==!1||"lookup"===b.mode&&void 0!==t.fields[n].excludeModal&&t.fields[n].excludeModal===!0||(s+=h({list:t,fld:n,options:b,base:c}));if("select"===b.mode||"lookup"===b.mode)s+='<td><input type="checkbox" ng-model="'+t.iterator+'.checked" name="check_{{'+t.iterator+'.id }}" ng-click="toggle_'+t.iterator+"({{ "+t.iterator+'.id }}, true)" ng-true-value="1" ng-false-value="0" id="check_{{'+t.iterator+'.id}}" /></td>';else if(("edit"===b.mode||"summary"===b.mode)&&t.fieldActions){s+='<td class="actions">';for(p in t.fieldActions)if("columnClass"!==p)if(t.fieldActions[p].type&&"DropDown"===t.fieldActions[p].type)s+=i({list:t,fld:p,options:b,base:c,type:"fieldActions",td:!1});else{q=t.fieldActions[p],s+="<a ",s+=q.href?'href="'+q.href+'" ':"",s+=q.ngHref?'ng-href="'+q.ngHref+'" ':"",s+="cancel"===p?'class="cancel red-txt" ':"",s+=q.awPopOver?'aw-pop-over="'+q.awPopOver+'" ':"",s+=q.dataPlacement?f(q,"dataPlacement"):"",s+=q.dataTitle?f(q,"dataTitle"):"";for(r in q)"ngHref"!==r&&"href"!==r&&"label"!==r&&"icon"!==r&&"class"!==r&&"iconClass"!==r&&"dataPlacement"!==r&&"awPopOver"!==r&&"dataTitle"!==r&&(s+=f(q,r));s+=">",s+=q.iconClass?'<i class="'+q.iconClass+'"></i>':l({action:p}),s+=q.label?" "+t.fieldActions[p].label:"",s+="</a>"}s+="</td>\n"}return s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+"Loading == false && "+t.name+'.length == 0">\n',s+='<td colspan="'+o+'">No records matched your search.</td>\n',s+="</tr>\n",s+='<tr class="info" ng-show="'+t.iterator+'Loading == true">\n',s+='<td colspan="'+o+'">Loading...</td>\n',s+="</tr>\n",s+="</tbody>\n",s+="</table>\n","select"!==b.mode||void 0!==b.selectButton&&!b.selectButton||(s+='<div class="navigation-buttons">\n',s+=' <button class="btn btn-sm btn-primary pull-right" aw-tool-tip="Complete your selection" ng-click="finishSelection()" ng-disabled="disableSelectBtn"><i class="fa fa-check"></i> Select</button>\n',s+="</div>\n"),"lookup"===b.mode||void 0!==t.well&&t.well!==!0||(s+="</div>\n"),"groups"!==t.name&&(s+=e("lookup"===b.mode||b.id&&"form-modal-body"===b.id?{set:t.name,iterator:t.iterator}:{set:t.name,iterator:t.iterator})),s}}}]),angular.module("PromptDialog",["Utilities"]).factory("Prompt",[function(){return function(a){var b,c=angular.element(document.getElementById("prompt-modal")),d=c.scope();d.promptHeader=a.hdr,d.promptBody=a.body,d.promptAction=a.action,b=null===a["class"]||void 0===a["class"]?"btn-danger":a["class"],$("#prompt_action_btn").removeClass(b).addClass(b),$(c).modal({backdrop:"static",keyboard:!0,show:!0})}}]),String.prototype.strReverse=function(){var a,b="";for(a=0;a<this.length;a++)b=this.charAt(a)+b;return b};var nScore=0;